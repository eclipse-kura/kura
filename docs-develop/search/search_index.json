{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the Eclipse Kura\u2122 Documentation The emergence of an Internet of Thing (IoT) service gateway model running modern software stacks, operating on the edge of an IoT deployment as an aggregator and controller, has opened up the possibility of enabling enterprise level technologies to IoT gateways. Advanced software frameworks, which abstract and isolate the developer from the complexity of the hardware and the networking sub-systems, re-define the development and re-usability of integrated hardware and software solutions. Eclipse Kura is an Eclipse IoT project that provides a platform for building IoT gateways. It is a smart application container that enables remote management of such gateways and provides a wide range of APIs for allowing you to write and deploy your own IoT application. Kura runs on top of the Java Virtual Machine (JVM) and leverages OSGi, a dynamic component system for Java, to simplify the process of writing reusable software building blocks. Kura APIs offer easy access to the underlying hardware including serial ports, GPS, watchdog, USB, GPIOs, I2C, etc. It also offer OSGI bundle to simplify the management of network configurations, the communication with IoT servers, and the remote management of the gateway. Kura components are designed as configurable OSGi Declarative Service exposing service API and raising events. While several Kura components are in pure Java, others are invoked through JNI and have a dependency on the Linux operating system. Kura comes with the following services: I/O Services Serial port access through javax.comm 2.0 API or OSGi I/O connection USB access and events through javax.usb, HID API, custom extensions Bluetooth access through javax.bluetooth or OSGi I/O connection Position Service for GPS information from an NMEA stream Clock Service for the synchronization of the system clock Kura API for GPIO/PWM/I2C/SPI access Data Services Store and forward functionality for the telemetry data collected by the gateway and published to remote servers. Policy-driven publishing system, which abstracts the application developer from the complexity of the network layer and the publishing protocol used. Eclipse Paho and its MQTT client provide the default messaging library used. Cloud Services Easy to use API layer for IoT application to communicate with a remote server. In addition to simple publish/subscribe, the Cloud Service API simplifies the implementation of more complex interaction flows like request/response or remote resource management. Allow for a single connection to a remote server to be shared across more than one application in the gateway providing the necessary topic partitioning. Configuration Service Leverage the OSGi specifications ConfigurationAdmin and MetaType to provide a snapshot service to import/export the configuration of all registered services in the container. Remote Management Allow for remote management of the IoT applications installed in Kura including their deployment, upgrade and configuration management. The Remote Management service relies on the Configuration Service and the Cloud Service. Networking Provide API for introspects and configure the network interfaces available in the gateway like Ethernet, Wifi, and Cellular modems. Watchdog Service Register critical components to the Watchdog Service, which will force a system reset through the hardware watchdog when a problem is detected. Web administration interface Offer a web-based management console running within the Kura container to manage the gateway. Drivers and Assets A unified model is introduced to simplify the communication with the devices attached to the gateway. The Driver encapsulates the communication protocol and its configuration parameters, while the Asset, which is generic across Drivers, models the information data channels towards the device. When an Asset is created, a Mirror of the device is automatically available for on-demand read and writes via Java APIs or via Cloud through remote messages. Wires Offers modular and visual data flow programming tool to define data collection and processing pipelines at the edge by simply selecting components from a palette and wiring them together. This way users can, for example, configure an Asset, periodically acquire data from its channels, store them in the gateway, filter or aggregate them using powerful SQL queries, and send the results to the Cloud. The Eclipse Kura Marketplace is a repository from which additional Wires components can be installed into your Kura runtime with a simple drag-and-drop.","title":"Home"},{"location":"#welcome-to-the-eclipse-kuratm-documentation","text":"The emergence of an Internet of Thing (IoT) service gateway model running modern software stacks, operating on the edge of an IoT deployment as an aggregator and controller, has opened up the possibility of enabling enterprise level technologies to IoT gateways. Advanced software frameworks, which abstract and isolate the developer from the complexity of the hardware and the networking sub-systems, re-define the development and re-usability of integrated hardware and software solutions. Eclipse Kura is an Eclipse IoT project that provides a platform for building IoT gateways. It is a smart application container that enables remote management of such gateways and provides a wide range of APIs for allowing you to write and deploy your own IoT application. Kura runs on top of the Java Virtual Machine (JVM) and leverages OSGi, a dynamic component system for Java, to simplify the process of writing reusable software building blocks. Kura APIs offer easy access to the underlying hardware including serial ports, GPS, watchdog, USB, GPIOs, I2C, etc. It also offer OSGI bundle to simplify the management of network configurations, the communication with IoT servers, and the remote management of the gateway. Kura components are designed as configurable OSGi Declarative Service exposing service API and raising events. While several Kura components are in pure Java, others are invoked through JNI and have a dependency on the Linux operating system. Kura comes with the following services: I/O Services Serial port access through javax.comm 2.0 API or OSGi I/O connection USB access and events through javax.usb, HID API, custom extensions Bluetooth access through javax.bluetooth or OSGi I/O connection Position Service for GPS information from an NMEA stream Clock Service for the synchronization of the system clock Kura API for GPIO/PWM/I2C/SPI access Data Services Store and forward functionality for the telemetry data collected by the gateway and published to remote servers. Policy-driven publishing system, which abstracts the application developer from the complexity of the network layer and the publishing protocol used. Eclipse Paho and its MQTT client provide the default messaging library used. Cloud Services Easy to use API layer for IoT application to communicate with a remote server. In addition to simple publish/subscribe, the Cloud Service API simplifies the implementation of more complex interaction flows like request/response or remote resource management. Allow for a single connection to a remote server to be shared across more than one application in the gateway providing the necessary topic partitioning. Configuration Service Leverage the OSGi specifications ConfigurationAdmin and MetaType to provide a snapshot service to import/export the configuration of all registered services in the container. Remote Management Allow for remote management of the IoT applications installed in Kura including their deployment, upgrade and configuration management. The Remote Management service relies on the Configuration Service and the Cloud Service. Networking Provide API for introspects and configure the network interfaces available in the gateway like Ethernet, Wifi, and Cellular modems. Watchdog Service Register critical components to the Watchdog Service, which will force a system reset through the hardware watchdog when a problem is detected. Web administration interface Offer a web-based management console running within the Kura container to manage the gateway. Drivers and Assets A unified model is introduced to simplify the communication with the devices attached to the gateway. The Driver encapsulates the communication protocol and its configuration parameters, while the Asset, which is generic across Drivers, models the information data channels towards the device. When an Asset is created, a Mirror of the device is automatically available for on-demand read and writes via Java APIs or via Cloud through remote messages. Wires Offers modular and visual data flow programming tool to define data collection and processing pipelines at the edge by simply selecting components from a palette and wiring them together. This way users can, for example, configure an Asset, periodically acquire data from its channels, store them in the gateway, filter or aggregate them using powerful SQL queries, and send the results to the Cloud. The Eclipse Kura Marketplace is a repository from which additional Wires components can be installed into your Kura runtime with a simple drag-and-drop.","title":"Welcome to the Eclipse Kura\u2122 Documentation"},{"location":"administration/application-management/","text":"Application Management Package Installation After developing your application and generating a deployment package that contains the bundles to be deployed (refer to the Development section for more information), you may install it on the gateway using the Packages option in the System area of the Kura Gateway Administration Console as shown below. Upon a successful installation, the new component appears in the Services list (shown as the Heater example in these screen captures). Its configuration may be modified according to the defined parameters as shown the Heater display that follows. Eclipse Kura Marketplace Kura allows the installation and update of running applications via the Eclipse Kura Marketplace. The Packages page has, in the top part of the page a section dedicated to the Eclipse Kura Marketplace. Dragging an application reference taken from the Eclipse Kura Marketplace to the specific area of the Kura Web Administrative Console will instruct Kura to download and install the corresponding package, as seen below: Warning If the installation from the Eclipse Marketplace fails, it can be for the lack of the correct certificates. In this case, import the certificate in the SSLKeystore from the Certificate List tab under the Security section. For more details about the procedure see here . If the bundle is an official add-on for Eclipse Kura, the following certificate has to be imported: -----BEGIN CERTIFICATE----- MIIHxzCCBq+gAwIBAgIQCCxCSNb4iszmNPNCflUcGTANBgkqhkiG9w0BAQsFADBP MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMSkwJwYDVQQDEyBE aWdpQ2VydCBUTFMgUlNBIFNIQTI1NiAyMDIwIENBMTAeFw0yMzA5MTEwMDAwMDBa Fw0yNDEwMTEyMzU5NTlaMG8xCzAJBgNVBAYTAkNBMRAwDgYDVQQIEwdPbnRhcmlv MQ8wDQYDVQQHEwZPdHRhd2ExJTAjBgNVBAoTHEVjbGlwc2Uub3JnIEZvdW5kYXRp b24sIEluYy4xFjAUBgNVBAMMDSouZWNsaXBzZS5vcmcwggIiMA0GCSqGSIb3DQEB AQUAA4ICDwAwggIKAoICAQC5hXH2cQoOQlXs5cQ5itZ1Dzct9R+bqr2HaF+imlgo xJ+Vw1ukfQPpSbmSO17A0hLgpSJyVgoPlpOKkg6LGTz8/2qB7DWHdQbg2p0IGQhr dm4oJN2qknnGNl/YYkjz2QJswr1M98raydmq0hqJi0M3q9JSO64O3wOMNduvNG+O rCBol7cbxLr7NNoFxZncZ9giP7QF0XYS6nA8dtIyXU3SARRSPn6y9OX1ttltveck 41ocaU8ORiTF7i89t649XAbtsvxUWM+qVnvlMxpaXqbhnrXMQ/pV2yfdU/qiFQth +RqFgBYoX5roxvmjB14+2qlymn236N4KOGhvfr+Fp8C8Fv6N6wFyKZctXewQ6IsA 3zDvJmF3QaCz6h88lg+IqbRjX5MOjhSkE7XDNKb+xAw5pYzkn9LP+QJLf0iYJw2D Z/X+InVPiZ5UdXyXWypN3q0W5vlz/TmWuVZv76/azZ3anoSPiKh+F3si1xZVEMZQ IkqsgUfq69M4KvHrdi4nGEOfdBHxjos9ul1AsJR57hrhIchsESthUK04e7d2LYOB hHAr0uJNdwFsFD2EBR25ogN83bZ8NaDrrdK2P6sV+hWWK+MY1qRuRub7/fYuR4AU 82toms9p1usjuyMmuIGEpLwk7jZe6XITcbXQEXDA8JKSZrZ/mOA4yTfIGR/gXXB7 wQIDAQABo4IDfTCCA3kwHwYDVR0jBBgwFoAUt2ui6qiqhIx56rTaD5iyxZV2ufQw HQYDVR0OBBYEFO8gL5LNWmSgCqbujR1qH0bUfrIrMCUGA1UdEQQeMByCDSouZWNs aXBzZS5vcmeCC2VjbGlwc2Uub3JnMD4GA1UdIAQ3MDUwMwYGZ4EMAQICMCkwJwYI KwYBBQUHAgEWG2h0dHA6Ly93d3cuZGlnaWNlcnQuY29tL0NQUzAOBgNVHQ8BAf8E BAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMIGPBgNVHR8EgYcw gYQwQKA+oDyGOmh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRMU1JT QVNIQTI1NjIwMjBDQTEtNC5jcmwwQKA+oDyGOmh0dHA6Ly9jcmw0LmRpZ2ljZXJ0 LmNvbS9EaWdpQ2VydFRMU1JTQVNIQTI1NjIwMjBDQTEtNC5jcmwwfwYIKwYBBQUH AQEEczBxMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wSQYI KwYBBQUHMAKGPWh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRM U1JTQVNIQTI1NjIwMjBDQTEtMS5jcnQwDAYDVR0TAQH/BAIwADCCAX4GCisGAQQB 1nkCBAIEggFuBIIBagFoAHYAdv+IPwq2+5VRwmHM9Ye6NLSkzbsp3GhCCp/mZ0xa OnQAAAGKhcgXYgAABAMARzBFAiEApQsk19PxbsLa452EPaPCXe7SAtpbm5RHnrwj yKAjWx0CICli5A3XAGwmg7IEy4lVA5YBt+mhvlegWkXrKt+oc/CoAHUASLDja9qm RzQP5WoC+p0w6xxSActW3SyB2bu/qznYhHMAAAGKhcgXWQAABAMARjBEAiAvx7lc MyKS6bbnsjbzYOLzJbcS2aAjCzQz4mFiuFA59AIgbt+rpE40/RO0JnFyLP9fsbUf pUj16ZYinOLorqDk9r0AdwDatr9rP7W2Ip+bwrtca+hwkXFsu1GEhTS9pD0wSNf7 qwAAAYqFyBc3AAAEAwBIMEYCIQDCrdQYGYA7BlsT5gXZmkutN15gDQDjlfJBxIRb Z0FAAgIhAIr0eNFvkpec6VJ5pPrNklFt78XP0NjEOJxjrCFTLKVdMA0GCSqGSIb3 DQEBCwUAA4IBAQCvENXlAGP311/gV5rMD2frsK+hlcs/4wjRKUS+nwp3RLTRd3w4 cZLHcsw9qCxeniuHsc/Wa6myr0kKdRc4V6movLq9vMdSjT9dDOZWtZgFaadB0+z2 A/Jsq1/AFFWqWisF64627j/Wf7RwuasxM0dnkAl3m9Hli5xKPgjbovXiH/dCeMvS MTxD1p3ewIYITzV+1Q5FoFuGyIyuh1Kzo7A41xKPe+XfWHqt+hKL8MWkJ9ACD2b0 ZDlD2OaX7K+vI8aWprmwVdpp3deuUoHgBqa1PkHPRmP0bFbamBdB4H6goRX5+DEy cTW2rRm8jFiLm1kf0/iOL7/ddw0yZQAUMthU -----END CERTIFICATE----- that has the following description: Common Name: *.eclipse.org Subject Alternative Names: *.eclipse.org, eclipse.org Organization: Eclipse.org Foundation, Inc. Locality: Ottawa State: Ontario Country: CA Valid From: September 10, 2023 Valid To: October 11, 2024 Issuer: DigiCert TLS RSA SHA256 2020 CA1, DigiCert Inc Write review of DigiCert Key Size: 4096 bit Serial Number: 082c4248d6f88acce634f3427e551c19 If the bundle is not an official one and it is not hosted by Eclipse, retrieve the certificate with this command: openssl s_client -showcerts -connect <download_link>:443 and import it in the SSLKeystore . Package Signature Once the selected application deployment package (dp) file is installed, it will be listed in the Packages page and detailed with the name of the deployment package, the version and the signature status. The value of the signature field can be true if all the bundles contained in the deployment package are digitally signed, or false if at least one of the bundles is not signed.","title":"Application Management"},{"location":"administration/application-management/#application-management","text":"","title":"Application Management"},{"location":"administration/application-management/#package-installation","text":"After developing your application and generating a deployment package that contains the bundles to be deployed (refer to the Development section for more information), you may install it on the gateway using the Packages option in the System area of the Kura Gateway Administration Console as shown below. Upon a successful installation, the new component appears in the Services list (shown as the Heater example in these screen captures). Its configuration may be modified according to the defined parameters as shown the Heater display that follows.","title":"Package Installation"},{"location":"administration/application-management/#eclipse-kura-marketplace","text":"Kura allows the installation and update of running applications via the Eclipse Kura Marketplace. The Packages page has, in the top part of the page a section dedicated to the Eclipse Kura Marketplace. Dragging an application reference taken from the Eclipse Kura Marketplace to the specific area of the Kura Web Administrative Console will instruct Kura to download and install the corresponding package, as seen below: Warning If the installation from the Eclipse Marketplace fails, it can be for the lack of the correct certificates. In this case, import the certificate in the SSLKeystore from the Certificate List tab under the Security section. For more details about the procedure see here . If the bundle is an official add-on for Eclipse Kura, the following certificate has to be imported: -----BEGIN CERTIFICATE----- MIIHxzCCBq+gAwIBAgIQCCxCSNb4iszmNPNCflUcGTANBgkqhkiG9w0BAQsFADBP MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMSkwJwYDVQQDEyBE aWdpQ2VydCBUTFMgUlNBIFNIQTI1NiAyMDIwIENBMTAeFw0yMzA5MTEwMDAwMDBa Fw0yNDEwMTEyMzU5NTlaMG8xCzAJBgNVBAYTAkNBMRAwDgYDVQQIEwdPbnRhcmlv MQ8wDQYDVQQHEwZPdHRhd2ExJTAjBgNVBAoTHEVjbGlwc2Uub3JnIEZvdW5kYXRp b24sIEluYy4xFjAUBgNVBAMMDSouZWNsaXBzZS5vcmcwggIiMA0GCSqGSIb3DQEB AQUAA4ICDwAwggIKAoICAQC5hXH2cQoOQlXs5cQ5itZ1Dzct9R+bqr2HaF+imlgo xJ+Vw1ukfQPpSbmSO17A0hLgpSJyVgoPlpOKkg6LGTz8/2qB7DWHdQbg2p0IGQhr dm4oJN2qknnGNl/YYkjz2QJswr1M98raydmq0hqJi0M3q9JSO64O3wOMNduvNG+O rCBol7cbxLr7NNoFxZncZ9giP7QF0XYS6nA8dtIyXU3SARRSPn6y9OX1ttltveck 41ocaU8ORiTF7i89t649XAbtsvxUWM+qVnvlMxpaXqbhnrXMQ/pV2yfdU/qiFQth +RqFgBYoX5roxvmjB14+2qlymn236N4KOGhvfr+Fp8C8Fv6N6wFyKZctXewQ6IsA 3zDvJmF3QaCz6h88lg+IqbRjX5MOjhSkE7XDNKb+xAw5pYzkn9LP+QJLf0iYJw2D Z/X+InVPiZ5UdXyXWypN3q0W5vlz/TmWuVZv76/azZ3anoSPiKh+F3si1xZVEMZQ IkqsgUfq69M4KvHrdi4nGEOfdBHxjos9ul1AsJR57hrhIchsESthUK04e7d2LYOB hHAr0uJNdwFsFD2EBR25ogN83bZ8NaDrrdK2P6sV+hWWK+MY1qRuRub7/fYuR4AU 82toms9p1usjuyMmuIGEpLwk7jZe6XITcbXQEXDA8JKSZrZ/mOA4yTfIGR/gXXB7 wQIDAQABo4IDfTCCA3kwHwYDVR0jBBgwFoAUt2ui6qiqhIx56rTaD5iyxZV2ufQw HQYDVR0OBBYEFO8gL5LNWmSgCqbujR1qH0bUfrIrMCUGA1UdEQQeMByCDSouZWNs aXBzZS5vcmeCC2VjbGlwc2Uub3JnMD4GA1UdIAQ3MDUwMwYGZ4EMAQICMCkwJwYI KwYBBQUHAgEWG2h0dHA6Ly93d3cuZGlnaWNlcnQuY29tL0NQUzAOBgNVHQ8BAf8E BAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMIGPBgNVHR8EgYcw gYQwQKA+oDyGOmh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRMU1JT QVNIQTI1NjIwMjBDQTEtNC5jcmwwQKA+oDyGOmh0dHA6Ly9jcmw0LmRpZ2ljZXJ0 LmNvbS9EaWdpQ2VydFRMU1JTQVNIQTI1NjIwMjBDQTEtNC5jcmwwfwYIKwYBBQUH AQEEczBxMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wSQYI KwYBBQUHMAKGPWh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRM U1JTQVNIQTI1NjIwMjBDQTEtMS5jcnQwDAYDVR0TAQH/BAIwADCCAX4GCisGAQQB 1nkCBAIEggFuBIIBagFoAHYAdv+IPwq2+5VRwmHM9Ye6NLSkzbsp3GhCCp/mZ0xa OnQAAAGKhcgXYgAABAMARzBFAiEApQsk19PxbsLa452EPaPCXe7SAtpbm5RHnrwj yKAjWx0CICli5A3XAGwmg7IEy4lVA5YBt+mhvlegWkXrKt+oc/CoAHUASLDja9qm RzQP5WoC+p0w6xxSActW3SyB2bu/qznYhHMAAAGKhcgXWQAABAMARjBEAiAvx7lc MyKS6bbnsjbzYOLzJbcS2aAjCzQz4mFiuFA59AIgbt+rpE40/RO0JnFyLP9fsbUf pUj16ZYinOLorqDk9r0AdwDatr9rP7W2Ip+bwrtca+hwkXFsu1GEhTS9pD0wSNf7 qwAAAYqFyBc3AAAEAwBIMEYCIQDCrdQYGYA7BlsT5gXZmkutN15gDQDjlfJBxIRb Z0FAAgIhAIr0eNFvkpec6VJ5pPrNklFt78XP0NjEOJxjrCFTLKVdMA0GCSqGSIb3 DQEBCwUAA4IBAQCvENXlAGP311/gV5rMD2frsK+hlcs/4wjRKUS+nwp3RLTRd3w4 cZLHcsw9qCxeniuHsc/Wa6myr0kKdRc4V6movLq9vMdSjT9dDOZWtZgFaadB0+z2 A/Jsq1/AFFWqWisF64627j/Wf7RwuasxM0dnkAl3m9Hli5xKPgjbovXiH/dCeMvS MTxD1p3ewIYITzV+1Q5FoFuGyIyuh1Kzo7A41xKPe+XfWHqt+hKL8MWkJ9ACD2b0 ZDlD2OaX7K+vI8aWprmwVdpp3deuUoHgBqa1PkHPRmP0bFbamBdB4H6goRX5+DEy cTW2rRm8jFiLm1kf0/iOL7/ddw0yZQAUMthU -----END CERTIFICATE----- that has the following description: Common Name: *.eclipse.org Subject Alternative Names: *.eclipse.org, eclipse.org Organization: Eclipse.org Foundation, Inc. Locality: Ottawa State: Ontario Country: CA Valid From: September 10, 2023 Valid To: October 11, 2024 Issuer: DigiCert TLS RSA SHA256 2020 CA1, DigiCert Inc Write review of DigiCert Key Size: 4096 bit Serial Number: 082c4248d6f88acce634f3427e551c19 If the bundle is not an official one and it is not hosted by Eclipse, retrieve the certificate with this command: openssl s_client -showcerts -connect <download_link>:443 and import it in the SSLKeystore .","title":"Eclipse Kura Marketplace"},{"location":"administration/application-management/#package-signature","text":"Once the selected application deployment package (dp) file is installed, it will be listed in the Packages page and detailed with the name of the deployment package, the version and the signature status. The value of the signature field can be true if all the bundles contained in the deployment package are digitally signed, or false if at least one of the bundles is not signed.","title":"Package Signature"},{"location":"administration/directory-layout/","text":"Directory Layout This section describes the default Kura directory layout that is created upon installation. The default installation directory is as follows: /opt/eclipse The kura sub-directory is a logical link on the actual Kura release directory: kura -> /opt/eclipse/kura_3.0.0_raspberry-pi-2 kura_3.0.0_raspberry-pi-2 Kura File Structure The idea behind the Kura file and folder structure is to separate user and framework configuration files, that is files that can be modified by the user to customize Kura behavior and files that are used by Kura to persist configurations. Moreover, some files are generated at runtime by Kura (i.e. database) and they are kept in specific folders. The user , console , log4j and packages directories contain files that can be modified by the user (i.e. the configuration for the logging or custom Kura properties). The framework folder keeps the configuration files used by Kura and that shouldn't be modified by the user. The data directory is used to persist files that are generated by Kura. Finally, the plugins folder contains all the jar files needed by Kura. All of the Kura files are located within /opt/eclipse/kura folder using the structure shown in the following table: Directory Description bin Scripts that start Kura. console This folder contains files that are used to customise the Kura Web UI appearance. data Data files generated by the Kura runtime. data/persistance Embedded Database files. packages Deployment package files that are not part of the standard Kura framework, but are installed at a later time. framework Configuration data for Kura framework. The user shouldn't directly modify these files. log Log file from the latest Kura installation. log4j Logger framework configuration plugins All of the libraries and Kura specific jar files needed for the framework execution. user Configuration files generated by the user or by Kura at runtime. These files can be modified by the user to customise the Kura behavior. user/snapshots XML snapshot files; up to 10 successive configurations including the original. user/security Files used by Kura to configure security. .data Backup files needed to restore factory configuration Log Files Kura regularly updates two log files in the /var/log directory: /var/log/kura-console.log - stores the standard console output of the application. This log file contains the eventual errors that are thrown upon Kura startup. /var/log/kura.log - stores all of the logging information from Kura bundles. The logger levels are defined in the log4j.xml configuration file as shown below: /opt/eclpse/kura/user/log4j.xml The default logger level in this file is set to INFO. This level may be modified for the whole application or for a specific package as shown in the following example: <Loggers> <Logger name= \"org.eclipse\" level= \"info\" additivity= \"false\" > <AppenderRef ref= \"RollingFile\" /> </Logger> <Logger name= \"org.eclipse.kura.net.admin\" level= \"debug\" additivity= \"false\" > <AppenderRef ref= \"RollingFile\" /> </Logger> <Root level= \"info\" > <AppenderRef ref= \"RollingFile\" /> </Root> </Loggers> In this example, the logger level is set to DEBUG only for the net.admin bundle. Additionally, more specific, properties may be defined as required for your particular logging needs. The logger levels are hierarchical, so that those in a deeper level of the hierarchy will apply; otherwise, the more general logger level will override them. Once the logger levels are modified as needed and the log4j.xml configuration file is saved, Kura automatically loads the new configuration. By default Kura checks the file every 30 seconds.","title":"Directory Layout"},{"location":"administration/directory-layout/#directory-layout","text":"This section describes the default Kura directory layout that is created upon installation. The default installation directory is as follows: /opt/eclipse The kura sub-directory is a logical link on the actual Kura release directory: kura -> /opt/eclipse/kura_3.0.0_raspberry-pi-2 kura_3.0.0_raspberry-pi-2","title":"Directory Layout"},{"location":"administration/directory-layout/#kura-file-structure","text":"The idea behind the Kura file and folder structure is to separate user and framework configuration files, that is files that can be modified by the user to customize Kura behavior and files that are used by Kura to persist configurations. Moreover, some files are generated at runtime by Kura (i.e. database) and they are kept in specific folders. The user , console , log4j and packages directories contain files that can be modified by the user (i.e. the configuration for the logging or custom Kura properties). The framework folder keeps the configuration files used by Kura and that shouldn't be modified by the user. The data directory is used to persist files that are generated by Kura. Finally, the plugins folder contains all the jar files needed by Kura. All of the Kura files are located within /opt/eclipse/kura folder using the structure shown in the following table: Directory Description bin Scripts that start Kura. console This folder contains files that are used to customise the Kura Web UI appearance. data Data files generated by the Kura runtime. data/persistance Embedded Database files. packages Deployment package files that are not part of the standard Kura framework, but are installed at a later time. framework Configuration data for Kura framework. The user shouldn't directly modify these files. log Log file from the latest Kura installation. log4j Logger framework configuration plugins All of the libraries and Kura specific jar files needed for the framework execution. user Configuration files generated by the user or by Kura at runtime. These files can be modified by the user to customise the Kura behavior. user/snapshots XML snapshot files; up to 10 successive configurations including the original. user/security Files used by Kura to configure security. .data Backup files needed to restore factory configuration","title":"Kura File Structure"},{"location":"administration/directory-layout/#log-files","text":"Kura regularly updates two log files in the /var/log directory: /var/log/kura-console.log - stores the standard console output of the application. This log file contains the eventual errors that are thrown upon Kura startup. /var/log/kura.log - stores all of the logging information from Kura bundles. The logger levels are defined in the log4j.xml configuration file as shown below: /opt/eclpse/kura/user/log4j.xml The default logger level in this file is set to INFO. This level may be modified for the whole application or for a specific package as shown in the following example: <Loggers> <Logger name= \"org.eclipse\" level= \"info\" additivity= \"false\" > <AppenderRef ref= \"RollingFile\" /> </Logger> <Logger name= \"org.eclipse.kura.net.admin\" level= \"debug\" additivity= \"false\" > <AppenderRef ref= \"RollingFile\" /> </Logger> <Root level= \"info\" > <AppenderRef ref= \"RollingFile\" /> </Root> </Loggers> In this example, the logger level is set to DEBUG only for the net.admin bundle. Additionally, more specific, properties may be defined as required for your particular logging needs. The logger levels are hierarchical, so that those in a deeper level of the hierarchy will apply; otherwise, the more general logger level will override them. Once the logger levels are modified as needed and the log4j.xml configuration file is saved, Kura automatically loads the new configuration. By default Kura checks the file every 30 seconds.","title":"Log Files"},{"location":"administration/remote-management-kapua/","text":"Remote Management with Eclipse Kapua Built-in Services Management This section describes the remote management of devices running Kura via Eclipse Kapua Console. The Eclipse Kapua Web Console provides the administration tools used for the management of the built-in services exposed by Kura. To remotely manage a device running Kura through the Eclipse Kapua Web Console, select the desired device from the Devices Table of the console and open the Configuration tab as shown in the screen capture below. Please refer to the Built-in Services section for a description of the available Services and their configuration parameters. Installation of a New Application As described in Application Management , a new application embedded in a deployment package can be deployed and configured using Eclipse Kapua Console. To do so, select a connected device and click on the Packages tab. Then, click on Install/Upgrade . The Install New Package window opens allowing the deployment package to be installed from an URL as shown in the screen capture below. Once installed, the new application parameters may be modified in the same way as the Built-in Services. Click on the Configuration tab to see the service that corresponds to your application. Snapshots As described in Snapshot Management , the overall Kura configuration, including the new installed applications, is stored in a snapshot xml file. The Eclipse Kapua Console also provides options to Download , Upload and Apply , or Rollback snapshots as shown in the screen capture below. Remote Command Execution from Eclipse Kapua Web Console The Eclipse Kapua Console provides the ability to run system commands directly on the device. Refer to Command Service for details on how to configure this service in Kura. It is also possible to send a script to execute using the File option of the Command tab in Eclipse Kapua Console as shown in the screen capture below. This script must be compressed into a zip file with the eventual associated resource files. Once the file is selected, click Execute . The zip file is sent embedded in an MQTT message on the device. The Command Service in the device stores the file in /tmp, unzips it, and tries to execute a shell script if one is present. Note that in this case, the Execute parameter cannot be empty; a simple command, such as \"ls -l /tmp\", may be entered.","title":"Remote Management with Eclipse Kapua"},{"location":"administration/remote-management-kapua/#remote-management-with-eclipse-kapua","text":"","title":"Remote Management with Eclipse Kapua"},{"location":"administration/remote-management-kapua/#built-in-services-management","text":"This section describes the remote management of devices running Kura via Eclipse Kapua Console. The Eclipse Kapua Web Console provides the administration tools used for the management of the built-in services exposed by Kura. To remotely manage a device running Kura through the Eclipse Kapua Web Console, select the desired device from the Devices Table of the console and open the Configuration tab as shown in the screen capture below. Please refer to the Built-in Services section for a description of the available Services and their configuration parameters.","title":"Built-in Services Management"},{"location":"administration/remote-management-kapua/#installation-of-a-new-application","text":"As described in Application Management , a new application embedded in a deployment package can be deployed and configured using Eclipse Kapua Console. To do so, select a connected device and click on the Packages tab. Then, click on Install/Upgrade . The Install New Package window opens allowing the deployment package to be installed from an URL as shown in the screen capture below. Once installed, the new application parameters may be modified in the same way as the Built-in Services. Click on the Configuration tab to see the service that corresponds to your application.","title":"Installation of a New Application"},{"location":"administration/remote-management-kapua/#snapshots","text":"As described in Snapshot Management , the overall Kura configuration, including the new installed applications, is stored in a snapshot xml file. The Eclipse Kapua Console also provides options to Download , Upload and Apply , or Rollback snapshots as shown in the screen capture below.","title":"Snapshots"},{"location":"administration/remote-management-kapua/#remote-command-execution-from-eclipse-kapua-web-console","text":"The Eclipse Kapua Console provides the ability to run system commands directly on the device. Refer to Command Service for details on how to configure this service in Kura. It is also possible to send a script to execute using the File option of the Command tab in Eclipse Kapua Console as shown in the screen capture below. This script must be compressed into a zip file with the eventual associated resource files. Once the file is selected, click Execute . The zip file is sent embedded in an MQTT message on the device. The Command Service in the device stores the file in /tmp, unzips it, and tries to execute a shell script if one is present. Note that in this case, the Execute parameter cannot be empty; a simple command, such as \"ls -l /tmp\", may be entered.","title":"Remote Command Execution from Eclipse Kapua Web Console"},{"location":"administration/snapshot-management/","text":"Snapshot Management The overall configuration of Kura is stored in an XML file called a snapshot. This file includes all of the parameters for every service running in Kura. The original configuration file is named snapshot_0.xml . This section describes how snapshots may be used. Each time a configuration change is made to one of the Kura components, a new XML file is created using the naming convention snapshot_[time as a long integer].xml . The nine most recent snapshots are saved, as well as the original snapshot 0. How to Access Snapshots To display snapshots using the Gateway Administration Console , select Settings from the System area, and then click on the Snapshots tab. The following three operations are available: Download , Upload and Apply , and Rollback . How to Use Snapshots Download The Download option provides the ability to save a snapshot file onto your computer. This file may then be edited, uploaded back to the device, or transferred to another equivalent device. Starting from Kura 5.1, the snapshot can be downloaded in two formats: XML : The original XML snapshot format. JSON : The JSON format used by the Configuration v2 REST APIs and CONF-V2 request handler . For example the downloaded snapshot can be used as is as a body for the PUT/configurableComponents/configurations/_update request. The takeSnapshot parameter specified by the CONF-V2 request is missing from the downloaded JSON file, if that parameter is not specified, a new snapshot will be created by default. Pressing the Download button will trigger a dialog that allows choosing the desired format. Upload and Apply The Upload and Apply option provides the ability to import an XML file from your computer and upload it onto the device. This function updates every service in Kura with the parameters defined in the XML file. Warning Carefully select the file to be uploaded. An incorrect file may crash Kura and make it unresponsive. Rollback The Rollback option provides the ability to restore the system to a previous configuration.","title":"Snapshot Management"},{"location":"administration/snapshot-management/#snapshot-management","text":"The overall configuration of Kura is stored in an XML file called a snapshot. This file includes all of the parameters for every service running in Kura. The original configuration file is named snapshot_0.xml . This section describes how snapshots may be used. Each time a configuration change is made to one of the Kura components, a new XML file is created using the naming convention snapshot_[time as a long integer].xml . The nine most recent snapshots are saved, as well as the original snapshot 0.","title":"Snapshot Management"},{"location":"administration/snapshot-management/#how-to-access-snapshots","text":"To display snapshots using the Gateway Administration Console , select Settings from the System area, and then click on the Snapshots tab. The following three operations are available: Download , Upload and Apply , and Rollback .","title":"How to Access Snapshots"},{"location":"administration/snapshot-management/#how-to-use-snapshots","text":"","title":"How to Use Snapshots"},{"location":"administration/snapshot-management/#download","text":"The Download option provides the ability to save a snapshot file onto your computer. This file may then be edited, uploaded back to the device, or transferred to another equivalent device. Starting from Kura 5.1, the snapshot can be downloaded in two formats: XML : The original XML snapshot format. JSON : The JSON format used by the Configuration v2 REST APIs and CONF-V2 request handler . For example the downloaded snapshot can be used as is as a body for the PUT/configurableComponents/configurations/_update request. The takeSnapshot parameter specified by the CONF-V2 request is missing from the downloaded JSON file, if that parameter is not specified, a new snapshot will be created by default. Pressing the Download button will trigger a dialog that allows choosing the desired format.","title":"Download"},{"location":"administration/snapshot-management/#upload-and-apply","text":"The Upload and Apply option provides the ability to import an XML file from your computer and upload it onto the device. This function updates every service in Kura with the parameters defined in the XML file. Warning Carefully select the file to be uploaded. An incorrect file may crash Kura and make it unresponsive.","title":"Upload and Apply"},{"location":"administration/snapshot-management/#rollback","text":"The Rollback option provides the ability to restore the system to a previous configuration.","title":"Rollback"},{"location":"administration/system-component-inventory/","text":"The Framework has the capability to report locally and to the associated cloud platform the list of currently installed components and their associated properties. This feature allows, locally and remotely, the system administrator to know which components are installed into the target device and the associated versions. The feature is particularly important for a system administrator because allows to identify vulnerable components and allows immediate actions in response. From the local Kura Web UI, the list of system components is available in the System Packages tab of the Device section. Once selected, the user will get the list of all the system installed components. The component's inventory list is available also via REST APIs and, with the same contract, from the cloud. The Mqtt contract defined for this component is available here","title":"System Component Inventory"},{"location":"cloud-api/app-dev-guide/","text":"Application developer guide This guide will provide information on how an application developer can leverage the new Generic Cloud Services APIs, in order to be able to properly use the CloudPublisher/CloudSubscriber API, publish a message, being notified of message delivery and of connection status changes. The Kura ExamplePublisher will be used as a reference. The application should bind itself to a CloudPublisher or CloudSubscriber instance, this can be done in different ways, such as using OSGi ServiceTracker s or by leveraging the Declarative Service layer. The recommended way to perform this operation is choosing the latter and allowing the user to customize the service references through component configuration. If the component metatype and definition are structured as described below, the Kura Web UI will show a dedicated widget in component configuration that helps the user to pick compatible CloudPublisher or CloudSubscriber instances. Write component definition The first step involves declaring the Publisher or Subscriber references in component definition: <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" name= \"org.eclipse.kura.example.publisher.ExamplePublisher\" activate= \"activate\" deactivate= \"deactivate\" modified= \"updated\" enabled= \"true\" immediate= \"true\" configuration-policy= \"require\" > <implementation class= \"org.eclipse.kura.example.publisher.ExamplePublisher\" /> <!-- If the component is configurable through the Kura ConfigurationService, it must expose a Service. --> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.publisher.ExamplePublisher\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <reference name= \"CloudPublisher\" policy= \"static\" bind= \"setCloudPublisher\" unbind= \"unsetCloudPublisher\" cardinality= \"0..1\" interface= \"org.eclipse.kura.cloudconnection.publisher.CloudPublisher\" /> <reference name= \"CloudSubscriber\" policy= \"static\" bind= \"setCloudSubscriber\" unbind= \"unsetCloudSubscriber\" cardinality= \"0..1\" interface= \"org.eclipse.kura.cloudconnection.subscriber.CloudSubscriber\" /> </scr:component> The snipped above shows the definition of Kura ExamplePublisher, this component is capable of sending and receiving messages, and therefore defines two references, the first to a CloudPublisher and the second to a CloudSubscriber . In order to allow the user to customize the bindings at runtime, the target attribute of the references should not be specified at this point in component definition, as it will be set by the Web UI. Reference cardinality should be use the 0..1 or 0..n form, as it is not guaranteed that the references will point to a valid service instance during all the lifetime of the application component. For example, references can not be bound if the application has not been configured by the user yet or if the target service is missing. Create component metatype Application metatype should declare an AD for each Publisher/Subscriber reference declared in component definition: <MetaData xmlns= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" localization= \"en_us\" > <OCD id= \"org.eclipse.kura.example.publisher.ExamplePublisher\" name= \"ExamplePublisher\" description= \"Example of a Configuring Kura Application.\" > <!-- ... --> <AD id= \"CloudPublisher.target\" name= \"CloudPublisher Target Filter\" type= \"String\" cardinality= \"0\" required= \"true\" default= \"(kura.service.pid=changeme)\" description= \"Specifies, as an OSGi target filter, the pid of the Cloud Publisher used to publish messages to the cloud platform.\" > </AD> <AD id= \"CloudSubscriber.target\" name= \"CloudSubscriber Target Filter\" type= \"String\" cardinality= \"0\" required= \"true\" default= \"(kura.service.pid=changeme)\" description= \"Specifies, as an OSGi target filter, the pid of the Cloud Subscriber used to receive messages from the cloud platform.\" > </AD> <!-- ... --> </OCD> <Designate pid= \"org.eclipse.kura.example.publisher.ExamplePublisher\" factoryPid= \"org.eclipse.kura.example.publisher.ExamplePublisher\" > <Object ocdref= \"org.eclipse.kura.example.publisher.ExamplePublisher\" /> </Designate> </MetaData> It is important to respect the following rules for some of the AD attributes: id This attribute must have the following form: <reference name>.target where <reference name> should match the value of the name attribute of the corresponding reference in component definition. required must be set to true default must not be empty and must be a valid OSGi filter. The Web UI will renderer a dedicated widget for picking CloudPublisher and CloudSubscriber instances: Write the bind/unbind methods in applicaiton code The last step involves defining some bind...() / unbind...() methods with a name that matches the values of the bind / unbind attributes of the references in component definition. public void setCloudPublisher ( CloudPublisher cloudPublisher ) { ... } public void unsetCloudPublisher ( CloudPublisher cloudPublisher ) { ... } public void setCloudSubscriber ( CloudSubscriber cloudSubscriber ) { ... } public void unsetCloudSubscriber ( CloudSubscriber cloudSubscriber ) { ... } As stated above, since reference cardinality is declared as 0.. , the application must be prepared to handle the cases where references are not satisfied, and therefore CloudPublisher and CloudSubscriber instances are not available. Publish a message If a CloudPublisher instance is bound, the application can publish messages using its publish() method: if ( nonNull ( this . cloudPublisher )) { KuraMessage message = new KuraMessage ( payload ); String messageId = this . cloudPublisher . publish ( message ); } Receiving messages using a CloudSubscriber In order to receive messages from a CloudSubscriber , the application must implement and attach a CloudSubscriberListener to it. This can be done for example during CloudSubscriber binding: public class ExamplePublisher implements CloudSubscriberListener , ... { ... public void setCloudSubscriber ( CloudSubscriber cloudSubscriber ) { this . cloudSubscriber = cloudSubscriber ; this . cloudSubscriber . registerCloudSubscriberListener ( ExamplePublisher . this ); ... } public void unsetCloudSubscriber ( CloudSubscriber cloudSubscriber ) { this . cloudSubscriber . unregisterCloudSubscriberListener ( ExamplePublisher . this ); ... this . cloudSubscriber = null ; } ... @Override public void onMessageArrived ( KuraMessage message ) { logReceivedMessage ( message ); } ... } The CloudSubscriber will invoke the onMessageArrived() method when new messages are received. Receiving connection state notifications If an application is interested in cloud connection status change events (connected, disconnected, etc), it can implement and attach a CloudConnectionListener to a CloudPublisher or CloudSubscriber instance. public class ExamplePublisher implements CloudConnectionListener , ... { ... public void setCloudPublisher ( CloudPublisher cloudPublisher ) { this . cloudPublisher = cloudPublisher ; this . cloudPublisher . registerCloudConnectionListener ( ExamplePublisher . this ); ... } public void unsetCloudPublisher ( CloudPublisher cloudPublisher ) { this . cloudPublisher . unregisterCloudConnectionListener ( ExamplePublisher . this ); ... this . cloudPublisher = null ; } public void setCloudSubscriber ( CloudSubscriber cloudSubscriber ) { this . cloudSubscriber = cloudSubscriber ; ... this . cloudSubscriber . registerCloudConnectionListener ( ExamplePublisher . this ); } public void unsetCloudSubscriber ( CloudSubscriber cloudSubscriber ) { ... this . cloudSubscriber . unregisterCloudConnectionListener ( ExamplePublisher . this ); this . cloudSubscriber = null ; } ... @Override public void onConnectionEstablished () { logger . info ( \"Connection established\" ); } @Override public void onConnectionLost () { logger . warn ( \"Connection lost!\" ); } @Override public void onDisconnected () { logger . warn ( \"On disconnected\" ); } ... } Receiving message delivery notifications If an application is interested in message confirmation events and the underlying cloud connection supports it, it can implement and attach a CloudDeliveryListener to a CloudPublisher instance. public class ExamplePublisher implements CloudDeliveryListener , ... { ... public void setCloudPublisher ( CloudPublisher cloudPublisher ) { this . cloudPublisher = cloudPublisher ; ... this . cloudPublisher . registerCloudDeliveryListener ( ExamplePublisher . this ); } public void unsetCloudPublisher ( CloudPublisher cloudPublisher ) { ... this . cloudPublisher . registerCloudDeliveryListener ( ExamplePublisher . this ); this . cloudPublisher = null ; } ... @Override public void onMessageConfirmed ( String messageId ) { logger . info ( \"Confirmed message with id: {}\" , messageId ); } ... } The CloudSubscriber will invoke the onMessageConfirmed() method when a published message is confirmed. In order to determine which message has been confirmed, the provided messageId can be compared with the id returned by the publish() call that published the message. Please note that if the underlying cloud connection is not able to provide message confirmation for the published message, the id returned by publish() will be null .","title":"Application Developer Guide"},{"location":"cloud-api/app-dev-guide/#application-developer-guide","text":"This guide will provide information on how an application developer can leverage the new Generic Cloud Services APIs, in order to be able to properly use the CloudPublisher/CloudSubscriber API, publish a message, being notified of message delivery and of connection status changes. The Kura ExamplePublisher will be used as a reference. The application should bind itself to a CloudPublisher or CloudSubscriber instance, this can be done in different ways, such as using OSGi ServiceTracker s or by leveraging the Declarative Service layer. The recommended way to perform this operation is choosing the latter and allowing the user to customize the service references through component configuration. If the component metatype and definition are structured as described below, the Kura Web UI will show a dedicated widget in component configuration that helps the user to pick compatible CloudPublisher or CloudSubscriber instances. Write component definition The first step involves declaring the Publisher or Subscriber references in component definition: <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" name= \"org.eclipse.kura.example.publisher.ExamplePublisher\" activate= \"activate\" deactivate= \"deactivate\" modified= \"updated\" enabled= \"true\" immediate= \"true\" configuration-policy= \"require\" > <implementation class= \"org.eclipse.kura.example.publisher.ExamplePublisher\" /> <!-- If the component is configurable through the Kura ConfigurationService, it must expose a Service. --> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.publisher.ExamplePublisher\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <reference name= \"CloudPublisher\" policy= \"static\" bind= \"setCloudPublisher\" unbind= \"unsetCloudPublisher\" cardinality= \"0..1\" interface= \"org.eclipse.kura.cloudconnection.publisher.CloudPublisher\" /> <reference name= \"CloudSubscriber\" policy= \"static\" bind= \"setCloudSubscriber\" unbind= \"unsetCloudSubscriber\" cardinality= \"0..1\" interface= \"org.eclipse.kura.cloudconnection.subscriber.CloudSubscriber\" /> </scr:component> The snipped above shows the definition of Kura ExamplePublisher, this component is capable of sending and receiving messages, and therefore defines two references, the first to a CloudPublisher and the second to a CloudSubscriber . In order to allow the user to customize the bindings at runtime, the target attribute of the references should not be specified at this point in component definition, as it will be set by the Web UI. Reference cardinality should be use the 0..1 or 0..n form, as it is not guaranteed that the references will point to a valid service instance during all the lifetime of the application component. For example, references can not be bound if the application has not been configured by the user yet or if the target service is missing. Create component metatype Application metatype should declare an AD for each Publisher/Subscriber reference declared in component definition: <MetaData xmlns= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" localization= \"en_us\" > <OCD id= \"org.eclipse.kura.example.publisher.ExamplePublisher\" name= \"ExamplePublisher\" description= \"Example of a Configuring Kura Application.\" > <!-- ... --> <AD id= \"CloudPublisher.target\" name= \"CloudPublisher Target Filter\" type= \"String\" cardinality= \"0\" required= \"true\" default= \"(kura.service.pid=changeme)\" description= \"Specifies, as an OSGi target filter, the pid of the Cloud Publisher used to publish messages to the cloud platform.\" > </AD> <AD id= \"CloudSubscriber.target\" name= \"CloudSubscriber Target Filter\" type= \"String\" cardinality= \"0\" required= \"true\" default= \"(kura.service.pid=changeme)\" description= \"Specifies, as an OSGi target filter, the pid of the Cloud Subscriber used to receive messages from the cloud platform.\" > </AD> <!-- ... --> </OCD> <Designate pid= \"org.eclipse.kura.example.publisher.ExamplePublisher\" factoryPid= \"org.eclipse.kura.example.publisher.ExamplePublisher\" > <Object ocdref= \"org.eclipse.kura.example.publisher.ExamplePublisher\" /> </Designate> </MetaData> It is important to respect the following rules for some of the AD attributes: id This attribute must have the following form: <reference name>.target where <reference name> should match the value of the name attribute of the corresponding reference in component definition. required must be set to true default must not be empty and must be a valid OSGi filter. The Web UI will renderer a dedicated widget for picking CloudPublisher and CloudSubscriber instances: Write the bind/unbind methods in applicaiton code The last step involves defining some bind...() / unbind...() methods with a name that matches the values of the bind / unbind attributes of the references in component definition. public void setCloudPublisher ( CloudPublisher cloudPublisher ) { ... } public void unsetCloudPublisher ( CloudPublisher cloudPublisher ) { ... } public void setCloudSubscriber ( CloudSubscriber cloudSubscriber ) { ... } public void unsetCloudSubscriber ( CloudSubscriber cloudSubscriber ) { ... } As stated above, since reference cardinality is declared as 0.. , the application must be prepared to handle the cases where references are not satisfied, and therefore CloudPublisher and CloudSubscriber instances are not available. Publish a message If a CloudPublisher instance is bound, the application can publish messages using its publish() method: if ( nonNull ( this . cloudPublisher )) { KuraMessage message = new KuraMessage ( payload ); String messageId = this . cloudPublisher . publish ( message ); } Receiving messages using a CloudSubscriber In order to receive messages from a CloudSubscriber , the application must implement and attach a CloudSubscriberListener to it. This can be done for example during CloudSubscriber binding: public class ExamplePublisher implements CloudSubscriberListener , ... { ... public void setCloudSubscriber ( CloudSubscriber cloudSubscriber ) { this . cloudSubscriber = cloudSubscriber ; this . cloudSubscriber . registerCloudSubscriberListener ( ExamplePublisher . this ); ... } public void unsetCloudSubscriber ( CloudSubscriber cloudSubscriber ) { this . cloudSubscriber . unregisterCloudSubscriberListener ( ExamplePublisher . this ); ... this . cloudSubscriber = null ; } ... @Override public void onMessageArrived ( KuraMessage message ) { logReceivedMessage ( message ); } ... } The CloudSubscriber will invoke the onMessageArrived() method when new messages are received. Receiving connection state notifications If an application is interested in cloud connection status change events (connected, disconnected, etc), it can implement and attach a CloudConnectionListener to a CloudPublisher or CloudSubscriber instance. public class ExamplePublisher implements CloudConnectionListener , ... { ... public void setCloudPublisher ( CloudPublisher cloudPublisher ) { this . cloudPublisher = cloudPublisher ; this . cloudPublisher . registerCloudConnectionListener ( ExamplePublisher . this ); ... } public void unsetCloudPublisher ( CloudPublisher cloudPublisher ) { this . cloudPublisher . unregisterCloudConnectionListener ( ExamplePublisher . this ); ... this . cloudPublisher = null ; } public void setCloudSubscriber ( CloudSubscriber cloudSubscriber ) { this . cloudSubscriber = cloudSubscriber ; ... this . cloudSubscriber . registerCloudConnectionListener ( ExamplePublisher . this ); } public void unsetCloudSubscriber ( CloudSubscriber cloudSubscriber ) { ... this . cloudSubscriber . unregisterCloudConnectionListener ( ExamplePublisher . this ); this . cloudSubscriber = null ; } ... @Override public void onConnectionEstablished () { logger . info ( \"Connection established\" ); } @Override public void onConnectionLost () { logger . warn ( \"Connection lost!\" ); } @Override public void onDisconnected () { logger . warn ( \"On disconnected\" ); } ... } Receiving message delivery notifications If an application is interested in message confirmation events and the underlying cloud connection supports it, it can implement and attach a CloudDeliveryListener to a CloudPublisher instance. public class ExamplePublisher implements CloudDeliveryListener , ... { ... public void setCloudPublisher ( CloudPublisher cloudPublisher ) { this . cloudPublisher = cloudPublisher ; ... this . cloudPublisher . registerCloudDeliveryListener ( ExamplePublisher . this ); } public void unsetCloudPublisher ( CloudPublisher cloudPublisher ) { ... this . cloudPublisher . registerCloudDeliveryListener ( ExamplePublisher . this ); this . cloudPublisher = null ; } ... @Override public void onMessageConfirmed ( String messageId ) { logger . info ( \"Confirmed message with id: {}\" , messageId ); } ... } The CloudSubscriber will invoke the onMessageConfirmed() method when a published message is confirmed. In order to determine which message has been confirmed, the provided messageId can be compared with the id returned by the publish() call that published the message. Please note that if the underlying cloud connection is not able to provide message confirmation for the published message, the id returned by publish() will be null .","title":"Application developer guide"},{"location":"cloud-api/built-in-cloud/","text":"Built-in Cloud Services Eclipse Kura provides by default a set of services used to connect to a cloud platform. The following sections describe the services and how to configure them. The CloudService API is deprecated since Kura 4.0. The functionalities provided by CloudService are now provided by the CloudEndpoint and CloudConnectionManager service interfaces. See the section describing the Kura 4.0 cloud connection model for more details. The DataService and MqttDataTrasport APIs are not deprecated in Kura 4.0. CloudService The CloudService provides an easy-to-use API layer for the M2M application to communicate with a remote server. It operates as a decorator for the DataService, providing add-on features over the management of the transport layer. In addition to simple publish/subscribe, the CloudService API simplifies the implementation of more complex interaction flows like request/response or remote resource management. The CloudService abstracts the developers from the complexity of the transport protocol and payload format used in the communication. The CloudService allows a single connection to a remote server to be shared across more than one application in the gateway providing the necessary topic partitioning. Its functions include: Adds application topic prefixes to allow for a single remote server connection to be shared across applications. Defines a payload data model and provides default encoding/decoding serializers. Publishes life-cycle messages when the device and applications start and stop. To use this service, select the CloudServices option located in the System area and select the CloudService tab as shown in the screen capture below. The CloudService provides the following configuration parameters: device.display-name - defines the device display name given by the system. (Required field.) device.custom-name - defines the custom device display name if the device.display-name parameter is set to \"Custom\". topic.control-prefix - defines the topic prefix for system messages. encode.gzip - defines if the message payloads are sent compressed. republish.mqtt.birth.cert.on.gps.lock - when set to true, forces a republish of the MQTT Birth Certificate when a GPS correct position lock is received. The device is then registered with its real coordinates. (Required field.) republish.mqtt.birth.cert.on.modem.detect - when set to true, forces a republish of the MQTT Birth Certificate when the service receives a modem detection event. (Required field.) enable.default.subscriptions - when set to true, the gateway will not be remotely manageable. payload.encoding - Specify the message payload encoding. The possible options are Kura Protobuf and Simple JSON . The default CloudService implementations publishes the following lifecycle messages : BIRTH message : sent immediately when device is connected to the cloud platform. The BIRTH message is published with priority 0 and QoS 1; DISCONNECT message : sent immediately before device is disconnected from the cloud platform. The DISCONNECT message is published with priority 0 and QoS 0; delayed BIRTH message : sent when new cloud application handler becomes available, a DP is installed or removed, GPS position is locked (can be disabled), or when modem status changes (can be disabled). These messages are cached for 30 seconds before sending. If no other message of such type arrives the message is sent; otherwise the BIRTH is cached and the timeout restarts. This is to avoid sending multiple messages when the framework starts. The message is published with priority 0 and QoS 1; MqttDataTransport The MqttDataTransport service provides the ability to connect to a remote broker, publish messages, subscribe to topics, receive messages on the subscribed topics, and disconnect from the remote message broker. To use this service, select the MqttDataTransport option located in the System area and select the CloudService tab as shown in the screen capture below. The MqttDataTransport service provides the following configuration parameters: broker-url - defines the URL of the MQTT broker to connect to. (Required field.) topic.context.account-name - defines the name of the account to which the device belongs. username and password - define the username and password that have been assigned to the device by the account administrator (generally username is account-name_broker). (Required field.) client-id - defines the identifier of the MQTT client representing the device when connecting to the MQTT broker. If left empty, it is automatically determined by the client software as the MAC address of the main network interface (in general numbers and uppercase letters without ':'). This identifier has to be unique within your account. keep-alive - defines the \"keep alive\" interval measured in seconds. It specifies the maximum amount of time that should pass without communication between the client and the server. The client will ensure that at least one message travels across the network within each keep alive period. In the absence of a data-related message during this time period, the client will send a very small MQTT \"ping\" message that the server will acknowledge. The keep alive interval enables the client to detect when the server is no longer available without having to wait for the long TCP/IP timeout. (Required field.) timeout - sets the timeout used for all interactions with the MQTT broker. (Required field.) clean-session - controls the behavior of both the client and the server at the time of connect and disconnect. When this parameter is set to true, the state information is discarded at connect and disconnect; when set to false, the state information is maintained. (Required field.) lwt parameters - define the MQTT \"Last Will and Testament\" (LWT) settings for the client. In the event that the client unexpectedly loses its connection to the server, the server publishes the LWT message (lwt.payload) to the LWT topic on behalf of the client. This allows other clients (subscribed to the LWT topic) to be made aware that the client has disconnected. LWT parameters that may be configured include: lwt.topic lwt.payload lwt.qos lwt.retain in-flight.persistence - defines the storage type where in-flight messages are persisted across reconnections. They may be stored in memory, or in a file on the disk. (Required field.) protocol-version - defines the MQTT Protocol version to be used. This value may be 3.1 or 3.1.1. ssl parameters - defines the SSL configuration. SSL parameters that may be configured include: ssl.hostname.verification ssl.default.cipherSuites ssl.certificate.alias","title":"Built-in Cloud Services"},{"location":"cloud-api/built-in-cloud/#built-in-cloud-services","text":"Eclipse Kura provides by default a set of services used to connect to a cloud platform. The following sections describe the services and how to configure them. The CloudService API is deprecated since Kura 4.0. The functionalities provided by CloudService are now provided by the CloudEndpoint and CloudConnectionManager service interfaces. See the section describing the Kura 4.0 cloud connection model for more details. The DataService and MqttDataTrasport APIs are not deprecated in Kura 4.0.","title":"Built-in Cloud Services"},{"location":"cloud-api/built-in-cloud/#cloudservice","text":"The CloudService provides an easy-to-use API layer for the M2M application to communicate with a remote server. It operates as a decorator for the DataService, providing add-on features over the management of the transport layer. In addition to simple publish/subscribe, the CloudService API simplifies the implementation of more complex interaction flows like request/response or remote resource management. The CloudService abstracts the developers from the complexity of the transport protocol and payload format used in the communication. The CloudService allows a single connection to a remote server to be shared across more than one application in the gateway providing the necessary topic partitioning. Its functions include: Adds application topic prefixes to allow for a single remote server connection to be shared across applications. Defines a payload data model and provides default encoding/decoding serializers. Publishes life-cycle messages when the device and applications start and stop. To use this service, select the CloudServices option located in the System area and select the CloudService tab as shown in the screen capture below. The CloudService provides the following configuration parameters: device.display-name - defines the device display name given by the system. (Required field.) device.custom-name - defines the custom device display name if the device.display-name parameter is set to \"Custom\". topic.control-prefix - defines the topic prefix for system messages. encode.gzip - defines if the message payloads are sent compressed. republish.mqtt.birth.cert.on.gps.lock - when set to true, forces a republish of the MQTT Birth Certificate when a GPS correct position lock is received. The device is then registered with its real coordinates. (Required field.) republish.mqtt.birth.cert.on.modem.detect - when set to true, forces a republish of the MQTT Birth Certificate when the service receives a modem detection event. (Required field.) enable.default.subscriptions - when set to true, the gateway will not be remotely manageable. payload.encoding - Specify the message payload encoding. The possible options are Kura Protobuf and Simple JSON . The default CloudService implementations publishes the following lifecycle messages : BIRTH message : sent immediately when device is connected to the cloud platform. The BIRTH message is published with priority 0 and QoS 1; DISCONNECT message : sent immediately before device is disconnected from the cloud platform. The DISCONNECT message is published with priority 0 and QoS 0; delayed BIRTH message : sent when new cloud application handler becomes available, a DP is installed or removed, GPS position is locked (can be disabled), or when modem status changes (can be disabled). These messages are cached for 30 seconds before sending. If no other message of such type arrives the message is sent; otherwise the BIRTH is cached and the timeout restarts. This is to avoid sending multiple messages when the framework starts. The message is published with priority 0 and QoS 1;","title":"CloudService"},{"location":"cloud-api/built-in-cloud/#mqttdatatransport","text":"The MqttDataTransport service provides the ability to connect to a remote broker, publish messages, subscribe to topics, receive messages on the subscribed topics, and disconnect from the remote message broker. To use this service, select the MqttDataTransport option located in the System area and select the CloudService tab as shown in the screen capture below. The MqttDataTransport service provides the following configuration parameters: broker-url - defines the URL of the MQTT broker to connect to. (Required field.) topic.context.account-name - defines the name of the account to which the device belongs. username and password - define the username and password that have been assigned to the device by the account administrator (generally username is account-name_broker). (Required field.) client-id - defines the identifier of the MQTT client representing the device when connecting to the MQTT broker. If left empty, it is automatically determined by the client software as the MAC address of the main network interface (in general numbers and uppercase letters without ':'). This identifier has to be unique within your account. keep-alive - defines the \"keep alive\" interval measured in seconds. It specifies the maximum amount of time that should pass without communication between the client and the server. The client will ensure that at least one message travels across the network within each keep alive period. In the absence of a data-related message during this time period, the client will send a very small MQTT \"ping\" message that the server will acknowledge. The keep alive interval enables the client to detect when the server is no longer available without having to wait for the long TCP/IP timeout. (Required field.) timeout - sets the timeout used for all interactions with the MQTT broker. (Required field.) clean-session - controls the behavior of both the client and the server at the time of connect and disconnect. When this parameter is set to true, the state information is discarded at connect and disconnect; when set to false, the state information is maintained. (Required field.) lwt parameters - define the MQTT \"Last Will and Testament\" (LWT) settings for the client. In the event that the client unexpectedly loses its connection to the server, the server publishes the LWT message (lwt.payload) to the LWT topic on behalf of the client. This allows other clients (subscribed to the LWT topic) to be made aware that the client has disconnected. LWT parameters that may be configured include: lwt.topic lwt.payload lwt.qos lwt.retain in-flight.persistence - defines the storage type where in-flight messages are persisted across reconnections. They may be stored in memory, or in a file on the disk. (Required field.) protocol-version - defines the MQTT Protocol version to be used. This value may be 3.1 or 3.1.1. ssl parameters - defines the SSL configuration. SSL parameters that may be configured include: ssl.hostname.verification ssl.default.cipherSuites ssl.certificate.alias","title":"MqttDataTransport"},{"location":"cloud-api/cloud-conn-dev-guide/","text":"Cloud connection developer guide This guide will provide information on how a cloud connection developer can leverage the new Generic Cloud Services APIs. As reference, this guide will use the Eclipse IoT WG namespace implementation bundle available here Implement CloudEndpoint and CloudConnectionManager In order to leverage the new APIs, and be managed by the Kura Web UI, the Cloud Connection implementation bundle must implement CloudEndpont and, if log-lived connections are supported, the CloudConnectionManager interface must be implemented as well. The ending class should be something as follows: public class CloudConnectionManagerImpl implements CloudConnectionManager , CloudEndpoint , ... { @Override public boolean isConnected () { ... } @Override public void connect () throws KuraConnectException { ... } @Override public void disconnect () { ... } @Override public Map < String , String > getInfo () { ... } @Override public void registerCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ) { ... } @Override public void unregisterCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ) { ... } } A corresponding component definition should be provided in the OSGI-INF folder exposing the implementation of CloudEndpoint and CloudConnectionManager interfaces. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" > <implementation class= \"org.eclipse.kura.internal.cloudconnection.eclipseiot.mqtt.cloud.CloudConnectionManagerImpl\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> <provide interface= \"org.eclipse.kura.cloudconnection.CloudConnectionManager\" /> <provide interface= \"org.eclipse.kura.cloudconnection.CloudEndpoint\" /> <!-- ... --> </service> <!-- ... --> <property name= \"kura.ui.service.hide\" type= \"Boolean\" value= \"true\" /> <property name= \"kura.ui.factory.hide\" type= \"String\" value= \"true\" /> </scr:component> In order to be fully compliant with the Web UI requirements, the CloudConnection component definition should provide two properties kura.ui.service.hide and kura.ui.factory.hide to hide the component from the left side part of the UI dedicated to display the services list. Implement the CloudConnectionFactory interface The CloudConnectionFactory is responsible to manage the cloud connection instance lifecycle by creating the CloudEndpoint instance and all the required services needed to publish or receive messages from the cloud platform. As a reference, please have a look at the CloudConnectionFactory defined for the Eclipse IoT WG namespace implementation. In particular, the getFactoryPid() method returns the PID of the CloudEndpoint factory. The createConfiguration() method receives a PID that will be used for the instantiation of the CloudEndpoint and for all the related services required to communicate with the cloud platform. In the example above, the factory creates the CloudEnpoint, and a DataService and MqttDataTransport instances internally needed to communicate with a remote cloud platform. As can be seen here , the CloudEndpoint instance configuration is enriched with the reference to the CloudConnectionFactory that generated it. This step is required by the Web UI in order to properly relate the instances with the corresponding factories. The deleteConfiguration() method deletes from the framework the CloudEndpoint instance identified by the PID passed as argument and all the related services. In the Eclipse IOT WG example, it not only deletes the CloudEndpoint instance but also the corresponding DataService and MqttDataTransport instances. The getStackComponentsPids() method return a List of String that represent the kura.service.pid of the configurable components that are part of a Cloud Connection instance. This method is used by the Web UI to get the list of configurable components that need to be displayed to the end user. The getManagedCloudConnectionPids() method will return the list of kura.service.pid of all the CloudEndpoints managed by the factory. The factory component definition should be defined as follows: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" name= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.DefaultCloudConnectionFactory\" > <implementation class= \"org.eclipse.kura.internal.cloudconnection.eclipseiot.mqtt.cloud.factory.DefaultCloudConnectionFactory\" /> <reference bind= \"setConfigurationService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.configuration.ConfigurationService\" name= \"ConfigurationService\" policy= \"static\" unbind= \"unsetConfigurationService\" /> <service> <provide interface= \"org.eclipse.kura.cloudconnection.factory.CloudConnectionFactory\" /> </service> <property name= \"osgi.command.scope\" type= \"String\" value= \"kura.cloud\" /> <property name= \"osgi.command.function\" type= \"String\" > createConfiguration </property> <property name= \"kura.ui.csf.pid.default\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" /> <property name= \"kura.ui.csf.pid.regex\" type= \"String\" value= \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager(\\-[a-zA-Z0-9]+)?$\" /> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.DefaultCloudConnectionFactory\" /> </scr:component> In particular, it should expose in the service section the fact that the factory implements org.eclipse.kura.cloudconnection.factory.CloudConnectionFactory <service> <provide interface= \"org.eclipse.kura.cloudconnection.factory.CloudConnectionFactory\" /> </service> Important properties that need to be specified to have a better Web UI experience are the following: <property name= \"kura.ui.csf.pid.default\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" /> <property name= \"kura.ui.csf.pid.regex\" type= \"String\" value= \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager(\\-[a-zA-Z0-9]+)?$\" /> those allow to specify the form of the expected PID that the end user should provide when creating a new cloud connection. Provide a CloudPublisher implementation To provide a CloudPublisher implementation, other than implementing CloudPublisher API in a java class, the developer must provide a component definition in the OSGI-INF folder that should be like the following: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" > <implementation class= \"org.eclipse.kura.internal.cloudconnection.eclipseiot.mqtt.cloud.publisher.CloudPublisherImpl\" /> <service> <provide interface= \"org.eclipse.kura.cloudconnection.publisher.CloudPublisher\" /> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <property name= \"cloud.connection.factory.pid\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" /> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" /> <property name= \"kura.ui.service.hide\" type= \"Boolean\" value= \"true\" /> <property name= \"kura.ui.factory.hide\" type= \"String\" value= \"true\" /> <property name= \"kura.ui.csf.pid.default\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" /> <property name= \"kura.ui.csf.pid.regex\" type= \"String\" value= \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher(\\-[a-zA-Z0-9]+)?$\" /> </scr:component> As can be seen in the previous snippet, the Publisher exposes itself in the framework as a ConfigurableComponent and as a CloudPublisher . The component definition must contain the following well-known properties: cloud.connection.factory.pid : this property must be set to the kura.service.pid of the factory that created the cloud connection which the publisher belongs. It is used by the Web UI to enforce that the correct cloud publisher implementation is used in a specific cloud endpoint. kura.ui.service.hide : as specified before for the Cloud Endpoint kura.ui.factory.hide : as specified before for the Cloud Endpoint kura.ui.csf.pid.default : as specified before for the Cloud Factory. It is an optional property. kura.ui.csf.pid.regex : as specified before for the Cloud Factory. It is an optional property. The relation between the CloudPublisher instance and the CloudEndpoint is defined by a configuration property set by the Web UI at CloudPublisher creation. Provide a CloudSubscriber implementation The CloudSubscriber implementation and component definition is similar to the one described for the CloudPublisher. Implement RequestHandler support In order to support Command and Control, the cloud connection bundle should provide a service that registers itself as RequestHandlerRegistry. In this way all the RequestHandler instances could be able to discover the different Registry and subscribe for command and control messages received from the cloud platform. As an example, for the Eclipse IoT WG bundle, the CloudEndpoint registers itself also as RequestHandlerRegistry.","title":"Cloud Connection Developer Guide"},{"location":"cloud-api/cloud-conn-dev-guide/#cloud-connection-developer-guide","text":"This guide will provide information on how a cloud connection developer can leverage the new Generic Cloud Services APIs. As reference, this guide will use the Eclipse IoT WG namespace implementation bundle available here","title":"Cloud connection developer guide"},{"location":"cloud-api/cloud-conn-dev-guide/#implement-cloudendpoint-and-cloudconnectionmanager","text":"In order to leverage the new APIs, and be managed by the Kura Web UI, the Cloud Connection implementation bundle must implement CloudEndpont and, if log-lived connections are supported, the CloudConnectionManager interface must be implemented as well. The ending class should be something as follows: public class CloudConnectionManagerImpl implements CloudConnectionManager , CloudEndpoint , ... { @Override public boolean isConnected () { ... } @Override public void connect () throws KuraConnectException { ... } @Override public void disconnect () { ... } @Override public Map < String , String > getInfo () { ... } @Override public void registerCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ) { ... } @Override public void unregisterCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ) { ... } } A corresponding component definition should be provided in the OSGI-INF folder exposing the implementation of CloudEndpoint and CloudConnectionManager interfaces. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" > <implementation class= \"org.eclipse.kura.internal.cloudconnection.eclipseiot.mqtt.cloud.CloudConnectionManagerImpl\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> <provide interface= \"org.eclipse.kura.cloudconnection.CloudConnectionManager\" /> <provide interface= \"org.eclipse.kura.cloudconnection.CloudEndpoint\" /> <!-- ... --> </service> <!-- ... --> <property name= \"kura.ui.service.hide\" type= \"Boolean\" value= \"true\" /> <property name= \"kura.ui.factory.hide\" type= \"String\" value= \"true\" /> </scr:component> In order to be fully compliant with the Web UI requirements, the CloudConnection component definition should provide two properties kura.ui.service.hide and kura.ui.factory.hide to hide the component from the left side part of the UI dedicated to display the services list.","title":"Implement CloudEndpoint and CloudConnectionManager"},{"location":"cloud-api/cloud-conn-dev-guide/#implement-the-cloudconnectionfactory-interface","text":"The CloudConnectionFactory is responsible to manage the cloud connection instance lifecycle by creating the CloudEndpoint instance and all the required services needed to publish or receive messages from the cloud platform. As a reference, please have a look at the CloudConnectionFactory defined for the Eclipse IoT WG namespace implementation. In particular, the getFactoryPid() method returns the PID of the CloudEndpoint factory. The createConfiguration() method receives a PID that will be used for the instantiation of the CloudEndpoint and for all the related services required to communicate with the cloud platform. In the example above, the factory creates the CloudEnpoint, and a DataService and MqttDataTransport instances internally needed to communicate with a remote cloud platform. As can be seen here , the CloudEndpoint instance configuration is enriched with the reference to the CloudConnectionFactory that generated it. This step is required by the Web UI in order to properly relate the instances with the corresponding factories. The deleteConfiguration() method deletes from the framework the CloudEndpoint instance identified by the PID passed as argument and all the related services. In the Eclipse IOT WG example, it not only deletes the CloudEndpoint instance but also the corresponding DataService and MqttDataTransport instances. The getStackComponentsPids() method return a List of String that represent the kura.service.pid of the configurable components that are part of a Cloud Connection instance. This method is used by the Web UI to get the list of configurable components that need to be displayed to the end user. The getManagedCloudConnectionPids() method will return the list of kura.service.pid of all the CloudEndpoints managed by the factory. The factory component definition should be defined as follows: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" name= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.DefaultCloudConnectionFactory\" > <implementation class= \"org.eclipse.kura.internal.cloudconnection.eclipseiot.mqtt.cloud.factory.DefaultCloudConnectionFactory\" /> <reference bind= \"setConfigurationService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.configuration.ConfigurationService\" name= \"ConfigurationService\" policy= \"static\" unbind= \"unsetConfigurationService\" /> <service> <provide interface= \"org.eclipse.kura.cloudconnection.factory.CloudConnectionFactory\" /> </service> <property name= \"osgi.command.scope\" type= \"String\" value= \"kura.cloud\" /> <property name= \"osgi.command.function\" type= \"String\" > createConfiguration </property> <property name= \"kura.ui.csf.pid.default\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" /> <property name= \"kura.ui.csf.pid.regex\" type= \"String\" value= \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager(\\-[a-zA-Z0-9]+)?$\" /> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.DefaultCloudConnectionFactory\" /> </scr:component> In particular, it should expose in the service section the fact that the factory implements org.eclipse.kura.cloudconnection.factory.CloudConnectionFactory <service> <provide interface= \"org.eclipse.kura.cloudconnection.factory.CloudConnectionFactory\" /> </service> Important properties that need to be specified to have a better Web UI experience are the following: <property name= \"kura.ui.csf.pid.default\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" /> <property name= \"kura.ui.csf.pid.regex\" type= \"String\" value= \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager(\\-[a-zA-Z0-9]+)?$\" /> those allow to specify the form of the expected PID that the end user should provide when creating a new cloud connection.","title":"Implement the CloudConnectionFactory interface"},{"location":"cloud-api/cloud-conn-dev-guide/#provide-a-cloudpublisher-implementation","text":"To provide a CloudPublisher implementation, other than implementing CloudPublisher API in a java class, the developer must provide a component definition in the OSGI-INF folder that should be like the following: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" > <implementation class= \"org.eclipse.kura.internal.cloudconnection.eclipseiot.mqtt.cloud.publisher.CloudPublisherImpl\" /> <service> <provide interface= \"org.eclipse.kura.cloudconnection.publisher.CloudPublisher\" /> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <property name= \"cloud.connection.factory.pid\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" /> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" /> <property name= \"kura.ui.service.hide\" type= \"Boolean\" value= \"true\" /> <property name= \"kura.ui.factory.hide\" type= \"String\" value= \"true\" /> <property name= \"kura.ui.csf.pid.default\" type= \"String\" value= \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" /> <property name= \"kura.ui.csf.pid.regex\" type= \"String\" value= \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher(\\-[a-zA-Z0-9]+)?$\" /> </scr:component> As can be seen in the previous snippet, the Publisher exposes itself in the framework as a ConfigurableComponent and as a CloudPublisher . The component definition must contain the following well-known properties: cloud.connection.factory.pid : this property must be set to the kura.service.pid of the factory that created the cloud connection which the publisher belongs. It is used by the Web UI to enforce that the correct cloud publisher implementation is used in a specific cloud endpoint. kura.ui.service.hide : as specified before for the Cloud Endpoint kura.ui.factory.hide : as specified before for the Cloud Endpoint kura.ui.csf.pid.default : as specified before for the Cloud Factory. It is an optional property. kura.ui.csf.pid.regex : as specified before for the Cloud Factory. It is an optional property. The relation between the CloudPublisher instance and the CloudEndpoint is defined by a configuration property set by the Web UI at CloudPublisher creation.","title":"Provide a CloudPublisher implementation"},{"location":"cloud-api/cloud-conn-dev-guide/#provide-a-cloudsubscriber-implementation","text":"The CloudSubscriber implementation and component definition is similar to the one described for the CloudPublisher.","title":"Provide a CloudSubscriber implementation"},{"location":"cloud-api/cloud-conn-dev-guide/#implement-requesthandler-support","text":"In order to support Command and Control, the cloud connection bundle should provide a service that registers itself as RequestHandlerRegistry. In this way all the RequestHandler instances could be able to discover the different Registry and subscribe for command and control messages received from the cloud platform. As an example, for the Eclipse IoT WG bundle, the CloudEndpoint registers itself also as RequestHandlerRegistry.","title":"Implement RequestHandler support"},{"location":"cloud-api/overview/","text":"Overview This section describes the new cloud related concepts and APIs introduced in Kura 4.0. Motivations Before Kura 4.0, Cloud APIs were quite tied to Kapua messaging conventions and to the MQTT protocol. Defining custom stacks that support other cloud platforms was possible, but the resulting implementations were affected by the following limitations: The legacy APIs assume that the underlying messaging protocol is MQTT. This assumption spans across all API layers, from the low level MQTTDataTrasport to the high level CloudClient . This makes quite difficult to implement cloud stacks that use other protocols like AMQP or HTTP. The CloudClient API, which was the recommended way for applications to interface with a cloud stack, enforce the following MQTT topic structure: #account-name/#device-id/#app-id/<app-topic> This topic hierarchy, which is Kapua related, might be too restrictive or too loose for other cloud platforms, for example: The Eclipse IoT working group namespace allows authenticated devices to omit the accont-name and device-id parameters in the topic. Moreover, telemetry, alert and event message topics must start respectively the t/ , a/ and e/ prefixes. Adhering to this specification is not possible for a cloud stack that implements the legacy APIs. The AWS cloud platform allows publishing on virtually any topic, using a CloudClient would be quite restrictive in this case. A way for overcoming this limitation for an application might be using the DataService layer directly, adversely affecting portability. The Cumulocity cloud platform allows publishing only on a limited set of topics, and most of the application generated information is placed in the payload encoded in CSV. Using CloudClient in this case makes difficult for the cloud stack to enforce that the messages are published on the correct topics. Moreover, the cloud stack in this case must also convert from KuraPayload to CSV, this can be currently achieved only by introducing rigid conversion rules, that might not be enough to support all message formats. Applications that use the current APIs are not portable across cloud platforms. For example if an appliaction intends to publish on Cumulocity or AWS, it should be probably aware of the underlying cloud platform. Concepts The main interfaces of the new set of APIs and their interactions are depicted in the diagram below: As shown in the above diagram new APIs introduce the concept of Cloud Connection , a set of related services that allow to manage the communication to/from a remote cloud platform. The services that compose a Cloud Connection can implement the following cloud-specific interfaces: CloudEndpoint (required): Each Cloud Connection is identified by a single instance of CloudEndpoint that implements low level specificities for the communication with the remote cloud platform. CloudConnectionManager (optional): Exposes methods that allow to manage long-lived connections. The implementor of CloudEndpoint can implement this interface as well if the cloud platform support long-lived connections (for example by using the MQTT protocol). RequestHandlerRegistry (optional): Manages the command and control functionalities if supported by the cloud platform. CloudPublisher (optional): Allows applications to publish messages to the cloud platform in a portable way. CloudSubscriber (optional): Allows applications to receive messages from the cloud platform in a portable way. CloudConnectionFactory (required): Manages the lifecycle of Cloud Connections. A Cloud Connection can also include services that do not provide any of the interfaces above but compose the internal implementation. CloudEndpoint Every Cloud Connection must contain a single CloudEndpoint instance. The kura.service.pid of the CloudEndpoint identifies the whole Cloud Connection. The CloudEndpoint provides some low level methods that can be used to interact with the remote cloud platform. For example the interface provides the publish() and subscribe() methods that allow to publish or receive messages from the cloud platform in form of KuraMessage s. Those methods are designed for internal use and are not intended to be used by end-user applications. The format of the KuraMessage provided to/received from a CloudEndpoint is implementation specific: the CloudEndpoint expects some properties to be set in the KuraMessage to be able to correctly publish a message (e.g. MQTT topic). These properties are specified by the particular CloudEndpoint , and should be documented by the implementor. The recommended way for applications to publish and receive messages involves using the Publisher and Subscriber APIs described below. If an application directly uses the methods above, it will lose portability and will be tied to the specific Cloud Connection implementation. CloudConnectionManager If the messaging protocol implemented by a Cloud Connection supports long-lived connection, then its CloudEndpoint can also implement and provide the CloudConnectionManager interface. This interface exposes some methods that can be used to manage the connection like connect() , disconnect() and isConnected() ; it also supports monitoring connection state using the CloudConnectionListener interface. Publishers and Subscribers The limitations of the current model described above are addressed by the introduction of the CloudPublisher and CloudSubscriber APIs, that replace the CloudClient as the recommended interface between applications and cloud stacks. CloudPublisher and CloudSubscriber are service interfaces defined as follows: public interface CloudPublisher { public String publish ( KuraMessage message ) throws KuraException ; public void registerCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); public void unregisterCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); public void registerCloudDeliveryListener ( CloudDeliveryListener cloudDeliveryListener ); public void unregisterCloudDeliveryListener ( CloudDeliveryListener cloudDeliveryListener ); } public interface CloudSubscriber { public void registerCloudSubscriberListener ( CloudSubscriberListener listener ); public void unregisterCloudSubscriberListener ( CloudSubscriberListener listener ); public void registerCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); public void unregisterCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); } CloudPublisher The CloudPublisher interface should be used by applications for publishing messages using the single publish() method. This method accepts a KuraMessage which is basically a KuraPayload that can be enriched with metadata. The main difference with the CloudClient APIs is that the publish() method does not require the application to specify any information related to message destinations. This allows to write portable applications that are unaware of the low level details of the destination cloud platform, such as the message format and the transport protocol. CloudSubscriber An application designed to receive messages from the cloud must now attach a listener ( CloudSubscriberListener ) to a CloudSubscriber instance. In this case, the message source cannot be specified by the application but is defined by the subscriber instance, in the same way as the CloudPublisher defines destination for published messages. The low level details necessary for message delivery and reception (e.g. the MQTT topic and the conversion between KuraMessage and the message format used on the wire) are managed by the publisher/subscriber, typically these details are stored in the service configuration. While in the previous model an application was responsible to actively obtain a CloudClient instance from a CloudService , now the relation between the application and a CloudPublisher or CloudSubscriber instance is represented as an OSGi service reference. Applications should allow the user to modify this reference in configuration, making it easy to switch between different cloud publisher/subscriber instances and different cloud platforms. Publisher/subscriber instances are now typically instantiated and configured by the end user using the Web UI. Publisher/subscriber instances are related to a CloudEnpoint instance using an OSGi service reference encoded in well known configuration property specified in the APIs ( CloudConnectionConstants.CLOUD_ENDPOINT_SERVICE_PID_PROP_NAME ). This allows the user to create those instances in a dedicated section of the Web UI. Command and control Another field in which the current Kura cloud related APIs can be generalized is related to command and control. In the previous model this aspect was covered by the Cloudlet APIs that are now replaced by RequestHandler APIs Legacy Cloudlet implementations are defined by extending a base class, Cloudlet , which takes care of handling the invocation of the doGet() , doPut() , doPost() ... methods, and of correlating request and response messages. Messages were sent and received through a CloudClient . More explicitly, Cloudlet only works with control topics whose structure is $EDC/<account-name>/<device-id>/<app-id>/<method>/<resource-path> and also expects the identifier of the sender and the correlation identifier in the KuraPayload . In the previous model, there is no way for a cloud stack implementor to customize the aspects above, which are hardcoded in the Cloudlet base class. The new model delegates these aspects to some component of the cloud stack, and requires applications that want to support command and control to register themselves as RequestHandler to a RequestHandlerRegistry instance. In order to ease porting old applications to the new model, some of the concepts of the old Cloudlet APIs are still present, this can be seen by looking at the RequestHandler interface definition: public interface RequestHandler { public KuraMessage doGet ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doPut ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doPost ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doDel ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doExec ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; } A RequestHandler invocation involves the following parameters: Request parameters: method : (GET, PUT, POST, DEL, EXEC) that identifies the RequestHandler method to be called request message : A set of key-value pairs and/or binary body contained in the KuraPayload wrapped inside the KuraMessage . resources : A List<String> of positional parameters available under the well known args key in the provided KuraMessage properties. Response parameters: response message : A set of key-value pairs and/or binary body contained in the KuraPayload wrapped inside the returned KuraMessage . status : A numeric code reporting operation completion state, determined as follows: 200, if RequestHandler methods returns without throwing exceptions. 400, if RequestHandler methods throws a KuraException with KuraErrorCode == BAD_REQUEST 404, if RequestHandler methods throws a KuraException with KuraErrorCode == NOT_FOUND 500, if RequestHandler methods throws a KuraException with other error codes. exception message : The message of the KuraException thrown by the RequestHandler methods, if any. exception stack trace : The stack trace of the KuraException thrown by the RequestHandler methods, if any. The parameters above are the same involved in current Cloudlet calls. The request id and requester client id parameters are no longer part of the API, because are related to the to the way Kapua correlates requests and response. In the new API, request and response identifiers are not specified and not forwarded to the Cloudlet, this allows the CloudletService implementation to adopt the platform specific conventions for message correlation. The Cloudlet parameters must be present in the request and response messages encoded in some format. A user that intends to call a Kura Cloudlet, for example through platform-specific REST APIs must be aware of these parameters. The user must supply request parameters in request message and must be able to extract response data from received message. The actual encoding of these parameters inside the messages depends on the particular platform. The fact that set of Cloudlet parameters are roughly the same involved in current Cloudlet calls allows existing Cloudlet based applications to continue to work without changes to the protocol. Cloud Connection lifecycle CloudEndpoint instance lifecycle is managed by a CloudConnectionFactory instance. A cloud connection implementor must register a CloudConnectionFactory instance in the framework that is responsible of creating and destroying the CloudEndpoint instances. The CloudConnectionFactory will be typically invoked by the Web UI, and is defined as follows: public interface CloudConnectionFactory { public static final String KURA_CLOUD_CONNECTION_FACTORY_PID = \"kura.cloud.connection.factory.pid\" ; public String getFactoryPid (); public void createConfiguration ( String pid ) throws KuraException ; public List < String > getStackComponentsPids ( String pid ) throws KuraException ; public void deleteConfiguration ( String pid ) throws KuraException ; public Set < String > getManagedCloudConnectionPids () throws KuraException ; } The createConfiguration() and deleteConfiguration() methods are responsible of creating/destroying a CloudEndpoint instance, specified by the provided kura.service.pid , and all the related services. The getManagedCloudConnectionPids() returns the set of kura.service.pid managed by the factory. The getStackComponentsPids(String pid) returns the list of the kura.service.pid s of the ConfigurableComponent s that are associated with the CloudEndpoint with the specified pid. The Web Ui will render the configuration of those components in separated tabs, in the dedicated CloudConnections section. Backwards compatibility In order to ease the transition to the new model, legacy APIs like CloudService and CloudClient are still supported in Kura 4.0.0, even if deprecated. The default Kapua oriented CloudService implementation is still available and can be used by legacy applications without changes. The default CloudService instance in Kura 4.0 also implements the new CloudEndpoint and CloudConnectionManager interfaces.","title":"Overview"},{"location":"cloud-api/overview/#overview","text":"This section describes the new cloud related concepts and APIs introduced in Kura 4.0.","title":"Overview"},{"location":"cloud-api/overview/#motivations","text":"Before Kura 4.0, Cloud APIs were quite tied to Kapua messaging conventions and to the MQTT protocol. Defining custom stacks that support other cloud platforms was possible, but the resulting implementations were affected by the following limitations: The legacy APIs assume that the underlying messaging protocol is MQTT. This assumption spans across all API layers, from the low level MQTTDataTrasport to the high level CloudClient . This makes quite difficult to implement cloud stacks that use other protocols like AMQP or HTTP. The CloudClient API, which was the recommended way for applications to interface with a cloud stack, enforce the following MQTT topic structure: #account-name/#device-id/#app-id/<app-topic> This topic hierarchy, which is Kapua related, might be too restrictive or too loose for other cloud platforms, for example: The Eclipse IoT working group namespace allows authenticated devices to omit the accont-name and device-id parameters in the topic. Moreover, telemetry, alert and event message topics must start respectively the t/ , a/ and e/ prefixes. Adhering to this specification is not possible for a cloud stack that implements the legacy APIs. The AWS cloud platform allows publishing on virtually any topic, using a CloudClient would be quite restrictive in this case. A way for overcoming this limitation for an application might be using the DataService layer directly, adversely affecting portability. The Cumulocity cloud platform allows publishing only on a limited set of topics, and most of the application generated information is placed in the payload encoded in CSV. Using CloudClient in this case makes difficult for the cloud stack to enforce that the messages are published on the correct topics. Moreover, the cloud stack in this case must also convert from KuraPayload to CSV, this can be currently achieved only by introducing rigid conversion rules, that might not be enough to support all message formats. Applications that use the current APIs are not portable across cloud platforms. For example if an appliaction intends to publish on Cumulocity or AWS, it should be probably aware of the underlying cloud platform.","title":"Motivations"},{"location":"cloud-api/overview/#concepts","text":"The main interfaces of the new set of APIs and their interactions are depicted in the diagram below: As shown in the above diagram new APIs introduce the concept of Cloud Connection , a set of related services that allow to manage the communication to/from a remote cloud platform. The services that compose a Cloud Connection can implement the following cloud-specific interfaces: CloudEndpoint (required): Each Cloud Connection is identified by a single instance of CloudEndpoint that implements low level specificities for the communication with the remote cloud platform. CloudConnectionManager (optional): Exposes methods that allow to manage long-lived connections. The implementor of CloudEndpoint can implement this interface as well if the cloud platform support long-lived connections (for example by using the MQTT protocol). RequestHandlerRegistry (optional): Manages the command and control functionalities if supported by the cloud platform. CloudPublisher (optional): Allows applications to publish messages to the cloud platform in a portable way. CloudSubscriber (optional): Allows applications to receive messages from the cloud platform in a portable way. CloudConnectionFactory (required): Manages the lifecycle of Cloud Connections. A Cloud Connection can also include services that do not provide any of the interfaces above but compose the internal implementation.","title":"Concepts"},{"location":"cloud-api/overview/#cloudendpoint","text":"Every Cloud Connection must contain a single CloudEndpoint instance. The kura.service.pid of the CloudEndpoint identifies the whole Cloud Connection. The CloudEndpoint provides some low level methods that can be used to interact with the remote cloud platform. For example the interface provides the publish() and subscribe() methods that allow to publish or receive messages from the cloud platform in form of KuraMessage s. Those methods are designed for internal use and are not intended to be used by end-user applications. The format of the KuraMessage provided to/received from a CloudEndpoint is implementation specific: the CloudEndpoint expects some properties to be set in the KuraMessage to be able to correctly publish a message (e.g. MQTT topic). These properties are specified by the particular CloudEndpoint , and should be documented by the implementor. The recommended way for applications to publish and receive messages involves using the Publisher and Subscriber APIs described below. If an application directly uses the methods above, it will lose portability and will be tied to the specific Cloud Connection implementation.","title":"CloudEndpoint"},{"location":"cloud-api/overview/#cloudconnectionmanager","text":"If the messaging protocol implemented by a Cloud Connection supports long-lived connection, then its CloudEndpoint can also implement and provide the CloudConnectionManager interface. This interface exposes some methods that can be used to manage the connection like connect() , disconnect() and isConnected() ; it also supports monitoring connection state using the CloudConnectionListener interface.","title":"CloudConnectionManager"},{"location":"cloud-api/overview/#publishers-and-subscribers","text":"The limitations of the current model described above are addressed by the introduction of the CloudPublisher and CloudSubscriber APIs, that replace the CloudClient as the recommended interface between applications and cloud stacks. CloudPublisher and CloudSubscriber are service interfaces defined as follows: public interface CloudPublisher { public String publish ( KuraMessage message ) throws KuraException ; public void registerCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); public void unregisterCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); public void registerCloudDeliveryListener ( CloudDeliveryListener cloudDeliveryListener ); public void unregisterCloudDeliveryListener ( CloudDeliveryListener cloudDeliveryListener ); } public interface CloudSubscriber { public void registerCloudSubscriberListener ( CloudSubscriberListener listener ); public void unregisterCloudSubscriberListener ( CloudSubscriberListener listener ); public void registerCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); public void unregisterCloudConnectionListener ( CloudConnectionListener cloudConnectionListener ); }","title":"Publishers and Subscribers"},{"location":"cloud-api/overview/#cloudpublisher","text":"The CloudPublisher interface should be used by applications for publishing messages using the single publish() method. This method accepts a KuraMessage which is basically a KuraPayload that can be enriched with metadata. The main difference with the CloudClient APIs is that the publish() method does not require the application to specify any information related to message destinations. This allows to write portable applications that are unaware of the low level details of the destination cloud platform, such as the message format and the transport protocol.","title":"CloudPublisher"},{"location":"cloud-api/overview/#cloudsubscriber","text":"An application designed to receive messages from the cloud must now attach a listener ( CloudSubscriberListener ) to a CloudSubscriber instance. In this case, the message source cannot be specified by the application but is defined by the subscriber instance, in the same way as the CloudPublisher defines destination for published messages. The low level details necessary for message delivery and reception (e.g. the MQTT topic and the conversion between KuraMessage and the message format used on the wire) are managed by the publisher/subscriber, typically these details are stored in the service configuration. While in the previous model an application was responsible to actively obtain a CloudClient instance from a CloudService , now the relation between the application and a CloudPublisher or CloudSubscriber instance is represented as an OSGi service reference. Applications should allow the user to modify this reference in configuration, making it easy to switch between different cloud publisher/subscriber instances and different cloud platforms. Publisher/subscriber instances are now typically instantiated and configured by the end user using the Web UI. Publisher/subscriber instances are related to a CloudEnpoint instance using an OSGi service reference encoded in well known configuration property specified in the APIs ( CloudConnectionConstants.CLOUD_ENDPOINT_SERVICE_PID_PROP_NAME ). This allows the user to create those instances in a dedicated section of the Web UI.","title":"CloudSubscriber"},{"location":"cloud-api/overview/#command-and-control","text":"Another field in which the current Kura cloud related APIs can be generalized is related to command and control. In the previous model this aspect was covered by the Cloudlet APIs that are now replaced by RequestHandler APIs Legacy Cloudlet implementations are defined by extending a base class, Cloudlet , which takes care of handling the invocation of the doGet() , doPut() , doPost() ... methods, and of correlating request and response messages. Messages were sent and received through a CloudClient . More explicitly, Cloudlet only works with control topics whose structure is $EDC/<account-name>/<device-id>/<app-id>/<method>/<resource-path> and also expects the identifier of the sender and the correlation identifier in the KuraPayload . In the previous model, there is no way for a cloud stack implementor to customize the aspects above, which are hardcoded in the Cloudlet base class. The new model delegates these aspects to some component of the cloud stack, and requires applications that want to support command and control to register themselves as RequestHandler to a RequestHandlerRegistry instance. In order to ease porting old applications to the new model, some of the concepts of the old Cloudlet APIs are still present, this can be seen by looking at the RequestHandler interface definition: public interface RequestHandler { public KuraMessage doGet ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doPut ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doPost ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doDel ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; public KuraMessage doExec ( RequestHandlerContext context , KuraMessage reqMessage ) throws KuraException ; } A RequestHandler invocation involves the following parameters: Request parameters: method : (GET, PUT, POST, DEL, EXEC) that identifies the RequestHandler method to be called request message : A set of key-value pairs and/or binary body contained in the KuraPayload wrapped inside the KuraMessage . resources : A List<String> of positional parameters available under the well known args key in the provided KuraMessage properties. Response parameters: response message : A set of key-value pairs and/or binary body contained in the KuraPayload wrapped inside the returned KuraMessage . status : A numeric code reporting operation completion state, determined as follows: 200, if RequestHandler methods returns without throwing exceptions. 400, if RequestHandler methods throws a KuraException with KuraErrorCode == BAD_REQUEST 404, if RequestHandler methods throws a KuraException with KuraErrorCode == NOT_FOUND 500, if RequestHandler methods throws a KuraException with other error codes. exception message : The message of the KuraException thrown by the RequestHandler methods, if any. exception stack trace : The stack trace of the KuraException thrown by the RequestHandler methods, if any. The parameters above are the same involved in current Cloudlet calls. The request id and requester client id parameters are no longer part of the API, because are related to the to the way Kapua correlates requests and response. In the new API, request and response identifiers are not specified and not forwarded to the Cloudlet, this allows the CloudletService implementation to adopt the platform specific conventions for message correlation. The Cloudlet parameters must be present in the request and response messages encoded in some format. A user that intends to call a Kura Cloudlet, for example through platform-specific REST APIs must be aware of these parameters. The user must supply request parameters in request message and must be able to extract response data from received message. The actual encoding of these parameters inside the messages depends on the particular platform. The fact that set of Cloudlet parameters are roughly the same involved in current Cloudlet calls allows existing Cloudlet based applications to continue to work without changes to the protocol.","title":"Command and control"},{"location":"cloud-api/overview/#cloud-connection-lifecycle","text":"CloudEndpoint instance lifecycle is managed by a CloudConnectionFactory instance. A cloud connection implementor must register a CloudConnectionFactory instance in the framework that is responsible of creating and destroying the CloudEndpoint instances. The CloudConnectionFactory will be typically invoked by the Web UI, and is defined as follows: public interface CloudConnectionFactory { public static final String KURA_CLOUD_CONNECTION_FACTORY_PID = \"kura.cloud.connection.factory.pid\" ; public String getFactoryPid (); public void createConfiguration ( String pid ) throws KuraException ; public List < String > getStackComponentsPids ( String pid ) throws KuraException ; public void deleteConfiguration ( String pid ) throws KuraException ; public Set < String > getManagedCloudConnectionPids () throws KuraException ; } The createConfiguration() and deleteConfiguration() methods are responsible of creating/destroying a CloudEndpoint instance, specified by the provided kura.service.pid , and all the related services. The getManagedCloudConnectionPids() returns the set of kura.service.pid managed by the factory. The getStackComponentsPids(String pid) returns the list of the kura.service.pid s of the ConfigurableComponent s that are associated with the CloudEndpoint with the specified pid. The Web Ui will render the configuration of those components in separated tabs, in the dedicated CloudConnections section.","title":"Cloud Connection lifecycle"},{"location":"cloud-api/overview/#backwards-compatibility","text":"In order to ease the transition to the new model, legacy APIs like CloudService and CloudClient are still supported in Kura 4.0.0, even if deprecated. The default Kapua oriented CloudService implementation is still available and can be used by legacy applications without changes. The default CloudService instance in Kura 4.0 also implements the new CloudEndpoint and CloudConnectionManager interfaces.","title":"Backwards compatibility"},{"location":"cloud-api/user-guide/","text":"User guide This guide will illustrate the steps required for configuring an application that uses the new Cloud Connection APIs to publish messages to the Kapua platform. The involved steps are the following Instantiation and configuration of the Cloud Connection . Instantiation and configuration of a Publisher . Binding an application to the Publisher . Creating a new Cloud Connection Open the Cloud Connections section of the Web UI: Create a new Cloud Connection Click on the New Connection button Enter a new unique identifier in the Cloud Connection Service PID field. The identifier must be a valid kura.service.pid and, in case of a Kapua Cloud Connection, it must start with the org.eclipse.kura.cloud.CloudService- prefix. A valid identifier can be org.eclipse.kura.cloud.CloudService-KAPUA . As an alternative it is possible to reconfigure the existing org.eclipse.kura.cloud.CloudService Cloud Connection. Configure the MQTTDataTrasport service. Click on the MQTTDataTrasport-KAPUA tab and fill the parameters required for establishing the MQTT connection: Broker-url Topic Context Account-Name Username Password Configure the DataService-KAPUA service. In order to enable automatic connection, set the Connect Auto-on-startup parameter to true Creating and configuring a new Publisher Select to the connection to be used from the list. Click on the New Pub/Sub button. Select the type of component to be created, from the Available Publisher/Subscriber factories drop down list, in order to create a Publisher select the org.eclipse.kura.cloud.publisher.CloudPublisher entry. Enter an unique kura.service.pid identifier in the New Publisher/Subscriber PID field. Click Apply , you should see the publisher configuration Select and configure the newly created publisher instance, and then click Apply Binding an application to a publisher Select the application instance configuration Find the configuration entry that represents a Publisher reference. Click on the Select available targets link and select the desired Publisher instance to bind to. Click on Apply","title":"User Guide"},{"location":"cloud-api/user-guide/#user-guide","text":"This guide will illustrate the steps required for configuring an application that uses the new Cloud Connection APIs to publish messages to the Kapua platform. The involved steps are the following Instantiation and configuration of the Cloud Connection . Instantiation and configuration of a Publisher . Binding an application to the Publisher .","title":"User guide"},{"location":"cloud-api/user-guide/#creating-a-new-cloud-connection","text":"Open the Cloud Connections section of the Web UI: Create a new Cloud Connection Click on the New Connection button Enter a new unique identifier in the Cloud Connection Service PID field. The identifier must be a valid kura.service.pid and, in case of a Kapua Cloud Connection, it must start with the org.eclipse.kura.cloud.CloudService- prefix. A valid identifier can be org.eclipse.kura.cloud.CloudService-KAPUA . As an alternative it is possible to reconfigure the existing org.eclipse.kura.cloud.CloudService Cloud Connection. Configure the MQTTDataTrasport service. Click on the MQTTDataTrasport-KAPUA tab and fill the parameters required for establishing the MQTT connection: Broker-url Topic Context Account-Name Username Password Configure the DataService-KAPUA service. In order to enable automatic connection, set the Connect Auto-on-startup parameter to true","title":"Creating a new Cloud Connection"},{"location":"cloud-api/user-guide/#creating-and-configuring-a-new-publisher","text":"Select to the connection to be used from the list. Click on the New Pub/Sub button. Select the type of component to be created, from the Available Publisher/Subscriber factories drop down list, in order to create a Publisher select the org.eclipse.kura.cloud.publisher.CloudPublisher entry. Enter an unique kura.service.pid identifier in the New Publisher/Subscriber PID field. Click Apply , you should see the publisher configuration Select and configure the newly created publisher instance, and then click Apply","title":"Creating and configuring a new Publisher"},{"location":"cloud-api/user-guide/#binding-an-application-to-a-publisher","text":"Select the application instance configuration Find the configuration entry that represents a Publisher reference. Click on the Select available targets link and select the desired Publisher instance to bind to. Click on Apply","title":"Binding an application to a publisher"},{"location":"cloud-platform/kura-aws-cloud/","text":"Amazon AWS IoT\u2122 platform Overview This section provides a guide on connecting an Eclipse Kura\u2122 device to the Amazon AWS IoT platform. Prerequisites In order to connect a device to Amazon AWS IoT Kura version 1.3 or greater is required. An Amazon AWS account is also needed. Device registration The first step involves the registration of the new device on AWS, this operation can be done using the AWS Web Console or with the AWS CLI command line tool, in this guide the Web based console will be used. 1. Access the AWS IoT management console. This can be done by logging in the AWS console and selecting IoT Core from the services list, in the Internet of Things section. 2. Create a default policy for the device. This step involves creating a default policy for the new device, skip if an existing policy is already available. Access the main screen of the console and select Secure -> Policies from the left side menu and then press the Create button, in the top right area of the screen. Fill the form as follows and then press the Create button: Action -> iot:Connect, iot:Publish, iot:Subscribe, iot:Receive, iot:UpdateThingShadow, iot:GetThingShadow, iot:DeleteThingShadow Resource ARN -> * Effect -> Allow This will create a policy that allows a device to connect to the platform, publish/subscribe on any topic and manage its thing shadow . 3. Register a new device. Devices on the AWS IoT platform are called things , in order to register a new thing select Manage -> Things from the left side menu and then press the Create button, in the top right section of the screen. Select Create a single thing . Enter a name for the new device and then press the Next button, from now on kura-gateway will be used as the device name. 4. Create a new certificate for the device. The AWS IoT platform uses SSL mutual authentication, for this reason it is necessary to download a public/private key pair for the device and a server certificate. Click on Create certificate to quickly generate a new certificate for the new device. Certificates can be managed later on by clicking on Secure -> Certificates , in the left part of the console. 5. Download the device SSL keys. You should see a screen like the following: Download the 3 files listed in the table and store them in a safe place, they will be needed later, also copy the link to the root CA for AWS IoT in order to be able to retrieve it later from the device. Press the Activate button, and then on Attach a policy . 6. Assign the default policy to the device. Select the desired policy and then click on Register thing . A policy can also be attached to a certificate later on perforiming the following steps: Enter the device configuration section, by clicking on Manage -> Things and then clicking on the newly created device. Click on Security on the left panel and then click on the certificate entry (it is identified by an hex code), select Policies in the left menu, you should see this screen: Click on Actions in the top left section of the page and then click on Attach policy , select the default policy previously created and then press the Attach button. Device configuration The following steps should be performed on the device, this guide is based on Kura 3.1.0 version and has been tested on a Raspberry PI 3. 7. Create a Java keystore on the device. The first step for using the device keys obtained at the previous step is to create a new Java keystore containing the Root Certificate used by the Amazon IoT platform, this can be done executing the following commands on the device: sudo mkdir /opt/eclipse/kura/security cd /opt/eclipse/kura/security curl https://www.amazontrust.com/repository/AmazonRootCA1.pem > /tmp/root-CA.pem sudo keytool -import -trustcacerts -alias aws -file /tmp/root-CA.pem -keystore cacerts.ks -storepass changeit If the last command reports that the certificate already exist in the system-wide store type yes to proceed. The code above will generate a new keystore with changeit as password, change it if needed. 8. Configure the SSL parameters using the Kura Web UI. Open the Kura Web Console and enter select the Settings entry in the left side menu and then click on SSL Configuration , you should see this screen: Change the Keystore path parameter to /opt/eclipse/kura/security/cacerts.ks if needed. Change the settings in the form to match the screen above, set Default protocol to TLSv1.2 , enter changeit as Keystore Password (or the password defined at step 7). Warning Steps from 8.2 to 8.6 will not work on Kura 3.2.0 due to a known issue . On this version, private key and device certificate need to be manually added to the keystore using the command line. If you are running Kura 3.2.0, proceed with step 8.7. Open the Kura Web Console and enter select the Settings entry in the left side menu and then click on Device SSL Certificate , you should see this screen: Enter aws-ssl in the Storage Alias field. The private key needs to be converted to the PKCS8 format, this step can be performed executing the following command on a Linux or OSX based machine: openssl pkcs8 -topk8 -inform PEM -outform PEM -in xxxxxxxxxx-private.pem.key -out outKey.pem -nocrypt where xxxxxxxxxx-private.pem.key is the file containing the private key downloaded at step 4. Paste the contents of the obtained outKey.pem in the \"Private Key\" field. Paste the contents of xxxxxxxxxx-certificate.pem.crt in the Certificate field. You should see a screen like this Click the Apply button to confirm. Kura 3.2.0 only - manually import device certificate and private key into keystore. On the host machine, open a terminal window in the folder containing the files downloaded at step 5 and execute the following command: openssl pkcs12 -export -in xxxxxxxxxx-certificate.pem.crt -inkey xxxxxxxxxx-private.pem.key -name aws-ssl -out aws-ssl.p12 where xxxxxxxxxx-certificate.pem.crt is the original certificate downloaded from AWS and xxxxxxxxxx-private.pem.key is the private key. The command will ask for a password, define a new password. Copy the obtained aws-ssl.p12 file to the device into the /tmp folder using scp: scp ./aws-ssl.p12 pi@<device-address>:/tmp Replacing <device-address> with the hostname or ip address of the device. Open a ssh connection to the device and enter the following command: sudo keytool -importkeystore -deststorepass changeit -destkeystore /opt/eclipse/kura/security/cacerts.ks -srckeystore /tmp/aws-ssl.p12 -srcstoretype PKCS12 The command will ask for a password, enter the password defined when creating the aws-ssl.p12 file. Restart Kura to reload the keystore. 9. Setup a new cloud connection Click on Cloud Connections in the left panel, and setup a new cloud connection Click on the New Connection button at the top of the page and set the following parameters in the dialog: Cloud Connection Factory PID -> org.eclipse.kura.cloud.CloudService Cloud Connection Service PID -> org.eclipse.kura.cloud.CloudService-AWS Press the Create button to confirm and then select the newly created CloudService instance from the list. Set the broker URL in the MqttDataTransport-AWS tab, it can be obtained from the AWS IoT Web Console clicking on the Settings entry in the bottom left section of the page, the URL will look like the following: a1rm1xxxxxxxxx.iot.us-east-1.amazonaws.com The mqtts protocol must be used, the value for the broker-url field derived from the URL above is the following: mqtts://a1rm1xxxxxxxxx.iot.us-east-1.amazonaws.com:8883/ Clear the value of the username and password fields. Set a value for the topic.context.account-name and client-id . Assign an arbitrary account name to topic.context.account-name (for example aws-test ), this will be used by the CloudClient instances for building the topic structure. Enter the thing name in the client-id field (in this example kura-gateway ). In order for the previously added keys to be used for the SSL connection with the broker enter the Storage Alias defined in step 8.2 (e.g aws-ssl ) as value for the ssl.certificate.alias field. The setting lwt.topic under MqttDataTransport-AWS needs to be updated as well by entering a value not containing the $ character. This is required because of the fact that AWS IoT does not support topic names starting with $ (except for the $aws/ hierarchy). Press the Apply button in the top left section to commit the changes to the MqttDataTransport-AWS . Enter a name without the $ character for the topic.control-prefix setting in the CloudService-AWS tab, for example aws-control . The Kura CloudService uses some well-known topics to allow remote device management and to report device state information, this features are not supported by default by AWS IoT, the following settings can be applied in the CloudService-AWS tab in order to avoid sending unnecessary messages: republish.mqtt.birth.cert.on.gps.lock -> false republish.mqtt.birth.cert.on.modem.detect -> false enable.default.subscriptions -> false Click the Apply button to save the changes. 10. Connect to the cloud platform Make sure the AWS CloudService instance is selected from the list in the top section of the page and click on the Connect button, if the connection to AWS IoT platform succeeds the Status of the instance will be reported as Connected .","title":"Amazon AWS IoT&trade; platform"},{"location":"cloud-platform/kura-aws-cloud/#amazon-aws-iot-platform","text":"","title":"Amazon AWS IoT&trade; platform"},{"location":"cloud-platform/kura-aws-cloud/#overview","text":"This section provides a guide on connecting an Eclipse Kura\u2122 device to the Amazon AWS IoT platform.","title":"Overview"},{"location":"cloud-platform/kura-aws-cloud/#prerequisites","text":"In order to connect a device to Amazon AWS IoT Kura version 1.3 or greater is required. An Amazon AWS account is also needed.","title":"Prerequisites"},{"location":"cloud-platform/kura-aws-cloud/#device-registration","text":"The first step involves the registration of the new device on AWS, this operation can be done using the AWS Web Console or with the AWS CLI command line tool, in this guide the Web based console will be used.","title":"Device registration"},{"location":"cloud-platform/kura-aws-cloud/#1-access-the-aws-iot-management-console","text":"This can be done by logging in the AWS console and selecting IoT Core from the services list, in the Internet of Things section.","title":"1. Access the AWS IoT management console."},{"location":"cloud-platform/kura-aws-cloud/#2-create-a-default-policy-for-the-device","text":"This step involves creating a default policy for the new device, skip if an existing policy is already available. Access the main screen of the console and select Secure -> Policies from the left side menu and then press the Create button, in the top right area of the screen. Fill the form as follows and then press the Create button: Action -> iot:Connect, iot:Publish, iot:Subscribe, iot:Receive, iot:UpdateThingShadow, iot:GetThingShadow, iot:DeleteThingShadow Resource ARN -> * Effect -> Allow This will create a policy that allows a device to connect to the platform, publish/subscribe on any topic and manage its thing shadow .","title":"2. Create a default policy for the device."},{"location":"cloud-platform/kura-aws-cloud/#3-register-a-new-device","text":"Devices on the AWS IoT platform are called things , in order to register a new thing select Manage -> Things from the left side menu and then press the Create button, in the top right section of the screen. Select Create a single thing . Enter a name for the new device and then press the Next button, from now on kura-gateway will be used as the device name.","title":"3. Register a new device."},{"location":"cloud-platform/kura-aws-cloud/#4-create-a-new-certificate-for-the-device","text":"The AWS IoT platform uses SSL mutual authentication, for this reason it is necessary to download a public/private key pair for the device and a server certificate. Click on Create certificate to quickly generate a new certificate for the new device. Certificates can be managed later on by clicking on Secure -> Certificates , in the left part of the console.","title":"4. Create a new certificate for the device."},{"location":"cloud-platform/kura-aws-cloud/#5-download-the-device-ssl-keys","text":"You should see a screen like the following: Download the 3 files listed in the table and store them in a safe place, they will be needed later, also copy the link to the root CA for AWS IoT in order to be able to retrieve it later from the device. Press the Activate button, and then on Attach a policy .","title":"5. Download the device SSL keys."},{"location":"cloud-platform/kura-aws-cloud/#6-assign-the-default-policy-to-the-device","text":"Select the desired policy and then click on Register thing . A policy can also be attached to a certificate later on perforiming the following steps: Enter the device configuration section, by clicking on Manage -> Things and then clicking on the newly created device. Click on Security on the left panel and then click on the certificate entry (it is identified by an hex code), select Policies in the left menu, you should see this screen: Click on Actions in the top left section of the page and then click on Attach policy , select the default policy previously created and then press the Attach button.","title":"6. Assign the default policy to the device."},{"location":"cloud-platform/kura-aws-cloud/#device-configuration","text":"The following steps should be performed on the device, this guide is based on Kura 3.1.0 version and has been tested on a Raspberry PI 3.","title":"Device configuration"},{"location":"cloud-platform/kura-aws-cloud/#7-create-a-java-keystore-on-the-device","text":"The first step for using the device keys obtained at the previous step is to create a new Java keystore containing the Root Certificate used by the Amazon IoT platform, this can be done executing the following commands on the device: sudo mkdir /opt/eclipse/kura/security cd /opt/eclipse/kura/security curl https://www.amazontrust.com/repository/AmazonRootCA1.pem > /tmp/root-CA.pem sudo keytool -import -trustcacerts -alias aws -file /tmp/root-CA.pem -keystore cacerts.ks -storepass changeit If the last command reports that the certificate already exist in the system-wide store type yes to proceed. The code above will generate a new keystore with changeit as password, change it if needed.","title":"7.  Create a Java keystore on the device."},{"location":"cloud-platform/kura-aws-cloud/#8-configure-the-ssl-parameters-using-the-kura-web-ui","text":"Open the Kura Web Console and enter select the Settings entry in the left side menu and then click on SSL Configuration , you should see this screen: Change the Keystore path parameter to /opt/eclipse/kura/security/cacerts.ks if needed. Change the settings in the form to match the screen above, set Default protocol to TLSv1.2 , enter changeit as Keystore Password (or the password defined at step 7). Warning Steps from 8.2 to 8.6 will not work on Kura 3.2.0 due to a known issue . On this version, private key and device certificate need to be manually added to the keystore using the command line. If you are running Kura 3.2.0, proceed with step 8.7. Open the Kura Web Console and enter select the Settings entry in the left side menu and then click on Device SSL Certificate , you should see this screen: Enter aws-ssl in the Storage Alias field. The private key needs to be converted to the PKCS8 format, this step can be performed executing the following command on a Linux or OSX based machine: openssl pkcs8 -topk8 -inform PEM -outform PEM -in xxxxxxxxxx-private.pem.key -out outKey.pem -nocrypt where xxxxxxxxxx-private.pem.key is the file containing the private key downloaded at step 4. Paste the contents of the obtained outKey.pem in the \"Private Key\" field. Paste the contents of xxxxxxxxxx-certificate.pem.crt in the Certificate field. You should see a screen like this Click the Apply button to confirm. Kura 3.2.0 only - manually import device certificate and private key into keystore. On the host machine, open a terminal window in the folder containing the files downloaded at step 5 and execute the following command: openssl pkcs12 -export -in xxxxxxxxxx-certificate.pem.crt -inkey xxxxxxxxxx-private.pem.key -name aws-ssl -out aws-ssl.p12 where xxxxxxxxxx-certificate.pem.crt is the original certificate downloaded from AWS and xxxxxxxxxx-private.pem.key is the private key. The command will ask for a password, define a new password. Copy the obtained aws-ssl.p12 file to the device into the /tmp folder using scp: scp ./aws-ssl.p12 pi@<device-address>:/tmp Replacing <device-address> with the hostname or ip address of the device. Open a ssh connection to the device and enter the following command: sudo keytool -importkeystore -deststorepass changeit -destkeystore /opt/eclipse/kura/security/cacerts.ks -srckeystore /tmp/aws-ssl.p12 -srcstoretype PKCS12 The command will ask for a password, enter the password defined when creating the aws-ssl.p12 file. Restart Kura to reload the keystore.","title":"8.  Configure the SSL parameters using the Kura Web UI."},{"location":"cloud-platform/kura-aws-cloud/#9-setup-a-new-cloud-connection","text":"Click on Cloud Connections in the left panel, and setup a new cloud connection Click on the New Connection button at the top of the page and set the following parameters in the dialog: Cloud Connection Factory PID -> org.eclipse.kura.cloud.CloudService Cloud Connection Service PID -> org.eclipse.kura.cloud.CloudService-AWS Press the Create button to confirm and then select the newly created CloudService instance from the list. Set the broker URL in the MqttDataTransport-AWS tab, it can be obtained from the AWS IoT Web Console clicking on the Settings entry in the bottom left section of the page, the URL will look like the following: a1rm1xxxxxxxxx.iot.us-east-1.amazonaws.com The mqtts protocol must be used, the value for the broker-url field derived from the URL above is the following: mqtts://a1rm1xxxxxxxxx.iot.us-east-1.amazonaws.com:8883/ Clear the value of the username and password fields. Set a value for the topic.context.account-name and client-id . Assign an arbitrary account name to topic.context.account-name (for example aws-test ), this will be used by the CloudClient instances for building the topic structure. Enter the thing name in the client-id field (in this example kura-gateway ). In order for the previously added keys to be used for the SSL connection with the broker enter the Storage Alias defined in step 8.2 (e.g aws-ssl ) as value for the ssl.certificate.alias field. The setting lwt.topic under MqttDataTransport-AWS needs to be updated as well by entering a value not containing the $ character. This is required because of the fact that AWS IoT does not support topic names starting with $ (except for the $aws/ hierarchy). Press the Apply button in the top left section to commit the changes to the MqttDataTransport-AWS . Enter a name without the $ character for the topic.control-prefix setting in the CloudService-AWS tab, for example aws-control . The Kura CloudService uses some well-known topics to allow remote device management and to report device state information, this features are not supported by default by AWS IoT, the following settings can be applied in the CloudService-AWS tab in order to avoid sending unnecessary messages: republish.mqtt.birth.cert.on.gps.lock -> false republish.mqtt.birth.cert.on.modem.detect -> false enable.default.subscriptions -> false Click the Apply button to save the changes.","title":"9.  Setup a new cloud connection"},{"location":"cloud-platform/kura-aws-cloud/#10-connect-to-the-cloud-platform","text":"Make sure the AWS CloudService instance is selected from the list in the top section of the page and click on the Connect button, if the connection to AWS IoT platform succeeds the Status of the instance will be reported as Connected .","title":"10. Connect to the cloud platform"},{"location":"cloud-platform/kura-azure/","text":"Azure IoT Hub\u2122 platform Starting from release 3.0, Eclipse Kura can connect to the Azure IoT Hub using the MQTT protocol. When doing so, Kura applications can send device-to-cloud messages. More information on the Azure IoT Hub and its support for the MQTT protocol can be found here . This document outlines how to configure and connect a Kura application to the Azure IoT Hub. Get Azure IoT Hub information In order to properly configure Kura to connect to IoT Hub, some information are needed. You will need the hostname of the Azure IoT Hub, referred below as {iothubhostname} , the Id and the SAS Token of the device, referred as {device_id} and {device_SAS_token} . The hostname is listed on the \"Overview\" tab on the IoT Hub main page, while the device ID is shown on the \"Device Explorer\" tab. Finally, the SAS token can be generated using the iothub-explorer application that can be found here . To install the application, type on a shell: npm install -g iothub-explorer Then start a new session on your IoT Hub instance (it will expire in 1 hour): iothub-explorer login \"{your-connection-string}\" where {your-connection-string} is the connection string of your IoT Hub instance. It can be found on the \"Shared access policies\" tab under \"Settings\". Select the \"iothubowner\" policy and a tab will appear with the \"Connection string\u2014primary key\" option. Then list your devices: iothub-explorer list and get the SAS token for the {device-name} device: iothub-explorer sas-token { device-name } Be aware that the SAS token will expire in 1 hour by default, but using \"-d\" option it is possible to set a custom expiration time. SSL certificates In order to connect to your IoT Hub instance, Kura should trust the remote broker through a SSL certificate. The simpler way to get the IotHub certificate is to run the following command on a shell: openssl s_client -showcerts -tls1 -connect { iothubhostname } :8883 The result is the SSL certificate chain. Copy all the certificates in the format: -----BEGIN CERTIFICATE----- ... -----END CERTIFICATE----- -----BEGIN CERTIFICATE----- ... -----END CERTIFICATE----- and paste them in to the \"Server SSL Certificate\" tab under \"Settings\" in Kura. Then click the Apply button and restart Kura to update the keystore. Configuring a Kura Cloud Stack for Azure IoT Hub The Kura Gateway Administrative Console exposes all services necessary to configure a connection to the Azure IoT Hub. You can follow the steps outlined below to configure the connection to the Azure IoT Hub. The first step is to create a new Kura Cloud stack. From the Kura Gateway Administrative Console: Select Cloud Connections in the navigation on the left and click New Connection to create a new Cloud connection In the dialog, select org.eclipse.kura.cloud.CloudService as the Cloud Connection Factory PID Enter a Cloud Connection Service PID name like org.eclipse.kura.cloud.CloudService-Azure Press the Create button to create the new Cloud stack Now review and update the configuration of each Kura Cloud stack component as outline below. MqttDataTransport DataService CloudService MqttDataTransport Modify the service configuration parameters as follows: broker-url - defines the URL of the Azure IoT MQTT broker. The URL value should be set as mqtts://{iothubhostname}:8883/ Note An SSL connection (mqtts on port 8883) is required to connect to Azure IoT Hub\u2122. topic.context.account-name - insert devices as the MQTT topic prefix for the device-to-cloud and cloud-to-device messages username - insert {iothubhostname}/{device_id} as username for the MQTT connection password - insert {device_SAS_token} as password for the MQTT connection Note The format of the SAS Token is like: SharedAccessSignature sig={signature-string}&se={expiry}&sr={URL-encoded-resourceURI} client-id - insert {device_id} as Client ID for the MQTT connection clean-session - make sure it is set to true lwt.topic - set the Will Topic to something #account-name/#client-id/messages/events/LWT You can keep the default values of the remaining parameters, so save your changes by clicking the Apply button. A screen capture of the MqttDataTransport configuration is shown below. DataService The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. In order for Kura to connect to Azure IoT Hub on startup, the connect.auto-on-startup option must be set to true. If this value is changed from false to true, Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true. Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura. CloudService The default settings for the CloudService should be modified as follow to allow a connection to Azure IoT Hub . topic.control-prefix - insert devices as the MQTT topic prefix for the device-to-cloud and cloud-to-device messages encode.gzip - should be set false to avoid compression of the message payloads republish.mqtt.birth.cert.on.gps.lock - should be set false to avoid sending additional messages on GPS position lock republish.mqtt.birth.cert.on.modem.detect - should be set false to avoid sending additional messages on cellular modem update enable.default.subscriptions - should be set false to avoid subscriptions on Kura control topics for cloud-to-device payload.encoding - should be set to Simple JSON The screen capture shown below displays the default settings for the CloudService. How to connect and disconnect from the cloud platform The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting. Kura Application Connecting to Azure IoT Hub The Kura example publisher can be used to publish to the IoT Hub. The example configuration should be modified as follows. cloud.service.pid - insert the name of the new Kura Cloud stack, org.eclipse.kura.cloud.CloudService-Azure in this tutorial app.id - insert messages as application id publish.appTopic - insert events/ as publish topic This configuration allows the publication on the default messages/events endpoint on the IoT Hub\u2122.","title":"Azure IoT Hub&trade; platform"},{"location":"cloud-platform/kura-azure/#azure-iot-hub-platform","text":"Starting from release 3.0, Eclipse Kura can connect to the Azure IoT Hub using the MQTT protocol. When doing so, Kura applications can send device-to-cloud messages. More information on the Azure IoT Hub and its support for the MQTT protocol can be found here . This document outlines how to configure and connect a Kura application to the Azure IoT Hub.","title":"Azure IoT Hub&trade; platform"},{"location":"cloud-platform/kura-azure/#get-azure-iot-hub-information","text":"In order to properly configure Kura to connect to IoT Hub, some information are needed. You will need the hostname of the Azure IoT Hub, referred below as {iothubhostname} , the Id and the SAS Token of the device, referred as {device_id} and {device_SAS_token} . The hostname is listed on the \"Overview\" tab on the IoT Hub main page, while the device ID is shown on the \"Device Explorer\" tab. Finally, the SAS token can be generated using the iothub-explorer application that can be found here . To install the application, type on a shell: npm install -g iothub-explorer Then start a new session on your IoT Hub instance (it will expire in 1 hour): iothub-explorer login \"{your-connection-string}\" where {your-connection-string} is the connection string of your IoT Hub instance. It can be found on the \"Shared access policies\" tab under \"Settings\". Select the \"iothubowner\" policy and a tab will appear with the \"Connection string\u2014primary key\" option. Then list your devices: iothub-explorer list and get the SAS token for the {device-name} device: iothub-explorer sas-token { device-name } Be aware that the SAS token will expire in 1 hour by default, but using \"-d\" option it is possible to set a custom expiration time.","title":"Get Azure IoT Hub information"},{"location":"cloud-platform/kura-azure/#ssl-certificates","text":"In order to connect to your IoT Hub instance, Kura should trust the remote broker through a SSL certificate. The simpler way to get the IotHub certificate is to run the following command on a shell: openssl s_client -showcerts -tls1 -connect { iothubhostname } :8883 The result is the SSL certificate chain. Copy all the certificates in the format: -----BEGIN CERTIFICATE----- ... -----END CERTIFICATE----- -----BEGIN CERTIFICATE----- ... -----END CERTIFICATE----- and paste them in to the \"Server SSL Certificate\" tab under \"Settings\" in Kura. Then click the Apply button and restart Kura to update the keystore.","title":"SSL certificates"},{"location":"cloud-platform/kura-azure/#configuring-a-kura-cloud-stack-for-azure-iot-hub","text":"The Kura Gateway Administrative Console exposes all services necessary to configure a connection to the Azure IoT Hub. You can follow the steps outlined below to configure the connection to the Azure IoT Hub. The first step is to create a new Kura Cloud stack. From the Kura Gateway Administrative Console: Select Cloud Connections in the navigation on the left and click New Connection to create a new Cloud connection In the dialog, select org.eclipse.kura.cloud.CloudService as the Cloud Connection Factory PID Enter a Cloud Connection Service PID name like org.eclipse.kura.cloud.CloudService-Azure Press the Create button to create the new Cloud stack Now review and update the configuration of each Kura Cloud stack component as outline below. MqttDataTransport DataService CloudService","title":"Configuring a Kura Cloud Stack for Azure IoT Hub"},{"location":"cloud-platform/kura-azure/#mqttdatatransport","text":"Modify the service configuration parameters as follows: broker-url - defines the URL of the Azure IoT MQTT broker. The URL value should be set as mqtts://{iothubhostname}:8883/ Note An SSL connection (mqtts on port 8883) is required to connect to Azure IoT Hub\u2122. topic.context.account-name - insert devices as the MQTT topic prefix for the device-to-cloud and cloud-to-device messages username - insert {iothubhostname}/{device_id} as username for the MQTT connection password - insert {device_SAS_token} as password for the MQTT connection Note The format of the SAS Token is like: SharedAccessSignature sig={signature-string}&se={expiry}&sr={URL-encoded-resourceURI} client-id - insert {device_id} as Client ID for the MQTT connection clean-session - make sure it is set to true lwt.topic - set the Will Topic to something #account-name/#client-id/messages/events/LWT You can keep the default values of the remaining parameters, so save your changes by clicking the Apply button. A screen capture of the MqttDataTransport configuration is shown below.","title":"MqttDataTransport"},{"location":"cloud-platform/kura-azure/#dataservice","text":"The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. In order for Kura to connect to Azure IoT Hub on startup, the connect.auto-on-startup option must be set to true. If this value is changed from false to true, Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true. Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura.","title":"DataService"},{"location":"cloud-platform/kura-azure/#cloudservice","text":"The default settings for the CloudService should be modified as follow to allow a connection to Azure IoT Hub . topic.control-prefix - insert devices as the MQTT topic prefix for the device-to-cloud and cloud-to-device messages encode.gzip - should be set false to avoid compression of the message payloads republish.mqtt.birth.cert.on.gps.lock - should be set false to avoid sending additional messages on GPS position lock republish.mqtt.birth.cert.on.modem.detect - should be set false to avoid sending additional messages on cellular modem update enable.default.subscriptions - should be set false to avoid subscriptions on Kura control topics for cloud-to-device payload.encoding - should be set to Simple JSON The screen capture shown below displays the default settings for the CloudService.","title":"CloudService"},{"location":"cloud-platform/kura-azure/#how-to-connect-and-disconnect-from-the-cloud-platform","text":"The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"How to connect and disconnect from the cloud platform"},{"location":"cloud-platform/kura-azure/#kura-application-connecting-to-azure-iot-hub","text":"The Kura example publisher can be used to publish to the IoT Hub. The example configuration should be modified as follows. cloud.service.pid - insert the name of the new Kura Cloud stack, org.eclipse.kura.cloud.CloudService-Azure in this tutorial app.id - insert messages as application id publish.appTopic - insert events/ as publish topic This configuration allows the publication on the default messages/events endpoint on the IoT Hub\u2122.","title":"Kura Application Connecting to Azure IoT Hub"},{"location":"cloud-platform/kura-ec-cloud/","text":"Eurotech Everyware Cloud\u2122 platform Everyware Cloud provides an easy mechanism for connecting cloud-ready devices to IT systems and/or applications; therefore, connecting to Everyware Cloud is an important step in creating and maintaining a complete M2M application. Information on Everyware Cloud and its features can be found here . This document outlines how to connect to Everyware Cloud using the Kura Gateway Administrative Console. Using the Kura Gateway Administrative Console The Kura Gateway Administrative Console exposes all services necessary for connecting to Everyware Cloud. The reference links listed below outline each service involved in the Everyware Cloud connection. It is recommended that each section be reviewed. CloudService DataService MqttDataTransport CloudService The default settings for the CloudService are typically adequate for connecting to Everyware Cloud. The screen capture shown below displays the default settings for the CloudService. For details about each setting, please refer to CloudService . Warning The \" Simple JSON \" payload encoding is not supported by Everyware Cloud. Use the default \" Kura Protobuf \" encoding instead. DataService The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. For complete details about the DataService configuration parameters, please refer to DataService . In order for Kura to connect to Everyware Cloud on startup, the connect.auto-on-startup option must be set to true . If this value is changed from false to true , Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true . Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura. MqttDataTransport While the majority of default settings in the MqttDataTransport can be left unchanged, the following parameters must be modified: broker-url - defines the MQTT broker URL that was provided when the Eurotech Everyware Cloud account was established. Information on how to obtain the broker URL can be found here . In the MqttDataTransport configuration screen capture shown below, the broker-url is mqtt://broker-sbx.everyware.io:1883 topic.context.account-name - defines the account name of the account to which the device is attempting to connect. In the MqttDataTransport configuration screen capture shown below, the account name is account-name username - identifies the user to be used when creating the connection. In the MqttDataTransport configuration screen capture shown below, the username is username . Note When connecting to Everyware Cloud, the username must have proper permissions. Information on users and permissions can be found here . For complete details about the MqttDataTransport configuration parameters, please refer to MqttDataTransport . Connect/Disconnect The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"Eurotech Everyware Cloud&trade; platform"},{"location":"cloud-platform/kura-ec-cloud/#eurotech-everyware-cloud-platform","text":"Everyware Cloud provides an easy mechanism for connecting cloud-ready devices to IT systems and/or applications; therefore, connecting to Everyware Cloud is an important step in creating and maintaining a complete M2M application. Information on Everyware Cloud and its features can be found here . This document outlines how to connect to Everyware Cloud using the Kura Gateway Administrative Console.","title":"Eurotech Everyware Cloud&trade; platform"},{"location":"cloud-platform/kura-ec-cloud/#using-the-kura-gateway-administrative-console","text":"The Kura Gateway Administrative Console exposes all services necessary for connecting to Everyware Cloud. The reference links listed below outline each service involved in the Everyware Cloud connection. It is recommended that each section be reviewed. CloudService DataService MqttDataTransport","title":"Using the Kura Gateway Administrative Console"},{"location":"cloud-platform/kura-ec-cloud/#cloudservice","text":"The default settings for the CloudService are typically adequate for connecting to Everyware Cloud. The screen capture shown below displays the default settings for the CloudService. For details about each setting, please refer to CloudService . Warning The \" Simple JSON \" payload encoding is not supported by Everyware Cloud. Use the default \" Kura Protobuf \" encoding instead.","title":"CloudService"},{"location":"cloud-platform/kura-ec-cloud/#dataservice","text":"The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. For complete details about the DataService configuration parameters, please refer to DataService . In order for Kura to connect to Everyware Cloud on startup, the connect.auto-on-startup option must be set to true . If this value is changed from false to true , Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true . Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura.","title":"DataService"},{"location":"cloud-platform/kura-ec-cloud/#mqttdatatransport","text":"While the majority of default settings in the MqttDataTransport can be left unchanged, the following parameters must be modified: broker-url - defines the MQTT broker URL that was provided when the Eurotech Everyware Cloud account was established. Information on how to obtain the broker URL can be found here . In the MqttDataTransport configuration screen capture shown below, the broker-url is mqtt://broker-sbx.everyware.io:1883 topic.context.account-name - defines the account name of the account to which the device is attempting to connect. In the MqttDataTransport configuration screen capture shown below, the account name is account-name username - identifies the user to be used when creating the connection. In the MqttDataTransport configuration screen capture shown below, the username is username . Note When connecting to Everyware Cloud, the username must have proper permissions. Information on users and permissions can be found here . For complete details about the MqttDataTransport configuration parameters, please refer to MqttDataTransport .","title":"MqttDataTransport"},{"location":"cloud-platform/kura-ec-cloud/#connectdisconnect","text":"The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"Connect/Disconnect"},{"location":"cloud-platform/kura-hono/","text":"Eclipse Hono\u2122 platform Eclipse Hono\u2122 provides remote service interfaces for connecting large numbers of IoT devices to a back end and interacting with them in a uniform way regardless of the device communication protocol. More information can be found here . This document outlines how to connect to Eclipse Hono using the Kura Gateway Administrative Console. Using the Kura Gateway Administrative Console The Kura Gateway Administrative Console exposes all services necessary for connecting to Eclipse Hono. First of all, in the Cloud Connections section, a new Hono-enabled connection needs to be setup. From the Cloud Connections section, the user needs to create a new connection: by specifying a valid PID: The result should be like the one depicted in the following image: The reference links listed below outline each service involved in the cloud connection. It is recommended that each section be reviewed. CloudService DataService MqttDataTransport CloudService The default settings for the CloudService are typically adequate for connecting to a Hono instance. The screen capture shown below displays the default settings for the CloudService. For details about each setting, please refer to CloudService . DataService The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. For complete details about the DataService configuration parameters, please refer to DataService . In order for Kura to connect to Eclipse Hono on startup, the connect.auto-on-startup option must be set to true . If this value is changed from false to true , Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true . Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura. MqttDataTransport While the majority of default settings in the MqttDataTransport can be left unchanged, the following parameters must be modified: broker-url - defines the MQTT broker URL that was provided when the Eurotech Everyware Cloud account was established. In the MqttDataTransport configuration screen capture shown below, the broker-url is mqtt://broker-url:1883 topic.context.account-name - defines the account name of the account to which the device is attempting to connect. In the MqttDataTransport configuration screen capture shown below, the account name is account-name username - identifies the user to be used when creating the connection. In the MqttDataTransport configuration screen capture shown below, the username is username . For complete details about the MqttDataTransport configuration parameters, please refer to MqttDataTransport . Connect/Disconnect The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"Eclipse Hono&trade; platform"},{"location":"cloud-platform/kura-hono/#eclipse-hono-platform","text":"Eclipse Hono\u2122 provides remote service interfaces for connecting large numbers of IoT devices to a back end and interacting with them in a uniform way regardless of the device communication protocol. More information can be found here . This document outlines how to connect to Eclipse Hono using the Kura Gateway Administrative Console.","title":"Eclipse Hono&trade; platform"},{"location":"cloud-platform/kura-hono/#using-the-kura-gateway-administrative-console","text":"The Kura Gateway Administrative Console exposes all services necessary for connecting to Eclipse Hono. First of all, in the Cloud Connections section, a new Hono-enabled connection needs to be setup. From the Cloud Connections section, the user needs to create a new connection: by specifying a valid PID: The result should be like the one depicted in the following image: The reference links listed below outline each service involved in the cloud connection. It is recommended that each section be reviewed. CloudService DataService MqttDataTransport","title":"Using the Kura Gateway Administrative Console"},{"location":"cloud-platform/kura-hono/#cloudservice","text":"The default settings for the CloudService are typically adequate for connecting to a Hono instance. The screen capture shown below displays the default settings for the CloudService. For details about each setting, please refer to CloudService .","title":"CloudService"},{"location":"cloud-platform/kura-hono/#dataservice","text":"The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. For complete details about the DataService configuration parameters, please refer to DataService . In order for Kura to connect to Eclipse Hono on startup, the connect.auto-on-startup option must be set to true . If this value is changed from false to true , Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true . Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura.","title":"DataService"},{"location":"cloud-platform/kura-hono/#mqttdatatransport","text":"While the majority of default settings in the MqttDataTransport can be left unchanged, the following parameters must be modified: broker-url - defines the MQTT broker URL that was provided when the Eurotech Everyware Cloud account was established. In the MqttDataTransport configuration screen capture shown below, the broker-url is mqtt://broker-url:1883 topic.context.account-name - defines the account name of the account to which the device is attempting to connect. In the MqttDataTransport configuration screen capture shown below, the account name is account-name username - identifies the user to be used when creating the connection. In the MqttDataTransport configuration screen capture shown below, the username is username . For complete details about the MqttDataTransport configuration parameters, please refer to MqttDataTransport .","title":"MqttDataTransport"},{"location":"cloud-platform/kura-hono/#connectdisconnect","text":"The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"Connect/Disconnect"},{"location":"cloud-platform/kura-kapua/","text":"Eclipse Kapua\u2122 platform Eclipse Kapua\u2122 is a modular platform providing the services required to manage IoT gateways and smart edge devices. Kapua provides a core integration framework and an initial set of core IoT services including a device registry, device management services, messaging services, data management, and application enablement. More information can be found here . This document outlines how to connect to Eclipse Kapua using the Kura Gateway Administrative Console. Using the Kura Gateway Administrative Console The Kura Gateway Administrative Console exposes all services necessary for connecting to Eclipse Kapua. The reference links listed below outline each service involved in the cloud connection. It is recommended that each section be reviewed. CloudService DataService MqttDataTransport CloudService The default settings for the CloudService are typically adequate for connecting to a Kapua instance. The screen capture shown below displays the default settings for the CloudService. For details about each setting, please refer to CloudService . Warning The \" Simple JSON \" payload encoding is not supported by Kapua. Use the default \" Kura Protobuf \" encoding instead. DataService The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. For complete details about the DataService configuration parameters, please refer to DataService . In order for Kura to connect to Eclipse Kapua on startup, the connect.auto-on-startup option must be set to true . If this value is changed from false to true , Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true . Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura. MqttDataTransport While the majority of default settings in the MqttDataTransport can be left unchanged, the following parameters must be modified: broker-url - defines the MQTT broker URL that was provided when the Kapua account was established. topic.context.account-name - defines the account name of the account to which the device is attempting to connect. In the MqttDataTransport configuration screen capture shown below, the account name is account-name username - identifies the user to be used when creating the connection. In the MqttDataTransport configuration screen capture shown below, the username is username . For complete details about the MqttDataTransport configuration parameters, please refer to MqttDataTransport . Connect/Disconnect The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"Eclipse Kapua&trade; platform"},{"location":"cloud-platform/kura-kapua/#eclipse-kapua-platform","text":"Eclipse Kapua\u2122 is a modular platform providing the services required to manage IoT gateways and smart edge devices. Kapua provides a core integration framework and an initial set of core IoT services including a device registry, device management services, messaging services, data management, and application enablement. More information can be found here . This document outlines how to connect to Eclipse Kapua using the Kura Gateway Administrative Console.","title":"Eclipse Kapua&trade; platform"},{"location":"cloud-platform/kura-kapua/#using-the-kura-gateway-administrative-console","text":"The Kura Gateway Administrative Console exposes all services necessary for connecting to Eclipse Kapua. The reference links listed below outline each service involved in the cloud connection. It is recommended that each section be reviewed. CloudService DataService MqttDataTransport","title":"Using the Kura Gateway Administrative Console"},{"location":"cloud-platform/kura-kapua/#cloudservice","text":"The default settings for the CloudService are typically adequate for connecting to a Kapua instance. The screen capture shown below displays the default settings for the CloudService. For details about each setting, please refer to CloudService . Warning The \" Simple JSON \" payload encoding is not supported by Kapua. Use the default \" Kura Protobuf \" encoding instead.","title":"CloudService"},{"location":"cloud-platform/kura-kapua/#dataservice","text":"The majority of default settings in the DataService can be left unchanged. A screen capture of the DataService configuration is shown below. For complete details about the DataService configuration parameters, please refer to DataService . In order for Kura to connect to Eclipse Kapua on startup, the connect.auto-on-startup option must be set to true . If this value is changed from false to true , Kura will immediately begin the connection process. It is recommended that the CloudService and MqttDataTransport are configured before setting the connect.auto-on-startup option to true . Note Changing the value of connect.auto-on-startup from true to false will not disconnect the client from the broker. This setting simply implies that Kura will not automatically connect on the next start of Kura.","title":"DataService"},{"location":"cloud-platform/kura-kapua/#mqttdatatransport","text":"While the majority of default settings in the MqttDataTransport can be left unchanged, the following parameters must be modified: broker-url - defines the MQTT broker URL that was provided when the Kapua account was established. topic.context.account-name - defines the account name of the account to which the device is attempting to connect. In the MqttDataTransport configuration screen capture shown below, the account name is account-name username - identifies the user to be used when creating the connection. In the MqttDataTransport configuration screen capture shown below, the username is username . For complete details about the MqttDataTransport configuration parameters, please refer to MqttDataTransport .","title":"MqttDataTransport"},{"location":"cloud-platform/kura-kapua/#connectdisconnect","text":"The status panel can be used to manually connect or disconnect the client while Kura is running. The main button toolbar has a connect and disconnect button that may be used to control connectivity. Note Connecting or disconnecting the client via the status panel has no impact on Kura automatically connecting at startup. This capability is only controlled via the connect.auto-on-startup DataService setting.","title":"Connect/Disconnect"},{"location":"cloud-platform/kura-sparkplug/","text":"Eclipse Sparkplug\u00ae Cloud Connector The org.eclipse.kura.cloudconnection.sparkplug.mqtt.provider package provides a Eclipse Kura Cloud Connection that implements the Eclipse Sparkplug\u00ae v3.0.0 specification . Minimum requirements This addon is compatible with Kura 5.2+. Introduction to Eclipse Sparkplug from Eclipse Sparkplug Sparkplug is an open software specification that provides MQTT clients the framework to seamlessly integrate data from their applications, sensors, devices, and gateways within the MQTT Infrastructure. It is specifically designed for use in Industrial Internet of Things (IIoT) architectures to ensure a high level of reliability and interoperability. The specification aims fulfill the following 3 goals: Define a common MQTT topic namespace. Define a common MQTT state management. Define a common MQTT payload. To achieve that, the Eclipse Sparkplug specification defines an architecture (see picture below) and 4 main actors: Device : a collection of related data points, which may represent a physical device (like a PLC, a set of sensors, etc.) and that notify the value or quality change of their data points. In this cloud connection, a Device is represented by the attached Cloud Publishers . Edge Node : the gateway that is responsible of the interaction with the MQTT broker and that estabilished sessions with the data-consuming Host Applications . This Cloud Connection assumes the role of Edge Node . MQTT Server : a MQTT server that supports the v3.1.1 (or v5.0) version of the protocol. Host Application : the data-consuming application that subscribes to the MQTT messages generated by the Edge Nodes. A Primary Host Application is responsible of controlling and monitoring Edge Nodes, which can be configured to modify their behavior based on the state of the Primary Host Application (for example, the application goes offline). You can imagine the Primary Host Application for Eclipse Kura being Eclipse Kapua. Image from https://sparkplug.eclipse.org/specification/version/3.0/documents/sparkplug-specification-3.0.0.pdf The main principles upon which the Specification is based on can be summarized as follows: PubSub Protocol : this is the main topology upon which the architecture is developed. Report by Exception (RBE) : messages need to be sent by the Edge Node only when values at the edge change, and the message should contain only the value/metrics that changed. There is no need for continuos polling; although it is higly discouraged, it is not mandatory to have Edge Nodes apply the RBE. Continuos Session Awareness : Host Applications are aware of the state of the Edge Nodes, and Edge Nodes are aware of the state of the Host Applications. This continuos session awareness is achieved by the means of birth and death certificates and state messages (continue the reading to find out more) and is the key to allow reporting by exception. Birth and Death certificates : these messages represent the state of Edge Nodes and Devices (online/offline + data that will be reported). The birth messages are always the first ones that are sent from the Edge Node, and the delivery of death certificates is ensured through the MQTT Will message , even if the connection is lost ungracefully. The birth messages always contain all the metrics that the Device or Edge Node will ever report on. If a new metric is added or a metric gets removed, then a new session needs to be estabilished. Connection Persistence : with the mechanisms above, the connection does not need to be persistent. For example, an Edge Node that disconnects gracefully with a MQTT DISCONNECT packet will not be seen as \"dead\" from the host application because no death certificate has been triggered (Will messages are sent only on failures). Hence, the Edge Node can implement a logic where it remains connected only during the timeframe needed for sending the new data. Warning This Cloud Connection maintains a persistent connection to the MQTT server. Eclipse Sparkplug Topic Namespace All clients using the specification must adhere to the following topic namespace: namespace/group_id/message_type/edge_node_id/[device_id] where: namespace : defines the structure of the remaining elements and the encoding for the payload. With Sparkplug v3.0.0 the namespace to utilize is spBv1.0 . group_id : some Edge Nodes can be related to each other identifying a group (for example, Edge Nodes in a given plant). This element is the identifier for the group. message_type : defines how to interpret and handle the payload. It encapsulates the semantic of the message and can be one of the following elements: NBIRTH / NDEATH : Edge Node birth and death certificates. DBIRTH / DDEATH : Device birth and death certificates. NDATA / DDATA : message containing data reported by the Edge Node or Device. NCMD / DMCD : message containing commands for the Edge Node or Device. STATE : message from the Primary Host Application indicating the state (offline/online) of the main consumer. edge_node_id : the identifier for the Edge Node. device_id (optional): the identifier for the Device. Must be unique under the same edge_node_id and must be always present on messages belonging to Devices (D- type messages). The combination of group_id and edge_node_id must be unique and is called Edge Node Descriptor . Tip It is advised to have group_id , edge_node_id , and device_id as small but as descriptive as possible, for better efficiency. Operational Behavior This introduction will focus more on the Edge Node and Device, as they are of more interest for this Cloud Connection. Session Management The session estabilishment procedure ensures the Edge Node to be subscribed to command-type messages for receiveing commands from the Host Application. An Edge Node can (optionally, but incouraged) specify to be aware of a primary host application state and, in such case, it needs to subscribe to the relative STATE messages. The Edge Node will send the birth certificate (and thus completing the session init procedure) only after receiving the STATE message denoting the Primary Host Application is online. After connection, if the Edge Node receives a STATE message denoting the Primary Host Application is offline, it must restart the session estabilishment procedure. On connection, the Edge Node sets a MQTT Will message containing a NDEATH certificate. Doing so, if the MQTT broker does not receive any communication within the Keep Alive period (client lost connection), it will send the Edge Node NDEATH certificate on all subscribers. A birth/death sequence number bdSeq is maintained in the Edge Node to match NBIRTH with NDEATH messages in the Host Application. Each bdSeq in the NDEATH message is matched with the corresponding bdSeq of the previous NBIRTH message. This allows the Host Application tracking the state of the Edge Nodes and mark not up-to-date metrics as STALE . A Device can send a device DBIRTH message after a Edge Node NBIRTH has been sent. The DBIRTH message contains all the metrics that the device will ever report on. If a new metric is added or an existing one removed, then the Device session needs to be re-estabilished. If the Edge Node looses the connection to some of its Devices, then it needs to send a Device DDEATH certificate on his behalf. The data-consuming Host Application will then mark that particular Device as offline and mark its metrics as STALE. Once the session is estabilished, the Device can publish the changed metrics using the DDATA message type. Multiple MQTT Server Topologies A Primary Host Application must publish its STATE message every time it connects to the MQTT broker. This ensures the Edge Nodes to be aware of its status as long as they remain connected to the MQTT server. At any point in time, an Edge Node can be connected to at most one MQTT server. If multiple MQTT servers are defined each time the Edge Node receives an offline STATE message from its Primary Host Application it needs to terminate the session and estabilish a new one with the next MQTT broker. Further Resources Eclipse Sparkplug v3.0.0 specification HiveMQ Sparkplug guides collection Eclipse Sparkplug FAQ Cloud Connection Configuration Cloud Endpoint Layer Configuration The cloud endpoint layer allows to attach CloudPublisher s and CloudSubscriber s to publish/subscribe messages on Sparkplug topics. Sparkplug Device Each CloudPublisher attached to this cloud connection acts as a Sparkplug Device . The corresponding configuration is shown in the picture below. The parameter specified as device.id will dictate the Sparkplug device identifier used to publish messages from this cloud publisher. A device DBIRTH message is immediately sent from this publisher when the first publish occurs or when a the set of published metrics is changed. The subsequent messages will be published as Sparkplug device data ( DDATA message type). The Sparkplug Device implemented by this publisher does not support the following features (optional in the Eclipse Sparkplug specification): tck-id-operational-behavior-device-ddeath : Device death messages ( DDEATH message type) since the usual way to publish data from the Wire Graph using a WireAsset attached to a CloudPublisher has no implementation for reporting error states (see WireAsset.onWireReceive ) tck-id-payloads-alias-uniqueness : Sparkplug aliases for metrics tck-id-message-flow-device-dcmd-subscribe : writing to outputs, hence it will not subscribe to device command messages ( DCMD message type) Sparkplug Device Payload The payload of DDATA message will be encoded using the Sparkplug B Protobuf definition converting the KuraPayload into Sparkplug payload as follows: Metrics from KuraPayload.metric() become Sparkplug metrics . Only the name , timestamp , datatype and value components are added. The timestamp is set to the publishing instant. The datatype is inferred from the Java type as follows: Java Type Sparkplug DataType Boolean DataType.Boolean byte[] DataType.Bytes Double DataType.Double Float DataType.Float Byte DataType.Int8 Short DataType.Int16 Integer DataType.Int32 Long DataType.Int64 String DataType.String Date DataType.DateTime BigInteger DataType.UInt64 All other Java types will cause the application to throw an Exception. KuraPayload.getBody() , if non null, will be copied into the body of the Sparkplug payload KuraPayload.getPosition() , if not null, will be used to create the following metrics from the KuraPosition object, if the value in there is not null (with the corresponding Sparkplug data types): kura.position.altitude : DataType.Double kura.position.heading : DataType.Double kura.position.latitude : DataType.Double kura.position.longitude : DataType.Double kura.position.precision : DataType.Double kura.position.satellites : DataType.Int32 kura.position.status DataType.Int32 kura.position.speed : DataType.Double kura.position.timestamp : DataType.DateTime KuraPayload.getTimestamp() , if not null, it will be used as the timestamp metric of the Sparkplug payload Sparkplug Subscriber This cloud connections allows creating a Cloud Subscriber that will subscribe to a generic set of topics. The configuration is shown in the picture below. It is assumed that the payloads received by this Cloud Connection are encoded using the Sparkplug B Protobuf definition . Users of this Cloud Subscriber should expect to receive KuraMessage s containing a KuraPayload such that: If non null, the Sparkplug body is used to set KuraPayload.setBody() If non null, the Sparkplug seq Metric is converted into a Kura metric with name seq If non null, the Sparkplug timestamp is used as Eclipse Kura's payload timestamp All Sparkplug Metrics are converted into Kura metrics with the same name and the following conversion rules: Sparkplug ValueCase Java Type Boolean boolean Bytes byte[] Dataset byte[] Double double Extension byte[] Float float Integer int Long long String String Template byte[] default null The metric timestamp is not supported in Eclipse Kura, therefore this information is lost at conversion. Data Service Layer Configuration The DataService layer used in this component is the org.eclipse.kura.data.DataService implementation. Please refer to the Data Service Configuraion page for further details. Data Transport Layer Configuration The Sparkplug Data Transport layer bridges the incoming requests to the underlying Eclipse Paho MQTT v3.1.1 client following the Sparkplug specification. In particular, the Data Transport Layer ensures the following. Edge Node Sparkplug Session Estabilishment : the Edge Node (this Cloud Connection) estabilishes a new Sparkplug session upon connection. An optional Primary Host Application ID can be specified (see picture below) to make the Cloud Connection wait until the Primary Host Application is online before publishing NBIRTH and DBIRTH messages. Edge Node Sparkplug Session Termination : upon disconnection, the Edge Node follows the required specification statements. In particular, multiple space-separated Server URIs can be specified in the component's configuration (see picture below). When a Primary Host Application ID is defined and it receives a STATE message denoting that the configured primary application is offline, then reconnection attempts are made cycling through the Server URIs list. When the last server fails to connect, then the traversal is restarted from the start of the list. Edge Node NCMD handler : upon reception of a valid NCMD message, the Transport layer checks if it contains a Node Control/Rebirth metric, and, if set to true , restarts the session estabilishment procedure without sending an MQTT CONNECT packet (client connection is not closed, only BIRTH messages are re-sent). The Sparkplug Data Transport layer is configured to wait for a random period of time between 0sec and 5sec before each connection attempt. This is to ensure that, on large deployments, the target MQTT servers and Host Applications will dilute session estabilishment requests by some margin. This behavior is not part of the Sparkplug specification. This cloud connection supports SSL connections to the connecting broker. The option SslManagerService.target allows, as an OSGi target filter, to specify the pid of the SslManagerService instance to use for creating SSL connections for broker URIs that use the ssl:// protocol. The default socket factory is used otherwise. Sparkplug Implementation Details Edge Node The NBIRTH message sent by this cloud connection will not contain any metrics, except for the mandatory ones required by the specification. This cloud connection does not send any NDATA messages in its default implementation.","title":"Eclipse Sparkplug&reg; Cloud Connector"},{"location":"cloud-platform/kura-sparkplug/#eclipse-sparkplug-cloud-connector","text":"The org.eclipse.kura.cloudconnection.sparkplug.mqtt.provider package provides a Eclipse Kura Cloud Connection that implements the Eclipse Sparkplug\u00ae v3.0.0 specification . Minimum requirements This addon is compatible with Kura 5.2+.","title":"Eclipse Sparkplug&reg; Cloud Connector"},{"location":"cloud-platform/kura-sparkplug/#introduction-to-eclipse-sparkplug","text":"from Eclipse Sparkplug Sparkplug is an open software specification that provides MQTT clients the framework to seamlessly integrate data from their applications, sensors, devices, and gateways within the MQTT Infrastructure. It is specifically designed for use in Industrial Internet of Things (IIoT) architectures to ensure a high level of reliability and interoperability. The specification aims fulfill the following 3 goals: Define a common MQTT topic namespace. Define a common MQTT state management. Define a common MQTT payload. To achieve that, the Eclipse Sparkplug specification defines an architecture (see picture below) and 4 main actors: Device : a collection of related data points, which may represent a physical device (like a PLC, a set of sensors, etc.) and that notify the value or quality change of their data points. In this cloud connection, a Device is represented by the attached Cloud Publishers . Edge Node : the gateway that is responsible of the interaction with the MQTT broker and that estabilished sessions with the data-consuming Host Applications . This Cloud Connection assumes the role of Edge Node . MQTT Server : a MQTT server that supports the v3.1.1 (or v5.0) version of the protocol. Host Application : the data-consuming application that subscribes to the MQTT messages generated by the Edge Nodes. A Primary Host Application is responsible of controlling and monitoring Edge Nodes, which can be configured to modify their behavior based on the state of the Primary Host Application (for example, the application goes offline). You can imagine the Primary Host Application for Eclipse Kura being Eclipse Kapua. Image from https://sparkplug.eclipse.org/specification/version/3.0/documents/sparkplug-specification-3.0.0.pdf The main principles upon which the Specification is based on can be summarized as follows: PubSub Protocol : this is the main topology upon which the architecture is developed. Report by Exception (RBE) : messages need to be sent by the Edge Node only when values at the edge change, and the message should contain only the value/metrics that changed. There is no need for continuos polling; although it is higly discouraged, it is not mandatory to have Edge Nodes apply the RBE. Continuos Session Awareness : Host Applications are aware of the state of the Edge Nodes, and Edge Nodes are aware of the state of the Host Applications. This continuos session awareness is achieved by the means of birth and death certificates and state messages (continue the reading to find out more) and is the key to allow reporting by exception. Birth and Death certificates : these messages represent the state of Edge Nodes and Devices (online/offline + data that will be reported). The birth messages are always the first ones that are sent from the Edge Node, and the delivery of death certificates is ensured through the MQTT Will message , even if the connection is lost ungracefully. The birth messages always contain all the metrics that the Device or Edge Node will ever report on. If a new metric is added or a metric gets removed, then a new session needs to be estabilished. Connection Persistence : with the mechanisms above, the connection does not need to be persistent. For example, an Edge Node that disconnects gracefully with a MQTT DISCONNECT packet will not be seen as \"dead\" from the host application because no death certificate has been triggered (Will messages are sent only on failures). Hence, the Edge Node can implement a logic where it remains connected only during the timeframe needed for sending the new data. Warning This Cloud Connection maintains a persistent connection to the MQTT server.","title":"Introduction to Eclipse Sparkplug"},{"location":"cloud-platform/kura-sparkplug/#eclipse-sparkplug-topic-namespace","text":"All clients using the specification must adhere to the following topic namespace: namespace/group_id/message_type/edge_node_id/[device_id] where: namespace : defines the structure of the remaining elements and the encoding for the payload. With Sparkplug v3.0.0 the namespace to utilize is spBv1.0 . group_id : some Edge Nodes can be related to each other identifying a group (for example, Edge Nodes in a given plant). This element is the identifier for the group. message_type : defines how to interpret and handle the payload. It encapsulates the semantic of the message and can be one of the following elements: NBIRTH / NDEATH : Edge Node birth and death certificates. DBIRTH / DDEATH : Device birth and death certificates. NDATA / DDATA : message containing data reported by the Edge Node or Device. NCMD / DMCD : message containing commands for the Edge Node or Device. STATE : message from the Primary Host Application indicating the state (offline/online) of the main consumer. edge_node_id : the identifier for the Edge Node. device_id (optional): the identifier for the Device. Must be unique under the same edge_node_id and must be always present on messages belonging to Devices (D- type messages). The combination of group_id and edge_node_id must be unique and is called Edge Node Descriptor . Tip It is advised to have group_id , edge_node_id , and device_id as small but as descriptive as possible, for better efficiency.","title":"Eclipse Sparkplug Topic Namespace"},{"location":"cloud-platform/kura-sparkplug/#operational-behavior","text":"This introduction will focus more on the Edge Node and Device, as they are of more interest for this Cloud Connection.","title":"Operational Behavior"},{"location":"cloud-platform/kura-sparkplug/#session-management","text":"The session estabilishment procedure ensures the Edge Node to be subscribed to command-type messages for receiveing commands from the Host Application. An Edge Node can (optionally, but incouraged) specify to be aware of a primary host application state and, in such case, it needs to subscribe to the relative STATE messages. The Edge Node will send the birth certificate (and thus completing the session init procedure) only after receiving the STATE message denoting the Primary Host Application is online. After connection, if the Edge Node receives a STATE message denoting the Primary Host Application is offline, it must restart the session estabilishment procedure. On connection, the Edge Node sets a MQTT Will message containing a NDEATH certificate. Doing so, if the MQTT broker does not receive any communication within the Keep Alive period (client lost connection), it will send the Edge Node NDEATH certificate on all subscribers. A birth/death sequence number bdSeq is maintained in the Edge Node to match NBIRTH with NDEATH messages in the Host Application. Each bdSeq in the NDEATH message is matched with the corresponding bdSeq of the previous NBIRTH message. This allows the Host Application tracking the state of the Edge Nodes and mark not up-to-date metrics as STALE . A Device can send a device DBIRTH message after a Edge Node NBIRTH has been sent. The DBIRTH message contains all the metrics that the device will ever report on. If a new metric is added or an existing one removed, then the Device session needs to be re-estabilished. If the Edge Node looses the connection to some of its Devices, then it needs to send a Device DDEATH certificate on his behalf. The data-consuming Host Application will then mark that particular Device as offline and mark its metrics as STALE. Once the session is estabilished, the Device can publish the changed metrics using the DDATA message type.","title":"Session Management"},{"location":"cloud-platform/kura-sparkplug/#multiple-mqtt-server-topologies","text":"A Primary Host Application must publish its STATE message every time it connects to the MQTT broker. This ensures the Edge Nodes to be aware of its status as long as they remain connected to the MQTT server. At any point in time, an Edge Node can be connected to at most one MQTT server. If multiple MQTT servers are defined each time the Edge Node receives an offline STATE message from its Primary Host Application it needs to terminate the session and estabilish a new one with the next MQTT broker.","title":"Multiple MQTT Server Topologies"},{"location":"cloud-platform/kura-sparkplug/#further-resources","text":"Eclipse Sparkplug v3.0.0 specification HiveMQ Sparkplug guides collection Eclipse Sparkplug FAQ","title":"Further Resources"},{"location":"cloud-platform/kura-sparkplug/#cloud-connection-configuration","text":"","title":"Cloud Connection Configuration"},{"location":"cloud-platform/kura-sparkplug/#cloud-endpoint-layer-configuration","text":"The cloud endpoint layer allows to attach CloudPublisher s and CloudSubscriber s to publish/subscribe messages on Sparkplug topics.","title":"Cloud Endpoint Layer Configuration"},{"location":"cloud-platform/kura-sparkplug/#sparkplug-device","text":"Each CloudPublisher attached to this cloud connection acts as a Sparkplug Device . The corresponding configuration is shown in the picture below. The parameter specified as device.id will dictate the Sparkplug device identifier used to publish messages from this cloud publisher. A device DBIRTH message is immediately sent from this publisher when the first publish occurs or when a the set of published metrics is changed. The subsequent messages will be published as Sparkplug device data ( DDATA message type). The Sparkplug Device implemented by this publisher does not support the following features (optional in the Eclipse Sparkplug specification): tck-id-operational-behavior-device-ddeath : Device death messages ( DDEATH message type) since the usual way to publish data from the Wire Graph using a WireAsset attached to a CloudPublisher has no implementation for reporting error states (see WireAsset.onWireReceive ) tck-id-payloads-alias-uniqueness : Sparkplug aliases for metrics tck-id-message-flow-device-dcmd-subscribe : writing to outputs, hence it will not subscribe to device command messages ( DCMD message type)","title":"Sparkplug Device"},{"location":"cloud-platform/kura-sparkplug/#sparkplug-device-payload","text":"The payload of DDATA message will be encoded using the Sparkplug B Protobuf definition converting the KuraPayload into Sparkplug payload as follows: Metrics from KuraPayload.metric() become Sparkplug metrics . Only the name , timestamp , datatype and value components are added. The timestamp is set to the publishing instant. The datatype is inferred from the Java type as follows: Java Type Sparkplug DataType Boolean DataType.Boolean byte[] DataType.Bytes Double DataType.Double Float DataType.Float Byte DataType.Int8 Short DataType.Int16 Integer DataType.Int32 Long DataType.Int64 String DataType.String Date DataType.DateTime BigInteger DataType.UInt64 All other Java types will cause the application to throw an Exception. KuraPayload.getBody() , if non null, will be copied into the body of the Sparkplug payload KuraPayload.getPosition() , if not null, will be used to create the following metrics from the KuraPosition object, if the value in there is not null (with the corresponding Sparkplug data types): kura.position.altitude : DataType.Double kura.position.heading : DataType.Double kura.position.latitude : DataType.Double kura.position.longitude : DataType.Double kura.position.precision : DataType.Double kura.position.satellites : DataType.Int32 kura.position.status DataType.Int32 kura.position.speed : DataType.Double kura.position.timestamp : DataType.DateTime KuraPayload.getTimestamp() , if not null, it will be used as the timestamp metric of the Sparkplug payload","title":"Sparkplug Device Payload"},{"location":"cloud-platform/kura-sparkplug/#sparkplug-subscriber","text":"This cloud connections allows creating a Cloud Subscriber that will subscribe to a generic set of topics. The configuration is shown in the picture below. It is assumed that the payloads received by this Cloud Connection are encoded using the Sparkplug B Protobuf definition . Users of this Cloud Subscriber should expect to receive KuraMessage s containing a KuraPayload such that: If non null, the Sparkplug body is used to set KuraPayload.setBody() If non null, the Sparkplug seq Metric is converted into a Kura metric with name seq If non null, the Sparkplug timestamp is used as Eclipse Kura's payload timestamp All Sparkplug Metrics are converted into Kura metrics with the same name and the following conversion rules: Sparkplug ValueCase Java Type Boolean boolean Bytes byte[] Dataset byte[] Double double Extension byte[] Float float Integer int Long long String String Template byte[] default null The metric timestamp is not supported in Eclipse Kura, therefore this information is lost at conversion.","title":"Sparkplug Subscriber"},{"location":"cloud-platform/kura-sparkplug/#data-service-layer-configuration","text":"The DataService layer used in this component is the org.eclipse.kura.data.DataService implementation. Please refer to the Data Service Configuraion page for further details.","title":"Data Service Layer Configuration"},{"location":"cloud-platform/kura-sparkplug/#data-transport-layer-configuration","text":"The Sparkplug Data Transport layer bridges the incoming requests to the underlying Eclipse Paho MQTT v3.1.1 client following the Sparkplug specification. In particular, the Data Transport Layer ensures the following. Edge Node Sparkplug Session Estabilishment : the Edge Node (this Cloud Connection) estabilishes a new Sparkplug session upon connection. An optional Primary Host Application ID can be specified (see picture below) to make the Cloud Connection wait until the Primary Host Application is online before publishing NBIRTH and DBIRTH messages. Edge Node Sparkplug Session Termination : upon disconnection, the Edge Node follows the required specification statements. In particular, multiple space-separated Server URIs can be specified in the component's configuration (see picture below). When a Primary Host Application ID is defined and it receives a STATE message denoting that the configured primary application is offline, then reconnection attempts are made cycling through the Server URIs list. When the last server fails to connect, then the traversal is restarted from the start of the list. Edge Node NCMD handler : upon reception of a valid NCMD message, the Transport layer checks if it contains a Node Control/Rebirth metric, and, if set to true , restarts the session estabilishment procedure without sending an MQTT CONNECT packet (client connection is not closed, only BIRTH messages are re-sent). The Sparkplug Data Transport layer is configured to wait for a random period of time between 0sec and 5sec before each connection attempt. This is to ensure that, on large deployments, the target MQTT servers and Host Applications will dilute session estabilishment requests by some margin. This behavior is not part of the Sparkplug specification. This cloud connection supports SSL connections to the connecting broker. The option SslManagerService.target allows, as an OSGi target filter, to specify the pid of the SslManagerService instance to use for creating SSL connections for broker URIs that use the ssl:// protocol. The default socket factory is used otherwise.","title":"Data Transport Layer Configuration"},{"location":"cloud-platform/kura-sparkplug/#sparkplug-implementation-details","text":"","title":"Sparkplug Implementation Details"},{"location":"cloud-platform/kura-sparkplug/#edge-node","text":"The NBIRTH message sent by this cloud connection will not contain any metrics, except for the mandatory ones required by the specification. This cloud connection does not send any NDATA messages in its default implementation.","title":"Edge Node"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/","text":"Apache Camel\u2122 as a Kura application As of 2.1.0 Kura provides a set of different ways to implement an application backed by Camel: Simple XML route configuration Custom XML route configuration Custom Java DSL definition Kura cloud endpoint Kura provides a special \"Kura cloud endpoint\" which allows to publish or subscribe to the Kura Cloud API. The default component name for this component is kura-cloud but it may be overridden in the following use cases. The default component will only be registered once the default Kura Cloud API is registered with OSGi. This instance is registered with the OSGi property kura.service.pid=org.eclipse.kura.cloud.CloudService . If you want to publish to a different cloud service instance you can either manually register a new instance of this endpoint, or e.g. use a functionality like the Simple XML router provides: also see selecting a cloud service . Endpoint URI The URI syntax of the endpoint is (assuming the default component name): kura-cloud:appid/topic . Where appid is the application ID registered with the Cloud API and topic is the topic to use. The following URI parameters are supported by the endpoint: Name Type Default Description applicationId String From URI path The application ID used with the Cloud API topic String From URI path The default topic name to publish/subscribe to when no header value is specified qos Integer 0 The QoS value when publishing to MQTT retain Boolean false The default retain flag when publishing to MQTT priority Integer 5 The default priority value control Boolean false Whether to publish/subscribe on the control or data topic hierarchy deviceId String empty The default device ID when publishing/subscribing to control topics The following header fields are supported. If a value is not set when publishing it is taken from the endpoint configuration: Name Type Description CamelKuraCloudService.topic String The name of the topic to publish to or from which the message was received CamelKuraCloudService.qos Integer The QoS to use when publishing to MQTT CamelKuraCloudService.retain Boolean The value of the retain flag when publishing to MQTT CamelKuraCloudService.control Boolean Whether to publish/subscribe on the control or data topic hierarchy CamelKuraCloudService.deviceId String The device ID when publishing to control topics Cloud to cloud messaging As already described, header values override the endpoint settings. This allows for a finer grained control with Camel messaging. However this can cause unexpected behavior when two Cloud API endpoints are bridged. Camel can received from a Cloud endpoint but also publish to it. Now it is possible to write Camel routes with exchange messages, receiving from one Cloud API, pushing to another. ------------------- ------------------- | Cloud Service A | <---> | Cloud Service B | ------------------- ------------------- Which could result in a Camel route XML like: <route id= \"bridgeLocalToRemote\" > <from uri= \"local-cloud:sensor/sensor1\" /> <to uri= \"upstream-cloud:gateway1/all-sensors\" /> </route> However the Consumer (from) would set the topic header value with the topic name it received the message from. And the Producer (to) would get its topic from the URI overriden by that header value. In order to fix this behavior the header field has to be cleared before publishing: <route id= \"bridgeLocalToRemote\" > <from uri= \"local-cloud:sensor/sensor1\" /> <removeHeaders pattern= \"CamelKuraCloudService.topic\" /> <to uri= \"upstream-cloud:gateway1/all-sensors\" /> </route> Simple XML routes Eclipse Kura 2.1.0 introduces a new \"out-of-the-box\" component which allows to configure a set of XML based routes. The component is called \"Camel XML router\" and can be configured with a simple set of XML routes. The following example logs all messages received on the topic foo/bar to a logger named MESSAGE_FROM_CLOUD : <routes xmlns= \"http://camel.apache.org/schema/spring\" > <route id= \"cloudConsumer\" > <from uri= \"kura-cloud:foo/bar\" /> <to uri= \"log:MESSAGE_FROM_CLOUD\" /> </route> </routes> But it is also possible to generate data and push to upstream to the cloud service: <route id= \"route1\" > <from uri= \"timer:foo\" /> <setBody> <method ref= \"payloadFactory\" method= \"create('random',${random(10)})\" /> </setBody> <bean ref= \"payloadFactory\" method= \"append('foo','bar')\" /> <to uri= \"stream:out\" /> <to uri= \"kura-cloud:myapp/test\" /> </route> This example to run a timer named \"foo\" every second. It uses the \"Payload Factory\" bean, which is pre-registered, to create a new payload structure and then append a second element to it. The output is first sent to a logger and then to the cloud source. Defining dependencies on components It is possible to use the Web UI to define a list of Camel components which must be present in order for this configuration to work. For example if the routes make use of the \"milo-server\" adapter for providing OPC UA support then \"milo-server\" can be added and the setup will wait for this component to be registered with OSGi before the Camel context gets started. The field contains a list of comma separated component names: e.g. milo-server, timer, log Selecting a cloud service It is also possible to define a map of cloud services which will be available for upstream connectivity. This makes use of Kura's \"multi cloud client\" feature. CloudService instances will get mapped from either a Kura Service PID ( kura.service.pid , as shown in the Web UI) or a full OSGi filter. The string is a comma seperated, key=value string, where the key is the name of the Camel cloud the instance will be registered as and the value is the Kura service PID or the OSGi filter string. For example: cloud=org.eclipse.kura.cloud.CloudService, cloud-2=foobar Custom Camel routers If a standard XML route configuration is not enough then it is possible to use XML routes in combination with a custom OSGi bundle or a Java DSL based Camel approach. For this to work a Kura development setup is required, please see Getting started for more information. The implementation of such Camel components follow the standard Kura guides for developing components, like, for example, the ConfigurableComponent pattern. This section only describes the Camel specifics. Of course it is also possible to follow a very simple approach and directly use the Camel OSGi functionalities like org.apache.camel.core.osgi.OsgiDefaultCamelContext . Note Kura currently doesn't support the OSGi Blueprint approach Kura support for Camel is split up in two layers. There is a more basic support, which helps in running a raw Camel router. This is CamelRunner which is located in the package org.eclipse.kura.camel.router . And then there are a few abstract basic components in the package org.eclipse.kura.camel.component which help in creating Kura components based on Camel. Camel components The base classes in org.eclipse.kura.camel.component are intended to help creating new OSGi DS components base on Camel. XML based component For an XML based approach which can be configured through the Kura ConfigurationService the base class AbstractXmlCamelComponent can be used. The constructor expectes the name of a property which will contain the Camel XML router information when it gets configured through the configuration service. It will automatically parse and apply the Camel routes. The method void beforeStart(CamelContext camelContext) may be used in order to configure the Camel context before it gets started. Every time the routes get updated using the modified(Map<String, Object>) method, the route XML will be re-parsed and routes will be added, removed or updated according to the new XML. Java DSL based component In order to create a Java DSL based router setup the base class AbstractJavaCamelComponent may be used, which implements and RouteBuilder class, a simple setup might look like: import org.eclipse.kura.camel.component.AbstractJavaCamelComponent ; class MyRouter extends AbstractJavaCamelComponent { public void configure () throws Exception { from ( \"direct:test\" ) . to ( \"mock:test\" ); } } Using the CamelRunner The CamelRunner class is not derived from any OSGi or Kura base class and can be used in scenarios where more flexibility is required. It allows to define a set of pre-requisites for the Camel context. It is for example possible to define a dependency on a Kura cloud service instance and a Camel component provider. Once the runner is started it will listen for OSGi services resolving those dependencies and then starting up the Camel context. The following example shows how to set up a Camel context using the CamelRunner : // create a new camel Builder Builder builder = new CamelRunner . Builder (); // add service dependency builder . cloudService ( \"kura.service.pid\" , \"my.cloud.service.pid\" ); // add Camel component dependency to 'milo-server' builder . requireComponent ( \"milo-server\" ); CamelRunner runner = builder . build (); // set routes runner . setRoutes ( new RouteBuilder () { public void configure () throws Exception { from ( \"direct:test\" ) . to ( \"mock:test\" ); } } ); // set routes runner . start (); It is also possible to later update routes with a call to setRoutes : // maybe update routes at a later time runner . setRoutes ( /* different routes */ ); Examples The following examples can help in getting started. Kura Camel example publisher The Camel example publisher ( org.eclipse.kura.example.camel.publisher ) can be used as an reference for starting. The final OSGi bundle can be dropped into a Kura application an be started. It allows to configure dynamically during runtime and is capable of switching CloudService instances dynamically. Kura Camel quickstart The Camel quickstart project ( org.eclipse.kura.example.camel.quickstart ) shows two components, Java and XML based, working together. The bundle can also be dropped into Kura for testing. Kura Camel aggregation The Camel quickstart project ( org.eclipse.kura.example.camel.aggregation ) shows a simple data aggregation pattern with Camel by processing data and publishing the result.","title":"Apache Camel&trade; as application"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#apache-camel-as-a-kura-application","text":"As of 2.1.0 Kura provides a set of different ways to implement an application backed by Camel: Simple XML route configuration Custom XML route configuration Custom Java DSL definition","title":"Apache Camel&trade; as a Kura application"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#kura-cloud-endpoint","text":"Kura provides a special \"Kura cloud endpoint\" which allows to publish or subscribe to the Kura Cloud API. The default component name for this component is kura-cloud but it may be overridden in the following use cases. The default component will only be registered once the default Kura Cloud API is registered with OSGi. This instance is registered with the OSGi property kura.service.pid=org.eclipse.kura.cloud.CloudService . If you want to publish to a different cloud service instance you can either manually register a new instance of this endpoint, or e.g. use a functionality like the Simple XML router provides: also see selecting a cloud service .","title":"Kura cloud endpoint"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#endpoint-uri","text":"The URI syntax of the endpoint is (assuming the default component name): kura-cloud:appid/topic . Where appid is the application ID registered with the Cloud API and topic is the topic to use. The following URI parameters are supported by the endpoint: Name Type Default Description applicationId String From URI path The application ID used with the Cloud API topic String From URI path The default topic name to publish/subscribe to when no header value is specified qos Integer 0 The QoS value when publishing to MQTT retain Boolean false The default retain flag when publishing to MQTT priority Integer 5 The default priority value control Boolean false Whether to publish/subscribe on the control or data topic hierarchy deviceId String empty The default device ID when publishing/subscribing to control topics The following header fields are supported. If a value is not set when publishing it is taken from the endpoint configuration: Name Type Description CamelKuraCloudService.topic String The name of the topic to publish to or from which the message was received CamelKuraCloudService.qos Integer The QoS to use when publishing to MQTT CamelKuraCloudService.retain Boolean The value of the retain flag when publishing to MQTT CamelKuraCloudService.control Boolean Whether to publish/subscribe on the control or data topic hierarchy CamelKuraCloudService.deviceId String The device ID when publishing to control topics","title":"Endpoint URI"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#cloud-to-cloud-messaging","text":"As already described, header values override the endpoint settings. This allows for a finer grained control with Camel messaging. However this can cause unexpected behavior when two Cloud API endpoints are bridged. Camel can received from a Cloud endpoint but also publish to it. Now it is possible to write Camel routes with exchange messages, receiving from one Cloud API, pushing to another. ------------------- ------------------- | Cloud Service A | <---> | Cloud Service B | ------------------- ------------------- Which could result in a Camel route XML like: <route id= \"bridgeLocalToRemote\" > <from uri= \"local-cloud:sensor/sensor1\" /> <to uri= \"upstream-cloud:gateway1/all-sensors\" /> </route> However the Consumer (from) would set the topic header value with the topic name it received the message from. And the Producer (to) would get its topic from the URI overriden by that header value. In order to fix this behavior the header field has to be cleared before publishing: <route id= \"bridgeLocalToRemote\" > <from uri= \"local-cloud:sensor/sensor1\" /> <removeHeaders pattern= \"CamelKuraCloudService.topic\" /> <to uri= \"upstream-cloud:gateway1/all-sensors\" /> </route>","title":"Cloud to cloud messaging"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#simple-xml-routes","text":"Eclipse Kura 2.1.0 introduces a new \"out-of-the-box\" component which allows to configure a set of XML based routes. The component is called \"Camel XML router\" and can be configured with a simple set of XML routes. The following example logs all messages received on the topic foo/bar to a logger named MESSAGE_FROM_CLOUD : <routes xmlns= \"http://camel.apache.org/schema/spring\" > <route id= \"cloudConsumer\" > <from uri= \"kura-cloud:foo/bar\" /> <to uri= \"log:MESSAGE_FROM_CLOUD\" /> </route> </routes> But it is also possible to generate data and push to upstream to the cloud service: <route id= \"route1\" > <from uri= \"timer:foo\" /> <setBody> <method ref= \"payloadFactory\" method= \"create('random',${random(10)})\" /> </setBody> <bean ref= \"payloadFactory\" method= \"append('foo','bar')\" /> <to uri= \"stream:out\" /> <to uri= \"kura-cloud:myapp/test\" /> </route> This example to run a timer named \"foo\" every second. It uses the \"Payload Factory\" bean, which is pre-registered, to create a new payload structure and then append a second element to it. The output is first sent to a logger and then to the cloud source.","title":"Simple XML routes"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#defining-dependencies-on-components","text":"It is possible to use the Web UI to define a list of Camel components which must be present in order for this configuration to work. For example if the routes make use of the \"milo-server\" adapter for providing OPC UA support then \"milo-server\" can be added and the setup will wait for this component to be registered with OSGi before the Camel context gets started. The field contains a list of comma separated component names: e.g. milo-server, timer, log","title":"Defining dependencies on components"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#selecting-a-cloud-service","text":"It is also possible to define a map of cloud services which will be available for upstream connectivity. This makes use of Kura's \"multi cloud client\" feature. CloudService instances will get mapped from either a Kura Service PID ( kura.service.pid , as shown in the Web UI) or a full OSGi filter. The string is a comma seperated, key=value string, where the key is the name of the Camel cloud the instance will be registered as and the value is the Kura service PID or the OSGi filter string. For example: cloud=org.eclipse.kura.cloud.CloudService, cloud-2=foobar","title":"Selecting a cloud service"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#custom-camel-routers","text":"If a standard XML route configuration is not enough then it is possible to use XML routes in combination with a custom OSGi bundle or a Java DSL based Camel approach. For this to work a Kura development setup is required, please see Getting started for more information. The implementation of such Camel components follow the standard Kura guides for developing components, like, for example, the ConfigurableComponent pattern. This section only describes the Camel specifics. Of course it is also possible to follow a very simple approach and directly use the Camel OSGi functionalities like org.apache.camel.core.osgi.OsgiDefaultCamelContext . Note Kura currently doesn't support the OSGi Blueprint approach Kura support for Camel is split up in two layers. There is a more basic support, which helps in running a raw Camel router. This is CamelRunner which is located in the package org.eclipse.kura.camel.router . And then there are a few abstract basic components in the package org.eclipse.kura.camel.component which help in creating Kura components based on Camel.","title":"Custom Camel routers"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#camel-components","text":"The base classes in org.eclipse.kura.camel.component are intended to help creating new OSGi DS components base on Camel.","title":"Camel components"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#xml-based-component","text":"For an XML based approach which can be configured through the Kura ConfigurationService the base class AbstractXmlCamelComponent can be used. The constructor expectes the name of a property which will contain the Camel XML router information when it gets configured through the configuration service. It will automatically parse and apply the Camel routes. The method void beforeStart(CamelContext camelContext) may be used in order to configure the Camel context before it gets started. Every time the routes get updated using the modified(Map<String, Object>) method, the route XML will be re-parsed and routes will be added, removed or updated according to the new XML.","title":"XML based component"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#java-dsl-based-component","text":"In order to create a Java DSL based router setup the base class AbstractJavaCamelComponent may be used, which implements and RouteBuilder class, a simple setup might look like: import org.eclipse.kura.camel.component.AbstractJavaCamelComponent ; class MyRouter extends AbstractJavaCamelComponent { public void configure () throws Exception { from ( \"direct:test\" ) . to ( \"mock:test\" ); } }","title":"Java DSL based component"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#using-the-camelrunner","text":"The CamelRunner class is not derived from any OSGi or Kura base class and can be used in scenarios where more flexibility is required. It allows to define a set of pre-requisites for the Camel context. It is for example possible to define a dependency on a Kura cloud service instance and a Camel component provider. Once the runner is started it will listen for OSGi services resolving those dependencies and then starting up the Camel context. The following example shows how to set up a Camel context using the CamelRunner : // create a new camel Builder Builder builder = new CamelRunner . Builder (); // add service dependency builder . cloudService ( \"kura.service.pid\" , \"my.cloud.service.pid\" ); // add Camel component dependency to 'milo-server' builder . requireComponent ( \"milo-server\" ); CamelRunner runner = builder . build (); // set routes runner . setRoutes ( new RouteBuilder () { public void configure () throws Exception { from ( \"direct:test\" ) . to ( \"mock:test\" ); } } ); // set routes runner . start (); It is also possible to later update routes with a call to setRoutes : // maybe update routes at a later time runner . setRoutes ( /* different routes */ );","title":"Using the CamelRunner"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#examples","text":"The following examples can help in getting started.","title":"Examples"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#kura-camel-example-publisher","text":"The Camel example publisher ( org.eclipse.kura.example.camel.publisher ) can be used as an reference for starting. The final OSGi bundle can be dropped into a Kura application an be started. It allows to configure dynamically during runtime and is capable of switching CloudService instances dynamically.","title":"Kura Camel example publisher"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#kura-camel-quickstart","text":"The Camel quickstart project ( org.eclipse.kura.example.camel.quickstart ) shows two components, Java and XML based, working together. The bundle can also be dropped into Kura for testing.","title":"Kura Camel quickstart"},{"location":"cloud-platform/apache-camel-integration/kura-camel-app/#kura-camel-aggregation","text":"The Camel quickstart project ( org.eclipse.kura.example.camel.aggregation ) shows a simple data aggregation pattern with Camel by processing data and publishing the result.","title":"Kura Camel aggregation"},{"location":"cloud-platform/apache-camel-integration/kura-camel-cloud/","text":"Apache Camel\u2122 as a Kura cloud service The default way to create a new cloud service instance backed by Camel is to use the new Web UI for cloud services. A new cloud service instance of the type org.eclipse.kura.camel.cloud.factory.CamelFactory has to be created. In addition to that a set of Camel routes have to be provided. The interface with the Kura application is the Camel vm component. Information set \"upstream\" from the Kura application can be received by the Camel cloud service instance of the following endpoint vm:camel:example . Where camel is the application id and example is the topic. The following code snippet writes out all of the Kura payload structure received on this topic to the logger system: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <routes xmlns= \"http://camel.apache.org/schema/spring\" > <route id= \"camel-example-topic\" > <from uri= \"vm:camel:example\" /> <split> <simple> ${body.metrics().entrySet()} </simple> <setHeader headerName= \"item\" > <simple> ${body.key()} </simple> </setHeader> <setBody> <simple> ${body.value()} </simple> </setBody> <toD uri= \"log:kura.data.${header.item}\" /> </split> </route> </routes> The snippet splits up the incoming KuraPayload structure and creates a logger called kura.data.<metric> for each metric and writes out the actual value to it. The output in the log file should look like: 2016-11-14 16:14:34,539 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.intValue - Exchange[ExchangePattern: InOnly, BodyType: Long, Body: 19] 2016-11-14 16:14:34,566 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.doubleValue - Exchange[ExchangePattern: InOnly, BodyType: Double, Body: 10.226808617581144] 2016-11-14 16:14:35,575 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.intValue - Exchange[ExchangePattern: InOnly, BodyType: Long, Body: 19] 2016-11-14 16:14:35,602 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.doubleValue - Exchange[ExchangePattern: InOnly, BodyType: Double, Body: 10.27218775669447] 2016-11-14 16:14:36,539 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.intValue - Exchange[ExchangePattern: InOnly, BodyType: Long, Body: 19] 2016-11-14 16:14:36,567 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.doubleValue - Exchange[ExchangePattern: InOnly, BodyType: Double, Body: 10.314456684208022]","title":"Apache Camel&trade; Cloud Service"},{"location":"cloud-platform/apache-camel-integration/kura-camel-cloud/#apache-camel-as-a-kura-cloud-service","text":"The default way to create a new cloud service instance backed by Camel is to use the new Web UI for cloud services. A new cloud service instance of the type org.eclipse.kura.camel.cloud.factory.CamelFactory has to be created. In addition to that a set of Camel routes have to be provided. The interface with the Kura application is the Camel vm component. Information set \"upstream\" from the Kura application can be received by the Camel cloud service instance of the following endpoint vm:camel:example . Where camel is the application id and example is the topic. The following code snippet writes out all of the Kura payload structure received on this topic to the logger system: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <routes xmlns= \"http://camel.apache.org/schema/spring\" > <route id= \"camel-example-topic\" > <from uri= \"vm:camel:example\" /> <split> <simple> ${body.metrics().entrySet()} </simple> <setHeader headerName= \"item\" > <simple> ${body.key()} </simple> </setHeader> <setBody> <simple> ${body.value()} </simple> </setBody> <toD uri= \"log:kura.data.${header.item}\" /> </split> </route> </routes> The snippet splits up the incoming KuraPayload structure and creates a logger called kura.data.<metric> for each metric and writes out the actual value to it. The output in the log file should look like: 2016-11-14 16:14:34,539 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.intValue - Exchange[ExchangePattern: InOnly, BodyType: Long, Body: 19] 2016-11-14 16:14:34,566 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.doubleValue - Exchange[ExchangePattern: InOnly, BodyType: Double, Body: 10.226808617581144] 2016-11-14 16:14:35,575 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.intValue - Exchange[ExchangePattern: InOnly, BodyType: Long, Body: 19] 2016-11-14 16:14:35,602 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.doubleValue - Exchange[ExchangePattern: InOnly, BodyType: Double, Body: 10.27218775669447] 2016-11-14 16:14:36,539 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.intValue - Exchange[ExchangePattern: InOnly, BodyType: Long, Body: 19] 2016-11-14 16:14:36,567 [Camel (camel-10) thread #18 - vm://camel:example] INFO k.d.doubleValue - Exchange[ExchangePattern: InOnly, BodyType: Double, Body: 10.314456684208022]","title":"Apache Camel&trade; as a Kura cloud service"},{"location":"cloud-platform/apache-camel-integration/kura-camel/","text":"Apache Camel\u2122 integration overview Note This document describes the Camel integration for Kura 2.1.0 Kura provides two main integration points for Camel: Camel as a Kura application Camel as a Kura cloud service The first allows one to configure Camel to provide data and receive commands from any CloudService instance which is configured in Kura. For example the default CloudService instance which is backed by MQTT. The second approach allows one to create a custom CloudService implementation and route data coming from other Kura applications with the routes provided by this Camel context. Deploying additional Camel components Kura comes with the following Camel components pre-installed: camel-core camel-core-osgi camel-stream If additional Camel components are required, they can be installed using deployment packages (DP), as common with Kura. There are pre-packaged DPs available for e.g. AMQP, OPC UA, MQTT and other Camel components outside of the Kura project.","title":"Apache Camel&trade; integration"},{"location":"cloud-platform/apache-camel-integration/kura-camel/#apache-camel-integration-overview","text":"Note This document describes the Camel integration for Kura 2.1.0 Kura provides two main integration points for Camel: Camel as a Kura application Camel as a Kura cloud service The first allows one to configure Camel to provide data and receive commands from any CloudService instance which is configured in Kura. For example the default CloudService instance which is backed by MQTT. The second approach allows one to create a custom CloudService implementation and route data coming from other Kura applications with the routes provided by this Camel context.","title":"Apache Camel&trade; integration overview"},{"location":"cloud-platform/apache-camel-integration/kura-camel/#deploying-additional-camel-components","text":"Kura comes with the following Camel components pre-installed: camel-core camel-core-osgi camel-stream If additional Camel components are required, they can be installed using deployment packages (DP), as common with Kura. There are pre-packaged DPs available for e.g. AMQP, OPC UA, MQTT and other Camel components outside of the Kura project.","title":"Deploying additional Camel components"},{"location":"connect-field-devices/IO-apis/","text":"I/O APIs The full Eclipse Kura API reference is available here . In this page, the developer can find a synthetic grouping of the I/O APIs added starting from Kura 3.1.0. Drivers ChannelDescriptor ChannelListener ChannelRecord ConnectionException Assets AssetConfiguration Channel","title":"I/O APIs"},{"location":"connect-field-devices/IO-apis/#io-apis","text":"The full Eclipse Kura API reference is available here . In this page, the developer can find a synthetic grouping of the I/O APIs added starting from Kura 3.1.0. Drivers ChannelDescriptor ChannelListener ChannelRecord ConnectionException Assets AssetConfiguration Channel","title":"I/O APIs"},{"location":"connect-field-devices/asset-implemetation/","text":"Asset implementation An Asset is a logical representation of a field device, described by a list of Channels . The Asset uses a specific Driver instance to communicate with the underlying device and it models a generic device resource as a Channel . A register in a PLC or a GATT Characteristic in a Bluetooth device are examples of Channels. In this way, each Asset has multiple Channels for reading and writing data from/to an Industrial Device. Assets can be used as Wire Components to access the resources referenced by the defined channels inside a Wire Graph, see the Assets as Wire Components guide for more details. Channel Example To further describe the concept of Channel and Asset, the following table shows a set of PLC register addresses as provided in a typical PLC documentation. Name Entity Address LED1 COILS 2049 LED2 COILS 2050 LED3 COILS 2051 LED4 RED COILS 2052 LED4 GREEN COILS 2053 LED4 BLUE COILS 2054 Counter 3 INPUT REGISTERS 515 Quad Counter INPUT REGISTERS 520 Toggle 4 DISCRETE INPUTS 2052 Toggle 5 DISCRETE INPUTS 2053 Toggle 6 DISCRETE INPUTS 2054 Reset Counter 3 COILS 3075 Reset Quad Counter COILS 3084 The corresponding Channels definition in the Asset is as follows: As shown in the previous image, the Channel definition in an Asset results easily mappable to what available in a generic PLC documentation. Once defined the Channels in an Asset, a simple Java application that leverages the Asset API can easily communicate with the Field device by simply referring to the specific Channel of interest. Channel Definition enabled : each channel can be separately enabled using this flag. name : unique user-friendly name for a channel type : represents the type of operation supported. Possible values are: READ , WRITE , READ/WRITE value.type : represents the data type that will be used when creating the Wire Envelope for the connected components. scale : an optional scaling factor to be applied only to the numeric values retrieved from the field. It is represented as a double and if the value.type is, for example, an integer, the scaling factor multiplier will be casted to integer before multiplying it to the retrieved value. offset : an optional offset value that will be added only to the numeric values retrieved from the field. It is a double in the asset definition, and will be casted to the value.type of the retrieved value before being applied. unit : an optional string value that will be added to the asset channel read to represent the unit of measure associated to that specific channel. listen : if supported by the associated driver, allows to receive notifications by the driver on events. This flag currently has effect only inside Kura Wires. Driver specific parameters The parameters that are not included in list of driver independent parameters above are driver specific. These parameters are used to identify the resource addressed by the channel. Driver specific parameters are described in the driver documentation. Other Asset Configurations asset.desc : a user friendly description of the asset emit.all.channels : specifies whether the values of all READ or READ_WRITE channels should be emitted in case of a channel event. If set to true, the values for all channels will be read and emitted, if set to false, only the value for the channel related to the event will be emitted. timestamp.mode : if set to PER_CHANNEL, the component will emit a driver-generated timestamp per channel property. If set to SINGLE_ASSET_GENERATED, the component will emit a single timestamp per request, generated by the Asset itself before emitting the envelope. If set to SINGLE_DRIVER_GENERATED_MAX or SINGLE_DRIVER_GENERATED_MIN, the component will emit a single driver generated timestamp being respectively the max (most recent) or min (oldest) among the timestamps of the channels. emit.errors : Specifies whether errors should be included or not in the emitted envelope. Default is false. emit.on.change : If set to true, this component will include a channel value in the output emitted in Kura Wires only if it is different than the one from the previous read operation or event. Channel errors will always be emitted if emit.errors is set to true. emit.empty.envelopes : If set to false, this component will not emit empty envelopes. This property can be useful if combined with emit.on.change . Channels download The creation of the channels is a process that could be very time and effort consuming. For this reason, once the user has created the desired channels, it is possible to download the entire list from the web UI, by clicking the Download Channels button: The list is downloaded in csv format and is represented in the form of a table, whose columns represent the entries for the options in the channel definition, while each row is equivalent to a specific channel. For example, the resulting csv file retrieved from downloading the list of channels in the image above is: The resulting table is composed by some static, pre-defined options (the ones mentioned in Channel Definition section above, from enabled to listen ) that are the same for each component and the ones introduced by the specific bundle under analisys. In this case, the modbus driver introduces these driver-specific options: unit.id primary.table memory.address data.order data.type array.data.length The download tool is extremely useful in all those situations where the user wants to quickly load a long list of channels at once: for example, it can easily clone the same list in multiple assets, export it to another device, or simply save it locally to always have a copy of the channels ready. CSV upload The Upload Channels button allows the user to load a local csv file to create the channel list in one shot: the uploading file must implement the same table-structure described in the \"Channels download\" section above, so with each rows representing a channels, and each column one entry of the channel's options. Once the user clicks on the button, will be shown a pop-up in which there are a button to locate the file in the user's filesystem and two checkboxes to allow the uploading phase customization. After clicking on Upload , if the process is succesful, the new channels list will be shown, and the user is just asked to click on the Apply button to save the asset variation. Force import empty string policy The Force import empty string policy checkbox forces the parsing of all empty values present in the csv as empty strings, for all those channel's options that are typed to String and \"not required\" by the metatype. So, this box must be checked when the user wants that all empty values from the csv are considered as empty strings ( \"\" ) when parsed to driver-specific channel option, defined by the metatype as String type and not required . So, those values that are null in the csv, will be set as \"\" in the channel options. The user must be cautious, because the framework supposes that it's consciously leaving empty values in the csv. Otherwise, if the box is unchecked, all the csv empty values will be considered as null strings and parsed to the default value set in the metatype of the driver. If, for example, the user downloads the channels list following the steps described in the precious section, it could upload the same csv file into an other asset, or another device, to get the exactly same asset configuration. Replace current channels The Replace current channels must be checked when the user wants to replace all the channels currently present in the asset, with the ones that will be created by the csv uploading.","title":"Asset implementation"},{"location":"connect-field-devices/asset-implemetation/#asset-implementation","text":"An Asset is a logical representation of a field device, described by a list of Channels . The Asset uses a specific Driver instance to communicate with the underlying device and it models a generic device resource as a Channel . A register in a PLC or a GATT Characteristic in a Bluetooth device are examples of Channels. In this way, each Asset has multiple Channels for reading and writing data from/to an Industrial Device. Assets can be used as Wire Components to access the resources referenced by the defined channels inside a Wire Graph, see the Assets as Wire Components guide for more details.","title":"Asset implementation"},{"location":"connect-field-devices/asset-implemetation/#channel-example","text":"To further describe the concept of Channel and Asset, the following table shows a set of PLC register addresses as provided in a typical PLC documentation. Name Entity Address LED1 COILS 2049 LED2 COILS 2050 LED3 COILS 2051 LED4 RED COILS 2052 LED4 GREEN COILS 2053 LED4 BLUE COILS 2054 Counter 3 INPUT REGISTERS 515 Quad Counter INPUT REGISTERS 520 Toggle 4 DISCRETE INPUTS 2052 Toggle 5 DISCRETE INPUTS 2053 Toggle 6 DISCRETE INPUTS 2054 Reset Counter 3 COILS 3075 Reset Quad Counter COILS 3084 The corresponding Channels definition in the Asset is as follows: As shown in the previous image, the Channel definition in an Asset results easily mappable to what available in a generic PLC documentation. Once defined the Channels in an Asset, a simple Java application that leverages the Asset API can easily communicate with the Field device by simply referring to the specific Channel of interest.","title":"Channel Example"},{"location":"connect-field-devices/asset-implemetation/#channel-definition","text":"enabled : each channel can be separately enabled using this flag. name : unique user-friendly name for a channel type : represents the type of operation supported. Possible values are: READ , WRITE , READ/WRITE value.type : represents the data type that will be used when creating the Wire Envelope for the connected components. scale : an optional scaling factor to be applied only to the numeric values retrieved from the field. It is represented as a double and if the value.type is, for example, an integer, the scaling factor multiplier will be casted to integer before multiplying it to the retrieved value. offset : an optional offset value that will be added only to the numeric values retrieved from the field. It is a double in the asset definition, and will be casted to the value.type of the retrieved value before being applied. unit : an optional string value that will be added to the asset channel read to represent the unit of measure associated to that specific channel. listen : if supported by the associated driver, allows to receive notifications by the driver on events. This flag currently has effect only inside Kura Wires.","title":"Channel Definition"},{"location":"connect-field-devices/asset-implemetation/#driver-specific-parameters","text":"The parameters that are not included in list of driver independent parameters above are driver specific. These parameters are used to identify the resource addressed by the channel. Driver specific parameters are described in the driver documentation.","title":"Driver specific parameters"},{"location":"connect-field-devices/asset-implemetation/#other-asset-configurations","text":"asset.desc : a user friendly description of the asset emit.all.channels : specifies whether the values of all READ or READ_WRITE channels should be emitted in case of a channel event. If set to true, the values for all channels will be read and emitted, if set to false, only the value for the channel related to the event will be emitted. timestamp.mode : if set to PER_CHANNEL, the component will emit a driver-generated timestamp per channel property. If set to SINGLE_ASSET_GENERATED, the component will emit a single timestamp per request, generated by the Asset itself before emitting the envelope. If set to SINGLE_DRIVER_GENERATED_MAX or SINGLE_DRIVER_GENERATED_MIN, the component will emit a single driver generated timestamp being respectively the max (most recent) or min (oldest) among the timestamps of the channels. emit.errors : Specifies whether errors should be included or not in the emitted envelope. Default is false. emit.on.change : If set to true, this component will include a channel value in the output emitted in Kura Wires only if it is different than the one from the previous read operation or event. Channel errors will always be emitted if emit.errors is set to true. emit.empty.envelopes : If set to false, this component will not emit empty envelopes. This property can be useful if combined with emit.on.change .","title":"Other Asset Configurations"},{"location":"connect-field-devices/asset-implemetation/#channels-download","text":"The creation of the channels is a process that could be very time and effort consuming. For this reason, once the user has created the desired channels, it is possible to download the entire list from the web UI, by clicking the Download Channels button: The list is downloaded in csv format and is represented in the form of a table, whose columns represent the entries for the options in the channel definition, while each row is equivalent to a specific channel. For example, the resulting csv file retrieved from downloading the list of channels in the image above is: The resulting table is composed by some static, pre-defined options (the ones mentioned in Channel Definition section above, from enabled to listen ) that are the same for each component and the ones introduced by the specific bundle under analisys. In this case, the modbus driver introduces these driver-specific options: unit.id primary.table memory.address data.order data.type array.data.length The download tool is extremely useful in all those situations where the user wants to quickly load a long list of channels at once: for example, it can easily clone the same list in multiple assets, export it to another device, or simply save it locally to always have a copy of the channels ready.","title":"Channels download"},{"location":"connect-field-devices/asset-implemetation/#csv-upload","text":"The Upload Channels button allows the user to load a local csv file to create the channel list in one shot: the uploading file must implement the same table-structure described in the \"Channels download\" section above, so with each rows representing a channels, and each column one entry of the channel's options. Once the user clicks on the button, will be shown a pop-up in which there are a button to locate the file in the user's filesystem and two checkboxes to allow the uploading phase customization. After clicking on Upload , if the process is succesful, the new channels list will be shown, and the user is just asked to click on the Apply button to save the asset variation.","title":"CSV upload"},{"location":"connect-field-devices/asset-implemetation/#force-import-empty-string-policy","text":"The Force import empty string policy checkbox forces the parsing of all empty values present in the csv as empty strings, for all those channel's options that are typed to String and \"not required\" by the metatype. So, this box must be checked when the user wants that all empty values from the csv are considered as empty strings ( \"\" ) when parsed to driver-specific channel option, defined by the metatype as String type and not required . So, those values that are null in the csv, will be set as \"\" in the channel options. The user must be cautious, because the framework supposes that it's consciously leaving empty values in the csv. Otherwise, if the box is unchecked, all the csv empty values will be considered as null strings and parsed to the default value set in the metatype of the driver. If, for example, the user downloads the channels list following the steps described in the precious section, it could upload the same csv file into an other asset, or another device, to get the exactly same asset configuration.","title":"Force import empty string policy"},{"location":"connect-field-devices/asset-implemetation/#replace-current-channels","text":"The Replace current channels must be checked when the user wants to replace all the channels currently present in the asset, with the ones that will be created by the csv uploading.","title":"Replace current channels"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/","text":"ASSET-V1 MQTT Namespace The ASSET-V1 namespace allows to perform remote operations on the assets defined in an Kura-powered device. The requests and responses are represented as JSON arrays placed in the body of the MQTT payload. The namespace includes the following topics. GET/assets This topic is used to retrieve metadata describing the assets defined on a specific device and their channel configuration. Request format The request can contain JSON array containing a list of asset names for which the metadata needs to be returned. The request JSON must have the following structure: [ { \"name\" : \"asset1\" }, { \"name\" : \"otherAsset\" } ] The request JSON is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the Asset for which the metadata needs to be returned. If the provided array is empty or the request payload is empty, the metadata describing all assets present on the device will be returned. Response format The response payload contains a JSON array with the following structure: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"first_channel\" , \"type\" : \"INTEGER\" , \"mode\" : \"READ\" }, { \"name\" : \"second_channel\" , \"type\" : \"BOOLEAN\" , \"mode\" : \"READ_WRITE\" }, { \"name\" : \"other_channel\" , \"type\" : \"STRING\" , \"mode\" : \"WRITE\" } ] }, { \"name\" : \"otherAsset\" , \"channels\" : [] }, { \"name\" : \"nonExistingAsset\" , \"error\" : \"Asset not found\" } ] All elements of the array are of the type object . The array object has the following properties: name (string, required): the name of the asset error (string): this property is present only if the metadata for a not existing asset was explicitly requested, it contains an error message. channels (array): the list of channels defined on the asset, it can be empty if no channels are defined. This property and the error property are mutually exclusive. This object is an array with all elements of the type object and they have the following properties: name (string, required): the name of the channel. mode (string, required): the mode of the channel. The possible values are READ , WRITE or READ_WRITE . type (string, required): the value type of the channel. The possible values are BOOLEAN , BYTE_ARRAY , DOUBLE , INTEGER , LONG , FLOAT , STRING . EXEC/read This topic is used to perform a read operation on a specified set of assets and channels. Request format The request can contain a JSON array with the following structure: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"channel1\" }, { \"name\" : \"channel2\" }, { \"name\" : \"otherChannel\" } ] }, { \"name\" : \"otherAsset\" } ] The request JSON is an array with all elements of the type object . If the list is empty or if the request payload is empty all channels of all assets will be read. The array object has the following properties: name (string, required): the name of the asset involved in the read operation channels (array): the list of the names of the channels to be read, if this property is not present or if its value is an empty array, all channels for the specified asset will be read. The object is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the channel to be read Response Format The response is returned as a JSON array placed in the body of the response: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"first_channel\" , \"type\" : \"INTEGER\" , \"value\" : \"432\" , \"timestamp\" : 1234550 }, { \"name\" : \"second_channel\" , \"type\" : \"BOOLEAN\" , \"value\" : \"true\" , \"timestamp\" : 1234550 }, { \"name\" : \"other_channel\" , \"error\" : \"Read failed\" , \"timestamp\" : 1234550 }, { \"name\" : \"binary_channel\" , \"type\" : \"BYTE_ARRAY\" , \"value\" : \"dGVzdCBzdHJpbmcK\" , \"timestamp\" : 1234550 } ] }, { \"name\" : \"nonExistingAsset\" , \"error\" : \"Asset not found\" } ] The response JSON is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the asset. error (string): an error message. This property is present only if a read operation for a not existing asset was explicitly requested. channels (array): the object is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the channel. timestamp (integer, required): the device timestamp associated with the result in milliseconds since the Unix Epoch. type (string): the type of the result. This property is present only if the operation succeeded. The possible values are BOOLEAN , BYTE_ARRAY , DOUBLE , INTEGER , LONG , FLOAT , STRING . value (string): the result value of the read request encoded as a String. This property is present only if the operation succeeded. If the channel type is BYTE_ARRAY , the result will be represented using the base64 encoding. error (string): an error message. This property is present only if the operation failed. EXEC/write Performs a write operation on a specified set of channels and assets. Request format The request must contain a JSON array with the following structure: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"first_channel\" , \"type\" : \"INTEGER\" , \"value\" : \"432\" , }, { \"name\" : \"second_channel\" , \"type\" : \"BOOLEAN\" , \"value\" : \"true\" , }, { \"name\" : \"binary_channel\" , \"type\" : \"BYTE_ARRAY\" , \"value\" : \"dGVzdCBzdHJpbmcK\" , } ] } ] The array object has the following properties: name (string, required): the name of the asset. channels (array, required): the list of channel names and values to be written. The object is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the channel. type (string, required): the type of the value to be written. The allowed values are BOOLEAN , BYTE_ARRAY , DOUBLE , INTEGER , LONG , FLOAT , STRING . value (string, required): the value to be written encoded as a String. If the channel type is BYTE_ARRAY , the base64 encoding must be used. Response format The response uses the same format as the EXEC/read request, in case of success the type and value properties in the response will report the same values specified in the request.","title":"ASSET-V1 MQTT Namespace"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#asset-v1-mqtt-namespace","text":"The ASSET-V1 namespace allows to perform remote operations on the assets defined in an Kura-powered device. The requests and responses are represented as JSON arrays placed in the body of the MQTT payload. The namespace includes the following topics.","title":"ASSET-V1 MQTT Namespace"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#getassets","text":"This topic is used to retrieve metadata describing the assets defined on a specific device and their channel configuration.","title":"GET/assets"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#request-format","text":"The request can contain JSON array containing a list of asset names for which the metadata needs to be returned. The request JSON must have the following structure: [ { \"name\" : \"asset1\" }, { \"name\" : \"otherAsset\" } ] The request JSON is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the Asset for which the metadata needs to be returned. If the provided array is empty or the request payload is empty, the metadata describing all assets present on the device will be returned.","title":"Request format"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#response-format","text":"The response payload contains a JSON array with the following structure: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"first_channel\" , \"type\" : \"INTEGER\" , \"mode\" : \"READ\" }, { \"name\" : \"second_channel\" , \"type\" : \"BOOLEAN\" , \"mode\" : \"READ_WRITE\" }, { \"name\" : \"other_channel\" , \"type\" : \"STRING\" , \"mode\" : \"WRITE\" } ] }, { \"name\" : \"otherAsset\" , \"channels\" : [] }, { \"name\" : \"nonExistingAsset\" , \"error\" : \"Asset not found\" } ] All elements of the array are of the type object . The array object has the following properties: name (string, required): the name of the asset error (string): this property is present only if the metadata for a not existing asset was explicitly requested, it contains an error message. channels (array): the list of channels defined on the asset, it can be empty if no channels are defined. This property and the error property are mutually exclusive. This object is an array with all elements of the type object and they have the following properties: name (string, required): the name of the channel. mode (string, required): the mode of the channel. The possible values are READ , WRITE or READ_WRITE . type (string, required): the value type of the channel. The possible values are BOOLEAN , BYTE_ARRAY , DOUBLE , INTEGER , LONG , FLOAT , STRING .","title":"Response format"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#execread","text":"This topic is used to perform a read operation on a specified set of assets and channels.","title":"EXEC/read"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#request-format_1","text":"The request can contain a JSON array with the following structure: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"channel1\" }, { \"name\" : \"channel2\" }, { \"name\" : \"otherChannel\" } ] }, { \"name\" : \"otherAsset\" } ] The request JSON is an array with all elements of the type object . If the list is empty or if the request payload is empty all channels of all assets will be read. The array object has the following properties: name (string, required): the name of the asset involved in the read operation channels (array): the list of the names of the channels to be read, if this property is not present or if its value is an empty array, all channels for the specified asset will be read. The object is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the channel to be read","title":"Request format"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#response-format_1","text":"The response is returned as a JSON array placed in the body of the response: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"first_channel\" , \"type\" : \"INTEGER\" , \"value\" : \"432\" , \"timestamp\" : 1234550 }, { \"name\" : \"second_channel\" , \"type\" : \"BOOLEAN\" , \"value\" : \"true\" , \"timestamp\" : 1234550 }, { \"name\" : \"other_channel\" , \"error\" : \"Read failed\" , \"timestamp\" : 1234550 }, { \"name\" : \"binary_channel\" , \"type\" : \"BYTE_ARRAY\" , \"value\" : \"dGVzdCBzdHJpbmcK\" , \"timestamp\" : 1234550 } ] }, { \"name\" : \"nonExistingAsset\" , \"error\" : \"Asset not found\" } ] The response JSON is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the asset. error (string): an error message. This property is present only if a read operation for a not existing asset was explicitly requested. channels (array): the object is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the channel. timestamp (integer, required): the device timestamp associated with the result in milliseconds since the Unix Epoch. type (string): the type of the result. This property is present only if the operation succeeded. The possible values are BOOLEAN , BYTE_ARRAY , DOUBLE , INTEGER , LONG , FLOAT , STRING . value (string): the result value of the read request encoded as a String. This property is present only if the operation succeeded. If the channel type is BYTE_ARRAY , the result will be represented using the base64 encoding. error (string): an error message. This property is present only if the operation failed.","title":"Response Format"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#execwrite","text":"Performs a write operation on a specified set of channels and assets.","title":"EXEC/write"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#request-format_2","text":"The request must contain a JSON array with the following structure: [ { \"name\" : \"asset1\" , \"channels\" : [ { \"name\" : \"first_channel\" , \"type\" : \"INTEGER\" , \"value\" : \"432\" , }, { \"name\" : \"second_channel\" , \"type\" : \"BOOLEAN\" , \"value\" : \"true\" , }, { \"name\" : \"binary_channel\" , \"type\" : \"BYTE_ARRAY\" , \"value\" : \"dGVzdCBzdHJpbmcK\" , } ] } ] The array object has the following properties: name (string, required): the name of the asset. channels (array, required): the list of channel names and values to be written. The object is an array with all elements of the type object . The array object has the following properties: name (string, required): the name of the channel. type (string, required): the type of the value to be written. The allowed values are BOOLEAN , BYTE_ARRAY , DOUBLE , INTEGER , LONG , FLOAT , STRING . value (string, required): the value to be written encoded as a String. If the channel type is BYTE_ARRAY , the base64 encoding must be used.","title":"Request format"},{"location":"connect-field-devices/asset-v1-mqtt-namespace/#response-format_2","text":"The response uses the same format as the EXEC/read request, in case of success the type and value properties in the response will report the same values specified in the request.","title":"Response format"},{"location":"connect-field-devices/driver-and-assets/","text":"Drivers, Assets and Channels Eclipse Kura introduces a model based on the concepts of Drivers and Assets to simplify the communication with the field devices attached to a gateway. A Driver encapsulates the communication protocol and its configuration parameters, dealing with the low-level characteristics of the field protocol. It opens, closes and performs the communication with the end field device. It also exposes field protocol specific information that can be used by upper levels of abstraction to simplify the interaction with the end devices. An Asset is a logical representation of a field device, described by a list of Channels . The Asset uses a specific Driver instance to communicate with the underlying device and it models a generic device resource as a Channel . A register in a PLC or a GATT Characteristic in a Bluetooth device are examples of Channels. In this way, each Asset has multiple Channels for reading and writing data from/to an Industrial Device. Channel Example To further describe the concept of Channel and Asset, the following table shows a set of PLC register addresses as provided in a typical PLC documentation. Name Entity Address LED1 COILS 2049 LED2 COILS 2050 LED3 COILS 2051 LED4 RED COILS 2052 LED4 GREEN COILS 2053 LED4 BLUE COILS 2054 Counter 3 INPUT REGISTERS 515 Quad Counter INPUT REGISTERS 520 Toggle 4 DISCRETE INPUTS 2052 Toggle 5 DISCRETE INPUTS 2053 Toggle 6 DISCRETE INPUTS 2054 Reset Counter 3 COILS 3075 Reset Quad Counter COILS 3084 The corresponding Channels definition in the Asset is as follows: As shown in the previous image, the Channel definition in an Asset results easily mappable to what available in a generic PLC documentation. Once defined the Channels in an Asset, a simple Java application that leverages the Asset API can easily communicate with the Field device by simply referring to the specific Channel of interest. Drivers and Assets in Kura Administrative UI Kura provides a specific section of the UI to allow users to manage the different instances of Drivers and Assets. Using the Kura Web UI the user can instantiate and manage Drivers but also can manage Assets instances based on existing drivers. The user interface allows also to perform specific reads on the configured Assets' channels clicking on the Data tab for the selected Asset.","title":"Drivers, Assets and Channels"},{"location":"connect-field-devices/driver-and-assets/#drivers-assets-and-channels","text":"Eclipse Kura introduces a model based on the concepts of Drivers and Assets to simplify the communication with the field devices attached to a gateway. A Driver encapsulates the communication protocol and its configuration parameters, dealing with the low-level characteristics of the field protocol. It opens, closes and performs the communication with the end field device. It also exposes field protocol specific information that can be used by upper levels of abstraction to simplify the interaction with the end devices. An Asset is a logical representation of a field device, described by a list of Channels . The Asset uses a specific Driver instance to communicate with the underlying device and it models a generic device resource as a Channel . A register in a PLC or a GATT Characteristic in a Bluetooth device are examples of Channels. In this way, each Asset has multiple Channels for reading and writing data from/to an Industrial Device.","title":"Drivers, Assets and Channels"},{"location":"connect-field-devices/driver-and-assets/#channel-example","text":"To further describe the concept of Channel and Asset, the following table shows a set of PLC register addresses as provided in a typical PLC documentation. Name Entity Address LED1 COILS 2049 LED2 COILS 2050 LED3 COILS 2051 LED4 RED COILS 2052 LED4 GREEN COILS 2053 LED4 BLUE COILS 2054 Counter 3 INPUT REGISTERS 515 Quad Counter INPUT REGISTERS 520 Toggle 4 DISCRETE INPUTS 2052 Toggle 5 DISCRETE INPUTS 2053 Toggle 6 DISCRETE INPUTS 2054 Reset Counter 3 COILS 3075 Reset Quad Counter COILS 3084 The corresponding Channels definition in the Asset is as follows: As shown in the previous image, the Channel definition in an Asset results easily mappable to what available in a generic PLC documentation. Once defined the Channels in an Asset, a simple Java application that leverages the Asset API can easily communicate with the Field device by simply referring to the specific Channel of interest.","title":"Channel Example"},{"location":"connect-field-devices/driver-and-assets/#drivers-and-assets-in-kura-administrative-ui","text":"Kura provides a specific section of the UI to allow users to manage the different instances of Drivers and Assets. Using the Kura Web UI the user can instantiate and manage Drivers but also can manage Assets instances based on existing drivers. The user interface allows also to perform specific reads on the configured Assets' channels clicking on the Data tab for the selected Asset.","title":"Drivers and Assets in Kura Administrative UI"},{"location":"connect-field-devices/driver-implemetation/","text":"Driver implementation A Driver encapsulates the communication protocol and its configuration parameters. The Driver API abstracts the specificities of the end Fieldbus protocols providing a clean and easy to use set of calls that can be used to develop end-applications. Using the Driver APIs, an application can simply use the connect and disconnect methods to open or close the connection with the Field device. Furthermore, the read and write methods allow exchanging data with the Field device. A Driver instance can be associated with an Asset to abstract even more the low-level specificities and allow an easy and portable development of the Java applications that need to interact with sensors, actuators, and PLCs. The Asset will use the Driver's protocol-specific channel descriptor to compose the Asset Channel description. Driver Configuration Generally, a Driver instance is a configurable component which parameters can be updated in the Drivers and Assets section of the Kura Administrative User Interface. Supported Field Protocols and Availability Drivers will be provided as add-ons available in the Eclipse IoT Marketplace . Please see here for a complete list. Driver-Specific Optimizations The Driver API provides a simple method to read a list of Channel Records : public void read(List<ChannelRecord> records) throws ConnectionException; Typically, since the records to read do not change until the Asset configuration is changed by the user, a Driver can perform some optimisations to efficiently read the requested records at once. For example, a Modbus driver can read a range of holding registers using a single request. Since these operations are costly, the Kura API adds methods to ask the driver to prepare reading a given list of records and execute the prepared read: public PreparedRead prepareRead(List<ChannelRecord> records); Invocation of the preparedRead method will result in a PreparedRead instance returned. On a PreparedRead, the execute method will perform the optimized read request.","title":"Driver implementation"},{"location":"connect-field-devices/driver-implemetation/#driver-implementation","text":"A Driver encapsulates the communication protocol and its configuration parameters. The Driver API abstracts the specificities of the end Fieldbus protocols providing a clean and easy to use set of calls that can be used to develop end-applications. Using the Driver APIs, an application can simply use the connect and disconnect methods to open or close the connection with the Field device. Furthermore, the read and write methods allow exchanging data with the Field device. A Driver instance can be associated with an Asset to abstract even more the low-level specificities and allow an easy and portable development of the Java applications that need to interact with sensors, actuators, and PLCs. The Asset will use the Driver's protocol-specific channel descriptor to compose the Asset Channel description.","title":"Driver implementation"},{"location":"connect-field-devices/driver-implemetation/#driver-configuration","text":"Generally, a Driver instance is a configurable component which parameters can be updated in the Drivers and Assets section of the Kura Administrative User Interface.","title":"Driver Configuration"},{"location":"connect-field-devices/driver-implemetation/#supported-field-protocols-and-availability","text":"Drivers will be provided as add-ons available in the Eclipse IoT Marketplace . Please see here for a complete list.","title":"Supported Field Protocols and Availability"},{"location":"connect-field-devices/driver-implemetation/#driver-specific-optimizations","text":"The Driver API provides a simple method to read a list of Channel Records : public void read(List<ChannelRecord> records) throws ConnectionException; Typically, since the records to read do not change until the Asset configuration is changed by the user, a Driver can perform some optimisations to efficiently read the requested records at once. For example, a Modbus driver can read a range of holding registers using a single request. Since these operations are costly, the Kura API adds methods to ask the driver to prepare reading a given list of records and execute the prepared read: public PreparedRead prepareRead(List<ChannelRecord> records); Invocation of the preparedRead method will result in a PreparedRead instance returned. On a PreparedRead, the execute method will perform the optimized read request.","title":"Driver-Specific Optimizations"},{"location":"connect-field-devices/eddystone-driver/","text":"Eddystone\u2122 Driver Eclipse Kura offers support for Eddystone\u2122 protocol via a specific driver. The driver is available only for gateways that support the new Bluetooth LE APIs. It can be used into the Wires framework, the Asset model or directly using the Driver itself. Features The Eddystone\u2122 driver is designed to listen for incoming beacon packets and to recognise the specific protocol. Of course it's not possible to write data to the beacons, since this is outside the protocol specification. The frame format to be filtered can be chosen from the channel definition. For more information about Eddystone\u2122 frame format, see here . Installation As the others Drivers supported by Eclipse Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here . Instance creation A new Eddystone Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.eddsytone factory must be selected and a unique name must be provided for the new instance. Once instantiated, the Driver has to be configured setting the Bluetooth interface name (i.e. hci0 ) that will be used to connect to the device. Channel configuration The Eddystone Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. eddystone.type : the type of the frame. Currently only UID and URL typed are supported.","title":"Eddystone&trade; Driver"},{"location":"connect-field-devices/eddystone-driver/#eddystone-driver","text":"Eclipse Kura offers support for Eddystone\u2122 protocol via a specific driver. The driver is available only for gateways that support the new Bluetooth LE APIs. It can be used into the Wires framework, the Asset model or directly using the Driver itself.","title":"Eddystone&trade; Driver"},{"location":"connect-field-devices/eddystone-driver/#features","text":"The Eddystone\u2122 driver is designed to listen for incoming beacon packets and to recognise the specific protocol. Of course it's not possible to write data to the beacons, since this is outside the protocol specification. The frame format to be filtered can be chosen from the channel definition. For more information about Eddystone\u2122 frame format, see here .","title":"Features"},{"location":"connect-field-devices/eddystone-driver/#installation","text":"As the others Drivers supported by Eclipse Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here .","title":"Installation"},{"location":"connect-field-devices/eddystone-driver/#instance-creation","text":"A new Eddystone Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.eddsytone factory must be selected and a unique name must be provided for the new instance. Once instantiated, the Driver has to be configured setting the Bluetooth interface name (i.e. hci0 ) that will be used to connect to the device.","title":"Instance creation"},{"location":"connect-field-devices/eddystone-driver/#channel-configuration","text":"The Eddystone Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. eddystone.type : the type of the frame. Currently only UID and URL typed are supported.","title":"Channel configuration"},{"location":"connect-field-devices/field-protocols/","text":"Field Protocols Eclipse Kura provides support for field protocol implementations as add-ons deployable directly from the Eclipse Marketplace for IoT site. Moreover, several devices are supported using the Kura Driver model. Currently, the following field protocols and devices are supported and downloadable from the Eclipse Marketplace in form of Kura Drivers: Protocol/Device Kura 3.x Kura 4.x Kura 5.x OPC-UA link link link S7 link link link iBeacon N.A. link link Eddystone N.A. link link TiSensorTag link link link GPIO link link link SenseHat link link link","title":"Field Protocols"},{"location":"connect-field-devices/field-protocols/#field-protocols","text":"Eclipse Kura provides support for field protocol implementations as add-ons deployable directly from the Eclipse Marketplace for IoT site. Moreover, several devices are supported using the Kura Driver model. Currently, the following field protocols and devices are supported and downloadable from the Eclipse Marketplace in form of Kura Drivers: Protocol/Device Kura 3.x Kura 4.x Kura 5.x OPC-UA link link link S7 link link link iBeacon N.A. link link Eddystone N.A. link link TiSensorTag link link link GPIO link link link SenseHat link link link","title":"Field Protocols"},{"location":"connect-field-devices/gpio-driver/","text":"GPIO Driver The GPIO Driver manages the General Purpose IOs on a gateway using the Driver model. Based on the GPIO Service, the driver can be used in the Wires framework, the Asset model or directly using the Driver itself. Features The GPIO Driver includes the following features: support for digital input and output support for unsolicited inputs the trigger event can be configured directly through the Driver Installation As the other Drivers supported by Eclipse Kura, it is distributed as a deployment package on the Eclipse Marketplace for Kura 3.x and 4.x/5.x . It can be installed following the instructions provided here . Instance creation A new GPIO Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.gpio factory must be selected and a unique name must be provided for the new instance. Once instantiated, the GPIO Driver is ready to use and no configuration is needed. Channel configuration The GPIO Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . Conversely, in write operations the Driver will accept value of this kind. listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. resource.name : the name of the GPIO resource as reported by the GPIO Service. The #select resource selection has no effect on the channel. resource.direction : the direction of the GPIO. Possible values are INPUT and OUTPUT . The #select direction selection has no effect on the channel. resource.trigger : the type of event that triggers the listener, if selected. Possible values are: NONE : no event will trigger the listener. RISING_EDGE , FALLING_EDGE , BOTH_EDGES : the listeners will be triggered respectively by a low-high transition, a high-low transition or both. HIGH_LEVEL , LOW_LEVEL , BOTH_LEVELS : the listeners will be triggered respectively by the detection of a high, low or both levels. Please note that these options aren't supported by all the devices. Drive a LED using the GPIO Driver In this section a simple example on the GPIO Driver using a RaspberryPi will be presented. Before configuring the Driver, arrange a setup as shown in the following picture, using a breadboard, a led, a 120-ohm resistor and some wires. Connect the yellow wire to a ground pin on the RasperryPi connector (i.e. pin 6) and the red one to pin 40 (a.k.a. gpio21). From the Drivers and Assets tab, create a new GPIO Driver, call it GPIODriver and add an Asset as shown in the following picture. The asset is configured to manage a gpio, called LED , as an output and drives it writing a boolean value. The LED channel is attached to the gpio21 on the RaspberryPi. In the Data tab, fill the Value form with true and press Apply : the green led will switch on. Writing a false will switch off the led.","title":"GPIO Driver"},{"location":"connect-field-devices/gpio-driver/#gpio-driver","text":"The GPIO Driver manages the General Purpose IOs on a gateway using the Driver model. Based on the GPIO Service, the driver can be used in the Wires framework, the Asset model or directly using the Driver itself.","title":"GPIO Driver"},{"location":"connect-field-devices/gpio-driver/#features","text":"The GPIO Driver includes the following features: support for digital input and output support for unsolicited inputs the trigger event can be configured directly through the Driver","title":"Features"},{"location":"connect-field-devices/gpio-driver/#installation","text":"As the other Drivers supported by Eclipse Kura, it is distributed as a deployment package on the Eclipse Marketplace for Kura 3.x and 4.x/5.x . It can be installed following the instructions provided here .","title":"Installation"},{"location":"connect-field-devices/gpio-driver/#instance-creation","text":"A new GPIO Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.gpio factory must be selected and a unique name must be provided for the new instance. Once instantiated, the GPIO Driver is ready to use and no configuration is needed.","title":"Instance creation"},{"location":"connect-field-devices/gpio-driver/#channel-configuration","text":"The GPIO Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . Conversely, in write operations the Driver will accept value of this kind. listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. resource.name : the name of the GPIO resource as reported by the GPIO Service. The #select resource selection has no effect on the channel. resource.direction : the direction of the GPIO. Possible values are INPUT and OUTPUT . The #select direction selection has no effect on the channel. resource.trigger : the type of event that triggers the listener, if selected. Possible values are: NONE : no event will trigger the listener. RISING_EDGE , FALLING_EDGE , BOTH_EDGES : the listeners will be triggered respectively by a low-high transition, a high-low transition or both. HIGH_LEVEL , LOW_LEVEL , BOTH_LEVELS : the listeners will be triggered respectively by the detection of a high, low or both levels. Please note that these options aren't supported by all the devices.","title":"Channel configuration"},{"location":"connect-field-devices/gpio-driver/#drive-a-led-using-the-gpio-driver","text":"In this section a simple example on the GPIO Driver using a RaspberryPi will be presented. Before configuring the Driver, arrange a setup as shown in the following picture, using a breadboard, a led, a 120-ohm resistor and some wires. Connect the yellow wire to a ground pin on the RasperryPi connector (i.e. pin 6) and the red one to pin 40 (a.k.a. gpio21). From the Drivers and Assets tab, create a new GPIO Driver, call it GPIODriver and add an Asset as shown in the following picture. The asset is configured to manage a gpio, called LED , as an output and drives it writing a boolean value. The LED channel is attached to the gpio21 on the RaspberryPi. In the Data tab, fill the Value form with true and press Apply : the green led will switch on. Writing a false will switch off the led.","title":"Drive a LED using the GPIO Driver"},{"location":"connect-field-devices/ibeacon-driver/","text":"iBeacon\u2122 Driver Eclipse Kura provides a driver specifically developed to manage iBeacon\u2122 protocol. The driver is available only for gateways that support the new Bluetooth LE APIs. They can be used into the Wires framework, the Asset model or directly using the Driver itself. Features The iBeacon\u2122 driver is designed to listen for incoming beacon packets and to recognise the specific protocol. Of course it's not possible to write data to the beacons, since this is outside the protocol specification. Installation As the others Drivers supported by Eclipse Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here . Instance creation A new iBeacon instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.ibeacon factory must be selected and a unique name must be provided for the new instance. Once instantiated, the Driver has to be configured setting the Bluetooth interface name (i.e. hci0 ) that will be used to connect to the device. Channel configuration The iBeacon Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted.","title":"iBeacon&trade; Driver"},{"location":"connect-field-devices/ibeacon-driver/#ibeacon-driver","text":"Eclipse Kura provides a driver specifically developed to manage iBeacon\u2122 protocol. The driver is available only for gateways that support the new Bluetooth LE APIs. They can be used into the Wires framework, the Asset model or directly using the Driver itself.","title":"iBeacon&trade; Driver"},{"location":"connect-field-devices/ibeacon-driver/#features","text":"The iBeacon\u2122 driver is designed to listen for incoming beacon packets and to recognise the specific protocol. Of course it's not possible to write data to the beacons, since this is outside the protocol specification.","title":"Features"},{"location":"connect-field-devices/ibeacon-driver/#installation","text":"As the others Drivers supported by Eclipse Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here .","title":"Installation"},{"location":"connect-field-devices/ibeacon-driver/#instance-creation","text":"A new iBeacon instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.ibeacon factory must be selected and a unique name must be provided for the new instance. Once instantiated, the Driver has to be configured setting the Bluetooth interface name (i.e. hci0 ) that will be used to connect to the device.","title":"Instance creation"},{"location":"connect-field-devices/ibeacon-driver/#channel-configuration","text":"The iBeacon Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted.","title":"Channel configuration"},{"location":"connect-field-devices/opcua-driver/","text":"OPC UA Driver This Driver implements the client side of the OPC UA protocol using the Driver model. The Driver can be used to interact as a client with OPC UA servers using different abstractions, such as the Wires framework, the Asset model or by directly using the Driver itself. The Driver is distributed as a deployment package on Eclipse Marketplace for Kura 3.x and 4.x/5.x . It can be installed following the instructions provided here . Features The OPC UA Driver features include: Support for the OPC UA protocol over TCP. Support for reading and writing OPC UA variable nodes by node ID. Instance creation A new OPC UA instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.opcua factory must be selected and a unique name must be provided for the new instance. Channel configuration The OPC UA Driver channel configuration is composed of the following parameters: name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value type : the Java type of the channel value. node.id : The node id of the variable node to be used, the format of the node id depends on the value of the node.id.type property. node.namespace.index : The namespace index of the variable node to be used. opcua.type : The OPC-UA built-in type of the attribute to be read/written. If set to DEFINED_BY_JAVA_TYPE (default), the driver will attempt to determine the OPC-UA type basing on the value type parameter value. If the read/write operation fails, it may be necessary to use one of the other values of this configuration parameter to explicitly select the type. This parameter also lists the OPC-UA types currently supported by the driver. Not all value type and opcua.type combinations are valid, the allowed ones are the following: opcua.type Allowed value.type s Recommended value.type BOOLEAN BOOLEAN BOOLEAN SBYTE INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER INT16 INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER INT32 INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER INT64 INTEGER, LONG, FLOAT, DOUBLE, STRING LONG BYTE INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER UINT16 INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER UINT32 INTEGER, LONG, FLOAT, DOUBLE, STRING LONG UINT64 INTEGER, LONG, FLOAT, DOUBLE, STRING STRING FLOAT FLOAT, STRING FLOAT DOUBLE DOUBLE, STRING DOUBLE STRING STRING STRING BYTE_STRING BYTE_ARRAY BYTE_ARRAY BYTE_ARRAY BYTE_ARRAY BYTE_ARRAY SBYTE_ARRAY BYTE_ARRAY BYTE_ARRAY Using a non allowed value.type will result in read/write operation failures. It should be noted that there is not a one to one match between the opcua.type and Java value.type . It is recommended to compare the allowed ranges for numeric types specified in OPC-UA Reference and Java reference for selecting the best match. node.id.type : The type of the node id (see the Node Id types section) attribute : The attribute of the referenced variable node. If the listen flag is enabled for an OPC-UA channel, the driver will request the server to send notifications if it detects changes in the referenced attribute value. In order to enable this, the driver will create a global subscription (one per Driver instance), and a monitored item for each channel. See [ 1 ] for more details. The Subscription publish interval global configuration parameter can be used to tune the subscription publishing interval . listen.sampling.interval : The sampling interval for the monitored item . See the Sampling interval section of [ 1 ] for more details. listen.queue.size : The queue size for the monitored item . See the Queue parameters section of [ 1 ] for more details. listen.discard.oldest : The value of the discardOldest flag for the monitored item . See the Queue parameters section of [ 1 ] for more details. The listen.subscribe.to.children parameter can be used to enable the Subtree Subscription feature. [1] MonitoredItem model Node ID types The Driver supports the following node id types: Node ID Type Format of node.id NUMERIC node.id must be parseable into an integer STRING node.id can be any string OPAQUE Opaque node ids are represented by raw byte arrays. In this case node.id must be the base64 encoding of the node id. GUID node.id must be a string conforming to the format described in the documentation of the java.util.UUID.toString() method. Certificate setup In order to use settings for Security Policy different than None , the OPCUA driver must be configured to trust the server certificate and a new client certificate - private key pair must be generated for the driver. These items can be placed in a Java keystore that can be referenced from driver configuration. The keystore does not exist by default and without it connections that use Security Policy different than None will fail. The following steps can be used to generate the keystore: Download the certificate used by the server, usually this can be done from server management UI. Copy the downloaded certificate to the gateway using SSH. Copy the following example script to the device using SSH, it can be used to import the server certificate and generate the client key pair. It can be modified if needed: #!/bin/bash # the alias for the imported server certificate SERVER_ALIAS = \"server-cert\" # the file name of the generated keystore KEYSTORE_FILE_NAME = \"opcua-keystore.ks\" # the password of the generated keystore and private keys, it is recommended to change it KEYSTORE_PASSWORD = \"changeit\" # server certificate to be imported is expected as first argument SERVER_CERTIFICATE_FILE = \" $1 \" # import existing certificate keytool -import \\ -alias \" ${ SERVER_ALIAS } \" \\ -file \" ${ SERVER_CERTIFICATE_FILE } \" \\ -keystore \" ${ KEYSTORE_FILE_NAME } \" \\ -noprompt \\ -storepass \" ${ KEYSTORE_PASSWORD } \" # alias for client certificate CLIENT_ALIAS = \"client-cert\" # client certificate distinguished name, it is recommended to change it CLIENT_DN = \"CN=MyCn, OU=MyOu, O=MyOrganization, L=Amaro, S=UD, C=IT\" # the application id, must match the corresponding parameter in driver configuration APPLICATION_ID = \"urn:kura:opcua:client\" # generate the client private key and certificate keytool -genkey \\ -alias \" ${ CLIENT_ALIAS } \" \\ -keyalg RSA \\ -keysize 4096 \\ -keystore \" ${ KEYSTORE_FILE_NAME } \" \\ -dname \" ${ CLIENT_DN } \" \\ -ext ku = digitalSignature,nonRepudiation,keyEncipherment,dataEncipherment \\ -ext eku = clientAuth \\ -ext \"san=uri: ${ APPLICATION_ID } \" \\ -validity 1000 \\ -noprompt \\ -storepass ${ KEYSTORE_PASSWORD } \\ -keypass ${ KEYSTORE_PASSWORD } Update the following parameters in driver configuration: Keystore Path : Set the absolute path of the opcua-keystore.ks file created at step 3. **Security Policy ** -> Set the desired option Client Certificate Alias -> Set the value of the CLIENT_ALIAS script variable (the default is client-cert ) Enable Server Authentication -> true Keystore type -> JKS Keystore Password -> Set the value of the KEYSTORE_PASSWORD script variable (the default value is changeit ) Application URI -> Set the value of the APPLICATION_ID script variable (default value should be already ok). Configurare the server to trust the client certificate generated at step 3. The steps required to do this vary depending on the server. Usually the following steps are needed: Make a connection attempt using OPC-UA driver, this will likely fail because the server does not trust client certificate. After the failed connection attempt, the server should display the certificate used by the driver in the administration UI. The server UI should allow to set it as trusted. Make another connection attempt once the certificate has been set to trusted, this connection attempt should succeed. Substree Subscription The driver can be configured to recursively visit the children of a folder node and create a Monitored Item for the value of each discovered variable node with a single channel in Asset configuration. Warning: This feature should be used with care since it can cause high load on both the gateway and the server if the referenced folder contains a large number of nodes and/or the notification rate is high. Channel configuration In order to configure the driver to perform the discovery operation, a single channel can be defined with the following configuration: type : READ value.type : STRING (see below) listen : true node.id : the node id of the root of the subtree to visit node.namespace.index : the namespace index of the root of the subtree to visit node.id.type the node id type of the root of the subtree to visit listen.subscribe.to.children ( NEW ): true The rest of the configuration parameters can be specified in the same way as for the single node subscription use case. The listen.sampling.interval , listen.queue.size and listen.discard.oldest parameters of the root will be used for all subscriptions on the subtree. Discovery procedure The driver will consider as folders to visit all nodes that whose type definition is FolderType , or more precisely all nodes with the following reference: HasTypeDefinition : * namespace index: 0 * node id: 61 (numeric) * URN: http://opcfoundation.org/UA/ The driver will subscribe to all the variable nodes found. Event reporting If the Driver is used by a Wire Asset, it will emit on the wire a single message per received event. All emitted events will contain a single property. Depending on the value of the Subtree subscription events channel name format global configuration parameter, the name of this property is the node id or the browsed path of the source OPCUA node relative to the root folder defined in the channel configuration. Type conversion The current version of the driver tries to convert the values received for all the events on a subtree to the type defined in the value.type configuration parameter. Since the value types of the discovered nodes are heterogeneous, the conversion might fail if the types are not compatible (e.g. if value.type is set to INTEGER and the received value is a string). Setting value.type to STRING should allow to perform safe conversions for most data types.","title":"OPC UA Driver"},{"location":"connect-field-devices/opcua-driver/#opc-ua-driver","text":"This Driver implements the client side of the OPC UA protocol using the Driver model. The Driver can be used to interact as a client with OPC UA servers using different abstractions, such as the Wires framework, the Asset model or by directly using the Driver itself. The Driver is distributed as a deployment package on Eclipse Marketplace for Kura 3.x and 4.x/5.x . It can be installed following the instructions provided here .","title":"OPC UA Driver"},{"location":"connect-field-devices/opcua-driver/#features","text":"The OPC UA Driver features include: Support for the OPC UA protocol over TCP. Support for reading and writing OPC UA variable nodes by node ID.","title":"Features"},{"location":"connect-field-devices/opcua-driver/#instance-creation","text":"A new OPC UA instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.opcua factory must be selected and a unique name must be provided for the new instance.","title":"Instance creation"},{"location":"connect-field-devices/opcua-driver/#channel-configuration","text":"The OPC UA Driver channel configuration is composed of the following parameters: name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value type : the Java type of the channel value. node.id : The node id of the variable node to be used, the format of the node id depends on the value of the node.id.type property. node.namespace.index : The namespace index of the variable node to be used. opcua.type : The OPC-UA built-in type of the attribute to be read/written. If set to DEFINED_BY_JAVA_TYPE (default), the driver will attempt to determine the OPC-UA type basing on the value type parameter value. If the read/write operation fails, it may be necessary to use one of the other values of this configuration parameter to explicitly select the type. This parameter also lists the OPC-UA types currently supported by the driver. Not all value type and opcua.type combinations are valid, the allowed ones are the following: opcua.type Allowed value.type s Recommended value.type BOOLEAN BOOLEAN BOOLEAN SBYTE INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER INT16 INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER INT32 INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER INT64 INTEGER, LONG, FLOAT, DOUBLE, STRING LONG BYTE INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER UINT16 INTEGER, LONG, FLOAT, DOUBLE, STRING INTEGER UINT32 INTEGER, LONG, FLOAT, DOUBLE, STRING LONG UINT64 INTEGER, LONG, FLOAT, DOUBLE, STRING STRING FLOAT FLOAT, STRING FLOAT DOUBLE DOUBLE, STRING DOUBLE STRING STRING STRING BYTE_STRING BYTE_ARRAY BYTE_ARRAY BYTE_ARRAY BYTE_ARRAY BYTE_ARRAY SBYTE_ARRAY BYTE_ARRAY BYTE_ARRAY Using a non allowed value.type will result in read/write operation failures. It should be noted that there is not a one to one match between the opcua.type and Java value.type . It is recommended to compare the allowed ranges for numeric types specified in OPC-UA Reference and Java reference for selecting the best match. node.id.type : The type of the node id (see the Node Id types section) attribute : The attribute of the referenced variable node. If the listen flag is enabled for an OPC-UA channel, the driver will request the server to send notifications if it detects changes in the referenced attribute value. In order to enable this, the driver will create a global subscription (one per Driver instance), and a monitored item for each channel. See [ 1 ] for more details. The Subscription publish interval global configuration parameter can be used to tune the subscription publishing interval . listen.sampling.interval : The sampling interval for the monitored item . See the Sampling interval section of [ 1 ] for more details. listen.queue.size : The queue size for the monitored item . See the Queue parameters section of [ 1 ] for more details. listen.discard.oldest : The value of the discardOldest flag for the monitored item . See the Queue parameters section of [ 1 ] for more details. The listen.subscribe.to.children parameter can be used to enable the Subtree Subscription feature. [1] MonitoredItem model","title":"Channel configuration"},{"location":"connect-field-devices/opcua-driver/#node-id-types","text":"The Driver supports the following node id types: Node ID Type Format of node.id NUMERIC node.id must be parseable into an integer STRING node.id can be any string OPAQUE Opaque node ids are represented by raw byte arrays. In this case node.id must be the base64 encoding of the node id. GUID node.id must be a string conforming to the format described in the documentation of the java.util.UUID.toString() method.","title":"Node ID types"},{"location":"connect-field-devices/opcua-driver/#certificate-setup","text":"In order to use settings for Security Policy different than None , the OPCUA driver must be configured to trust the server certificate and a new client certificate - private key pair must be generated for the driver. These items can be placed in a Java keystore that can be referenced from driver configuration. The keystore does not exist by default and without it connections that use Security Policy different than None will fail. The following steps can be used to generate the keystore: Download the certificate used by the server, usually this can be done from server management UI. Copy the downloaded certificate to the gateway using SSH. Copy the following example script to the device using SSH, it can be used to import the server certificate and generate the client key pair. It can be modified if needed: #!/bin/bash # the alias for the imported server certificate SERVER_ALIAS = \"server-cert\" # the file name of the generated keystore KEYSTORE_FILE_NAME = \"opcua-keystore.ks\" # the password of the generated keystore and private keys, it is recommended to change it KEYSTORE_PASSWORD = \"changeit\" # server certificate to be imported is expected as first argument SERVER_CERTIFICATE_FILE = \" $1 \" # import existing certificate keytool -import \\ -alias \" ${ SERVER_ALIAS } \" \\ -file \" ${ SERVER_CERTIFICATE_FILE } \" \\ -keystore \" ${ KEYSTORE_FILE_NAME } \" \\ -noprompt \\ -storepass \" ${ KEYSTORE_PASSWORD } \" # alias for client certificate CLIENT_ALIAS = \"client-cert\" # client certificate distinguished name, it is recommended to change it CLIENT_DN = \"CN=MyCn, OU=MyOu, O=MyOrganization, L=Amaro, S=UD, C=IT\" # the application id, must match the corresponding parameter in driver configuration APPLICATION_ID = \"urn:kura:opcua:client\" # generate the client private key and certificate keytool -genkey \\ -alias \" ${ CLIENT_ALIAS } \" \\ -keyalg RSA \\ -keysize 4096 \\ -keystore \" ${ KEYSTORE_FILE_NAME } \" \\ -dname \" ${ CLIENT_DN } \" \\ -ext ku = digitalSignature,nonRepudiation,keyEncipherment,dataEncipherment \\ -ext eku = clientAuth \\ -ext \"san=uri: ${ APPLICATION_ID } \" \\ -validity 1000 \\ -noprompt \\ -storepass ${ KEYSTORE_PASSWORD } \\ -keypass ${ KEYSTORE_PASSWORD } Update the following parameters in driver configuration: Keystore Path : Set the absolute path of the opcua-keystore.ks file created at step 3. **Security Policy ** -> Set the desired option Client Certificate Alias -> Set the value of the CLIENT_ALIAS script variable (the default is client-cert ) Enable Server Authentication -> true Keystore type -> JKS Keystore Password -> Set the value of the KEYSTORE_PASSWORD script variable (the default value is changeit ) Application URI -> Set the value of the APPLICATION_ID script variable (default value should be already ok). Configurare the server to trust the client certificate generated at step 3. The steps required to do this vary depending on the server. Usually the following steps are needed: Make a connection attempt using OPC-UA driver, this will likely fail because the server does not trust client certificate. After the failed connection attempt, the server should display the certificate used by the driver in the administration UI. The server UI should allow to set it as trusted. Make another connection attempt once the certificate has been set to trusted, this connection attempt should succeed.","title":"Certificate setup"},{"location":"connect-field-devices/opcua-driver/#substree-subscription","text":"The driver can be configured to recursively visit the children of a folder node and create a Monitored Item for the value of each discovered variable node with a single channel in Asset configuration. Warning: This feature should be used with care since it can cause high load on both the gateway and the server if the referenced folder contains a large number of nodes and/or the notification rate is high.","title":"Substree Subscription"},{"location":"connect-field-devices/opcua-driver/#channel-configuration_1","text":"In order to configure the driver to perform the discovery operation, a single channel can be defined with the following configuration: type : READ value.type : STRING (see below) listen : true node.id : the node id of the root of the subtree to visit node.namespace.index : the namespace index of the root of the subtree to visit node.id.type the node id type of the root of the subtree to visit listen.subscribe.to.children ( NEW ): true The rest of the configuration parameters can be specified in the same way as for the single node subscription use case. The listen.sampling.interval , listen.queue.size and listen.discard.oldest parameters of the root will be used for all subscriptions on the subtree.","title":"Channel configuration"},{"location":"connect-field-devices/opcua-driver/#discovery-procedure","text":"The driver will consider as folders to visit all nodes that whose type definition is FolderType , or more precisely all nodes with the following reference: HasTypeDefinition : * namespace index: 0 * node id: 61 (numeric) * URN: http://opcfoundation.org/UA/ The driver will subscribe to all the variable nodes found.","title":"Discovery procedure"},{"location":"connect-field-devices/opcua-driver/#event-reporting","text":"If the Driver is used by a Wire Asset, it will emit on the wire a single message per received event. All emitted events will contain a single property. Depending on the value of the Subtree subscription events channel name format global configuration parameter, the name of this property is the node id or the browsed path of the source OPCUA node relative to the root folder defined in the channel configuration.","title":"Event reporting"},{"location":"connect-field-devices/opcua-driver/#type-conversion","text":"The current version of the driver tries to convert the values received for all the events on a subtree to the type defined in the value.type configuration parameter. Since the value types of the discovered nodes are heterogeneous, the conversion might fail if the types are not compatible (e.g. if value.type is set to INTEGER and the received value is a string). Setting value.type to STRING should allow to perform safe conversions for most data types.","title":"Type conversion"},{"location":"connect-field-devices/s7-driver/","text":"S7comm Driver This Driver implements the s7comm protocol and can be used to interact with Siemens S7 PLCs using different abstractions, such as the Wires framework, the Asset model or by directly using the Driver itself. The Driver is distributed as a deployment package on the Eclipse Marketplace for Kura 3.x and 4.x/5.x . It can be installed following the instructions provided here . Features The S7comm Plc Driver features include: Support for the s7comm protocol over TCP. Support for reading and writing data from the Data Blocks (DB) memory areas. The driver is capable of automatically aggregating reads/writes for contiguous data in larger bulk requests in order to reduce IO times. Instance creation A new S7comm driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.s7plc factory must be selected and a unique name must be provided for the new instance. Channel configuration The S7 Driver channel configuration is composed of the following parameters: name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value type : the Java type of the channel value. s7.data.type : the S7 data type involved in channel operation. data.block.no : the data block number involved in channel operation. offset : the start address of the data. byte.count : the size in bytes of the transferred data. This parameter is required only if the value type parameter is set to STRING or BYTE_ARRAY . In the other cases, this parameter is ignored and the data size is automatically derived from the s7.data.type . bit.index : the index of the bit involved in channel operation inside its containing byte, index 0 is the least significant bit. This parameter is required only if the value type parameter is set to BOOLEAN and s7.data.type is set to BOOL . In the other cases, this parameter is ignored. Data Types When performing operations that deal with numeric data, two data types are involved: The Java primitive type that is used in the ChannelRecords exchanged between the driver and Java applications. (the Java type of the value received/supplied by external applications from/to the Driver in case of a read/write operation). This value type is specified by the value type configuration property. The S7 type of the data on the PLC. This value type is specified by the s7.data.type configuration property. The following S7 data types are supported: S7 Data Type Size Sign INT 16 bits signed DINT 32 bits signed WORD 16 bits unsigned DWORD 32 bits unsigned REAL 32 bits signed BOOL 1 bit n.d. BYTE 1 byte unsigned CHAR 1 byte (only supported as char arrays using the String Java data type) n.d. The Driver automatically adapts the data type used by external applications and the S7 device depending on the value of the two configuration properties mentioned above. The adaptation process involves the following steps: Each device data type is internally converted by the driver from/to a Java type large enough to represent the value of the device data without losing precision. The type mappings are the following: S7 Data Type Java Type INT int DINT int WORD int DWORD long REAL float BOOL boolean BYTE int If the value type of the channel does not match the Java type specified in mapping above, a conversion is performed by the Driver to convert it to/from the matching type, choosing appropriately between the Number.toInt() , Number.toLong() , Number.toFloat() or Number.toDouble() methods. Precision losses may occur if the Java type used by the external application is not suitable to represent all possible values of the device data type. Array Data The driver supports transferring data as raw byte arrays or ASCII strings: Byte arrays : For transferring data as byte arrays the channel value type property must be set to BYTE_ARRAY , the data.type configuration property must be set to BYTE and the byte.count property must be set to the data length in bytes. Strings : For transferring data as ASCII strings the channel value type property must be set to STRING , the data.type configuration property must be set to CHAR and the array.data.length property must be set to the data length in bytes. Writing Single Bits The Driver supports setting the value of single bits without overwriting the other bits of the same byte. This operation can be performed defining a channel having BOOLEAN as value type , BOOL as s7.data.type and the proper index set to the bit.index property. The Driver will fetch the byte containing the bit to be written, update its contents and then write back the obtained value. If multiple bits on the same byte need to be modified, the driver will perform only one read and write for that byte. If bits that need to be changed are located in contiguous bytes, the driver will perform only one bulk read and one bulk write transferring all the required data in a single request.","title":"S7comm Driver"},{"location":"connect-field-devices/s7-driver/#s7comm-driver","text":"This Driver implements the s7comm protocol and can be used to interact with Siemens S7 PLCs using different abstractions, such as the Wires framework, the Asset model or by directly using the Driver itself. The Driver is distributed as a deployment package on the Eclipse Marketplace for Kura 3.x and 4.x/5.x . It can be installed following the instructions provided here .","title":"S7comm Driver"},{"location":"connect-field-devices/s7-driver/#features","text":"The S7comm Plc Driver features include: Support for the s7comm protocol over TCP. Support for reading and writing data from the Data Blocks (DB) memory areas. The driver is capable of automatically aggregating reads/writes for contiguous data in larger bulk requests in order to reduce IO times.","title":"Features"},{"location":"connect-field-devices/s7-driver/#instance-creation","text":"A new S7comm driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.s7plc factory must be selected and a unique name must be provided for the new instance.","title":"Instance creation"},{"location":"connect-field-devices/s7-driver/#channel-configuration","text":"The S7 Driver channel configuration is composed of the following parameters: name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value type : the Java type of the channel value. s7.data.type : the S7 data type involved in channel operation. data.block.no : the data block number involved in channel operation. offset : the start address of the data. byte.count : the size in bytes of the transferred data. This parameter is required only if the value type parameter is set to STRING or BYTE_ARRAY . In the other cases, this parameter is ignored and the data size is automatically derived from the s7.data.type . bit.index : the index of the bit involved in channel operation inside its containing byte, index 0 is the least significant bit. This parameter is required only if the value type parameter is set to BOOLEAN and s7.data.type is set to BOOL . In the other cases, this parameter is ignored.","title":"Channel configuration"},{"location":"connect-field-devices/s7-driver/#data-types","text":"When performing operations that deal with numeric data, two data types are involved: The Java primitive type that is used in the ChannelRecords exchanged between the driver and Java applications. (the Java type of the value received/supplied by external applications from/to the Driver in case of a read/write operation). This value type is specified by the value type configuration property. The S7 type of the data on the PLC. This value type is specified by the s7.data.type configuration property. The following S7 data types are supported: S7 Data Type Size Sign INT 16 bits signed DINT 32 bits signed WORD 16 bits unsigned DWORD 32 bits unsigned REAL 32 bits signed BOOL 1 bit n.d. BYTE 1 byte unsigned CHAR 1 byte (only supported as char arrays using the String Java data type) n.d. The Driver automatically adapts the data type used by external applications and the S7 device depending on the value of the two configuration properties mentioned above. The adaptation process involves the following steps: Each device data type is internally converted by the driver from/to a Java type large enough to represent the value of the device data without losing precision. The type mappings are the following: S7 Data Type Java Type INT int DINT int WORD int DWORD long REAL float BOOL boolean BYTE int If the value type of the channel does not match the Java type specified in mapping above, a conversion is performed by the Driver to convert it to/from the matching type, choosing appropriately between the Number.toInt() , Number.toLong() , Number.toFloat() or Number.toDouble() methods. Precision losses may occur if the Java type used by the external application is not suitable to represent all possible values of the device data type.","title":"Data Types"},{"location":"connect-field-devices/s7-driver/#array-data","text":"The driver supports transferring data as raw byte arrays or ASCII strings: Byte arrays : For transferring data as byte arrays the channel value type property must be set to BYTE_ARRAY , the data.type configuration property must be set to BYTE and the byte.count property must be set to the data length in bytes. Strings : For transferring data as ASCII strings the channel value type property must be set to STRING , the data.type configuration property must be set to CHAR and the array.data.length property must be set to the data length in bytes.","title":"Array Data"},{"location":"connect-field-devices/s7-driver/#writing-single-bits","text":"The Driver supports setting the value of single bits without overwriting the other bits of the same byte. This operation can be performed defining a channel having BOOLEAN as value type , BOOL as s7.data.type and the proper index set to the bit.index property. The Driver will fetch the byte containing the bit to be written, update its contents and then write back the obtained value. If multiple bits on the same byte need to be modified, the driver will perform only one read and write for that byte. If bits that need to be changed are located in contiguous bytes, the driver will perform only one bulk read and one bulk write transferring all the required data in a single request.","title":"Writing Single Bits"},{"location":"connect-field-devices/sensehat-driver/","text":"RaspberryPi SenseHat driver The SenseHat driver allows to interact to a RaspberryPi SenseHat device using Kura Driver, Asset and Wires frameworks. The driver allows access to the following resources: Sensors Joystick LED Matrix The driver-specific channel configuration contains a single parameter, resource , which allows to select the specific device resource that the channel is addressing (a sensor, a joystick event, etc). Note about running on OpenJDK If some exceptions reporting Locked by other application are visible in the log and the driver fails to start, try switching to the Oracle JVM by installing the oracle-java8-jdk package. For more information on the problem, please see this GitHub issue. Installation As the others Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here . In order to use the driver, the Sensehat Support Library Bundle for Eclipse Kura needs to be installed as a prerequisite dependency. It is available from Eclipse Marketplace here . Sensors The following values of the resource parameters refer to device sensors: Resource Unit Description ACCELERATION_X , ACCELERATION_Y , ACCELERATION_Z G The proper acceleration for each axis GYROSCOPE_X , GYROSCOPE_Y , GYROSCOPE_Z rad/S The angular acceleration for each axis MAGNETOMETER_X , MAGNETOMETER_Y , MAGNETOMETERE_Z uT The magnetometer value for each axis HUMIDITY %rH The relative humidity PRESSURE mbar The pressure value TEMPERATURE_FROM_HUMIDITY \u00b0C The temperature obtained from the humidity sensor TEMPERATURE_FROM_PRESSURE \u00b0C The temperature obtained from the pressure sensor The channels referencing sensor resources can only be used for reads and only in polling mode. The driver will attempt to convert the value obtained from the sensor into the data type selected using the value.type parameter Example sensors Asset configuration: Joystick The SenseHat joystick provides four buttons: UP DOWN LEFT RIGHT ENTER For each button, the driver allows to listen to the following events: PRESS : Fired once when a button is pressed RELEASE : Fired once when a button is released HOLD : Fired periodically every few seconds if the button is kept pressed The values of the resource parameter related to joystick have the following structure: JOYSTICK_{BUTTON}_{EVENT} Channels referencing joystick events must use LONG as value.type . The channel value supplied by the driver is the Java timestamp in milliseconds of the Joystick event, a value of 0 signifies that no events have been observed yet. Joystick related channels can be only used for reading and both in polling and event-driven mode. Example joystick Asset configuration: LED Matrix The driver allows accessing the SenseHat LED matrix in two ways: Using a monochrome framebuffer Using a RGB565 framebuffer Coordinates The coordinate system used by the driver defines the x coordinate as increasing along the direction identified by the joystick RIGHT button and the y coordinate increasing along the direction identified by the DOWN joystick button. Monochrome framebuffer In monochrome mode, only two colors will be used: the front color and the back color. Front and back colors Front and back colors can be configured using channels having the following values for the resource parameter: LED_MATRIX_FRONT_COLOR_R LED_MATRIX_FRONT_COLOR_G LED_MATRIX_FRONT_COLOR_B LED_MATRIX_BACK_COLOR_R LED_MATRIX_BACK_COLOR_G LED_MATRIX_BACK_COLOR_B These channel types allow to set the rgb components of the front and back color and can only be used in write mode. The supplied value must be a floating point number between 0 (led turned off) and 1 (full brightness). Note: Front and back colors are internally represented using the RGB565 format. The available colors are only the ones that can be represented using RGB565 and are supported by the device. Front and back color are retained for successive draw operations, the initial value for both colors is black (led turned off). Drawing The following resources can be used for modifying framebuffer contents: LED_MATRIX_FB_MONOCHROME : A channel of this type allows to set the framebuffer contents in monochrome mode. It can only be used in write mode and its value.type must be BYTE_ARRAY . The supplied value must be a byte array of length 64 that represent the state of the 8x8 led matrix. The offset in the array of a pixel having coordinates (x, y) is y*8 + x . The back/front color will be used for a pixel if the corresponding byte in the array is zero/non-zero. LED_MATRIX_CHARS : A channel of this type allows showing a text message using the LED matrix. It can only be used for writing and its value.type must be STRING . The characters of the message will be rendered using the front color and the background using the back color. RGB565 framebuffer The following resource allows writing the framebuffer using the RGB565 format: LED_MATRIX_FB_RGB565 : A channel of this type allows to set the framebuffer contents in RGB565 mode. It can only be used in write mode and its value.type must be BYTE_ARRAY . The supplied value must be a byte array of length 128 that represents the state of the 8x8 led matrix. Each pixel is represented by two consecutive bytes in the following way: | MSB | LSB | | RRRRRGGG | GGGBBBBB | | 15 ... 8 | 7 ... 0 | The LSB must be stored first in the array, the offset of the LSB and MSB for a pixel at coordinates (x, y) is the following: LSB : 2*(y*8 + x) MSB : 2*(y*8 + x) + 1 Mode independent resources LED_MATRIX_CLEAR : Writing anything to a LED_MATRIX_CLEAR channel will clear the framebuffer turning off all leds. LED_MATRIX_ROTATION : Allows to rotate the framebuffer of 0, 90, 180, and 170 degrees clockwise. Rotation setting will be retained for successive draw operations. The default value is 0. Writes to a LED_MATRIX_ROTATION channel can be performed using any numeric type as value.type . Example framebuffer Asset configuration: Examples This section contains some examples describing how to use the driver using Kura Wires and the Wires Script filter. Moving a pixel using the Joystick Open the Wires section of the Kura Web UI. Create an Asset that emits joystick events like the one described in the Joystick section. Only left_release , right_release , up_release and down_release channels will be used. Make sure to enable the listen flag for the channels. Create the Asset described in the LED Matrix section. Create a Script Filter and paste the code below in the script field. Connect the Joystick Asset to the input port of the Script Filter, and the output port of the Script filter to the framebuffer Asset. Open the Drivers and Assets section of the Kura Web UI, select the framebuffer Asset, click on the Data tab and select front and back colors. For example for using green as front color and red as back color, write 1 as Value for the front_g and back_r channels. You should now be able to move the green pixel with the joystick. var FB_SIZE = 8 if ( typeof ( state ) === 'undefined' ) { // framebuffer as byte array (0 -> back color, non zero -> front color) var fb = newByteArray ( FB_SIZE * FB_SIZE | 0 ) // record to be emitted for updating the fb var outRecord = newWireRecord () // property in emitted record containing fb data // change the name if needed // should match the name of a channel configured as LED_MATRIX_FB_MONOCHROME outRecord [ 'fb_mono' ] = newByteArrayValue ( fb ) state = { fb : fb , outRecord : outRecord , x : 0 , // current pixel position y : 0 , dx : 0 , // deltas to be added to pixel position dy : 0 , } } if ( typeof ( actions ) === 'undefined' ) { // associations between input property names // and position update actions, // input can be supplied using an Asset // with joystick event channels actions = { 'up_release' : function () { // decrease y coordinate state . dy = - 1 }, 'down_release' : function () { // increase y coordinate state . dy = 1 }, 'left_release' : function () { // decrease x coordinate state . dx = - 1 }, 'right_release' : function () { // increase x coordinate state . dx = 1 } } } if ( input . records . length ) { var input = input . records [ 0 ] var update = false for ( var prop in input ) { var action = actions [ prop ] // if there is an action associated with the received property, execute it if ( action ) { action () // request framebuffer update update = true } } if ( update ) { // framebuffer update requested // clear old pixel state . fb [ state . y * FB_SIZE + state . x ] = 0 // compute new pixel position state . x = ( state . x + state . dx + FB_SIZE ) % FB_SIZE state . y = ( state . y + state . dy + FB_SIZE ) % FB_SIZE // set new pixel state . fb [ state . y * FB_SIZE + state . x ] = 1 // clear deltas state . dx = 0 state . dy = 0 // emit record output . add ( state . outRecord ) } } Using RGB565 framebuffer Open the Wires section of the Kura Web UI. Create the Asset described in the LED Matrix section. Create a Script Filter and paste the code below in the script field. Create a Timer that ticks every 16 milliseconds. Connect the Timer to the input port of the Script Filter, and the output port of the Script filter to the framebuffer Asset. The framebuffer should now display an animation, the animation can be changed by modifying the wave parameters and setting script.context.drop to false. var FB_SIZE = 8 var BYTES_PER_PIXEL = 2 if ( typeof ( state ) === 'undefined' ) { // framebuffer as RGB565 byte array var fb = newByteArray ( FB_SIZE * FB_SIZE * BYTES_PER_PIXEL | 0 ) // record to be emitted for updating the fb var outRecord = newWireRecord () // property in emitted record containing fb data // change the name if needed // must match the name of a channel configured as LED_MATRIX_FB_565 outRecord [ 'fb_rgb565' ] = newByteArrayValue ( fb ) // framebuffer array and output record state = { fb : fb , outRecord : outRecord , } RMASK = (( 1 << 5 ) - 1 ) GMASK = (( 1 << 6 ) - 1 ) BMASK = RMASK // converts the r, g, b values provided as a floating point // number between 0 and 1 to RGB565 and stores the result // inside the output array function putPixel ( off , r , g , b ) { var _r = Math . floor ( r * RMASK ) & 0xff var _g = Math . floor ( g * GMASK ) & 0xff var _b = Math . floor ( b * BMASK ) & 0xff var b0 = ( _r << 3 | _g >> 3 ) var b1 = ( _g << 5 | _b ) state . fb [ off + 1 ] = b0 state . fb [ off ] = b1 } // parameters for 3 sin waves, one per color component RED_WAVE_PARAMS = { a : 5 , b : 10 , c : 10 , d : 0 } GREEN_WAVE_PARAMS = { a : 5 , b : 10 , c : 10 , d : 1 } BLUE_WAVE_PARAMS = { a : 5 , b : 10 , c : 10 , d : 2 } function wave ( x , y , t , params ) { return Math . abs ( Math . sin ( 2 * Math . PI * ( t + x / params . b + y / params . c + params . d ) / params . a )) } } var t = new Date (). getTime () / 1000 var off = 0 for ( var y = 0 ; y < FB_SIZE ; y ++ ) for ( var x = 0 ; x < FB_SIZE ; x ++ ) { var r = wave ( x , y , t , RED_WAVE_PARAMS ) var g = wave ( x , y , t , GREEN_WAVE_PARAMS ) var b = wave ( x , y , t , BLUE_WAVE_PARAMS ) putPixel ( off , r , g , b ) off += 2 } output . add ( state . outRecord )","title":"RaspberryPi SenseHat driver"},{"location":"connect-field-devices/sensehat-driver/#raspberrypi-sensehat-driver","text":"The SenseHat driver allows to interact to a RaspberryPi SenseHat device using Kura Driver, Asset and Wires frameworks. The driver allows access to the following resources: Sensors Joystick LED Matrix The driver-specific channel configuration contains a single parameter, resource , which allows to select the specific device resource that the channel is addressing (a sensor, a joystick event, etc). Note about running on OpenJDK If some exceptions reporting Locked by other application are visible in the log and the driver fails to start, try switching to the Oracle JVM by installing the oracle-java8-jdk package. For more information on the problem, please see this GitHub issue.","title":"RaspberryPi SenseHat driver"},{"location":"connect-field-devices/sensehat-driver/#installation","text":"As the others Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here . In order to use the driver, the Sensehat Support Library Bundle for Eclipse Kura needs to be installed as a prerequisite dependency. It is available from Eclipse Marketplace here .","title":"Installation"},{"location":"connect-field-devices/sensehat-driver/#sensors","text":"The following values of the resource parameters refer to device sensors: Resource Unit Description ACCELERATION_X , ACCELERATION_Y , ACCELERATION_Z G The proper acceleration for each axis GYROSCOPE_X , GYROSCOPE_Y , GYROSCOPE_Z rad/S The angular acceleration for each axis MAGNETOMETER_X , MAGNETOMETER_Y , MAGNETOMETERE_Z uT The magnetometer value for each axis HUMIDITY %rH The relative humidity PRESSURE mbar The pressure value TEMPERATURE_FROM_HUMIDITY \u00b0C The temperature obtained from the humidity sensor TEMPERATURE_FROM_PRESSURE \u00b0C The temperature obtained from the pressure sensor The channels referencing sensor resources can only be used for reads and only in polling mode. The driver will attempt to convert the value obtained from the sensor into the data type selected using the value.type parameter Example sensors Asset configuration:","title":"Sensors"},{"location":"connect-field-devices/sensehat-driver/#joystick","text":"The SenseHat joystick provides four buttons: UP DOWN LEFT RIGHT ENTER For each button, the driver allows to listen to the following events: PRESS : Fired once when a button is pressed RELEASE : Fired once when a button is released HOLD : Fired periodically every few seconds if the button is kept pressed The values of the resource parameter related to joystick have the following structure: JOYSTICK_{BUTTON}_{EVENT} Channels referencing joystick events must use LONG as value.type . The channel value supplied by the driver is the Java timestamp in milliseconds of the Joystick event, a value of 0 signifies that no events have been observed yet. Joystick related channels can be only used for reading and both in polling and event-driven mode. Example joystick Asset configuration:","title":"Joystick"},{"location":"connect-field-devices/sensehat-driver/#led-matrix","text":"The driver allows accessing the SenseHat LED matrix in two ways: Using a monochrome framebuffer Using a RGB565 framebuffer","title":"LED Matrix"},{"location":"connect-field-devices/sensehat-driver/#coordinates","text":"The coordinate system used by the driver defines the x coordinate as increasing along the direction identified by the joystick RIGHT button and the y coordinate increasing along the direction identified by the DOWN joystick button.","title":"Coordinates"},{"location":"connect-field-devices/sensehat-driver/#monochrome-framebuffer","text":"In monochrome mode, only two colors will be used: the front color and the back color.","title":"Monochrome framebuffer"},{"location":"connect-field-devices/sensehat-driver/#front-and-back-colors","text":"Front and back colors can be configured using channels having the following values for the resource parameter: LED_MATRIX_FRONT_COLOR_R LED_MATRIX_FRONT_COLOR_G LED_MATRIX_FRONT_COLOR_B LED_MATRIX_BACK_COLOR_R LED_MATRIX_BACK_COLOR_G LED_MATRIX_BACK_COLOR_B These channel types allow to set the rgb components of the front and back color and can only be used in write mode. The supplied value must be a floating point number between 0 (led turned off) and 1 (full brightness). Note: Front and back colors are internally represented using the RGB565 format. The available colors are only the ones that can be represented using RGB565 and are supported by the device. Front and back color are retained for successive draw operations, the initial value for both colors is black (led turned off).","title":"Front and back colors"},{"location":"connect-field-devices/sensehat-driver/#drawing","text":"The following resources can be used for modifying framebuffer contents: LED_MATRIX_FB_MONOCHROME : A channel of this type allows to set the framebuffer contents in monochrome mode. It can only be used in write mode and its value.type must be BYTE_ARRAY . The supplied value must be a byte array of length 64 that represent the state of the 8x8 led matrix. The offset in the array of a pixel having coordinates (x, y) is y*8 + x . The back/front color will be used for a pixel if the corresponding byte in the array is zero/non-zero. LED_MATRIX_CHARS : A channel of this type allows showing a text message using the LED matrix. It can only be used for writing and its value.type must be STRING . The characters of the message will be rendered using the front color and the background using the back color.","title":"Drawing"},{"location":"connect-field-devices/sensehat-driver/#rgb565-framebuffer","text":"The following resource allows writing the framebuffer using the RGB565 format: LED_MATRIX_FB_RGB565 : A channel of this type allows to set the framebuffer contents in RGB565 mode. It can only be used in write mode and its value.type must be BYTE_ARRAY . The supplied value must be a byte array of length 128 that represents the state of the 8x8 led matrix. Each pixel is represented by two consecutive bytes in the following way: | MSB | LSB | | RRRRRGGG | GGGBBBBB | | 15 ... 8 | 7 ... 0 | The LSB must be stored first in the array, the offset of the LSB and MSB for a pixel at coordinates (x, y) is the following: LSB : 2*(y*8 + x) MSB : 2*(y*8 + x) + 1","title":"RGB565 framebuffer"},{"location":"connect-field-devices/sensehat-driver/#mode-independent-resources","text":"LED_MATRIX_CLEAR : Writing anything to a LED_MATRIX_CLEAR channel will clear the framebuffer turning off all leds. LED_MATRIX_ROTATION : Allows to rotate the framebuffer of 0, 90, 180, and 170 degrees clockwise. Rotation setting will be retained for successive draw operations. The default value is 0. Writes to a LED_MATRIX_ROTATION channel can be performed using any numeric type as value.type . Example framebuffer Asset configuration:","title":"Mode independent resources"},{"location":"connect-field-devices/sensehat-driver/#examples","text":"This section contains some examples describing how to use the driver using Kura Wires and the Wires Script filter.","title":"Examples"},{"location":"connect-field-devices/sensehat-driver/#moving-a-pixel-using-the-joystick","text":"Open the Wires section of the Kura Web UI. Create an Asset that emits joystick events like the one described in the Joystick section. Only left_release , right_release , up_release and down_release channels will be used. Make sure to enable the listen flag for the channels. Create the Asset described in the LED Matrix section. Create a Script Filter and paste the code below in the script field. Connect the Joystick Asset to the input port of the Script Filter, and the output port of the Script filter to the framebuffer Asset. Open the Drivers and Assets section of the Kura Web UI, select the framebuffer Asset, click on the Data tab and select front and back colors. For example for using green as front color and red as back color, write 1 as Value for the front_g and back_r channels. You should now be able to move the green pixel with the joystick. var FB_SIZE = 8 if ( typeof ( state ) === 'undefined' ) { // framebuffer as byte array (0 -> back color, non zero -> front color) var fb = newByteArray ( FB_SIZE * FB_SIZE | 0 ) // record to be emitted for updating the fb var outRecord = newWireRecord () // property in emitted record containing fb data // change the name if needed // should match the name of a channel configured as LED_MATRIX_FB_MONOCHROME outRecord [ 'fb_mono' ] = newByteArrayValue ( fb ) state = { fb : fb , outRecord : outRecord , x : 0 , // current pixel position y : 0 , dx : 0 , // deltas to be added to pixel position dy : 0 , } } if ( typeof ( actions ) === 'undefined' ) { // associations between input property names // and position update actions, // input can be supplied using an Asset // with joystick event channels actions = { 'up_release' : function () { // decrease y coordinate state . dy = - 1 }, 'down_release' : function () { // increase y coordinate state . dy = 1 }, 'left_release' : function () { // decrease x coordinate state . dx = - 1 }, 'right_release' : function () { // increase x coordinate state . dx = 1 } } } if ( input . records . length ) { var input = input . records [ 0 ] var update = false for ( var prop in input ) { var action = actions [ prop ] // if there is an action associated with the received property, execute it if ( action ) { action () // request framebuffer update update = true } } if ( update ) { // framebuffer update requested // clear old pixel state . fb [ state . y * FB_SIZE + state . x ] = 0 // compute new pixel position state . x = ( state . x + state . dx + FB_SIZE ) % FB_SIZE state . y = ( state . y + state . dy + FB_SIZE ) % FB_SIZE // set new pixel state . fb [ state . y * FB_SIZE + state . x ] = 1 // clear deltas state . dx = 0 state . dy = 0 // emit record output . add ( state . outRecord ) } }","title":"Moving a pixel using the Joystick"},{"location":"connect-field-devices/sensehat-driver/#using-rgb565-framebuffer","text":"Open the Wires section of the Kura Web UI. Create the Asset described in the LED Matrix section. Create a Script Filter and paste the code below in the script field. Create a Timer that ticks every 16 milliseconds. Connect the Timer to the input port of the Script Filter, and the output port of the Script filter to the framebuffer Asset. The framebuffer should now display an animation, the animation can be changed by modifying the wave parameters and setting script.context.drop to false. var FB_SIZE = 8 var BYTES_PER_PIXEL = 2 if ( typeof ( state ) === 'undefined' ) { // framebuffer as RGB565 byte array var fb = newByteArray ( FB_SIZE * FB_SIZE * BYTES_PER_PIXEL | 0 ) // record to be emitted for updating the fb var outRecord = newWireRecord () // property in emitted record containing fb data // change the name if needed // must match the name of a channel configured as LED_MATRIX_FB_565 outRecord [ 'fb_rgb565' ] = newByteArrayValue ( fb ) // framebuffer array and output record state = { fb : fb , outRecord : outRecord , } RMASK = (( 1 << 5 ) - 1 ) GMASK = (( 1 << 6 ) - 1 ) BMASK = RMASK // converts the r, g, b values provided as a floating point // number between 0 and 1 to RGB565 and stores the result // inside the output array function putPixel ( off , r , g , b ) { var _r = Math . floor ( r * RMASK ) & 0xff var _g = Math . floor ( g * GMASK ) & 0xff var _b = Math . floor ( b * BMASK ) & 0xff var b0 = ( _r << 3 | _g >> 3 ) var b1 = ( _g << 5 | _b ) state . fb [ off + 1 ] = b0 state . fb [ off ] = b1 } // parameters for 3 sin waves, one per color component RED_WAVE_PARAMS = { a : 5 , b : 10 , c : 10 , d : 0 } GREEN_WAVE_PARAMS = { a : 5 , b : 10 , c : 10 , d : 1 } BLUE_WAVE_PARAMS = { a : 5 , b : 10 , c : 10 , d : 2 } function wave ( x , y , t , params ) { return Math . abs ( Math . sin ( 2 * Math . PI * ( t + x / params . b + y / params . c + params . d ) / params . a )) } } var t = new Date (). getTime () / 1000 var off = 0 for ( var y = 0 ; y < FB_SIZE ; y ++ ) for ( var x = 0 ; x < FB_SIZE ; x ++ ) { var r = wave ( x , y , t , RED_WAVE_PARAMS ) var g = wave ( x , y , t , GREEN_WAVE_PARAMS ) var b = wave ( x , y , t , BLUE_WAVE_PARAMS ) putPixel ( off , r , g , b ) off += 2 } output . add ( state . outRecord )","title":"Using RGB565 framebuffer"},{"location":"connect-field-devices/sensortag-driver/","text":"TI SensorTag Driver Eclipse Kura provides a specific driver that can be used to interact with Texas Instruments SensorTag devices. The driver is available only for gateways that support the new Bluetooth LE APIs. It can be used in the Wires framework, the Asset model or directly using the Driver itself. Warning The SensorTag driver can be used only with TI SensorTags with firmware version >1.20. If your device has an older firmware, please update it. Features The SensorTag Driver can be used to get the values from all the sensor installed on the tag (both in polling mode and notification): ambient and target temperature humidity pressure three-axis acceleration three-axis magnetic field three-axis orientation light push buttons Moreover, the following resources can be written by the driver: - read and green leds - buzzer When a notification is enabled for a specific channel (sensor), the notification period can be set. Installation As the other Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace here and here . It can be installed following the instructions provided here . Instance creation A new TiSensorTag Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.ble.sensortag factory must be selected and a unique name must be provided for the new instance. Once instantiated, the SensorTag Driver has to be configured setting the Bluetooth interface name (i.e. hci0) that will be used to connect to the device. Channel configuration The SensorTag Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . Conversely, in write operations the Driver will accept value of this kind. listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. sensortag.address : the address of the specific SensorTag (i.e. aa:bb:cc:dd:ee:ff) sensor.name : the name of the sensor. It can be selected from a drop-down list notification.period : the period in milliseconds used to receive notification for a specific sensor. The value will be ignored it the listen option is not checked.","title":"TI SensorTag Driver"},{"location":"connect-field-devices/sensortag-driver/#ti-sensortag-driver","text":"Eclipse Kura provides a specific driver that can be used to interact with Texas Instruments SensorTag devices. The driver is available only for gateways that support the new Bluetooth LE APIs. It can be used in the Wires framework, the Asset model or directly using the Driver itself. Warning The SensorTag driver can be used only with TI SensorTags with firmware version >1.20. If your device has an older firmware, please update it.","title":"TI SensorTag Driver"},{"location":"connect-field-devices/sensortag-driver/#features","text":"The SensorTag Driver can be used to get the values from all the sensor installed on the tag (both in polling mode and notification): ambient and target temperature humidity pressure three-axis acceleration three-axis magnetic field three-axis orientation light push buttons Moreover, the following resources can be written by the driver: - read and green leds - buzzer When a notification is enabled for a specific channel (sensor), the notification period can be set.","title":"Features"},{"location":"connect-field-devices/sensortag-driver/#installation","text":"As the other Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace here and here . It can be installed following the instructions provided here .","title":"Installation"},{"location":"connect-field-devices/sensortag-driver/#instance-creation","text":"A new TiSensorTag Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.ble.sensortag factory must be selected and a unique name must be provided for the new instance. Once instantiated, the SensorTag Driver has to be configured setting the Bluetooth interface name (i.e. hci0) that will be used to connect to the device.","title":"Instance creation"},{"location":"connect-field-devices/sensortag-driver/#channel-configuration","text":"The SensorTag Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . Conversely, in write operations the Driver will accept value of this kind. listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. sensortag.address : the address of the specific SensorTag (i.e. aa:bb:cc:dd:ee:ff) sensor.name : the name of the sensor. It can be selected from a drop-down list notification.period : the period in milliseconds used to receive notification for a specific sensor. The value will be ignored it the listen option is not checked.","title":"Channel configuration"},{"location":"connect-field-devices/xdk-driver/","text":"Xdk Driver Eclipse Kura provides a specific driver that can be used to interact with Bosch Xdk110 devices. The driver is available only for gateways that support the new Bluetooth LE APIs. It can be used in to the Wires framework, the Asset model or directly using the Driver itself. Info The Xdk driver can only be used with Xdk110 with VirtualXdkDemo installed and with firmware version > 3.5.0 . If your device has an older firmware, please update it. Features The Xdk Driver can be used to get the values from all the sensor provider by the xdk110 (both in polling mode and notification): three-axis acceleration (or four-axis quaternion rappresentation) three-axis gyroscope (or four-axis quaternion rappresentation) light noise pressure ambient temperature humidity sd-card detect status push buttons three-axis magnetic field magnetometer resistence led status rms voltage of LEM sensor Resource Unit Description ACCELERATION_X, ACCELERATION_Y, ACCELERATION_Z G The proper acceleration for each axis* GYROSCOPE_X, GYROSCOPE_Y, GYROSCOPE_Z rad/S The angular acceleration for each axis* LIGHT lux The light value NOISE DpSpl The acustic pressure value PRESSURE Pa The pressure value TEMPERATURE C The temperature value HUMIDITY %rH The relative humidity SD_CARD_DETECTION_STATUS boolean SD-Card detect status PUSH_BUTTONS bit Button status, encoded as bit field: Bit 0, Button 1; Bit 1, Button 2 MAGNETOMETER_X, MAGNETOMETER_Y, MAGNETOMETERE_Z uT The magnetometer value for each axis MAGNETOMETER_RESISTENCE ohm The magnetometer resistence value LED_STATUS bit Led status, encoded as a bit field: Bit 0: yellow Led; Bit 1: orange Led; Bit 2: red Led VOLTAGE_LEM mV RMS voltage of LEM sensor *If the Quaternion rappresentation is selected, then: Resource Unit Description QUATERNION_M , QUATERNION_X , QUATERNION_Y , QUATERNION_Z number The rotation-quaternion for each axis When a notification is enabled for a specific channel (sensor), the notification period can't be set. Use the Timer in Wire Graph to set polling. Documentation All the information regarding the Xdk110 is available in the Xdk Bosch Connectivity here website. The XDK-Workbench is the tool that can be used to develop software for the Xdk110. It can be downloaded from here . XDK-Workbench is required to install VirtualXdkDemo. Warning We found connection problems with Xdk, probably due to issues with XDK-Workbench version 3.6.0. We recommend installing version 3.5.0. The Virtual XDK application user guide contains all the information regarding the XDK110 UUIDs and data formats here . Info To switch between quaternion and sensor representation, the XDK110 needs to be instructed using the 55b741d5-7ada-11e4-82f8-0800200c9a66 UUID. Set it to 0x01 to enable Quaternions. If quaternion representation is enabled, the data format is as follows: Bytes Data Type 0,1,2 & 3 Rotation Quaternion M float 4,5,6 & 7 Rotation Quaternion X float 8,9,10 & 11 Rotation Quaternion Y float 12,13,14 & 15 Rotation Quaternion Z float Installation As the others Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here . Instance creation A new Xdk Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.ble.xdk factory must be selected and a unique name must be provided for the new instance. Once instantiated, the Xdk Driver has to be configured setting the Bluetooth interface name (i.e. hci0 ). Other options available are related to the quaternion/sensor representation and the sensor sampling rate (in Hz). Channel configuration The Xdk Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). Warning The Xdk driver can only be used with READ. value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. xdk.address : the address of the specific xdk (i.e. aa:bb:cc:dd:ee:ff) sensor.name : the name of the sensor. It can be selected from a drop-down list.","title":"Xdk Driver"},{"location":"connect-field-devices/xdk-driver/#xdk-driver","text":"Eclipse Kura provides a specific driver that can be used to interact with Bosch Xdk110 devices. The driver is available only for gateways that support the new Bluetooth LE APIs. It can be used in to the Wires framework, the Asset model or directly using the Driver itself. Info The Xdk driver can only be used with Xdk110 with VirtualXdkDemo installed and with firmware version > 3.5.0 . If your device has an older firmware, please update it.","title":"Xdk Driver"},{"location":"connect-field-devices/xdk-driver/#features","text":"The Xdk Driver can be used to get the values from all the sensor provider by the xdk110 (both in polling mode and notification): three-axis acceleration (or four-axis quaternion rappresentation) three-axis gyroscope (or four-axis quaternion rappresentation) light noise pressure ambient temperature humidity sd-card detect status push buttons three-axis magnetic field magnetometer resistence led status rms voltage of LEM sensor Resource Unit Description ACCELERATION_X, ACCELERATION_Y, ACCELERATION_Z G The proper acceleration for each axis* GYROSCOPE_X, GYROSCOPE_Y, GYROSCOPE_Z rad/S The angular acceleration for each axis* LIGHT lux The light value NOISE DpSpl The acustic pressure value PRESSURE Pa The pressure value TEMPERATURE C The temperature value HUMIDITY %rH The relative humidity SD_CARD_DETECTION_STATUS boolean SD-Card detect status PUSH_BUTTONS bit Button status, encoded as bit field: Bit 0, Button 1; Bit 1, Button 2 MAGNETOMETER_X, MAGNETOMETER_Y, MAGNETOMETERE_Z uT The magnetometer value for each axis MAGNETOMETER_RESISTENCE ohm The magnetometer resistence value LED_STATUS bit Led status, encoded as a bit field: Bit 0: yellow Led; Bit 1: orange Led; Bit 2: red Led VOLTAGE_LEM mV RMS voltage of LEM sensor *If the Quaternion rappresentation is selected, then: Resource Unit Description QUATERNION_M , QUATERNION_X , QUATERNION_Y , QUATERNION_Z number The rotation-quaternion for each axis When a notification is enabled for a specific channel (sensor), the notification period can't be set. Use the Timer in Wire Graph to set polling.","title":"Features"},{"location":"connect-field-devices/xdk-driver/#documentation","text":"All the information regarding the Xdk110 is available in the Xdk Bosch Connectivity here website. The XDK-Workbench is the tool that can be used to develop software for the Xdk110. It can be downloaded from here . XDK-Workbench is required to install VirtualXdkDemo. Warning We found connection problems with Xdk, probably due to issues with XDK-Workbench version 3.6.0. We recommend installing version 3.5.0. The Virtual XDK application user guide contains all the information regarding the XDK110 UUIDs and data formats here . Info To switch between quaternion and sensor representation, the XDK110 needs to be instructed using the 55b741d5-7ada-11e4-82f8-0800200c9a66 UUID. Set it to 0x01 to enable Quaternions. If quaternion representation is enabled, the data format is as follows: Bytes Data Type 0,1,2 & 3 Rotation Quaternion M float 4,5,6 & 7 Rotation Quaternion X float 8,9,10 & 11 Rotation Quaternion Y float 12,13,14 & 15 Rotation Quaternion Z float","title":"Documentation"},{"location":"connect-field-devices/xdk-driver/#installation","text":"As the others Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace here . It can be installed following the instructions provided here .","title":"Installation"},{"location":"connect-field-devices/xdk-driver/#instance-creation","text":"A new Xdk Driver instance can be created either by clicking the New Driver button in the dedicated Drivers and Assets Web UI section or by clicking on the + button under Services . In both cases, the org.eclipse.kura.driver.ble.xdk factory must be selected and a unique name must be provided for the new instance. Once instantiated, the Xdk Driver has to be configured setting the Bluetooth interface name (i.e. hci0 ). Other options available are related to the quaternion/sensor representation and the sensor sampling rate (in Hz).","title":"Instance creation"},{"location":"connect-field-devices/xdk-driver/#channel-configuration","text":"The Xdk Driver channel can be configured with the following parameters: enabled : it allows to enable/disable the channel. If it isn't selected the channel will be ignored. name : the channel name. type : the channel type, ( READ , WRITE , or READ_WRITE ). Warning The Xdk driver can only be used with READ. value.type : the Java type of the channel value. The value read by the Driver will be converted to the value.type . listen : when selected, a listener will be attached to this channel. Any event on the channel will be reported using a callback and the value will be emitted. xdk.address : the address of the specific xdk (i.e. aa:bb:cc:dd:ee:ff) sensor.name : the name of the sensor. It can be selected from a drop-down list.","title":"Channel configuration"},{"location":"core-services/active-mq-artemis-broker/","text":"ActiveMQ Artemis MQTT Broker Apart from using the simple ActiveMQ-7 MQTT instance available in the Simple Artemis MQTT Broker Service , this service allows to configure, in a more detailed way, the characteristics of the ActiveMQ-7 broker instance running in Kura. This service exposes the following configuration parameters: Enabled - (Required) - Enables the broker instance Broker XML - Broker XML configuration. An empty broker configuration will disable the broker. Required protocols - A comma seperated list of all required protocol factories (e.g. AMQP or MQTT) User configuration - (Required) - User configuration in the format: user=password|role1,role2,... Default user name - The name of the default user Please refer to the official documentation for more details on how to configure the ActiveMQ broker service. Service Usage Example Setting the Broker XML field as follows: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <configuration xmlns= \"urn:activemq\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \" urn:activemq https://raw.githubusercontent.com/apache/activemq-artemis/master/artemis-server/src/main/resources/schema/artemis-server.xsd urn:activemq:core https://raw.githubusercontent.com/apache/activemq-artemis/master/artemis-server/src/main/resources/schema/artemis-configuration.xsd urn:activemq:jms https://raw.githubusercontent.com/apache/activemq-artemis/master/artemis-jms-server/src/main/resources/schema/artemis-jms.xsd \" > <core xmlns= \"urn:activemq:core\" > <persistence-enabled> false </persistence-enabled> <acceptors> <acceptor name= \"netty-acceptor\" > tcp://localhost:61616 </acceptor> <acceptor name= \"amqp-acceptor\" > tcp://localhost:5672?protocols=AMQP </acceptor> <acceptor name= \"mqtt-acceptor\" > tcp://localhost:1883?protocols=MQTT </acceptor> </acceptors> <resolve-protocols> false </resolve-protocols> <security-settings> <!-- WARNING: this is only for testing and completely insecure --> <security-setting match= \"#\" > <permission type= \"createDurableQueue\" roles= \"guest\" /> <permission type= \"deleteDurableQueue\" roles= \"guest\" /> <permission type= \"createNonDurableQueue\" roles= \"guest\" /> <permission type= \"deleteNonDurableQueue\" roles= \"guest\" /> <permission type= \"consume\" roles= \"guest\" /> <permission type= \"send\" roles= \"guest\" /> </security-setting> </security-settings> </core> <jms xmlns= \"urn:activemq:jms\" > <topic name= \"TEST.T.1\" /> </jms> </configuration> the User configuration to: guest=test12|guest while setting the Default user name to: guest will determine that the TCP ports 1883, 5672 and 61616 are now open (you can verify that via netstat -antup ). Configuring the MqttDataTransport in System -> Cloud Services -> MqttDataTransport to use: broker-url - mqtt://localhost:1883 username - guest password - test12 Clicking on the Connect button will result in a successful connection of Kura cloud service to the ActiveMQ-7 MQTT broker. Note The XML configuration above only allows connections originating from the gateway itself. In order to allow external connection the bind URLs specified using the acceptor tag must be modified by specifying an external accessible address instead of localhost . If the bind address is set to 0.0.0.0 , the broker will listen on all available addresses.","title":"ActiveMQ Artemis MQTT Broker"},{"location":"core-services/active-mq-artemis-broker/#activemq-artemis-mqtt-broker","text":"Apart from using the simple ActiveMQ-7 MQTT instance available in the Simple Artemis MQTT Broker Service , this service allows to configure, in a more detailed way, the characteristics of the ActiveMQ-7 broker instance running in Kura. This service exposes the following configuration parameters: Enabled - (Required) - Enables the broker instance Broker XML - Broker XML configuration. An empty broker configuration will disable the broker. Required protocols - A comma seperated list of all required protocol factories (e.g. AMQP or MQTT) User configuration - (Required) - User configuration in the format: user=password|role1,role2,... Default user name - The name of the default user Please refer to the official documentation for more details on how to configure the ActiveMQ broker service.","title":"ActiveMQ Artemis MQTT Broker"},{"location":"core-services/active-mq-artemis-broker/#service-usage-example","text":"Setting the Broker XML field as follows: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <configuration xmlns= \"urn:activemq\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \" urn:activemq https://raw.githubusercontent.com/apache/activemq-artemis/master/artemis-server/src/main/resources/schema/artemis-server.xsd urn:activemq:core https://raw.githubusercontent.com/apache/activemq-artemis/master/artemis-server/src/main/resources/schema/artemis-configuration.xsd urn:activemq:jms https://raw.githubusercontent.com/apache/activemq-artemis/master/artemis-jms-server/src/main/resources/schema/artemis-jms.xsd \" > <core xmlns= \"urn:activemq:core\" > <persistence-enabled> false </persistence-enabled> <acceptors> <acceptor name= \"netty-acceptor\" > tcp://localhost:61616 </acceptor> <acceptor name= \"amqp-acceptor\" > tcp://localhost:5672?protocols=AMQP </acceptor> <acceptor name= \"mqtt-acceptor\" > tcp://localhost:1883?protocols=MQTT </acceptor> </acceptors> <resolve-protocols> false </resolve-protocols> <security-settings> <!-- WARNING: this is only for testing and completely insecure --> <security-setting match= \"#\" > <permission type= \"createDurableQueue\" roles= \"guest\" /> <permission type= \"deleteDurableQueue\" roles= \"guest\" /> <permission type= \"createNonDurableQueue\" roles= \"guest\" /> <permission type= \"deleteNonDurableQueue\" roles= \"guest\" /> <permission type= \"consume\" roles= \"guest\" /> <permission type= \"send\" roles= \"guest\" /> </security-setting> </security-settings> </core> <jms xmlns= \"urn:activemq:jms\" > <topic name= \"TEST.T.1\" /> </jms> </configuration> the User configuration to: guest=test12|guest while setting the Default user name to: guest will determine that the TCP ports 1883, 5672 and 61616 are now open (you can verify that via netstat -antup ). Configuring the MqttDataTransport in System -> Cloud Services -> MqttDataTransport to use: broker-url - mqtt://localhost:1883 username - guest password - test12 Clicking on the Connect button will result in a successful connection of Kura cloud service to the ActiveMQ-7 MQTT broker. Note The XML configuration above only allows connections originating from the gateway itself. In order to allow external connection the bind URLs specified using the acceptor tag must be modified by specifying an external accessible address instead of localhost . If the bind address is set to 0.0.0.0 , the broker will listen on all available addresses.","title":"Service Usage Example"},{"location":"core-services/clock-service/","text":"Clock Service The ClockService handles the date and time management of the system. If enabled, it tries to update the system date and time using a Network Time Protocol (NTP) server. NTP can use NTS as authentication mechanism through chrony. Service Configuration To manage the system date and time, select the ClockService option located in the Services area as shown in the screen capture below. The ClockService provides the following configuration parameters: enabled : sets whether or not this service is enabled or disabled (Required field). clock.set.hwclock : defines if the hardware clock of the gateway must be synced after the system time is set. If enabled, the service calls the Linux command hwclock --utc --systohc . clock.provider : specifies one among Java NTP client (java-ntp), Linux chrony command (chrony-advanced), Linux ntpdate command (ntpd) (Required field). If chrony-advanced is used, Kura will not change system and/or hardware clock directly, delegating these operations to chrony. clock.ntp.host : sets a valid NTP server host address. clock.ntp.port : sets a valid NTP port number (not supported by ntpd, use the port 123 in that case). clock.ntp.timeout : specifies the NTP timeout in milliseconds. clock.ntp.max-retry : defines the number of retries when a sync fails (retry at every minute). Subsequently, the next retry occurs on the next refresh interval. clock.ntp.retry.interval : defines the interval in seconds between each retry when a sync fails. If the clock.ntp.refresh-interval parameter is less than zero, there is no update. If the clock.ntp.refresh-interval parameter is equal to zero, there is only one try at startup (Required field). clock.ntp.refresh-interval : defines the frequency (in seconds) at which the service tries to sync the clock. Note that at the start of Kura, when the ClockService is enabled, it tries to sync the clock every minute until it is successful. After a successful sync, this operation is performed at the frequency defined by this parameter. If the value is less than zero, there is no update. If the value is equal to zero, syncs only once at startup. chrony.advanced.config : specifies the content of the chrony configuration file. If this field is left blank, the default system configuration will be used. All fields above will be ignored. To obtain the hardware clock synchronization the directive rtcsync could be used. The rtcsync directive provides the hardware clock synchronization made by the linux kernel every 11 minutes. For further information reference the chrony website . Two example configuration are shown below. NTS Secure configuration example server time.cloudflare.com iburst nts server nts.sth1.ntp.se iburst nts server nts.sth2.ntp.se iburst nts sourcedir /etc/chrony/sources.d driftfile /var/lib/chrony/chrony.drift logdir /var/log/chrony maxupdateskew 100 .0 rtcsync makestep 1 -1 leapsectz right/UTC Note If the system stays disconnected from the network for a long time or if the backup battery is not working properly or is depleted, there is the possibility of a synchronization failure due to the client inability to verify the server certificates. If this happens and no counter action has been taken in the chrony configuration file, the risk is that the gateway will be unable to synchronise again its date and therefore will not be able to connect to the cloud and/or be fully operational. A possible way to prevent this issue is to temporary disable the certificate verification using the directive nocerttimecheck. This directory will disable the security checks of the activation and expiration times of certificates for the specified number of clock updates and should be used with caution due to the important security implications . As reported by the official Chrony documentation , disabling the time checks has important security implications and should be used only as a last resort, preferably with a minimal number of trusted certificates. The default value is 0, which means the time checks are always enabled. An example of the directive is nocerttimecheck 1 This would disable the time checks until the clock is updated for the first time, assuming the first update corrects the clock and later checks can work with correct time. Simple configuration example # Use public NTP servers from the pool.ntp.org project. pool pool.ntp.org iburst # Record the rate at which the system clock gains/losses time. driftfile /var/lib/chrony/drift # Allow the system clock to be stepped in the first three updates # if its offset is larger than 1 second. makestep 1 -1 # Enable kernel synchronization of the real-time clock (RTC). rtcsync","title":"Clock Service"},{"location":"core-services/clock-service/#clock-service","text":"The ClockService handles the date and time management of the system. If enabled, it tries to update the system date and time using a Network Time Protocol (NTP) server. NTP can use NTS as authentication mechanism through chrony.","title":"Clock Service"},{"location":"core-services/clock-service/#service-configuration","text":"To manage the system date and time, select the ClockService option located in the Services area as shown in the screen capture below. The ClockService provides the following configuration parameters: enabled : sets whether or not this service is enabled or disabled (Required field). clock.set.hwclock : defines if the hardware clock of the gateway must be synced after the system time is set. If enabled, the service calls the Linux command hwclock --utc --systohc . clock.provider : specifies one among Java NTP client (java-ntp), Linux chrony command (chrony-advanced), Linux ntpdate command (ntpd) (Required field). If chrony-advanced is used, Kura will not change system and/or hardware clock directly, delegating these operations to chrony. clock.ntp.host : sets a valid NTP server host address. clock.ntp.port : sets a valid NTP port number (not supported by ntpd, use the port 123 in that case). clock.ntp.timeout : specifies the NTP timeout in milliseconds. clock.ntp.max-retry : defines the number of retries when a sync fails (retry at every minute). Subsequently, the next retry occurs on the next refresh interval. clock.ntp.retry.interval : defines the interval in seconds between each retry when a sync fails. If the clock.ntp.refresh-interval parameter is less than zero, there is no update. If the clock.ntp.refresh-interval parameter is equal to zero, there is only one try at startup (Required field). clock.ntp.refresh-interval : defines the frequency (in seconds) at which the service tries to sync the clock. Note that at the start of Kura, when the ClockService is enabled, it tries to sync the clock every minute until it is successful. After a successful sync, this operation is performed at the frequency defined by this parameter. If the value is less than zero, there is no update. If the value is equal to zero, syncs only once at startup. chrony.advanced.config : specifies the content of the chrony configuration file. If this field is left blank, the default system configuration will be used. All fields above will be ignored. To obtain the hardware clock synchronization the directive rtcsync could be used. The rtcsync directive provides the hardware clock synchronization made by the linux kernel every 11 minutes. For further information reference the chrony website . Two example configuration are shown below.","title":"Service Configuration"},{"location":"core-services/clock-service/#nts-secure-configuration-example","text":"server time.cloudflare.com iburst nts server nts.sth1.ntp.se iburst nts server nts.sth2.ntp.se iburst nts sourcedir /etc/chrony/sources.d driftfile /var/lib/chrony/chrony.drift logdir /var/log/chrony maxupdateskew 100 .0 rtcsync makestep 1 -1 leapsectz right/UTC Note If the system stays disconnected from the network for a long time or if the backup battery is not working properly or is depleted, there is the possibility of a synchronization failure due to the client inability to verify the server certificates. If this happens and no counter action has been taken in the chrony configuration file, the risk is that the gateway will be unable to synchronise again its date and therefore will not be able to connect to the cloud and/or be fully operational. A possible way to prevent this issue is to temporary disable the certificate verification using the directive nocerttimecheck. This directory will disable the security checks of the activation and expiration times of certificates for the specified number of clock updates and should be used with caution due to the important security implications . As reported by the official Chrony documentation , disabling the time checks has important security implications and should be used only as a last resort, preferably with a minimal number of trusted certificates. The default value is 0, which means the time checks are always enabled. An example of the directive is nocerttimecheck 1 This would disable the time checks until the clock is updated for the first time, assuming the first update corrects the clock and later checks can work with correct time.","title":"NTS Secure configuration example"},{"location":"core-services/clock-service/#simple-configuration-example","text":"# Use public NTP servers from the pool.ntp.org project. pool pool.ntp.org iburst # Record the rate at which the system clock gains/losses time. driftfile /var/lib/chrony/drift # Allow the system clock to be stepped in the first three updates # if its offset is larger than 1 second. makestep 1 -1 # Enable kernel synchronization of the real-time clock (RTC). rtcsync","title":"Simple configuration example"},{"location":"core-services/command-service/","text":"Command Service The Command Service provides methods for running system commands from the Kura web console or from Kapua. In the Kura web console, the service is available clicking on the Command tab under the Device section, while for the cloud platform please refer to the official documentation. To run a command simply fill the Execute field with the command and click the Execute button. The service also provides the ability for a script to execute using the File option of the Command tab in the Kura web console or the Kapua Cloud Console. This script must be compressed into a zip file with the eventual, associated resource files. Once the file is selected and Execute is clicked, the zip file is sent embedded in an MQTT message on the device. The Command Service in the device stores the file in /tmp, unzips it, and tries to execute a shell script if one is present in the file. Note that in this case, the Execute parameter cannot be empty; a simple command, such as ls -l /tmp , may be entered. Warning When decompressed, the script loses its executable attribute. To fix this problem, if you plan to execute a script, the command entered into the Execute line must trigger the execution: ** bash [name of the script] **. The configuration of the service is in the CommandService tab located in the Services area as shown in the screen capture below. The Command Service provides the following configuration parameters: Command Enable : sets whether this service is enabled or disabled in the cloud platform (Required field). Command Password Value : sets a password to protect this service. Command Working Directory : specifies the working directory where the command execution is performed. Command Timeout : sets the timeout (in seconds) for the command execution. Command Environment : supplies a space-separated list of environment variables in the format key=value. Privileged/Unprivileged Command Service Selection : sets the modality of the command service. When set to privileged, the commands are run using the (privileged) user that started Kura, tipically kurad or root . When set to unprivileged, a standard user will run the commands. When a command execution is requested in the cloud platform, it sends an MQTT control message to the device requesting that the command be executed. On the device, the Command Service opens a temporary shell in the command.working.directory, sets the command.environment variables (if any), and waits command.timeout seconds to get command response.","title":"Command Service"},{"location":"core-services/command-service/#command-service","text":"The Command Service provides methods for running system commands from the Kura web console or from Kapua. In the Kura web console, the service is available clicking on the Command tab under the Device section, while for the cloud platform please refer to the official documentation. To run a command simply fill the Execute field with the command and click the Execute button. The service also provides the ability for a script to execute using the File option of the Command tab in the Kura web console or the Kapua Cloud Console. This script must be compressed into a zip file with the eventual, associated resource files. Once the file is selected and Execute is clicked, the zip file is sent embedded in an MQTT message on the device. The Command Service in the device stores the file in /tmp, unzips it, and tries to execute a shell script if one is present in the file. Note that in this case, the Execute parameter cannot be empty; a simple command, such as ls -l /tmp , may be entered. Warning When decompressed, the script loses its executable attribute. To fix this problem, if you plan to execute a script, the command entered into the Execute line must trigger the execution: ** bash [name of the script] **. The configuration of the service is in the CommandService tab located in the Services area as shown in the screen capture below. The Command Service provides the following configuration parameters: Command Enable : sets whether this service is enabled or disabled in the cloud platform (Required field). Command Password Value : sets a password to protect this service. Command Working Directory : specifies the working directory where the command execution is performed. Command Timeout : sets the timeout (in seconds) for the command execution. Command Environment : supplies a space-separated list of environment variables in the format key=value. Privileged/Unprivileged Command Service Selection : sets the modality of the command service. When set to privileged, the commands are run using the (privileged) user that started Kura, tipically kurad or root . When set to unprivileged, a standard user will run the commands. When a command execution is requested in the cloud platform, it sends an MQTT control message to the device requesting that the command be executed. On the device, the Command Service opens a temporary shell in the command.working.directory, sets the command.environment variables (if any), and waits command.timeout seconds to get command response.","title":"Command Service"},{"location":"core-services/configuration-service/","text":"Configuration Service The Configuration Service is responsible to manage the framework configuration by creating and persisting the framework snapshot. Built on top of the OSGi Configuration Admin and Metatype services, it is also responsible to track and manage the creation and deletion of service instances as well as OSGi component factories. The ConfigurationService is accessible using the following REST APIs and cloud request handlers: Configuration v1 REST APIs (deprecated) and CONF-V1 MQTT Request Handler (deprecated) Configuration v2 REST APIs and CONF-V2 MQTT Request Handler","title":"Configuration Service"},{"location":"core-services/configuration-service/#configuration-service","text":"The Configuration Service is responsible to manage the framework configuration by creating and persisting the framework snapshot. Built on top of the OSGi Configuration Admin and Metatype services, it is also responsible to track and manage the creation and deletion of service instances as well as OSGi component factories. The ConfigurationService is accessible using the following REST APIs and cloud request handlers: Configuration v1 REST APIs (deprecated) and CONF-V1 MQTT Request Handler (deprecated) Configuration v2 REST APIs and CONF-V2 MQTT Request Handler","title":"Configuration Service"},{"location":"core-services/container-orchestration-provider-apis/","text":"Container Orchestration Provider APIs Java API ContainerOrchestrationService The ContainerOrchestrationService is used to directly communicate with the running container engine. It exposes methods for listing, creating, and stopping containers. This class utilizes an instantiated ContainerConfiguration object as a parameter for container creation. ContainerConfiguration The ContainerConfiguration class, allows you to define a container to create. Using the embedded builder class, one can define many container-related parameters such as name, image, ports and volume mounts. ContainerInstanceDescriptor The ContainerInstanceDescriptor class is used to describe a container that has already been created. This class contains runtime information such as the ID of the container. ContainerState The ContainerState is a class that exposes an enum of container states tracked by the framework. PasswordRegistryCredentials The PasswordRegistryCredentials class stores password credentials when provisioning a container to pull from an alternative password-protected registry. PasswordRegistryCredentials The PasswordRegistryCredentials class stores password credentials when provisioning a container to pull from an alternative password-protected registry. Note The Container Orchestration Provider exports an MQTT-Namespace API. This API can be used to manage containers via MQTT requests from external applications. Please visit the Remote Gateway Inventory via MQTT documentation for more information.","title":"Container Orchestration Provider APIs"},{"location":"core-services/container-orchestration-provider-apis/#container-orchestration-provider-apis","text":"","title":"Container Orchestration Provider APIs"},{"location":"core-services/container-orchestration-provider-apis/#java-api","text":"","title":"Java API"},{"location":"core-services/container-orchestration-provider-apis/#containerorchestrationservice","text":"The ContainerOrchestrationService is used to directly communicate with the running container engine. It exposes methods for listing, creating, and stopping containers. This class utilizes an instantiated ContainerConfiguration object as a parameter for container creation.","title":"ContainerOrchestrationService"},{"location":"core-services/container-orchestration-provider-apis/#containerconfiguration","text":"The ContainerConfiguration class, allows you to define a container to create. Using the embedded builder class, one can define many container-related parameters such as name, image, ports and volume mounts.","title":"ContainerConfiguration"},{"location":"core-services/container-orchestration-provider-apis/#containerinstancedescriptor","text":"The ContainerInstanceDescriptor class is used to describe a container that has already been created. This class contains runtime information such as the ID of the container.","title":"ContainerInstanceDescriptor"},{"location":"core-services/container-orchestration-provider-apis/#containerstate","text":"The ContainerState is a class that exposes an enum of container states tracked by the framework.","title":"ContainerState"},{"location":"core-services/container-orchestration-provider-apis/#passwordregistrycredentials","text":"The PasswordRegistryCredentials class stores password credentials when provisioning a container to pull from an alternative password-protected registry.","title":"PasswordRegistryCredentials"},{"location":"core-services/container-orchestration-provider-apis/#passwordregistrycredentials_1","text":"The PasswordRegistryCredentials class stores password credentials when provisioning a container to pull from an alternative password-protected registry. Note The Container Orchestration Provider exports an MQTT-Namespace API. This API can be used to manage containers via MQTT requests from external applications. Please visit the Remote Gateway Inventory via MQTT documentation for more information.","title":"PasswordRegistryCredentials"},{"location":"core-services/container-orchestration-provider-authenticated-registries/","text":"Container Orchestration Provider Authenticated Registries The Container Orchestrator provider allows the user to pull images from private and password-protected registries. The following document will provide examples of how to connect to some popular registries. Note These guides make the following two assumptions. That you have already configured the Container Orchestrator and have a container instance already created. Please see the usage doc, to learn the basics of the orchestrator. That the image you are trying to pull supports the architecture of the gateway. Private Docker-Hub Registries Preparation: have a Docker Hub account (its credentials), and a private image ready to pull. Procedure: Populate the image name field. The username containing the private image must be placed before the image name separated by a forward slash. This is demonstrated below: **Image Name: ** <Docker-Hub username>/<image name> for example eclipse/kura . Populate the credential fields: Authentication Registry URL: This field should be left blank. Authentication Username: Your Docker Hub username. Password: Your Docker Hub password. Amazon Web Services - Elastic Container Registries (AWS-ECR) Preparation: Have access to an Amazon ECR instance. Have the AWS-CLI tool installed and appropriately configured on your computer. Have access to your AWS ECR web console. Procedure: Sign in to your amazon web console, navigate to ECR and identify which container you will like to pull onto the gateway. Copy the URI of the container. This URI will reveal the information required for the following steps. Here is how to decode the URI <identifier>.dkr.ecr.<ecr-region>.amazonaws.com/<directory>/<image name>:<image tag> . Generating an AWS-ECR access password. Open a terminal window on the machine with aws-cli installed and enter the following command aws ecr get-login-password --region <ecr-region> . Your ECR region can be found by inspecting the container URI string copied in the previous step. This command will return a long string which will be used as the repo password in the gateway. Populating information on the gateway. **Image Name: ** enter the full URI without the tag. <identifier>.dkr.ecr.<ecr-region>.amazonaws.com/<directory>/<image name> Image Tag: enter only the image tag found at the end of the URI <image tag> Authentication Registry URL: Paste only the part of the URI before the image name <identifier>.dkr.ecr.<ecr-region>.amazonaws.com/<directory>/ Authentication Username: will be AWS Password: will be the string created in step two. A fully configured container set to pull AWS will look like the following.","title":"Container Orchestration Provider Authenticated Registries"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#container-orchestration-provider-authenticated-registries","text":"The Container Orchestrator provider allows the user to pull images from private and password-protected registries. The following document will provide examples of how to connect to some popular registries. Note These guides make the following two assumptions. That you have already configured the Container Orchestrator and have a container instance already created. Please see the usage doc, to learn the basics of the orchestrator. That the image you are trying to pull supports the architecture of the gateway.","title":"Container Orchestration Provider Authenticated Registries"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#private-docker-hub-registries","text":"","title":"Private Docker-Hub Registries"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#preparation","text":"have a Docker Hub account (its credentials), and a private image ready to pull.","title":"Preparation:"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#procedure","text":"Populate the image name field. The username containing the private image must be placed before the image name separated by a forward slash. This is demonstrated below: **Image Name: ** <Docker-Hub username>/<image name> for example eclipse/kura . Populate the credential fields: Authentication Registry URL: This field should be left blank. Authentication Username: Your Docker Hub username. Password: Your Docker Hub password.","title":"Procedure:"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#amazon-web-services-elastic-container-registries-aws-ecr","text":"","title":"Amazon Web Services - Elastic Container Registries (AWS-ECR)"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#preparation_1","text":"Have access to an Amazon ECR instance. Have the AWS-CLI tool installed and appropriately configured on your computer. Have access to your AWS ECR web console.","title":"Preparation:"},{"location":"core-services/container-orchestration-provider-authenticated-registries/#procedure_1","text":"Sign in to your amazon web console, navigate to ECR and identify which container you will like to pull onto the gateway. Copy the URI of the container. This URI will reveal the information required for the following steps. Here is how to decode the URI <identifier>.dkr.ecr.<ecr-region>.amazonaws.com/<directory>/<image name>:<image tag> . Generating an AWS-ECR access password. Open a terminal window on the machine with aws-cli installed and enter the following command aws ecr get-login-password --region <ecr-region> . Your ECR region can be found by inspecting the container URI string copied in the previous step. This command will return a long string which will be used as the repo password in the gateway. Populating information on the gateway. **Image Name: ** enter the full URI without the tag. <identifier>.dkr.ecr.<ecr-region>.amazonaws.com/<directory>/<image name> Image Tag: enter only the image tag found at the end of the URI <image tag> Authentication Registry URL: Paste only the part of the URI before the image name <identifier>.dkr.ecr.<ecr-region>.amazonaws.com/<directory>/ Authentication Username: will be AWS Password: will be the string created in step two. A fully configured container set to pull AWS will look like the following.","title":"Procedure:"},{"location":"core-services/container-orchestration-provider-usage/","text":"Container Orchestration Provider Usage Before Starting For this bundle to function appropriately, the gateway must have a supported container engine installed and running. Currently, the only officially supported engine is Docker. Starting the Service To use this service select the ContainerOrchestrationService option located in the Services area. The ContainerOrchestrationService provides the following parameters: Enabled --activates the service when set to true Container Engine Host URL --provides a string that tells the service where to find the container engine (best left to the default value). Creating your first container. To create a container, select the + icon (Create a new component) under services . A popup dialogue box will appear. In the field Factory select org.eclipse.kura.container.provider.ContainerInstance from the drop-down. Then, use the Name field to specify a name for the container. Note The name specified in the 'Name' field will also be the name of the container when it is spun up by the orchestrator. After pressing submit, a new component will be added under the services tab, with the name that was selected in the dialogue. Select this component to finish configuring the container. Configuring the container To begin configuring the container, look under Services and select the item which has the name set in the previous step. Containers may be configured using the following fields: Enabled - When true, the service will create the defined container. When false the API will not create the container or will destroy the container if already running. Image Name - Describes the image that will be used to create the container. Remember to ensure that the selected image supports the architecture of the host machine, or else the container will not be able to start. Image Tag - Describes the version of the container image that will be used to create the container. Authentication Registry URL - URL for an alternative registry to pull images from. (If the field is left blank, credentials will be applied to Docker-Hub). Please see the Authenticated Registries document for more information about connecting to different popular registries. Authentication Username - Describes the username to access the container registry entered above. Password - Describes the password to access the alternative container registry. Image Download Retries - Describes the number of retries the framework will attempt to pull the image before giving up. Image Download Retry Interval - Describes the amount of time the framework will wait before attempting to pull the image again. Image Download Timeout - Describes the amount of time the framework will let the image download before timeout. Internal Ports - This field accepts a comma-separated list of ports that will be internally exposed on the spun-up container. In this field, you can also specify which protocol to run at the port by appending a port with a colon and typing in the name of the network protocol. Example: 80, 443:tcp, 8080:udp . External Ports - This field accepts a comma-separated list of ports that will be externally exposed on the host machine. Privileged Mode - This flag if enabled will give the container root capabilities to all devices on the host system. Please be aware that setting this flag can be dangerous, and must only be used in exceptional situations. Environment Variables (optional) - This field accepts a comma-separated list of environment variables, which will be set inside the container when spun up. Entrypoint Override (optional) - This field accepts a comma-separated list which is used to override the command used to start a container. Example: ./test.sh,-v,-d,--human-readable . Memory (optional) - This field allows the configuration of the maximum amount of memory the container can use in bytes. The value is a positive integer, optionally followed by a suffix of b, k, m, g, to indicate bytes, kilobytes, megabytes, or gigabytes. The minimum and default values depends by the native container orchestrator. If left empty, the memory assigned to the container will be set to a default value. CPUs (optional) - This value specifies how many CPUs a container can use. Decimal values are allowed, so if set to 1.5, the container will use at most one and a half cpu resource. GPUs (optional) - This field configures how many Nvidia GPUs a container can use. Allowed values are all or an integer number. If there's no Nvidia GPU installed, leave it empty. The Nvidia Container Toolkit must be installed on the system to correctly configure the service, otherwise the container will not start. If the Nvidia Container Runtime is used, leave the field empty. Volume Mount (optional) - This field accepts a comma-separated list of system-to-container file mounts. This allows for the container to access files on the host machine. Peripheral Device (optional) - This field accepts a comma-separated list of device paths. This parameter allows devices to be passed through from the host to the container. Runtime (optional) : Specifies the fully qualified name of an alternate OCI-compatible runtime, which is used to run commands specified by the 'run' instruction. Example: nvidia corresponds to --runtime=nvidia . Note: when using the Nvidia Container Runtime, leave the GPUs field empty. The GPUs available on the system will be accessible from the container by default. Networking Mode (optional) - Use this field to specify what networking mode the container will use. Possible Drivers include: bridge, none, container:{container id}, host. Please note that this field is case-sensitive. This field can also be used to connect to any of the networks listed by the cli command docker network ls . Logger Type - This field provides a drop-down selection of supported container logging drivers. Logger Parameters (optional) - This field accepts a comma-separated list of logging parameters. More information can be found in the container-engine logger documentation, for instance here . Restart Container On Failure - A boolean that tells the container engine to automatically restart the container when it has failed or shut down. After specifying container parameters, ensure to set Enabled to true and press Apply . The container engine will then pull the respective image, spin up and start the container. If the gateway or the framework is power cycled, and the container and Container Orchestration Service are set to enabled , the framework will automatically start the container again upon startup. Stopping the container Warning Stopping a container will delete it in an irreversible way. Please be sure to only use stateless containers and/or save their data in external volumes. To stop the container without deleting the component, set the Enabled field to false , and then press Apply . This will delete the running container, but leave this component available for running the container again in the future. If you want to completely remove the container and component, press the Delete button to the top right of the screen, and press Yes on the confirmation dialogue. Container Management Dashboard The Container Orchestration service also provides the user with an intuitive container dashboard. This dashboard shows all containers running on a gateway, including containers created with the framework and those created manually through the command-line interface. To utilize this dashboard the org.eclipse.container.orchestration.provider (ContainerOrchestrationService) must be enabled, and the dashboard can be opened by navigating to Device > Containers.","title":"Container Orchestration Provider Usage"},{"location":"core-services/container-orchestration-provider-usage/#container-orchestration-provider-usage","text":"","title":"Container Orchestration Provider Usage"},{"location":"core-services/container-orchestration-provider-usage/#before-starting","text":"For this bundle to function appropriately, the gateway must have a supported container engine installed and running. Currently, the only officially supported engine is Docker.","title":"Before Starting"},{"location":"core-services/container-orchestration-provider-usage/#starting-the-service","text":"To use this service select the ContainerOrchestrationService option located in the Services area. The ContainerOrchestrationService provides the following parameters: Enabled --activates the service when set to true Container Engine Host URL --provides a string that tells the service where to find the container engine (best left to the default value).","title":"Starting the Service"},{"location":"core-services/container-orchestration-provider-usage/#creating-your-first-container","text":"To create a container, select the + icon (Create a new component) under services . A popup dialogue box will appear. In the field Factory select org.eclipse.kura.container.provider.ContainerInstance from the drop-down. Then, use the Name field to specify a name for the container. Note The name specified in the 'Name' field will also be the name of the container when it is spun up by the orchestrator. After pressing submit, a new component will be added under the services tab, with the name that was selected in the dialogue. Select this component to finish configuring the container.","title":"Creating your first container."},{"location":"core-services/container-orchestration-provider-usage/#configuring-the-container","text":"To begin configuring the container, look under Services and select the item which has the name set in the previous step. Containers may be configured using the following fields: Enabled - When true, the service will create the defined container. When false the API will not create the container or will destroy the container if already running. Image Name - Describes the image that will be used to create the container. Remember to ensure that the selected image supports the architecture of the host machine, or else the container will not be able to start. Image Tag - Describes the version of the container image that will be used to create the container. Authentication Registry URL - URL for an alternative registry to pull images from. (If the field is left blank, credentials will be applied to Docker-Hub). Please see the Authenticated Registries document for more information about connecting to different popular registries. Authentication Username - Describes the username to access the container registry entered above. Password - Describes the password to access the alternative container registry. Image Download Retries - Describes the number of retries the framework will attempt to pull the image before giving up. Image Download Retry Interval - Describes the amount of time the framework will wait before attempting to pull the image again. Image Download Timeout - Describes the amount of time the framework will let the image download before timeout. Internal Ports - This field accepts a comma-separated list of ports that will be internally exposed on the spun-up container. In this field, you can also specify which protocol to run at the port by appending a port with a colon and typing in the name of the network protocol. Example: 80, 443:tcp, 8080:udp . External Ports - This field accepts a comma-separated list of ports that will be externally exposed on the host machine. Privileged Mode - This flag if enabled will give the container root capabilities to all devices on the host system. Please be aware that setting this flag can be dangerous, and must only be used in exceptional situations. Environment Variables (optional) - This field accepts a comma-separated list of environment variables, which will be set inside the container when spun up. Entrypoint Override (optional) - This field accepts a comma-separated list which is used to override the command used to start a container. Example: ./test.sh,-v,-d,--human-readable . Memory (optional) - This field allows the configuration of the maximum amount of memory the container can use in bytes. The value is a positive integer, optionally followed by a suffix of b, k, m, g, to indicate bytes, kilobytes, megabytes, or gigabytes. The minimum and default values depends by the native container orchestrator. If left empty, the memory assigned to the container will be set to a default value. CPUs (optional) - This value specifies how many CPUs a container can use. Decimal values are allowed, so if set to 1.5, the container will use at most one and a half cpu resource. GPUs (optional) - This field configures how many Nvidia GPUs a container can use. Allowed values are all or an integer number. If there's no Nvidia GPU installed, leave it empty. The Nvidia Container Toolkit must be installed on the system to correctly configure the service, otherwise the container will not start. If the Nvidia Container Runtime is used, leave the field empty. Volume Mount (optional) - This field accepts a comma-separated list of system-to-container file mounts. This allows for the container to access files on the host machine. Peripheral Device (optional) - This field accepts a comma-separated list of device paths. This parameter allows devices to be passed through from the host to the container. Runtime (optional) : Specifies the fully qualified name of an alternate OCI-compatible runtime, which is used to run commands specified by the 'run' instruction. Example: nvidia corresponds to --runtime=nvidia . Note: when using the Nvidia Container Runtime, leave the GPUs field empty. The GPUs available on the system will be accessible from the container by default. Networking Mode (optional) - Use this field to specify what networking mode the container will use. Possible Drivers include: bridge, none, container:{container id}, host. Please note that this field is case-sensitive. This field can also be used to connect to any of the networks listed by the cli command docker network ls . Logger Type - This field provides a drop-down selection of supported container logging drivers. Logger Parameters (optional) - This field accepts a comma-separated list of logging parameters. More information can be found in the container-engine logger documentation, for instance here . Restart Container On Failure - A boolean that tells the container engine to automatically restart the container when it has failed or shut down. After specifying container parameters, ensure to set Enabled to true and press Apply . The container engine will then pull the respective image, spin up and start the container. If the gateway or the framework is power cycled, and the container and Container Orchestration Service are set to enabled , the framework will automatically start the container again upon startup.","title":"Configuring the container"},{"location":"core-services/container-orchestration-provider-usage/#stopping-the-container","text":"Warning Stopping a container will delete it in an irreversible way. Please be sure to only use stateless containers and/or save their data in external volumes. To stop the container without deleting the component, set the Enabled field to false , and then press Apply . This will delete the running container, but leave this component available for running the container again in the future. If you want to completely remove the container and component, press the Delete button to the top right of the screen, and press Yes on the confirmation dialogue.","title":"Stopping the container"},{"location":"core-services/container-orchestration-provider-usage/#container-management-dashboard","text":"The Container Orchestration service also provides the user with an intuitive container dashboard. This dashboard shows all containers running on a gateway, including containers created with the framework and those created manually through the command-line interface. To utilize this dashboard the org.eclipse.container.orchestration.provider (ContainerOrchestrationService) must be enabled, and the dashboard can be opened by navigating to Device > Containers.","title":"Container Management Dashboard"},{"location":"core-services/container-orchestration-provider/","text":"Container Orchestration Provider The Container Orchestration Provider allows Kura to manage Docker. With this tool, you can arbitrarily pull and deploy containerized software packages and run them on your gateway. This Service allows the user to create, configure, start, and stop containers all from the browser. The bundle will also restart containers if the gateway is restarted. The feature is composed of two bundles, one that exposes APIs for container management and one that implements those APIs. This API is exposed so that you can leverage it to implement containerization in your own Kura plugins.","title":"Container Orchestration Provider"},{"location":"core-services/container-orchestration-provider/#container-orchestration-provider","text":"The Container Orchestration Provider allows Kura to manage Docker. With this tool, you can arbitrarily pull and deploy containerized software packages and run them on your gateway. This Service allows the user to create, configure, start, and stop containers all from the browser. The bundle will also restart containers if the gateway is restarted. The feature is composed of two bundles, one that exposes APIs for container management and one that implements those APIs. This API is exposed so that you can leverage it to implement containerization in your own Kura plugins.","title":"Container Orchestration Provider"},{"location":"core-services/deployment-service/","text":"Deployment Service The Deployment Service allows to download files to the gateway and to perform actions on them. In the configuration tab it is possible to specify which is the directory that has to be used to store the downloaded files and the list of actions declared as deployment hooks that will be invoked when a corresponding metric is received with the download request. The configuration requires to specify two parameters: downloads.directory - The directory to be used to store the downloaded files; deployment.hook.associations - The list of DeploymentHook associations in the form <request_type>=<hook_pid> , where <hook_pid> is the Kura Service Pid of a DeploymentHook instance and <request_type> is the value of the request.type metric received with the request.","title":"Deployment Service"},{"location":"core-services/deployment-service/#deployment-service","text":"The Deployment Service allows to download files to the gateway and to perform actions on them. In the configuration tab it is possible to specify which is the directory that has to be used to store the downloaded files and the list of actions declared as deployment hooks that will be invoked when a corresponding metric is received with the download request. The configuration requires to specify two parameters: downloads.directory - The directory to be used to store the downloaded files; deployment.hook.associations - The list of DeploymentHook associations in the form <request_type>=<hook_pid> , where <hook_pid> is the Kura Service Pid of a DeploymentHook instance and <request_type> is the value of the request.type metric received with the request.","title":"Deployment Service"},{"location":"core-services/device-configuration-changes/","text":"Device Configuration Changes Kura can detect changes to the components and publish them using a selected Cloud Publisher. There are two main components that enable this: org.eclipse.kura.configuration.change.manager , and org.eclipse.kura.event.publisher The org.eclipse.kura.configuration.change.manager is responsible for detecting changes to any of the configurations currently running on the system and to publish a notification to a user-defined cloud publisher. By default, the org.eclipse.kura.event.publisher is used. Configuration Change Manager The configuration change manager allows to collection of the PIDs of the components that have changed in the system. The configurable properties of this component are: Enable : whether to enable or not this component. CloudPublisher Target Filter : allows to specify the cloud publisher to use for sending the produced messages. Notification send delay (sec) : allows to stack the changed PIDs for a given time before sending. In other words, it allows to group together sequences of PIDs that are changed in that time frame. This is to prevent message flooding at reboot or rollback. The collected PIDs are sent to the Cloud Publisher as a KuraMessage with a payload body in JSON format. The timestamp of the KuraMessage is set to the last detected configuration change event. An example of message body is: [ { \u201cpid\u201d : \u201corg.eclipse.kura.clock.ClockService\u201d }, { \u201cpid\u201d : \u201corg.eclipse.kura.log. f ilesys te m.provider.Filesys te mLogProvider\u201d } ] In the example above, a ClockService update triggered the delay timer, which was then reset by a configuration update on the FilesystemLogProvider . Afterward, no configuration updates reset the timer so the message containing the two PIDs was sent after expiration. Event Publisher By default, the org.eclipse.kura.event.publisher used by the configuration change manager does the actual publishing on a user-defined topic of the form: $EVT/#account_id/#client_id/CONF/V1/CHANGE This topic is adjusted for integration with EC, but the $EVT and the CONF/V1/CHANGE parts can be customized according to user needs by tweaking the Topic prefix and Topic properties. The #account_id and #client_id fields are substituted at runtime with the account name and client ID at the Data Transport Service layer of the associated Cloud Connection. The Qos , Retain , and Priority properties are the usual ones defined in the standard Cloud Publisher.","title":"Device Configuration Changes"},{"location":"core-services/device-configuration-changes/#device-configuration-changes","text":"Kura can detect changes to the components and publish them using a selected Cloud Publisher. There are two main components that enable this: org.eclipse.kura.configuration.change.manager , and org.eclipse.kura.event.publisher The org.eclipse.kura.configuration.change.manager is responsible for detecting changes to any of the configurations currently running on the system and to publish a notification to a user-defined cloud publisher. By default, the org.eclipse.kura.event.publisher is used.","title":"Device Configuration Changes"},{"location":"core-services/device-configuration-changes/#configuration-change-manager","text":"The configuration change manager allows to collection of the PIDs of the components that have changed in the system. The configurable properties of this component are: Enable : whether to enable or not this component. CloudPublisher Target Filter : allows to specify the cloud publisher to use for sending the produced messages. Notification send delay (sec) : allows to stack the changed PIDs for a given time before sending. In other words, it allows to group together sequences of PIDs that are changed in that time frame. This is to prevent message flooding at reboot or rollback. The collected PIDs are sent to the Cloud Publisher as a KuraMessage with a payload body in JSON format. The timestamp of the KuraMessage is set to the last detected configuration change event. An example of message body is: [ { \u201cpid\u201d : \u201corg.eclipse.kura.clock.ClockService\u201d }, { \u201cpid\u201d : \u201corg.eclipse.kura.log. f ilesys te m.provider.Filesys te mLogProvider\u201d } ] In the example above, a ClockService update triggered the delay timer, which was then reset by a configuration update on the FilesystemLogProvider . Afterward, no configuration updates reset the timer so the message containing the two PIDs was sent after expiration.","title":"Configuration Change Manager"},{"location":"core-services/device-configuration-changes/#event-publisher","text":"By default, the org.eclipse.kura.event.publisher used by the configuration change manager does the actual publishing on a user-defined topic of the form: $EVT/#account_id/#client_id/CONF/V1/CHANGE This topic is adjusted for integration with EC, but the $EVT and the CONF/V1/CHANGE parts can be customized according to user needs by tweaking the Topic prefix and Topic properties. The #account_id and #client_id fields are substituted at runtime with the account name and client ID at the Data Transport Service layer of the associated Cloud Connection. The Qos , Retain , and Priority properties are the usual ones defined in the standard Cloud Publisher.","title":"Event Publisher"},{"location":"core-services/h2db-service/","text":"H2Db Service Kura integrates a Java SQL database named H2 . The main features of this SQL Database are: Very fast, open source, JDBC API Embedded and server modes; in-memory databases Browser-based Console application Small footprint Supported Features Kura supports the following H2 database features: Persistence modes : The H2 implementation currently supports in-memory and file-based database instances. See the Persistence Modes section for more details. Multiple database instances : It is possible to create and configure multiple database instances from the Kura Administration UI, these instances can be selectively consumed by applications. A default database instance is created automatically. TCP Server : The current implementation allows external processes to access the database instances managed by Kura using TCP. This enables the integration of external applications that can share data with Kura components using the database. Web-based console : It is possible to start the H2 Web console directly from the Kura Administration UI. The console can be used to inspect the database contents and perform arbitrary queries for debug purposes. Basic credential management : The current implementation allows to change the password of the admin DB user from the Kura Administration UI. This allows the access restriction to the existing database instances. By default, the DataService in Kura uses the H2 database to persist the messages. Limitations Private in-memory instances : Only named in-memory instances are supported (e.g. jdbc:h2:mem:<dbname> , where <dbname> is not the empty string), private instances represented by the jdbc:h2:mem: URL are currently not supported. Remote connections : The current implementation only supports embedded database instances. Connecting to remote instances using the jdbc:h2:tcp:* and jdbc:h2:ssl:* connector URLs is not supported. Note The new DbWireRecordFilter and DbWireRecordStore Wire components have been added. These components provide the same functionalities offered by the old H2DbWireRecordFilter and H2DbWireRecordStore components, but they can be used for connectiong to a generic relational database (i.e. H2DB, MySQL or MariaDB). The legacy components will continue to be available in order to keep backward compatibility, but will be deprecated since Kura 5.2.0 and should not be used for new installations. Usage Creating a new H2 database instance To create a new H2 database instance, use the following procedure: Open the Administrative UI and press the + button in the side menu, under the Services section. A pop-up dialog should appear. Select org.eclipse.kura.core.db.H2DbService from the Factory drop-down list, enter an arbitrary name for the new instance and click Apply . An entry for the newly created instance should appear in the side menu under Services , click on it to review its configuration. It is not possible to create different DB instances that manage the same DB URL. When creating a new instance please make sure that the URL specified in the field db.connector.url is not managed by another instance. Configuration Parameters The H2DbService provides the following configuration parameters: Connector URL : JDBC connector URL of the database instance. Passing the USER and PASSWORD parameters in the connector URL is not supported, these paramters will be ignored if present. Please use the db.user and db.password fields to provide the credentials. Warning If the database is created in persisted mode, please make sure that the Linux user running Eclipse Kura has the permissions required to create the database file. If the permissions are not ok, Eclipse Kura may be able to create the database (by default it runs with the CAP_DAC_OVERRIDE capability) but it may not be able to perform the periodic defragmentation process, this may cause the database file size to grow expecially if the write rate is high. Executing the following commands as root can be useful to detect potential issues, replace database_parent_directory with the parent directory of the database file and kura_linux_user with the Linux user that is executing Eclipse Kura (e.g. kurad): export TARGET=\"$(readlink -f database_parent_directory)\" export KURA_USER=\"kura_linux_user\" sudo -u \"${KURA_USER}\" sh -c \"touch '${TARGET}/.testfile' && rm '${TARGET}/.testfile'\" If command fails it may be necessary to change the database directory or adjust the permissions. User : Specifies the user for the database connection. Furthermore Password : Specifies the password. The default password is the empty string. Checkpoint interval (seconds) : H2DbService instances support running periodic checkpoints to ensure data consistency. This parameter specifies the interval in seconds between two successive checkpoints. This setting has no effect for in-memory database instances. Defrag interval (minutes) : H2DbService instances support running periodic defragmentation (compaction). This parameter specifies the interval in minutes between two successive checkpoints, set to zero to disable. This setting has no effect for in-memory database instances. Existing database connections will be closed during the defragmentation process and need to be reopened by the applications. Connection pool max size : The H2DbService manages connections using a connection pool. This parameter defines the maximum number of connections for the pool Selecting a database instance for existing components A database instance is identified by its Kura service PID . The PID for the default instance is org.eclipse.kura.db.H2DbService while the PID for instances created using the Web UI is the string entered in the Name field at step 2 of the previous section. The built-in components that use database functionalities allow to specify which instance to use in their configuration. These components are the DataService component of the cloud stack, the DbWireRecordFilter and DbWireRecordStore wire components. The configuration of each component contains a property that allows to specify the service PID of the desired instance. Usage through Wires It is possible to store and extract Wire Records into/from a H2 database instance using the Wire Record Store and Wire Record Query wire components. When a Wire Record is received by a Wire Record Store attached to a H2 based database instance, the data will be stored in a table whose name is the current value of the Record Collection Name configuration parameter of the Wire Component. Each property contained in a Wire Record will be appended to a column with the same name as the property key. A new column will be created if it doesn't already exists. Note Storing wire record properties with the FLOAT data type using the Wire Record Store is not recommended since the type information will be lost. Values inserted as FLOAT using the Wire Record Store will be retrieved as DOUBLE using the Wire Record Query component. Warning It is not recommended to store Wire Records having properties with the same key and different value type. If the value type changes, the target column will be dropped and recreated with the type derived from the last received record. All existing data in the target column will be lost. The purpose of this is to allow changing the type of a column with a Wire Graph configuration update. Enabling the TCP Server Danger This feature is intended to be used only for debugging/development purposes . The server created by H2 is not running on a secure protocol . Only enable the server for a limited time and make sure to properly secure the firewall ports on which it is running. The TCP server can be used by creating a H2DbServer instance: Open the Web UI and press the + button in the side menu, under the Services section. A pop-up dialog should appear. Select org.eclipse.kura.core.db.H2DbServer from the Factory drop-down\u200b list, enter an arbitrary name for the new instance and click Apply. Clicking on the name of the new server instance on the left side of the Web UI\u200b. The configuration of the server component will appear. Set the db.server.type field to TCP . Review the server options under db.server.commandline , check the official documentation for more information about the available options. Set the db.server.enabled to true . The server, with the default configuration, will be listening on port 9123. Tip Make sure to review the firewall configuration in order to ensure that the server is reachable from an external process. Enabling the Web Console Danger This feature is intended to be used only for debugging/development purposes . The server created by H2 is not running on a secure protocol . Only enable the server for a limited time and make sure to properly secure the firewall ports on which it is running. In order to enable the H2 Web console, proceed as follows: Create a new H2DbServer instance. Set the db.server.type field to WEB . Enter appropriate parameters for the Web server in the db.server.commandline field. An example of valid settings can be: -webPort 9123 -webAllowOthers -ifExists -webExternalNames <device-ip> . Set the db.server.enabled to true . The server is now listening on the specified port. Tip Make sure to review the firewall configuration in order to ensure that the server is reachable from an external process. Use a browser to access the console. Open the http:// : URL, where is the IP address of the gateway and is the port specified at step 3. Enter the DB URL as specified in the Kura configuration in the JDBC URL field and the credentials. Click on Connect , you should be able to access the console. Change the Database Password To change the database password the System Administrator needs to: Open the configuration of the desired database instance in the Web UI. Enter the new password in the db.password field. Click Apply . Warn If the H2DbServer instance fails to open a database, it will delete and recreate all database files. This behavior\u200b is aimed at preventing potential issues caused by incorrect credentials in the configuration snapshots. It is highly recommended to perform a backup of an existing database before trying to open it using a H2DbService instance and before changing the password. Persistence Modes The H2 database supports several persistence modes. In Memory An in-memory database instance can be created using the following URL structure: jdbc:h2:mem: , where is a non-empty string that represents the database name. This configuration is suggested for database instances that are frequently updated. Examples: jdbc:h2:mem:kuradb jdbc:h2:mem:mydb The default database instance is in-memory by default and uses the jdbc:h2:mem:kuradb URL. Persistent A persistent database instance can be created using the jdbc:h2:file: , where is a non-empty string that represents the database path. If no URL parameters are supplied the database will enable the transaction log by default. The transaction log is used to restore the database to a consistent state after a crash or power failure. This provides good protection against data losses but causes a lot of writes to the storage device, reducing both performance and the lifetime of flash-based storage devices. Examples: - jdbc:h2:file:/opt/db/mydb Make sure to use absolute paths in the DB URL since H2 does not support DB paths relative to the working directory.","title":"H2Db Service"},{"location":"core-services/h2db-service/#h2db-service","text":"Kura integrates a Java SQL database named H2 . The main features of this SQL Database are: Very fast, open source, JDBC API Embedded and server modes; in-memory databases Browser-based Console application Small footprint","title":"H2Db Service"},{"location":"core-services/h2db-service/#supported-features","text":"Kura supports the following H2 database features: Persistence modes : The H2 implementation currently supports in-memory and file-based database instances. See the Persistence Modes section for more details. Multiple database instances : It is possible to create and configure multiple database instances from the Kura Administration UI, these instances can be selectively consumed by applications. A default database instance is created automatically. TCP Server : The current implementation allows external processes to access the database instances managed by Kura using TCP. This enables the integration of external applications that can share data with Kura components using the database. Web-based console : It is possible to start the H2 Web console directly from the Kura Administration UI. The console can be used to inspect the database contents and perform arbitrary queries for debug purposes. Basic credential management : The current implementation allows to change the password of the admin DB user from the Kura Administration UI. This allows the access restriction to the existing database instances. By default, the DataService in Kura uses the H2 database to persist the messages.","title":"Supported Features"},{"location":"core-services/h2db-service/#limitations","text":"Private in-memory instances : Only named in-memory instances are supported (e.g. jdbc:h2:mem:<dbname> , where <dbname> is not the empty string), private instances represented by the jdbc:h2:mem: URL are currently not supported. Remote connections : The current implementation only supports embedded database instances. Connecting to remote instances using the jdbc:h2:tcp:* and jdbc:h2:ssl:* connector URLs is not supported. Note The new DbWireRecordFilter and DbWireRecordStore Wire components have been added. These components provide the same functionalities offered by the old H2DbWireRecordFilter and H2DbWireRecordStore components, but they can be used for connectiong to a generic relational database (i.e. H2DB, MySQL or MariaDB). The legacy components will continue to be available in order to keep backward compatibility, but will be deprecated since Kura 5.2.0 and should not be used for new installations.","title":"Limitations"},{"location":"core-services/h2db-service/#usage","text":"","title":"Usage"},{"location":"core-services/h2db-service/#creating-a-new-h2-database-instance","text":"To create a new H2 database instance, use the following procedure: Open the Administrative UI and press the + button in the side menu, under the Services section. A pop-up dialog should appear. Select org.eclipse.kura.core.db.H2DbService from the Factory drop-down list, enter an arbitrary name for the new instance and click Apply . An entry for the newly created instance should appear in the side menu under Services , click on it to review its configuration. It is not possible to create different DB instances that manage the same DB URL. When creating a new instance please make sure that the URL specified in the field db.connector.url is not managed by another instance.","title":"Creating a new H2 database instance"},{"location":"core-services/h2db-service/#configuration-parameters","text":"The H2DbService provides the following configuration parameters: Connector URL : JDBC connector URL of the database instance. Passing the USER and PASSWORD parameters in the connector URL is not supported, these paramters will be ignored if present. Please use the db.user and db.password fields to provide the credentials. Warning If the database is created in persisted mode, please make sure that the Linux user running Eclipse Kura has the permissions required to create the database file. If the permissions are not ok, Eclipse Kura may be able to create the database (by default it runs with the CAP_DAC_OVERRIDE capability) but it may not be able to perform the periodic defragmentation process, this may cause the database file size to grow expecially if the write rate is high. Executing the following commands as root can be useful to detect potential issues, replace database_parent_directory with the parent directory of the database file and kura_linux_user with the Linux user that is executing Eclipse Kura (e.g. kurad): export TARGET=\"$(readlink -f database_parent_directory)\" export KURA_USER=\"kura_linux_user\" sudo -u \"${KURA_USER}\" sh -c \"touch '${TARGET}/.testfile' && rm '${TARGET}/.testfile'\" If command fails it may be necessary to change the database directory or adjust the permissions. User : Specifies the user for the database connection. Furthermore Password : Specifies the password. The default password is the empty string. Checkpoint interval (seconds) : H2DbService instances support running periodic checkpoints to ensure data consistency. This parameter specifies the interval in seconds between two successive checkpoints. This setting has no effect for in-memory database instances. Defrag interval (minutes) : H2DbService instances support running periodic defragmentation (compaction). This parameter specifies the interval in minutes between two successive checkpoints, set to zero to disable. This setting has no effect for in-memory database instances. Existing database connections will be closed during the defragmentation process and need to be reopened by the applications. Connection pool max size : The H2DbService manages connections using a connection pool. This parameter defines the maximum number of connections for the pool","title":"Configuration Parameters"},{"location":"core-services/h2db-service/#selecting-a-database-instance-for-existing-components","text":"A database instance is identified by its Kura service PID . The PID for the default instance is org.eclipse.kura.db.H2DbService while the PID for instances created using the Web UI is the string entered in the Name field at step 2 of the previous section. The built-in components that use database functionalities allow to specify which instance to use in their configuration. These components are the DataService component of the cloud stack, the DbWireRecordFilter and DbWireRecordStore wire components. The configuration of each component contains a property that allows to specify the service PID of the desired instance.","title":"Selecting a database instance for existing components"},{"location":"core-services/h2db-service/#usage-through-wires","text":"It is possible to store and extract Wire Records into/from a H2 database instance using the Wire Record Store and Wire Record Query wire components. When a Wire Record is received by a Wire Record Store attached to a H2 based database instance, the data will be stored in a table whose name is the current value of the Record Collection Name configuration parameter of the Wire Component. Each property contained in a Wire Record will be appended to a column with the same name as the property key. A new column will be created if it doesn't already exists. Note Storing wire record properties with the FLOAT data type using the Wire Record Store is not recommended since the type information will be lost. Values inserted as FLOAT using the Wire Record Store will be retrieved as DOUBLE using the Wire Record Query component. Warning It is not recommended to store Wire Records having properties with the same key and different value type. If the value type changes, the target column will be dropped and recreated with the type derived from the last received record. All existing data in the target column will be lost. The purpose of this is to allow changing the type of a column with a Wire Graph configuration update.","title":"Usage through Wires"},{"location":"core-services/h2db-service/#enabling-the-tcp-server","text":"Danger This feature is intended to be used only for debugging/development purposes . The server created by H2 is not running on a secure protocol . Only enable the server for a limited time and make sure to properly secure the firewall ports on which it is running. The TCP server can be used by creating a H2DbServer instance: Open the Web UI and press the + button in the side menu, under the Services section. A pop-up dialog should appear. Select org.eclipse.kura.core.db.H2DbServer from the Factory drop-down\u200b list, enter an arbitrary name for the new instance and click Apply. Clicking on the name of the new server instance on the left side of the Web UI\u200b. The configuration of the server component will appear. Set the db.server.type field to TCP . Review the server options under db.server.commandline , check the official documentation for more information about the available options. Set the db.server.enabled to true . The server, with the default configuration, will be listening on port 9123. Tip Make sure to review the firewall configuration in order to ensure that the server is reachable from an external process.","title":"Enabling the TCP Server"},{"location":"core-services/h2db-service/#enabling-the-web-console","text":"Danger This feature is intended to be used only for debugging/development purposes . The server created by H2 is not running on a secure protocol . Only enable the server for a limited time and make sure to properly secure the firewall ports on which it is running. In order to enable the H2 Web console, proceed as follows: Create a new H2DbServer instance. Set the db.server.type field to WEB . Enter appropriate parameters for the Web server in the db.server.commandline field. An example of valid settings can be: -webPort 9123 -webAllowOthers -ifExists -webExternalNames <device-ip> . Set the db.server.enabled to true . The server is now listening on the specified port. Tip Make sure to review the firewall configuration in order to ensure that the server is reachable from an external process. Use a browser to access the console. Open the http:// : URL, where is the IP address of the gateway and is the port specified at step 3. Enter the DB URL as specified in the Kura configuration in the JDBC URL field and the credentials. Click on Connect , you should be able to access the console.","title":"Enabling the Web Console"},{"location":"core-services/h2db-service/#change-the-database-password","text":"To change the database password the System Administrator needs to: Open the configuration of the desired database instance in the Web UI. Enter the new password in the db.password field. Click Apply . Warn If the H2DbServer instance fails to open a database, it will delete and recreate all database files. This behavior\u200b is aimed at preventing potential issues caused by incorrect credentials in the configuration snapshots. It is highly recommended to perform a backup of an existing database before trying to open it using a H2DbService instance and before changing the password.","title":"Change the Database Password"},{"location":"core-services/h2db-service/#persistence-modes","text":"The H2 database supports several persistence modes.","title":"Persistence Modes"},{"location":"core-services/h2db-service/#in-memory","text":"An in-memory database instance can be created using the following URL structure: jdbc:h2:mem: , where is a non-empty string that represents the database name. This configuration is suggested for database instances that are frequently updated. Examples: jdbc:h2:mem:kuradb jdbc:h2:mem:mydb The default database instance is in-memory by default and uses the jdbc:h2:mem:kuradb URL.","title":"In Memory"},{"location":"core-services/h2db-service/#persistent","text":"A persistent database instance can be created using the jdbc:h2:file: , where is a non-empty string that represents the database path. If no URL parameters are supplied the database will enable the transaction log by default. The transaction log is used to restore the database to a consistent state after a crash or power failure. This provides good protection against data losses but causes a lot of writes to the storage device, reducing both performance and the lifetime of flash-based storage devices. Examples: - jdbc:h2:file:/opt/db/mydb Make sure to use absolute paths in the DB URL since H2 does not support DB paths relative to the working directory.","title":"Persistent"},{"location":"core-services/introduction/","text":"Introduction This section describes the administrative tools available using the Gateway Administration Console . This web interface provides the ability to configure all services and applications that are installed and running on the gateway.","title":"Introduction"},{"location":"core-services/introduction/#introduction","text":"This section describes the administrative tools available using the Gateway Administration Console . This web interface provides the ability to configure all services and applications that are installed and running on the gateway.","title":"Introduction"},{"location":"core-services/network-status-rest-v1/","text":"Network Status Service V1 REST APIs and MQTT Request Handler The NET-STATUS-V1 cloud request handler and the corresponding REST APIs allow to retrieve the current status of the network interfaces available on the system. This cloud request handler and rest API is available only on the systems that provide a NetworkStatusService implementation, at the moment this corresponds to the devices that include the NetworkManager integration. Accessing the REST APIs requires to use an identity with the rest.network.status permission assigned. Request definitions GET/interfaceIds GET/status POST/status/byInterfaceId JSON definitions InterfaceIds InterfaceStatusList LoopbackInterfaceStatus EthernetInterfaceStatus WifiInterfaceStatus ModemInterfaceStatus NetworkInterfaceStatus IPAddressString HardwareAddress NetworkInterfaceIpAddress NetworkInterfaceIpAddressStatus WifiChannel WifiAccessPoint ModemModePair Sim Bearer ModemPorts NetworkInterfaceType NetworkInterfaceState WifiCapability WifiMode WifiSecurity ModemPortType ModemCapability ModemMode ModemBand SimType ESimStatus BearerIpType ModemConnectionType ModemConnectionStatus AccessTechnology RegistrationStatus FailureReport GenericFailureReport Request definitions GET/interfaceIds REST API path : /services/networkStatus/v1/interfaceIds description : Returns the identifiers of the network interfaces detected in the system. For Ethernet and WiFi interfaces, the identifier is typically the interface name. For the modems, instead, it is the usb or pci path. responses : 200 description : The list of the identifiers of the network interfaces detected in the system. response body : InterfaceIds 500 description : If an unexpected failure occurs while retrieving the interface list. response body : GenericFailureReport GET/status REST API path : /services/networkStatus/v1/status description : Returns the status for all interfaces currently available on the system. Failures in retrieving the status of specific interfaces will be reported using the failures field of the response. responses : 200 description : The status of the network interfaces in the system. response body : InterfaceStatusList 500 description : If an unexpected failure occurs while retrieving the interface list. response body : GenericFailureReport POST/status/byInterfaceId REST API path : /services/networkStatus/v1/status/byInterfaceId description : Returns the status for the network interfaces whose id is specified in the request. Failures in retrieving the status of specific interfaces, or the fact that an interface with the requested id cannot be found will be reported using the failures field of the responses. request body : InterfaceIds responses : 200 description : The status of the network interfaces in the system. response body : InterfaceStatusList 400 description : If the request object does not contain the interfaceIds field, it is null or if it contains empty or null interface ids. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the interface list. response body : GenericFailureReport JSON definitions InterfaceIds An object containing a list of network interface identifiers Properties : interfaceIds : array The list of network interface identifiers array element type: string An interface identifier { \"interfaceIds\" : [ \"lo\" ] } InterfaceStatusList An object reporting a list of network interface status. If a failure occurs retrieving the status for a specific interface, the reason will be reported in the failures list. Properties : interfaces : array A list of network interface status array element type: variant Variants : object LoopbackInterfaceStatus object EthernetInterfaceStatus object WifiInterfaceStatus object ModemInterfaceStatus failures : array array element type: object FailureReport { \"failures\" : [], \"interfaces\" : [ { \"autoConnect\" : true , \"driver\" : \"unknown\" , \"driverVersion\" : \"\" , \"firmwareVersion\" : \"\" , \"hardwareAddress\" : \"00:00:00:00:00:00\" , \"id\" : \"lo\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"127.0.0.1\" , \"prefix\" : 8 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"lo\" , \"mtu\" : 65536 , \"state\" : \"UNMANAGED\" , \"type\" : \"LOOPBACK\" , \"virtual\" : true } ] } { \"failures\" : [ { \"interfaceId\" : \"foo\" , \"reason\" : \"Not found.\" } ], \"interfaces\" : [] } LoopbackInterfaceStatus Object that contains specific properties to describe the status of an Loopback interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : { \"autoConnect\" : true , \"driver\" : \"unknown\" , \"driverVersion\" : \"\" , \"firmwareVersion\" : \"\" , \"hardwareAddress\" : \"00:00:00:00:00:00\" , \"id\" : \"lo\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"127.0.0.1\" , \"prefix\" : 8 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"lo\" , \"mtu\" : 65536 , \"state\" : \"UNMANAGED\" , \"type\" : \"LOOPBACK\" , \"virtual\" : true } EthernetInterfaceStatus Object that contains specific properties to describe the status of an Ethernet interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : linkUp : bool { \"autoConnect\" : true , \"driver\" : \"igb\" , \"driverVersion\" : \"5.6.0-k\" , \"firmwareVersion\" : \"3.25, 0x800005d0\" , \"hardwareAddress\" : \"00:E0:C7:0A:5F:89\" , \"id\" : \"eno1\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"172.16.0.1\" , \"prefix\" : 24 } ], \"dnsServerAddresses\" : [], \"gateway\" : \"0.0.0.0\" }, \"interfaceName\" : \"eno1\" , \"linkUp\" : true , \"mtu\" : 1500 , \"state\" : \"ACTIVATED\" , \"type\" : \"ETHERNET\" , \"virtual\" : false } WifiInterfaceStatus Object that contains specific properties to describe the status of a WiFi interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : capabilities : array array element type: string (enumerated) WifiCapability channels : array array element type: object WifiChannel countryCode : string mode : string (enumerated) WifiMode activeWifiAccessPoint : object ( optional ) WifiAccessPoint availableWifiAccessPoints : array array element type: object WifiAccessPoint { \"activeWifiAccessPoint\" : { \"channel\" : { \"channel\" : 11 , \"frequency\" : 2462 }, \"hardwareAddress\" : \"11:22:33:44:55:66\" , \"maxBitrate\" : 130000 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 100 , \"signalStrength\" : -20 , \"ssid\" : \"MyAccessPoint\" , \"wpaSecurity\" : [ \"NONE\" ] }, \"autoConnect\" : true , \"availableWifiAccessPoints\" : [ { \"channel\" : { \"channel\" : 11 , \"frequency\" : 2462 }, \"hardwareAddress\" : \"11:22:33:44:55:66\" , \"maxBitrate\" : 130000 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 100 , \"signalStrength\" : -20 , \"ssid\" : \"MyAccessPoint\" , \"wpaSecurity\" : [ \"NONE\" ] }, { \"channel\" : { \"channel\" : 5 , \"frequency\" : 2432 }, \"hardwareAddress\" : \"22:33:44:55:66:77\" , \"maxBitrate\" : 270000 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 42 , \"signalStrength\" : -69 , \"ssid\" : \"OtherSSID\" , \"wpaSecurity\" : [ \"NONE\" ] } ], \"capabilities\" : [ \"CIPHER_WEP40\" , \"WPA\" , \"AP\" , \"FREQ_VALID\" , \"ADHOC\" , \"RSN\" , \"CIPHER_TKIP\" , \"CIPHER_WEP104\" , \"CIPHER_CCMP\" , \"FREQ_2GHZ\" ], \"channels\" : [ { \"attenuation\" : 20.0 , \"channel\" : 1 , \"disabled\" : false , \"frequency\" : 2412 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false }, { \"attenuation\" : 20.0 , \"channel\" : 2 , \"disabled\" : false , \"frequency\" : 2417 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false } ], \"countryCode\" : \"IT\" , \"driver\" : \"brcmfmac\" , \"driverVersion\" : \"7.45.98.94\" , \"firmwareVersion\" : \"01-3b33decd\" , \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"id\" : \"wlan0\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"192.168.0.113\" , \"prefix\" : 24 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"wlan0\" , \"mode\" : \"INFRA\" , \"mtu\" : 1500 , \"state\" : \"ACTIVATED\" , \"type\" : \"WIFI\" , \"virtual\" : false } { \"activeWifiAccessPoint\" : { \"channel\" : { \"channel\" : 1 , \"frequency\" : 2412 }, \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"maxBitrate\" : 0 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 0 , \"signalStrength\" : -104 , \"ssid\" : \"kura_gateway_raspberry_pi\" , \"wpaSecurity\" : [ \"NONE\" ] }, \"autoConnect\" : true , \"availableWifiAccessPoints\" : [ { \"channel\" : { \"channel\" : 1 , \"frequency\" : 2412 }, \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"maxBitrate\" : 0 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 0 , \"signalStrength\" : -104 , \"ssid\" : \"kura_gateway_raspberry_pi\" , \"wpaSecurity\" : [ \"NONE\" ] } ], \"capabilities\" : [ \"CIPHER_WEP40\" , \"WPA\" , \"AP\" , \"FREQ_VALID\" , \"ADHOC\" , \"RSN\" , \"CIPHER_TKIP\" , \"CIPHER_WEP104\" , \"CIPHER_CCMP\" , \"FREQ_2GHZ\" ], \"channels\" : [ { \"attenuation\" : 20.0 , \"channel\" : 1 , \"disabled\" : false , \"frequency\" : 2412 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false }, { \"attenuation\" : 20.0 , \"channel\" : 2 , \"disabled\" : false , \"frequency\" : 2417 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false } ], \"countryCode\" : \"00\" , \"driver\" : \"brcmfmac\" , \"driverVersion\" : \"7.45.98.94\" , \"firmwareVersion\" : \"01-3b33decd\" , \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"id\" : \"wlan0\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"172.16.1.1\" , \"prefix\" : 24 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"wlan0\" , \"mode\" : \"MASTER\" , \"mtu\" : 1500 , \"state\" : \"ACTIVATED\" , \"type\" : \"WIFI\" , \"virtual\" : false } ModemInterfaceStatus Object that contains specific properties to describe the status of a Modem interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : model : string manufacturer : string serialNumber : string softwareRevision : string hardwareRevision : string primaryPort : string ports : object ModemPorts supportedModemCapabilities : array array element type: string (enumerated) ModemCapability currentModemCapabilities : array array element type: string (enumerated) ModemCapability powerState : string (enumerated) ModemPowerState supportedModes : array array element type: object ModemModePair currentModes : object ModemModePair supportedBands : array array element type: string (enumerated) ModemBand currentBands : array array element type: string (enumerated) ModemBand gpsSupported : bool availableSims : array array element type: object Sim simLocked : bool bearers : array array element type: object Bearer connectionType : string (enumerated) ModemConnectionType connectionStatus : string (enumerated) ModemConnectionStatus accessTechnologies : array array element type: string (enumerated) AccessTechnology signalQuality : number signalStrength : number registrationStatus : string (enumerated) RegistrationStatus operatorName : string { \"accessTechnologies\" : [ \"LTE\" ], \"autoConnect\" : true , \"availableSims\" : [ { \"active\" : true , \"primary\" : true , \"eSimStatus\" : \"UNKNOWN\" , \"eid\" : \"\" , \"iccid\" : \"1111111111111111111\" , \"imsi\" : \"111111111111111\" , \"operatorName\" : \"MyOperator\" , \"simType\" : \"PHYSICAL\" } ], \"bearers\" : [ { \"apn\" : \"apn.myoperator.com\" , \"bytesReceived\" : 0 , \"bytesTransmitted\" : 0 , \"connected\" : true , \"ipTypes\" : [ \"IPV4\" ], \"name\" : \"wwp11s0f2u3i4\" } ], \"connectionStatus\" : \"CONNECTED\" , \"connectionType\" : \"DirectIP\" , \"currentBands\" : [ \"DCS\" , \"EUTRAN_3\" , \"EUTRAN_19\" , \"EUTRAN_40\" , \"EUTRAN_26\" , \"EUTRAN_28\" , \"EUTRAN_41\" , \"UTRAN_6\" , \"EUTRAN_13\" , \"EUTRAN_25\" , \"EUTRAN_5\" , \"EUTRAN_7\" , \"EUTRAN_8\" , \"UTRAN_2\" , \"EUTRAN_38\" , \"UTRAN_1\" , \"EUTRAN_12\" , \"UTRAN_8\" , \"EUTRAN_18\" , \"UTRAN_19\" , \"G850\" , \"EUTRAN_20\" , \"UTRAN_5\" , \"EUTRAN_1\" , \"EUTRAN_39\" , \"EUTRAN_2\" , \"EUTRAN_4\" , \"EGSM\" , \"PCS\" , \"UTRAN_4\" ], \"currentModemCapabilities\" : [ \"GSM_UMTS\" , \"LTE\" ], \"currentModes\" : { \"modes\" : [ \"MODE_2G\" , \"MODE_3G\" , \"MODE_4G\" ], \"preferredMode\" : \"MODE_4G\" }, \"driver\" : \"qmi_wwan, option1\" , \"driverVersion\" : \"\" , \"firmwareVersion\" : \"\" , \"gpsSupported\" : true , \"hardwareAddress\" : \"00:00:00:00:00:00\" , \"hardwareRevision\" : \"10000\" , \"id\" : \"1-3\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"1.2.3.4\" , \"prefix\" : 30 } ], \"dnsServerAddresses\" : [ \"1.2.3.6\" , \"1.2.3.7\" ], \"gateway\" : \"1.2.3.5\" }, \"interfaceName\" : \"wwp11s0f2u3i4\" , \"manufacturer\" : \"QUALCOMM INCORPORATED\" , \"model\" : \"QUECTEL Mobile Broadband Module\" , \"mtu\" : 1500 , \"operatorName\" : \"MyOperator\" , \"ports\" : { \"cdc-wdm0\" : \"QMI\" , \"ttyUSB0\" : \"QCDM\" , \"ttyUSB1\" : \"GPS\" , \"ttyUSB2\" : \"AT\" , \"ttyUSB3\" : \"AT\" , \"wwp11s0f2u3i4\" : \"NET\" }, \"powerState\" : \"ON\" , \"primaryPort\" : \"cdc-wdm0\" , \"registrationStatus\" : \"HOME\" , \"serialNumber\" : \"111111111111111\" , \"signalQuality\" : 55 , \"signalStrength\" : -80 , \"simLocked\" : true , \"softwareRevision\" : \"EG25GGBR07A08M2G\" , \"state\" : \"ACTIVATED\" , \"supportedBands\" : [ \"DCS\" , \"EUTRAN_3\" , \"EUTRAN_19\" , \"EUTRAN_40\" , \"EUTRAN_26\" , \"EUTRAN_28\" , \"EUTRAN_41\" , \"UTRAN_6\" , \"EUTRAN_13\" , \"EUTRAN_25\" , \"EUTRAN_5\" , \"EUTRAN_7\" , \"EUTRAN_8\" , \"UTRAN_2\" , \"EUTRAN_38\" , \"UTRAN_1\" , \"EUTRAN_12\" , \"UTRAN_8\" , \"EUTRAN_18\" , \"UTRAN_19\" , \"G850\" , \"EUTRAN_20\" , \"UTRAN_5\" , \"EUTRAN_1\" , \"EUTRAN_39\" , \"EUTRAN_2\" , \"EUTRAN_4\" , \"EGSM\" , \"PCS\" , \"UTRAN_4\" ], \"supportedModemCapabilities\" : [ \"NONE\" ], \"supportedModes\" : [ { \"modes\" : [ \"MODE_4G\" ], \"preferredMode\" : \"NONE\" }, { \"modes\" : [ \"MODE_2G\" , \"MODE_3G\" , \"MODE_4G\" ], \"preferredMode\" : \"MODE_4G\" } ], \"type\" : \"MODEM\" , \"virtual\" : false } NetworkInterfaceStatus This object contains the common properties contained by the status object reported for a network interface. A network interface is identified by Kura using the id field. It is used to internally manage the interface. The interfaceName, instead, is the IP interface as it may appear on the system. For Ethernet and WiFi interfaces the two values coincide (i.e. eth0, wlp1s0, ...). For modems, instead, the id is typically the usb or pci path, while the interfaceName is the IP interface created when they are connected. When the modem is disconnected the interfaceName can have a different value. Properties : id : string interfaceName : string hardwareAddress : string HardwareAddress driver : string driverVersion : string firmwareVersion : string virtual : bool state : string (enumerated) NetworkInterfaceState autoConnect : bool mtu : number interfaceIp4Addresses : array ( optional ) array element type: object NetworkInterfaceIpAddressStatus interfaceIp6Addresses : array ( optional ) array element type: object NetworkInterfaceIpAddressStatus IPAddressString Represents an IPv4 or IPv6 addresses as a string. HardwareAddress Represents an hardware address as its bytes reported as two characters hexadecimal strings separated by the ':' character. e.g. 00:11:22:33:A4:FC:BB. NetworkInterfaceIpAddress This object describes an IP address with its prefix. It can be used for IPv4 or IPv6 addresses. Properties : address : string IPAddressString prefix : number NetworkInterfaceIpAddressStatus This class describes the IP address status of a network interface: a list of IP addresses, an optional gateway and a list of DNS servers address. It can be used for IPv4 or IPv6 addresses. Properties : addresses : array array element type: object NetworkInterfaceIpAddress gateway : string ( optional This field can be missing if the interface has no gateway.) IPAddressString dnsServerAddresses : array array element type: string IPAddressString WifiChannel This class represent a WiFi channel, providing the channel number, frequency, status and other useful information. Properties : channel : number frequency : number disabled : bool ( optional ) attenuation : number ( optional ) noInitiatingRadiation : bool ( optional ) radarDetection : bool ( optional ) WifiAccessPoint This object describes a Wifi Access Point. It can be used both for describing a detected AP after a WiFi scan when in Station mode and the provided AP when in Master (or Access Point) mode. Properties : ssid : string The Service Set IDentifier of the WiFi network hardwareAddress : string HardwareAddress channel : object WifiChannel mode : string (enumerated) WifiMode maxBitrate : number The maximum bitrate this access point is capable of. signalQuality : number The current signal quality of the access point in percentage. signalStrength : number The current signal strength of the access point in dBm. wpaSecurity : array The WPA capabilities of the access point array element type: string (enumerated) WifiSecurity rsnSecurity : array The RSN capabilities of the access point array element type: string (enumerated) WifiSecurity ModemModePair This object represents a pair of Modem Mode list and a preferred one. Properties : modes : array array element type: string (enumerated) ModemMode preferredMode : string (enumerated) ModemMode Sim This class contains all relevant properties to describe a SIM (Subscriber Identity Module). Properties : active : bool primary : bool iccid : string imsi : string eid : string operatorName : string simType : string (enumerated) SimType eSimStatus : string (enumerated) ESimStatus Bearer This object describes the Bearer or Context associated to a modem connection. Properties : name : string connected : bool apn : string ipTypes : array array element type: string (enumerated) BearerIpType bytesTransmitted : number bytesReceived : number ModemPorts An object representing a set of modem ports. The members of this object represent modem ports, the member names represent the modem port name. This object can have a variable number of members. Properties : propertyName : string (enumerated) ModemPortType NetworkInterfaceType The type of a network interface. Possible values UNKNOWN : The device type is unknown ETHERNET : The device is a wired Ethernet device. WIFI : The device is an 802.11 WiFi device. UNUSED1 UNUSED2 BT : The device is a Bluetooth device. OLPC_MESH : The device is an OLPC mesh networking device. WIMAX : The device is an 802.16e Mobile WiMAX device. MODEM : The device is a modem supporting one or more of analog telephone, CDMA/EVDO, GSM/UMTS/HSPA, or LTE standards to access a cellular or wireline data network. INFINIBAND : The device is an IP-capable InfiniBand interface. BOND : The device is a bond master interface. VLAN : The device is a VLAN interface. ADSL : The device is an ADSL device. BRIDGE : The device is a bridge master interface. GENERIC : This is a generic support for unrecognized device types. TEAM : The device is a team master interface. TUN : The device is a TUN or TAP interface. TUNNEL : The device is an IP tunnel interface. MACVLAN : The device is a MACVLAN interface. VXLAN : The device is a VXLAN interface. VETH : The device is a VETH interface. MACSEC : The device is a MACsec interface. DUMMY : The device is a dummy interface. PPP : The device is a PPP interface. OVS_INTERFACE : The device is a Open vSwitch interface. OVS_PORT : The device is a Open vSwitch port OVS_BRIDGE : The device is a Open vSwitch bridge. WPAN : The device is a IEEE 802.15.4 (WPAN) MAC Layer Device. SIXLOWPAN : The device is a 6LoWPAN interface. WIREGUARD : The device is a WireGuard interface. WIFI_P2P : The device is an 802.11 Wi-Fi P2P device. VRF : The device is a VRF (Virtual Routing and Forwarding) interface. LOOPBACK : The device is a loopback device. NetworkInterfaceState The state of a network interface. Possible values UNKNOWN : The device is in an unknown state. UNMANAGED : The device cannot be used (carrier off, rfkill, etc). UNAVAILABLE : The device is not connected. DISCONNECTED : The device is preparing to connect. PREPARE : The device is being configured. CONFIG : The device is awaiting secrets necessary to continue connection. NEED_AUTH : The IP settings of the device are being requested and configured. IP_CONFIG : The device's IP connectivity ability is being determined. IP_CHECK : The device is waiting for secondary connections to be activated. SECONDARIES : The device is waiting for secondary connections to be activated. ACTIVATED : The device is active. DEACTIVATING : The device's network connection is being turn down. FAILED : The device is in a failure state following an attempt to activate it. WifiCapability The capability of a WiFi interface. Possible values NONE : The device has no encryption/authentication capabilities CIPHER_WEP40 : The device supports 40/64-bit WEP encryption. CIPHER_WEP104 : The device supports 104/128-bit WEP encryption. CIPHER_TKIP : The device supports the TKIP encryption. CIPHER_CCMP : The device supports the AES/CCMP encryption. WPA : The device supports the WPA1 encryption/authentication protocol. RSN : The device supports the WPA2/RSN encryption/authentication protocol. AP : The device supports Access Point mode. ADHOC : The device supports Ad-Hoc mode. FREQ_VALID : The device reports frequency capabilities. FREQ_2GHZ : The device supports 2.4GHz frequencies. FREQ_5GHZ : The device supports 5GHz frequencies. MESH : The device supports mesh points. IBSS_RSN : The device supports WPA2 in IBSS networks WifiMode Modes of operation for wifi interfaces Possible values UNKNOWN : Mode is unknown. ADHOC : Uncoordinated network without central infrastructure. INFRA : Client mode - Coordinated network with one or more central controllers. MASTER : Access Point Mode - Coordinated network with one or more central controllers. WifiSecurity Flags describing the security capabilities of an access point. Possible values NONE : None PAIR_WEP40 : Supports pairwise 40-bit WEP encryption. PAIR_WEP104 : Supports pairwise 104-bit WEP encryption. PAIR_TKIP : Supports pairwise TKIP encryption. PAIR_CCMP : Supports pairwise CCMP encryption. GROUP_WEP40 : Supports a group 40-bit WEP cipher. GROUP_WEP104 : Supports a group 104-bit WEP cipher. GROUP_TKIP : Supports a group TKIP cipher. GROUP_CCMP : Supports a group CCMP cipher. KEY_MGMT_PSK : Supports PSK key management. KEY_MGMT_802_1X : Supports 802.1x key management. SECURITY_NONE : Supports no encryption. SECURITY_WEP : Supports WEP encryption. SECURITY_WPA : Supports WPA encryption. SECURITY_WPA2 : Supports WPA2 encryption. SECURITY_WPA_WPA2 : Supports WPA and WPA2 encryption. ModemPortType The type of a modem port. Possible values UNKNOWN NET AT QCDM GPS QMI MBIM AUDIO IGNORED ModemCapability The generic access technologies families supported by a modem. Possible values NONE : The modem has no capabilities. POTS : The modem supports the Plain Old Telephone Service (analog wired telephone network). EVDO : The modem supports EVDO revision 0, A or B. GSM_UMTS : The modem supports at least one of GSM, GPRS, EDGE, UMTS, HSDPA, HSUPA or HSPA+ technologies. LTE : The modem has LTE capabilities. IRIDIUM : The modem supports Iridium technology. FIVE_GNR : The modem supports 5GNR. TDS : The modem supports TDS. ANY : The modem supports all capabilities. ModemMode The generic access mode a modem supports. Possible values NONE CS MODE_2G MODE_3G MODE_4G MODE_5G ANY ModemBand The radio bands supported by a modem when connected to a mobile network. Possible values UNKNOWN EGSM DCS PCS G850 UTRAN_1 UTRAN_3 UTRAN_4 UTRAN_6 UTRAN_5 UTRAN_8 UTRAN_9 UTRAN_2 UTRAN_7 G450 G480 G750 G380 G410 G710 G810 EUTRAN_1 EUTRAN_2 EUTRAN_3 EUTRAN_4 EUTRAN_5 EUTRAN_6 EUTRAN_7 EUTRAN_8 EUTRAN_9 EUTRAN_10 EUTRAN_11 EUTRAN_12 EUTRAN_13 EUTRAN_14 EUTRAN_17 EUTRAN_18 EUTRAN_19 EUTRAN_20 EUTRAN_21 EUTRAN_22 EUTRAN_23 EUTRAN_24 EUTRAN_25 EUTRAN_26 EUTRAN_27 EUTRAN_28 EUTRAN_29 EUTRAN_30 EUTRAN_31 EUTRAN_32 EUTRAN_33 EUTRAN_34 EUTRAN_35 EUTRAN_36 EUTRAN_37 EUTRAN_38 EUTRAN_39 EUTRAN_40 EUTRAN_41 EUTRAN_42 EUTRAN_43 EUTRAN_44 EUTRAN_45 EUTRAN_46 EUTRAN_47 EUTRAN_48 EUTRAN_49 EUTRAN_50 EUTRAN_51 EUTRAN_52 EUTRAN_53 EUTRAN_54 EUTRAN_55 EUTRAN_56 EUTRAN_57 EUTRAN_58 EUTRAN_59 EUTRAN_60 EUTRAN_61 EUTRAN_62 EUTRAN_63 EUTRAN_64 EUTRAN_65 EUTRAN_66 EUTRAN_67 EUTRAN_68 EUTRAN_69 EUTRAN_70 EUTRAN_71 EUTRAN_85 CDMA_BC0 CDMA_BC1 CDMA_BC2 CDMA_BC3 CDMA_BC4 CDMA_BC5 CDMA_BC6 CDMA_BC7 CDMA_BC8 CDMA_BC9 CDMA_BC10 CDMA_BC11 CDMA_BC12 CDMA_BC13 CDMA_BC14 CDMA_BC15 CDMA_BC16 CDMA_BC17 CDMA_BC18 CDMA_BC19 UTRAN_10 UTRAN_11 UTRAN_12 UTRAN_13 UTRAN_14 UTRAN_19 UTRAN_20 UTRAN_21 UTRAN_22 UTRAN_25 UTRAN_26 UTRAN_32 ANY NGRAN_1 NGRAN_2 NGRAN_3 NGRAN_5 NGRAN_7 NGRAN_8 NGRAN_12 NGRAN_13 NGRAN_14 NGRAN_18 NGRAN_20 NGRAN_25 NGRAN_26 NGRAN_28 NGRAN_29 NGRAN_30 NGRAN_34 NGRAN_38 NGRAN_39 NGRAN_40 NGRAN_41 NGRAN_48 NGRAN_50 NGRAN_51 NGRAN_53 NGRAN_65 NGRAN_66 NGRAN_70 NGRAN_71 NGRAN_74 NGRAN_75 NGRAN_76 NGRAN_77 NGRAN_78 NGRAN_79 NGRAN_80 NGRAN_81 NGRAN_82 NGRAN_83 NGRAN_84 NGRAN_86 NGRAN_89 NGRAN_90 NGRAN_91 NGRAN_92 NGRAN_93 NGRAN_94 NGRAN_95 NGRAN_257 NGRAN_258 NGRAN_260 NGRAN_261 SimType The SIM (Subscriber Identity Module) type. Possible values UNKNOWN PHYSICAL ESIM ESimStatus The status of an ESIM. Possible values UNKNOWN NO_PROFILES WITH_PROFILES BearerIpType The type of Bearer or Context associated to a modem connection. Possible values NONE IPV4 IPV6 IPV4V6 NON_IP ANY ModemConnectionType Possible values PPP : Point to Point Protocol DirectIP : Direct IP ModemConnectionStatus The status of a modem. Possible values FAILED : The modem is unavailable UNKNOWN : The modem is in an unknown state. INITIALIZING : The modem is being initialised. LOCKED : The modem is locked. DISABLED : The modem is disabled and powered off. DISABLING : The modem is disabling. ENABLING : The modem is enabling.. ENABLED : The modem is enabled but not registered to a network provider. SEARCHING : The modem is searching for a network provider. REGISTERED : The modem is registered to a network provider. DISCONNECTING : The modem is disconnecting. CONNECTING : The modem is connecting. CONNECTED : The modem is connected. AccessTechnology The specific technology types used when a modem is connected or registered to a network. Possible values UNKNOWN POTS GSM GSM_COMPACT GPRS EDGE UMTS HSDPA HSUPA HSPA HSPA_PLUS ONEXRTT EVDO0 EVDOA EVDOB LTE FIVEGNR LTE_CAT_M LTE_NB_IOT ANY RegistrationStatus The registration status of a modem when connected to a mobile network. Possible values IDLE HOME SEARCHING DENIED UNKNOWN ROAMING HOME_SMS_ONLY ROAMING_SMS_ONLY EMERGENCY_ONLY HOME_CSFB_NOT_PREFERRED ROAMING_CSFB_NOT_PREFERRED ATTACHED_RLOS FailureReport An object reporting a failure while retrieving the status of a specific network interface Properties : interfaceId : string The identifier of the interface whose status cannot be retrieved. reason : string A message describing the reason of the failure. GenericFailureReport An object reporting a failure message. Properties : message : string A message describing the failure.","title":"Network Status Service V1 REST APIs and MQTT Request Handler"},{"location":"core-services/network-status-rest-v1/#network-status-service-v1-rest-apis-and-mqtt-request-handler","text":"The NET-STATUS-V1 cloud request handler and the corresponding REST APIs allow to retrieve the current status of the network interfaces available on the system. This cloud request handler and rest API is available only on the systems that provide a NetworkStatusService implementation, at the moment this corresponds to the devices that include the NetworkManager integration. Accessing the REST APIs requires to use an identity with the rest.network.status permission assigned. Request definitions GET/interfaceIds GET/status POST/status/byInterfaceId JSON definitions InterfaceIds InterfaceStatusList LoopbackInterfaceStatus EthernetInterfaceStatus WifiInterfaceStatus ModemInterfaceStatus NetworkInterfaceStatus IPAddressString HardwareAddress NetworkInterfaceIpAddress NetworkInterfaceIpAddressStatus WifiChannel WifiAccessPoint ModemModePair Sim Bearer ModemPorts NetworkInterfaceType NetworkInterfaceState WifiCapability WifiMode WifiSecurity ModemPortType ModemCapability ModemMode ModemBand SimType ESimStatus BearerIpType ModemConnectionType ModemConnectionStatus AccessTechnology RegistrationStatus FailureReport GenericFailureReport","title":"Network Status Service V1 REST APIs and MQTT Request Handler"},{"location":"core-services/network-status-rest-v1/#request-definitions","text":"","title":"Request definitions"},{"location":"core-services/network-status-rest-v1/#getinterfaceids","text":"REST API path : /services/networkStatus/v1/interfaceIds description : Returns the identifiers of the network interfaces detected in the system. For Ethernet and WiFi interfaces, the identifier is typically the interface name. For the modems, instead, it is the usb or pci path. responses : 200 description : The list of the identifiers of the network interfaces detected in the system. response body : InterfaceIds 500 description : If an unexpected failure occurs while retrieving the interface list. response body : GenericFailureReport","title":"GET/interfaceIds"},{"location":"core-services/network-status-rest-v1/#getstatus","text":"REST API path : /services/networkStatus/v1/status description : Returns the status for all interfaces currently available on the system. Failures in retrieving the status of specific interfaces will be reported using the failures field of the response. responses : 200 description : The status of the network interfaces in the system. response body : InterfaceStatusList 500 description : If an unexpected failure occurs while retrieving the interface list. response body : GenericFailureReport","title":"GET/status"},{"location":"core-services/network-status-rest-v1/#poststatusbyinterfaceid","text":"REST API path : /services/networkStatus/v1/status/byInterfaceId description : Returns the status for the network interfaces whose id is specified in the request. Failures in retrieving the status of specific interfaces, or the fact that an interface with the requested id cannot be found will be reported using the failures field of the responses. request body : InterfaceIds responses : 200 description : The status of the network interfaces in the system. response body : InterfaceStatusList 400 description : If the request object does not contain the interfaceIds field, it is null or if it contains empty or null interface ids. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the interface list. response body : GenericFailureReport","title":"POST/status/byInterfaceId"},{"location":"core-services/network-status-rest-v1/#json-definitions","text":"","title":"JSON definitions"},{"location":"core-services/network-status-rest-v1/#interfaceids","text":"An object containing a list of network interface identifiers Properties : interfaceIds : array The list of network interface identifiers array element type: string An interface identifier { \"interfaceIds\" : [ \"lo\" ] }","title":"InterfaceIds"},{"location":"core-services/network-status-rest-v1/#interfacestatuslist","text":"An object reporting a list of network interface status. If a failure occurs retrieving the status for a specific interface, the reason will be reported in the failures list. Properties : interfaces : array A list of network interface status array element type: variant Variants : object LoopbackInterfaceStatus object EthernetInterfaceStatus object WifiInterfaceStatus object ModemInterfaceStatus failures : array array element type: object FailureReport { \"failures\" : [], \"interfaces\" : [ { \"autoConnect\" : true , \"driver\" : \"unknown\" , \"driverVersion\" : \"\" , \"firmwareVersion\" : \"\" , \"hardwareAddress\" : \"00:00:00:00:00:00\" , \"id\" : \"lo\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"127.0.0.1\" , \"prefix\" : 8 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"lo\" , \"mtu\" : 65536 , \"state\" : \"UNMANAGED\" , \"type\" : \"LOOPBACK\" , \"virtual\" : true } ] } { \"failures\" : [ { \"interfaceId\" : \"foo\" , \"reason\" : \"Not found.\" } ], \"interfaces\" : [] }","title":"InterfaceStatusList"},{"location":"core-services/network-status-rest-v1/#loopbackinterfacestatus","text":"Object that contains specific properties to describe the status of an Loopback interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : { \"autoConnect\" : true , \"driver\" : \"unknown\" , \"driverVersion\" : \"\" , \"firmwareVersion\" : \"\" , \"hardwareAddress\" : \"00:00:00:00:00:00\" , \"id\" : \"lo\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"127.0.0.1\" , \"prefix\" : 8 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"lo\" , \"mtu\" : 65536 , \"state\" : \"UNMANAGED\" , \"type\" : \"LOOPBACK\" , \"virtual\" : true }","title":"LoopbackInterfaceStatus"},{"location":"core-services/network-status-rest-v1/#ethernetinterfacestatus","text":"Object that contains specific properties to describe the status of an Ethernet interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : linkUp : bool { \"autoConnect\" : true , \"driver\" : \"igb\" , \"driverVersion\" : \"5.6.0-k\" , \"firmwareVersion\" : \"3.25, 0x800005d0\" , \"hardwareAddress\" : \"00:E0:C7:0A:5F:89\" , \"id\" : \"eno1\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"172.16.0.1\" , \"prefix\" : 24 } ], \"dnsServerAddresses\" : [], \"gateway\" : \"0.0.0.0\" }, \"interfaceName\" : \"eno1\" , \"linkUp\" : true , \"mtu\" : 1500 , \"state\" : \"ACTIVATED\" , \"type\" : \"ETHERNET\" , \"virtual\" : false }","title":"EthernetInterfaceStatus"},{"location":"core-services/network-status-rest-v1/#wifiinterfacestatus","text":"Object that contains specific properties to describe the status of a WiFi interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : capabilities : array array element type: string (enumerated) WifiCapability channels : array array element type: object WifiChannel countryCode : string mode : string (enumerated) WifiMode activeWifiAccessPoint : object ( optional ) WifiAccessPoint availableWifiAccessPoints : array array element type: object WifiAccessPoint { \"activeWifiAccessPoint\" : { \"channel\" : { \"channel\" : 11 , \"frequency\" : 2462 }, \"hardwareAddress\" : \"11:22:33:44:55:66\" , \"maxBitrate\" : 130000 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 100 , \"signalStrength\" : -20 , \"ssid\" : \"MyAccessPoint\" , \"wpaSecurity\" : [ \"NONE\" ] }, \"autoConnect\" : true , \"availableWifiAccessPoints\" : [ { \"channel\" : { \"channel\" : 11 , \"frequency\" : 2462 }, \"hardwareAddress\" : \"11:22:33:44:55:66\" , \"maxBitrate\" : 130000 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 100 , \"signalStrength\" : -20 , \"ssid\" : \"MyAccessPoint\" , \"wpaSecurity\" : [ \"NONE\" ] }, { \"channel\" : { \"channel\" : 5 , \"frequency\" : 2432 }, \"hardwareAddress\" : \"22:33:44:55:66:77\" , \"maxBitrate\" : 270000 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 42 , \"signalStrength\" : -69 , \"ssid\" : \"OtherSSID\" , \"wpaSecurity\" : [ \"NONE\" ] } ], \"capabilities\" : [ \"CIPHER_WEP40\" , \"WPA\" , \"AP\" , \"FREQ_VALID\" , \"ADHOC\" , \"RSN\" , \"CIPHER_TKIP\" , \"CIPHER_WEP104\" , \"CIPHER_CCMP\" , \"FREQ_2GHZ\" ], \"channels\" : [ { \"attenuation\" : 20.0 , \"channel\" : 1 , \"disabled\" : false , \"frequency\" : 2412 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false }, { \"attenuation\" : 20.0 , \"channel\" : 2 , \"disabled\" : false , \"frequency\" : 2417 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false } ], \"countryCode\" : \"IT\" , \"driver\" : \"brcmfmac\" , \"driverVersion\" : \"7.45.98.94\" , \"firmwareVersion\" : \"01-3b33decd\" , \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"id\" : \"wlan0\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"192.168.0.113\" , \"prefix\" : 24 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"wlan0\" , \"mode\" : \"INFRA\" , \"mtu\" : 1500 , \"state\" : \"ACTIVATED\" , \"type\" : \"WIFI\" , \"virtual\" : false } { \"activeWifiAccessPoint\" : { \"channel\" : { \"channel\" : 1 , \"frequency\" : 2412 }, \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"maxBitrate\" : 0 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 0 , \"signalStrength\" : -104 , \"ssid\" : \"kura_gateway_raspberry_pi\" , \"wpaSecurity\" : [ \"NONE\" ] }, \"autoConnect\" : true , \"availableWifiAccessPoints\" : [ { \"channel\" : { \"channel\" : 1 , \"frequency\" : 2412 }, \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"maxBitrate\" : 0 , \"mode\" : \"INFRA\" , \"rsnSecurity\" : [ \"GROUP_CCMP\" , \"KEY_MGMT_PSK\" , \"PAIR_CCMP\" ], \"signalQuality\" : 0 , \"signalStrength\" : -104 , \"ssid\" : \"kura_gateway_raspberry_pi\" , \"wpaSecurity\" : [ \"NONE\" ] } ], \"capabilities\" : [ \"CIPHER_WEP40\" , \"WPA\" , \"AP\" , \"FREQ_VALID\" , \"ADHOC\" , \"RSN\" , \"CIPHER_TKIP\" , \"CIPHER_WEP104\" , \"CIPHER_CCMP\" , \"FREQ_2GHZ\" ], \"channels\" : [ { \"attenuation\" : 20.0 , \"channel\" : 1 , \"disabled\" : false , \"frequency\" : 2412 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false }, { \"attenuation\" : 20.0 , \"channel\" : 2 , \"disabled\" : false , \"frequency\" : 2417 , \"noInitiatingRadiation\" : false , \"radarDetection\" : false } ], \"countryCode\" : \"00\" , \"driver\" : \"brcmfmac\" , \"driverVersion\" : \"7.45.98.94\" , \"firmwareVersion\" : \"01-3b33decd\" , \"hardwareAddress\" : \"44:55:66:77:88:99\" , \"id\" : \"wlan0\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"172.16.1.1\" , \"prefix\" : 24 } ], \"dnsServerAddresses\" : [] }, \"interfaceName\" : \"wlan0\" , \"mode\" : \"MASTER\" , \"mtu\" : 1500 , \"state\" : \"ACTIVATED\" , \"type\" : \"WIFI\" , \"virtual\" : false }","title":"WifiInterfaceStatus"},{"location":"core-services/network-status-rest-v1/#modeminterfacestatus","text":"Object that contains specific properties to describe the status of a Modem interface. It contains also all of the properties specified by NetworkInterfaceStatus . Properties : model : string manufacturer : string serialNumber : string softwareRevision : string hardwareRevision : string primaryPort : string ports : object ModemPorts supportedModemCapabilities : array array element type: string (enumerated) ModemCapability currentModemCapabilities : array array element type: string (enumerated) ModemCapability powerState : string (enumerated) ModemPowerState supportedModes : array array element type: object ModemModePair currentModes : object ModemModePair supportedBands : array array element type: string (enumerated) ModemBand currentBands : array array element type: string (enumerated) ModemBand gpsSupported : bool availableSims : array array element type: object Sim simLocked : bool bearers : array array element type: object Bearer connectionType : string (enumerated) ModemConnectionType connectionStatus : string (enumerated) ModemConnectionStatus accessTechnologies : array array element type: string (enumerated) AccessTechnology signalQuality : number signalStrength : number registrationStatus : string (enumerated) RegistrationStatus operatorName : string { \"accessTechnologies\" : [ \"LTE\" ], \"autoConnect\" : true , \"availableSims\" : [ { \"active\" : true , \"primary\" : true , \"eSimStatus\" : \"UNKNOWN\" , \"eid\" : \"\" , \"iccid\" : \"1111111111111111111\" , \"imsi\" : \"111111111111111\" , \"operatorName\" : \"MyOperator\" , \"simType\" : \"PHYSICAL\" } ], \"bearers\" : [ { \"apn\" : \"apn.myoperator.com\" , \"bytesReceived\" : 0 , \"bytesTransmitted\" : 0 , \"connected\" : true , \"ipTypes\" : [ \"IPV4\" ], \"name\" : \"wwp11s0f2u3i4\" } ], \"connectionStatus\" : \"CONNECTED\" , \"connectionType\" : \"DirectIP\" , \"currentBands\" : [ \"DCS\" , \"EUTRAN_3\" , \"EUTRAN_19\" , \"EUTRAN_40\" , \"EUTRAN_26\" , \"EUTRAN_28\" , \"EUTRAN_41\" , \"UTRAN_6\" , \"EUTRAN_13\" , \"EUTRAN_25\" , \"EUTRAN_5\" , \"EUTRAN_7\" , \"EUTRAN_8\" , \"UTRAN_2\" , \"EUTRAN_38\" , \"UTRAN_1\" , \"EUTRAN_12\" , \"UTRAN_8\" , \"EUTRAN_18\" , \"UTRAN_19\" , \"G850\" , \"EUTRAN_20\" , \"UTRAN_5\" , \"EUTRAN_1\" , \"EUTRAN_39\" , \"EUTRAN_2\" , \"EUTRAN_4\" , \"EGSM\" , \"PCS\" , \"UTRAN_4\" ], \"currentModemCapabilities\" : [ \"GSM_UMTS\" , \"LTE\" ], \"currentModes\" : { \"modes\" : [ \"MODE_2G\" , \"MODE_3G\" , \"MODE_4G\" ], \"preferredMode\" : \"MODE_4G\" }, \"driver\" : \"qmi_wwan, option1\" , \"driverVersion\" : \"\" , \"firmwareVersion\" : \"\" , \"gpsSupported\" : true , \"hardwareAddress\" : \"00:00:00:00:00:00\" , \"hardwareRevision\" : \"10000\" , \"id\" : \"1-3\" , \"interfaceIp4Addresses\" : { \"addresses\" : [ { \"address\" : \"1.2.3.4\" , \"prefix\" : 30 } ], \"dnsServerAddresses\" : [ \"1.2.3.6\" , \"1.2.3.7\" ], \"gateway\" : \"1.2.3.5\" }, \"interfaceName\" : \"wwp11s0f2u3i4\" , \"manufacturer\" : \"QUALCOMM INCORPORATED\" , \"model\" : \"QUECTEL Mobile Broadband Module\" , \"mtu\" : 1500 , \"operatorName\" : \"MyOperator\" , \"ports\" : { \"cdc-wdm0\" : \"QMI\" , \"ttyUSB0\" : \"QCDM\" , \"ttyUSB1\" : \"GPS\" , \"ttyUSB2\" : \"AT\" , \"ttyUSB3\" : \"AT\" , \"wwp11s0f2u3i4\" : \"NET\" }, \"powerState\" : \"ON\" , \"primaryPort\" : \"cdc-wdm0\" , \"registrationStatus\" : \"HOME\" , \"serialNumber\" : \"111111111111111\" , \"signalQuality\" : 55 , \"signalStrength\" : -80 , \"simLocked\" : true , \"softwareRevision\" : \"EG25GGBR07A08M2G\" , \"state\" : \"ACTIVATED\" , \"supportedBands\" : [ \"DCS\" , \"EUTRAN_3\" , \"EUTRAN_19\" , \"EUTRAN_40\" , \"EUTRAN_26\" , \"EUTRAN_28\" , \"EUTRAN_41\" , \"UTRAN_6\" , \"EUTRAN_13\" , \"EUTRAN_25\" , \"EUTRAN_5\" , \"EUTRAN_7\" , \"EUTRAN_8\" , \"UTRAN_2\" , \"EUTRAN_38\" , \"UTRAN_1\" , \"EUTRAN_12\" , \"UTRAN_8\" , \"EUTRAN_18\" , \"UTRAN_19\" , \"G850\" , \"EUTRAN_20\" , \"UTRAN_5\" , \"EUTRAN_1\" , \"EUTRAN_39\" , \"EUTRAN_2\" , \"EUTRAN_4\" , \"EGSM\" , \"PCS\" , \"UTRAN_4\" ], \"supportedModemCapabilities\" : [ \"NONE\" ], \"supportedModes\" : [ { \"modes\" : [ \"MODE_4G\" ], \"preferredMode\" : \"NONE\" }, { \"modes\" : [ \"MODE_2G\" , \"MODE_3G\" , \"MODE_4G\" ], \"preferredMode\" : \"MODE_4G\" } ], \"type\" : \"MODEM\" , \"virtual\" : false }","title":"ModemInterfaceStatus"},{"location":"core-services/network-status-rest-v1/#networkinterfacestatus","text":"This object contains the common properties contained by the status object reported for a network interface. A network interface is identified by Kura using the id field. It is used to internally manage the interface. The interfaceName, instead, is the IP interface as it may appear on the system. For Ethernet and WiFi interfaces the two values coincide (i.e. eth0, wlp1s0, ...). For modems, instead, the id is typically the usb or pci path, while the interfaceName is the IP interface created when they are connected. When the modem is disconnected the interfaceName can have a different value. Properties : id : string interfaceName : string hardwareAddress : string HardwareAddress driver : string driverVersion : string firmwareVersion : string virtual : bool state : string (enumerated) NetworkInterfaceState autoConnect : bool mtu : number interfaceIp4Addresses : array ( optional ) array element type: object NetworkInterfaceIpAddressStatus interfaceIp6Addresses : array ( optional ) array element type: object NetworkInterfaceIpAddressStatus","title":"NetworkInterfaceStatus"},{"location":"core-services/network-status-rest-v1/#ipaddressstring","text":"Represents an IPv4 or IPv6 addresses as a string.","title":"IPAddressString"},{"location":"core-services/network-status-rest-v1/#hardwareaddress","text":"Represents an hardware address as its bytes reported as two characters hexadecimal strings separated by the ':' character. e.g. 00:11:22:33:A4:FC:BB.","title":"HardwareAddress"},{"location":"core-services/network-status-rest-v1/#networkinterfaceipaddress","text":"This object describes an IP address with its prefix. It can be used for IPv4 or IPv6 addresses. Properties : address : string IPAddressString prefix : number","title":"NetworkInterfaceIpAddress"},{"location":"core-services/network-status-rest-v1/#networkinterfaceipaddressstatus","text":"This class describes the IP address status of a network interface: a list of IP addresses, an optional gateway and a list of DNS servers address. It can be used for IPv4 or IPv6 addresses. Properties : addresses : array array element type: object NetworkInterfaceIpAddress gateway : string ( optional This field can be missing if the interface has no gateway.) IPAddressString dnsServerAddresses : array array element type: string IPAddressString","title":"NetworkInterfaceIpAddressStatus"},{"location":"core-services/network-status-rest-v1/#wifichannel","text":"This class represent a WiFi channel, providing the channel number, frequency, status and other useful information. Properties : channel : number frequency : number disabled : bool ( optional ) attenuation : number ( optional ) noInitiatingRadiation : bool ( optional ) radarDetection : bool ( optional )","title":"WifiChannel"},{"location":"core-services/network-status-rest-v1/#wifiaccesspoint","text":"This object describes a Wifi Access Point. It can be used both for describing a detected AP after a WiFi scan when in Station mode and the provided AP when in Master (or Access Point) mode. Properties : ssid : string The Service Set IDentifier of the WiFi network hardwareAddress : string HardwareAddress channel : object WifiChannel mode : string (enumerated) WifiMode maxBitrate : number The maximum bitrate this access point is capable of. signalQuality : number The current signal quality of the access point in percentage. signalStrength : number The current signal strength of the access point in dBm. wpaSecurity : array The WPA capabilities of the access point array element type: string (enumerated) WifiSecurity rsnSecurity : array The RSN capabilities of the access point array element type: string (enumerated) WifiSecurity","title":"WifiAccessPoint"},{"location":"core-services/network-status-rest-v1/#modemmodepair","text":"This object represents a pair of Modem Mode list and a preferred one. Properties : modes : array array element type: string (enumerated) ModemMode preferredMode : string (enumerated) ModemMode","title":"ModemModePair"},{"location":"core-services/network-status-rest-v1/#sim","text":"This class contains all relevant properties to describe a SIM (Subscriber Identity Module). Properties : active : bool primary : bool iccid : string imsi : string eid : string operatorName : string simType : string (enumerated) SimType eSimStatus : string (enumerated) ESimStatus","title":"Sim"},{"location":"core-services/network-status-rest-v1/#bearer","text":"This object describes the Bearer or Context associated to a modem connection. Properties : name : string connected : bool apn : string ipTypes : array array element type: string (enumerated) BearerIpType bytesTransmitted : number bytesReceived : number","title":"Bearer"},{"location":"core-services/network-status-rest-v1/#modemports","text":"An object representing a set of modem ports. The members of this object represent modem ports, the member names represent the modem port name. This object can have a variable number of members. Properties : propertyName : string (enumerated) ModemPortType","title":"ModemPorts"},{"location":"core-services/network-status-rest-v1/#networkinterfacetype","text":"The type of a network interface. Possible values UNKNOWN : The device type is unknown ETHERNET : The device is a wired Ethernet device. WIFI : The device is an 802.11 WiFi device. UNUSED1 UNUSED2 BT : The device is a Bluetooth device. OLPC_MESH : The device is an OLPC mesh networking device. WIMAX : The device is an 802.16e Mobile WiMAX device. MODEM : The device is a modem supporting one or more of analog telephone, CDMA/EVDO, GSM/UMTS/HSPA, or LTE standards to access a cellular or wireline data network. INFINIBAND : The device is an IP-capable InfiniBand interface. BOND : The device is a bond master interface. VLAN : The device is a VLAN interface. ADSL : The device is an ADSL device. BRIDGE : The device is a bridge master interface. GENERIC : This is a generic support for unrecognized device types. TEAM : The device is a team master interface. TUN : The device is a TUN or TAP interface. TUNNEL : The device is an IP tunnel interface. MACVLAN : The device is a MACVLAN interface. VXLAN : The device is a VXLAN interface. VETH : The device is a VETH interface. MACSEC : The device is a MACsec interface. DUMMY : The device is a dummy interface. PPP : The device is a PPP interface. OVS_INTERFACE : The device is a Open vSwitch interface. OVS_PORT : The device is a Open vSwitch port OVS_BRIDGE : The device is a Open vSwitch bridge. WPAN : The device is a IEEE 802.15.4 (WPAN) MAC Layer Device. SIXLOWPAN : The device is a 6LoWPAN interface. WIREGUARD : The device is a WireGuard interface. WIFI_P2P : The device is an 802.11 Wi-Fi P2P device. VRF : The device is a VRF (Virtual Routing and Forwarding) interface. LOOPBACK : The device is a loopback device.","title":"NetworkInterfaceType"},{"location":"core-services/network-status-rest-v1/#networkinterfacestate","text":"The state of a network interface. Possible values UNKNOWN : The device is in an unknown state. UNMANAGED : The device cannot be used (carrier off, rfkill, etc). UNAVAILABLE : The device is not connected. DISCONNECTED : The device is preparing to connect. PREPARE : The device is being configured. CONFIG : The device is awaiting secrets necessary to continue connection. NEED_AUTH : The IP settings of the device are being requested and configured. IP_CONFIG : The device's IP connectivity ability is being determined. IP_CHECK : The device is waiting for secondary connections to be activated. SECONDARIES : The device is waiting for secondary connections to be activated. ACTIVATED : The device is active. DEACTIVATING : The device's network connection is being turn down. FAILED : The device is in a failure state following an attempt to activate it.","title":"NetworkInterfaceState"},{"location":"core-services/network-status-rest-v1/#wificapability","text":"The capability of a WiFi interface. Possible values NONE : The device has no encryption/authentication capabilities CIPHER_WEP40 : The device supports 40/64-bit WEP encryption. CIPHER_WEP104 : The device supports 104/128-bit WEP encryption. CIPHER_TKIP : The device supports the TKIP encryption. CIPHER_CCMP : The device supports the AES/CCMP encryption. WPA : The device supports the WPA1 encryption/authentication protocol. RSN : The device supports the WPA2/RSN encryption/authentication protocol. AP : The device supports Access Point mode. ADHOC : The device supports Ad-Hoc mode. FREQ_VALID : The device reports frequency capabilities. FREQ_2GHZ : The device supports 2.4GHz frequencies. FREQ_5GHZ : The device supports 5GHz frequencies. MESH : The device supports mesh points. IBSS_RSN : The device supports WPA2 in IBSS networks","title":"WifiCapability"},{"location":"core-services/network-status-rest-v1/#wifimode","text":"Modes of operation for wifi interfaces Possible values UNKNOWN : Mode is unknown. ADHOC : Uncoordinated network without central infrastructure. INFRA : Client mode - Coordinated network with one or more central controllers. MASTER : Access Point Mode - Coordinated network with one or more central controllers.","title":"WifiMode"},{"location":"core-services/network-status-rest-v1/#wifisecurity","text":"Flags describing the security capabilities of an access point. Possible values NONE : None PAIR_WEP40 : Supports pairwise 40-bit WEP encryption. PAIR_WEP104 : Supports pairwise 104-bit WEP encryption. PAIR_TKIP : Supports pairwise TKIP encryption. PAIR_CCMP : Supports pairwise CCMP encryption. GROUP_WEP40 : Supports a group 40-bit WEP cipher. GROUP_WEP104 : Supports a group 104-bit WEP cipher. GROUP_TKIP : Supports a group TKIP cipher. GROUP_CCMP : Supports a group CCMP cipher. KEY_MGMT_PSK : Supports PSK key management. KEY_MGMT_802_1X : Supports 802.1x key management. SECURITY_NONE : Supports no encryption. SECURITY_WEP : Supports WEP encryption. SECURITY_WPA : Supports WPA encryption. SECURITY_WPA2 : Supports WPA2 encryption. SECURITY_WPA_WPA2 : Supports WPA and WPA2 encryption.","title":"WifiSecurity"},{"location":"core-services/network-status-rest-v1/#modemporttype","text":"The type of a modem port. Possible values UNKNOWN NET AT QCDM GPS QMI MBIM AUDIO IGNORED","title":"ModemPortType"},{"location":"core-services/network-status-rest-v1/#modemcapability","text":"The generic access technologies families supported by a modem. Possible values NONE : The modem has no capabilities. POTS : The modem supports the Plain Old Telephone Service (analog wired telephone network). EVDO : The modem supports EVDO revision 0, A or B. GSM_UMTS : The modem supports at least one of GSM, GPRS, EDGE, UMTS, HSDPA, HSUPA or HSPA+ technologies. LTE : The modem has LTE capabilities. IRIDIUM : The modem supports Iridium technology. FIVE_GNR : The modem supports 5GNR. TDS : The modem supports TDS. ANY : The modem supports all capabilities.","title":"ModemCapability"},{"location":"core-services/network-status-rest-v1/#modemmode","text":"The generic access mode a modem supports. Possible values NONE CS MODE_2G MODE_3G MODE_4G MODE_5G ANY","title":"ModemMode"},{"location":"core-services/network-status-rest-v1/#modemband","text":"The radio bands supported by a modem when connected to a mobile network. Possible values UNKNOWN EGSM DCS PCS G850 UTRAN_1 UTRAN_3 UTRAN_4 UTRAN_6 UTRAN_5 UTRAN_8 UTRAN_9 UTRAN_2 UTRAN_7 G450 G480 G750 G380 G410 G710 G810 EUTRAN_1 EUTRAN_2 EUTRAN_3 EUTRAN_4 EUTRAN_5 EUTRAN_6 EUTRAN_7 EUTRAN_8 EUTRAN_9 EUTRAN_10 EUTRAN_11 EUTRAN_12 EUTRAN_13 EUTRAN_14 EUTRAN_17 EUTRAN_18 EUTRAN_19 EUTRAN_20 EUTRAN_21 EUTRAN_22 EUTRAN_23 EUTRAN_24 EUTRAN_25 EUTRAN_26 EUTRAN_27 EUTRAN_28 EUTRAN_29 EUTRAN_30 EUTRAN_31 EUTRAN_32 EUTRAN_33 EUTRAN_34 EUTRAN_35 EUTRAN_36 EUTRAN_37 EUTRAN_38 EUTRAN_39 EUTRAN_40 EUTRAN_41 EUTRAN_42 EUTRAN_43 EUTRAN_44 EUTRAN_45 EUTRAN_46 EUTRAN_47 EUTRAN_48 EUTRAN_49 EUTRAN_50 EUTRAN_51 EUTRAN_52 EUTRAN_53 EUTRAN_54 EUTRAN_55 EUTRAN_56 EUTRAN_57 EUTRAN_58 EUTRAN_59 EUTRAN_60 EUTRAN_61 EUTRAN_62 EUTRAN_63 EUTRAN_64 EUTRAN_65 EUTRAN_66 EUTRAN_67 EUTRAN_68 EUTRAN_69 EUTRAN_70 EUTRAN_71 EUTRAN_85 CDMA_BC0 CDMA_BC1 CDMA_BC2 CDMA_BC3 CDMA_BC4 CDMA_BC5 CDMA_BC6 CDMA_BC7 CDMA_BC8 CDMA_BC9 CDMA_BC10 CDMA_BC11 CDMA_BC12 CDMA_BC13 CDMA_BC14 CDMA_BC15 CDMA_BC16 CDMA_BC17 CDMA_BC18 CDMA_BC19 UTRAN_10 UTRAN_11 UTRAN_12 UTRAN_13 UTRAN_14 UTRAN_19 UTRAN_20 UTRAN_21 UTRAN_22 UTRAN_25 UTRAN_26 UTRAN_32 ANY NGRAN_1 NGRAN_2 NGRAN_3 NGRAN_5 NGRAN_7 NGRAN_8 NGRAN_12 NGRAN_13 NGRAN_14 NGRAN_18 NGRAN_20 NGRAN_25 NGRAN_26 NGRAN_28 NGRAN_29 NGRAN_30 NGRAN_34 NGRAN_38 NGRAN_39 NGRAN_40 NGRAN_41 NGRAN_48 NGRAN_50 NGRAN_51 NGRAN_53 NGRAN_65 NGRAN_66 NGRAN_70 NGRAN_71 NGRAN_74 NGRAN_75 NGRAN_76 NGRAN_77 NGRAN_78 NGRAN_79 NGRAN_80 NGRAN_81 NGRAN_82 NGRAN_83 NGRAN_84 NGRAN_86 NGRAN_89 NGRAN_90 NGRAN_91 NGRAN_92 NGRAN_93 NGRAN_94 NGRAN_95 NGRAN_257 NGRAN_258 NGRAN_260 NGRAN_261","title":"ModemBand"},{"location":"core-services/network-status-rest-v1/#simtype","text":"The SIM (Subscriber Identity Module) type. Possible values UNKNOWN PHYSICAL ESIM","title":"SimType"},{"location":"core-services/network-status-rest-v1/#esimstatus","text":"The status of an ESIM. Possible values UNKNOWN NO_PROFILES WITH_PROFILES","title":"ESimStatus"},{"location":"core-services/network-status-rest-v1/#beareriptype","text":"The type of Bearer or Context associated to a modem connection. Possible values NONE IPV4 IPV6 IPV4V6 NON_IP ANY","title":"BearerIpType"},{"location":"core-services/network-status-rest-v1/#modemconnectiontype","text":"Possible values PPP : Point to Point Protocol DirectIP : Direct IP","title":"ModemConnectionType"},{"location":"core-services/network-status-rest-v1/#modemconnectionstatus","text":"The status of a modem. Possible values FAILED : The modem is unavailable UNKNOWN : The modem is in an unknown state. INITIALIZING : The modem is being initialised. LOCKED : The modem is locked. DISABLED : The modem is disabled and powered off. DISABLING : The modem is disabling. ENABLING : The modem is enabling.. ENABLED : The modem is enabled but not registered to a network provider. SEARCHING : The modem is searching for a network provider. REGISTERED : The modem is registered to a network provider. DISCONNECTING : The modem is disconnecting. CONNECTING : The modem is connecting. CONNECTED : The modem is connected.","title":"ModemConnectionStatus"},{"location":"core-services/network-status-rest-v1/#accesstechnology","text":"The specific technology types used when a modem is connected or registered to a network. Possible values UNKNOWN POTS GSM GSM_COMPACT GPRS EDGE UMTS HSDPA HSUPA HSPA HSPA_PLUS ONEXRTT EVDO0 EVDOA EVDOB LTE FIVEGNR LTE_CAT_M LTE_NB_IOT ANY","title":"AccessTechnology"},{"location":"core-services/network-status-rest-v1/#registrationstatus","text":"The registration status of a modem when connected to a mobile network. Possible values IDLE HOME SEARCHING DENIED UNKNOWN ROAMING HOME_SMS_ONLY ROAMING_SMS_ONLY EMERGENCY_ONLY HOME_CSFB_NOT_PREFERRED ROAMING_CSFB_NOT_PREFERRED ATTACHED_RLOS","title":"RegistrationStatus"},{"location":"core-services/network-status-rest-v1/#failurereport","text":"An object reporting a failure while retrieving the status of a specific network interface Properties : interfaceId : string The identifier of the interface whose status cannot be retrieved. reason : string A message describing the reason of the failure.","title":"FailureReport"},{"location":"core-services/network-status-rest-v1/#genericfailurereport","text":"An object reporting a failure message. Properties : message : string A message describing the failure.","title":"GenericFailureReport"},{"location":"core-services/nvidia-triton-server-inference-engine/","text":"Nvidia\u2122 Triton Server Inference Engine The Nvidia\u2122 Triton Server is an open-source inference service software that enables the user to deploy trained AI models from any framework on GPU or CPU infrastructure. It supports all major frameworks like TensorFlow, TensorRT, PyTorch, ONNX Runtime, and even custom framework backend. With specific backends, it is also possible to run Python scripts, mainly for pre-and post-processing purposes, and exploit the DALI building block for optimized operations. For more detail about the Triton Server, please refer to the official website . Kura provides three components for exposing the Triton Server service functionality which implement the inference engine APIs and provides methods for interacting with a local or remote Nvidia\u2122 Triton Server: TritonServerRemoteService : provides methods for interacting with a remote Nvidia\u2122 Triton Server without managing the server lifecycle. Can be used both for connecting to a remote instance or a local non-managed instance. It exposes a simpler but more limited configuration. TritonServerNativeService : provides methods for interacting with a local native Nvidia\u2122 Triton Server. Requires the Triton Server executable to be already available on the device and offers more options and features (like AI Model Encryption). TritonServerContainerService : provides methods for interacting with a local container running Nvidia\u2122 Triton Server. Requires the Triton Server container image to be already available on the device and offers more options and features (like AI Model Encryption). TritonServerService : provides methods for interacting with a local or remote Nvidia\u2122 Triton Server within the same component. Note : deprecated since 5.2.0 Nvidia\u2122 Triton Server installation Before running Kura's Triton Server Service, you must install the Triton Inference Server. Here you can find the necessary steps for the available suggested installation methods. Native Triton installation on Jetson devices A release of Triton for JetPack is provided in the tar file in the Triton Inference Server release notes . Full documentation is available here . Installation steps: Before running the executable you need to install the Runtime Dependencies for Triton . After doing so you can extract the tar file and run the executable in the bin folder. It is highly recommended to add the tritonserver executable to your path or symlinking the executable to /usr/local/bin . Triton Docker image installation Before you can use the Triton Docker image you must install Docker . If you plan on using a GPU for inference you must also install the NVIDIA Container Toolkit . Pull the image using the following command. $ docker pull nvcr.io/nvidia/tritonserver:<xx.yy>-py3 Where <xx.yy> is the version of Triton that you want to pull. Native Triton installation on supported devices The official docs mention the possibility to perform a native installation on supported platform by extracting the binaries from the Docker images. To do so you must install the necessary dependencies (some can be found in the Jetson runtime dependencies docs ) on the system. For Triton to support NVIDIA GPUs you must install CUDA, cuBLAS and cuDNN referencing the support matrix . Note For Python models the libraries available to the Python model are the ones available for the user running the Triton server. Therefore you'll need to install the libraries through pip for the kurad user. Triton Server setup The Triton Inference Server serves models from one or more model repositories that are specified when the server is started. The model repository is the directory where you place the models that you want Triton to serve. Be sure to follow the instructions to setup the model repository directory. Further information about an example Triton Server setup can be found in the official documentation . Triton Server Remote Service component The Kura Triton Server Remote Service component is the implementation of the inference engine APIs and provides methods for interacting with a remote (i.e. unmnanaged) Nvidia\u2122 Triton Server. As presented below, the component enables the user to communicate to an external server to load specific models. With this component the server lifecycle (startup, shutdown) won't be handled by Kura and it's the user responsibility to make it available to Kura for connecting. The parameters used to configure the Triton Service are the following: Nvidia Triton Server address : the address of the Nvidia Triton Server. Nvidia Triton Server ports : the ports used to connect to the server for HTTP, GRPC, and Metrics services. Inference Models : a comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. By default, size of 4194304 bytes (= 4.19 MB) is used. Increase this value to be able to send large amounts of data as input to the Triton server (like Full HD images). The Kura logs will show the following error when exceeding such limit: io.grpc.StatusRuntimeException: RESOURCE_EXHAUSTED: gRPC message exceeds maximum size 4194304 Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are tipically used by Kura for debug purposes. Triton Server Native Service component The Kura Triton Server component is the implementation of the inference engine APIs and provides methods for interacting with a local native Nvidia\u2122 Triton Server. As presented below, the component enables the user to configure a local server running on the gateway and handles its lifecycle. This operating mode supports more features for interacting with the server like the AI Model Encryption . Note Requirement : tritonserver executable needs to be available in the path to the kurad user. Be sure to have a working Triton Server installation before configuring the local native Triton Server instance through Kura UI. The parameters used to configure the Triton Service are the following: Nvidia Triton Server ports : the ports used to connect to the server for HTTP, GRPC, and Metrics services. Local model repository path : Specify the path on the filesystem where the models are stored. Local model decryption password : Specify the password to be used for decrypting models stored in the model repository. If none is specified, models are supposed to be plaintext. Inference Models : a comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Local backends path : Specify the path on the filesystem where the backends are stored. Optional configuration for the local backends : A semi-colon separated list of configuration for the backends. i.e. tensorflow,version=2;tensorflow,allow-soft-placement=false Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are tipically used by Kura for debug purposes. Triton Server Container Service component The Kura Triton Server component is the implementation of the inference engine APIs and provides methods for interacting with a local container running the Nvidia\u2122 Triton Server. As presented below, the component enables the user to configure a local server running on the gateway and handles its lifecycle. This operating mode supports more features for interacting with the server like the AI Model Encryption . Note Requirement : 1. Triton Server container image already installed on the device. For instructions refer to the installation section in this page. 2. Kura's Container Orchestration Service enabled. The parameters used to configure the Triton Service are the following: Container Image : The image the container will be created with. Container Image Tag : Describes which image version that should be used for creating the container. Nvidia Triton Server ports : The ports used to connect to the server for HTTP, GRPC, and Metrics services. Local model repository path : Specify the path on the filesystem where the models are stored. Local model decryption password : Specify the password to be used for decrypting models stored in the model repository. If none is specified, models are supposed to be plaintext. Inference Models : A comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Local Backends Path : Specifies the host filesystem path where the backends are stored. This folder will be mounted as a volume inside the Triton container and will override the existing backends. If left blank, the backends provided by the Triton container will be used. Optional configuration for the local backends : A semi-colon separated list of configuration for the backends. i.e. tensorflow,version=2;tensorflow,allow-soft-placement=false Memory : The maximum amount of memory the container can use in bytes. Set it as a positive integer, optionally followed by a suffix of b, k, m, g, to indicate bytes, kilobytes, megabytes, or gigabytes. The minimum allowed value is platform dependent (i.e. 6m). If left empty, the memory assigned to the container will be set to a default value by the native container orchestrator. CPUs : Specify how many CPUs the Triton container can use. Decimal values are allowed, so if set to 1.5, the container will use at most one and a half cpu resource. GPUs : Specify how many Nvidia GPUs the Triton container can use. Allowed values are 'all' or an integer number. If there's no Nvidia GPU installed, leave the field empty. If the Nvidia Container Runtime is used, leave the field empty. Runtime : Specifies the fully qualified name of an alternate OCI-compatible runtime, which is used to run commands specified by the 'run' instruction for the Triton container. Example: nvidia corresponds to --runtime=nvidia . Note: when using the Nvidia Container Runtime, leave the GPUs field empty. The GPUs available on the system will be accessible from the container by default. Devices : A comma-separated list of device paths passed to the Triton server container (e.g. /dev/video0 ). Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are typically used by Kura for debug purposes. Triton Server Service component [deprecated since 5.2.0] The Kura Triton Server component is the implementation of the inference engine APIs and provides methods for interacting with a local or remote Nvidia\u2122 Triton Server. As presented below, the component enables the user to configure a local server running on the gateway or to communicate to an external server to load specific models. The parameters used to configure the Triton Service are the following: Local Nvidia Triton Server : If enabled, a local native Nvidia Triton Server is started on the gateway. In this case, the model repository and backends path are mandatory. Moreover, the server address property is overridden and set to localhost. Be aware that the Triton Server has to be already installed on the system. Nvidia Triton Server address : the address of the Nvidia Triton Server. Nvidia Triton Server ports : the ports used to connect to the server for HTTP, GRPC, and Metrics services. Local model repository path : Only for a local instance, specify the path on the filesystem where the models are stored. Local model decryption password : Only for local instance, specify the password to be used for decrypting models stored in the model repository. If none is specified, models are supposed to be plaintext. Inference Models : a comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Local backends path : Only for a local instance, specify the path on the filesystem where the backends are stored. Optional configuration for the local backends : Only for local instance, a semi-colon separated list of configuration for the backends. i.e. tensorflow,version=2;tensorflow,allow-soft-placement=false Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are tipically used by Kura for debug purposes. Configuration for a local native Triton Server with Triton Server Service component [deprecated since 5.2.0] Note Requirement : tritonserver executable needs to be available in the path to the kurad user. Be sure to have a working Triton Server installation before configuring the local native Triton Server instance through Kura UI. When the Local Nvidia Triton Server option is set to true, a local instance of the Nvidia\u2122 Triton Server is started on the gateway. The following configuration is required: Local Nvidia Triton Server : true Nvidia Triton Server address : localhost Nvidia Triton Server ports : mandatory Local model repository path : mandatory Inference Models : mandatory. Note that the models have to be already present on the filesystem. Local backends path : mandatory The typical command used to start the Triton Server is like this: tritonserver --model-repository = <model_repository_path> \\ --backend-directory = <backend_repository_path> \\ --backend-config = <backend_config> \\ --http-port = <http_port> \\ --grpc-port = <grpc_port> \\ --metrics-port = <metrics_port> \\ --model-control-mode = explicit \\ --load-model = <model_name_1> \\ --load-model = <model_name_2> \\ ... Configuration for a local Triton Server running in a Docker container with Triton Server Service component [deprecated since 5.2.0] If the Nvidia\u2122 Triton Server is running as a Docker container in the gateway, the following configuration is required: Local Nvidia Triton Server : false Nvidia Triton Server address : localhost Nvidia Triton Server ports : \\<mandatory> Inference Models : \\<mandatory>. The models have to be already present on the filesystem. In order to correctly load the models at runtime, configure the server with the --model-control-mode=explicit option. The typical command used for running the docker container is as follows. Note the forward of the ports to not interfere with Kura. docker run --rm \\ -p4000:8000 \\ -p4001:8001 \\ -p4002:8002 \\ --shm-size = 150m \\ -v path/to/models:/models \\ nvcr.io/nvidia/tritonserver: [ version ] \\ tritonserver --model-repository = /models --model-control-mode = explicit Configuration for a remote Triton Server with Triton Server Service component [deprecated since 5.2.0] When the Nvidia\u2122 Triton Server is running on a remote server, the following configuration is needed: Local Nvidia Triton Server : false Nvidia Triton Server address : mandatory Nvidia Triton Server ports : mandatory ** Inference Models**: mandatory. The models have to be already present on the filesystem. AI Model Encryption Support For ensuring inference integrity and providing copyright protection of deep-learning models on edge devices, Kura provides decryption capabilities for trained models to be served through the Triton Server. How it works Prerequisites : a deep-learning trained model (or more) exists with the corresponding necessary configuration for running on the Triton Server without encryption. A folder containing the required files (model, configuration etc) has been tested on a Triton Server. Restrictions : if model encryption is used, the following restrictions apply: model encryption support is only available for a local Triton Server instance all models in the folder containing the encrypted models must be encrypted all models must be encrypted with OpenPGP-compliant AES 256 cipher algorithm all models must be encrypted with the same password Once the development of the deep-learning model is complete, the developer who wants to deploy the model on the edge device in a secure manner can proceed with encrypting the Triton model using the procedure detailed below. After encrypting the model he/she can transfer the file on the edge device using his/her preferred method. Kura will keep the stored model protected at all times and have the model decrypted in runtime only for use by the Inference Server Runtime. As soon as the model is correctly loaded into memory the decrypted model will be removed from the filesystem. As an additional security measure, the Model Repository containing the decrypted models will be stored in a temporary subfolder and will feature restrictive permission such that only Kura, the Inference Server and the root user will be able to access it. Encryption procedure Given a trained model inside the folder tf_autoencoder_fp32 (for example) with the following layout (see the official documentation for details): tf_autoencoder_fp32 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.savedmodel \u2502 \u251c\u2500\u2500 assets \u2502 \u251c\u2500\u2500 keras_metadata.pb \u2502 \u251c\u2500\u2500 saved_model.pb \u2502 \u2514\u2500\u2500 variables \u2502 \u251c\u2500\u2500 variables.data-00000-of-00001 \u2502 \u2514\u2500\u2500 variables.index \u2514\u2500\u2500 config.pbtxt Compress the model into a zip archive with the following command: zip -vr tf_autoencoder_fp32.zip tf_autoencoder_fp32/ then encrypt it with the AES 256 algorithm using the following gpg command: gpg --armor --symmetric --cipher-algo AES256 tf_autoencoder_fp32.zip The resulting archive tf_autoencoder_fp32.zip.asc can be transferred to the Local Model Repository Path on the target machine and will be decrypted by Kura.","title":"Nvidia\u2122 Triton Server Inference Engine"},{"location":"core-services/nvidia-triton-server-inference-engine/#nvidiatm-triton-server-inference-engine","text":"The Nvidia\u2122 Triton Server is an open-source inference service software that enables the user to deploy trained AI models from any framework on GPU or CPU infrastructure. It supports all major frameworks like TensorFlow, TensorRT, PyTorch, ONNX Runtime, and even custom framework backend. With specific backends, it is also possible to run Python scripts, mainly for pre-and post-processing purposes, and exploit the DALI building block for optimized operations. For more detail about the Triton Server, please refer to the official website . Kura provides three components for exposing the Triton Server service functionality which implement the inference engine APIs and provides methods for interacting with a local or remote Nvidia\u2122 Triton Server: TritonServerRemoteService : provides methods for interacting with a remote Nvidia\u2122 Triton Server without managing the server lifecycle. Can be used both for connecting to a remote instance or a local non-managed instance. It exposes a simpler but more limited configuration. TritonServerNativeService : provides methods for interacting with a local native Nvidia\u2122 Triton Server. Requires the Triton Server executable to be already available on the device and offers more options and features (like AI Model Encryption). TritonServerContainerService : provides methods for interacting with a local container running Nvidia\u2122 Triton Server. Requires the Triton Server container image to be already available on the device and offers more options and features (like AI Model Encryption). TritonServerService : provides methods for interacting with a local or remote Nvidia\u2122 Triton Server within the same component. Note : deprecated since 5.2.0","title":"Nvidia\u2122 Triton Server Inference Engine"},{"location":"core-services/nvidia-triton-server-inference-engine/#nvidiatm-triton-server-installation","text":"Before running Kura's Triton Server Service, you must install the Triton Inference Server. Here you can find the necessary steps for the available suggested installation methods.","title":"Nvidia\u2122 Triton Server installation"},{"location":"core-services/nvidia-triton-server-inference-engine/#native-triton-installation-on-jetson-devices","text":"A release of Triton for JetPack is provided in the tar file in the Triton Inference Server release notes . Full documentation is available here . Installation steps: Before running the executable you need to install the Runtime Dependencies for Triton . After doing so you can extract the tar file and run the executable in the bin folder. It is highly recommended to add the tritonserver executable to your path or symlinking the executable to /usr/local/bin .","title":"Native Triton installation on Jetson devices"},{"location":"core-services/nvidia-triton-server-inference-engine/#triton-docker-image-installation","text":"Before you can use the Triton Docker image you must install Docker . If you plan on using a GPU for inference you must also install the NVIDIA Container Toolkit . Pull the image using the following command. $ docker pull nvcr.io/nvidia/tritonserver:<xx.yy>-py3 Where <xx.yy> is the version of Triton that you want to pull.","title":"Triton Docker image installation"},{"location":"core-services/nvidia-triton-server-inference-engine/#native-triton-installation-on-supported-devices","text":"The official docs mention the possibility to perform a native installation on supported platform by extracting the binaries from the Docker images. To do so you must install the necessary dependencies (some can be found in the Jetson runtime dependencies docs ) on the system. For Triton to support NVIDIA GPUs you must install CUDA, cuBLAS and cuDNN referencing the support matrix . Note For Python models the libraries available to the Python model are the ones available for the user running the Triton server. Therefore you'll need to install the libraries through pip for the kurad user.","title":"Native Triton installation on supported devices"},{"location":"core-services/nvidia-triton-server-inference-engine/#triton-server-setup","text":"The Triton Inference Server serves models from one or more model repositories that are specified when the server is started. The model repository is the directory where you place the models that you want Triton to serve. Be sure to follow the instructions to setup the model repository directory. Further information about an example Triton Server setup can be found in the official documentation .","title":"Triton Server setup"},{"location":"core-services/nvidia-triton-server-inference-engine/#triton-server-remote-service-component","text":"The Kura Triton Server Remote Service component is the implementation of the inference engine APIs and provides methods for interacting with a remote (i.e. unmnanaged) Nvidia\u2122 Triton Server. As presented below, the component enables the user to communicate to an external server to load specific models. With this component the server lifecycle (startup, shutdown) won't be handled by Kura and it's the user responsibility to make it available to Kura for connecting. The parameters used to configure the Triton Service are the following: Nvidia Triton Server address : the address of the Nvidia Triton Server. Nvidia Triton Server ports : the ports used to connect to the server for HTTP, GRPC, and Metrics services. Inference Models : a comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. By default, size of 4194304 bytes (= 4.19 MB) is used. Increase this value to be able to send large amounts of data as input to the Triton server (like Full HD images). The Kura logs will show the following error when exceeding such limit: io.grpc.StatusRuntimeException: RESOURCE_EXHAUSTED: gRPC message exceeds maximum size 4194304 Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are tipically used by Kura for debug purposes.","title":"Triton Server Remote Service component"},{"location":"core-services/nvidia-triton-server-inference-engine/#triton-server-native-service-component","text":"The Kura Triton Server component is the implementation of the inference engine APIs and provides methods for interacting with a local native Nvidia\u2122 Triton Server. As presented below, the component enables the user to configure a local server running on the gateway and handles its lifecycle. This operating mode supports more features for interacting with the server like the AI Model Encryption . Note Requirement : tritonserver executable needs to be available in the path to the kurad user. Be sure to have a working Triton Server installation before configuring the local native Triton Server instance through Kura UI. The parameters used to configure the Triton Service are the following: Nvidia Triton Server ports : the ports used to connect to the server for HTTP, GRPC, and Metrics services. Local model repository path : Specify the path on the filesystem where the models are stored. Local model decryption password : Specify the password to be used for decrypting models stored in the model repository. If none is specified, models are supposed to be plaintext. Inference Models : a comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Local backends path : Specify the path on the filesystem where the backends are stored. Optional configuration for the local backends : A semi-colon separated list of configuration for the backends. i.e. tensorflow,version=2;tensorflow,allow-soft-placement=false Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are tipically used by Kura for debug purposes.","title":"Triton Server Native Service component"},{"location":"core-services/nvidia-triton-server-inference-engine/#triton-server-container-service-component","text":"The Kura Triton Server component is the implementation of the inference engine APIs and provides methods for interacting with a local container running the Nvidia\u2122 Triton Server. As presented below, the component enables the user to configure a local server running on the gateway and handles its lifecycle. This operating mode supports more features for interacting with the server like the AI Model Encryption . Note Requirement : 1. Triton Server container image already installed on the device. For instructions refer to the installation section in this page. 2. Kura's Container Orchestration Service enabled. The parameters used to configure the Triton Service are the following: Container Image : The image the container will be created with. Container Image Tag : Describes which image version that should be used for creating the container. Nvidia Triton Server ports : The ports used to connect to the server for HTTP, GRPC, and Metrics services. Local model repository path : Specify the path on the filesystem where the models are stored. Local model decryption password : Specify the password to be used for decrypting models stored in the model repository. If none is specified, models are supposed to be plaintext. Inference Models : A comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Local Backends Path : Specifies the host filesystem path where the backends are stored. This folder will be mounted as a volume inside the Triton container and will override the existing backends. If left blank, the backends provided by the Triton container will be used. Optional configuration for the local backends : A semi-colon separated list of configuration for the backends. i.e. tensorflow,version=2;tensorflow,allow-soft-placement=false Memory : The maximum amount of memory the container can use in bytes. Set it as a positive integer, optionally followed by a suffix of b, k, m, g, to indicate bytes, kilobytes, megabytes, or gigabytes. The minimum allowed value is platform dependent (i.e. 6m). If left empty, the memory assigned to the container will be set to a default value by the native container orchestrator. CPUs : Specify how many CPUs the Triton container can use. Decimal values are allowed, so if set to 1.5, the container will use at most one and a half cpu resource. GPUs : Specify how many Nvidia GPUs the Triton container can use. Allowed values are 'all' or an integer number. If there's no Nvidia GPU installed, leave the field empty. If the Nvidia Container Runtime is used, leave the field empty. Runtime : Specifies the fully qualified name of an alternate OCI-compatible runtime, which is used to run commands specified by the 'run' instruction for the Triton container. Example: nvidia corresponds to --runtime=nvidia . Note: when using the Nvidia Container Runtime, leave the GPUs field empty. The GPUs available on the system will be accessible from the container by default. Devices : A comma-separated list of device paths passed to the Triton server container (e.g. /dev/video0 ). Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are typically used by Kura for debug purposes.","title":"Triton Server Container Service component"},{"location":"core-services/nvidia-triton-server-inference-engine/#triton-server-service-component-deprecated-since-520","text":"The Kura Triton Server component is the implementation of the inference engine APIs and provides methods for interacting with a local or remote Nvidia\u2122 Triton Server. As presented below, the component enables the user to configure a local server running on the gateway or to communicate to an external server to load specific models. The parameters used to configure the Triton Service are the following: Local Nvidia Triton Server : If enabled, a local native Nvidia Triton Server is started on the gateway. In this case, the model repository and backends path are mandatory. Moreover, the server address property is overridden and set to localhost. Be aware that the Triton Server has to be already installed on the system. Nvidia Triton Server address : the address of the Nvidia Triton Server. Nvidia Triton Server ports : the ports used to connect to the server for HTTP, GRPC, and Metrics services. Local model repository path : Only for a local instance, specify the path on the filesystem where the models are stored. Local model decryption password : Only for local instance, specify the password to be used for decrypting models stored in the model repository. If none is specified, models are supposed to be plaintext. Inference Models : a comma-separated list of inference model names that the server will load. The models have to be already present in the filesystem where the server is running. This option simply tells the server to load the given models from a local or remote repository. Local backends path : Only for a local instance, specify the path on the filesystem where the backends are stored. Optional configuration for the local backends : Only for local instance, a semi-colon separated list of configuration for the backends. i.e. tensorflow,version=2;tensorflow,allow-soft-placement=false Timeout (in seconds) for time consuming tasks : Timeout (in seconds) for time consuming tasks like server startup, shutdown or model load. If the task exceeds the timeout, the operation will be terminated with an error. Max. GRPC message size (bytes) : this field controls the maximum allowed size for the GRPC calls to the server instance. Note Pay attention on the ports used for communicating with the Triton Server. The default ports are the 8000-8002, but these are tipically used by Kura for debug purposes.","title":"Triton Server Service component [deprecated since 5.2.0]"},{"location":"core-services/nvidia-triton-server-inference-engine/#configuration-for-a-local-native-triton-server-with-triton-server-service-component-deprecated-since-520","text":"Note Requirement : tritonserver executable needs to be available in the path to the kurad user. Be sure to have a working Triton Server installation before configuring the local native Triton Server instance through Kura UI. When the Local Nvidia Triton Server option is set to true, a local instance of the Nvidia\u2122 Triton Server is started on the gateway. The following configuration is required: Local Nvidia Triton Server : true Nvidia Triton Server address : localhost Nvidia Triton Server ports : mandatory Local model repository path : mandatory Inference Models : mandatory. Note that the models have to be already present on the filesystem. Local backends path : mandatory The typical command used to start the Triton Server is like this: tritonserver --model-repository = <model_repository_path> \\ --backend-directory = <backend_repository_path> \\ --backend-config = <backend_config> \\ --http-port = <http_port> \\ --grpc-port = <grpc_port> \\ --metrics-port = <metrics_port> \\ --model-control-mode = explicit \\ --load-model = <model_name_1> \\ --load-model = <model_name_2> \\ ...","title":"Configuration for a local native Triton Server with Triton Server Service component [deprecated since 5.2.0]"},{"location":"core-services/nvidia-triton-server-inference-engine/#configuration-for-a-local-triton-server-running-in-a-docker-container-with-triton-server-service-component-deprecated-since-520","text":"If the Nvidia\u2122 Triton Server is running as a Docker container in the gateway, the following configuration is required: Local Nvidia Triton Server : false Nvidia Triton Server address : localhost Nvidia Triton Server ports : \\<mandatory> Inference Models : \\<mandatory>. The models have to be already present on the filesystem. In order to correctly load the models at runtime, configure the server with the --model-control-mode=explicit option. The typical command used for running the docker container is as follows. Note the forward of the ports to not interfere with Kura. docker run --rm \\ -p4000:8000 \\ -p4001:8001 \\ -p4002:8002 \\ --shm-size = 150m \\ -v path/to/models:/models \\ nvcr.io/nvidia/tritonserver: [ version ] \\ tritonserver --model-repository = /models --model-control-mode = explicit","title":"Configuration for a local Triton Server running in a Docker container with Triton Server Service component [deprecated since 5.2.0]"},{"location":"core-services/nvidia-triton-server-inference-engine/#configuration-for-a-remote-triton-server-with-triton-server-service-component-deprecated-since-520","text":"When the Nvidia\u2122 Triton Server is running on a remote server, the following configuration is needed: Local Nvidia Triton Server : false Nvidia Triton Server address : mandatory Nvidia Triton Server ports : mandatory ** Inference Models**: mandatory. The models have to be already present on the filesystem.","title":"Configuration for a remote Triton Server with Triton Server Service component [deprecated since 5.2.0]"},{"location":"core-services/nvidia-triton-server-inference-engine/#ai-model-encryption-support","text":"For ensuring inference integrity and providing copyright protection of deep-learning models on edge devices, Kura provides decryption capabilities for trained models to be served through the Triton Server.","title":"AI Model Encryption Support"},{"location":"core-services/nvidia-triton-server-inference-engine/#how-it-works","text":"Prerequisites : a deep-learning trained model (or more) exists with the corresponding necessary configuration for running on the Triton Server without encryption. A folder containing the required files (model, configuration etc) has been tested on a Triton Server. Restrictions : if model encryption is used, the following restrictions apply: model encryption support is only available for a local Triton Server instance all models in the folder containing the encrypted models must be encrypted all models must be encrypted with OpenPGP-compliant AES 256 cipher algorithm all models must be encrypted with the same password Once the development of the deep-learning model is complete, the developer who wants to deploy the model on the edge device in a secure manner can proceed with encrypting the Triton model using the procedure detailed below. After encrypting the model he/she can transfer the file on the edge device using his/her preferred method. Kura will keep the stored model protected at all times and have the model decrypted in runtime only for use by the Inference Server Runtime. As soon as the model is correctly loaded into memory the decrypted model will be removed from the filesystem. As an additional security measure, the Model Repository containing the decrypted models will be stored in a temporary subfolder and will feature restrictive permission such that only Kura, the Inference Server and the root user will be able to access it.","title":"How it works"},{"location":"core-services/nvidia-triton-server-inference-engine/#encryption-procedure","text":"Given a trained model inside the folder tf_autoencoder_fp32 (for example) with the following layout (see the official documentation for details): tf_autoencoder_fp32 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.savedmodel \u2502 \u251c\u2500\u2500 assets \u2502 \u251c\u2500\u2500 keras_metadata.pb \u2502 \u251c\u2500\u2500 saved_model.pb \u2502 \u2514\u2500\u2500 variables \u2502 \u251c\u2500\u2500 variables.data-00000-of-00001 \u2502 \u2514\u2500\u2500 variables.index \u2514\u2500\u2500 config.pbtxt Compress the model into a zip archive with the following command: zip -vr tf_autoencoder_fp32.zip tf_autoencoder_fp32/ then encrypt it with the AES 256 algorithm using the following gpg command: gpg --armor --symmetric --cipher-algo AES256 tf_autoencoder_fp32.zip The resulting archive tf_autoencoder_fp32.zip.asc can be transferred to the Local Model Repository Path on the target machine and will be decrypted by Kura.","title":"Encryption procedure"},{"location":"core-services/position-service/","text":"Position Service The PositionService provides the geographic position of the gateway if a GPS component is available and enabled. When this service is enabled and provides a valid geographic position, this position is published in the gateway birth certificate with its location. The GPS connection parameters must be defined in order to allow the service to receive the GPS frames. The PositionService supports direct access to gps device or the connection to that through gpsd. For a device that is not connected to a GPS, it is possible to define a static position by entering latitude, longitude, and altitude. In this case, the position is returned by the PositionService as if it were an actual GPS position. This may be useful when a gateway is installed in a known place and does not move. To use this service, select the PositionService option located in the Services area as shown in the screen capture below. This service provides the following configuration parameters: enabled - defines whether or not this service is enabled or disabled. (Required field.) static - specifies true or false whether to use a static position instead of a GPS. (Required field.) provider - species which position provider use, can be gpsd or serial. gpsd - gpsd service daemon if is available on the system. serial - direct access to gps device through serial or usb port. gpsd.host - host where gpsd service deamon is running. (required only if gpsd provider is selected.) gpsd.port - port where gpsd service is listening. (required only if gpsd provider is selected.) latitude - provides the static latitude value in degrees. longitude - provides the static longitude value in degrees. altitude - provides the static altitude value in meters. port - supplies the USB or serial port of the GPS device. baudRate - supplies the baud rate of the GPS device. bitsPerWord - sets the number of bits per word (databits) for the serial communication to the GPS device. stopbits - sets the number of stop bits for the serial communication to the GPS device. parity - sets the parity for the serial communication to the GPS device.","title":"Position Service"},{"location":"core-services/position-service/#position-service","text":"The PositionService provides the geographic position of the gateway if a GPS component is available and enabled. When this service is enabled and provides a valid geographic position, this position is published in the gateway birth certificate with its location. The GPS connection parameters must be defined in order to allow the service to receive the GPS frames. The PositionService supports direct access to gps device or the connection to that through gpsd. For a device that is not connected to a GPS, it is possible to define a static position by entering latitude, longitude, and altitude. In this case, the position is returned by the PositionService as if it were an actual GPS position. This may be useful when a gateway is installed in a known place and does not move. To use this service, select the PositionService option located in the Services area as shown in the screen capture below. This service provides the following configuration parameters: enabled - defines whether or not this service is enabled or disabled. (Required field.) static - specifies true or false whether to use a static position instead of a GPS. (Required field.) provider - species which position provider use, can be gpsd or serial. gpsd - gpsd service daemon if is available on the system. serial - direct access to gps device through serial or usb port. gpsd.host - host where gpsd service deamon is running. (required only if gpsd provider is selected.) gpsd.port - port where gpsd service is listening. (required only if gpsd provider is selected.) latitude - provides the static latitude value in degrees. longitude - provides the static longitude value in degrees. altitude - provides the static altitude value in meters. port - supplies the USB or serial port of the GPS device. baudRate - supplies the baud rate of the GPS device. bitsPerWord - sets the number of bits per word (databits) for the serial communication to the GPS device. stopbits - sets the number of stop bits for the serial communication to the GPS device. parity - sets the parity for the serial communication to the GPS device.","title":"Position Service"},{"location":"core-services/rest-service/","text":"REST Service Kura provides a built-in REST Service based on the osgi-jax-rs-connector project. By default, REST service providers register their services using the context path /services . The REST service provides the BASIC Authentication support and HTTPS client certificate authentication support. Starting from Kura 5.4.0, REST service provides built in session management support, the Session REST APIs can be used to establish a session. Using sessions is the recommended way for interacting with Kura REST APIs from a browser based application, for this use case it is also possible to disable the default session-less BASIC and certificate based authentication (see the Basic Authentication Enabled and Enable Certificate Authentication Whitout Session Management configuration parameters below). REST API access is available on all HTTP ports defined in the HTTP/HTTPS Configuration section, unless access is restricted to dedicated ports using the corresponding configuration parameter (see below). Certificate authentication support is only available on the HTTPS With Certificate Authentication Ports configured in HTTP/HTTPS Configuration section. Kura Identity names and passwords can be used for BASIC Authentication. Certificate authentication follows the same rules as Gateway Administration Console Authentication . Warning If the forced password change feature for a given identity is enabled, REST API password authentication will be blocked for that identity until the password is updated by the user or the feature is manually disabled. Certificate authentication will continue to be allowed even if the forced password change feature is enabled. JAX-RS roles are mapped to Kura permissions, the name of a permission associated with a JAX-RS role is the rest. prefix followed by the role name. For example the assets role is mapped to the rest.assets permission. REST related permissions can be assigned to an identity using the Gateway Administration Console in the Identities section. Rest Service configuration The available configuration parameters are the following: Allowed Ports : If set to a non empty list, REST API access will be allowed only on the specified ports. If set to an empty list, access will be allowed on all ports. Please make sure that the allowed ports are open in HttpService and Firewall configuration. (Default: empty) Password Authentication Enabled : Enables or disables the built-in password authentication support. (Default: true) Certificate Authentication Enabled : Enables or disables the built-in certificate authentication support. (Default: true) Session Based Authentication Enabled : If set to true, enables authentication using the dedicated /services/session/v1 endpoints and cookie based session management. (Default: true) Session Inactivity Interval (Seconds) : The session inactivity interval, sessions will expire if no request is performed for the amount of time specified by this parameter in seconds. This parameter is ignored if Session Based Authentication Enabled is set to false. (Default: 900) Basic Authentication Enabled : Allows to perform authentication by providing identity name and password as BASIC credentials in the request to any resource endpoint. Requires that the Password Authentication Enabled parameter is set to true. (Default: true) Enable Certificate Authentication Without Session Management : If set to true, calling /services/session/v1/certificate to create a session will not be necessary in order to perform certificate based authentication. Presenting a valid HTTPS client certificate and accessing resource endpoint directly is enough for authentication to succeed. Requires that the Certificate Authentication Enabled parameter is set to true. (Default: true) Custom authentication methods Starting from Kura 5.2.0 it is also possible to develop custom REST authentication method providers by registering an implementation of the org.eclipse.kura.rest.auth.AuthenticationProvider interface as an OSGi service. The org.eclipse.kura.example.rest.authentication.provider bundle in Kura repository provides an example on how to implement a custom authentication method. Assets REST APIs Kura exposes REST APIs for the Asset instances instantiated in the framework. Assets REST APIs are available in the context path /services/assets . Following, the supported REST endpoints. Method Path Allowed roles Encoding Request parameters Description GET / assets JSON None Returns the list of available assets GET /{pid} assets JSON None Returns the list of available channels for the selected asset (specified by the corresponding PID) GET /{pid}/_read assets JSON None Returns the read for all the READ channels in the selected Asset POST /{pid}/_read assets JSON The list of channels where the READ operation should be performed. Returns the result of the read operation for the specified channels POST /{pid}/_write assets JSON The list of channels and associated values that will be used for the WRITE operation. Performs the write operation for the specified channels returning the result of the operation.","title":"REST Service"},{"location":"core-services/rest-service/#rest-service","text":"Kura provides a built-in REST Service based on the osgi-jax-rs-connector project. By default, REST service providers register their services using the context path /services . The REST service provides the BASIC Authentication support and HTTPS client certificate authentication support. Starting from Kura 5.4.0, REST service provides built in session management support, the Session REST APIs can be used to establish a session. Using sessions is the recommended way for interacting with Kura REST APIs from a browser based application, for this use case it is also possible to disable the default session-less BASIC and certificate based authentication (see the Basic Authentication Enabled and Enable Certificate Authentication Whitout Session Management configuration parameters below). REST API access is available on all HTTP ports defined in the HTTP/HTTPS Configuration section, unless access is restricted to dedicated ports using the corresponding configuration parameter (see below). Certificate authentication support is only available on the HTTPS With Certificate Authentication Ports configured in HTTP/HTTPS Configuration section. Kura Identity names and passwords can be used for BASIC Authentication. Certificate authentication follows the same rules as Gateway Administration Console Authentication . Warning If the forced password change feature for a given identity is enabled, REST API password authentication will be blocked for that identity until the password is updated by the user or the feature is manually disabled. Certificate authentication will continue to be allowed even if the forced password change feature is enabled. JAX-RS roles are mapped to Kura permissions, the name of a permission associated with a JAX-RS role is the rest. prefix followed by the role name. For example the assets role is mapped to the rest.assets permission. REST related permissions can be assigned to an identity using the Gateway Administration Console in the Identities section.","title":"REST Service"},{"location":"core-services/rest-service/#rest-service-configuration","text":"The available configuration parameters are the following: Allowed Ports : If set to a non empty list, REST API access will be allowed only on the specified ports. If set to an empty list, access will be allowed on all ports. Please make sure that the allowed ports are open in HttpService and Firewall configuration. (Default: empty) Password Authentication Enabled : Enables or disables the built-in password authentication support. (Default: true) Certificate Authentication Enabled : Enables or disables the built-in certificate authentication support. (Default: true) Session Based Authentication Enabled : If set to true, enables authentication using the dedicated /services/session/v1 endpoints and cookie based session management. (Default: true) Session Inactivity Interval (Seconds) : The session inactivity interval, sessions will expire if no request is performed for the amount of time specified by this parameter in seconds. This parameter is ignored if Session Based Authentication Enabled is set to false. (Default: 900) Basic Authentication Enabled : Allows to perform authentication by providing identity name and password as BASIC credentials in the request to any resource endpoint. Requires that the Password Authentication Enabled parameter is set to true. (Default: true) Enable Certificate Authentication Without Session Management : If set to true, calling /services/session/v1/certificate to create a session will not be necessary in order to perform certificate based authentication. Presenting a valid HTTPS client certificate and accessing resource endpoint directly is enough for authentication to succeed. Requires that the Certificate Authentication Enabled parameter is set to true. (Default: true)","title":"Rest Service configuration"},{"location":"core-services/rest-service/#custom-authentication-methods","text":"Starting from Kura 5.2.0 it is also possible to develop custom REST authentication method providers by registering an implementation of the org.eclipse.kura.rest.auth.AuthenticationProvider interface as an OSGi service. The org.eclipse.kura.example.rest.authentication.provider bundle in Kura repository provides an example on how to implement a custom authentication method.","title":"Custom authentication methods"},{"location":"core-services/rest-service/#assets-rest-apis","text":"Kura exposes REST APIs for the Asset instances instantiated in the framework. Assets REST APIs are available in the context path /services/assets . Following, the supported REST endpoints. Method Path Allowed roles Encoding Request parameters Description GET / assets JSON None Returns the list of available assets GET /{pid} assets JSON None Returns the list of available channels for the selected asset (specified by the corresponding PID) GET /{pid}/_read assets JSON None Returns the read for all the READ channels in the selected Asset POST /{pid}/_read assets JSON The list of channels where the READ operation should be performed. Returns the result of the read operation for the specified channels POST /{pid}/_write assets JSON The list of channels and associated values that will be used for the WRITE operation. Performs the write operation for the specified channels returning the result of the operation.","title":"Assets REST APIs"},{"location":"core-services/simple-artemis-mqtt-broker/","text":"Simple Artemis MQTT Broker By default, this instance is disabled but, selecting the Simple Artemis MQTT Broker option in Services it is possible to enable a basic instance of an \u200bActiveMQ-7 broker with MQTT capabilities. The service has the following configuration fields: Enabled - (Required) - Enables the broker instance MQTT address - MQTT broker listener address. In order to allow access to the broker from processes running on external nodes, make sure to bind the server to an externally accessible address. Setting this parameter to 0.0.0.0 binds to all addresses. MQTT port - (Required) - MQTT broker port, make sure to open the specified port in the firewall configuration section if external access to the broker is required. User name - The username\u200b required to access to the broker Password of the user - The password required to connect. If the password is empty, no password will be required to connect.","title":"Simple Artemis MQTT Broker"},{"location":"core-services/simple-artemis-mqtt-broker/#simple-artemis-mqtt-broker","text":"By default, this instance is disabled but, selecting the Simple Artemis MQTT Broker option in Services it is possible to enable a basic instance of an \u200bActiveMQ-7 broker with MQTT capabilities. The service has the following configuration fields: Enabled - (Required) - Enables the broker instance MQTT address - MQTT broker listener address. In order to allow access to the broker from processes running on external nodes, make sure to bind the server to an externally accessible address. Setting this parameter to 0.0.0.0 binds to all addresses. MQTT port - (Required) - MQTT broker port, make sure to open the specified port in the firewall configuration section if external access to the broker is required. User name - The username\u200b required to access to the broker Password of the user - The password required to connect. If the password is empty, no password will be required to connect.","title":"Simple Artemis MQTT Broker"},{"location":"core-services/sqlite-db-service/","text":"SQLite Db Service Starting from version 5.3, Kura provides provides an integration of the SQLite database, based on the org.xerial:sqlite-jdbc wrapper . The database integration is not included in the official distribution, but it can be downloaded from Eclipse Marketplace as a deployment package. Warning Note about Raspberry PI: Recent versions of Raspberry Pi OS 32 bit on Raspberry PI 4 will use by default a 64 bit kernel with a 32 bit userspace. This can cause issues to applications that use the result of uname -m to decide which native libraries to load (see https://github.com/raspberrypi/firmware/issues/1795). This currently affects the Kura SQLite database connector. It should be possible to solve by switching to the 32 bit kernel setting arm_64bit=0 in /boot/config.txt and restarting the device. Supported Features Kura supports the following SQLite database features: Persistence modes : The implementation currently supports in-memory and file-based database instances. Multiple database instances : It is possible to create and configure multiple database instances from the Kura Administration UI, these instances can be selectively consumed by applications. Journaling modes : The implementation currently supports the WAL and rollback journal journaling modes. Periodic database defrag and checkpoint : The implementations currently supports periodic defrag (VACUUM) and periodic WAL checkpoint. Usage Creating a new SQLite database instance To create a new SQLite database instance, use the following procedure: Open the Administrative UI and press the + button in the side menu, under the Services section. A pop-up dialog should appear. Select org.eclipse.kura.db.SQLiteDbService from the Factory drop-down list, enter an arbitrary name for the new instance and click Apply . An entry for the newly created instance should appear in the side menu under Services , click on it to review its configuration. It is not possible to create different DB instances that manage the same database file. Configuration Parameters The SQLite DB provides the following configuration parameters: Database Mode : Defines the database mode. If In Memory is selected, the database will not be persisted on the filesystem, all data will be lost if Kura is restarted and/or the database instance is deleted. If Persisted is selected, the database will be stored on disk in the location specified by the Persisted Database Path parameter. Persisted Database Path : Defines the path to the database file (it must include the database file name). This parameter is only relevant for persisted databases. Encryption Key : Allows to specify a key/passphrase for encrypting the database file. This feature requires a SQLite binary with an encryption extension, and is only relevant for persisted databases. The key format can be specified using the Encryption Key Format parameter. If the value of this parameter is changed, the encryption key of the database will be updated accordingly. This parameter can be left empty to create an unencrypted database or to decrypt an encrypted one. Note The sqlite-jdbc version distributed with Kura does not contain any encryption extension, encryption features will not be available out of the box. See sqlite-jdbc documentaton for instructions about how to use a security extension. Encryption Key Format : Allows to specify the format of the Encryption Key parameter value. The possible values are ASCII (an ASCII string), Hex SSE (the key is an hexadecimal string to be used with the SSE extension) or Hex SQLCipher (the key is an hexadecimal string to be used with the SQLCipher extension). Journal Mode : The database journal mode. The following options are available: Rollback Journal : The database instance will use the rollback journal for more details. More specifically, the DELETE argument will be passed to the pragma journal_mode command. WAL : The database instance will use WAL mode . This is the default mode. The WAL mode description page contains a comparison of the two modes. Defrag enabled : Enables or disables the database defragmentation. Use the Defrag Interval parameter to specify the interval. Defrag interval (seconds) : The implementation supports running periodic defragmentation using the VACUUM command . This parameter specifies the interval in minutes between two successive checkpoints, set to zero to disable. This parameter is only relevant for persisted databases. Warning The total disk space used by SQLite database files might temporarily increase during defragmentation and/or if transactions that modify a lot of data are performed (including deletion). In particular: Defragmentation is implemented by copying all non-free database pages to a new file and then deleting the original file. If transactions that involve a lot of data are performed, in case of rollback journal the old content of the modified pages will be stored in the journal until the transaction is completed, and in WAL mode the new content of modified pages will be stored to the WAL file until the next checkpoint is performed. It is recommended to perform some tests to determine the maximum database files size that will be used by the application and ensure that the size of the partition containing the database is at least twice as the expected db size. Checkpoint enabled : Enables or disables checkpoints in WAL journal mode. Use the WAL Checkpoint Interval parameter to specify the interval. WAL Checkpoint Interval (Seconds) : The implementation supports running periodic periodic WAL checkpoints . Checkpoints will be performed in TRUNCATE mode. This parameter specifies the interval in seconds between two consecutive checkpoints, set to zero to disable. This parameter is only relevant for persisted databases in WAL Journal Mode. In WAL mode a checkpoint will be performed after a periodic defragmentation regardless of the value of this parameter. Connection pool max size : The implementation manages connections using a connection pool. This parameter defines the maximum number of connections for the pool. If a new connection is requested Delete Database Files On Failure : If set to true, the database files will be deleted in case of failure in opening a persisted database. This is intended as a last resort measure for keeping the database service operational, especially in the case when it is used as a cloud connection message store. Debug Shell Access Enabled : Enables or disables the interaction with this database instance using the sqlitedbg:excuteQuery OSGi console command. (see #debug-shell) Selecting a database instance for existing components A database instance is identified by its Kura service PID . The PID for instances created using the Web UI is the string entered in the Name field at step 2 of the previous section. The built-in components that use database functionalities allow to specify which instance to use in their configuration. These components are the DataService component of the cloud stack, the Wire Record Store and Wire Record Query wire components. The configuration of each component contains a property that allows to specify the Kura Service PID of the desired instance. Warning Using SQLite database instances through the deprecated DbFilter and DbStore components is not supported. Usage through Wires It is possible to store and extract Wire Records into/from a SQLite database instance using the Wire Record Store and Wire Record Query wire components. When a Wire Record is received by a Wire Record Store attached to a SQLite based database instance, the data will be stored in a table whose name is the current value of the Record Collection Name configuration parameter of the Wire Component. Each property contained in a Wire Record will be appended to a column with the same name as the property key. A new column will be created if it doesn't already exists. Since it is not possible to establish a one to one mapping between SQLite storage classes and the data types available on the Wires, the implementation will assign a custom type name to the created columns in order to keep track of the inserted Wire Record property type. The custom types will be assigned according to the following table: Wires Data Type Column Type Name Storage Class Type Affinity BOOLEAN BOOLEAN INTEGER INTEGER INT INTEGER LONG BIGINT INTEGER FLOAT FLOAT REAL DOUBLE DOUBLE REAL STRING TEXT TEXT BYTE_ARRAY BLOB BLOB The custom column type makes it possible to preserve the original type when data is extracted with the Wire Record Query component. Please note that the resulting type may change in case of queries that build computed columns. Warning It is not recommended to store Wire Records having properties with the same key and different value type. If the value type changes, the target column will be dropped and recreated with the type derived from the last received record. All existing data in the target column will be lost. The purpose of this is to allow changing the type of a column with a Wire Graph configuration update. Debug shell It is possible to inspect the contents of the database file using the OSGi console with the following command: sqlitedbg:executeQuery dbServicePid 'query' or more simply executeQuery dbServicePid 'query' where dbServicePid is the user defined pid of the target database instance and query is an arbitrary SQL query to be executed (make sure to properly quote the query string with the ' character). The command will print the result set or changed row count on the console. It is only possible to access database instances whose Debug Shell Access Enabled configuration parameter is set to true . The default of this parameter is false . The OSGi console is disabled by default, it can be accessed by starting the framework with the /opt/eclipse/kura/bin/start_kura_debug.sh script and running the following command on the gateway: telnet localhost 5002 Warning This feature is intended for debug purposes only, the Debug Shell Access Enabled parameter as well as the OSGi console should not be left enabled on production systems.","title":"SQLite DB Service"},{"location":"core-services/sqlite-db-service/#sqlite-db-service","text":"Starting from version 5.3, Kura provides provides an integration of the SQLite database, based on the org.xerial:sqlite-jdbc wrapper . The database integration is not included in the official distribution, but it can be downloaded from Eclipse Marketplace as a deployment package. Warning Note about Raspberry PI: Recent versions of Raspberry Pi OS 32 bit on Raspberry PI 4 will use by default a 64 bit kernel with a 32 bit userspace. This can cause issues to applications that use the result of uname -m to decide which native libraries to load (see https://github.com/raspberrypi/firmware/issues/1795). This currently affects the Kura SQLite database connector. It should be possible to solve by switching to the 32 bit kernel setting arm_64bit=0 in /boot/config.txt and restarting the device.","title":"SQLite Db Service"},{"location":"core-services/sqlite-db-service/#supported-features","text":"Kura supports the following SQLite database features: Persistence modes : The implementation currently supports in-memory and file-based database instances. Multiple database instances : It is possible to create and configure multiple database instances from the Kura Administration UI, these instances can be selectively consumed by applications. Journaling modes : The implementation currently supports the WAL and rollback journal journaling modes. Periodic database defrag and checkpoint : The implementations currently supports periodic defrag (VACUUM) and periodic WAL checkpoint.","title":"Supported Features"},{"location":"core-services/sqlite-db-service/#usage","text":"","title":"Usage"},{"location":"core-services/sqlite-db-service/#creating-a-new-sqlite-database-instance","text":"To create a new SQLite database instance, use the following procedure: Open the Administrative UI and press the + button in the side menu, under the Services section. A pop-up dialog should appear. Select org.eclipse.kura.db.SQLiteDbService from the Factory drop-down list, enter an arbitrary name for the new instance and click Apply . An entry for the newly created instance should appear in the side menu under Services , click on it to review its configuration. It is not possible to create different DB instances that manage the same database file.","title":"Creating a new SQLite database instance"},{"location":"core-services/sqlite-db-service/#configuration-parameters","text":"The SQLite DB provides the following configuration parameters: Database Mode : Defines the database mode. If In Memory is selected, the database will not be persisted on the filesystem, all data will be lost if Kura is restarted and/or the database instance is deleted. If Persisted is selected, the database will be stored on disk in the location specified by the Persisted Database Path parameter. Persisted Database Path : Defines the path to the database file (it must include the database file name). This parameter is only relevant for persisted databases. Encryption Key : Allows to specify a key/passphrase for encrypting the database file. This feature requires a SQLite binary with an encryption extension, and is only relevant for persisted databases. The key format can be specified using the Encryption Key Format parameter. If the value of this parameter is changed, the encryption key of the database will be updated accordingly. This parameter can be left empty to create an unencrypted database or to decrypt an encrypted one. Note The sqlite-jdbc version distributed with Kura does not contain any encryption extension, encryption features will not be available out of the box. See sqlite-jdbc documentaton for instructions about how to use a security extension. Encryption Key Format : Allows to specify the format of the Encryption Key parameter value. The possible values are ASCII (an ASCII string), Hex SSE (the key is an hexadecimal string to be used with the SSE extension) or Hex SQLCipher (the key is an hexadecimal string to be used with the SQLCipher extension). Journal Mode : The database journal mode. The following options are available: Rollback Journal : The database instance will use the rollback journal for more details. More specifically, the DELETE argument will be passed to the pragma journal_mode command. WAL : The database instance will use WAL mode . This is the default mode. The WAL mode description page contains a comparison of the two modes. Defrag enabled : Enables or disables the database defragmentation. Use the Defrag Interval parameter to specify the interval. Defrag interval (seconds) : The implementation supports running periodic defragmentation using the VACUUM command . This parameter specifies the interval in minutes between two successive checkpoints, set to zero to disable. This parameter is only relevant for persisted databases. Warning The total disk space used by SQLite database files might temporarily increase during defragmentation and/or if transactions that modify a lot of data are performed (including deletion). In particular: Defragmentation is implemented by copying all non-free database pages to a new file and then deleting the original file. If transactions that involve a lot of data are performed, in case of rollback journal the old content of the modified pages will be stored in the journal until the transaction is completed, and in WAL mode the new content of modified pages will be stored to the WAL file until the next checkpoint is performed. It is recommended to perform some tests to determine the maximum database files size that will be used by the application and ensure that the size of the partition containing the database is at least twice as the expected db size. Checkpoint enabled : Enables or disables checkpoints in WAL journal mode. Use the WAL Checkpoint Interval parameter to specify the interval. WAL Checkpoint Interval (Seconds) : The implementation supports running periodic periodic WAL checkpoints . Checkpoints will be performed in TRUNCATE mode. This parameter specifies the interval in seconds between two consecutive checkpoints, set to zero to disable. This parameter is only relevant for persisted databases in WAL Journal Mode. In WAL mode a checkpoint will be performed after a periodic defragmentation regardless of the value of this parameter. Connection pool max size : The implementation manages connections using a connection pool. This parameter defines the maximum number of connections for the pool. If a new connection is requested Delete Database Files On Failure : If set to true, the database files will be deleted in case of failure in opening a persisted database. This is intended as a last resort measure for keeping the database service operational, especially in the case when it is used as a cloud connection message store. Debug Shell Access Enabled : Enables or disables the interaction with this database instance using the sqlitedbg:excuteQuery OSGi console command. (see #debug-shell)","title":"Configuration Parameters"},{"location":"core-services/sqlite-db-service/#selecting-a-database-instance-for-existing-components","text":"A database instance is identified by its Kura service PID . The PID for instances created using the Web UI is the string entered in the Name field at step 2 of the previous section. The built-in components that use database functionalities allow to specify which instance to use in their configuration. These components are the DataService component of the cloud stack, the Wire Record Store and Wire Record Query wire components. The configuration of each component contains a property that allows to specify the Kura Service PID of the desired instance. Warning Using SQLite database instances through the deprecated DbFilter and DbStore components is not supported.","title":"Selecting a database instance for existing components"},{"location":"core-services/sqlite-db-service/#usage-through-wires","text":"It is possible to store and extract Wire Records into/from a SQLite database instance using the Wire Record Store and Wire Record Query wire components. When a Wire Record is received by a Wire Record Store attached to a SQLite based database instance, the data will be stored in a table whose name is the current value of the Record Collection Name configuration parameter of the Wire Component. Each property contained in a Wire Record will be appended to a column with the same name as the property key. A new column will be created if it doesn't already exists. Since it is not possible to establish a one to one mapping between SQLite storage classes and the data types available on the Wires, the implementation will assign a custom type name to the created columns in order to keep track of the inserted Wire Record property type. The custom types will be assigned according to the following table: Wires Data Type Column Type Name Storage Class Type Affinity BOOLEAN BOOLEAN INTEGER INTEGER INT INTEGER LONG BIGINT INTEGER FLOAT FLOAT REAL DOUBLE DOUBLE REAL STRING TEXT TEXT BYTE_ARRAY BLOB BLOB The custom column type makes it possible to preserve the original type when data is extracted with the Wire Record Query component. Please note that the resulting type may change in case of queries that build computed columns. Warning It is not recommended to store Wire Records having properties with the same key and different value type. If the value type changes, the target column will be dropped and recreated with the type derived from the last received record. All existing data in the target column will be lost. The purpose of this is to allow changing the type of a column with a Wire Graph configuration update.","title":"Usage through Wires"},{"location":"core-services/sqlite-db-service/#debug-shell","text":"It is possible to inspect the contents of the database file using the OSGi console with the following command: sqlitedbg:executeQuery dbServicePid 'query' or more simply executeQuery dbServicePid 'query' where dbServicePid is the user defined pid of the target database instance and query is an arbitrary SQL query to be executed (make sure to properly quote the query string with the ' character). The command will print the result set or changed row count on the console. It is only possible to access database instances whose Debug Shell Access Enabled configuration parameter is set to true . The default of this parameter is false . The OSGi console is disabled by default, it can be accessed by starting the framework with the /opt/eclipse/kura/bin/start_kura_debug.sh script and running the following command on the gateway: telnet localhost 5002 Warning This feature is intended for debug purposes only, the Debug Shell Access Enabled parameter as well as the OSGi console should not be left enabled on production systems.","title":"Debug shell"},{"location":"core-services/watchdog-service/","text":"Watchdog Service The WatchdogService provides methods for starting, stopping, and updating a hardware watchdog if it is present on the system. Once started, the watchdog must be updated to prevent the system from rebooting. To use this service, select the WatchdogService option located in the Services area as shown in the screen capture below. This service provides the following configuration parameters: enabled - sets whether or not this service is enabled or disabled. (Required field) pingInterval - defines the maximum time interval between two watchdogs' refresh to prevent the system from rebooting. (Required field) Watchdog device path - sets the watchdog device path. (Required field) Reboot Cause File Path - sets the path to the file that will contain the reboot cause information. (Required field)","title":"Watchdog Service"},{"location":"core-services/watchdog-service/#watchdog-service","text":"The WatchdogService provides methods for starting, stopping, and updating a hardware watchdog if it is present on the system. Once started, the watchdog must be updated to prevent the system from rebooting. To use this service, select the WatchdogService option located in the Services area as shown in the screen capture below. This service provides the following configuration parameters: enabled - sets whether or not this service is enabled or disabled. (Required field) pingInterval - defines the maximum time interval between two watchdogs' refresh to prevent the system from rebooting. (Required field) Watchdog device path - sets the watchdog device path. (Required field) Reboot Cause File Path - sets the path to the file that will contain the reboot cause information. (Required field)","title":"Watchdog Service"},{"location":"gateway-configuration/authentication-and-authorization/","text":"Authentication and authorization Kura 5 introduces a centralized authentication and authorization framework based on the OSGi UserAdmin specification. This framework introduces the concepts of identities and permissions : Identity : A Kura identity is related to authentication, an identity has a name and a set of associated credentials, for example a password. Permission : A Kura permission is related to authorization. Zero or more permissions can be assigned to a given identity. Each permission allows to access a set of resources and/or perform certain operations. Permissions can be defined by applications. Examples of applications that use the new authentication and authorization framework are the Web Console and the REST API framework: Kura Web Console provides multi user support, Web Console users are mapped to Kura identities, the Web Console also defines a set of permissions that allow to restrict the operations that a given identity is allowed to perform. The Kura REST API framework users are now mapped to Kura identities and REST roles are mapped to Kura permissions. The old ConfigurationService based user and role definition mechanism has been dropped. The authentication and authorization framework only allows to define and store identities and permissions, it does not provide implementation of authentication methods and/or session management. These aspects are left to applications. Permission and identity representation Permissions and identities are implemented on top of the UserAdmin User and Group concepts. See OSGi UserAdmin specification for more details on the Role , User and Group concepts. IdentityService Java APIs Kura 5.5 introduces a new set of Java APIs that allow to manage Kura identities, the implementation is based on the UserAdmin conventions described in this page, and allows to manipulate Kura identities without interacting directly with the UserAdmin. Please refer to the Javadoc for more details. The new APIs also provide the capability to implement and register IdentityConfigurationExtension s in the framework. An IdentityConfigurationExtension can define additional custom configuration parameters for each identity. The custom configuration can be inspected and modified in the Identities section of Kura Web UI and using the identity/v2 rest APIs and MQTT request handler. The IdentityConfigurationExtension implementation can store the additional configuration in the way that is most suitable for the application, for example by adding custom UserAdmin properties or credentials. Identities A Kura identity is represented as a UserAdmin User with the following properties: The User name must be in the kura.user.${identity_name} form where ${identity_name} is a non empty string representing the identity name. The name of an User representing a Kura identity must start with the kura.user. prefix. A password may be assigned to an identity by defining a property in User credentials with the following format: The property name must be kura.password The property value must be a string containing SHA256 hash of the password, as computed by the String org.eclipse.kura.crypto.CryptoService.sha256Hash(String) method. Starting from Kura 5.1, it is possible to force an identity to change the password at next login by setting the following property in User properties : kura.need.password.change : true encoded as a JSON string. The property will be cleared automatically after a successful password change on next login. Permissions A Kura permission is represented as a UserAdmin Group with the following properties: The Group name must be in the kura.permission.${permission_name} form where ${permission_name} is a non empty string representing the permission name. The name of a Group representing a Kura permission must start with the kura.permission. prefix. Assigning a permission to a specific identity can be done by adding the User representing the identity to the basic members of the Group representing the permission. UserAdmin persistence The org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl Kura service allows to persist the UserAdmin state in Kura configuration snapshot, this includes the defined identities and permissions. The following configuration properties are used to store the UserAdmin concepts in Json format: Role configuration (id roles.config ): Stores the UserAdmin Role s, plain Role s are non used for representing Kura identities and permissions. The value must be a JSON array of Role elements. User configuration (id users.config ): Stores the UserAdmin User s. The value must be a JSON array of User elements. Group configuration (id groups.config ): Stores the UserAdmin Group s. The value must be a JSON array of Group elements. JSON representation details This section describes the JSON format used in org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl configuration. UserAdminDictValue A value appearing in UserAdmin dictionaries like properties and credentials type : variant Variants : a String property type : string a byte[] property type : array , element description: a byte of the array encoded as an unsigned integer type : number Examples: \"A string property\" [ 1 , 2 , 3 , 4 , 5 ] UserAdminDict A UserAdmin property dictionary, there are no well known property names, property values must be of UserAdminDictValue type type : object Example: { \"stringProperty\" : \"A string property\" , \"byteArrayProperty\" : [ 1 , 2 , 3 , 4 , 5 ] } Role An object describing and UserAdmin Role type : object Properties : name The role name type : string properties optional If the dictionary is empty UserAdminDict User An object describing and UserAdmin User type : object Properties : name The role name type : string properties optional If the dictionary is empty UserAdminDict credentials optional If the dictionary is empty UserAdminDict Example: { \"name\" : \"kura.user.appadmin\" , \"credentials\" : { \"kura.password\" : \"3hPckF8Zc+IF3pVineBvck3zJERUl8itosySULE1hpM=\" } } Group An object describing and UserAdmin Group type : object Properties : name The role name type : string properties optional If the dictionary is empty UserAdminDict credentials optional If the dictionary is empty UserAdminDict basicMembers optional If the list is empty The list of the group basic members type : array , element description: A role name type : string requiredMembers optional If the list is empty The list of the group required members type : array , element description: A role name type : string Example: { \"name\" : \"kura.permission.kura.wires.admin\" , \"basicMembers\" : [ \"kura.user.appadmin\" ] }","title":"Authentication and Authorization"},{"location":"gateway-configuration/authentication-and-authorization/#authentication-and-authorization","text":"Kura 5 introduces a centralized authentication and authorization framework based on the OSGi UserAdmin specification. This framework introduces the concepts of identities and permissions : Identity : A Kura identity is related to authentication, an identity has a name and a set of associated credentials, for example a password. Permission : A Kura permission is related to authorization. Zero or more permissions can be assigned to a given identity. Each permission allows to access a set of resources and/or perform certain operations. Permissions can be defined by applications. Examples of applications that use the new authentication and authorization framework are the Web Console and the REST API framework: Kura Web Console provides multi user support, Web Console users are mapped to Kura identities, the Web Console also defines a set of permissions that allow to restrict the operations that a given identity is allowed to perform. The Kura REST API framework users are now mapped to Kura identities and REST roles are mapped to Kura permissions. The old ConfigurationService based user and role definition mechanism has been dropped. The authentication and authorization framework only allows to define and store identities and permissions, it does not provide implementation of authentication methods and/or session management. These aspects are left to applications.","title":"Authentication and authorization"},{"location":"gateway-configuration/authentication-and-authorization/#permission-and-identity-representation","text":"Permissions and identities are implemented on top of the UserAdmin User and Group concepts. See OSGi UserAdmin specification for more details on the Role , User and Group concepts.","title":"Permission and identity representation"},{"location":"gateway-configuration/authentication-and-authorization/#identityservice-java-apis","text":"Kura 5.5 introduces a new set of Java APIs that allow to manage Kura identities, the implementation is based on the UserAdmin conventions described in this page, and allows to manipulate Kura identities without interacting directly with the UserAdmin. Please refer to the Javadoc for more details. The new APIs also provide the capability to implement and register IdentityConfigurationExtension s in the framework. An IdentityConfigurationExtension can define additional custom configuration parameters for each identity. The custom configuration can be inspected and modified in the Identities section of Kura Web UI and using the identity/v2 rest APIs and MQTT request handler. The IdentityConfigurationExtension implementation can store the additional configuration in the way that is most suitable for the application, for example by adding custom UserAdmin properties or credentials.","title":"IdentityService Java APIs"},{"location":"gateway-configuration/authentication-and-authorization/#identities","text":"A Kura identity is represented as a UserAdmin User with the following properties: The User name must be in the kura.user.${identity_name} form where ${identity_name} is a non empty string representing the identity name. The name of an User representing a Kura identity must start with the kura.user. prefix. A password may be assigned to an identity by defining a property in User credentials with the following format: The property name must be kura.password The property value must be a string containing SHA256 hash of the password, as computed by the String org.eclipse.kura.crypto.CryptoService.sha256Hash(String) method. Starting from Kura 5.1, it is possible to force an identity to change the password at next login by setting the following property in User properties : kura.need.password.change : true encoded as a JSON string. The property will be cleared automatically after a successful password change on next login.","title":"Identities"},{"location":"gateway-configuration/authentication-and-authorization/#permissions","text":"A Kura permission is represented as a UserAdmin Group with the following properties: The Group name must be in the kura.permission.${permission_name} form where ${permission_name} is a non empty string representing the permission name. The name of a Group representing a Kura permission must start with the kura.permission. prefix. Assigning a permission to a specific identity can be done by adding the User representing the identity to the basic members of the Group representing the permission.","title":"Permissions"},{"location":"gateway-configuration/authentication-and-authorization/#useradmin-persistence","text":"The org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl Kura service allows to persist the UserAdmin state in Kura configuration snapshot, this includes the defined identities and permissions. The following configuration properties are used to store the UserAdmin concepts in Json format: Role configuration (id roles.config ): Stores the UserAdmin Role s, plain Role s are non used for representing Kura identities and permissions. The value must be a JSON array of Role elements. User configuration (id users.config ): Stores the UserAdmin User s. The value must be a JSON array of User elements. Group configuration (id groups.config ): Stores the UserAdmin Group s. The value must be a JSON array of Group elements.","title":"UserAdmin persistence"},{"location":"gateway-configuration/authentication-and-authorization/#json-representation-details","text":"This section describes the JSON format used in org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl configuration.","title":"JSON representation details"},{"location":"gateway-configuration/authentication-and-authorization/#useradmindictvalue","text":"A value appearing in UserAdmin dictionaries like properties and credentials type : variant Variants : a String property type : string a byte[] property type : array , element description: a byte of the array encoded as an unsigned integer type : number Examples: \"A string property\" [ 1 , 2 , 3 , 4 , 5 ]","title":"UserAdminDictValue"},{"location":"gateway-configuration/authentication-and-authorization/#useradmindict","text":"A UserAdmin property dictionary, there are no well known property names, property values must be of UserAdminDictValue type type : object Example: { \"stringProperty\" : \"A string property\" , \"byteArrayProperty\" : [ 1 , 2 , 3 , 4 , 5 ] }","title":"UserAdminDict"},{"location":"gateway-configuration/authentication-and-authorization/#role","text":"An object describing and UserAdmin Role type : object Properties : name The role name type : string properties optional If the dictionary is empty UserAdminDict","title":"Role"},{"location":"gateway-configuration/authentication-and-authorization/#user","text":"An object describing and UserAdmin User type : object Properties : name The role name type : string properties optional If the dictionary is empty UserAdminDict credentials optional If the dictionary is empty UserAdminDict Example: { \"name\" : \"kura.user.appadmin\" , \"credentials\" : { \"kura.password\" : \"3hPckF8Zc+IF3pVineBvck3zJERUl8itosySULE1hpM=\" } }","title":"User"},{"location":"gateway-configuration/authentication-and-authorization/#group","text":"An object describing and UserAdmin Group type : object Properties : name The role name type : string properties optional If the dictionary is empty UserAdminDict credentials optional If the dictionary is empty UserAdminDict basicMembers optional If the list is empty The list of the group basic members type : array , element description: A role name type : string requiredMembers optional If the list is empty The list of the group required members type : array , element description: A role name type : string Example: { \"name\" : \"kura.permission.kura.wires.admin\" , \"basicMembers\" : [ \"kura.user.appadmin\" ] }","title":"Group"},{"location":"gateway-configuration/cellular-configuration/","text":"Cellular Configuration If it is not configured, the cellular interface is presented on the interface list either by modem USB address, or if serial modem is used, by modem name. This 'fake' interface name is replaced by 'proper' interface name (e.g., ppp0) when the first modem configuration is submitted. The cellular interface should be configured by first enabling it in the TCP/IP tab, and then setting the Cellular tab. Note that the cellular interface can only be set as WAN using DHCP . The cellular interface configuration options are described below. Cellular Configuration The Cellular tab contains the following configuration parameters: Model : specifies the modem model. Network Technology : describes the network technology used by this modem. HSDPA EVDO Modem Identifier : provides a unique name for this modem. Interface # : provides a unique number for the modem interface (e.g., an interface # of 0 would name the modem interface ppp0). Dial String : instructs how the modem should attempt to connect. Typical dial strings are as follows: HSPA modem: atd*99***1# EVDO/CDMA modem: atd#777 APN : defines the modem access point name (HSPA modems only). Auth Type : specifies the authentication type (HSPA modems only). None Auto CHAP PAP Username : supplies the username; disabled if no authentication method is specified. Password : supplies the password; disabled if no authentication method is specified. Modem Reset Timeout : sets the modem reset timeout in minutes. If set to a non-zero value, the modem is reset after n consecutive minutes of unsuccessful connection attempts. If set to zero, the modem keeps trying to establish a PPP connection without resetting. The default value is 5 minutes. Reopen Connection on Termination : sets the persist option of the PPP daemon that specifies if PPP daemon should exit after connection is terminated. Note that the maxfail option still has an effect on persistent connections. Connection Attempts Retry Delay : Sets the holdoff parameter to instruct the PPP daemon on how many seconds to wait before re-initiating the link after it terminates. This option only has any effect if the persist option (Reopen Connection on Termination) is set to true. The holdoff period is not applied if the link was terminated because it was idle. The default value is 1 second. Connection Attempts : sets the maxfail option of the PPP daemon that limits the number of consecutive failed PPP connection attempts. The default value is 5 connection attempts. A value of zero means no limit. The PPP daemon terminates after the specified number of failed PPP connection attempts and restarts by the ModemMonitor thread. Disconnect if Idle : sets the idle option of the PPP daemon, which terminates the PPP connection if the link is idle for a specified number of seconds. The default value is 95 seconds. To disable this option, set it to zero. Active Filter : sets the active-filter option of the PPP daemon. This option specifies a packet filter (filter-expression) to be applied to data packets in order to determine which packets are regarded as link activity, and thereby, reset the idle timer. The filter-expression syntax is as described for tcpdump(1); however, qualifiers that do not apply to a PPP link, such as ether and arp , are not permitted. The default value is inbound . To disable the active-filter option, leave it blank. LCP Echo Interval : sets the lcp-echo-interval option of the PPP daemon. If set to a positive number, the modem sends LCP echo request to the peer at the specified number of seconds. To disable this option, set it to zero. This option may be used with the lcp-echo-failure option to detect that the peer is no longer connected. LCP Echo Failure : sets the lcp-echo-failure option of the PPP daemon. If set to a positive number, the modem presumes the peer to be dead if a specified number of LCP echo-requests are sent without receiving a valid LCP echo-reply. To disable this option, set it to zero. Enable GPS : enables GPS with the following conditions: One modem port will be dedicated to NMEA data stream. This port may not be used to send AT commands to the modem. PositionService should be enabled. Serial settings of PositionService should not be changed; it will be redirected to the modem GPS port automatically. Cellular Linux Configuration This section describes the changes applied by Kura at the Linux networking configuration. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. When the cellular configuration is submitted, Kura generates peer and chat scripts used by the PPP daemon to establish a PPP connection. Examples of these scripts for HSPA and EVDO modems are shown below. Example Peer Script for HSPA Modem 921600 unit 0 logfile /var/log/HE910-D_2-1.5 debug connect 'chat:v:f /etc/ppp/scripts/chat_HE910-D_2-1.5' disconnect 'chat:v:f /etc/ppp/scripts/disconnect_HE910-D_2-1.5' modem lock noauth noipdefault defaultroute usepeerdns noproxyarp novj novjccomp nobsdcomp nodeflate nomagic idle 95 active-filter 'inbound' persist holdoff 1 maxfail 5 connect-delay 1000 Example Chat Script for HSPA Modem ABORT \"BUSY\" ABORT \"VOICE\" ABORT \"NO CARRIER\" ABORT \"NO DIALTONE\" ABORT \"NO DIAL TONE\" ABORT \"ERROR\" \"\" \"+++ath\" OK \"AT\" OK AT+CGDCONT = 1 , \"IP\" , \"c1.korem2m.com\" OK \"\\d\\d\\d\" \"\" \"atd-99---1#\" CONNECT \"\\c\" Example Peer Script for EVDO Modem 921600 unit 0 logfile /var/log/DE910-DUAL_1-1.5 debug connect 'chat:v:f /etc/ppp/scripts/chat_DE910-DUAL_1-1.5' disconnect 'chat:v:f /etc/ppp/scripts/disconnect_DE910-DUAL_1-1.5' crtscts lock noauth defaultroute usepeerdns idle 95 active-filter 'inbound' persist holdoff 1 maxfail 5 connect-delay 10000 Example Chat Script for EVDO Modem ABORT \"BUSY\" ABORT \"VOICE\" ABORT \"NO CARRIER\" ABORT \"NO DIALTONE\" ABORT \"NO DIAL TONE\" ABORT \"ERROR\" \"\" \"+++ath\" OK \"AT\" OK \"ATE1V1&F&D2&C1&C2S0=0\" OK \"ATE1V1\" OK \"ATS7=60\" OK \"\\d\\d\\d\" \"\" \"atd#777\" CONNECT \"\\c\"","title":"Cellular Configuration"},{"location":"gateway-configuration/cellular-configuration/#cellular-configuration","text":"If it is not configured, the cellular interface is presented on the interface list either by modem USB address, or if serial modem is used, by modem name. This 'fake' interface name is replaced by 'proper' interface name (e.g., ppp0) when the first modem configuration is submitted. The cellular interface should be configured by first enabling it in the TCP/IP tab, and then setting the Cellular tab. Note that the cellular interface can only be set as WAN using DHCP . The cellular interface configuration options are described below.","title":"Cellular Configuration"},{"location":"gateway-configuration/cellular-configuration/#cellular-configuration_1","text":"The Cellular tab contains the following configuration parameters: Model : specifies the modem model. Network Technology : describes the network technology used by this modem. HSDPA EVDO Modem Identifier : provides a unique name for this modem. Interface # : provides a unique number for the modem interface (e.g., an interface # of 0 would name the modem interface ppp0). Dial String : instructs how the modem should attempt to connect. Typical dial strings are as follows: HSPA modem: atd*99***1# EVDO/CDMA modem: atd#777 APN : defines the modem access point name (HSPA modems only). Auth Type : specifies the authentication type (HSPA modems only). None Auto CHAP PAP Username : supplies the username; disabled if no authentication method is specified. Password : supplies the password; disabled if no authentication method is specified. Modem Reset Timeout : sets the modem reset timeout in minutes. If set to a non-zero value, the modem is reset after n consecutive minutes of unsuccessful connection attempts. If set to zero, the modem keeps trying to establish a PPP connection without resetting. The default value is 5 minutes. Reopen Connection on Termination : sets the persist option of the PPP daemon that specifies if PPP daemon should exit after connection is terminated. Note that the maxfail option still has an effect on persistent connections. Connection Attempts Retry Delay : Sets the holdoff parameter to instruct the PPP daemon on how many seconds to wait before re-initiating the link after it terminates. This option only has any effect if the persist option (Reopen Connection on Termination) is set to true. The holdoff period is not applied if the link was terminated because it was idle. The default value is 1 second. Connection Attempts : sets the maxfail option of the PPP daemon that limits the number of consecutive failed PPP connection attempts. The default value is 5 connection attempts. A value of zero means no limit. The PPP daemon terminates after the specified number of failed PPP connection attempts and restarts by the ModemMonitor thread. Disconnect if Idle : sets the idle option of the PPP daemon, which terminates the PPP connection if the link is idle for a specified number of seconds. The default value is 95 seconds. To disable this option, set it to zero. Active Filter : sets the active-filter option of the PPP daemon. This option specifies a packet filter (filter-expression) to be applied to data packets in order to determine which packets are regarded as link activity, and thereby, reset the idle timer. The filter-expression syntax is as described for tcpdump(1); however, qualifiers that do not apply to a PPP link, such as ether and arp , are not permitted. The default value is inbound . To disable the active-filter option, leave it blank. LCP Echo Interval : sets the lcp-echo-interval option of the PPP daemon. If set to a positive number, the modem sends LCP echo request to the peer at the specified number of seconds. To disable this option, set it to zero. This option may be used with the lcp-echo-failure option to detect that the peer is no longer connected. LCP Echo Failure : sets the lcp-echo-failure option of the PPP daemon. If set to a positive number, the modem presumes the peer to be dead if a specified number of LCP echo-requests are sent without receiving a valid LCP echo-reply. To disable this option, set it to zero. Enable GPS : enables GPS with the following conditions: One modem port will be dedicated to NMEA data stream. This port may not be used to send AT commands to the modem. PositionService should be enabled. Serial settings of PositionService should not be changed; it will be redirected to the modem GPS port automatically.","title":"Cellular Configuration"},{"location":"gateway-configuration/cellular-configuration/#cellular-linux-configuration","text":"This section describes the changes applied by Kura at the Linux networking configuration. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. When the cellular configuration is submitted, Kura generates peer and chat scripts used by the PPP daemon to establish a PPP connection. Examples of these scripts for HSPA and EVDO modems are shown below.","title":"Cellular Linux Configuration"},{"location":"gateway-configuration/cellular-configuration/#example-peer-script-for-hspa-modem","text":"921600 unit 0 logfile /var/log/HE910-D_2-1.5 debug connect 'chat:v:f /etc/ppp/scripts/chat_HE910-D_2-1.5' disconnect 'chat:v:f /etc/ppp/scripts/disconnect_HE910-D_2-1.5' modem lock noauth noipdefault defaultroute usepeerdns noproxyarp novj novjccomp nobsdcomp nodeflate nomagic idle 95 active-filter 'inbound' persist holdoff 1 maxfail 5 connect-delay 1000","title":"Example Peer Script for HSPA Modem"},{"location":"gateway-configuration/cellular-configuration/#example-chat-script-for-hspa-modem","text":"ABORT \"BUSY\" ABORT \"VOICE\" ABORT \"NO CARRIER\" ABORT \"NO DIALTONE\" ABORT \"NO DIAL TONE\" ABORT \"ERROR\" \"\" \"+++ath\" OK \"AT\" OK AT+CGDCONT = 1 , \"IP\" , \"c1.korem2m.com\" OK \"\\d\\d\\d\" \"\" \"atd-99---1#\" CONNECT \"\\c\"","title":"Example Chat Script for HSPA Modem"},{"location":"gateway-configuration/cellular-configuration/#example-peer-script-for-evdo-modem","text":"921600 unit 0 logfile /var/log/DE910-DUAL_1-1.5 debug connect 'chat:v:f /etc/ppp/scripts/chat_DE910-DUAL_1-1.5' disconnect 'chat:v:f /etc/ppp/scripts/disconnect_DE910-DUAL_1-1.5' crtscts lock noauth defaultroute usepeerdns idle 95 active-filter 'inbound' persist holdoff 1 maxfail 5 connect-delay 10000","title":"Example Peer Script for EVDO Modem"},{"location":"gateway-configuration/cellular-configuration/#example-chat-script-for-evdo-modem","text":"ABORT \"BUSY\" ABORT \"VOICE\" ABORT \"NO CARRIER\" ABORT \"NO DIALTONE\" ABORT \"NO DIAL TONE\" ABORT \"ERROR\" \"\" \"+++ath\" OK \"AT\" OK \"ATE1V1&F&D2&C1&C2S0=0\" OK \"ATE1V1\" OK \"ATS7=60\" OK \"\\d\\d\\d\" \"\" \"atd#777\" CONNECT \"\\c\"","title":"Example Chat Script for EVDO Modem"},{"location":"gateway-configuration/cloud-connections/","text":"Cloud Connections The Cloud Connections section of the Kura Gateway Administration Console allows to create and manage cloud connections. By default, Kura starts with a single cloud connection, as depicted in the following image: The cloud services page allows to: - create a new cloud connection; - delete an existing cloud connection; - connect a selected cloud stack to the configured cloud platform; - disconnect the selected cloud stack from the connected cloud platform; - refresh the existing cloud connections. When clicking on the New button, a dialog is displayed as depicted in the image below: The user can select one of the existing cloud connection factories and give it a name (depending on the implementation, a name format can be suggested or forced). Selecting a created Cloud Connection it is possible to associate a new publisher/subscriber by clicking the New Pub/Sub button. As for the connection creation case, the user can select one of the existing publisher/subscriber factories and give it a name.","title":"Cloud Connections"},{"location":"gateway-configuration/cloud-connections/#cloud-connections","text":"The Cloud Connections section of the Kura Gateway Administration Console allows to create and manage cloud connections. By default, Kura starts with a single cloud connection, as depicted in the following image: The cloud services page allows to: - create a new cloud connection; - delete an existing cloud connection; - connect a selected cloud stack to the configured cloud platform; - disconnect the selected cloud stack from the connected cloud platform; - refresh the existing cloud connections. When clicking on the New button, a dialog is displayed as depicted in the image below: The user can select one of the existing cloud connection factories and give it a name (depending on the implementation, a name format can be suggested or forced). Selecting a created Cloud Connection it is possible to associate a new publisher/subscriber by clicking the New Pub/Sub button. As for the connection creation case, the user can select one of the existing publisher/subscriber factories and give it a name.","title":"Cloud Connections"},{"location":"gateway-configuration/cloud-service-configuration/","text":"Cloud Service Configuration The CloudService provides an easy-to-use API layer for the M2M application to communicate with a remote server. It operates as a decorator for the DataService , providing add-on features over the management of the DataTransport layer. In addition to simple publish/subscribe, the Cloud Connection API simplifies the implementation of more complex interaction flows like request/response or remote resource management. The Cloud Connection abstracts the developers from the complexity of the transport protocol and payload format used in the communication. The Cloud Connection allows a single connection to a remote server to be shared across more than one application in the gateway, providing the necessary topic partitioning. Its functions include: Adds application topic prefixes to allow a single remote server connection to be shared across applications. Defines a payload data model and provides default encoding/decoding serializers. Publishes life-cycle messages when the device and applications start and stop. To use this service, select the CloudService option located in the Cloud Services area as shown in the screen capture below. The CloudService provides the following configuration parameters: device.display-name : defines the device display name given by the system. (Required field). device.custom-name : defines the custom device display name if the device.display-name parameter is set to \"Custom\". topic.control-prefix : defines the topic prefix used for system and device management messages. encode.gzip : defines if the message payloads are sent compressed. republish.mqtt.birth.cert.on.gps.lock : when set to true, forces a republish of the MQTT Birth Certificate when a GPS correct position lock is received. The device is then registered with its real coordinates. (Required field). republish.mqtt.birth.cert.on.modem.detect : when set to true, forces a republish of the MQTT Birth Certificate when the service receives a modem detection event. This functionality is currently not supported on devices configured to use NetworkManager , in this case the property value is ignored. (Required field). enable.default.subscriptions : manages the default subscriptions to the gateway management MQTT topics. When disabled, the gateway will not be remotely manageable. payload.encoding : specifies the encoding for the messages sent by the specific CloudService instance. Kura Protobuf - when this option is selected, the Kura Protobuf encoding will be used Simple JSON - the simple JSON encoding will be used instead. More information is available here . An example below. { \"sentOn\" : 1491298822 , \"position\" : { \"latitude\" : 45.234 , \"longitude\" : -7.3456 , \"altitude\" : 1.0 , \"heading\" : 5.4 , \"precision\" : 0.1 , \"speed\" : 23.5 , \"timestamp\" : 1191292288 , \"satellites\" : 3 , \"status\" : 2 }, \"metrics\" : { \"code\" : \"A23D44567Q\" , \"distance\" : 0.26456E+4 , \"temperature\" : 27.5 , \"count\" : 12354 , \"timestamp\" : 23412334545 , \"enable\" : true , \"rawBuffer\" : \"cGlwcG8gcGx1dG8gcGFwZXJpbm8=\" }, \"body\" : \"UGlwcG8sIHBsdXRvLCBwYXBlcmlubywgcXVpLCBxdW8gZSBxdWEu\" } The default CloudService implementations publishes the following lifecycle messages : BIRTH message : sent immediately when device is connected to the cloud platform; DISCONNECT message : sent immediately before device is disconnected from the cloud platform; delayed BIRTH message : sent when new cloud application handler becomes available, a DP is installed or removed, GPS position is locked (can be disabled), or when modem status changes (can be disabled). These messages are cached for 30 seconds before sending. If no other message of such type arrives the message is sent; otherwise the BIRTH is cached and the timeout restarts. This is to avoid sending multiple messages when the framework starts.","title":"Cloud Service Configuration"},{"location":"gateway-configuration/cloud-service-configuration/#cloud-service-configuration","text":"The CloudService provides an easy-to-use API layer for the M2M application to communicate with a remote server. It operates as a decorator for the DataService , providing add-on features over the management of the DataTransport layer. In addition to simple publish/subscribe, the Cloud Connection API simplifies the implementation of more complex interaction flows like request/response or remote resource management. The Cloud Connection abstracts the developers from the complexity of the transport protocol and payload format used in the communication. The Cloud Connection allows a single connection to a remote server to be shared across more than one application in the gateway, providing the necessary topic partitioning. Its functions include: Adds application topic prefixes to allow a single remote server connection to be shared across applications. Defines a payload data model and provides default encoding/decoding serializers. Publishes life-cycle messages when the device and applications start and stop. To use this service, select the CloudService option located in the Cloud Services area as shown in the screen capture below. The CloudService provides the following configuration parameters: device.display-name : defines the device display name given by the system. (Required field). device.custom-name : defines the custom device display name if the device.display-name parameter is set to \"Custom\". topic.control-prefix : defines the topic prefix used for system and device management messages. encode.gzip : defines if the message payloads are sent compressed. republish.mqtt.birth.cert.on.gps.lock : when set to true, forces a republish of the MQTT Birth Certificate when a GPS correct position lock is received. The device is then registered with its real coordinates. (Required field). republish.mqtt.birth.cert.on.modem.detect : when set to true, forces a republish of the MQTT Birth Certificate when the service receives a modem detection event. This functionality is currently not supported on devices configured to use NetworkManager , in this case the property value is ignored. (Required field). enable.default.subscriptions : manages the default subscriptions to the gateway management MQTT topics. When disabled, the gateway will not be remotely manageable. payload.encoding : specifies the encoding for the messages sent by the specific CloudService instance. Kura Protobuf - when this option is selected, the Kura Protobuf encoding will be used Simple JSON - the simple JSON encoding will be used instead. More information is available here . An example below. { \"sentOn\" : 1491298822 , \"position\" : { \"latitude\" : 45.234 , \"longitude\" : -7.3456 , \"altitude\" : 1.0 , \"heading\" : 5.4 , \"precision\" : 0.1 , \"speed\" : 23.5 , \"timestamp\" : 1191292288 , \"satellites\" : 3 , \"status\" : 2 }, \"metrics\" : { \"code\" : \"A23D44567Q\" , \"distance\" : 0.26456E+4 , \"temperature\" : 27.5 , \"count\" : 12354 , \"timestamp\" : 23412334545 , \"enable\" : true , \"rawBuffer\" : \"cGlwcG8gcGx1dG8gcGFwZXJpbm8=\" }, \"body\" : \"UGlwcG8sIHBsdXRvLCBwYXBlcmlubywgcXVpLCBxdW8gZSBxdWEu\" } The default CloudService implementations publishes the following lifecycle messages : BIRTH message : sent immediately when device is connected to the cloud platform; DISCONNECT message : sent immediately before device is disconnected from the cloud platform; delayed BIRTH message : sent when new cloud application handler becomes available, a DP is installed or removed, GPS position is locked (can be disabled), or when modem status changes (can be disabled). These messages are cached for 30 seconds before sending. If no other message of such type arrives the message is sent; otherwise the BIRTH is cached and the timeout restarts. This is to avoid sending multiple messages when the framework starts.","title":"Cloud Service Configuration"},{"location":"gateway-configuration/data-service-configuration/","text":"Data Service Configuration The DataService provides the ability to connect to a remote broker, publish messages, subscribe to topics, receive messages on the subscribed topics, and disconnect from the remote message broker. The DataService delegates to the MqttDataTransport service the implementation of the transport protocol that is used to interact with the remote server. The DataService also adds the capability of storing published messages in a persistent store function and sending them over the wire at a later time. The purpose of this feature is to relieve service users from implementing their own persistent store. Service users may publish messages independently on the DataService connection status. Info Starting from Kura 5.3.0, the DataService allows to bind to custom persistent stores. A custom persistent store can be defined by creating an implementation the new org.eclipse.kura.message.store.provider.MessageStoreProvider service interface and registering it as an OSGi service. In order to overcome the potential latencies introduced by buffering messages, the DataService allows a priority level to be assigned to\u200b each published message. Depending on the store configuration, there are certain guarantees that stored messages are not lost due to sudden crashes or power outages. To use this service, select the DataService option located in the Cloud Connections area as shown in the screen capture below. The DataService offers methods and configuration options to manage the connection to the remote server including the following (all required) parameters described below. Connect Auto-on-startup - When set to true, the service tries to auto-connect to the remote server on start-up and restore the connection every time the device is disconnected. These attempts are made at the frequency defined in the Connect Retry-interval parameter until the connection is established. Using the Connect/Disconnect button disables this function. Connect Retry-interval - Frequency in seconds to retry a connection of the Data Publishers after a disconnect. Enable Recovery On Connection Failure - Enables the recovery feature on connection failure. If the device is not able to connect to a remote cloud platform, the service will wait for a specified amount of connection retries. If the recovery fails, the device will be rebooted. Being based on the Watchdog service, it needs to be activated as well. Connection Recovery Max Failure - Number of failures in Data Publishers connection before forcing a reboot. Disconnect Quiesce-timeout - Allows the delivery of in-flight messages to be completed before disconnecting from the broker when a disconnection from the broker is being forced. Message Store Provider Service PID - The Kura service pid of the Message Store instance to be used. The pid of the default instance is org.eclipse.kura.db.H2DbService. The Message Store instance must implement the org.eclipse.kura.message.store.provider.MessageStoreProvider interface. Store Housekeeper-interval - Defines the interval in seconds used to run the Data Store housekeeper task. Store Purge-age - defines the age in seconds of completed messages (either published with QoS = 0 or confirmed with QoS > 0) after which they are deleted (minimum 5). Store Capacity - Defines the maximum number of messages persisted in the Data Store. In-flight-messages parameters - Define the management of messages that have been published and not yet confirmed, including: In-flight-messages Republish-on-new-session - Whether to republish in-flight messages on a new MQTT session. In-flight-messages Max-number - The maximum number of in-flight messages. In-flight-messages Congestion-timeout - Timeouts the in-flight messages congestion condition. The service will force a disconnect attempting to reconnect (0 to disable). Connection Monitors The DataService offers methods and configuration options to monitor the connection to the remote server and, eventually, cause a system reboot to recover from transient network problems. This feature, if enabled, leverages the watchdog service and reboots the gateway if the maximum number of configured connection attempts has been made. A reboot is not requested if the connection to the remote broker succeeds but an authentication error , an invalid client id or an authorization error is thrown by the remote cloud platform and causes a connection drop. The image below shows the parameters that need to be tuned in order to enable this connection monitor feature. To configure this functionality, the System Administrator needs to specify the following configuration elements: Enable Recovery On Connection Failure : when enabled, activates the recovery feature on connection failure: if the device is not able to connect to a remote cloud platform, the service will wait for a specified amount of connection retries. If the recovery fails, the device will be rebooted. Being based on the Watchdog service, it needs to be activated as well. Connection Recovery Max Failure : related to the previous parameter. It specifies the number of failures before a reboot is requested. !!! warning To be fully working, this feature needs the enabling of the Watchdog Service. Message Publishing Backoff Delay In order to have a finer control on the data flow, when a device reconnects to a remote cloud platform, Kura integrates into the Data Service a Backoff delay feature that limits the rate of messages sent. This feature, enabled by default, integrates the Token Bucket concept to limit the bursts of messages sent to a remote cloud platform. In the image below, the parameters that need to be tuned, in the Data Service, to take advantage of this feature: Enable Rate Limit - Enables the token bucket message rate limiting. Rate Limit Average - he average message publish rate in number of messages per unit of time (e.g. 10 messages per MINUTE). Danger The maximum allowed message rate is 1 message per millisecond , so the following limitations are applied: 86400000 per DAY 3600000 per HOUR 60000 messages per MINUTE 1000 messages per SECOND Rate Limit Time Unit - The time unit for the Rate Limit Average. Rate Limit Burst Size - The token bucket burst size. The default setup limits the data flow to 1 message per second with a bucket size of 1 token . Warning This feature needs to be properly tuned by the System Administrator in order to prevent delays in the remote cloud platform due to messages stacked at the edge. If not sure of the number of messages that your gateways will try to push to the remote platform, we suggest to disable this feature. Connection schedule Starting from Kura 5.3.0, the Data Service supports a configurable time based connection schedule. If this functionality is enabled, the Data Service will connect at specific time instants represented by a configurable Cron expression, keep the connection open until it becomes idle and then disconnect until the next instant that matches the expression. More in detail, the connection logic is as follows: The DataService parses the confgiured Cron expression and schedules a connection attempt at the next instant that matches the expression. When the connection instant is reached, the logic continues from step 2. The Data Service will start the auto connect logic. One or more connection attempts will be performed until the connection is established honoring the connect.retry-interval parameter. The Data Service starts a timer that ticks after connection.schedule.inactivity.interval.seconds seconds. When the timer ticks the connection will be closed, and the logic resumed from step 1. The timer is reset delaying the disconnection when a message is published or confirmed (for QoS >= 1). The connection will not be closed if there are messages with QoS >= 1 that have not been confirmed yet. If an unexpected connection drop occurs in this phase, the logic will resume from step 2. The Data Service will attempt to detect large time shifts in system clock, if a time shift is detected, the logic will switch to step 1, rescheduling the next connection attempt. The relevant configuration parameters are the following: Enable Connection Schedule : Enables or disables the connection schedule feature. Please note that in order to enable the connection logic, the Connect Auto-on-startup parameter must be set to true as well. Connection Schedule CRON Expression : A CRON expression that specifies the instants when the gateway should perform a connection attempt. This parameter is only used if Enable Connection Schedule is set to true. The default expression schedules a connection every day at midnight. Allow priority message to overide connection schedule - Allows messages beyond a specified priority to force a connection and be sent regardless of connection schedule. Message schedule priority override threshold - A message with a priority equal to or less than this threshold will cause the framework to automatically re-connect and send regardless of the connection schedule. Connection Schedule Disconnect Inactivity Interval Second : Specifies an inactivity timeout in seconds. If the timeout expires, the cloud connection will be automatically closed. This parameter is only used if Enable Connection Schedule is set to true. Payload size limiting Starting from Kura 5.3.0, the DataService allows to limit the maximum payload size for published messages. Attempts to publish a payload larger than the configured threshold will fail with a KuraStoreException. The threshold can be configured with the following parameter: Maximum Payload Size : The maximum allowed size in bytes for the message payload. In order to keep backwards compatibility, the default value for the parameter is set to 16777216 bytes, which is the maximum allowed size by the current H2DbService implementation.","title":"Data Service Configuration"},{"location":"gateway-configuration/data-service-configuration/#data-service-configuration","text":"The DataService provides the ability to connect to a remote broker, publish messages, subscribe to topics, receive messages on the subscribed topics, and disconnect from the remote message broker. The DataService delegates to the MqttDataTransport service the implementation of the transport protocol that is used to interact with the remote server. The DataService also adds the capability of storing published messages in a persistent store function and sending them over the wire at a later time. The purpose of this feature is to relieve service users from implementing their own persistent store. Service users may publish messages independently on the DataService connection status. Info Starting from Kura 5.3.0, the DataService allows to bind to custom persistent stores. A custom persistent store can be defined by creating an implementation the new org.eclipse.kura.message.store.provider.MessageStoreProvider service interface and registering it as an OSGi service. In order to overcome the potential latencies introduced by buffering messages, the DataService allows a priority level to be assigned to\u200b each published message. Depending on the store configuration, there are certain guarantees that stored messages are not lost due to sudden crashes or power outages. To use this service, select the DataService option located in the Cloud Connections area as shown in the screen capture below. The DataService offers methods and configuration options to manage the connection to the remote server including the following (all required) parameters described below. Connect Auto-on-startup - When set to true, the service tries to auto-connect to the remote server on start-up and restore the connection every time the device is disconnected. These attempts are made at the frequency defined in the Connect Retry-interval parameter until the connection is established. Using the Connect/Disconnect button disables this function. Connect Retry-interval - Frequency in seconds to retry a connection of the Data Publishers after a disconnect. Enable Recovery On Connection Failure - Enables the recovery feature on connection failure. If the device is not able to connect to a remote cloud platform, the service will wait for a specified amount of connection retries. If the recovery fails, the device will be rebooted. Being based on the Watchdog service, it needs to be activated as well. Connection Recovery Max Failure - Number of failures in Data Publishers connection before forcing a reboot. Disconnect Quiesce-timeout - Allows the delivery of in-flight messages to be completed before disconnecting from the broker when a disconnection from the broker is being forced. Message Store Provider Service PID - The Kura service pid of the Message Store instance to be used. The pid of the default instance is org.eclipse.kura.db.H2DbService. The Message Store instance must implement the org.eclipse.kura.message.store.provider.MessageStoreProvider interface. Store Housekeeper-interval - Defines the interval in seconds used to run the Data Store housekeeper task. Store Purge-age - defines the age in seconds of completed messages (either published with QoS = 0 or confirmed with QoS > 0) after which they are deleted (minimum 5). Store Capacity - Defines the maximum number of messages persisted in the Data Store. In-flight-messages parameters - Define the management of messages that have been published and not yet confirmed, including: In-flight-messages Republish-on-new-session - Whether to republish in-flight messages on a new MQTT session. In-flight-messages Max-number - The maximum number of in-flight messages. In-flight-messages Congestion-timeout - Timeouts the in-flight messages congestion condition. The service will force a disconnect attempting to reconnect (0 to disable).","title":"Data Service Configuration"},{"location":"gateway-configuration/data-service-configuration/#connection-monitors","text":"The DataService offers methods and configuration options to monitor the connection to the remote server and, eventually, cause a system reboot to recover from transient network problems. This feature, if enabled, leverages the watchdog service and reboots the gateway if the maximum number of configured connection attempts has been made. A reboot is not requested if the connection to the remote broker succeeds but an authentication error , an invalid client id or an authorization error is thrown by the remote cloud platform and causes a connection drop. The image below shows the parameters that need to be tuned in order to enable this connection monitor feature. To configure this functionality, the System Administrator needs to specify the following configuration elements: Enable Recovery On Connection Failure : when enabled, activates the recovery feature on connection failure: if the device is not able to connect to a remote cloud platform, the service will wait for a specified amount of connection retries. If the recovery fails, the device will be rebooted. Being based on the Watchdog service, it needs to be activated as well. Connection Recovery Max Failure : related to the previous parameter. It specifies the number of failures before a reboot is requested. !!! warning To be fully working, this feature needs the enabling of the Watchdog Service.","title":"Connection Monitors"},{"location":"gateway-configuration/data-service-configuration/#message-publishing-backoff-delay","text":"In order to have a finer control on the data flow, when a device reconnects to a remote cloud platform, Kura integrates into the Data Service a Backoff delay feature that limits the rate of messages sent. This feature, enabled by default, integrates the Token Bucket concept to limit the bursts of messages sent to a remote cloud platform. In the image below, the parameters that need to be tuned, in the Data Service, to take advantage of this feature: Enable Rate Limit - Enables the token bucket message rate limiting. Rate Limit Average - he average message publish rate in number of messages per unit of time (e.g. 10 messages per MINUTE). Danger The maximum allowed message rate is 1 message per millisecond , so the following limitations are applied: 86400000 per DAY 3600000 per HOUR 60000 messages per MINUTE 1000 messages per SECOND Rate Limit Time Unit - The time unit for the Rate Limit Average. Rate Limit Burst Size - The token bucket burst size. The default setup limits the data flow to 1 message per second with a bucket size of 1 token . Warning This feature needs to be properly tuned by the System Administrator in order to prevent delays in the remote cloud platform due to messages stacked at the edge. If not sure of the number of messages that your gateways will try to push to the remote platform, we suggest to disable this feature.","title":"Message Publishing Backoff Delay"},{"location":"gateway-configuration/data-service-configuration/#connection-schedule","text":"Starting from Kura 5.3.0, the Data Service supports a configurable time based connection schedule. If this functionality is enabled, the Data Service will connect at specific time instants represented by a configurable Cron expression, keep the connection open until it becomes idle and then disconnect until the next instant that matches the expression. More in detail, the connection logic is as follows: The DataService parses the confgiured Cron expression and schedules a connection attempt at the next instant that matches the expression. When the connection instant is reached, the logic continues from step 2. The Data Service will start the auto connect logic. One or more connection attempts will be performed until the connection is established honoring the connect.retry-interval parameter. The Data Service starts a timer that ticks after connection.schedule.inactivity.interval.seconds seconds. When the timer ticks the connection will be closed, and the logic resumed from step 1. The timer is reset delaying the disconnection when a message is published or confirmed (for QoS >= 1). The connection will not be closed if there are messages with QoS >= 1 that have not been confirmed yet. If an unexpected connection drop occurs in this phase, the logic will resume from step 2. The Data Service will attempt to detect large time shifts in system clock, if a time shift is detected, the logic will switch to step 1, rescheduling the next connection attempt. The relevant configuration parameters are the following: Enable Connection Schedule : Enables or disables the connection schedule feature. Please note that in order to enable the connection logic, the Connect Auto-on-startup parameter must be set to true as well. Connection Schedule CRON Expression : A CRON expression that specifies the instants when the gateway should perform a connection attempt. This parameter is only used if Enable Connection Schedule is set to true. The default expression schedules a connection every day at midnight. Allow priority message to overide connection schedule - Allows messages beyond a specified priority to force a connection and be sent regardless of connection schedule. Message schedule priority override threshold - A message with a priority equal to or less than this threshold will cause the framework to automatically re-connect and send regardless of the connection schedule. Connection Schedule Disconnect Inactivity Interval Second : Specifies an inactivity timeout in seconds. If the timeout expires, the cloud connection will be automatically closed. This parameter is only used if Enable Connection Schedule is set to true.","title":"Connection schedule"},{"location":"gateway-configuration/data-service-configuration/#payload-size-limiting","text":"Starting from Kura 5.3.0, the DataService allows to limit the maximum payload size for published messages. Attempts to publish a payload larger than the configured threshold will fail with a KuraStoreException. The threshold can be configured with the following parameter: Maximum Payload Size : The maximum allowed size in bytes for the message payload. In order to keep backwards compatibility, the default value for the parameter is set to 16777216 bytes, which is the maximum allowed size by the current H2DbService implementation.","title":"Payload size limiting"},{"location":"gateway-configuration/data-transport-service-configuration/","text":"Data Transport Service Configuration The DataTransport service provides the ability to connect to a remote broker, publish messages, subscribe to topics, receive messages on the subscribed topics, and disconnect from the remote message broker. To use this service, select the MqttDataTransport option located in the Cloud Connections area as shown in the screen captures below. The MqttDataTransport service provides the following configuration parameters: broker-url : defines the URL of the MQTT broker to connect to. For the Everyware Cloud sandbox, this address is either mqtt://broker-sbx.everyware.io:1883/ or mqtts://broker-sbx.everyware.io:8883/ for an encrypted connection. (Required field). topic.context.account-name : defines the name of the account to which the device belongs. username and password : define the username and password that have been assigned to the device by the account administrator (generally username is account-name_broker). (Required field). client-id : defines the identifier of the MQTT client representing the device when connecting to the MQTT broker. If left empty, it is automatically determined by the client software as the MAC address of the main network interface (in general numbers and uppercase letters without ':'). This identifier has to be unique within your account. keep-alive : defines the \"keep alive\" interval measured in seconds. It specifies the maximum amount of time that should pass without communication between the client and the server. The client will ensure that at least one message travels across the network within each keep alive period. In the absence of a data-related message during this time period, the client will send a very small MQTT \"ping\" message that the server will acknowledge. The keep alive interval enables the client to detect when the server is no longer available without having to wait for the long TCP/IP timeout. (Required field). Warning The keep-alive interval may \"conflict\" with the TCP idle timeout set at the TCP/IP level. As a best practice the TCP idle timeout should be at least 1,5 times the keep-alive time interval. If the TCP idle timeout is less or equal the keep-alive, the MQTT connection may be dropped due to the TCP idle timeout expiration. timeout : sets the timeout used for all interactions with the MQTT broker. (Required field). clean-session : controls the behavior of both the client and the server at the time of connection and disconnection. When this parameter is set to true, the state information is discarded at connection and disconnection; when set to false, the state information is maintained. (Required field). lwt parameters: define the MQTT \"Last Will and Testament\" (LWT) settings for the client. In the event that the client unexpectedly loses its connection to the server, the server publishes the LWT message (lwt.payload) to the LWT topic on behalf of the client. This allows other clients (subscribed to the LWT topic) to be made aware that the client has disconnected. LWT parameters that may be configured include: lwt.topic lwt.payload lwt.qos lwt.retain in-flight.persistence : defines the storage type where in-flight messages are persisted across reconnections. They may be stored in memory, or in a file on the disk. (Required field). protocol-version : defines the MQTT Protocol version to be used. This value may be 3.1 or 3.1.1. SSL parameters: define the SSL specific settings for the client. SSL parameters that can be configured include: ssl.default.protocol ssl.hostname.verification ssl.default.cipherSuites ssl.certificate.alias","title":"Data Transport Service Configuration"},{"location":"gateway-configuration/data-transport-service-configuration/#data-transport-service-configuration","text":"The DataTransport service provides the ability to connect to a remote broker, publish messages, subscribe to topics, receive messages on the subscribed topics, and disconnect from the remote message broker. To use this service, select the MqttDataTransport option located in the Cloud Connections area as shown in the screen captures below. The MqttDataTransport service provides the following configuration parameters: broker-url : defines the URL of the MQTT broker to connect to. For the Everyware Cloud sandbox, this address is either mqtt://broker-sbx.everyware.io:1883/ or mqtts://broker-sbx.everyware.io:8883/ for an encrypted connection. (Required field). topic.context.account-name : defines the name of the account to which the device belongs. username and password : define the username and password that have been assigned to the device by the account administrator (generally username is account-name_broker). (Required field). client-id : defines the identifier of the MQTT client representing the device when connecting to the MQTT broker. If left empty, it is automatically determined by the client software as the MAC address of the main network interface (in general numbers and uppercase letters without ':'). This identifier has to be unique within your account. keep-alive : defines the \"keep alive\" interval measured in seconds. It specifies the maximum amount of time that should pass without communication between the client and the server. The client will ensure that at least one message travels across the network within each keep alive period. In the absence of a data-related message during this time period, the client will send a very small MQTT \"ping\" message that the server will acknowledge. The keep alive interval enables the client to detect when the server is no longer available without having to wait for the long TCP/IP timeout. (Required field). Warning The keep-alive interval may \"conflict\" with the TCP idle timeout set at the TCP/IP level. As a best practice the TCP idle timeout should be at least 1,5 times the keep-alive time interval. If the TCP idle timeout is less or equal the keep-alive, the MQTT connection may be dropped due to the TCP idle timeout expiration. timeout : sets the timeout used for all interactions with the MQTT broker. (Required field). clean-session : controls the behavior of both the client and the server at the time of connection and disconnection. When this parameter is set to true, the state information is discarded at connection and disconnection; when set to false, the state information is maintained. (Required field). lwt parameters: define the MQTT \"Last Will and Testament\" (LWT) settings for the client. In the event that the client unexpectedly loses its connection to the server, the server publishes the LWT message (lwt.payload) to the LWT topic on behalf of the client. This allows other clients (subscribed to the LWT topic) to be made aware that the client has disconnected. LWT parameters that may be configured include: lwt.topic lwt.payload lwt.qos lwt.retain in-flight.persistence : defines the storage type where in-flight messages are persisted across reconnections. They may be stored in memory, or in a file on the disk. (Required field). protocol-version : defines the MQTT Protocol version to be used. This value may be 3.1 or 3.1.1. SSL parameters: define the SSL specific settings for the client. SSL parameters that can be configured include: ssl.default.protocol ssl.hostname.verification ssl.default.cipherSuites ssl.certificate.alias","title":"Data Transport Service Configuration"},{"location":"gateway-configuration/device-information/","text":"Device Information The Device section provides several information about the gateway where Kura is running on. This section can be accessed by selecting the Device option located in the System area. Profile The Profile tab shows several information about the gateway, organized under the Device, Hardware, Software and Java Information. Bundles This tab lists all the bundles installed on Kura, with details about the name, version, id, state and signature status. The signature value will be true if the corresponding bundle is signed, false otherwise. The buttons in the upper part of the tab allows the user to manage the listed bundles: Start Bundle : starts a bundle that is in Resolved or Installed state; Stop Bundle : stops a bundle that is in Active state; Refresh : reloads the bundles states list. Containers The Containers tab lists the containers and images that are currently managed by the Container Orchestration Service . From this tab, the user can start and stop containers and delete images. Threads The Threads tab shows a list of the threads that are currently running in the JVM. System Packages The System Packages tab shows the list of all the Linux packages installed on the OS. The package is detailed with the name, version and type (DEB/RPM/APK). System Properties The System Properties tab shows a list of relevant properties including OS and JVM parameters. Command A detailed description of this tab is presented in the Command Service page. System Logs The System Logs tab allows downloading a compressed file containing all the relevant log files from the gateway. The download button creates and downloads a compressed file with the following items: all the files in /var/log or the content of the folder defined by the kura.log.download.sources property; the content of the journal for the Kura process ( kura-journal.log ); the content of the journal for the whole system ( system-journal.log ). In addition to this feature, the page also allows the real-time displaying of system logs, if the framework has the availability of one or more components that implement the LogProvider API. The UI also provides a useful button to open a new Kura instance in a new browser window. A reference implementation of the LogProvider API is provided in the org.eclipse.kura.log.filesystem.provider bundle. This bundle exposes in the framework a factory that can be used to read filesystem files. By default, Eclipse Kura creates two log providers at startup: one that reads from /var/log/kura.log and the other that reads from /var/log/kura-audit.log . The collected logs are stored in a cache server-side and are collected from the point in time where the log providers get attached to the UI (usually, from the login or after a refresh of the browser's window). When the section \"System Logs\" is accessed, the new log entries are polled from the server's cache and stored client-side.","title":"Device Information"},{"location":"gateway-configuration/device-information/#device-information","text":"The Device section provides several information about the gateway where Kura is running on. This section can be accessed by selecting the Device option located in the System area.","title":"Device Information"},{"location":"gateway-configuration/device-information/#profile","text":"The Profile tab shows several information about the gateway, organized under the Device, Hardware, Software and Java Information.","title":"Profile"},{"location":"gateway-configuration/device-information/#bundles","text":"This tab lists all the bundles installed on Kura, with details about the name, version, id, state and signature status. The signature value will be true if the corresponding bundle is signed, false otherwise. The buttons in the upper part of the tab allows the user to manage the listed bundles: Start Bundle : starts a bundle that is in Resolved or Installed state; Stop Bundle : stops a bundle that is in Active state; Refresh : reloads the bundles states list.","title":"Bundles"},{"location":"gateway-configuration/device-information/#containers","text":"The Containers tab lists the containers and images that are currently managed by the Container Orchestration Service . From this tab, the user can start and stop containers and delete images.","title":"Containers"},{"location":"gateway-configuration/device-information/#threads","text":"The Threads tab shows a list of the threads that are currently running in the JVM.","title":"Threads"},{"location":"gateway-configuration/device-information/#system-packages","text":"The System Packages tab shows the list of all the Linux packages installed on the OS. The package is detailed with the name, version and type (DEB/RPM/APK).","title":"System Packages"},{"location":"gateway-configuration/device-information/#system-properties","text":"The System Properties tab shows a list of relevant properties including OS and JVM parameters.","title":"System Properties"},{"location":"gateway-configuration/device-information/#command","text":"A detailed description of this tab is presented in the Command Service page.","title":"Command"},{"location":"gateway-configuration/device-information/#system-logs","text":"The System Logs tab allows downloading a compressed file containing all the relevant log files from the gateway. The download button creates and downloads a compressed file with the following items: all the files in /var/log or the content of the folder defined by the kura.log.download.sources property; the content of the journal for the Kura process ( kura-journal.log ); the content of the journal for the whole system ( system-journal.log ). In addition to this feature, the page also allows the real-time displaying of system logs, if the framework has the availability of one or more components that implement the LogProvider API. The UI also provides a useful button to open a new Kura instance in a new browser window. A reference implementation of the LogProvider API is provided in the org.eclipse.kura.log.filesystem.provider bundle. This bundle exposes in the framework a factory that can be used to read filesystem files. By default, Eclipse Kura creates two log providers at startup: one that reads from /var/log/kura.log and the other that reads from /var/log/kura-audit.log . The collected logs are stored in a cache server-side and are collected from the point in time where the log providers get attached to the UI (usually, from the login or after a refresh of the browser's window). When the section \"System Logs\" is accessed, the new log entries are polled from the server's cache and stored client-side.","title":"System Logs"},{"location":"gateway-configuration/ethernet-configuration/","text":"Ethernet Configuration As described in the Network Configuration section, Ethernet interfaces have two configuration tabs: TCP/IP and DHCP & NAT . Each Ethernet interface may be configured either as LAN or WAN; it may also be disabled. If the interface is designated as LAN and is manually configured, the DHCP & NAT tab is enabled to allow DHCP server and/or 'many-to-one' NAT setup; otherwise, the DHCP & NAT tab is disabled. For more information on TCP/IP and DHCP & NAT settings, please refer to the Network Configuration section.","title":"Ethernet Configuration"},{"location":"gateway-configuration/ethernet-configuration/#ethernet-configuration","text":"As described in the Network Configuration section, Ethernet interfaces have two configuration tabs: TCP/IP and DHCP & NAT . Each Ethernet interface may be configured either as LAN or WAN; it may also be disabled. If the interface is designated as LAN and is manually configured, the DHCP & NAT tab is enabled to allow DHCP server and/or 'many-to-one' NAT setup; otherwise, the DHCP & NAT tab is disabled. For more information on TCP/IP and DHCP & NAT settings, please refer to the Network Configuration section.","title":"Ethernet Configuration"},{"location":"gateway-configuration/firewall-configuration/","text":"Firewall Configuration Kura offers easy management of the Linux firewall iptables and ip6tables included in an IoT Gateway. Additionally, Kura provides the ability to manage network access security to an IoT Gateway for both IPv4 and IPv6 through the following: Open Ports (local service rules) Port Forwarding IP Forwarding and Masquerading (NAT service rules) 'Automatic' NAT service rules Open Ports, Port Forwarding, and IP Forwarding and Masquerading are configured via respective Firewall configuration tabs. 'Automatic' NAT is enabled for each local (LAN) interface using the DHCP & NAT tab of the respective interface configuration. While the IPv4 Firewall configuration capability is present on all IoT Gateways, the IPv6 Firewall is present only on devices that support IPv6 Networking. Firewall Linux Configuration This section describes the changes applied by Kura at the Linux networking configuration. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. When a new firewall configuration is submitted, Kura immediately applies it using the iptables service provided by the OS. Moreover, the rules are stored in the filesystem and a new Kura snapshot is generated containing the new configuration. At the next startup, the firewall service in the OS will re-apply them and Kura will check the firewall configuration against the one contained in the last snapshot. In this way, the user can update the snapshot with the needed rules and apply them to the system using the webUI or modify the snapshot_0.xml before the first start of Kura. In order to allow a better coexistence between Kura and external applications that need to modify firewall rules, Kura writes its rules to a set of custom iptables chains. They are input-kura , output-kura , forward-kura , forward-kura-pf and forward-kura-ipf for the filter table and input-kura , output-kura , prerouting-kura , prerouting-kura-pf , postrouting-kura , postrouting-kura-pf and postrouting-kura-ipf for the nat table. The custom chains are then put in their respective standard iptables chains, as shown in the following: iptables -t filter -I INPUT -j input-kura iptables -t filter -I OUTPUT -j output-kura iptables -t filter -I FORWARD -j forward-kura iptables -t filter -I forward-kura -j forward-kura-pf iptables -t filter -I forward-kura -j forward-kura-ipf iptables -t nat -I PREROUTING -j prerouting-kura iptables -t nat -I prerouting-kura -j prerouting-kura-pf iptables -t nat -I INPUT -j input-kura iptables -t nat -I OUTPUT -j output-kura iptables -t nat -I POSTROUTING -j postrouting-kura iptables -t nat -I postrouting-kura -j postrouting-kura-pf iptables -t nat -I postrouting-kura -j postrouting-kura-ipf The same custom chains are used in the IPv6 case. Even if many firewall rules can be handled by Kura, it could be that some rules cannot be filled through the Web Console. In this case, custom firewall rules may be added to the /etc/init.d/firewall_cust script manually. These rules are applied/reapplied every time the firewall service starts, that is at the gateway startup. These custom rules should not be applied to the Kura custom chains, but to the standard ones. Open Ports If Kura is running on a gateway, all TCP/UDP ports are closed by default unless they are listed in the Open Ports IPv4 or Open Ports IPv6 tab of the Firewall section in the Gateway Administration Console, or in the /etc/sysconfig/iptables script. Therefore, if a user needs to connect to a specific port on a gateway, it is insufficient to have an application listening on the desired port; the port also needs to be opened in the firewall. To open a port using the Gateway Administration Console, select the Firewall option located in the System area. The Firewall configuration display appears in the main window. With the Open Ports IPv4 or Open Ports IPV6 tab selected, click the New button. The New Open Port Entry form appears. The New Open Port Entry form contains the following configuration parameters: Port : specifies the port to be opened. (Required field.) Protocol : defines the protocol (tcp or udp). (Required field.) Permitted Network : only allows packets originated by a host on this network. Permitted Interface Name : only allows packets arrived on this interface. Unpermitted Interface Name : blocks packets arrived on this interface. Permitted MAC Address : only allows packets originated by this host. Source Port Range : only allows packets with source port in the defined range. Complete the New Open Port Entry form and click the Submit button when finished. Once the form is submitted, a new port entry will appear. Click the Apply button for the change to take effect. The firewall rules related to the open ports section are stored in the input-kura custom chain of the IPv4/IPv6 filter table. Port Forwarding Port forwarding rules are needed to establish connectivity from the WAN side to a specific port on a host that resides on a LAN behind the gateway. In this case, a routing solution may be avoided since the connection is made to a specified external port on a gateway, and packets are forwarded to an internal port on the destination host; therefore, it is not necessary to add the external port to the list of open ports. To add a port forwarding rule, select the Port Forwarding IPv4 or Port Forwarding IPv6 tab on the Firewall display and click the New button. The Port Forward Entry form appears. The Port Forward Entry form contains the following configuration parameters: Input Interface : specifies the interface through which a packet is going to be received. (Required field). Output Interface : specifies the interface through which a packet is going to be forwarded to its destination. (Required field). LAN Address : supplies the IP address of destination host. (Required field). Protocol : defines the protocol (tcp or udp). (Required field). External Port : provides the external destination port on gateway unit. (Required field). Internal Port : provides the port on a destination host. (Required field). Enable Masquerading : defines whether masquerading is used (yes or no). If enabled, the gateway replaces the IP address of the originating host with the IP address of its own output (LAN) interface. This is needed when the destination host does not have a back route to the originating host (or default gateway route) via the gateway unit. The masquerading option is provided with port forwarding to limit gateway forwarding only to the destination port. (Required field). Permitted Network : only forwards if the packet is originated from a host on this network. Permitted MAC Address : only forwards if the packet is originated by this host. Source Port Range : only forwards if the packet's source port is within the defined range. Complete the Port Forward Entry form and click the Apply button for the desired port forwarding rules to take effect. The firewall rules related to the port forwarding section are stored in the forward-kura-pf custom chain of the IPv4/IPv6 filter table and in the postrouting-kura-pf and prerouting-kura-pf chains of the IPv4/IPv6 nat table. Port Forwarding example This section describes an example of port forwarding rules applied to the IPv4 case. The initial setup is described below. A couple of RaspberryPi that shares the same LAN over Ethernet. The first RaspberryPi running Kura is configured as follows: The eth0 interface static with IP address of 172.16.0.5. There is no default gateway. The second RaspberryPi running Kura is configured as follows: The eth0 interface LAN/static with IP address of 172.16.0.1/24 and no NAT. The wlan0 interface is WAN/DHCP client. A laptop is connected to the same network of the wlan0 of the second RaspberryPi and can ping its wlan0 interface. The purpose of the second RaspberryPi configuration is to enable access to the Administration Console running on the first one (port 80) by connecting to the second RaspberryPi's port 8080 over the wlan. This scenario assumes that IP addresses are assigned as follows: Second RaspberryPi wlan0 - 10.200.12.6 Laptop wlan0 - 10.200.12.10 The following port forwarding entries are added to the second RaspberryPi configuration as described above using the Port Forward Entry form: Input Interface - wlan0 Output Interface - eth0 LAN Address - 172.16.0.5 Protocol - tcp External Port - 8080 Internal Port - 80 Masquerade - yes The Permitted Network , Permitted MAC Address , and Source Port Range fields are left blank. The following iptables rules are applied and added to the /etc/sysconfig/iptables file: iptables -t nat -A prerouting-kura-pf -i wlan0 -p tcp -s 0 .0.0.0/0 --dport 8080 -j DNAT --to 172 .16.0.5:80 iptables -t nat -A postrouting-kura-pf -o eth0 -p tcp -d 172 .16.0.5 -j MASQUERADE iptables -A forward-kura-pf -i wlan0 -o eth0 -p tcp -s 0 .0.0.0/0 --dport 80 -d 172 .16.0.5 -j ACCEPT iptables -A forward-kura-pf -i eth0 -o wlan0 -p tcp -s 172 .16.0.5 -m state --state RELATED,ESTABLISHED -j ACCEPT The following iptables commands may be used to verify that the new rules have been applied: sudo iptables -v -n -L sudo iptables -v -n -L -t nat At this point, it is possible to try to connect to http://10.200.12.6 and to http://10.200.12.6:8080 from the laptop. Note that when a connection is made to the device on port 80, it is to the Kura configuration page on the device itself (the second RaspberryPi). When the gateway is connected on port 8080, you are forwarded to the Kura Gateway Administration Console on the first RaspberryPi. The destination host can only be reached by connecting to the gateway on port 8080. Another way to connect to the Kura Gateway Administration Console on the first RaspberryPi would be to add an IP Forwarding/Masquerading entry as described in the next section. IP Forwarding/Masquerading The advantage of the Automatic NAT method is its simplicity. However, this approach does not handle reverse NATing, and it cannot be used for interfaces that are not listed in the Gateway Administration Console (such as VPN tun0 interface). To set up generic (one-to-many) NATing, select the IP Forwarding/Masquerading IPv4 or IP Forwarding/Masquerading IPv6 tab on the Firewall display. Press the New button and the IP Forwarding/Masquerading form appears. The IP Forwarding/Masquerading form contains the following configuration parameters: Input Interface : specifies the interface through which a packet is going to be received. (Required field). Output Interface : specifies the interface through which a packet is going to be forwarded to its destination. (Required field). Protocol : defines the protocol of the rule to check (all, tcp, or udp). (Required field). Source Network/Host : identifies the source network or host name (CIDR notation). Set to IPv4 0.0.0.0/0 or IPv6 ::/0 if empty. Destination Network/Host : identifies the destination network or host name (CIDR notation). Set to IPv4 0.0.0.0/0 or IPv6 ::/0 if empty. Enable Masquerading : defines whether masquerading is used (yes or no). If set to 'yes', masquerading is enabled. If set to 'no', only FORWARDING rules are be added. (Required field). The rules will be added to the forward-kura-ipf chain in the IPv4/IPv6 filter table and in the postrouting-kura-ipf one in the IPv4/IPv6 nat table. As a use-case scenario, consider the same setup as in port forwarding, but with cellular interface disabled and eth1 interface configured as WAN/DHCP client. In this case, the interfaces of the gateway are configured as follows: eth0 : LAN/Static/No NAT 172.16.0.1/24 eth1 : WAN/DHCP 10.11.5.4/24 To reach the gateway sitting on the 172.16.0.5/24 from a specific host on the 10.11.0.0/16 network, set up the following Reverse NAT entry: Input Interface: eth1 (WAN interface) Output Interface: eth0 (LAN interface) Protocol: all Source Network/Host: 10.11.5.21/32 Destination Network/Host: 172.16.0.5/32 Enable Masquerading: yes This case applies the following iptables rules: iptables -t nat -A postrouting-kura-ipf -p tcp -s 10 .11.5.21/32 -d 172 .16.0.5/32 -o eth0 -j MASQUERADE iptables -A forward-kura-ipf -p tcp -s 172 .16.0.5/32 -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT iptables -A forward-kura-ipf -p tcp -s 10 .11.5.21/32 -d 172 .16.0.5/32 -i eth1 -o eth0 -m tcp -j ACCEPT Additionally, a route to the 172.16.0.0/24 network needs to be configured on a connecting laptop as shown below: sudo route add -net 172 .16.0.0 netmask 255 .255.255.0 gw 10 .11.5.4 Since masquerading is enabled, there is no need to specify the back route on the destination host. Note that with this setup, the gateway only forwards packets originating on the 10.11.5.21 laptop to the 172.16.0.5 destination. If the Source Network/Host and Destination Network/Host fields are empty, iptables rules appear as follows: iptables -t nat -A postrouting-kura-ipf -p tcp -s 0 .0.0.0/0 -d 0 .0.0.0/0 -o eth0 -j MASQUERADE iptables -A forward-kura-ipf -p tcp -s 0 .0.0.0/0 -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT iptables -A forward-kura-ipf -p tcp -s 0 .0.0.0/0 -d 0 .0.0.0/0 -i eth1 -o eth0 -j ACCEPT The gateway forwards packets from any external host (connected to eth1) to any destination on the local network (eth0 interface).","title":"Firewall Configuration"},{"location":"gateway-configuration/firewall-configuration/#firewall-configuration","text":"Kura offers easy management of the Linux firewall iptables and ip6tables included in an IoT Gateway. Additionally, Kura provides the ability to manage network access security to an IoT Gateway for both IPv4 and IPv6 through the following: Open Ports (local service rules) Port Forwarding IP Forwarding and Masquerading (NAT service rules) 'Automatic' NAT service rules Open Ports, Port Forwarding, and IP Forwarding and Masquerading are configured via respective Firewall configuration tabs. 'Automatic' NAT is enabled for each local (LAN) interface using the DHCP & NAT tab of the respective interface configuration. While the IPv4 Firewall configuration capability is present on all IoT Gateways, the IPv6 Firewall is present only on devices that support IPv6 Networking.","title":"Firewall Configuration"},{"location":"gateway-configuration/firewall-configuration/#firewall-linux-configuration","text":"This section describes the changes applied by Kura at the Linux networking configuration. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. When a new firewall configuration is submitted, Kura immediately applies it using the iptables service provided by the OS. Moreover, the rules are stored in the filesystem and a new Kura snapshot is generated containing the new configuration. At the next startup, the firewall service in the OS will re-apply them and Kura will check the firewall configuration against the one contained in the last snapshot. In this way, the user can update the snapshot with the needed rules and apply them to the system using the webUI or modify the snapshot_0.xml before the first start of Kura. In order to allow a better coexistence between Kura and external applications that need to modify firewall rules, Kura writes its rules to a set of custom iptables chains. They are input-kura , output-kura , forward-kura , forward-kura-pf and forward-kura-ipf for the filter table and input-kura , output-kura , prerouting-kura , prerouting-kura-pf , postrouting-kura , postrouting-kura-pf and postrouting-kura-ipf for the nat table. The custom chains are then put in their respective standard iptables chains, as shown in the following: iptables -t filter -I INPUT -j input-kura iptables -t filter -I OUTPUT -j output-kura iptables -t filter -I FORWARD -j forward-kura iptables -t filter -I forward-kura -j forward-kura-pf iptables -t filter -I forward-kura -j forward-kura-ipf iptables -t nat -I PREROUTING -j prerouting-kura iptables -t nat -I prerouting-kura -j prerouting-kura-pf iptables -t nat -I INPUT -j input-kura iptables -t nat -I OUTPUT -j output-kura iptables -t nat -I POSTROUTING -j postrouting-kura iptables -t nat -I postrouting-kura -j postrouting-kura-pf iptables -t nat -I postrouting-kura -j postrouting-kura-ipf The same custom chains are used in the IPv6 case. Even if many firewall rules can be handled by Kura, it could be that some rules cannot be filled through the Web Console. In this case, custom firewall rules may be added to the /etc/init.d/firewall_cust script manually. These rules are applied/reapplied every time the firewall service starts, that is at the gateway startup. These custom rules should not be applied to the Kura custom chains, but to the standard ones.","title":"Firewall Linux Configuration"},{"location":"gateway-configuration/firewall-configuration/#open-ports","text":"If Kura is running on a gateway, all TCP/UDP ports are closed by default unless they are listed in the Open Ports IPv4 or Open Ports IPv6 tab of the Firewall section in the Gateway Administration Console, or in the /etc/sysconfig/iptables script. Therefore, if a user needs to connect to a specific port on a gateway, it is insufficient to have an application listening on the desired port; the port also needs to be opened in the firewall. To open a port using the Gateway Administration Console, select the Firewall option located in the System area. The Firewall configuration display appears in the main window. With the Open Ports IPv4 or Open Ports IPV6 tab selected, click the New button. The New Open Port Entry form appears. The New Open Port Entry form contains the following configuration parameters: Port : specifies the port to be opened. (Required field.) Protocol : defines the protocol (tcp or udp). (Required field.) Permitted Network : only allows packets originated by a host on this network. Permitted Interface Name : only allows packets arrived on this interface. Unpermitted Interface Name : blocks packets arrived on this interface. Permitted MAC Address : only allows packets originated by this host. Source Port Range : only allows packets with source port in the defined range. Complete the New Open Port Entry form and click the Submit button when finished. Once the form is submitted, a new port entry will appear. Click the Apply button for the change to take effect. The firewall rules related to the open ports section are stored in the input-kura custom chain of the IPv4/IPv6 filter table.","title":"Open Ports"},{"location":"gateway-configuration/firewall-configuration/#port-forwarding","text":"Port forwarding rules are needed to establish connectivity from the WAN side to a specific port on a host that resides on a LAN behind the gateway. In this case, a routing solution may be avoided since the connection is made to a specified external port on a gateway, and packets are forwarded to an internal port on the destination host; therefore, it is not necessary to add the external port to the list of open ports. To add a port forwarding rule, select the Port Forwarding IPv4 or Port Forwarding IPv6 tab on the Firewall display and click the New button. The Port Forward Entry form appears. The Port Forward Entry form contains the following configuration parameters: Input Interface : specifies the interface through which a packet is going to be received. (Required field). Output Interface : specifies the interface through which a packet is going to be forwarded to its destination. (Required field). LAN Address : supplies the IP address of destination host. (Required field). Protocol : defines the protocol (tcp or udp). (Required field). External Port : provides the external destination port on gateway unit. (Required field). Internal Port : provides the port on a destination host. (Required field). Enable Masquerading : defines whether masquerading is used (yes or no). If enabled, the gateway replaces the IP address of the originating host with the IP address of its own output (LAN) interface. This is needed when the destination host does not have a back route to the originating host (or default gateway route) via the gateway unit. The masquerading option is provided with port forwarding to limit gateway forwarding only to the destination port. (Required field). Permitted Network : only forwards if the packet is originated from a host on this network. Permitted MAC Address : only forwards if the packet is originated by this host. Source Port Range : only forwards if the packet's source port is within the defined range. Complete the Port Forward Entry form and click the Apply button for the desired port forwarding rules to take effect. The firewall rules related to the port forwarding section are stored in the forward-kura-pf custom chain of the IPv4/IPv6 filter table and in the postrouting-kura-pf and prerouting-kura-pf chains of the IPv4/IPv6 nat table.","title":"Port Forwarding"},{"location":"gateway-configuration/firewall-configuration/#port-forwarding-example","text":"This section describes an example of port forwarding rules applied to the IPv4 case. The initial setup is described below. A couple of RaspberryPi that shares the same LAN over Ethernet. The first RaspberryPi running Kura is configured as follows: The eth0 interface static with IP address of 172.16.0.5. There is no default gateway. The second RaspberryPi running Kura is configured as follows: The eth0 interface LAN/static with IP address of 172.16.0.1/24 and no NAT. The wlan0 interface is WAN/DHCP client. A laptop is connected to the same network of the wlan0 of the second RaspberryPi and can ping its wlan0 interface. The purpose of the second RaspberryPi configuration is to enable access to the Administration Console running on the first one (port 80) by connecting to the second RaspberryPi's port 8080 over the wlan. This scenario assumes that IP addresses are assigned as follows: Second RaspberryPi wlan0 - 10.200.12.6 Laptop wlan0 - 10.200.12.10 The following port forwarding entries are added to the second RaspberryPi configuration as described above using the Port Forward Entry form: Input Interface - wlan0 Output Interface - eth0 LAN Address - 172.16.0.5 Protocol - tcp External Port - 8080 Internal Port - 80 Masquerade - yes The Permitted Network , Permitted MAC Address , and Source Port Range fields are left blank. The following iptables rules are applied and added to the /etc/sysconfig/iptables file: iptables -t nat -A prerouting-kura-pf -i wlan0 -p tcp -s 0 .0.0.0/0 --dport 8080 -j DNAT --to 172 .16.0.5:80 iptables -t nat -A postrouting-kura-pf -o eth0 -p tcp -d 172 .16.0.5 -j MASQUERADE iptables -A forward-kura-pf -i wlan0 -o eth0 -p tcp -s 0 .0.0.0/0 --dport 80 -d 172 .16.0.5 -j ACCEPT iptables -A forward-kura-pf -i eth0 -o wlan0 -p tcp -s 172 .16.0.5 -m state --state RELATED,ESTABLISHED -j ACCEPT The following iptables commands may be used to verify that the new rules have been applied: sudo iptables -v -n -L sudo iptables -v -n -L -t nat At this point, it is possible to try to connect to http://10.200.12.6 and to http://10.200.12.6:8080 from the laptop. Note that when a connection is made to the device on port 80, it is to the Kura configuration page on the device itself (the second RaspberryPi). When the gateway is connected on port 8080, you are forwarded to the Kura Gateway Administration Console on the first RaspberryPi. The destination host can only be reached by connecting to the gateway on port 8080. Another way to connect to the Kura Gateway Administration Console on the first RaspberryPi would be to add an IP Forwarding/Masquerading entry as described in the next section.","title":"Port Forwarding example"},{"location":"gateway-configuration/firewall-configuration/#ip-forwardingmasquerading","text":"The advantage of the Automatic NAT method is its simplicity. However, this approach does not handle reverse NATing, and it cannot be used for interfaces that are not listed in the Gateway Administration Console (such as VPN tun0 interface). To set up generic (one-to-many) NATing, select the IP Forwarding/Masquerading IPv4 or IP Forwarding/Masquerading IPv6 tab on the Firewall display. Press the New button and the IP Forwarding/Masquerading form appears. The IP Forwarding/Masquerading form contains the following configuration parameters: Input Interface : specifies the interface through which a packet is going to be received. (Required field). Output Interface : specifies the interface through which a packet is going to be forwarded to its destination. (Required field). Protocol : defines the protocol of the rule to check (all, tcp, or udp). (Required field). Source Network/Host : identifies the source network or host name (CIDR notation). Set to IPv4 0.0.0.0/0 or IPv6 ::/0 if empty. Destination Network/Host : identifies the destination network or host name (CIDR notation). Set to IPv4 0.0.0.0/0 or IPv6 ::/0 if empty. Enable Masquerading : defines whether masquerading is used (yes or no). If set to 'yes', masquerading is enabled. If set to 'no', only FORWARDING rules are be added. (Required field). The rules will be added to the forward-kura-ipf chain in the IPv4/IPv6 filter table and in the postrouting-kura-ipf one in the IPv4/IPv6 nat table. As a use-case scenario, consider the same setup as in port forwarding, but with cellular interface disabled and eth1 interface configured as WAN/DHCP client. In this case, the interfaces of the gateway are configured as follows: eth0 : LAN/Static/No NAT 172.16.0.1/24 eth1 : WAN/DHCP 10.11.5.4/24 To reach the gateway sitting on the 172.16.0.5/24 from a specific host on the 10.11.0.0/16 network, set up the following Reverse NAT entry: Input Interface: eth1 (WAN interface) Output Interface: eth0 (LAN interface) Protocol: all Source Network/Host: 10.11.5.21/32 Destination Network/Host: 172.16.0.5/32 Enable Masquerading: yes This case applies the following iptables rules: iptables -t nat -A postrouting-kura-ipf -p tcp -s 10 .11.5.21/32 -d 172 .16.0.5/32 -o eth0 -j MASQUERADE iptables -A forward-kura-ipf -p tcp -s 172 .16.0.5/32 -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT iptables -A forward-kura-ipf -p tcp -s 10 .11.5.21/32 -d 172 .16.0.5/32 -i eth1 -o eth0 -m tcp -j ACCEPT Additionally, a route to the 172.16.0.0/24 network needs to be configured on a connecting laptop as shown below: sudo route add -net 172 .16.0.0 netmask 255 .255.255.0 gw 10 .11.5.4 Since masquerading is enabled, there is no need to specify the back route on the destination host. Note that with this setup, the gateway only forwards packets originating on the 10.11.5.21 laptop to the 172.16.0.5 destination. If the Source Network/Host and Destination Network/Host fields are empty, iptables rules appear as follows: iptables -t nat -A postrouting-kura-ipf -p tcp -s 0 .0.0.0/0 -d 0 .0.0.0/0 -o eth0 -j MASQUERADE iptables -A forward-kura-ipf -p tcp -s 0 .0.0.0/0 -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT iptables -A forward-kura-ipf -p tcp -s 0 .0.0.0/0 -d 0 .0.0.0/0 -i eth1 -o eth0 -j ACCEPT The gateway forwards packets from any external host (connected to eth1) to any destination on the local network (eth0 interface).","title":"IP Forwarding/Masquerading"},{"location":"gateway-configuration/gateway-administration-console-authentication/","text":"Gateway Administration Console Authentication The Gateway Administration Console supports multiple login identities with associated permissions and HTTPS client side authentication with certificates. The identity and permission configuration and credentials is stored externally the UserAdmin service (see Authentication and Authorization for more details). Permissions The Gateway Administration Console defines the following permissions, that allow to restrict the operations that an identity is allowed to perform: kura.cloud.connection.admin : Allows to manage cloud connections using Cloud Connections tab. kura.packages.admin : Allows to install deployment packages using the Packages tab. kura.device : Allows to interact with the Device and Status tabs. kura.network.admin : Allows to manage network connectivity and firewall configuration using the Network and Firewall tabs. kura.wires.admin : Allows to manage Wire Graph and Driver and Asset configurations using the Wires and Drivers and Assets tabs. kura.admin : This permission implies all other permissions, including the ones defined by external applications. Default identities Kura provides the following identities by default: Name Password Permissions admin admin kura.admin appadmin appadmin kura.cloud.connection.admin, kura.packages.admin, kura.wires.admin netadmin netadmin kura.cloud.connection.admin, kura.device, kura.network.admin It is possible to modify/remove the default identity configuration. Login The login screen can be accessed by entering the https://${device.ip} URL in a browser window, where ${device.ip} is the IP address. Replace https with http if HTTPS support has been disabled on the gateway. Identity name and password In order to login with identity name and password, select Password as authentication method and enter the credentials. Note Password authentication method might not be available if it has been disabled by the administrator using the Security -> Web Console section. Forced password change on login Kura supports forcing an identity to change the password at login, before accessing the Administration Console. This functionality is enabled by default after a fresh installation. At login the following prompt will appear forcing the user to define a new password. This functionality can be configured by an admin identity using the Identities section of the Administration Console. The forced password change can also be disabled by editing the snapshot_0.xml file removing the kura.need.password.change property for the desired identity in the org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl configuration before Kura first boot. If this functionality is enabled, REST API username and password authentication is will be disabled for the specific identity until the password is updated, REST API certificate authentication will still work. Certificate authentication In order to perform HTTPS certificate authentication, select the Certificate authentication method and click Login , the browser may prompt to select the certificate to use. Note Certificate authentication method might not be available if no HTTPS with client authentication ports have been configured or if it has been explicitly disabled by the administrator using the Security -> Web Console section. Identity and Permission management The Gateway Administration Console allows the management of identity and permission configuration in a dedicated view, accessible by navigating to the Identities section: The section above allows to: Create new identities New identities can be created by clicking the New Identity button. Remove existing identities Existing identities can be removed by selecting the corresponding entry in the list and pressing the Delete Identity button. Manage password authentication Password authentication can be enabled or disabled by changing the Password authentication enabled parameter. Changing this parameter will not modify the existing stored password. Enabling password authentication for a new identity requires to define a new password. The password can be set/modified by clicking the Change password button. Assign or remove permissions Permissions can be assigned or removed by ticking the corresponding entries in the Permissions table. No changes will be applied to the gateway until the Apply button is pressed. Certificate based authentication The Gateway Administration Console supports HTTPS certificate based client side authentication. The authentication process works as follows: One or more Https client certificate must be added to keystore, this can be done using the Certificate Management section. The user must provide a certificate or certificate chain signed by one of the CAs added as Https client certificate . The common name field of the leaf certificate provided by the user must be the name of the identity that should be used for the session. HTTPS with certificate based authentication must be enabled in the HTTP/HTTPS Configuration section. Log in with certificate can be performed by selecting the Certificate authentication method in Gateway Administration Console login screen or by connecting directly to the HTTPS port with client side authentication specified in gateway configuration.","title":"Gateway Administration Console Authentication"},{"location":"gateway-configuration/gateway-administration-console-authentication/#gateway-administration-console-authentication","text":"The Gateway Administration Console supports multiple login identities with associated permissions and HTTPS client side authentication with certificates. The identity and permission configuration and credentials is stored externally the UserAdmin service (see Authentication and Authorization for more details).","title":"Gateway Administration Console Authentication"},{"location":"gateway-configuration/gateway-administration-console-authentication/#permissions","text":"The Gateway Administration Console defines the following permissions, that allow to restrict the operations that an identity is allowed to perform: kura.cloud.connection.admin : Allows to manage cloud connections using Cloud Connections tab. kura.packages.admin : Allows to install deployment packages using the Packages tab. kura.device : Allows to interact with the Device and Status tabs. kura.network.admin : Allows to manage network connectivity and firewall configuration using the Network and Firewall tabs. kura.wires.admin : Allows to manage Wire Graph and Driver and Asset configurations using the Wires and Drivers and Assets tabs. kura.admin : This permission implies all other permissions, including the ones defined by external applications.","title":"Permissions"},{"location":"gateway-configuration/gateway-administration-console-authentication/#default-identities","text":"Kura provides the following identities by default: Name Password Permissions admin admin kura.admin appadmin appadmin kura.cloud.connection.admin, kura.packages.admin, kura.wires.admin netadmin netadmin kura.cloud.connection.admin, kura.device, kura.network.admin It is possible to modify/remove the default identity configuration.","title":"Default identities"},{"location":"gateway-configuration/gateway-administration-console-authentication/#login","text":"The login screen can be accessed by entering the https://${device.ip} URL in a browser window, where ${device.ip} is the IP address. Replace https with http if HTTPS support has been disabled on the gateway.","title":"Login"},{"location":"gateway-configuration/gateway-administration-console-authentication/#identity-name-and-password","text":"In order to login with identity name and password, select Password as authentication method and enter the credentials. Note Password authentication method might not be available if it has been disabled by the administrator using the Security -> Web Console section.","title":"Identity name and password"},{"location":"gateway-configuration/gateway-administration-console-authentication/#forced-password-change-on-login","text":"Kura supports forcing an identity to change the password at login, before accessing the Administration Console. This functionality is enabled by default after a fresh installation. At login the following prompt will appear forcing the user to define a new password. This functionality can be configured by an admin identity using the Identities section of the Administration Console. The forced password change can also be disabled by editing the snapshot_0.xml file removing the kura.need.password.change property for the desired identity in the org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl configuration before Kura first boot. If this functionality is enabled, REST API username and password authentication is will be disabled for the specific identity until the password is updated, REST API certificate authentication will still work.","title":"Forced password change on login"},{"location":"gateway-configuration/gateway-administration-console-authentication/#certificate-authentication","text":"In order to perform HTTPS certificate authentication, select the Certificate authentication method and click Login , the browser may prompt to select the certificate to use. Note Certificate authentication method might not be available if no HTTPS with client authentication ports have been configured or if it has been explicitly disabled by the administrator using the Security -> Web Console section.","title":"Certificate authentication"},{"location":"gateway-configuration/gateway-administration-console-authentication/#identity-and-permission-management","text":"The Gateway Administration Console allows the management of identity and permission configuration in a dedicated view, accessible by navigating to the Identities section: The section above allows to:","title":"Identity and Permission management"},{"location":"gateway-configuration/gateway-administration-console-authentication/#create-new-identities","text":"New identities can be created by clicking the New Identity button.","title":"Create new identities"},{"location":"gateway-configuration/gateway-administration-console-authentication/#remove-existing-identities","text":"Existing identities can be removed by selecting the corresponding entry in the list and pressing the Delete Identity button.","title":"Remove existing identities"},{"location":"gateway-configuration/gateway-administration-console-authentication/#manage-password-authentication","text":"Password authentication can be enabled or disabled by changing the Password authentication enabled parameter. Changing this parameter will not modify the existing stored password. Enabling password authentication for a new identity requires to define a new password. The password can be set/modified by clicking the Change password button.","title":"Manage password authentication"},{"location":"gateway-configuration/gateway-administration-console-authentication/#assign-or-remove-permissions","text":"Permissions can be assigned or removed by ticking the corresponding entries in the Permissions table. No changes will be applied to the gateway until the Apply button is pressed.","title":"Assign or remove permissions"},{"location":"gateway-configuration/gateway-administration-console-authentication/#certificate-based-authentication","text":"The Gateway Administration Console supports HTTPS certificate based client side authentication. The authentication process works as follows: One or more Https client certificate must be added to keystore, this can be done using the Certificate Management section. The user must provide a certificate or certificate chain signed by one of the CAs added as Https client certificate . The common name field of the leaf certificate provided by the user must be the name of the identity that should be used for the session. HTTPS with certificate based authentication must be enabled in the HTTP/HTTPS Configuration section. Log in with certificate can be performed by selecting the Certificate authentication method in Gateway Administration Console login screen or by connecting directly to the HTTPS port with client side authentication specified in gateway configuration.","title":"Certificate based authentication"},{"location":"gateway-configuration/gateway-administration-console/","text":"Gateway Administration Console Accessing the Kura Gateway Administration Console Kura provides a web-based, user interface for the administration and management of your IoT gateway. The Kura Gateway Administration Console enables you to monitor the gateway status, manage the network configuration, and manage the installed application and services. Access to the Kura Gateway Administration Console requires that a unit running Eclipse Kura is reachable via its Ethernet primary interface. Connections on HTTP port 443 for these interfaces are allowed by default through the built-in firewall. The Kura Gateway Administration Console can be accessed by typing the IP address of the gateway into the browser's URL bar. Once the URL is submitted, the user is required to log in and is then redirected to the Administration Console (e.g., https://192.168.2.8/admin/console ) shown in the screen capture below. The default login name and password is admin/admin . Warning It is recommended to change the default password after initial setup and before deployment, as well as limiting access to the Administration Console to a trusted local network interface using appropriate firewall rules. Password change Once logged in, the user can modify its password (recommended after the first login). To access the option, click on the button near the username in the header section. A dropdown menu appears with the logout and the password modification options. When clicking on \"Change password\", the following dialog will appear: After confirming the changes, the user will be logged out. Accessing the Kura Gateway Administration Console over a Cellular Link In order to connect to the Gateway Administration Console via a cellular interface, the following requirements must be met: The service plan must allow for a static, public IP address to be assigned to the cellular interface. The used ports must not be blocked by the provider. The user must add Open Port entries for the cellular interface. This may be done either through the Firewall tab. If some of the used ports are blocked by the service provider, there is an option to reconfigure the gateway to use another port (i.e., 8080). In order to do so, the following requirements must be met: The HttpService configuration must be changed to use the new ports. The new ports must be open in the firewall for all network interfaces. HTTPS related warnings Most browsers will probably warn the user that the connection is not secure when Gateway Administration Console is accessed using HTTPS. In order to remove the warning, the browser must be able to verify the identity of the gateway as an HTTPS server. The verification process will fail with default server certificate provided by Kura because it is self-signed and it is not suitable for hostname verification. Fixing this might require to configure the browser to trust the certificate provided by the gateway and/or using a server certificate signed by a CA trusted by the browser and assigning a DNS name to the gateway in order to pass hostname verification. System Use Notification Banner For security reasons, it may be needed to display to the user a banner that describes the intended system use before authenticating. The system use notification message is customisable by authorised personnel in the Security section of the Kura Web UI, in the Web Console tab.","title":"Gateway Administration Console"},{"location":"gateway-configuration/gateway-administration-console/#gateway-administration-console","text":"","title":"Gateway Administration Console"},{"location":"gateway-configuration/gateway-administration-console/#accessing-the-kura-gateway-administration-console","text":"Kura provides a web-based, user interface for the administration and management of your IoT gateway. The Kura Gateway Administration Console enables you to monitor the gateway status, manage the network configuration, and manage the installed application and services. Access to the Kura Gateway Administration Console requires that a unit running Eclipse Kura is reachable via its Ethernet primary interface. Connections on HTTP port 443 for these interfaces are allowed by default through the built-in firewall. The Kura Gateway Administration Console can be accessed by typing the IP address of the gateway into the browser's URL bar. Once the URL is submitted, the user is required to log in and is then redirected to the Administration Console (e.g., https://192.168.2.8/admin/console ) shown in the screen capture below. The default login name and password is admin/admin . Warning It is recommended to change the default password after initial setup and before deployment, as well as limiting access to the Administration Console to a trusted local network interface using appropriate firewall rules.","title":"Accessing the Kura Gateway Administration Console"},{"location":"gateway-configuration/gateway-administration-console/#password-change","text":"Once logged in, the user can modify its password (recommended after the first login). To access the option, click on the button near the username in the header section. A dropdown menu appears with the logout and the password modification options. When clicking on \"Change password\", the following dialog will appear: After confirming the changes, the user will be logged out.","title":"Password change"},{"location":"gateway-configuration/gateway-administration-console/#accessing-the-kura-gateway-administration-console-over-a-cellular-link","text":"In order to connect to the Gateway Administration Console via a cellular interface, the following requirements must be met: The service plan must allow for a static, public IP address to be assigned to the cellular interface. The used ports must not be blocked by the provider. The user must add Open Port entries for the cellular interface. This may be done either through the Firewall tab. If some of the used ports are blocked by the service provider, there is an option to reconfigure the gateway to use another port (i.e., 8080). In order to do so, the following requirements must be met: The HttpService configuration must be changed to use the new ports. The new ports must be open in the firewall for all network interfaces.","title":"Accessing the Kura Gateway Administration Console over a Cellular Link"},{"location":"gateway-configuration/gateway-administration-console/#https-related-warnings","text":"Most browsers will probably warn the user that the connection is not secure when Gateway Administration Console is accessed using HTTPS. In order to remove the warning, the browser must be able to verify the identity of the gateway as an HTTPS server. The verification process will fail with default server certificate provided by Kura because it is self-signed and it is not suitable for hostname verification. Fixing this might require to configure the browser to trust the certificate provided by the gateway and/or using a server certificate signed by a CA trusted by the browser and assigning a DNS name to the gateway in order to pass hostname verification.","title":"HTTPS related warnings"},{"location":"gateway-configuration/gateway-administration-console/#system-use-notification-banner","text":"For security reasons, it may be needed to display to the user a banner that describes the intended system use before authenticating. The system use notification message is customisable by authorised personnel in the Security section of the Kura Web UI, in the Web Console tab.","title":"System Use Notification Banner"},{"location":"gateway-configuration/gateway-status/","text":"Gateway Status The status of the gateway may be viewed from the Status window, which is accessed by selecting the Status option located in the System area. The Status window provides a summary of the key information regarding the status of the gateway including its IoT Cloud connection and network configuration. The values reported in the page can be reloaded using the Refresh button. This will read the current values from the system and update the page. Since the update procedure can take time, the update can be performed at most every 30 seconds. Cloud Services This section provides a summary of the IoT Cloud connection status including the following details: Account - defines the name of the account used by the MqttDataTransport service when an MQTT connection is opened. Broker URL - defines the URL of the MQTT broker. Client ID - specifies the client identifier used by the MqttDataTransport service when an MQTT connection is opened. Service Status - provides the status of the DataService and DataTransport connection. Valid values are CONNECTED or DISCONNECTED. Username - supplies the name of the user used by the MqttDataTransport service when an MQTT connection is opened. Ethernet, Wireless, and Cellular Settings This section provides information about the currently configured network interfaces. Position Status This section provides the GPS status and latest known position (if applicable) including the following details: Longitude - longitude as reported by the PositionService in radians. Latitude - latitude as reported by the PositionService in radians. Altitude - altitude as reported by the PositionService in meters. Warning The status reported in the page may not be synchronized with the real state of the system. In this case, use the Refresh button to updated the values in the page.","title":"Gateway Status"},{"location":"gateway-configuration/gateway-status/#gateway-status","text":"The status of the gateway may be viewed from the Status window, which is accessed by selecting the Status option located in the System area. The Status window provides a summary of the key information regarding the status of the gateway including its IoT Cloud connection and network configuration. The values reported in the page can be reloaded using the Refresh button. This will read the current values from the system and update the page. Since the update procedure can take time, the update can be performed at most every 30 seconds.","title":"Gateway Status"},{"location":"gateway-configuration/gateway-status/#cloud-services","text":"This section provides a summary of the IoT Cloud connection status including the following details: Account - defines the name of the account used by the MqttDataTransport service when an MQTT connection is opened. Broker URL - defines the URL of the MQTT broker. Client ID - specifies the client identifier used by the MqttDataTransport service when an MQTT connection is opened. Service Status - provides the status of the DataService and DataTransport connection. Valid values are CONNECTED or DISCONNECTED. Username - supplies the name of the user used by the MqttDataTransport service when an MQTT connection is opened.","title":"Cloud Services"},{"location":"gateway-configuration/gateway-status/#ethernet-wireless-and-cellular-settings","text":"This section provides information about the currently configured network interfaces.","title":"Ethernet, Wireless, and Cellular Settings"},{"location":"gateway-configuration/gateway-status/#position-status","text":"This section provides the GPS status and latest known position (if applicable) including the following details: Longitude - longitude as reported by the PositionService in radians. Latitude - latitude as reported by the PositionService in radians. Altitude - altitude as reported by the PositionService in meters. Warning The status reported in the page may not be synchronized with the real state of the system. In this case, use the Refresh button to updated the values in the page.","title":"Position Status"},{"location":"gateway-configuration/keys-and-certificates/","text":"Keys and Certificates The framework manages directly different key pairs and trusted certificates from different keystores. To simplify the management of such complex objects, the framework provides a dedicated section of its Administrative Web UI, a set of REST APIs for local management and a request handler (KEYS-V1 and KEYS-V2) for cloud remote interaction. Web UI The Certificates List tab in the Security section of the Kura Web UI provides a simple way for the user to get the list of all the managed keys and certificates of the framework: The page allows the user to add a new Keypair or trusted certificate or to delete an existing element. Every key pair or trusted certificate is listed by its alias, identified by the corresponding type and further identified by the keystore that is managing that element. If the user needs to add a new entry to one of the managed KeystoreService instances, can click on the Add button on the top left part of the page. The user will be guided through a process that will allow to identify the type of entry to add: It can be either a: Private/Public Key Pair Trusted Certificate If the user decides to add a key pair, then the wizard will provide a page like the following: Here the user can specify: - Key Store : the KeystoreService instance that will store and maintain the key pair - Storage Alias : the alias that will be used to identify the key pair - Private Key : the private key part of the key pair - Certificate : the public key part of the key pair After clicking on the Apply button, the new entry will be stored in the selected Keystore and listed along the other entries managed by the framework. The following cryptographic algorithms are supported for Key Pairs : - RSA - DSA Instead, if the user wants to load a Trusted Certificate, the Ui will change as follows: Here the user can specify: - Key Store : the KeystoreService instance that will store and maintain the trusted certificate - Storage Alias : the alias that will be used to identify the trusted certificate - Certificate : the trusted certificate The following cryptographic algorithms are supported for Trusted Certificates : - RSA - DSA - EC REST APIs keystores/v1 The org.eclipse.kura.core.keystore bundle exposes a REST endpoint under the /services/keystores/v1 path. The Kura REST APIs for Keys and Certificates support the following calls and are allowed to any user with rest.keystores permission. Method Path Roles allowed Encoding Request parameters Description GET / keystores JSON None Returns the list of all the KeystoreService instances. GET /entries keystores JSON None Returns the list of all the entries managed by the KeystoreService instances. GET /entries?keystoreServicePid={keystoreServicePid} keystores JSON keystoreServicePid Returns the list of all the entries managed by the specified KeystoreService instance. GET /entries?alias={alias} keystores JSON alias Returns the list of all the entries specified by the defined alias and managed in all the available KeystoreService instances in the framework. GET /entries/entry?keystoreServicePid={keystoreServicePid}&alias={alias} keystores JSON keystoreServicePid and alias Returns the entry identified by the specified keystoreServicePid and alias. POST /entries/csr keystores JSON The reference to the key pair in a specified KeystoreService instance that will be used to generate the CSR. The request has to be associated with additional parameters that identify the algorithm used to compute and sign the CSR and the DN or the corresponding public key that needs to be countersigned. Generates a CSR for the specified key pair in the specified KeystoreService instance, based on the parameters provided in the request. POST /entries/certificate keystores JSON The reference to the KeystoreService instance and the alias that will be used for storage. A type filed identifies the type of key that needs to be managed. This request allows the user to upload a TrustedCertificate. POST /entries/keypair keystores JSON To generate a new KeyPair directly in the device, the request format need to follow the references in the following paragraphs. This request allows the user to generate a new KeyPair into the device. DELETE /entries keystores JSON A JSON identifying the resource to delete. The format of the request is described in in one of the following sections. Deletes the entry in the specified KeystoreService instance. List All the KeystoreServices Request : URL - https://<gateway-ip>/services/keystores/v1 Response : [ { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"type\" : \"jks\" , \"size\" : 4 }, { \"keystoreServicePid\" : \"org.eclipse.kura.crypto.CryptoService\" , \"type\" : \"jks\" , \"size\" : 3 }, { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"type\" : \"jks\" , \"size\" : 1 }, { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.DMKeystore\" , \"type\" : \"jks\" , \"size\" : 1 } ] Get all the Managed Entries Request : URL - https://<gateway-ip>/services/keystores/v1/entries Response : [ { \"subjectDN\" : \"OU=Go Daddy Class 2 Certification Authority, O=\\\"The Go Daddy Group, Inc.\\\", C=US\" , \"issuer\" : \"OU=Go Daddy Class 2 Certification Authority,O=The Go Daddy Group\\\\, Inc.,C=US\" , \"startDate\" : \"Tue, 29 Jun 2004 17:06:20 GMT\" , \"expirationDate\" : \"Thu, 29 Jun 2034 17:06:20 GMT\" , \"algorithm\" : \"SHA1withRSA\" , \"size\" : 2048 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"alias\" : \"ca-godaddyclass2ca\" , \"type\" : \"TRUSTED_CERTIFICATE\" }, { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ] Get All the Entries by KeystoreService Request : URL - https://<gateway-ip>/services/keystores/v1/entries?keystoreServicePid=org.eclipse.kura.core.keystore.HttpsKeystore Response : [ { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\n<CERTIFICATE>\\n-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ] Get All the Entries by Alias Request : URL - https://<gateway-ip>/services/keystores/v1/entries?alias=localhost Response : [ { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\n<CERTIFICATE>\\n-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ] Get Specific Entry Request : URL - https://<gateway-ip>/services/keystores/v1/entries/entry?keystoreServicePid=org.eclipse.kura.core.keystore.HttpsKeystore&alias=localhost Response : { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\n<CERTIFICATE>-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } Get the CSR for a KeyPair Request : URL - https://<gateway-ip>/services/keystores/v1/entries/csr keystoreServicePid=org.eclipse.kura.core.keystore.HttpsKeystore&alias=localhost` Request body : { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"signatureAlgorithm\" : \"SHA256withRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" } Store Trusted Certificate Request : URL - https://<gateway-ip>/services/keystores/v1/entries/certificate Request body : { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"myCertTest99\" , \"certificate\" : \"-----BEGIN CERTIFICATE----- <CERTIFICATE> -----END CERTIFICATE-----\" } Generate KeyPair Request : URL - https://<gateway-ip>/services/keystores/v1/entries/keypair Request body : { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"algorithm\" : \"RSA\" , \"size\" : 1024 , \"signatureAlgorithm\" : \"SHA256WithRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" } Delete Entry Request : URL - https://<gateway-ip>/services/keystores/v1/entries Request body : { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"mycerttestec\" } KEYS-V1 Request Handler Mapping the previously defined REST APIs, the framework exposed to the remote cloud platforms a request handler named KEYS-V1 that allows the remote user to list and manage the keystores, the keys and the certificates in the framework. The request handler exposes also the capability to generate on the edge a CSR that can be countersigned remotely by a trusted CA. keystores/v2 Starting from Kura 5.4.0, the keystores/v2 REST API is also available, it supports all of the request endpoints of keystores/v1 plus an additional endpoint that allows to upload and modify private key entries: Method Path Roles allowed Encoding Request parameters Description POST /entries/privatekey keystores JSON To upload a new private key entry directly in the device, the request format need to follow the references in the following paragraphs. This request allows the user to upload a new private key entry into the device or to modify the certificate chain of an existing one. Uploading a Private Key Entry Request : URL - https://<gateway-ip>/services/keystores/v2/entries/privatekey Request body : The request should include the private key in unencrypted PEM format and the certificate chain in PEM format, the first certificate in the certificateChain list must use the public key associated with the private key supplied as the privateKey parameter. The device will overwrite the entry with the provided alias if it already exists. WARINING: Please use this endpoint through a secure connection. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"privateKey\" : \"-----BEGIN RSA PRIVATE KEY-----\\n...\\n-----END RSA PRIVATE KEY-----\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] } Updating a Private Key Entry Request : URL - https://<gateway-ip>/services/keystores/v2/entries/privatekey Request body : In order to update the certificate chain associated to a specific private key entry it is possible to use the same format as previous request and omit the privateKey parameter. In this case the certificate chain of the existing entry will be replaced with the one specified in the request and the existing private key will be retained. This request can be useful for example to create a CSR on the device, sign it externally and then updating the corresponding entry with the resulting certificate. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] }","title":"Keys and Certificates"},{"location":"gateway-configuration/keys-and-certificates/#keys-and-certificates","text":"The framework manages directly different key pairs and trusted certificates from different keystores. To simplify the management of such complex objects, the framework provides a dedicated section of its Administrative Web UI, a set of REST APIs for local management and a request handler (KEYS-V1 and KEYS-V2) for cloud remote interaction.","title":"Keys and Certificates"},{"location":"gateway-configuration/keys-and-certificates/#web-ui","text":"The Certificates List tab in the Security section of the Kura Web UI provides a simple way for the user to get the list of all the managed keys and certificates of the framework: The page allows the user to add a new Keypair or trusted certificate or to delete an existing element. Every key pair or trusted certificate is listed by its alias, identified by the corresponding type and further identified by the keystore that is managing that element. If the user needs to add a new entry to one of the managed KeystoreService instances, can click on the Add button on the top left part of the page. The user will be guided through a process that will allow to identify the type of entry to add: It can be either a: Private/Public Key Pair Trusted Certificate If the user decides to add a key pair, then the wizard will provide a page like the following: Here the user can specify: - Key Store : the KeystoreService instance that will store and maintain the key pair - Storage Alias : the alias that will be used to identify the key pair - Private Key : the private key part of the key pair - Certificate : the public key part of the key pair After clicking on the Apply button, the new entry will be stored in the selected Keystore and listed along the other entries managed by the framework. The following cryptographic algorithms are supported for Key Pairs : - RSA - DSA Instead, if the user wants to load a Trusted Certificate, the Ui will change as follows: Here the user can specify: - Key Store : the KeystoreService instance that will store and maintain the trusted certificate - Storage Alias : the alias that will be used to identify the trusted certificate - Certificate : the trusted certificate The following cryptographic algorithms are supported for Trusted Certificates : - RSA - DSA - EC","title":"Web UI"},{"location":"gateway-configuration/keys-and-certificates/#rest-apis","text":"","title":"REST APIs"},{"location":"gateway-configuration/keys-and-certificates/#keystoresv1","text":"The org.eclipse.kura.core.keystore bundle exposes a REST endpoint under the /services/keystores/v1 path. The Kura REST APIs for Keys and Certificates support the following calls and are allowed to any user with rest.keystores permission. Method Path Roles allowed Encoding Request parameters Description GET / keystores JSON None Returns the list of all the KeystoreService instances. GET /entries keystores JSON None Returns the list of all the entries managed by the KeystoreService instances. GET /entries?keystoreServicePid={keystoreServicePid} keystores JSON keystoreServicePid Returns the list of all the entries managed by the specified KeystoreService instance. GET /entries?alias={alias} keystores JSON alias Returns the list of all the entries specified by the defined alias and managed in all the available KeystoreService instances in the framework. GET /entries/entry?keystoreServicePid={keystoreServicePid}&alias={alias} keystores JSON keystoreServicePid and alias Returns the entry identified by the specified keystoreServicePid and alias. POST /entries/csr keystores JSON The reference to the key pair in a specified KeystoreService instance that will be used to generate the CSR. The request has to be associated with additional parameters that identify the algorithm used to compute and sign the CSR and the DN or the corresponding public key that needs to be countersigned. Generates a CSR for the specified key pair in the specified KeystoreService instance, based on the parameters provided in the request. POST /entries/certificate keystores JSON The reference to the KeystoreService instance and the alias that will be used for storage. A type filed identifies the type of key that needs to be managed. This request allows the user to upload a TrustedCertificate. POST /entries/keypair keystores JSON To generate a new KeyPair directly in the device, the request format need to follow the references in the following paragraphs. This request allows the user to generate a new KeyPair into the device. DELETE /entries keystores JSON A JSON identifying the resource to delete. The format of the request is described in in one of the following sections. Deletes the entry in the specified KeystoreService instance.","title":"keystores/v1"},{"location":"gateway-configuration/keys-and-certificates/#list-all-the-keystoreservices","text":"Request : URL - https://<gateway-ip>/services/keystores/v1 Response : [ { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"type\" : \"jks\" , \"size\" : 4 }, { \"keystoreServicePid\" : \"org.eclipse.kura.crypto.CryptoService\" , \"type\" : \"jks\" , \"size\" : 3 }, { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"type\" : \"jks\" , \"size\" : 1 }, { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.DMKeystore\" , \"type\" : \"jks\" , \"size\" : 1 } ]","title":"List All the KeystoreServices"},{"location":"gateway-configuration/keys-and-certificates/#get-all-the-managed-entries","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries Response : [ { \"subjectDN\" : \"OU=Go Daddy Class 2 Certification Authority, O=\\\"The Go Daddy Group, Inc.\\\", C=US\" , \"issuer\" : \"OU=Go Daddy Class 2 Certification Authority,O=The Go Daddy Group\\\\, Inc.,C=US\" , \"startDate\" : \"Tue, 29 Jun 2004 17:06:20 GMT\" , \"expirationDate\" : \"Thu, 29 Jun 2034 17:06:20 GMT\" , \"algorithm\" : \"SHA1withRSA\" , \"size\" : 2048 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"alias\" : \"ca-godaddyclass2ca\" , \"type\" : \"TRUSTED_CERTIFICATE\" }, { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ]","title":"Get all the Managed Entries"},{"location":"gateway-configuration/keys-and-certificates/#get-all-the-entries-by-keystoreservice","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries?keystoreServicePid=org.eclipse.kura.core.keystore.HttpsKeystore Response : [ { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\n<CERTIFICATE>\\n-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ]","title":"Get All the Entries by KeystoreService"},{"location":"gateway-configuration/keys-and-certificates/#get-all-the-entries-by-alias","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries?alias=localhost Response : [ { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\n<CERTIFICATE>\\n-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ]","title":"Get All the Entries by Alias"},{"location":"gateway-configuration/keys-and-certificates/#get-specific-entry","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries/entry?keystoreServicePid=org.eclipse.kura.core.keystore.HttpsKeystore&alias=localhost Response : { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\n<CERTIFICATE>-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" }","title":"Get Specific Entry"},{"location":"gateway-configuration/keys-and-certificates/#get-the-csr-for-a-keypair","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries/csr keystoreServicePid=org.eclipse.kura.core.keystore.HttpsKeystore&alias=localhost` Request body : { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"signatureAlgorithm\" : \"SHA256withRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" }","title":"Get the CSR for a KeyPair"},{"location":"gateway-configuration/keys-and-certificates/#store-trusted-certificate","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries/certificate Request body : { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"myCertTest99\" , \"certificate\" : \"-----BEGIN CERTIFICATE----- <CERTIFICATE> -----END CERTIFICATE-----\" }","title":"Store Trusted Certificate"},{"location":"gateway-configuration/keys-and-certificates/#generate-keypair","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries/keypair Request body : { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"algorithm\" : \"RSA\" , \"size\" : 1024 , \"signatureAlgorithm\" : \"SHA256WithRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" }","title":"Generate KeyPair"},{"location":"gateway-configuration/keys-and-certificates/#delete-entry","text":"Request : URL - https://<gateway-ip>/services/keystores/v1/entries Request body : { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"mycerttestec\" }","title":"Delete Entry"},{"location":"gateway-configuration/keys-and-certificates/#keys-v1-request-handler","text":"Mapping the previously defined REST APIs, the framework exposed to the remote cloud platforms a request handler named KEYS-V1 that allows the remote user to list and manage the keystores, the keys and the certificates in the framework. The request handler exposes also the capability to generate on the edge a CSR that can be countersigned remotely by a trusted CA.","title":"KEYS-V1 Request Handler"},{"location":"gateway-configuration/keys-and-certificates/#keystoresv2","text":"Starting from Kura 5.4.0, the keystores/v2 REST API is also available, it supports all of the request endpoints of keystores/v1 plus an additional endpoint that allows to upload and modify private key entries: Method Path Roles allowed Encoding Request parameters Description POST /entries/privatekey keystores JSON To upload a new private key entry directly in the device, the request format need to follow the references in the following paragraphs. This request allows the user to upload a new private key entry into the device or to modify the certificate chain of an existing one.","title":"keystores/v2"},{"location":"gateway-configuration/keys-and-certificates/#uploading-a-private-key-entry","text":"Request : URL - https://<gateway-ip>/services/keystores/v2/entries/privatekey Request body : The request should include the private key in unencrypted PEM format and the certificate chain in PEM format, the first certificate in the certificateChain list must use the public key associated with the private key supplied as the privateKey parameter. The device will overwrite the entry with the provided alias if it already exists. WARINING: Please use this endpoint through a secure connection. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"privateKey\" : \"-----BEGIN RSA PRIVATE KEY-----\\n...\\n-----END RSA PRIVATE KEY-----\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] }","title":"Uploading a Private Key Entry"},{"location":"gateway-configuration/keys-and-certificates/#updating-a-private-key-entry","text":"Request : URL - https://<gateway-ip>/services/keystores/v2/entries/privatekey Request body : In order to update the certificate chain associated to a specific private key entry it is possible to use the same format as previous request and omit the privateKey parameter. In this case the certificate chain of the existing entry will be replaced with the one specified in the request and the existing private key will be retained. This request can be useful for example to create a CSR on the device, sign it externally and then updating the corresponding entry with the resulting certificate. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] }","title":"Updating a Private Key Entry"},{"location":"gateway-configuration/keystores-management/","text":"Keystores Management The framework manages different types of cryptographic keys and certificates. In order to simplify the interaction with those objects, Kura provides a KeystoreService API and a specific section in the Kura Web UI that lists all the available KeystoreService instances. From the Security section, a user with Security permissions can access the Keystore Configuration section. A list of all the framework managed keystores will be available to the user with the Service PID that will be used by other components to reference the selected keystore. Associated to the Service PID, the UI shows the Factory PID that identifies the specific KeystoreService API implementation that is providing the service to the framework. In order to modify the configuration of a specific keystore service instance, the user can select one of the available rows, obtaining the corresponding keystore service configuration. The following KeystoreService factories are available: FilesystemKeystoreServiceImpl The org.eclipse.kura.core.keystore.FilesystemKeystoreServiceImpl factory provides a KeystoreService implementation that stores the private keys and certificates as a file. The user can customise the following options: Keystore Path : identifies the path in the filesystem. If the keystore file does not exists, a new file will be created. The value cannot be empty. Keystore Password : the corresponding keystore password. Randomize Password : a boolean flag that allows the user to specify if the keystore password needs to be randomised at the next framework boot. If set true , the framework will try to access the identified keystore and randomise the password. The new password will be persisted in the framework snapshot. Once successfully randomised, the flag will be automatically set to false by the framework. PKCS11KeystoreServiceImpl The org.eclipse.kura.core.keystore.PKCS11KeystoreServiceImpl factory provides a KeystoreService implementation that allows to access a PKCS11 token through the SunPKCS11 implementation. At the moment this type of KeystoreService provides read only access to the underlying token, operations such as adding or removing entries will fail. It is possible to use the entries provided by a PKCS11KeystoreServiceImpl for SSL authentication. The available configuration options closely match the parameters provided by the SunPKCS11 implementation, see the official documentation for more details. In particular, the official documentation contains a section that explains how the PKCS11 objects are mapped to Java KeyStore entries. The only required parameter is the PKCS11 Implementation Library Path parameter. It is usually also necessary to specify the token user pin as the Pin parameter. The configuration parameters are mapped to the SunPKCS11 provider parameters in the following way: Kura Parameter SunPKCS11 Parameter Notes Slot slot Slot List Index slotListIndex Enabled Mechanisms enabledMechanisms The curly braces must be omitted Disabled Mechanisms disabledMechanisms The curly braces must be omitted. Attributes attributes The value of this field will be appended to the provider configuration.","title":"Keystores Management"},{"location":"gateway-configuration/keystores-management/#keystores-management","text":"The framework manages different types of cryptographic keys and certificates. In order to simplify the interaction with those objects, Kura provides a KeystoreService API and a specific section in the Kura Web UI that lists all the available KeystoreService instances. From the Security section, a user with Security permissions can access the Keystore Configuration section. A list of all the framework managed keystores will be available to the user with the Service PID that will be used by other components to reference the selected keystore. Associated to the Service PID, the UI shows the Factory PID that identifies the specific KeystoreService API implementation that is providing the service to the framework. In order to modify the configuration of a specific keystore service instance, the user can select one of the available rows, obtaining the corresponding keystore service configuration. The following KeystoreService factories are available:","title":"Keystores Management"},{"location":"gateway-configuration/keystores-management/#filesystemkeystoreserviceimpl","text":"The org.eclipse.kura.core.keystore.FilesystemKeystoreServiceImpl factory provides a KeystoreService implementation that stores the private keys and certificates as a file. The user can customise the following options: Keystore Path : identifies the path in the filesystem. If the keystore file does not exists, a new file will be created. The value cannot be empty. Keystore Password : the corresponding keystore password. Randomize Password : a boolean flag that allows the user to specify if the keystore password needs to be randomised at the next framework boot. If set true , the framework will try to access the identified keystore and randomise the password. The new password will be persisted in the framework snapshot. Once successfully randomised, the flag will be automatically set to false by the framework.","title":"FilesystemKeystoreServiceImpl"},{"location":"gateway-configuration/keystores-management/#pkcs11keystoreserviceimpl","text":"The org.eclipse.kura.core.keystore.PKCS11KeystoreServiceImpl factory provides a KeystoreService implementation that allows to access a PKCS11 token through the SunPKCS11 implementation. At the moment this type of KeystoreService provides read only access to the underlying token, operations such as adding or removing entries will fail. It is possible to use the entries provided by a PKCS11KeystoreServiceImpl for SSL authentication. The available configuration options closely match the parameters provided by the SunPKCS11 implementation, see the official documentation for more details. In particular, the official documentation contains a section that explains how the PKCS11 objects are mapped to Java KeyStore entries. The only required parameter is the PKCS11 Implementation Library Path parameter. It is usually also necessary to specify the token user pin as the Pin parameter. The configuration parameters are mapped to the SunPKCS11 provider parameters in the following way: Kura Parameter SunPKCS11 Parameter Notes Slot slot Slot List Index slotListIndex Enabled Mechanisms enabledMechanisms The curly braces must be omitted Disabled Mechanisms disabledMechanisms The curly braces must be omitted. Attributes attributes The value of this field will be appended to the provider configuration.","title":"PKCS11KeystoreServiceImpl"},{"location":"gateway-configuration/network-advanced/","text":"Advanced Network Settings For devices running Kura installed using a Generic Profile, it is possible to to fine tune network traffic settings. Take a look at our installer profiles to know which are supported. The Advanced configuration tab is designed for users who seek a higher level of control and customization over their network experience. Whether you are an IT professional, network administrator, or enthusiast looking to fine-tune specific aspects of your network, this tab provides access to advanced parameters like Maximum Transmission Unit (MTU) and Promiscuous Mode. Adjusting these settings allows for optimized performance in unique network environments, troubleshooting capabilities, and enhanced security monitoring. Please exercise caution when modifying these settings, ensuring that you have a clear understanding of their implications on your network's behavior. Tip Some parameters requires a minimum version of NetworkManager, as described below and in Kura UI. The System Component Inventory can be used to check what version is available on your device. The Advanced tab allow configuration of: MTU (Maximum Transmission Unit) MTU determines the maximum size of data packets transmitted over your network. While most users can leave this at the default setting, adjusting the MTU may be necessary for optimizing performance in specialized environments or overcoming network constraints. Use Case: Modify MTU if you encounter issues related to packet size, especially in scenarios involving VPNs, specific network equipment, or other unique requirements. Promiscuous Mode Promiscuous mode is a specialized network mode where your device captures and analyzes all network packets, regardless of their destination. This is particularly useful for network monitoring, troubleshooting, and security analysis. Use Case: Enable promiscuous mode when you need to closely inspect network traffic, diagnose connectivity issues, or enhance your device's capabilities for security monitoring. Advanced Configuration The Advanced tab contains the following configuration parameters: IPv4 MTU - defines the Maximum Trasmission unit for IPv4 traffic on the selected interface, a value of 0 or empty delegates the MTU definition to the link layer. IPv6 MTU - defines the Maximum Trasmission unit for IPv6 traffic on the selected interface, a value of 0 or empty delegates the MTU definition to the link layer. Requires NetworkManager 1.40 or above. Warning The MTU value for a VLAN is limited by the configured MTU of its parent interface as an upper bound. Promiscuous Mode - enable promiscuous mode for the selected interface; Requires NetworkManager 1.32 or above. System default - This delegates to the underlying OS setting. In most cases the system default equates to Disabled Enabled Disabled","title":"Advanced Settings"},{"location":"gateway-configuration/network-advanced/#advanced-network-settings","text":"For devices running Kura installed using a Generic Profile, it is possible to to fine tune network traffic settings. Take a look at our installer profiles to know which are supported. The Advanced configuration tab is designed for users who seek a higher level of control and customization over their network experience. Whether you are an IT professional, network administrator, or enthusiast looking to fine-tune specific aspects of your network, this tab provides access to advanced parameters like Maximum Transmission Unit (MTU) and Promiscuous Mode. Adjusting these settings allows for optimized performance in unique network environments, troubleshooting capabilities, and enhanced security monitoring. Please exercise caution when modifying these settings, ensuring that you have a clear understanding of their implications on your network's behavior. Tip Some parameters requires a minimum version of NetworkManager, as described below and in Kura UI. The System Component Inventory can be used to check what version is available on your device. The Advanced tab allow configuration of: MTU (Maximum Transmission Unit) MTU determines the maximum size of data packets transmitted over your network. While most users can leave this at the default setting, adjusting the MTU may be necessary for optimizing performance in specialized environments or overcoming network constraints. Use Case: Modify MTU if you encounter issues related to packet size, especially in scenarios involving VPNs, specific network equipment, or other unique requirements. Promiscuous Mode Promiscuous mode is a specialized network mode where your device captures and analyzes all network packets, regardless of their destination. This is particularly useful for network monitoring, troubleshooting, and security analysis. Use Case: Enable promiscuous mode when you need to closely inspect network traffic, diagnose connectivity issues, or enhance your device's capabilities for security monitoring.","title":"Advanced Network Settings"},{"location":"gateway-configuration/network-advanced/#advanced-configuration","text":"The Advanced tab contains the following configuration parameters: IPv4 MTU - defines the Maximum Trasmission unit for IPv4 traffic on the selected interface, a value of 0 or empty delegates the MTU definition to the link layer. IPv6 MTU - defines the Maximum Trasmission unit for IPv6 traffic on the selected interface, a value of 0 or empty delegates the MTU definition to the link layer. Requires NetworkManager 1.40 or above. Warning The MTU value for a VLAN is limited by the configured MTU of its parent interface as an upper bound. Promiscuous Mode - enable promiscuous mode for the selected interface; Requires NetworkManager 1.32 or above. System default - This delegates to the underlying OS setting. In most cases the system default equates to Disabled Enabled Disabled","title":"Advanced Configuration"},{"location":"gateway-configuration/network-configuration/","text":"Network Configuration To configure the gateway network interfaces using the Gateway Administration Console, select the Network option located in the System area. With this option selected, the Network display appears with a list of available interfaces. Configuration tabs for the selected interface appear on the right side of the screen. By default, the loopback (lo) interface is selected when the network interfaces are displayed. Choose the desired network interface (e.g., eth0, eth1, wlan0, ppp0) and apply the necessary configuration changes using the tabs on the right. Submit the modified configuration by clicking the Apply button. In case of typing errors, the Reset button can be used to reload the prior configuration on the screen. Since the network configuration shown on the screen may not be synchronized with the current state of the system, it can be updated pressing the Refresh button. This can be used also to force the reload of specific parameters like the RSSI or dynamic IP addresses. The refresh procedure reads all the needed parameters from the system and can take several seconds before updating. Tip It is recommended that the TCP/IP tab is configured first since it defines how the interface is going to be used. TCP/IP Configuration The TCP/IP tab contains the following configuration parameters: Status Disabled: disables the selected interface (i.e., administratively down). Enabled for LAN: designates the interface for a local network. It can be set as a DHCP server for hosts on the local network and can serve as a default gateway for those hosts; however, it cannot be set as an actual gateway interface for this device. That is, packets must be routed from this interface to another interface that is configured as WAN. The interface is automatically brought up at boot. Enabled for WAN: designates the interface as a gateway to an external network. The interface is automatically brought up at boot. Not Managed: the interface will be ignored by Kura. Layer 2 Only: only the Layer 2 portion of the interface will be configured. The interface is automatically brought up at boot. Configure Manually: allows manual entry of the IP Address and Netmask fields, if the interface is configured as LAN; allows manual entry of the IP Address , Netmask , Gateway , and DNS Servers fields, if the interface is designated as WAN. Using DHCP: configures the interface as a DHCP client obtaining the IP address from a network DHCP server. IP Address - defines the IP address of the interface, if manually configured. Subnet Mask - defines the subnet mask of the interface, if manually configured. Gateway - specifies the default gateway for the unit. (Required field if the interface is designated as WAN and manually configured.) DNS Servers - provides a list of DNS servers, if the interface is designated as WAN and is manually configured. Search Domains - Not implemented. If the network interface is Enabled for LAN and manually configured (i.e., not a DHCP client), the DHCP & NAT tab allows the DHCP server to be configured and/or NAT (IP forwarding with masquerading) to be enabled. More details about the Not Managed interface Status When a network interface is configured as Not Managed , Kura will ignore it and the configuration will not be touched. The user can configure the interface with the network tools provided by the OS, allowing unusual network setups. Regarding DNS, both Kura and the external tools store the DNS addresses in the /etc/resolv.conf file. So, if multiple interfaces are configured to get the DNS information and store it in the same file, the device can be misconfigured. To avoid that, the following table presents who is responsible to update the DNS file depending on the network interfaces configurations. Is there at least an interface set as WAN ? Is there at least one interface set as Not Managed ? Does Kura manage resolv.conf? NO NO YES NO YES NO YES NO YES YES YES YES So, the only way to configure the DNS addresses with external tools, is to configure at least one interface as Not Managed and not to set any interface as Enabled For Wan using Kura. If at least one WAN interface is configured by Kura, it will take the control of the /etc/resolv.conf/ file. Finally, if any interface is configured in Enabled For Wan or Not Managed mode, Kura will empty the file. To avoid device misconfigurations when Not Managed interfaces are used, don't use the dns-nameservers directive in the /etc/network/interfaces file. Please add the DNS addresses directly to the /etc/resolv.conf file. DHCP & NAT Configuration The DHCP & NAT tab contains the following configuration parameters: Router Mode DHCP and NAT: indicates that both DHCP server and NAT are enabled. DHCP Only: indicates that DHCP server is enabled and NAT is disabled. NAT Only: indicates that NAT is enabled and DHCP server is disabled. Off: indicates that both DHCP server and NAT are disabled. DHCP Beginning Address : specifies the first address of DHCP pool (i.e., first available client IP address). DHCP Ending Address : specifies the last address of DHCP pool (i.e., last IP address that can be assigned to a client). DHCP Subnet Mask : defines the subnet mask that is assigned to a client. DHCP Default Lease Time : sets the default time (in minutes) that the client retains the provided IP address. It must be greater than 0. DHCP Max Lease Time : sets the maximum time (in minutes) that the client retains the provided IP address. It must be greater than 0. Pass DNS Servers through DHCP : enables DNS Proxy (i.e., passing DNS servers through DHCP). If NAT is enabled and there is another interface designated as WAN (e.g., ppp0), the following iptables rules are added to the custom automatic NAT service rules _* section of the /etc/init.d/firewall script: # custom automatic NAT service rules (if NAT option is enabled for LAN interface) iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE iptables -A FORWARD -i ppp0 -o eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT iptables -A FORWARD -i eth0 -o ppp0 -j ACCEPT Also, IP forwarding is enabled in the kernel as follows: # allow fowarding if any masquerade is defined echo 1 > /proc/sys/net/ipv4/ip_forward The rules shown above create an Overloaded _ (i.e., many-to-one) NAT. This type of network address translation maps multiple IP addresses on the LAN side to a single IP address on the WAN side, allowing internet access from hosts on a local network via a gateway (WAN) interface. Note that for NAT rules to be added, it is insufficient to enable NATing through the DHCP & NAT * tab of the LAN interface; there must also be another interface designated as WAN. Network Linux Configuration When applying a new network configuration, Kura changes the configuration files of the Linux networking subsystem. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. Network Configuration properties The Network configuration can be modified using the Kura Gateway Administration Console, as described above, the Configuration Service or appling a proper snapshot . The following table describes all the properties related to the Network Configuration. The network configuration pid is org.eclipse.kura.net.admin.NetworkConfigurationService . Common properties Name Type Description net.interfaces String Comma-separated list of the interface names in the device net.interface.<interface>.type String The type of the network interface; possible values are: ETHERNET, WIFI, MODEM, VLAN and LOOPBACK net.interface.<interface>.config.wifi.mode String For wifi interfaces, specify the modality; possible values are INFRA and MASTER net.interface.<interface>.config.nat.enabled Boolean Enable the NAT feature net.interface.<interface>.config.promisc Integer Enable the Promiscuous Mode; possible values are: -1 (System default), 0 (Disabled), 1 (Enabled) IPv4 properties Name Type Description net.interface.<interface>.config.ip4.status String The status of the interface for the IPv4 configuration; possibile values are: netIPv4StatusDisabled, netIPv4StatusUnmanaged, netIPv4StatusL2Only, netIPv4StatusEnabledLAN, netIPv4StatusEnabledWAN, netIPv4StatusUnknown net.interface.<interface>.config.ip4.wan.priority Integer (NetworkManager only) Priority used to determine which interface select as primary WAN. Allowed values range from -1 to 2147483647, inclusive. See Network Failover for further details net.interface.<interface>.config.ip4.address String The IPv4 address assigned to the network interface net.interface.<interface>.config.ip4.prefix Short The IPv4 netmask assigned to the network interface net.interface.<interface>.config.ip4.gateway String The IPv4 address of the default gateway net.interface.<interface>.config.ip4.dnsServers String Comma-separated list of dns servers net.interface.<interface>.config.ip4.mtu Integer The Maximum Transition Unit (MTU) for this interface IPv4 DHCP Server properties Name Type Description net.interface.<interface>.config.dhcpServer4.enabled Boolean Specify if the DHCP server is enabled net.interface.<interface>.config.dhcpServer4.rangeStart String First IP address available for clients net.interface.<interface>.config.dhcpServer4.rangeEnd String Last IP address available for clients net.interface.<interface>.config.dhcpServer4.defaultLeaseTime Integer The default lease time net.interface.<interface>.config.dhcpServer4.maxLeaseTime Integer The maximum lease time net.interface.<interface>.config.dhcpServer4.prefix Short The netmask for the available IP addresses net.interface.<interface>.config.dhcpServer4.passDns Boolean Specify if the DNS server addresses has to be passed through DHCP IPv4 DHCP Client properties Name Type Description net.interface.<interface>.config.dhcpClient4.enabled Boolean Specify if the DHCP client is enabled IPv6 properties Name Type Description net.interface.<interface>.config.ip6.status String The status of the interface for the IPv6 configuration; possibile values are: netIPv6StatusDisabled, netIPv6StatusUnmanaged, netIPv6StatusL2Only, netIPv6StatusEnabledLAN, netIPv6StatusEnabledWAN, netIPv6StatusUnknown net.interface.<interface>.config.ip6.wan.priority Integer (NetworkManager only) Priority used to determine which interface select as primary WAN. Allowed values range from -1 to 2147483647, inclusive. See Network Failover for further details net.interface.<interface>.config.ip6.address.method String The IPv6 configuration method; possible values are: AUTO, DHCP, MANUAL. net.interface.<interface>.config.ip6.address String The IPv6 address assigned to the network interface net.interface.<interface>.config.ip6.prefix Short The IPv6 netmask assigned to the network interface net.interface.<interface>.config.ip6.gateway String The IPv6 address of the default gateway net.interface.<interface>.config.ip6.dnsServers String Comma-separated list of dns servers net.interface.<interface>.config.ip6.addr.gen.mode String The IPv6 address generation mode; possible values are EUI64, STABLE_PRIVACY; net.interface.<interface>.config.ip6.privacy String The IPv6 Privacy Extensions for SLAAC; possible values are DISABLED, ENABLED_PUBLIC_ADD, ENABLED_TEMP_ADD net.interface.<interface>.config.ip6.mtu Integer The Maximum Transition Unit (MTU) for Ipv6 traffic on this interface. Requires NetworkManager 1.40 or newer WiFi Master (Access Point) properties Name Type Description net.interface.<interface>.config.wifi.master.driver String The driver used for the connection net.interface.<interface>.config.wifi.master.passphrase Password The password for the access point net.interface.<interface>.config.wifi.master.ssid String The SSID of the access point net.interface.<interface>.config.wifi.master.securityType String The security protocol for the wireless network; possible values are SECURITY_NONE, SECURITY_WEP, SECURITY_WPA, SECURITY_WPA2, SECURITY_WPA_WPA2 net.interface.<interface>.config.wifi.master.mode String The mode of the wireless connection; for the access point mode set it to MASTER net.interface.<interface>.config.wifi.master.channel String The channel to be used for the access point net.interface.<interface>.config.wifi.master.radioMode String Specify the 802.11 radio mode; possible values are RADIO_MODE_80211a, RADIO_MODE_80211b, RADIO_MODE_80211g, RADIO_MODE_80211nHT20, RADIO_MODE_80211_AC net.interface.<interface>.config.wifi.master.ignoreSSID Boolean Specify if the SSID broadcast is ignored net.interface.<interface>.config.wifi.master.groupCiphers String Group ciphers i.e. group/broadcast encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP net.interface.<interface>.config.wifi.master.pairwiseCiphers String Pairwise ciphers i.e. pairwise encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP WiFi Infra (Station Mode) properties Name Type Description net.interface.<interface>.config.wifi.infra.ssid String The SSID of the wireless network to connect to net.interface.<interface>.config.wifi.infra.channel String The channel of the wireless network to connect to net.interface.<interface>.config.wifi.infra.bgscan String Set the background scans; possible values have the form <mode>:<shortInterval>:<rssiThreshold>:<longInterval> where mode (String) is one of NONE, SIMPLE, or LEARN, shortInterval (Integer) sets the Bgscan short interval (secs), rssiThreshold (Integer) sets the Bgscan Signal strength threshold (dBm), and longInterval (Integer) sets the Bgscan long interval (secs) net.interface.<interface>.config.wifi.infra.passphrase Password The password for the wireless network net.interface.<interface>.config.wifi.infra.ignoreSSID Boolean Specify if a scan for SSID is required before attempting to associate net.interface.<interface>.config.wifi.infra.mode String The mode of the wireless connection; for station mode set to INFRA net.interface.<interface>.config.wifi.infra.pingAccessPoint Boolean Enable pinging the access point after connection is established net.interface.<interface>.config.wifi.infra.driver String The driver used for the connection net.interface.<interface>.config.wifi.infra.securityType String The security protocol for the wireless network; possible values are SECURITY_NONE, SECURITY_WEP, SECURITY_WPA, SECURITY_WPA2, SECURITY_WPA_WPA2 net.interface.<interface>.config.wifi.infra.groupCiphers String Group ciphers i.e. group/broadcast encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP net.interface.<interface>.config.wifi.infra.pairwiseCiphers String Pairwise ciphers i.e. pairwise encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP Cellular Modem properties Name Type Description net.interface.<interface>.config.enabled Boolean Enable the interface net.interface.<interface>.config.idle Integer The idle option of the PPP daemon net.interface.<interface>.config.username String The username used for the connection net.interface.<interface>.config.password Password The password used for the connection net.interface.<interface>.config.pdpType String The PdP type; possible values are IP, PPP and IPv6 net.interface.<interface>.config.maxFail Integer The maxfail option of the PPP daemon net.interface.<interface>.config.authType String The authentication type; possible values are None, Auto, CHAP and PAP net.interface.<interface>.config.lpcEchoInterval Integer The lcp-echo-interval option of the PPP daemon net.interface.<interface>.config.activeFilter String The active-filter option of the PPP daemon net.interface.<interface>.config.lpcEchoFailure Integer The lcp-echo-failure option of the PPP daemon net.interface.<interface>.config.diversityEnabled Boolean Enable the LTE diversity antenna net.interface.<interface>.config.resetTimeout Integer The modem reset timeout in minutes net.interface.<interface>.config.gpsEnabled Boolean Enable the GPS device in the modem if available net.interface.<interface>.config.persist Boolean The persist option of the PPP daemon net.interface.<interface>.config.apn String The modem Access Point Name net.interface.<interface>.config.dialString String The dial string used for connecting to the APN net.interface.<interface>.config.holdoff Integer The holdoff option of the PPP daemon (in seconds) net.interface.<interface>.config.pppNum Integer Assigned ppp interface number VLAN properties Name Type Description net.interface.<interface>.config.vlan.parent String Physical interface Vlan is bound to net.interface.<interface>.config.vlan.id Integer Vlan tag identifier, between 0 and 4094 net.interface.<interface>.config.vlan.ingress String Incoming traffic priorities in the format from:to, as comma separated pairs of unsigned integers (Optional) net.interface.<interface>.config.vlan.egress String Outgoing traffic priorities in the format from:to, as comma separated pairs of unsigned integer (Optional) net.interface.<interface>.config.vlan.flags String Configuration flags, between 0 and 15, default 1 (Optional) 802.1x properties Name Type Description net.interface.<interface>.config.802-1x.eap String The EAP method to be used when authenticating to the network with 802.1x. Supported methods: \" Kura8021xEapTls \", \" Kura8021xEapPeap \", \" Kura8021xEapTtls \". net.interface.<interface>.config.802-1x.innerAuth String Specifies the \"phase 2\" inner authentication method when an EAP method that uses an inner TLS tunnel is specified in the \"eap\" property. Supported methods: \" Kura8021xInnerAuthNone \", \" Kura8021xInnerAuthMschapv2 \". net.interface.<interface>.config.802-1x.identity String Identity string for EAP authentication methods. Typically the user's user or login name. net.interface.<interface>.config.802-1x.password String Password used for EAP authentication methods. net.interface.<interface>.config.802-1x.client-cert-name String Name referring to the corresponding Kura keystore entry containing the client certificate if used by the EAP method specified in the \"eap\" property. Typically is set to the same name as the net.interface.<interface>.config.802-1x.private-key-name when using EAP-TLS. net.interface.<interface>.config.802-1x.private-key-name String Name referring to the corresponding Kura keystore entry containing the private key when the \"eap\" property is set to \"Kura8021xEapTls\". Typically is set to the same name as the net.interface.<interface>.config.802-1x.client-cert-name . net.interface.<interface>.config.802-1x.ca-cert-name String Name referring to the corresponding Kura keystore entry containing the CA certificate if used by the EAP method specified in the \"eap\" property. This parameter is optional but this allows man-in-the-middle attacks and is NOT recommended . net.interface.<interface>.config.802-1x.anonymous-identity String Anonymous identity string for EAP authentication methods. Used as the unencrypted identity with EAP types that support different tunneled identity like EAP-TTLS (Optional) Network Configuration recipes This section presents some snapshot examples to perform basic operations on networking. The snippets can be modified adapting them to the required configuration (i.e. changing the interface name in the property to be applied). Warning Be aware that an inconsitent or wrong configuration can compromise the network functionality of the gateway. Try the new configuration on a test device before appling it in a production environment! Moreover, if a property is not present in the new snapshot, the old value is used for the configuration. So, the best practice is to set all the needed properties in the snapshot. Disable a network interface <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.type\" type= \"String\" > <esf:value> ETHERNET </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusDisabled </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Configure an ethernet interface for WAN with DHCP client enabled and custom DNS server <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.type\" type= \"String\" > <esf:value> ETHERNET </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.dnsServers\" type= \"String\" > <esf:value> 1.2.3.4 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledWAN </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Configure an ethernet interface for LAN with DHCP server enabled and NAT disabled <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.type\" type= \"String\" > <esf:value> ETHERNET </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.rangeEnd\" type= \"String\" > <esf:value> 192.168.4.110 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.defaultLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.passDns\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.rangeStart\" type= \"String\" > <esf:value> 192.168.4.100 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.maxLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.address\" type= \"String\" > <esf:value> 192.168.4.1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.gateway\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Configure a wireless interface as access point with DHCP server and NAT enabled <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.type\" type= \"String\" > <esf:value> WIFI </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.gateway\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.address\" type= \"String\" > <esf:value> 172.16.1.1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.rangeStart\" type= \"String\" > <esf:value> 172.16.1.100 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.maxLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.defaultLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.rangeEnd\" type= \"String\" > <esf:value> 172.16.1.110 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.passDns\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.nat.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.mode\" type= \"String\" > <esf:value> MASTER </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.driver\" type= \"String\" > <esf:value> nl80211 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"true\" name= \"net.interface.wlp1s0.config.wifi.master.passphrase\" type= \"Password\" > <esf:value> ZW5hYmxlbWVwbGVhc2U= </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.ssid\" type= \"String\" > <esf:value> kura_gateway_19 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.securityType\" type= \"String\" > <esf:value> SECURITY_WPA2 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.mode\" type= \"String\" > <esf:value> MASTER </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.channel\" type= \"String\" > <esf:value> 11 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.radioMode\" type= \"String\" > <esf:value> RADIO_MODE_80211g </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.ignoreSSID\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.pairwiseCiphers\" type= \"String\" > <esf:value> CCMP </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Configure a wireless interface as station mode with DHCP client enabled <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.type\" type= \"String\" > <esf:value> WIFI </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.mode\" type= \"String\" > <esf:value> INFRA </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.ssid\" type= \"String\" > <esf:value> MyWirelessNetwork </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.bgscan\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"true\" name= \"net.interface.wlp1s0.config.wifi.infra.passphrase\" type= \"Password\" > <esf:value> MyPasswordBase64 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.ignoreSSID\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.mode\" type= \"String\" > <esf:value> INFRA </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.pingAccessPoint\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.driver\" type= \"String\" > <esf:value> nl80211 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.securityType\" type= \"String\" > <esf:value> SECURITY_WPA2 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Enable a cellular interface <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.type\" type= \"String\" > <esf:value> MODEM </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledWAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.idle\" type= \"Integer\" > <esf:value> 95 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"true\" name= \"net.interface.1-1.config.password\" type= \"Password\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.pdpType\" type= \"String\" > <esf:value> IP </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.ipAddress\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.maxFail\" type= \"Integer\" > <esf:value> 5 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.authType\" type= \"String\" > <esf:value> NONE </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.lcpEchoInterval\" type= \"Integer\" > <esf:value> 0 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.activeFilter\" type= \"String\" > <esf:value> inbound </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.lcpEchoFailure\" type= \"Integer\" > <esf:value> 0 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.diversityEnabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.resetTimeout\" type= \"Integer\" > <esf:value> 5 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.gpsEnabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.persist\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.dialString\" type= \"String\" > <esf:value> atd*99***2# </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.apn\" type= \"String\" > <esf:value> web.omnitel.it </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Create a VLAN <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interfaces\" type= \"String\" > <esf:value> wlan0,lo,ens33,vlanFull,ens34 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.type\" type= \"String\" > <esf:value> VLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.parent\" type= \"String\" > <esf:value> ens33 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.id\" type= \"Integer\" > <esf:value> 41 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.flags\" type= \"Integer\" > <esf:value> 1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.ingress\" type= \"String\" > <esf:value> 1:2,3:4 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.egress\" type= \"String\" > <esf:value> 5:6 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.address\" type= \"String\" > <esf:value> 192.168.41.100 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Network Configuration"},{"location":"gateway-configuration/network-configuration/#network-configuration","text":"To configure the gateway network interfaces using the Gateway Administration Console, select the Network option located in the System area. With this option selected, the Network display appears with a list of available interfaces. Configuration tabs for the selected interface appear on the right side of the screen. By default, the loopback (lo) interface is selected when the network interfaces are displayed. Choose the desired network interface (e.g., eth0, eth1, wlan0, ppp0) and apply the necessary configuration changes using the tabs on the right. Submit the modified configuration by clicking the Apply button. In case of typing errors, the Reset button can be used to reload the prior configuration on the screen. Since the network configuration shown on the screen may not be synchronized with the current state of the system, it can be updated pressing the Refresh button. This can be used also to force the reload of specific parameters like the RSSI or dynamic IP addresses. The refresh procedure reads all the needed parameters from the system and can take several seconds before updating. Tip It is recommended that the TCP/IP tab is configured first since it defines how the interface is going to be used.","title":"Network Configuration"},{"location":"gateway-configuration/network-configuration/#tcpip-configuration","text":"The TCP/IP tab contains the following configuration parameters: Status Disabled: disables the selected interface (i.e., administratively down). Enabled for LAN: designates the interface for a local network. It can be set as a DHCP server for hosts on the local network and can serve as a default gateway for those hosts; however, it cannot be set as an actual gateway interface for this device. That is, packets must be routed from this interface to another interface that is configured as WAN. The interface is automatically brought up at boot. Enabled for WAN: designates the interface as a gateway to an external network. The interface is automatically brought up at boot. Not Managed: the interface will be ignored by Kura. Layer 2 Only: only the Layer 2 portion of the interface will be configured. The interface is automatically brought up at boot. Configure Manually: allows manual entry of the IP Address and Netmask fields, if the interface is configured as LAN; allows manual entry of the IP Address , Netmask , Gateway , and DNS Servers fields, if the interface is designated as WAN. Using DHCP: configures the interface as a DHCP client obtaining the IP address from a network DHCP server. IP Address - defines the IP address of the interface, if manually configured. Subnet Mask - defines the subnet mask of the interface, if manually configured. Gateway - specifies the default gateway for the unit. (Required field if the interface is designated as WAN and manually configured.) DNS Servers - provides a list of DNS servers, if the interface is designated as WAN and is manually configured. Search Domains - Not implemented. If the network interface is Enabled for LAN and manually configured (i.e., not a DHCP client), the DHCP & NAT tab allows the DHCP server to be configured and/or NAT (IP forwarding with masquerading) to be enabled.","title":"TCP/IP Configuration"},{"location":"gateway-configuration/network-configuration/#more-details-about-the-not-managed-interface-status","text":"When a network interface is configured as Not Managed , Kura will ignore it and the configuration will not be touched. The user can configure the interface with the network tools provided by the OS, allowing unusual network setups. Regarding DNS, both Kura and the external tools store the DNS addresses in the /etc/resolv.conf file. So, if multiple interfaces are configured to get the DNS information and store it in the same file, the device can be misconfigured. To avoid that, the following table presents who is responsible to update the DNS file depending on the network interfaces configurations. Is there at least an interface set as WAN ? Is there at least one interface set as Not Managed ? Does Kura manage resolv.conf? NO NO YES NO YES NO YES NO YES YES YES YES So, the only way to configure the DNS addresses with external tools, is to configure at least one interface as Not Managed and not to set any interface as Enabled For Wan using Kura. If at least one WAN interface is configured by Kura, it will take the control of the /etc/resolv.conf/ file. Finally, if any interface is configured in Enabled For Wan or Not Managed mode, Kura will empty the file. To avoid device misconfigurations when Not Managed interfaces are used, don't use the dns-nameservers directive in the /etc/network/interfaces file. Please add the DNS addresses directly to the /etc/resolv.conf file.","title":"More details about the Not Managed interface Status"},{"location":"gateway-configuration/network-configuration/#dhcp-nat-configuration","text":"The DHCP & NAT tab contains the following configuration parameters: Router Mode DHCP and NAT: indicates that both DHCP server and NAT are enabled. DHCP Only: indicates that DHCP server is enabled and NAT is disabled. NAT Only: indicates that NAT is enabled and DHCP server is disabled. Off: indicates that both DHCP server and NAT are disabled. DHCP Beginning Address : specifies the first address of DHCP pool (i.e., first available client IP address). DHCP Ending Address : specifies the last address of DHCP pool (i.e., last IP address that can be assigned to a client). DHCP Subnet Mask : defines the subnet mask that is assigned to a client. DHCP Default Lease Time : sets the default time (in minutes) that the client retains the provided IP address. It must be greater than 0. DHCP Max Lease Time : sets the maximum time (in minutes) that the client retains the provided IP address. It must be greater than 0. Pass DNS Servers through DHCP : enables DNS Proxy (i.e., passing DNS servers through DHCP). If NAT is enabled and there is another interface designated as WAN (e.g., ppp0), the following iptables rules are added to the custom automatic NAT service rules _* section of the /etc/init.d/firewall script: # custom automatic NAT service rules (if NAT option is enabled for LAN interface) iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE iptables -A FORWARD -i ppp0 -o eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT iptables -A FORWARD -i eth0 -o ppp0 -j ACCEPT Also, IP forwarding is enabled in the kernel as follows: # allow fowarding if any masquerade is defined echo 1 > /proc/sys/net/ipv4/ip_forward The rules shown above create an Overloaded _ (i.e., many-to-one) NAT. This type of network address translation maps multiple IP addresses on the LAN side to a single IP address on the WAN side, allowing internet access from hosts on a local network via a gateway (WAN) interface. Note that for NAT rules to be added, it is insufficient to enable NATing through the DHCP & NAT * tab of the LAN interface; there must also be another interface designated as WAN.","title":"DHCP &amp; NAT Configuration"},{"location":"gateway-configuration/network-configuration/#network-linux-configuration","text":"When applying a new network configuration, Kura changes the configuration files of the Linux networking subsystem. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state.","title":"Network Linux Configuration"},{"location":"gateway-configuration/network-configuration/#network-configuration-properties","text":"The Network configuration can be modified using the Kura Gateway Administration Console, as described above, the Configuration Service or appling a proper snapshot . The following table describes all the properties related to the Network Configuration. The network configuration pid is org.eclipse.kura.net.admin.NetworkConfigurationService .","title":"Network Configuration properties"},{"location":"gateway-configuration/network-configuration/#common-properties","text":"Name Type Description net.interfaces String Comma-separated list of the interface names in the device net.interface.<interface>.type String The type of the network interface; possible values are: ETHERNET, WIFI, MODEM, VLAN and LOOPBACK net.interface.<interface>.config.wifi.mode String For wifi interfaces, specify the modality; possible values are INFRA and MASTER net.interface.<interface>.config.nat.enabled Boolean Enable the NAT feature net.interface.<interface>.config.promisc Integer Enable the Promiscuous Mode; possible values are: -1 (System default), 0 (Disabled), 1 (Enabled)","title":"Common properties"},{"location":"gateway-configuration/network-configuration/#ipv4-properties","text":"Name Type Description net.interface.<interface>.config.ip4.status String The status of the interface for the IPv4 configuration; possibile values are: netIPv4StatusDisabled, netIPv4StatusUnmanaged, netIPv4StatusL2Only, netIPv4StatusEnabledLAN, netIPv4StatusEnabledWAN, netIPv4StatusUnknown net.interface.<interface>.config.ip4.wan.priority Integer (NetworkManager only) Priority used to determine which interface select as primary WAN. Allowed values range from -1 to 2147483647, inclusive. See Network Failover for further details net.interface.<interface>.config.ip4.address String The IPv4 address assigned to the network interface net.interface.<interface>.config.ip4.prefix Short The IPv4 netmask assigned to the network interface net.interface.<interface>.config.ip4.gateway String The IPv4 address of the default gateway net.interface.<interface>.config.ip4.dnsServers String Comma-separated list of dns servers net.interface.<interface>.config.ip4.mtu Integer The Maximum Transition Unit (MTU) for this interface","title":"IPv4 properties"},{"location":"gateway-configuration/network-configuration/#ipv4-dhcp-server-properties","text":"Name Type Description net.interface.<interface>.config.dhcpServer4.enabled Boolean Specify if the DHCP server is enabled net.interface.<interface>.config.dhcpServer4.rangeStart String First IP address available for clients net.interface.<interface>.config.dhcpServer4.rangeEnd String Last IP address available for clients net.interface.<interface>.config.dhcpServer4.defaultLeaseTime Integer The default lease time net.interface.<interface>.config.dhcpServer4.maxLeaseTime Integer The maximum lease time net.interface.<interface>.config.dhcpServer4.prefix Short The netmask for the available IP addresses net.interface.<interface>.config.dhcpServer4.passDns Boolean Specify if the DNS server addresses has to be passed through DHCP","title":"IPv4 DHCP Server properties"},{"location":"gateway-configuration/network-configuration/#ipv4-dhcp-client-properties","text":"Name Type Description net.interface.<interface>.config.dhcpClient4.enabled Boolean Specify if the DHCP client is enabled","title":"IPv4 DHCP Client properties"},{"location":"gateway-configuration/network-configuration/#ipv6-properties","text":"Name Type Description net.interface.<interface>.config.ip6.status String The status of the interface for the IPv6 configuration; possibile values are: netIPv6StatusDisabled, netIPv6StatusUnmanaged, netIPv6StatusL2Only, netIPv6StatusEnabledLAN, netIPv6StatusEnabledWAN, netIPv6StatusUnknown net.interface.<interface>.config.ip6.wan.priority Integer (NetworkManager only) Priority used to determine which interface select as primary WAN. Allowed values range from -1 to 2147483647, inclusive. See Network Failover for further details net.interface.<interface>.config.ip6.address.method String The IPv6 configuration method; possible values are: AUTO, DHCP, MANUAL. net.interface.<interface>.config.ip6.address String The IPv6 address assigned to the network interface net.interface.<interface>.config.ip6.prefix Short The IPv6 netmask assigned to the network interface net.interface.<interface>.config.ip6.gateway String The IPv6 address of the default gateway net.interface.<interface>.config.ip6.dnsServers String Comma-separated list of dns servers net.interface.<interface>.config.ip6.addr.gen.mode String The IPv6 address generation mode; possible values are EUI64, STABLE_PRIVACY; net.interface.<interface>.config.ip6.privacy String The IPv6 Privacy Extensions for SLAAC; possible values are DISABLED, ENABLED_PUBLIC_ADD, ENABLED_TEMP_ADD net.interface.<interface>.config.ip6.mtu Integer The Maximum Transition Unit (MTU) for Ipv6 traffic on this interface. Requires NetworkManager 1.40 or newer","title":"IPv6 properties"},{"location":"gateway-configuration/network-configuration/#wifi-master-access-point-properties","text":"Name Type Description net.interface.<interface>.config.wifi.master.driver String The driver used for the connection net.interface.<interface>.config.wifi.master.passphrase Password The password for the access point net.interface.<interface>.config.wifi.master.ssid String The SSID of the access point net.interface.<interface>.config.wifi.master.securityType String The security protocol for the wireless network; possible values are SECURITY_NONE, SECURITY_WEP, SECURITY_WPA, SECURITY_WPA2, SECURITY_WPA_WPA2 net.interface.<interface>.config.wifi.master.mode String The mode of the wireless connection; for the access point mode set it to MASTER net.interface.<interface>.config.wifi.master.channel String The channel to be used for the access point net.interface.<interface>.config.wifi.master.radioMode String Specify the 802.11 radio mode; possible values are RADIO_MODE_80211a, RADIO_MODE_80211b, RADIO_MODE_80211g, RADIO_MODE_80211nHT20, RADIO_MODE_80211_AC net.interface.<interface>.config.wifi.master.ignoreSSID Boolean Specify if the SSID broadcast is ignored net.interface.<interface>.config.wifi.master.groupCiphers String Group ciphers i.e. group/broadcast encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP net.interface.<interface>.config.wifi.master.pairwiseCiphers String Pairwise ciphers i.e. pairwise encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP","title":"WiFi Master (Access Point) properties"},{"location":"gateway-configuration/network-configuration/#wifi-infra-station-mode-properties","text":"Name Type Description net.interface.<interface>.config.wifi.infra.ssid String The SSID of the wireless network to connect to net.interface.<interface>.config.wifi.infra.channel String The channel of the wireless network to connect to net.interface.<interface>.config.wifi.infra.bgscan String Set the background scans; possible values have the form <mode>:<shortInterval>:<rssiThreshold>:<longInterval> where mode (String) is one of NONE, SIMPLE, or LEARN, shortInterval (Integer) sets the Bgscan short interval (secs), rssiThreshold (Integer) sets the Bgscan Signal strength threshold (dBm), and longInterval (Integer) sets the Bgscan long interval (secs) net.interface.<interface>.config.wifi.infra.passphrase Password The password for the wireless network net.interface.<interface>.config.wifi.infra.ignoreSSID Boolean Specify if a scan for SSID is required before attempting to associate net.interface.<interface>.config.wifi.infra.mode String The mode of the wireless connection; for station mode set to INFRA net.interface.<interface>.config.wifi.infra.pingAccessPoint Boolean Enable pinging the access point after connection is established net.interface.<interface>.config.wifi.infra.driver String The driver used for the connection net.interface.<interface>.config.wifi.infra.securityType String The security protocol for the wireless network; possible values are SECURITY_NONE, SECURITY_WEP, SECURITY_WPA, SECURITY_WPA2, SECURITY_WPA_WPA2 net.interface.<interface>.config.wifi.infra.groupCiphers String Group ciphers i.e. group/broadcast encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP net.interface.<interface>.config.wifi.infra.pairwiseCiphers String Pairwise ciphers i.e. pairwise encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms set, possible values are CCMP , TKIP , and CCMP_TKIP","title":"WiFi Infra (Station Mode) properties"},{"location":"gateway-configuration/network-configuration/#cellular-modem-properties","text":"Name Type Description net.interface.<interface>.config.enabled Boolean Enable the interface net.interface.<interface>.config.idle Integer The idle option of the PPP daemon net.interface.<interface>.config.username String The username used for the connection net.interface.<interface>.config.password Password The password used for the connection net.interface.<interface>.config.pdpType String The PdP type; possible values are IP, PPP and IPv6 net.interface.<interface>.config.maxFail Integer The maxfail option of the PPP daemon net.interface.<interface>.config.authType String The authentication type; possible values are None, Auto, CHAP and PAP net.interface.<interface>.config.lpcEchoInterval Integer The lcp-echo-interval option of the PPP daemon net.interface.<interface>.config.activeFilter String The active-filter option of the PPP daemon net.interface.<interface>.config.lpcEchoFailure Integer The lcp-echo-failure option of the PPP daemon net.interface.<interface>.config.diversityEnabled Boolean Enable the LTE diversity antenna net.interface.<interface>.config.resetTimeout Integer The modem reset timeout in minutes net.interface.<interface>.config.gpsEnabled Boolean Enable the GPS device in the modem if available net.interface.<interface>.config.persist Boolean The persist option of the PPP daemon net.interface.<interface>.config.apn String The modem Access Point Name net.interface.<interface>.config.dialString String The dial string used for connecting to the APN net.interface.<interface>.config.holdoff Integer The holdoff option of the PPP daemon (in seconds) net.interface.<interface>.config.pppNum Integer Assigned ppp interface number","title":"Cellular Modem properties"},{"location":"gateway-configuration/network-configuration/#vlan-properties","text":"Name Type Description net.interface.<interface>.config.vlan.parent String Physical interface Vlan is bound to net.interface.<interface>.config.vlan.id Integer Vlan tag identifier, between 0 and 4094 net.interface.<interface>.config.vlan.ingress String Incoming traffic priorities in the format from:to, as comma separated pairs of unsigned integers (Optional) net.interface.<interface>.config.vlan.egress String Outgoing traffic priorities in the format from:to, as comma separated pairs of unsigned integer (Optional) net.interface.<interface>.config.vlan.flags String Configuration flags, between 0 and 15, default 1 (Optional)","title":"VLAN properties"},{"location":"gateway-configuration/network-configuration/#8021x-properties","text":"Name Type Description net.interface.<interface>.config.802-1x.eap String The EAP method to be used when authenticating to the network with 802.1x. Supported methods: \" Kura8021xEapTls \", \" Kura8021xEapPeap \", \" Kura8021xEapTtls \". net.interface.<interface>.config.802-1x.innerAuth String Specifies the \"phase 2\" inner authentication method when an EAP method that uses an inner TLS tunnel is specified in the \"eap\" property. Supported methods: \" Kura8021xInnerAuthNone \", \" Kura8021xInnerAuthMschapv2 \". net.interface.<interface>.config.802-1x.identity String Identity string for EAP authentication methods. Typically the user's user or login name. net.interface.<interface>.config.802-1x.password String Password used for EAP authentication methods. net.interface.<interface>.config.802-1x.client-cert-name String Name referring to the corresponding Kura keystore entry containing the client certificate if used by the EAP method specified in the \"eap\" property. Typically is set to the same name as the net.interface.<interface>.config.802-1x.private-key-name when using EAP-TLS. net.interface.<interface>.config.802-1x.private-key-name String Name referring to the corresponding Kura keystore entry containing the private key when the \"eap\" property is set to \"Kura8021xEapTls\". Typically is set to the same name as the net.interface.<interface>.config.802-1x.client-cert-name . net.interface.<interface>.config.802-1x.ca-cert-name String Name referring to the corresponding Kura keystore entry containing the CA certificate if used by the EAP method specified in the \"eap\" property. This parameter is optional but this allows man-in-the-middle attacks and is NOT recommended . net.interface.<interface>.config.802-1x.anonymous-identity String Anonymous identity string for EAP authentication methods. Used as the unencrypted identity with EAP types that support different tunneled identity like EAP-TTLS (Optional)","title":"802.1x properties"},{"location":"gateway-configuration/network-configuration/#network-configuration-recipes","text":"This section presents some snapshot examples to perform basic operations on networking. The snippets can be modified adapting them to the required configuration (i.e. changing the interface name in the property to be applied). Warning Be aware that an inconsitent or wrong configuration can compromise the network functionality of the gateway. Try the new configuration on a test device before appling it in a production environment! Moreover, if a property is not present in the new snapshot, the old value is used for the configuration. So, the best practice is to set all the needed properties in the snapshot.","title":"Network Configuration recipes"},{"location":"gateway-configuration/network-configuration/#disable-a-network-interface","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.type\" type= \"String\" > <esf:value> ETHERNET </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusDisabled </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Disable a network interface"},{"location":"gateway-configuration/network-configuration/#configure-an-ethernet-interface-for-wan-with-dhcp-client-enabled-and-custom-dns-server","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.type\" type= \"String\" > <esf:value> ETHERNET </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.dnsServers\" type= \"String\" > <esf:value> 1.2.3.4 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledWAN </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Configure an ethernet interface for WAN with DHCP client enabled and custom DNS server"},{"location":"gateway-configuration/network-configuration/#configure-an-ethernet-interface-for-lan-with-dhcp-server-enabled-and-nat-disabled","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.type\" type= \"String\" > <esf:value> ETHERNET </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.rangeEnd\" type= \"String\" > <esf:value> 192.168.4.110 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.defaultLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.passDns\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.rangeStart\" type= \"String\" > <esf:value> 192.168.4.100 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.dhcpServer4.maxLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.address\" type= \"String\" > <esf:value> 192.168.4.1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.ip4.gateway\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.enp5s0.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Configure an ethernet interface for LAN with DHCP server enabled and NAT disabled"},{"location":"gateway-configuration/network-configuration/#configure-a-wireless-interface-as-access-point-with-dhcp-server-and-nat-enabled","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.type\" type= \"String\" > <esf:value> WIFI </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.gateway\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.address\" type= \"String\" > <esf:value> 172.16.1.1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.rangeStart\" type= \"String\" > <esf:value> 172.16.1.100 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.maxLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.defaultLeaseTime\" type= \"Integer\" > <esf:value> 900 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.rangeEnd\" type= \"String\" > <esf:value> 172.16.1.110 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.passDns\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.nat.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.mode\" type= \"String\" > <esf:value> MASTER </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.driver\" type= \"String\" > <esf:value> nl80211 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"true\" name= \"net.interface.wlp1s0.config.wifi.master.passphrase\" type= \"Password\" > <esf:value> ZW5hYmxlbWVwbGVhc2U= </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.ssid\" type= \"String\" > <esf:value> kura_gateway_19 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.securityType\" type= \"String\" > <esf:value> SECURITY_WPA2 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.mode\" type= \"String\" > <esf:value> MASTER </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.channel\" type= \"String\" > <esf:value> 11 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.radioMode\" type= \"String\" > <esf:value> RADIO_MODE_80211g </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.ignoreSSID\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.master.pairwiseCiphers\" type= \"String\" > <esf:value> CCMP </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Configure a wireless interface as access point with DHCP server and NAT enabled"},{"location":"gateway-configuration/network-configuration/#configure-a-wireless-interface-as-station-mode-with-dhcp-client-enabled","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.type\" type= \"String\" > <esf:value> WIFI </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.mode\" type= \"String\" > <esf:value> INFRA </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.ssid\" type= \"String\" > <esf:value> MyWirelessNetwork </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.bgscan\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"true\" name= \"net.interface.wlp1s0.config.wifi.infra.passphrase\" type= \"Password\" > <esf:value> MyPasswordBase64 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.ignoreSSID\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.mode\" type= \"String\" > <esf:value> INFRA </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.pingAccessPoint\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.driver\" type= \"String\" > <esf:value> nl80211 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.wlp1s0.config.wifi.infra.securityType\" type= \"String\" > <esf:value> SECURITY_WPA2 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Configure a wireless interface as station mode with DHCP client enabled"},{"location":"gateway-configuration/network-configuration/#enable-a-cellular-interface","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.type\" type= \"String\" > <esf:value> MODEM </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledWAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.ip4.dnsServers\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.idle\" type= \"Integer\" > <esf:value> 95 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"true\" name= \"net.interface.1-1.config.password\" type= \"Password\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.pdpType\" type= \"String\" > <esf:value> IP </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.ipAddress\" type= \"String\" > <esf:value/> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.maxFail\" type= \"Integer\" > <esf:value> 5 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.authType\" type= \"String\" > <esf:value> NONE </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.lcpEchoInterval\" type= \"Integer\" > <esf:value> 0 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.activeFilter\" type= \"String\" > <esf:value> inbound </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.lcpEchoFailure\" type= \"Integer\" > <esf:value> 0 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.diversityEnabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.resetTimeout\" type= \"Integer\" > <esf:value> 5 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.gpsEnabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.persist\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.dialString\" type= \"String\" > <esf:value> atd*99***2# </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.1-1.config.apn\" type= \"String\" > <esf:value> web.omnitel.it </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Enable a cellular interface"},{"location":"gateway-configuration/network-configuration/#create-a-vlan","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interfaces\" type= \"String\" > <esf:value> wlan0,lo,ens33,vlanFull,ens34 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.type\" type= \"String\" > <esf:value> VLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.parent\" type= \"String\" > <esf:value> ens33 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.id\" type= \"Integer\" > <esf:value> 41 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.flags\" type= \"Integer\" > <esf:value> 1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.ingress\" type= \"String\" > <esf:value> 1:2,3:4 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.vlan.egress\" type= \"String\" > <esf:value> 5:6 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.address\" type= \"String\" > <esf:value> 192.168.41.100 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Create a VLAN"},{"location":"gateway-configuration/network-failover/","text":"Network Failover For devices configured to use NetworkManager , it is possible to configure multiple WAN interfaces and a basic network failover functionality. As in the picture below, the Kura UI allows for multiple WAN interfaces to be defined. Each WAN interface can be configured with a WAN Priority . WAN Priority is used to determine which interface will be selected for primary WAN. In the case where the primary WAN interface loses connection, then the next highest priority interface is assigned. Kura uses NetworkManager's implementation to achieve network failover (see NetworkManager ). Lower values correspond to higher priority . Allowed values range from -1 to 2147483647. Value -1 means that the metric is chosen automatically based on the device type (see NetworkManager DBUS properties ). To observe changes to the applied configuration, use the following command on your device's shell: route -n Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface 0 .0.0.0 192 .168.2.1 0 .0.0.0 UG 100 0 0 eth0 172 .16.1.0 0 .0.0.0 255 .255.255.0 U 600 0 0 wlan0 172 .17.0.0 0 .0.0.0 255 .255.0.0 U 0 0 0 docker0 192 .168.2.0 0 .0.0.0 255 .255.255.0 U 100 0 0 eth0 The metric flag will correspond to the set WAN Priority . NetworkManager will always prioritize lower metric routes. Operating modes The NetworkManager failover mechanism can work at two different levels: by detecting disruptions at physical level (i.e. an ethernet cable that disconnects); by performing a connectivity check to an upstream URI. NetworkManager brings a network interface down when it detects the loss of its physical link. In such case, the next highest priority interface is selected as the main one. When the connectivity check fails, NetworkManager penalizes the metric of that interface in the routing table. NetworkManager continues to perform connectivity checks over all the other interfaces. As soon as the connectivity is restored over a previously failing interface, the metric is also restored to the original value and the routing table goes back to the original state. Configuring the connectivity check The connectivity check is enabled by default in Kura and is configured to probe the connection to http://network-test.debian.org/nm every 60 seconds. To set a specific URI and a different interval edit /etc/NetworkManager/conf.d/99kura-nm.conf (reference NetworkManager ): [connectivity] uri=http://network-test.debian.org/nm interval=60 response=\"NetworkManager is online\" The minimun interval is 60 seconds, if no interval is specified it defaults to 300 seconds. The response should match what the URI is returning when probed. Some examples of web pages with NetworkManager responses: URI Response http://network-test.debian.org/nm NetworkManager is online https://fedoraproject.org/static/hotspot.txt OK http://nmcheck.gnome.org/check_network_status.txt NetworkManager is online https://www.pkgbuild.com/check_network_status.txt NetworkManager is online To disable the connectivity check feature: remove the [connectivity] section from the configuration file; or set interval=0 ; or remove uri ; or set an empty URI, like uri=","title":"Network Failover"},{"location":"gateway-configuration/network-failover/#network-failover","text":"For devices configured to use NetworkManager , it is possible to configure multiple WAN interfaces and a basic network failover functionality. As in the picture below, the Kura UI allows for multiple WAN interfaces to be defined. Each WAN interface can be configured with a WAN Priority . WAN Priority is used to determine which interface will be selected for primary WAN. In the case where the primary WAN interface loses connection, then the next highest priority interface is assigned. Kura uses NetworkManager's implementation to achieve network failover (see NetworkManager ). Lower values correspond to higher priority . Allowed values range from -1 to 2147483647. Value -1 means that the metric is chosen automatically based on the device type (see NetworkManager DBUS properties ). To observe changes to the applied configuration, use the following command on your device's shell: route -n Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface 0 .0.0.0 192 .168.2.1 0 .0.0.0 UG 100 0 0 eth0 172 .16.1.0 0 .0.0.0 255 .255.255.0 U 600 0 0 wlan0 172 .17.0.0 0 .0.0.0 255 .255.0.0 U 0 0 0 docker0 192 .168.2.0 0 .0.0.0 255 .255.255.0 U 100 0 0 eth0 The metric flag will correspond to the set WAN Priority . NetworkManager will always prioritize lower metric routes.","title":"Network Failover"},{"location":"gateway-configuration/network-failover/#operating-modes","text":"The NetworkManager failover mechanism can work at two different levels: by detecting disruptions at physical level (i.e. an ethernet cable that disconnects); by performing a connectivity check to an upstream URI. NetworkManager brings a network interface down when it detects the loss of its physical link. In such case, the next highest priority interface is selected as the main one. When the connectivity check fails, NetworkManager penalizes the metric of that interface in the routing table. NetworkManager continues to perform connectivity checks over all the other interfaces. As soon as the connectivity is restored over a previously failing interface, the metric is also restored to the original value and the routing table goes back to the original state.","title":"Operating modes"},{"location":"gateway-configuration/network-failover/#configuring-the-connectivity-check","text":"The connectivity check is enabled by default in Kura and is configured to probe the connection to http://network-test.debian.org/nm every 60 seconds. To set a specific URI and a different interval edit /etc/NetworkManager/conf.d/99kura-nm.conf (reference NetworkManager ): [connectivity] uri=http://network-test.debian.org/nm interval=60 response=\"NetworkManager is online\" The minimun interval is 60 seconds, if no interval is specified it defaults to 300 seconds. The response should match what the URI is returning when probed. Some examples of web pages with NetworkManager responses: URI Response http://network-test.debian.org/nm NetworkManager is online https://fedoraproject.org/static/hotspot.txt OK http://nmcheck.gnome.org/check_network_status.txt NetworkManager is online https://www.pkgbuild.com/check_network_status.txt NetworkManager is online To disable the connectivity check feature: remove the [connectivity] section from the configuration file; or set interval=0 ; or remove uri ; or set an empty URI, like uri=","title":"Configuring the connectivity check"},{"location":"gateway-configuration/network-hardware/","text":"Hardware Tab Each interface in the Network page contains inside its specific box the tab Hardware : this collects the most significant information about the current state of the interface. In this way the user can have a quick and complete view of what are the settings and physical specifications of a network interface. These information are respectively: Status : the current state of the network interface, from the framework point of view. Some examples of status are UNMANAGED , ACTIVATED , FAILED , UNKNOWN . Name : name of the interface Type : physical interface type like WIFI or ETHERNET Hardware Address : MAC address of the interface Serial # : serial number of the hardware interface Driver : Linux driver used for the interface Version : Linux driver version Firmware : firmware version of the interface module MTU : Maximum Transmission Unit, is the measurement in bytes of the largest data packets that the interface can accept USB Device : path of the usb device Received Signal Strength (dBm) : power of the received radio signal from a wireless interface Current WLAN Channel : actual channel used by the wifi connection These entries are filled only if the associated data is available. This means, for example, that no information will be shown under Current WLAN Channel if the interface is of Ethernet type. Conversely, if the interface is Wifi type and no information is shown, it is possible that there has been some problem with the configuration or connection of the interface. So this tab, could be also an intuitive way to check if the interface is working properly or not.","title":"Hardware Tab"},{"location":"gateway-configuration/network-hardware/#hardware-tab","text":"Each interface in the Network page contains inside its specific box the tab Hardware : this collects the most significant information about the current state of the interface. In this way the user can have a quick and complete view of what are the settings and physical specifications of a network interface. These information are respectively: Status : the current state of the network interface, from the framework point of view. Some examples of status are UNMANAGED , ACTIVATED , FAILED , UNKNOWN . Name : name of the interface Type : physical interface type like WIFI or ETHERNET Hardware Address : MAC address of the interface Serial # : serial number of the hardware interface Driver : Linux driver used for the interface Version : Linux driver version Firmware : firmware version of the interface module MTU : Maximum Transmission Unit, is the measurement in bytes of the largest data packets that the interface can accept USB Device : path of the usb device Received Signal Strength (dBm) : power of the received radio signal from a wireless interface Current WLAN Channel : actual channel used by the wifi connection These entries are filled only if the associated data is available. This means, for example, that no information will be shown under Current WLAN Channel if the interface is of Ethernet type. Conversely, if the interface is Wifi type and no information is shown, it is possible that there has been some problem with the configuration or connection of the interface. So this tab, could be also an intuitive way to check if the interface is working properly or not.","title":"Hardware Tab"},{"location":"gateway-configuration/network-threat-manager/","text":"Network Threat Manager Eclipse Kura provides a set of features to detect and prevent network attacks. The Security section in the Gateway Administration Console shows the Network Threat Manager tab where is it possible to activate these functions. Warning The Network Threat Manager tab is not available for the No Network version of Eclipse Kura . Flooding protection The flooding protection function is used to prevent DDos (Distributed Denial-of-Service) attacks using the firewall. When enabled, the feature adds a set of firewall rules to the mangle table. Flooding protection for IPv4 The following rules are added to the mangle table and they are implemented to block invalid or malicious network packets: iptables -A prerouting-kura -m conntrack --ctstate INVALID -j DROP iptables -A prerouting-kura -p tcp ! --syn -m conntrack --ctstate NEW -j DROP iptables -A prerouting-kura -p tcp -m conntrack --ctstate NEW -m tcpmss ! --mss 536:65535 -j DROP iptables -A prerouting-kura -p tcp --tcp-flags FIN,SYN FIN,SYN -j DROP iptables -A prerouting-kura -p tcp --tcp-flags SYN,RST SYN,RST -j DROP iptables -A prerouting-kura -p tcp --tcp-flags FIN,RST FIN,RST -j DROP iptables -A prerouting-kura -p tcp --tcp-flags FIN,ACK FIN -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ACK,URG URG -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ACK,FIN FIN -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ACK,PSH PSH -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL ALL -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL NONE -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL FIN,PSH,URG -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL SYN,FIN,PSH,URG -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j DROP iptables -A prerouting-kura -p icmp -j DROP iptables -A prerouting-kura -f -j DROP To further filter the incoming TCP fragmented packets, specific system configuration files are configured. The flooding.protection.enabled property is used to enable the feature. Flooding protection for IPv6 The same rules applied to the IPv4 are used for preventing attack on IPv6. In addition, some rules are implemented to drop specific IPv6 headers and limit the incoming ICMPv6 packets. Moreover, the incoming TCP fragmented packets are dropped configuring specific system files. The following rules are applied to the mangle table: ip6tables -A prerouting-kura -m conntrack --ctstate INVALID -j DROP ip6tables -A prerouting-kura -p tcp ! --syn -m conntrack --ctstate NEW -j DROP ip6tables -A prerouting-kura -p tcp -m conntrack --ctstate NEW -m tcpmss ! --mss 536:65535 -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags FIN,SYN FIN,SYN -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags SYN,RST SYN,RST -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags FIN,RST FIN,RST -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags FIN,ACK FIN -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ACK,URG URG -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ACK,FIN FIN -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ACK,PSH PSH -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL ALL -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL NONE -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL FIN,PSH,URG -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL SYN,FIN,PSH,URG -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j DROP ip6tables -A prerouting-kura -p ipv6-icmp -m ipv6-icmp --icmpv6-type 128 -j DROP ip6tables -A prerouting-kura -p ipv6-icmp -m ipv6-icmp --icmpv6-type 129 -j DROP ip6tables -A prerouting-kura -m ipv6header --header dst --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header hop --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header route --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header frag --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header auth --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header esp --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header none --soft -j DROP ip6tables -A prerouting-kura -m rt --rt-type 0 -j DROP ip6tables -A output-kura -m rt --rt-type 0 -j DROP Also in this case, to enable the feature and add the rules to the firewall, the flooding.protection.enabled.ipv6 property has to be set to true. If the device doesn't support IPv6, this property is ignored.","title":"Network Threat Manager"},{"location":"gateway-configuration/network-threat-manager/#network-threat-manager","text":"Eclipse Kura provides a set of features to detect and prevent network attacks. The Security section in the Gateway Administration Console shows the Network Threat Manager tab where is it possible to activate these functions. Warning The Network Threat Manager tab is not available for the No Network version of Eclipse Kura .","title":"Network Threat Manager"},{"location":"gateway-configuration/network-threat-manager/#flooding-protection","text":"The flooding protection function is used to prevent DDos (Distributed Denial-of-Service) attacks using the firewall. When enabled, the feature adds a set of firewall rules to the mangle table.","title":"Flooding protection"},{"location":"gateway-configuration/network-threat-manager/#flooding-protection-for-ipv4","text":"The following rules are added to the mangle table and they are implemented to block invalid or malicious network packets: iptables -A prerouting-kura -m conntrack --ctstate INVALID -j DROP iptables -A prerouting-kura -p tcp ! --syn -m conntrack --ctstate NEW -j DROP iptables -A prerouting-kura -p tcp -m conntrack --ctstate NEW -m tcpmss ! --mss 536:65535 -j DROP iptables -A prerouting-kura -p tcp --tcp-flags FIN,SYN FIN,SYN -j DROP iptables -A prerouting-kura -p tcp --tcp-flags SYN,RST SYN,RST -j DROP iptables -A prerouting-kura -p tcp --tcp-flags FIN,RST FIN,RST -j DROP iptables -A prerouting-kura -p tcp --tcp-flags FIN,ACK FIN -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ACK,URG URG -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ACK,FIN FIN -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ACK,PSH PSH -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL ALL -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL NONE -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL FIN,PSH,URG -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL SYN,FIN,PSH,URG -j DROP iptables -A prerouting-kura -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j DROP iptables -A prerouting-kura -p icmp -j DROP iptables -A prerouting-kura -f -j DROP To further filter the incoming TCP fragmented packets, specific system configuration files are configured. The flooding.protection.enabled property is used to enable the feature.","title":"Flooding protection for IPv4"},{"location":"gateway-configuration/network-threat-manager/#flooding-protection-for-ipv6","text":"The same rules applied to the IPv4 are used for preventing attack on IPv6. In addition, some rules are implemented to drop specific IPv6 headers and limit the incoming ICMPv6 packets. Moreover, the incoming TCP fragmented packets are dropped configuring specific system files. The following rules are applied to the mangle table: ip6tables -A prerouting-kura -m conntrack --ctstate INVALID -j DROP ip6tables -A prerouting-kura -p tcp ! --syn -m conntrack --ctstate NEW -j DROP ip6tables -A prerouting-kura -p tcp -m conntrack --ctstate NEW -m tcpmss ! --mss 536:65535 -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags FIN,SYN FIN,SYN -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags SYN,RST SYN,RST -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags FIN,RST FIN,RST -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags FIN,ACK FIN -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ACK,URG URG -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ACK,FIN FIN -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ACK,PSH PSH -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL ALL -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL NONE -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL FIN,PSH,URG -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL SYN,FIN,PSH,URG -j DROP ip6tables -A prerouting-kura -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j DROP ip6tables -A prerouting-kura -p ipv6-icmp -m ipv6-icmp --icmpv6-type 128 -j DROP ip6tables -A prerouting-kura -p ipv6-icmp -m ipv6-icmp --icmpv6-type 129 -j DROP ip6tables -A prerouting-kura -m ipv6header --header dst --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header hop --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header route --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header frag --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header auth --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header esp --soft -j DROP ip6tables -A prerouting-kura -m ipv6header --header none --soft -j DROP ip6tables -A prerouting-kura -m rt --rt-type 0 -j DROP ip6tables -A output-kura -m rt --rt-type 0 -j DROP Also in this case, to enable the feature and add the rules to the firewall, the flooding.protection.enabled.ipv6 property has to be set to true. If the device doesn't support IPv6, this property is ignored.","title":"Flooding protection for IPv6"},{"location":"gateway-configuration/ssl-configuration/","text":"SSL Configuration A SSL Service instance manages the configuration of the SSL connections. It uses the associated KeystoreService to access the trust certificates, private keys pairs needed to setup a SSL connection. It also enforces best practices that are not enabled by default in the Java VM, such as, enabling hostname verification, disabling the legacy SSL-2.0-compatible Client Hello, and disabling the Nagle algorithm. The list of all available SSL Service instances is available in the SSL Configuration tab of the Security section, accessible only by the users with the corresponding permission. By default, the framework creates a SSLManagerService instance with the org.eclipse.kura.ssl.SslManagerService PID. This instance is generally used by all the core services of the framework. A new SSL Service instance can be created using the New Button, by specifying the desired factory and the Service PID that will be associated with this new instance. An instance of the default org.eclipse.kura.ssl.SslManagerService factory has the following configuration parameters: KeystoreService Target Filter - specifies, as an OSGi target filter, the pid of the KeystoreService used to manage the SSL key store (Required field). Truststore Target Filter - specifies, as an OSGi target filter, the pid of the KeystoreService used to manage the SSL trust store. If the target service cannot be found, the service configured with the Keystore Target Filter parameter will be used as truststore. ssl.default.protocol - defines the allowed SSL protocol. ssl.hostname.verification - indicates whether hostname verification is enabled or disabled. ssl.default.cipherSuites - defines the allowed cipher suites. By selecting the Select available targets button, the user can associate the SSLManagerService instance with the corresponding KeystoreService instances available in the framework runtime. Server SSL Certificate The device requires a public key in its trust store in order to authenticate the broker and be able to setup an SSL connection. Kura is distributed with a pre-initialized SSL keystore that contains only some of the major Certification Authorities (CA) public keys. If the broker uses a certificate signed by a different CA, or uses an auto-signed certificate, the system administrator must setup Kura with the correct certificates used to trust the remote cloud broker. The inclusion of public certificates is accomplished with the Server SSL Certificate feature. To do so, the SSL Certificates form must be completed by providing a certificate or a certificates chain to be trusted and defining the alias used to register this new data in the device's trust store. With this feature, when the device tries to instantiate an SSL connection with the broker, it receives the broker's public key chain. The SSL connection is secured only if the received chain is trusted. This connection can only happen if one of the certificates that compose the broker chain are available in the device's trust store. When instantiating the device's trust store, the user decides whether to add a single certificate (leaf or CA certificate) or the full chain. In the latter case, the chain should be provided by specifying the leaf certificate, followed by the CA certificate that is signing it, and so on, until the root CA is reached. An example of this scenario is depicted in the following image: Device SSL Certificate & Mutual Authentication Mutual authentication is a technique that allows authentication of the device that is connecting to the broker. The form available in Certificates List may be used to specify the keys needed to enable mutual authentication. This authentication may be accomplished by specifying a couple of certificates (private and public keys) to be used by the client device to authenticate itself to the broker. This authentication is possible because the broker has the root CA certificate that has been used to sign the couple held by the device. In this way, the authenticity of the couple of certificates held by the device may be verified, and therefore, enable the two communicating parts (the broker and the device) to trust each other. To enable mutual authentication, the user must complete the form with a well-formed key pair (public and private), and with an alias value that corresponds with the account name used to connect to the broker. Key Pair Generation The keys may be generated using specific software, such as OpenSSL or Keytool . This section describes how to use OpenSSL to generate a couple of private and public keys. The private key may be created using the following command: openssl genrsa -out certsDirectory/certs/certificate.key 1024 This command creates a new, 1024-bit private key in the specified path. This key is used to generate a Certificate Signing Request (CSR) file, which is used by a CA to authenticate the certificate's creator. A CSR file is created with OpenSSL using the following command: openssl req -new -key certsDirectory/certs/certificate.key -out certsDirectory/crl/certificate.csr If the user is creating their own certificate chain, the CSR file may be signed using a personal CA. This process may be accomplished using OpenSSL with the following command: openssl ca -config certsDirectory/openssl.cnf -days 3650 -keyfile certsDirectory/ca/ca.key -cert certsDirectory/ca/ca.pem -out certsDirectory/certs/certificate.pem -infiles certsDirectory/crl/certificate.csr The parameters are defined as follows: -config : specifies the OpenSSL configuration file that must be used to sign the certificate. -days : specifies how long the certificate is valid. -keyfile and -cert : allow the specification of the CA that will sign the CSR file. -out : identifies the location and the name of the signed certificate that will be created. -infiles : identifies the location of the CSR file that has to be signed. Tip The private key may not be placed into the Kura Gateway Administration Console without a format conversion. OpenSSL offers the following command to convert the input private key to a non-encrypted PKCS#8 format that may be processed by the Kura code: openssl pkcs8 -topk8 -inform PEM -outform PEM -in inPrivateKey.key -out outKey.pem -nocrypt","title":"SSL Configuration"},{"location":"gateway-configuration/ssl-configuration/#ssl-configuration","text":"A SSL Service instance manages the configuration of the SSL connections. It uses the associated KeystoreService to access the trust certificates, private keys pairs needed to setup a SSL connection. It also enforces best practices that are not enabled by default in the Java VM, such as, enabling hostname verification, disabling the legacy SSL-2.0-compatible Client Hello, and disabling the Nagle algorithm. The list of all available SSL Service instances is available in the SSL Configuration tab of the Security section, accessible only by the users with the corresponding permission. By default, the framework creates a SSLManagerService instance with the org.eclipse.kura.ssl.SslManagerService PID. This instance is generally used by all the core services of the framework. A new SSL Service instance can be created using the New Button, by specifying the desired factory and the Service PID that will be associated with this new instance. An instance of the default org.eclipse.kura.ssl.SslManagerService factory has the following configuration parameters: KeystoreService Target Filter - specifies, as an OSGi target filter, the pid of the KeystoreService used to manage the SSL key store (Required field). Truststore Target Filter - specifies, as an OSGi target filter, the pid of the KeystoreService used to manage the SSL trust store. If the target service cannot be found, the service configured with the Keystore Target Filter parameter will be used as truststore. ssl.default.protocol - defines the allowed SSL protocol. ssl.hostname.verification - indicates whether hostname verification is enabled or disabled. ssl.default.cipherSuites - defines the allowed cipher suites. By selecting the Select available targets button, the user can associate the SSLManagerService instance with the corresponding KeystoreService instances available in the framework runtime.","title":"SSL Configuration"},{"location":"gateway-configuration/ssl-configuration/#server-ssl-certificate","text":"The device requires a public key in its trust store in order to authenticate the broker and be able to setup an SSL connection. Kura is distributed with a pre-initialized SSL keystore that contains only some of the major Certification Authorities (CA) public keys. If the broker uses a certificate signed by a different CA, or uses an auto-signed certificate, the system administrator must setup Kura with the correct certificates used to trust the remote cloud broker. The inclusion of public certificates is accomplished with the Server SSL Certificate feature. To do so, the SSL Certificates form must be completed by providing a certificate or a certificates chain to be trusted and defining the alias used to register this new data in the device's trust store. With this feature, when the device tries to instantiate an SSL connection with the broker, it receives the broker's public key chain. The SSL connection is secured only if the received chain is trusted. This connection can only happen if one of the certificates that compose the broker chain are available in the device's trust store. When instantiating the device's trust store, the user decides whether to add a single certificate (leaf or CA certificate) or the full chain. In the latter case, the chain should be provided by specifying the leaf certificate, followed by the CA certificate that is signing it, and so on, until the root CA is reached. An example of this scenario is depicted in the following image:","title":"Server SSL Certificate"},{"location":"gateway-configuration/ssl-configuration/#device-ssl-certificate-mutual-authentication","text":"Mutual authentication is a technique that allows authentication of the device that is connecting to the broker. The form available in Certificates List may be used to specify the keys needed to enable mutual authentication. This authentication may be accomplished by specifying a couple of certificates (private and public keys) to be used by the client device to authenticate itself to the broker. This authentication is possible because the broker has the root CA certificate that has been used to sign the couple held by the device. In this way, the authenticity of the couple of certificates held by the device may be verified, and therefore, enable the two communicating parts (the broker and the device) to trust each other. To enable mutual authentication, the user must complete the form with a well-formed key pair (public and private), and with an alias value that corresponds with the account name used to connect to the broker.","title":"Device SSL Certificate &amp; Mutual Authentication"},{"location":"gateway-configuration/ssl-configuration/#key-pair-generation","text":"The keys may be generated using specific software, such as OpenSSL or Keytool . This section describes how to use OpenSSL to generate a couple of private and public keys. The private key may be created using the following command: openssl genrsa -out certsDirectory/certs/certificate.key 1024 This command creates a new, 1024-bit private key in the specified path. This key is used to generate a Certificate Signing Request (CSR) file, which is used by a CA to authenticate the certificate's creator. A CSR file is created with OpenSSL using the following command: openssl req -new -key certsDirectory/certs/certificate.key -out certsDirectory/crl/certificate.csr If the user is creating their own certificate chain, the CSR file may be signed using a personal CA. This process may be accomplished using OpenSSL with the following command: openssl ca -config certsDirectory/openssl.cnf -days 3650 -keyfile certsDirectory/ca/ca.key -cert certsDirectory/ca/ca.pem -out certsDirectory/certs/certificate.pem -infiles certsDirectory/crl/certificate.csr The parameters are defined as follows: -config : specifies the OpenSSL configuration file that must be used to sign the certificate. -days : specifies how long the certificate is valid. -keyfile and -cert : allow the specification of the CA that will sign the CSR file. -out : identifies the location and the name of the signed certificate that will be created. -infiles : identifies the location of the CSR file that has to be signed. Tip The private key may not be placed into the Kura Gateway Administration Console without a format conversion. OpenSSL offers the following command to convert the input private key to a non-encrypted PKCS#8 format that may be processed by the Kura code: openssl pkcs8 -topk8 -inform PEM -outform PEM -in inPrivateKey.key -out outKey.pem -nocrypt","title":"Key Pair Generation"},{"location":"gateway-configuration/vlan-configuration/","text":"VLAN Configuration For devices running Kura installed using a Generic Profile, it is possible to configure multiple VLAN interfaces. Take a look at our installer profiles to know which are supported. A VLAN, or Virtual Local Area Network, is a network segmentation technology that allows a single physical network to be logically divided into multiple isolated networks. These virtual networks operate as if they are independent, even though they share the same physical infrastructure. This is achieved via a VLAN ID, or VLAN tag, a numerical label added to network frames to identify the specific Virtual Local Area Network (VLAN) to which they belong. It's a critical component in VLAN technology, allowing network switches and routers to differentiate and route traffic within a VLAN. VLAN tags are added to the Ethernet frame's header, indicating which virtual network a data packet should be directed to when it traverses the physical network infrastructure. Therefore, VLANs must also be supported and configured on the network equipment a device is connected to. A VLAN can be named freely, as long as it's 15 or less characters. A typical VLAN naming format is physicalInterfaceName . vlanId (eg. a vlan with id 100 on the interface eth0 would be named eth0.100). This is achieved by NetworkManager by creating a virtual device bound to the underlying physical interface when Kura sets up a new VLAN connection. VLAN Configuration via Kura Snapshot upload Currently, VLAN configuration is supported via uploading snapshot.xml fragments. Warning When creating a new VLAN be sure to include the net.interfaces parameter, containing both the previously existing network interfaces, either virtual or physical, and the name of the new VLAN to be created. Basic VLAN configuration example The following example creates a VLAN with ID 40 over the ethernet interface ens33, naming it ens33.40 , using a predefined IP address, enabled for LAN. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interfaces\" type= \"String\" > <esf:value> lo,ens33,ens34,ens33.40 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.type\" type= \"String\" > <esf:value> VLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.vlan.parent\" type= \"String\" > <esf:value> ens33 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.vlan.id\" type= \"Integer\" > <esf:value> 40 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.address\" type= \"String\" > <esf:value> 10.0.55.37 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> Complete VLAN configuration example The following example creates a VLAN with ID 41 over the ethernet interface ens33, naming it ens33.41 , using a predefined IP address, enabled for WAN. This example also sets the 'flags' and 'traffic priority' optional parameters as described in Network Manager API documentation . <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interfaces\" type= \"String\" > <esf:value> lo,ens33,ens34,ens33.41 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.type\" type= \"String\" > <esf:value> VLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.gateway\" type= \"String\" > <esf:value> 192.168.41.254 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledWAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.dnsServers\" type= \"String\" > <esf:value> 8.8.8.8 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.parent\" type= \"String\" > <esf:value> ens33 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.id\" type= \"Integer\" > <esf:value> 41 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.address\" type= \"String\" > <esf:value> 192.168.41.1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.flags\" type= \"Integer\" > <esf:value> 1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.ingress\" type= \"String\" > <esf:value> 1:2,3:4 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.egress\" type= \"String\" > <esf:value> 5:6 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations> VLAN Management Once a VLAN is created it can be managed via the Kura UI just like any other Ethernet interface. Warning Setting a VLAN status to \" Disabled \" deletes its configuration in NetworkManager and the related virtual interface from the system. Although it will is no longer be visible on the UI, all the configurations are left in Kura. Therefore the VLAN can be restored by setting the net.interface.<interface>.config.ip4.status to netIPv4StatusEnabledLAN or netIPv4StatusEnabledWAN via snapshot upload, then resume configuration via UI. As an example, the configuration to reactivate a disabled VLAN named ens33.40 would be as follows: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"VLAN Configuration"},{"location":"gateway-configuration/vlan-configuration/#vlan-configuration","text":"For devices running Kura installed using a Generic Profile, it is possible to configure multiple VLAN interfaces. Take a look at our installer profiles to know which are supported. A VLAN, or Virtual Local Area Network, is a network segmentation technology that allows a single physical network to be logically divided into multiple isolated networks. These virtual networks operate as if they are independent, even though they share the same physical infrastructure. This is achieved via a VLAN ID, or VLAN tag, a numerical label added to network frames to identify the specific Virtual Local Area Network (VLAN) to which they belong. It's a critical component in VLAN technology, allowing network switches and routers to differentiate and route traffic within a VLAN. VLAN tags are added to the Ethernet frame's header, indicating which virtual network a data packet should be directed to when it traverses the physical network infrastructure. Therefore, VLANs must also be supported and configured on the network equipment a device is connected to. A VLAN can be named freely, as long as it's 15 or less characters. A typical VLAN naming format is physicalInterfaceName . vlanId (eg. a vlan with id 100 on the interface eth0 would be named eth0.100). This is achieved by NetworkManager by creating a virtual device bound to the underlying physical interface when Kura sets up a new VLAN connection.","title":"VLAN Configuration"},{"location":"gateway-configuration/vlan-configuration/#vlan-configuration-via-kura-snapshot-upload","text":"Currently, VLAN configuration is supported via uploading snapshot.xml fragments. Warning When creating a new VLAN be sure to include the net.interfaces parameter, containing both the previously existing network interfaces, either virtual or physical, and the name of the new VLAN to be created.","title":"VLAN Configuration via Kura Snapshot upload"},{"location":"gateway-configuration/vlan-configuration/#basic-vlan-configuration-example","text":"The following example creates a VLAN with ID 40 over the ethernet interface ens33, naming it ens33.40 , using a predefined IP address, enabled for LAN. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interfaces\" type= \"String\" > <esf:value> lo,ens33,ens34,ens33.40 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.type\" type= \"String\" > <esf:value> VLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.vlan.parent\" type= \"String\" > <esf:value> ens33 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.vlan.id\" type= \"Integer\" > <esf:value> 40 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.address\" type= \"String\" > <esf:value> 10.0.55.37 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Basic VLAN configuration example"},{"location":"gateway-configuration/vlan-configuration/#complete-vlan-configuration-example","text":"The following example creates a VLAN with ID 41 over the ethernet interface ens33, naming it ens33.41 , using a predefined IP address, enabled for WAN. This example also sets the 'flags' and 'traffic priority' optional parameters as described in Network Manager API documentation . <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interfaces\" type= \"String\" > <esf:value> lo,ens33,ens34,ens33.41 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.dhcpServer4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.nat.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.dhcpClient4.enabled\" type= \"Boolean\" > <esf:value> false </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.type\" type= \"String\" > <esf:value> VLAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.gateway\" type= \"String\" > <esf:value> 192.168.41.254 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledWAN </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.vlanFull.config.ip4.dnsServers\" type= \"String\" > <esf:value> 8.8.8.8 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.parent\" type= \"String\" > <esf:value> ens33 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.id\" type= \"Integer\" > <esf:value> 41 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.address\" type= \"String\" > <esf:value> 192.168.41.1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.ip4.prefix\" type= \"Short\" > <esf:value> 24 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.flags\" type= \"Integer\" > <esf:value> 1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.ingress\" type= \"String\" > <esf:value> 1:2,3:4 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.41.config.vlan.egress\" type= \"String\" > <esf:value> 5:6 </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Complete VLAN configuration example"},{"location":"gateway-configuration/vlan-configuration/#vlan-management","text":"Once a VLAN is created it can be managed via the Kura UI just like any other Ethernet interface. Warning Setting a VLAN status to \" Disabled \" deletes its configuration in NetworkManager and the related virtual interface from the system. Although it will is no longer be visible on the UI, all the configurations are left in Kura. Therefore the VLAN can be restored by setting the net.interface.<interface>.config.ip4.status to netIPv4StatusEnabledLAN or netIPv4StatusEnabledWAN via snapshot upload, then resume configuration via UI. As an example, the configuration to reactivate a disabled VLAN named ens33.40 would be as follows: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.net.admin.NetworkConfigurationService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"net.interface.ens33.40.config.ip4.status\" type= \"String\" > <esf:value> netIPv4StatusEnabledLAN </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"VLAN Management"},{"location":"gateway-configuration/web-console-configuration/","text":"Web Console Configuration The Web Console exposes a set of configuration parameters that can be used to increase the overall UI security. The Web Console configuration can be accessed in the Security section. Web Server Entry Point This parameter allows to configure the relative path that the user will be redirected to when accessing http(s)://gateway-ip/. Note: this parameter does not change the Kura Web UI relative path, that is always /admin/console. The default value set is /admin/console Session max inactivity interval The session max inactivity interval in minutes. If no interaction with the Web UI is performed for the value of this parameter in minutes, a new login will be requested. The default value set is 15 minutes Access Banner Enabled For security reasons, it may be needed to display to the user a banner that describes the intended system use before authenticating. Once enabled and configured, the Kura Web UI will display a banner before every access attempt, as depicted in the image below. Password Management This section is related to the definition of required parameters that must be respected when defining a new password, for example when a user changes its password at first access. Minimum password length The minimum length to be enforced for new passwords. Set to 0 to disable. The default value set is 8 characters Require digits in new password If set to true, new passwords will be accepted only if containing at least one digit. The default value is false Require special characters in new password If set to true, new passwords will be accepted only if containing at least one non alphanumeric character The default value is false Require uppercase and lowercase characters in new passwords If set to true, new passwords will be accepted only if containing both uppercase and lowercase alphanumeric characters. The default value is false Allowed ports If set to a non empty list, Web Console access will be allowed only on the specified ports. If set to an empty list, access will be allowed on all ports. It is needed for the end user to make sure that the allowed ports are open in HttpService and Firewall configuration. Authentication Method \"Password\" Enabled Defines whether the \"Password\" authentication method is enabled or not. The default value is true Authentication Method \"Certificate\" Enabled Defines whether the \"Certificate\" authentication method is enabled or not The default value is true SslManagerService Target Filter It is possible to specify the SslManagerService containing the certificates truststore required to establish a new https connection, this is needed, for example, for fetching package descriptions from Eclipse Marketplace. The default target is the org.eclipse.kura.ssl.SslManagerService","title":"Web Console Configuration"},{"location":"gateway-configuration/web-console-configuration/#web-console-configuration","text":"The Web Console exposes a set of configuration parameters that can be used to increase the overall UI security. The Web Console configuration can be accessed in the Security section.","title":"Web Console Configuration"},{"location":"gateway-configuration/web-console-configuration/#web-server-entry-point","text":"This parameter allows to configure the relative path that the user will be redirected to when accessing http(s)://gateway-ip/. Note: this parameter does not change the Kura Web UI relative path, that is always /admin/console. The default value set is /admin/console","title":"Web Server Entry Point"},{"location":"gateway-configuration/web-console-configuration/#session-max-inactivity-interval","text":"The session max inactivity interval in minutes. If no interaction with the Web UI is performed for the value of this parameter in minutes, a new login will be requested. The default value set is 15 minutes","title":"Session max inactivity interval"},{"location":"gateway-configuration/web-console-configuration/#access-banner-enabled","text":"For security reasons, it may be needed to display to the user a banner that describes the intended system use before authenticating. Once enabled and configured, the Kura Web UI will display a banner before every access attempt, as depicted in the image below.","title":"Access Banner Enabled"},{"location":"gateway-configuration/web-console-configuration/#password-management","text":"This section is related to the definition of required parameters that must be respected when defining a new password, for example when a user changes its password at first access.","title":"Password Management"},{"location":"gateway-configuration/web-console-configuration/#minimum-password-length","text":"The minimum length to be enforced for new passwords. Set to 0 to disable. The default value set is 8 characters","title":"Minimum password length"},{"location":"gateway-configuration/web-console-configuration/#require-digits-in-new-password","text":"If set to true, new passwords will be accepted only if containing at least one digit. The default value is false","title":"Require digits in new password"},{"location":"gateway-configuration/web-console-configuration/#require-special-characters-in-new-password","text":"If set to true, new passwords will be accepted only if containing at least one non alphanumeric character The default value is false","title":"Require special characters in new password"},{"location":"gateway-configuration/web-console-configuration/#require-uppercase-and-lowercase-characters-in-new-passwords","text":"If set to true, new passwords will be accepted only if containing both uppercase and lowercase alphanumeric characters. The default value is false","title":"Require uppercase and lowercase characters in new passwords"},{"location":"gateway-configuration/web-console-configuration/#allowed-ports","text":"If set to a non empty list, Web Console access will be allowed only on the specified ports. If set to an empty list, access will be allowed on all ports. It is needed for the end user to make sure that the allowed ports are open in HttpService and Firewall configuration.","title":"Allowed ports"},{"location":"gateway-configuration/web-console-configuration/#authentication-method-password-enabled","text":"Defines whether the \"Password\" authentication method is enabled or not. The default value is true","title":"Authentication Method \"Password\" Enabled"},{"location":"gateway-configuration/web-console-configuration/#authentication-method-certificate-enabled","text":"Defines whether the \"Certificate\" authentication method is enabled or not The default value is true","title":"Authentication Method \"Certificate\" Enabled"},{"location":"gateway-configuration/web-console-configuration/#sslmanagerservice-target-filter","text":"It is possible to specify the SslManagerService containing the certificates truststore required to establish a new https connection, this is needed, for example, for fetching package descriptions from Eclipse Marketplace. The default target is the org.eclipse.kura.ssl.SslManagerService","title":"SslManagerService Target Filter"},{"location":"gateway-configuration/wifi-configuration-8021x/","text":"Wi-Fi 802.1x Configuration Enterprise Wi-Fi is currently only supported on gateways running our generic profiles . The following is a list of currently supported 802.1x authentication methods. TTLS-MSCHAPv2 PEAP-MSCHAPv2 EAP-TLS TTLS-MSCHAPv2 Set up gateway Wi-Fi as described in the Wi-Fi configuration guide . Ensure Wireless Security is set to WPA2/WPA3-Enterprise select the 802.1x tab Set Enteprise EAP -> TTLS Set Inner Authentication -> MSCHAPV2 Set Identity (Username) Set Password Press 'Apply' The configuration should look like the following: PEAP-MSCHAPv2 Set up gateway Wi-Fi as described in the Wi-Fi configuration guide . Ensure Wireless Security is set to WPA2/WPA3-Enterprise select the 802.1x tab Set Enteprise EAP -> PEAP Set Inner Authentication -> MSCHAPV2 Set Identity (Username) Set Password Press 'Apply' The configuration should look like the following: EAP-TLS To connect via EAP-TLS you will need the following items in unencrypted PEM format: Certificate Authority (CA) Certificate Client Certificate + Private Key (PKCS8) Enrolling secrets in the Keystore service . Navigate to Security under the System tab. Under the Keystore Configuration add a new keystore, and keep note of the name. After the Keystore is created, be sure to change the path to a persistent directory. Navigate to the Certificate List and create a new Certificate. Insert the PEM and Apply, keep note of the name. Now press add and create a new Private Key. Insert both the certificates in the PEM in the dialogue and press apply. keep note of the name. Wifi Setup Set up gateway Wi-Fi as described in the Wi-Fi configuration guide . Ensure Wireless Security is set to WPA2/WPA3-Enterprise . Select the 802.1x tab. Set Enteprise EAP -> TLS . Set Identity (Username) . Set Keystore Pid to the name of the keystore created above. Set Certificate Authority Certificate (CA-Cert) to the name of the certificate created above. Set the Client Private Key to the name of the Private Key created above. When completed the Wi-Fi configuration should look like the following:","title":"Wi-Fi 802.1x Configuration"},{"location":"gateway-configuration/wifi-configuration-8021x/#wi-fi-8021x-configuration","text":"Enterprise Wi-Fi is currently only supported on gateways running our generic profiles . The following is a list of currently supported 802.1x authentication methods. TTLS-MSCHAPv2 PEAP-MSCHAPv2 EAP-TLS","title":"Wi-Fi 802.1x Configuration"},{"location":"gateway-configuration/wifi-configuration-8021x/#ttls-mschapv2","text":"Set up gateway Wi-Fi as described in the Wi-Fi configuration guide . Ensure Wireless Security is set to WPA2/WPA3-Enterprise select the 802.1x tab Set Enteprise EAP -> TTLS Set Inner Authentication -> MSCHAPV2 Set Identity (Username) Set Password Press 'Apply' The configuration should look like the following:","title":"TTLS-MSCHAPv2"},{"location":"gateway-configuration/wifi-configuration-8021x/#peap-mschapv2","text":"Set up gateway Wi-Fi as described in the Wi-Fi configuration guide . Ensure Wireless Security is set to WPA2/WPA3-Enterprise select the 802.1x tab Set Enteprise EAP -> PEAP Set Inner Authentication -> MSCHAPV2 Set Identity (Username) Set Password Press 'Apply' The configuration should look like the following:","title":"PEAP-MSCHAPv2"},{"location":"gateway-configuration/wifi-configuration-8021x/#eap-tls","text":"To connect via EAP-TLS you will need the following items in unencrypted PEM format: Certificate Authority (CA) Certificate Client Certificate + Private Key (PKCS8)","title":"EAP-TLS"},{"location":"gateway-configuration/wifi-configuration-8021x/#enrolling-secrets-in-the-keystore-service","text":"Navigate to Security under the System tab. Under the Keystore Configuration add a new keystore, and keep note of the name. After the Keystore is created, be sure to change the path to a persistent directory. Navigate to the Certificate List and create a new Certificate. Insert the PEM and Apply, keep note of the name. Now press add and create a new Private Key. Insert both the certificates in the PEM in the dialogue and press apply. keep note of the name.","title":"Enrolling secrets in the Keystore service."},{"location":"gateway-configuration/wifi-configuration-8021x/#wifi-setup","text":"Set up gateway Wi-Fi as described in the Wi-Fi configuration guide . Ensure Wireless Security is set to WPA2/WPA3-Enterprise . Select the 802.1x tab. Set Enteprise EAP -> TLS . Set Identity (Username) . Set Keystore Pid to the name of the keystore created above. Set Certificate Authority Certificate (CA-Cert) to the name of the certificate created above. Set the Client Private Key to the name of the Private Key created above. When completed the Wi-Fi configuration should look like the following:","title":"Wifi Setup"},{"location":"gateway-configuration/wifi-configuration/","text":"Wi-Fi Configuration From a configuration standpoint, the Wi-Fi interface (e.g., wlan0) may be viewed as an extension of Ethernet. In addition to the TCP/IP and DHCP & NAT configuration tabs, it has the Wireless tab that allows for the configuration of wireless settings. These configuration options are described below. Warning Before using wifi make sure that you have correctly set the Regulatory Domain on the gateway. You can check the current configuration using the iw reg get command. To set the Regulatory Domain please refer to the specific section in the Gateway Configurations. Wireless Configuration The Wireless tab contains the following configuration parameters: Wireless Mode : defines the mode of operation. Access Point: creates a wireless access point. Station Mode: connects to a wireless access point. Network Name : specifies the Service Set Identifier (SSID). In Access Point mode, this is the SSID that identifies this wireless network. In Station mode, this is the SSID of a wireless network to connect to. Radio Mode : defines 802.11 mode. 802.11 ac/n/a (either in 2.4Ghz or 5Ghz depending on the choosen channel) 802.11n/g/b (2.4Ghz only) 802.11g/b (2.4Ghz only) 802.11b (2.4Ghz only) 802.11a (either in 2.4Ghz or 5Ghz depending on the choosen channel) Wireless Security : sets the security protocol for the wireless network. None: No Wi-Fi security WEP: Wired Equivalent Privacy WPA: Wi-Fi Protected Access WPA2: Wi-Fi Protected Access II WPA2/WPA3-Enterprise: Wi-Fi Protected Access II & III with 802.1x Support (Only available in station mode with generic profiles ) Wireless Password : sets the password for the wireless network. WEP: 64-bit or 128-bit encryption key WPA/WPA2: pre-shared key Verify Password : sets the password verification field. In Access Point mode, allows the wireless password to be retyped for verification. In Station mode, this field is disabled. Pairwise Ciphers : lists accepted pairwise (unicast) ciphers for WPA/WPA2. In Access Point mode, this option is disabled. In Station mode, CCMP (AES-based encryption mode with strong security) TKIP (Temporal Key Integrity Protocol) CCMP and TKIP Group Ciphers : lists accepted group (broadcast/multicast) ciphers for WPA/WPA2. In Access Point mode, this option is disabled. In Station mode, CCMP (AES-based encryption mode with strong security) TKIP (Temporal Key Integrity Protocol) CCMP and TKIP Bgscan Module : requests background scans for the purpose of roaming within an ESS (i.e., within a single network block with all the APs using the same SSID). None: background scan is disabled Simple: periodic background scans based on signal strength Learn: learn channels used by the network and try to avoid bgscans on other channels Bgscan Signal Strength Threshold : defines a threshold (in dBm) that determines which one of the following two parameters (i.e., Short Interval or Long Interval ) will be effective. Bgscan Short Interval : defines the interval between background scans (in seconds) if the actual signal level of the currently connected access point is worse than signal_strength. Bgscan Long Interval : defines the interval between background scans (in seconds) if the actual signal level of the currently connected access point is better than signal_strength. Ping Access Point & renew DHCP lease if not reachable : enables pinging the access point after connection is established. In Access Point mode, this option is disabled. In Station mode, if set to true , the unit will ping the access point and attempt to renew the DHCP lease if the access point is not reachable. Ignore Broadcast SSID : operates as follows if set to true : In Access Point mode, sends an empty SSID in beacons and ignores probe request frames that do not specify full SSID. In Station mode, does not scan for the SSID before attempting to associate. Channels table : allows the selection of desired channel frequencies. The availability of the desired frequency is subject to the Regdom set on the device. For a list of limitations in different countries you can consult the following page: List of WLAN channels . Channels marked as No Irradiation and Radar Detection can be used only if DFS (Dynamic Frequency Selection) is supported by the Wi-Fi chip. In Access Point mode, only one channel may be selected. In Station mode, the list of available channels depends on the selected Radio Mode. The selected radio mode also affects the ability to select a network in the scan window (if the channel associated with the network is not enabled in the regulatory domain an error message will be shown). Wi-Fi Station Mode Configuration In addition to the options described above, the Wireless configuration display provides two buttons that help to configure Wi-Fi in the Station mode. These buttons are described below. Access Point Scan : clicking this button triggers access point scan operations. Upon a successful scan, a table containing access points within range is presented. This table contains the following information: SSID MAC Address Signal Strength (in dBm) Channel Frequency Security If you select one of these access points, respective wireless controls (i.e., Network Name , Wireless Security , and Channel ) are filled with information obtained during the scan operation. Password Verification : clicking this button triggers password verification before a full connection is established. Generic Profiles Access Point Scan Issue Due to a limitation in our current implementation of Access Point scanning in the generic profiles, a scan triggered while the device Wireless Mode is set as Access Point will result in it reporting itself as the only reachable Access Point. To retrieve the actual list of nearby Access Points, set your device in Station Mode with a temporary configuration and trigger the scan again. Wi-Fi Linux Configuration This section describes the changes applied by Kura at the Linux networking configuration. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. When the Wi-Fi configuration for the Access Point mode is submitted, Kura generates the /etc/hostapd.conf file and launches the hostapd program as shown below. hostapd:B /etc/hostapd.conf # /etc/hostapd/hostapd.conf interface = wlan0 driver = nl80211 # SSID to use. This will be the \"name\" of the accesspoint ssid = kura_gateway_00:E0:C7:09:35:D8 # basic operational settings hw_mode = g wme_enabled = 0 ieee80211n = 0 channel = 1 # Logging and debugging settings: more of this in original config file logger_syslog = -1 logger_syslog_level = 2 logger_stdout = -1 logger_stdout_level = 2 dump_file = /tmp/hostapd.dump # WPA settings. We'll use stronger WPA2 # bit0 = WPA # bit1 = IEEE 802.11i/RSN (WPA2) (dot11RSNAEnabled) wpa = 2 # Preshared key of between 8-63 ASCII characters. # If you define the key in here, make sure that the file is not readable # by anyone but root. Alternatively you can use a separate file for the # key; see original hostapd.conf for more information. wpa_passphrase = testKEYS # Key management algorithm. In this case, a simple pre-shared key (PSK) wpa_key_mgmt = WPA-PSK # The cipher suite to use. We want to use stronger CCMP cipher. wpa_pairwise = CCMP # Change the broadcasted/multicasted keys after this many seconds. wpa_group_rekey = 600 # Change the master key after this many seconds. Master key is used as a basis # (source) for the encryption keys. wpa_gmk_rekey = 86400 # Send empty SSID in beacons and ignore probe request frames that do not # specify full SSID, i.e., require stations to know SSID. # default: disabled (0) # 1 = send empty (length=0) SSID in beacon and ignore probe request for # broadcast SSID # 2 = clear SSID (ASCII 0), but keep the original length (this may be required # with some clients that do not support empty SSID) and ignore probe # requests for broadcast SSID ignore_broadcast_ssid = 0 When the Wi-Fi configuration for the Station mode is submitted, Kura generates the /etc/wpa_supplicant.conf file and launches the wpa_supplicant program as shown below. wpa_supplicant:B:D nl80211:i wlan0:c /etc/wpa_supplicant.conf # /etc/wpa_supplicant.conf # allow frontend (e.g., wpa_cli) to be used by all users in 'wheel' group ctrl_interface = /var/run/wpa_supplicant ctrl_interface_group = wheel # home network; allow all valid ciphers network ={ mode = 0 ssid = \"Eurotech-INC\" scan_ssid = 1 key_mgmt = WPA-PSK psk = \"WG4t3101\" proto = RSN pairwise = CCMP TKIP group = CCMP TKIP scan_freq = 2412 bgscan = \"\" }","title":"Wi-Fi Configuration"},{"location":"gateway-configuration/wifi-configuration/#wi-fi-configuration","text":"From a configuration standpoint, the Wi-Fi interface (e.g., wlan0) may be viewed as an extension of Ethernet. In addition to the TCP/IP and DHCP & NAT configuration tabs, it has the Wireless tab that allows for the configuration of wireless settings. These configuration options are described below. Warning Before using wifi make sure that you have correctly set the Regulatory Domain on the gateway. You can check the current configuration using the iw reg get command. To set the Regulatory Domain please refer to the specific section in the Gateway Configurations.","title":"Wi-Fi Configuration"},{"location":"gateway-configuration/wifi-configuration/#wireless-configuration","text":"The Wireless tab contains the following configuration parameters: Wireless Mode : defines the mode of operation. Access Point: creates a wireless access point. Station Mode: connects to a wireless access point. Network Name : specifies the Service Set Identifier (SSID). In Access Point mode, this is the SSID that identifies this wireless network. In Station mode, this is the SSID of a wireless network to connect to. Radio Mode : defines 802.11 mode. 802.11 ac/n/a (either in 2.4Ghz or 5Ghz depending on the choosen channel) 802.11n/g/b (2.4Ghz only) 802.11g/b (2.4Ghz only) 802.11b (2.4Ghz only) 802.11a (either in 2.4Ghz or 5Ghz depending on the choosen channel) Wireless Security : sets the security protocol for the wireless network. None: No Wi-Fi security WEP: Wired Equivalent Privacy WPA: Wi-Fi Protected Access WPA2: Wi-Fi Protected Access II WPA2/WPA3-Enterprise: Wi-Fi Protected Access II & III with 802.1x Support (Only available in station mode with generic profiles ) Wireless Password : sets the password for the wireless network. WEP: 64-bit or 128-bit encryption key WPA/WPA2: pre-shared key Verify Password : sets the password verification field. In Access Point mode, allows the wireless password to be retyped for verification. In Station mode, this field is disabled. Pairwise Ciphers : lists accepted pairwise (unicast) ciphers for WPA/WPA2. In Access Point mode, this option is disabled. In Station mode, CCMP (AES-based encryption mode with strong security) TKIP (Temporal Key Integrity Protocol) CCMP and TKIP Group Ciphers : lists accepted group (broadcast/multicast) ciphers for WPA/WPA2. In Access Point mode, this option is disabled. In Station mode, CCMP (AES-based encryption mode with strong security) TKIP (Temporal Key Integrity Protocol) CCMP and TKIP Bgscan Module : requests background scans for the purpose of roaming within an ESS (i.e., within a single network block with all the APs using the same SSID). None: background scan is disabled Simple: periodic background scans based on signal strength Learn: learn channels used by the network and try to avoid bgscans on other channels Bgscan Signal Strength Threshold : defines a threshold (in dBm) that determines which one of the following two parameters (i.e., Short Interval or Long Interval ) will be effective. Bgscan Short Interval : defines the interval between background scans (in seconds) if the actual signal level of the currently connected access point is worse than signal_strength. Bgscan Long Interval : defines the interval between background scans (in seconds) if the actual signal level of the currently connected access point is better than signal_strength. Ping Access Point & renew DHCP lease if not reachable : enables pinging the access point after connection is established. In Access Point mode, this option is disabled. In Station mode, if set to true , the unit will ping the access point and attempt to renew the DHCP lease if the access point is not reachable. Ignore Broadcast SSID : operates as follows if set to true : In Access Point mode, sends an empty SSID in beacons and ignores probe request frames that do not specify full SSID. In Station mode, does not scan for the SSID before attempting to associate. Channels table : allows the selection of desired channel frequencies. The availability of the desired frequency is subject to the Regdom set on the device. For a list of limitations in different countries you can consult the following page: List of WLAN channels . Channels marked as No Irradiation and Radar Detection can be used only if DFS (Dynamic Frequency Selection) is supported by the Wi-Fi chip. In Access Point mode, only one channel may be selected. In Station mode, the list of available channels depends on the selected Radio Mode. The selected radio mode also affects the ability to select a network in the scan window (if the channel associated with the network is not enabled in the regulatory domain an error message will be shown).","title":"Wireless Configuration"},{"location":"gateway-configuration/wifi-configuration/#wi-fi-station-mode-configuration","text":"In addition to the options described above, the Wireless configuration display provides two buttons that help to configure Wi-Fi in the Station mode. These buttons are described below. Access Point Scan : clicking this button triggers access point scan operations. Upon a successful scan, a table containing access points within range is presented. This table contains the following information: SSID MAC Address Signal Strength (in dBm) Channel Frequency Security If you select one of these access points, respective wireless controls (i.e., Network Name , Wireless Security , and Channel ) are filled with information obtained during the scan operation. Password Verification : clicking this button triggers password verification before a full connection is established. Generic Profiles Access Point Scan Issue Due to a limitation in our current implementation of Access Point scanning in the generic profiles, a scan triggered while the device Wireless Mode is set as Access Point will result in it reporting itself as the only reachable Access Point. To retrieve the actual list of nearby Access Points, set your device in Station Mode with a temporary configuration and trigger the scan again.","title":"Wi-Fi Station Mode Configuration"},{"location":"gateway-configuration/wifi-configuration/#wi-fi-linux-configuration","text":"This section describes the changes applied by Kura at the Linux networking configuration. Please read the following note before proceeding with manual changes of the Linux networking configuration. Warning It is NOT recommended performing manual editing of the Linux networking configuration files when the gateway configuration is being managed through Kura. While Linux may correctly accept manual changes, Kura may not be able to interpret the new configuration resulting in an inconsistent state. When the Wi-Fi configuration for the Access Point mode is submitted, Kura generates the /etc/hostapd.conf file and launches the hostapd program as shown below. hostapd:B /etc/hostapd.conf # /etc/hostapd/hostapd.conf interface = wlan0 driver = nl80211 # SSID to use. This will be the \"name\" of the accesspoint ssid = kura_gateway_00:E0:C7:09:35:D8 # basic operational settings hw_mode = g wme_enabled = 0 ieee80211n = 0 channel = 1 # Logging and debugging settings: more of this in original config file logger_syslog = -1 logger_syslog_level = 2 logger_stdout = -1 logger_stdout_level = 2 dump_file = /tmp/hostapd.dump # WPA settings. We'll use stronger WPA2 # bit0 = WPA # bit1 = IEEE 802.11i/RSN (WPA2) (dot11RSNAEnabled) wpa = 2 # Preshared key of between 8-63 ASCII characters. # If you define the key in here, make sure that the file is not readable # by anyone but root. Alternatively you can use a separate file for the # key; see original hostapd.conf for more information. wpa_passphrase = testKEYS # Key management algorithm. In this case, a simple pre-shared key (PSK) wpa_key_mgmt = WPA-PSK # The cipher suite to use. We want to use stronger CCMP cipher. wpa_pairwise = CCMP # Change the broadcasted/multicasted keys after this many seconds. wpa_group_rekey = 600 # Change the master key after this many seconds. Master key is used as a basis # (source) for the encryption keys. wpa_gmk_rekey = 86400 # Send empty SSID in beacons and ignore probe request frames that do not # specify full SSID, i.e., require stations to know SSID. # default: disabled (0) # 1 = send empty (length=0) SSID in beacon and ignore probe request for # broadcast SSID # 2 = clear SSID (ASCII 0), but keep the original length (this may be required # with some clients that do not support empty SSID) and ignore probe # requests for broadcast SSID ignore_broadcast_ssid = 0 When the Wi-Fi configuration for the Station mode is submitted, Kura generates the /etc/wpa_supplicant.conf file and launches the wpa_supplicant program as shown below. wpa_supplicant:B:D nl80211:i wlan0:c /etc/wpa_supplicant.conf # /etc/wpa_supplicant.conf # allow frontend (e.g., wpa_cli) to be used by all users in 'wheel' group ctrl_interface = /var/run/wpa_supplicant ctrl_interface_group = wheel # home network; allow all valid ciphers network ={ mode = 0 ssid = \"Eurotech-INC\" scan_ssid = 1 key_mgmt = WPA-PSK psk = \"WG4t3101\" proto = RSN pairwise = CCMP TKIP group = CCMP TKIP scan_freq = 2412 bgscan = \"\" }","title":"Wi-Fi Linux Configuration"},{"location":"getting-started/docker-quick-start/","text":"Docker Quick Start Installation Eclipse Kura is also available as a Docker container available in Docker Hub . To download and run, use the following command: docker run -d -p 443:443 -t eclipse/kura This command will start Kura in background and the Kura Web Ui will be available through port 443. Once the image is started you can navigate your browser to https://localhost and log in using the credentials admin : admin . Command Toolbox Following, a set of useful Docker command that can be used to list and manage Docker containers. For more details on Docker commands, please reference the official Docker documentation List Docker Images To list all the installed Docker images run: docker images List Running Docker Containers To list all the available instances (both running and powered off) run: docker ps -a Start/Stop a Docker Container docker stop <container id> docker start <container id> where <container id> is the instance identification number.","title":"Docker Quick Start"},{"location":"getting-started/docker-quick-start/#docker-quick-start","text":"","title":"Docker Quick Start"},{"location":"getting-started/docker-quick-start/#installation","text":"Eclipse Kura is also available as a Docker container available in Docker Hub . To download and run, use the following command: docker run -d -p 443:443 -t eclipse/kura This command will start Kura in background and the Kura Web Ui will be available through port 443. Once the image is started you can navigate your browser to https://localhost and log in using the credentials admin : admin .","title":"Installation"},{"location":"getting-started/docker-quick-start/#command-toolbox","text":"Following, a set of useful Docker command that can be used to list and manage Docker containers. For more details on Docker commands, please reference the official Docker documentation","title":"Command Toolbox"},{"location":"getting-started/docker-quick-start/#list-docker-images","text":"To list all the installed Docker images run: docker images","title":"List Docker Images"},{"location":"getting-started/docker-quick-start/#list-running-docker-containers","text":"To list all the available instances (both running and powered off) run: docker ps -a","title":"List Running Docker Containers"},{"location":"getting-started/docker-quick-start/#startstop-a-docker-container","text":"docker stop <container id> docker start <container id> where <container id> is the instance identification number.","title":"Start/Stop a Docker Container"},{"location":"getting-started/install-kura/","text":"Install Kura Kura is provided using a DEB Linux package. Visit the Kura download page to find the correct installation file for the target system. Installer types Several installers can be found on such page, and they fall into one of the following categories: specific device profiles, like `kura_5.5.0_nvidia-jetson-nano_installer.deb`` (identified with the device name in the downloads page); generic profiles, like kura-5.5.0_generic-arm32_installer.deb ; and profiles with suffix nn , like kura_5.5.0_nvidia-jetson-nano-nn_installer.deb Profiles of types (1) and (2) ship a Kura version with networking functionalities. In particular, the installers of kind (1) use Kura Networking for leveraging network interface configurations and are made for a specific device. Installers of type (2) can be installed on targets with NetworkManager ; a commonly available tool for managing Linux networking. Kura leverages this tool for networking functionalities. Refer to the Generic installers section for further information. Installers of type (3) with the suffix nn are No Networking profiles that do not bundle the Kura Network Manager: all the network configurations need to be done outside of Kura. Functionalities missing in NN profiles compared to the full Kura profiles: Networking interfaces management Firewall configuration management Network Threat management Generic installers Kura can be installed using the generic profiles : kura-<kura-version>_generic-<arch>_installer.deb/rpm where <arch> is one of the supported architectures : x86_64 , arm32 , and arm64 . A generic Kura profile can work on systems that have available the dependencies listed in the Kura dependencies section, and that have at least one physical ethernet interface. Java Heap Memory Assignment Eclipse Kura's Generic profile incorporates an adaptive Heap Memory allocation system during installation. The allocation follows a formula based on your gateway's available memory. If your gateway has less than 1024MB of RAM, Kura will set -Xms and -Xmx to 256MB. For gateways with more than 1024MB, one quarter of the total RAM will be assigned to -Xms and -Xmx. Initial network configuration During the installation of a generic profile with network management support, the initial network configuration will be generated dynamically using the rules described below: The existing wired and wireless Ethernet network interface names are sorted in ascending lexicographic order. The first wired Ethernet interface in the list will be configured as follows: Status : Enabled for WAN Configure : Using DHCP The first wireless LAN interface will be configured as follows: Status : Enabled for LAN Configure : Manually IP address : 172.16.1.1 Passphrase : testKEYS DHCP & NAT : enabled All other network interfaces will be disabled. For example, if the system contains the following interfaces: wlp2s0 , wlp3s0 , enp3s0 , eno1 , ens2 ; then eno1 will be enabled for WAN in DHCP client mode, wlp2s0 will be configured as an AP, and all other network interfaces will be disabled. Warning On systems that do not use systemd's predictable interface naming scheme (see Freedesktop reference ) the primary network interface name might change whenever a re-enumeration is triggered (for example, after a reboot or after plugging in an external network adapter). The advice is to install Kura on systems that use a reliable naming convention for network interfaces. Systemd consistent network interface naming assigns the name prefix based on the physical location of the device, see Understanding the Predictable Network Interface Device Names for further reference. Initial firewall configuration The initial firewall configuration will be as shown in the screenshot below. Please note that installing a Kura generic profile with network configuration support will replace the current network and firewall configuration with the one shown above. Other Kura services Kura generic profiles do not contain gateway specific customizations, this implies that the values of some configuration parameters may be incorrect and/or missing and must be manually filled after installation. For example the user might want to: Configure the other network interfaces, if any. Setup additional firewall rules. Edit the /opt/eclipse/kura/framework/jdk.dio.properties with the correct GPIO mappings. By default this file is empty. Kura dependencies To have all the Kura features working, the following dependencies are required: General: setserial , zip , gzip , unzip , procps , usbutils , socat , gawk , sed , inetutils-telnet . Security: polkit or policykit-1 , ssh or openssh , openssl , busybox , openvpn . Bluetooth: bluez or bluez5 , bluez-hcidump or bluez5-noinst-tools . Time: ntpdate , chrony , chronyc , cron or cronie . Networking: network-manager or networkmanager , bind9 or bind , dnsmasq or isc-dhcp-server or ( dhcp-server and dhcp-client ), iw , iptables , modemmanager , hostapd , wpa-supplicant , ppp , iproute2 . Logs: logrotate . Gps: gpsd . Python: python3 . Java: openjdk-17-jre-headless or temurin-17-jdk or openjdk-8-jre-headless or temurin-8-jdk . Others: dos2unix Supported devices Kura generic has been tested on the following devices and provides full configuration of all the available interfaces and GPIO mappings. Device Architecture OS Raspberry Pi 3/4 arm32 Raspbian \"Bookworm\" Raspberry Pi 3/4 arm64 Ubuntu 20.04 Intel Up\u00b2 x86_64 Ubuntu 20.04 NVIDIA Jetson Nano\u2122 arm64 Ubuntu 20.04 Check out the quick start guides for the detailed installation steps and set-up procedures: Raspberry Pi - Raspberry Pi OS Quick Start Raspberry Pi - Ubuntu 20 Quick Start Docker Quick Start Intel Up\u00b2 Quick Start NVIDIA Jetson Nano\u2122","title":"Install Kura"},{"location":"getting-started/install-kura/#install-kura","text":"Kura is provided using a DEB Linux package. Visit the Kura download page to find the correct installation file for the target system.","title":"Install Kura"},{"location":"getting-started/install-kura/#installer-types","text":"Several installers can be found on such page, and they fall into one of the following categories: specific device profiles, like `kura_5.5.0_nvidia-jetson-nano_installer.deb`` (identified with the device name in the downloads page); generic profiles, like kura-5.5.0_generic-arm32_installer.deb ; and profiles with suffix nn , like kura_5.5.0_nvidia-jetson-nano-nn_installer.deb Profiles of types (1) and (2) ship a Kura version with networking functionalities. In particular, the installers of kind (1) use Kura Networking for leveraging network interface configurations and are made for a specific device. Installers of type (2) can be installed on targets with NetworkManager ; a commonly available tool for managing Linux networking. Kura leverages this tool for networking functionalities. Refer to the Generic installers section for further information. Installers of type (3) with the suffix nn are No Networking profiles that do not bundle the Kura Network Manager: all the network configurations need to be done outside of Kura. Functionalities missing in NN profiles compared to the full Kura profiles: Networking interfaces management Firewall configuration management Network Threat management","title":"Installer types"},{"location":"getting-started/install-kura/#generic-installers","text":"Kura can be installed using the generic profiles : kura-<kura-version>_generic-<arch>_installer.deb/rpm where <arch> is one of the supported architectures : x86_64 , arm32 , and arm64 . A generic Kura profile can work on systems that have available the dependencies listed in the Kura dependencies section, and that have at least one physical ethernet interface.","title":"Generic installers"},{"location":"getting-started/install-kura/#java-heap-memory-assignment","text":"Eclipse Kura's Generic profile incorporates an adaptive Heap Memory allocation system during installation. The allocation follows a formula based on your gateway's available memory. If your gateway has less than 1024MB of RAM, Kura will set -Xms and -Xmx to 256MB. For gateways with more than 1024MB, one quarter of the total RAM will be assigned to -Xms and -Xmx.","title":"Java Heap Memory Assignment"},{"location":"getting-started/install-kura/#initial-network-configuration","text":"During the installation of a generic profile with network management support, the initial network configuration will be generated dynamically using the rules described below: The existing wired and wireless Ethernet network interface names are sorted in ascending lexicographic order. The first wired Ethernet interface in the list will be configured as follows: Status : Enabled for WAN Configure : Using DHCP The first wireless LAN interface will be configured as follows: Status : Enabled for LAN Configure : Manually IP address : 172.16.1.1 Passphrase : testKEYS DHCP & NAT : enabled All other network interfaces will be disabled. For example, if the system contains the following interfaces: wlp2s0 , wlp3s0 , enp3s0 , eno1 , ens2 ; then eno1 will be enabled for WAN in DHCP client mode, wlp2s0 will be configured as an AP, and all other network interfaces will be disabled. Warning On systems that do not use systemd's predictable interface naming scheme (see Freedesktop reference ) the primary network interface name might change whenever a re-enumeration is triggered (for example, after a reboot or after plugging in an external network adapter). The advice is to install Kura on systems that use a reliable naming convention for network interfaces. Systemd consistent network interface naming assigns the name prefix based on the physical location of the device, see Understanding the Predictable Network Interface Device Names for further reference.","title":"Initial network configuration"},{"location":"getting-started/install-kura/#initial-firewall-configuration","text":"The initial firewall configuration will be as shown in the screenshot below. Please note that installing a Kura generic profile with network configuration support will replace the current network and firewall configuration with the one shown above.","title":"Initial firewall configuration"},{"location":"getting-started/install-kura/#other-kura-services","text":"Kura generic profiles do not contain gateway specific customizations, this implies that the values of some configuration parameters may be incorrect and/or missing and must be manually filled after installation. For example the user might want to: Configure the other network interfaces, if any. Setup additional firewall rules. Edit the /opt/eclipse/kura/framework/jdk.dio.properties with the correct GPIO mappings. By default this file is empty.","title":"Other Kura services"},{"location":"getting-started/install-kura/#kura-dependencies","text":"To have all the Kura features working, the following dependencies are required: General: setserial , zip , gzip , unzip , procps , usbutils , socat , gawk , sed , inetutils-telnet . Security: polkit or policykit-1 , ssh or openssh , openssl , busybox , openvpn . Bluetooth: bluez or bluez5 , bluez-hcidump or bluez5-noinst-tools . Time: ntpdate , chrony , chronyc , cron or cronie . Networking: network-manager or networkmanager , bind9 or bind , dnsmasq or isc-dhcp-server or ( dhcp-server and dhcp-client ), iw , iptables , modemmanager , hostapd , wpa-supplicant , ppp , iproute2 . Logs: logrotate . Gps: gpsd . Python: python3 . Java: openjdk-17-jre-headless or temurin-17-jdk or openjdk-8-jre-headless or temurin-8-jdk . Others: dos2unix","title":"Kura dependencies"},{"location":"getting-started/install-kura/#supported-devices","text":"Kura generic has been tested on the following devices and provides full configuration of all the available interfaces and GPIO mappings. Device Architecture OS Raspberry Pi 3/4 arm32 Raspbian \"Bookworm\" Raspberry Pi 3/4 arm64 Ubuntu 20.04 Intel Up\u00b2 x86_64 Ubuntu 20.04 NVIDIA Jetson Nano\u2122 arm64 Ubuntu 20.04 Check out the quick start guides for the detailed installation steps and set-up procedures: Raspberry Pi - Raspberry Pi OS Quick Start Raspberry Pi - Ubuntu 20 Quick Start Docker Quick Start Intel Up\u00b2 Quick Start NVIDIA Jetson Nano\u2122","title":"Supported devices"},{"location":"getting-started/intel-up-2-quick-start/","text":"Intel Up\u00b2 Quick Start Overview This section provides Eclipse Kura\u2122 quick installation procedures for the Intel Up\u00b2 and the Kura development environment. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Ubuntu 20.04.3 LTS Live Server for amd64 architecture flashed on the SD card with balenaEtcher . A complete guide on how to install Ubuntu on the Intel Up\u00b2 can be found here . It is important, in order to access the HAT, Bluetooth, Wifi functionality, to follow the relative steps provided in the complete guide. Make sure to assign the right execute permissions to kurad user created by the installer as described here . Note It is highly recommended to install the custom Intel kernel provided in the guide. Eclipse Kura\u2122 Installation To install Kura with its dependencies on the Intel Up\u00b2, perform the following steps: Boot the Intel Up\u00b2 with the Ubuntu Image 20.04.3. Make sure your device is connected to internet. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura_<version>_intel-up2-ubuntu-20_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.2.0). Install Kura with: apt-get install./ kura_<version>_intel-up2-ubuntu-20_installer.deb Set the right Wi-Fi regulatory domain based on your current world region editing the /etc/default/crda and adding the ISO 3166-1 alpha-2 code of your region. Reboot the Intel Up\u00b2 with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with an untrusted certificate: Once trusted the source, the user will be redirected to a login page where the default username is: admin and the default password is: admin","title":"Intel Up\u00b2 Quick Start"},{"location":"getting-started/intel-up-2-quick-start/#intel-up2-quick-start","text":"","title":"Intel Up\u00b2 Quick Start"},{"location":"getting-started/intel-up-2-quick-start/#overview","text":"This section provides Eclipse Kura\u2122 quick installation procedures for the Intel Up\u00b2 and the Kura development environment. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Ubuntu 20.04.3 LTS Live Server for amd64 architecture flashed on the SD card with balenaEtcher . A complete guide on how to install Ubuntu on the Intel Up\u00b2 can be found here . It is important, in order to access the HAT, Bluetooth, Wifi functionality, to follow the relative steps provided in the complete guide. Make sure to assign the right execute permissions to kurad user created by the installer as described here . Note It is highly recommended to install the custom Intel kernel provided in the guide.","title":"Overview"},{"location":"getting-started/intel-up-2-quick-start/#eclipse-kura-installation","text":"To install Kura with its dependencies on the Intel Up\u00b2, perform the following steps: Boot the Intel Up\u00b2 with the Ubuntu Image 20.04.3. Make sure your device is connected to internet. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura_<version>_intel-up2-ubuntu-20_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.2.0). Install Kura with: apt-get install./ kura_<version>_intel-up2-ubuntu-20_installer.deb Set the right Wi-Fi regulatory domain based on your current world region editing the /etc/default/crda and adding the ISO 3166-1 alpha-2 code of your region. Reboot the Intel Up\u00b2 with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with an untrusted certificate: Once trusted the source, the user will be redirected to a login page where the default username is: admin and the default password is: admin","title":"Eclipse Kura&trade; Installation"},{"location":"getting-started/nvidia-jetson-nano-quick-start/","text":"NVIDIA Jetson Nano\u2122 - Quick Start Overview This section provides Eclipse Kura\u2122 quick installation procedures for the NVIDIA Jetson Nano\u2122. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Ubuntu 18.04 LTS image provided by NVIDIA here and burned on a SD card with Etcher . The official images can be found on the Jetson Nano Developer Kit Getting Starteg Guide . Further information on the Ubuntu installation for the NVIDIA Jetson Nano\u2122 can be found here . Eclipse Kura\u2122 Installation To install Eclipse Kura with its dependencies on the NVIDIA Jetson Nano\u2122, perform the following steps: Boot the NVIDIA Jetson Nano\u2122 with the latest Jetson Nano Developer Kit SD Card image. Make sure your device is connected to internet. By default, eth0 lan network interface is configured in DHCP mode. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura_<version>_nvidia-jetson-nano_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.2.0). Install Kura with: sudo apt install ./kura_<version>_nvidia-jetson-nano_installer.deb All the required dependencies will be downloaded and installed. Reboot the NVIDIA Jetson Nano\u2122 with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with an untrusted certificate: Once trusted the source, the user will be redirected to a login page where the following credentianls: username : admin password : admin","title":"NVIDIA Jetson Nano&trade; - Quick Start"},{"location":"getting-started/nvidia-jetson-nano-quick-start/#nvidia-jetson-nano-quick-start","text":"","title":"NVIDIA Jetson Nano&trade; - Quick Start"},{"location":"getting-started/nvidia-jetson-nano-quick-start/#overview","text":"This section provides Eclipse Kura\u2122 quick installation procedures for the NVIDIA Jetson Nano\u2122. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Ubuntu 18.04 LTS image provided by NVIDIA here and burned on a SD card with Etcher . The official images can be found on the Jetson Nano Developer Kit Getting Starteg Guide . Further information on the Ubuntu installation for the NVIDIA Jetson Nano\u2122 can be found here .","title":"Overview"},{"location":"getting-started/nvidia-jetson-nano-quick-start/#eclipse-kura-installation","text":"To install Eclipse Kura with its dependencies on the NVIDIA Jetson Nano\u2122, perform the following steps: Boot the NVIDIA Jetson Nano\u2122 with the latest Jetson Nano Developer Kit SD Card image. Make sure your device is connected to internet. By default, eth0 lan network interface is configured in DHCP mode. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura_<version>_nvidia-jetson-nano_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.2.0). Install Kura with: sudo apt install ./kura_<version>_nvidia-jetson-nano_installer.deb All the required dependencies will be downloaded and installed. Reboot the NVIDIA Jetson Nano\u2122 with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with an untrusted certificate: Once trusted the source, the user will be redirected to a login page where the following credentianls: username : admin password : admin","title":"Eclipse Kura&trade; Installation"},{"location":"getting-started/raspberry-pi-raspberryos-quick-start/","text":"Raspberry Pi - Raspberry Pi OS Quick Start Overview This section provides Eclipse Kura\u2122 quick installation procedures for the Raspberry Pi and the Kura development environment. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Raspberry Pi OS 32 and 64 bits images which are available for download through the official Raspberry Pi foundation site and the Raspberry Pi Imager. Warning Recent versions of Raspberry Pi OS 32 bit on Raspberry PI 4 will use by default a 64 bit kernel with a 32 bit userspace. This can cause issues to applications that use the result of uname -m to decide which native libraries to load (see https://github.com/raspberrypi/firmware/issues/1795). This currently affects for example the Kura SQLite database connector. It should be possible to solve by switching to the 32 bit kernel setting arm_64bit=0 in /boot/config.txt and restarting the device. For additional details on OS compatibility refer to the Kura\u2122 release notes . Enable SSH Access The ssh server is disabled by default on Raspbian images released after November 2016, in order to enable it follow the instructions available here . If you're using the Raspberry Pi Imager you can directly enable SSH before writing the operating system into the SD card by clicking on the \"setting\" icon. Eclipse Kura\u2122 Installation To install Eclipse Kura with its dependencies on the Raspberry Pi, perform the following steps: Boot the Raspberry Pi with the latest Raspbian image (starting from release 5.1.0 Kura is tested with Raspbian 11). Make sure your device is connected to the internet. The best installation experience can be obtained when the device is cabled to the local network and the Internet. By default, the Raspberry Pi OS configures the ethernet interface eth0 in DHCP mode. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura-<kura-version>_generic-<arch>_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.5.0) and <arch> with your device architecture Install Kura with: sudo apt-get install ./kura-<kura-version>_generic-<arch>_installer.deb For a correct configuration of the Wlan interface, it is necessary to set the Locale and the WLAN Country through the raspi-config command: sudo raspi-config From the raspi-config main menu select Localisation Options : Then modify the Locale and WLAN Country with with the proper settings for your location. For example, an user located in Italy could set the values as the ones in the table: Setting Value L1 Locale it_IT.UTF-8 UTF-8 L4 WLAN Country IT Italy (Optional) Configure the GPIO replacing the content of the file /opt/eclise/kura/framework/jdk.dio.properties with the following text: 0 = deviceType: gpio.GPIOPin, pinNumber:0, name:GPIO0 1 = deviceType: gpio.GPIOPin, pinNumber:1, name:GPIO1 2 = deviceType: gpio.GPIOPin, pinNumber:2, name:GPI02 3 = deviceType: gpio.GPIOPin, pinNumber:3, name:GPIO3 4 = deviceType: gpio.GPIOPin, pinNumber:4, name:GPIO4 5 = deviceType: gpio.GPIOPin, pinNumber:5, name:GPIO5 6 = deviceType: gpio.GPIOPin, pinNumber:6, name:GPIO6 7 = deviceType: gpio.GPIOPin, pinNumber:7, name:GPIO7 8 = deviceType: gpio.GPIOPin, pinNumber:8, name:GPIO8 9 = deviceType: gpio.GPIOPin, pinNumber:9, name:GPIO9 10 = deviceType: gpio.GPIOPin, pinNumber:10, name:GPIO10 11 = deviceType: gpio.GPIOPin, pinNumber:11, name:GPIO11 12 = deviceType: gpio.GPIOPin, pinNumber:12, name:GPIO12 13 = deviceType: gpio.GPIOPin, pinNumber:13, name:GPIO13 14 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO14 15 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO15 16 = deviceType: gpio.GPIOPin, pinNumber:16, name:GPIO16 17 = deviceType: gpio.GPIOPin, pinNumber:17, name:GPIO17 18 = deviceType: gpio.GPIOPin, pinNumber:18, name:GPIO18 19 = deviceType: gpio.GPIOPin, pinNumber:19, name:GPIO19 20 = deviceType: gpio.GPIOPin, pinNumber:20, name:GPIO20 21 = deviceType: gpio.GPIOPin, pinNumber:21, name:GPIO21 22 = deviceType: gpio.GPIOPin, pinNumber:22, name:GPIO22 23 = deviceType: gpio.GPIOPin, pinNumber:23, name:GPIO23 24 = deviceType: gpio.GPIOPin, pinNumber:24, name:GPIO24 25 = deviceType: gpio.GPIOPin, pinNumber:25, name:GPIO25 26 = deviceType: gpio.GPIOPin, pinNumber:26, name:GPIO26 27 = deviceType: gpio.GPIOPin, pinNumber:27, name:GPIO27 gpio.GPIOPin = initValue:0, deviceNumber:0, direction:3, mode:-1, trigger:3 uart.UART = baudRate:19200, parity:0, dataBits:8, stopBits:1, flowControl:0 You can check your GPIO device configuration executing the command pinout Reboot the Raspberry Pi with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with an untrusted certificate: Once trusted the source, the user will be redirected to a login page where the following credentianls: username : admin password : admin","title":"Raspberry Pi - Raspberry Pi OS Quick Start"},{"location":"getting-started/raspberry-pi-raspberryos-quick-start/#raspberry-pi-raspberry-pi-os-quick-start","text":"","title":"Raspberry Pi - Raspberry Pi OS Quick Start"},{"location":"getting-started/raspberry-pi-raspberryos-quick-start/#overview","text":"This section provides Eclipse Kura\u2122 quick installation procedures for the Raspberry Pi and the Kura development environment. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Raspberry Pi OS 32 and 64 bits images which are available for download through the official Raspberry Pi foundation site and the Raspberry Pi Imager. Warning Recent versions of Raspberry Pi OS 32 bit on Raspberry PI 4 will use by default a 64 bit kernel with a 32 bit userspace. This can cause issues to applications that use the result of uname -m to decide which native libraries to load (see https://github.com/raspberrypi/firmware/issues/1795). This currently affects for example the Kura SQLite database connector. It should be possible to solve by switching to the 32 bit kernel setting arm_64bit=0 in /boot/config.txt and restarting the device. For additional details on OS compatibility refer to the Kura\u2122 release notes .","title":"Overview"},{"location":"getting-started/raspberry-pi-raspberryos-quick-start/#enable-ssh-access","text":"The ssh server is disabled by default on Raspbian images released after November 2016, in order to enable it follow the instructions available here . If you're using the Raspberry Pi Imager you can directly enable SSH before writing the operating system into the SD card by clicking on the \"setting\" icon.","title":"Enable SSH Access"},{"location":"getting-started/raspberry-pi-raspberryos-quick-start/#eclipse-kura-installation","text":"To install Eclipse Kura with its dependencies on the Raspberry Pi, perform the following steps: Boot the Raspberry Pi with the latest Raspbian image (starting from release 5.1.0 Kura is tested with Raspbian 11). Make sure your device is connected to the internet. The best installation experience can be obtained when the device is cabled to the local network and the Internet. By default, the Raspberry Pi OS configures the ethernet interface eth0 in DHCP mode. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura-<kura-version>_generic-<arch>_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.5.0) and <arch> with your device architecture Install Kura with: sudo apt-get install ./kura-<kura-version>_generic-<arch>_installer.deb For a correct configuration of the Wlan interface, it is necessary to set the Locale and the WLAN Country through the raspi-config command: sudo raspi-config From the raspi-config main menu select Localisation Options : Then modify the Locale and WLAN Country with with the proper settings for your location. For example, an user located in Italy could set the values as the ones in the table: Setting Value L1 Locale it_IT.UTF-8 UTF-8 L4 WLAN Country IT Italy (Optional) Configure the GPIO replacing the content of the file /opt/eclise/kura/framework/jdk.dio.properties with the following text: 0 = deviceType: gpio.GPIOPin, pinNumber:0, name:GPIO0 1 = deviceType: gpio.GPIOPin, pinNumber:1, name:GPIO1 2 = deviceType: gpio.GPIOPin, pinNumber:2, name:GPI02 3 = deviceType: gpio.GPIOPin, pinNumber:3, name:GPIO3 4 = deviceType: gpio.GPIOPin, pinNumber:4, name:GPIO4 5 = deviceType: gpio.GPIOPin, pinNumber:5, name:GPIO5 6 = deviceType: gpio.GPIOPin, pinNumber:6, name:GPIO6 7 = deviceType: gpio.GPIOPin, pinNumber:7, name:GPIO7 8 = deviceType: gpio.GPIOPin, pinNumber:8, name:GPIO8 9 = deviceType: gpio.GPIOPin, pinNumber:9, name:GPIO9 10 = deviceType: gpio.GPIOPin, pinNumber:10, name:GPIO10 11 = deviceType: gpio.GPIOPin, pinNumber:11, name:GPIO11 12 = deviceType: gpio.GPIOPin, pinNumber:12, name:GPIO12 13 = deviceType: gpio.GPIOPin, pinNumber:13, name:GPIO13 14 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO14 15 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO15 16 = deviceType: gpio.GPIOPin, pinNumber:16, name:GPIO16 17 = deviceType: gpio.GPIOPin, pinNumber:17, name:GPIO17 18 = deviceType: gpio.GPIOPin, pinNumber:18, name:GPIO18 19 = deviceType: gpio.GPIOPin, pinNumber:19, name:GPIO19 20 = deviceType: gpio.GPIOPin, pinNumber:20, name:GPIO20 21 = deviceType: gpio.GPIOPin, pinNumber:21, name:GPIO21 22 = deviceType: gpio.GPIOPin, pinNumber:22, name:GPIO22 23 = deviceType: gpio.GPIOPin, pinNumber:23, name:GPIO23 24 = deviceType: gpio.GPIOPin, pinNumber:24, name:GPIO24 25 = deviceType: gpio.GPIOPin, pinNumber:25, name:GPIO25 26 = deviceType: gpio.GPIOPin, pinNumber:26, name:GPIO26 27 = deviceType: gpio.GPIOPin, pinNumber:27, name:GPIO27 gpio.GPIOPin = initValue:0, deviceNumber:0, direction:3, mode:-1, trigger:3 uart.UART = baudRate:19200, parity:0, dataBits:8, stopBits:1, flowControl:0 You can check your GPIO device configuration executing the command pinout Reboot the Raspberry Pi with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with an untrusted certificate: Once trusted the source, the user will be redirected to a login page where the following credentianls: username : admin password : admin","title":"Eclipse Kura&trade; Installation"},{"location":"getting-started/raspberry-pi-ubuntu-20-quick-start/","text":"Raspberry Pi - Ubuntu 20 Quick Start Overview This section provides Eclipse Kura\u2122 quick installation procedures for the Raspberry Pi. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Ubuntu 20.04.3 LTS Live Server for arm64 architecture flashed on the SD card through Raspberry Pi Imager . The official images can be also found on the Project Page . Further information on the Ubuntu installation for Raspberry Pi can be found here . Warning Please note that, at the time of this writing, only 64 bit OS image is supported. Enable SSH Access On Ubuntu 20.04.3 the ssh access is enabled only for the standard ubuntu user. If you desire to remote login as root user, edit the file /etc/ssh/sshd_config (using the root permission) adding the line PermitRootLogin yes Eclipse Kura\u2122 Installation To install Eclipse Kura with its dependencies on the Raspberry Pi, perform the following steps: Boot the Raspberry Pi with the latest Ubuntu 20.04.3 LTS Server image. Make sure your device is connected to internet. By default, eth0 lan network interface is configured in DHCP mode. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura-<kura-version>_generic-<arch>_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.5.0) and <arch> with your device architecture Install Kura with: sudo apt install ./kura-<kura-version>_generic-<arch>_installer.deb All the required dependencies will be downloaded and installed. Set the right Wi-Fi regulatory domain based on your current world region editing the /etc/default/crda and adding the ISO 3166-1 alpha-2 code of your region. (Optional) Configure the GPIO replacing the content of the file /opt/eclise/kura/framework/jdk.dio.properties with the following text: 0 = deviceType: gpio.GPIOPin, pinNumber:0, name:GPIO0 1 = deviceType: gpio.GPIOPin, pinNumber:1, name:GPIO1 2 = deviceType: gpio.GPIOPin, pinNumber:2, name:GPI02 3 = deviceType: gpio.GPIOPin, pinNumber:3, name:GPIO3 4 = deviceType: gpio.GPIOPin, pinNumber:4, name:GPIO4 5 = deviceType: gpio.GPIOPin, pinNumber:5, name:GPIO5 6 = deviceType: gpio.GPIOPin, pinNumber:6, name:GPIO6 7 = deviceType: gpio.GPIOPin, pinNumber:7, name:GPIO7 8 = deviceType: gpio.GPIOPin, pinNumber:8, name:GPIO8 9 = deviceType: gpio.GPIOPin, pinNumber:9, name:GPIO9 10 = deviceType: gpio.GPIOPin, pinNumber:10, name:GPIO10 11 = deviceType: gpio.GPIOPin, pinNumber:11, name:GPIO11 12 = deviceType: gpio.GPIOPin, pinNumber:12, name:GPIO12 13 = deviceType: gpio.GPIOPin, pinNumber:13, name:GPIO13 14 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO14 15 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO15 16 = deviceType: gpio.GPIOPin, pinNumber:16, name:GPIO16 17 = deviceType: gpio.GPIOPin, pinNumber:17, name:GPIO17 18 = deviceType: gpio.GPIOPin, pinNumber:18, name:GPIO18 19 = deviceType: gpio.GPIOPin, pinNumber:19, name:GPIO19 20 = deviceType: gpio.GPIOPin, pinNumber:20, name:GPIO20 21 = deviceType: gpio.GPIOPin, pinNumber:21, name:GPIO21 22 = deviceType: gpio.GPIOPin, pinNumber:22, name:GPIO22 23 = deviceType: gpio.GPIOPin, pinNumber:23, name:GPIO23 24 = deviceType: gpio.GPIOPin, pinNumber:24, name:GPIO24 25 = deviceType: gpio.GPIOPin, pinNumber:25, name:GPIO25 26 = deviceType: gpio.GPIOPin, pinNumber:26, name:GPIO26 27 = deviceType: gpio.GPIOPin, pinNumber:27, name:GPIO27 gpio.GPIOPin = initValue:0, deviceNumber:0, direction:3, mode:-1, trigger:3 uart.UART = baudRate:19200, parity:0, dataBits:8, stopBits:1, flowControl:0 Reboot the Raspberry Pi with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with a self signed certificate, select Accept the risk and continue : Once trusted the source, the user will be redirected to a login page where the following credentianls: username : admin password : admin","title":"Raspberry Pi - Ubuntu 20 Quick Start"},{"location":"getting-started/raspberry-pi-ubuntu-20-quick-start/#raspberry-pi-ubuntu-20-quick-start","text":"","title":"Raspberry Pi - Ubuntu 20 Quick Start"},{"location":"getting-started/raspberry-pi-ubuntu-20-quick-start/#overview","text":"This section provides Eclipse Kura\u2122 quick installation procedures for the Raspberry Pi. Warning This quickstart will install the version of Kura with the administrative web UI and network configuration support but not CAN bus support. For more information on this please visit the Eclipse Kura download page This quickstart has been tested using the latest Ubuntu 20.04.3 LTS Live Server for arm64 architecture flashed on the SD card through Raspberry Pi Imager . The official images can be also found on the Project Page . Further information on the Ubuntu installation for Raspberry Pi can be found here . Warning Please note that, at the time of this writing, only 64 bit OS image is supported.","title":"Overview"},{"location":"getting-started/raspberry-pi-ubuntu-20-quick-start/#enable-ssh-access","text":"On Ubuntu 20.04.3 the ssh access is enabled only for the standard ubuntu user. If you desire to remote login as root user, edit the file /etc/ssh/sshd_config (using the root permission) adding the line PermitRootLogin yes","title":"Enable SSH Access"},{"location":"getting-started/raspberry-pi-ubuntu-20-quick-start/#eclipse-kura-installation","text":"To install Eclipse Kura with its dependencies on the Raspberry Pi, perform the following steps: Boot the Raspberry Pi with the latest Ubuntu 20.04.3 LTS Server image. Make sure your device is connected to internet. By default, eth0 lan network interface is configured in DHCP mode. Upgrade the system: sudo apt update sudo apt upgrade Tip Optional : Since version 5.3.0 Kura also supports Eclipse Temurin\u2122 as an alternative JVM. To install it you need to perform these additional steps: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update sudo apt-get install temurin-17-jdk Download the Kura package with: wget http://download.eclipse.org/kura/releases/<version>/kura-<kura-version>_generic-<arch>_installer.deb Note: replace <version> in the URL above with the version number of the latest release (e.g. 5.5.0) and <arch> with your device architecture Install Kura with: sudo apt install ./kura-<kura-version>_generic-<arch>_installer.deb All the required dependencies will be downloaded and installed. Set the right Wi-Fi regulatory domain based on your current world region editing the /etc/default/crda and adding the ISO 3166-1 alpha-2 code of your region. (Optional) Configure the GPIO replacing the content of the file /opt/eclise/kura/framework/jdk.dio.properties with the following text: 0 = deviceType: gpio.GPIOPin, pinNumber:0, name:GPIO0 1 = deviceType: gpio.GPIOPin, pinNumber:1, name:GPIO1 2 = deviceType: gpio.GPIOPin, pinNumber:2, name:GPI02 3 = deviceType: gpio.GPIOPin, pinNumber:3, name:GPIO3 4 = deviceType: gpio.GPIOPin, pinNumber:4, name:GPIO4 5 = deviceType: gpio.GPIOPin, pinNumber:5, name:GPIO5 6 = deviceType: gpio.GPIOPin, pinNumber:6, name:GPIO6 7 = deviceType: gpio.GPIOPin, pinNumber:7, name:GPIO7 8 = deviceType: gpio.GPIOPin, pinNumber:8, name:GPIO8 9 = deviceType: gpio.GPIOPin, pinNumber:9, name:GPIO9 10 = deviceType: gpio.GPIOPin, pinNumber:10, name:GPIO10 11 = deviceType: gpio.GPIOPin, pinNumber:11, name:GPIO11 12 = deviceType: gpio.GPIOPin, pinNumber:12, name:GPIO12 13 = deviceType: gpio.GPIOPin, pinNumber:13, name:GPIO13 14 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO14 15 = deviceType: gpio.GPIOPin, pinNumber:14, name:GPIO15 16 = deviceType: gpio.GPIOPin, pinNumber:16, name:GPIO16 17 = deviceType: gpio.GPIOPin, pinNumber:17, name:GPIO17 18 = deviceType: gpio.GPIOPin, pinNumber:18, name:GPIO18 19 = deviceType: gpio.GPIOPin, pinNumber:19, name:GPIO19 20 = deviceType: gpio.GPIOPin, pinNumber:20, name:GPIO20 21 = deviceType: gpio.GPIOPin, pinNumber:21, name:GPIO21 22 = deviceType: gpio.GPIOPin, pinNumber:22, name:GPIO22 23 = deviceType: gpio.GPIOPin, pinNumber:23, name:GPIO23 24 = deviceType: gpio.GPIOPin, pinNumber:24, name:GPIO24 25 = deviceType: gpio.GPIOPin, pinNumber:25, name:GPIO25 26 = deviceType: gpio.GPIOPin, pinNumber:26, name:GPIO26 27 = deviceType: gpio.GPIOPin, pinNumber:27, name:GPIO27 gpio.GPIOPin = initValue:0, deviceNumber:0, direction:3, mode:-1, trigger:3 uart.UART = baudRate:19200, parity:0, dataBits:8, stopBits:1, flowControl:0 Reboot the Raspberry Pi with: sudo reboot Kura starts on the target platform after reboot. Kura setups a local web ui that is available using a browser via: https://<device-ip> The browser will prompt the user to accept the connection to an endpoint with a self signed certificate, select Accept the risk and continue : Once trusted the source, the user will be redirected to a login page where the following credentianls: username : admin password : admin","title":"Eclipse Kura&trade; Installation"},{"location":"java-application-development/configurable-application/","text":"Configurable Application Overview This section provides a simple example of how to create an OSGi bundle that implements the ConfigurableComponent interface in Kura. This bundle will interact with the Kura ConfigurationService via the ConfigurableComponent interface. It also uses the MQTT services in Kura to connect to the Cloud, which allows for a local configuration mechanism using a Web user-interface (UI). In this example, you will learn how to perform the following functions: Create a plugin project Implement the ConfigurableComponent interface Use the Kura web UI to modify the bundle\u2019s configuration Export a single OSGi bundle (plug-in) Prerequisites Requires Kura development environment set-up ( Setting up Kura Development Environment ) Implements the use of Kura web user-interface (UI) Configurable Component Example Create Plug-in In Eclipse, create a new Plug-in project by selecting File | New | Project . Select Plug-in Development | Plug-in Project and click Next . Your screen should display the New Plug-in Project dialog box as shown in the following screen capture. Enter your project a name, such as \u201corg.eclipse.kura.example.configurable\u201d. Under Target Platform, ensure that the an OSGi framework option button is selected and set to standard as shown below. You can also (optionally) add projects to a working set. To continue, click Next . In the next New Plug-in Project menu (shown below), change the Name field to something more descriptive, such as \u201cConfigurable Component Example.\u201d Make sure that the Execution Environment list is set to match the JVM version running on the target device ( JavaSE-1.6 or JavaSE-1.7 ). To determine the JVM version running on the target device, log in to its administrative console and enter the command java \u2013version Also, un check the Generate an activator, a Java class that controls the plug-in\u2019s life cycle option button. For the purposes of this example, a single class will be used. An Activator class will not be created; instead, OSGi Declarative Services will be used to start and stop the bundle. Finally, click Finish . You should see the new project in the Package Explorer (or Project Explorer) in Eclipse. Also, you will see the MANIFEST.MF was automatically opened in the Manifest Editor. An OSGi bundle is a regular Java .jar file that contains Java code and resources and a custom Manifest and an Activator. The manifest will be modified in the next section. Add Dependencies to Manifest First, you will use the Manifest Editor in Eclipse to add some dependencies. Click the Dependencies tab at the bottom of the editor screen and then click the Automated Management of Dependencies heading to expand it. Under Automated Management of Dependencies, click Add . In the Select a Plug-in field, enter org.eclipse.osgi.services . Select the plug-in name and click OK . Note that this operation is very much like adding standalone jars to the buildpath by including the \u2018-cp\u2019 argument to javac. However, in this case you are telling Eclipse where to find these dependencies the \u201cOSGi way\u201d, so it is aware of them at compile time. Click Add again and use the same procedure to add the following dependencies: slf4j.api org.eclipse.kura.api You should now see the list of dependencies. Save changes to the Manifest. Create Java Class Now you are ready to start writing a simple Java class. Right-click the org.eclipse.kura.example.configurable project. Select New | Class . Set the Package field to org.eclipse.kura.example.configurable , set the Name field to ConfigurableExample , and then click Finish . Write the following code for the new class. You can copy and paste the code provided below into your newly created Java class file. package org.eclipse.kura.example.configurable ; public class ConfigurableExample implements ConfigurableComponent { private static final Logger s_logger = LoggerFactory . getLogger ( ConfigurableExample . class ); private static final String APP_ID = \"org.eclipse.kura.example.configurable.ConfigurableExample\" ; private Map < String , Object > properties ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); } protected void activate ( ComponentContext componentContext , Map < String , Object > properties ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started with config!\" ); updated ( properties ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } public void updated ( Map < String , Object > properties ) { this . properties = properties ; if ( properties != null && ! properties . isEmpty ()) { Iterator < Entry < String , Object >> it = properties . entrySet (). iterator (); while ( it . hasNext ()) { Entry < String , Object > entry = it . next (); s_logger . info ( \"New property - \" + entry . getKey () + \" = \" + entry . getValue () + \" of type \" + entry . getValue (). getClass (). toString ()); } } } } The activate() method is the entry point when the bundle is started. Note this class has two forms of the activate() method. The second method (with the \u201cMap properties\u201d parameter) enables a default configuration to be specified at bundle start time. The deactivate() method is the entry point when the bundle is stopped. You have also specified an updated() method. These methods define how the bundle receives a new configuration from the Kura configuration manager. Kura handles robust configuration management routines automatically once you implement the ConfigurableComponent interface and the updated() method. Resolve Dependencies At this point, there will be errors in your code because of unresolved imports. Select the menu Source | Organize Imports to resolve these errors. Because you added dependencies to your dependency list in the Manifest, you will be prompted to choose one of the following two potential sources for importing a few classes. For the \u201cEntry\u201d class, select java.util.Map.Entry as shown below and click Next . For the \u201cLogger\u201d class, select org.slf4j.Logger as shown below and click Finish . Resolving the imports should clear the errors in the class as shown in the screen capture that follows. Save the changes to the ConfigurableExample class. The complete set of code (with import statements) is shown below. package org.eclipse.kura.example.configurable ; import java.util.Iterator ; import java.util.Map ; import java.util.Map.Entry ; import org.osgi.service.component.ComponentContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.eclipse.kura.configuration.ConfigurableComponent ; public class ConfigurableExample implements ConfigurableComponent { private static final Logger s_logger = LoggerFactory . getLogger ( ConfigurableExample . class ); private static final String APP_ID * = \"org.eclipse.kura.configurable.ConfigurableExample\" ; private Map < String , Object > properties ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); } protected void activate ( ComponentContext componentContext , Map < String , Object > properties ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started with config!\" ); updated ( properties ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } public void updated ( Map < String , Object > properties ) { this . properties = properties ; if ( properties != null && ! properties . isEmpty ()) { Iterator < Entry < String , Object >> it = properties . entrySet (). iterator (); while ( it . hasNext ()) { Entry < String , Object > entry = it . next (); s_logger . info ( \"New property - \" + entry . getKey () + \" = \" + entry . getValue () + \" of type \" + entry . getValue (). getClass (). toString ()); } } } } Switch back to the Manifest Editor. Under Automated Management of Dependencies , ensure the Import-Package option button is selected. Click the add dependencies link to automatically add packages to the dependencies list (under Imported Packages ) based on the \u201cimport\u201d statements in your example code. Save changes to the Manifest again. Create Component Class Right-click the example project and select New | Folder . Create a new folder named \u201cOSGI-INF\u201d. Now, right-click the example project\u2019s \u201cOSGI-INF\u201d folder and select New | Other . From the wizard, select Plug-in Development | Component Definition and click Next . Next to the Class field, click Browse and type the name of your newly created class in the Select entries field. In this case, type the word \u201cConfigurable\u201d, and you will see matching items. Select the ConfigurableExample class and click OK . In the Enter or select the parent folder field, make sure \u201c /OSGI-INF\u201d is at the end of the existing entry (e.g., org.eclipse.kura.example.configurable/OSGI-INF). Set the Name field equal to the Class field as shown below: Click Finish . After the Component class has been created, it will open in the Workspace. On the Services tab, click the Add button under Provided Services . Enter \u201cconfigurable\u201d and select the interface \u201corg.eclipse.kura.example.configurable\u201d. This is required for components that are configurable through the Kura ConfigurationService, so that they expose a Service. In the Overview tab, the Name and Class fields should already point to your Java class. Make the following settings: Set the Activate field to activate and set the Deactivate field to deactivate . This tells the component where these OSGi activation methods are located. Set the Configuration Policy to require . Set the Modified field to updated . This tells the component which method to call when the configuration is updated. Uncheck the box This component is enabled when started , then check both boxes This component is enabled when started and This component is immediately activated . Click the Add Property button. Enter a property with the name \u201cservice.pid\u201d and value \u201corg.eclipse.kura.example.configurable.ConfigurableExample\u201d as shown in the screen capture below. Verify that the completed Overview tab looks like the screen shot shown below and save the Component class definition file: Check the Source tab of the component.xml file and carefully verify that each of the property values and tags match what is shown below: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.example.configurable.ConfigurableExample\" > <implementation class= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> <service> <provide interface= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </service> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </scr:component> If Kura 3.0 or newer versions are used and the \"org.eclipse.kura.core.configuration.legacyServiceTracking\" system property is set to false or not set, proceed as follows. After the Component class has been created, it will open in the Workspace. On the Services tab, click the Add button under Provided Services . Enter \u201cconfigurable\u201d and select the interface \u201corg.eclipse.kura.configuration.ConfigurableComponent\u201d. This is required for components that are configurable through the Kura ConfigurationService, so that they expose a Service. In the Overview tab, the Name and Class fields should already point to your Java class. Make the following settings: Set the Activate field to activate and set the Deactivate field to deactivate . This tells the component where these OSGi activation methods are located. Set the Configuration Policy to require . Set the Modified field to updated . This tells the component which method to call when the configuration is updated. Uncheck the box This component is enabled when started , then check both boxes This component is enabled when started and This component is immediately activated . Click the Add Property button. Enter a property with the name \u201cservice.pid\u201d and value \u201corg.eclipse.kura.example.configurable.ConfigurableExample\u201d as shown in the screen capture below. Verify that the completed Overview tab looks like the screen shot shown below and save the Component class definition file: Check the Source tab of the component.xml file and carefully verify that each of the property values and tags match what is shown below: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.example.configurable.ConfigurableExample\" > <implementation class= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </scr:component> Create the Default Configuration With the component definition file created, you also need to specify the configurable parameters of this bundle. This is done using the \u201cmetatype\u201d definition. Right-click the OSGI-INF directory for the example project in the Package Explorer window and select New | Folder. Name the folder \u201cmetatype\u201d. Next, right-click the metatype folder and select New | File . Name the file \u201corg.eclipse.kura.example.configurable.ConfigurableExample.xml\u201d as shown in the following screen capture: At this point, you have to write the \u2018metatype\u2019 file that defines the parameters, default values, types, etc. Click on the Source button and paste the following XML text into ConfigurableExample.xml for this example. Save changes to ConfigurableExample.xml. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <MetaData xmlns= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" localization= \"en_us\" > <OCD id= \"org.eclipse.kura.example.configurable.ConfigurableExample\" name= \"ConfigurableExample\" description= \"This is a sample metatype file for a simple configurable component\" > <AD id= \"param1.string\" name= \"param1.string\" type= \"String\" cardinality= \"0\" required= \"true\" default= \"Some Text\" description= \"String configuration parameter\" /> <AD id= \"param2.float\" name= \"param2.float\" type= \"Float\" cardinality= \"0\" required= \"false\" default= \"20.5\" min= \"5.0\" max= \"40.0\" description= \"Float configuration parameter\" /> <AD id= \"param3.integer\" name= \"param3.integer\" type= \"Integer\" cardinality= \"0\" required= \"true\" default= \"2\" min= \"1\" description= \"Integer configuration parameter\" /> </OCD> <Designate pid= \"org.eclipse.kura.example.configurable.ConfigurableExample\" > <Object ocdref= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </Designate> </MetaData> In the MANIFEST.MF of this bundle, you must also make sure the XML file gets packaged into the bundle when you export the plug-in. Click the Build tab, and in the Binary Build section of the Manifest editor verify that all the checkboxes for items under META-INF and OSGI-INF are checked. Save the Manifest after making this change. Run the Bundle At this point, you can run the bundle using the emulator in Eclipse (Linux or OS X only). To do so, expand the org.eclipse.kura.emulator project in the package explorer and browse to src/main/resources. As appropriate for you platform type, right-click Kura_Emulator_ [OS] .launch (where \u201c [OS] \u201d specifies your operating system) and select Run as | KURA_EMULATOR_ [OS] .launch . Doing so will start the Kura emulator and your new bundle in the console window of Eclipse. View the Bundle Configuration in the Local Web UI With the bundle running, open a browser window on the same computer as the Eclipse development environment and browse to the Kura web UI at http://127.0.0.1:8080 . Once connected to the Kura web UI, a log in window appears prompting you to enter the Name and Password as shown below: Enter the appropriate name and password (default is admin/admin) and click Log in . The Kura Admin web UI appears with the ConfigurableExample in the Services area on the left side of the browser window as shown below: From the Kura Admin web UI, you can change the parameters that are used by the Kura configuration manager and in turn call the updated() method of the newly created bundle. To do so, click ConfigurableExample and the configurable component parameters will be displayed as shown below: Make any necessary changes and click the Apply button near the top left of the configuration pane for the modifications to take affect. Every time a change is made to the configuration, a new snapshot is generated along with an ID.","title":"Configurable Application"},{"location":"java-application-development/configurable-application/#configurable-application","text":"","title":"Configurable Application"},{"location":"java-application-development/configurable-application/#overview","text":"This section provides a simple example of how to create an OSGi bundle that implements the ConfigurableComponent interface in Kura. This bundle will interact with the Kura ConfigurationService via the ConfigurableComponent interface. It also uses the MQTT services in Kura to connect to the Cloud, which allows for a local configuration mechanism using a Web user-interface (UI). In this example, you will learn how to perform the following functions: Create a plugin project Implement the ConfigurableComponent interface Use the Kura web UI to modify the bundle\u2019s configuration Export a single OSGi bundle (plug-in)","title":"Overview"},{"location":"java-application-development/configurable-application/#prerequisites","text":"Requires Kura development environment set-up ( Setting up Kura Development Environment ) Implements the use of Kura web user-interface (UI)","title":"Prerequisites"},{"location":"java-application-development/configurable-application/#configurable-component-example","text":"","title":"Configurable Component Example"},{"location":"java-application-development/configurable-application/#create-plug-in","text":"In Eclipse, create a new Plug-in project by selecting File | New | Project . Select Plug-in Development | Plug-in Project and click Next . Your screen should display the New Plug-in Project dialog box as shown in the following screen capture. Enter your project a name, such as \u201corg.eclipse.kura.example.configurable\u201d. Under Target Platform, ensure that the an OSGi framework option button is selected and set to standard as shown below. You can also (optionally) add projects to a working set. To continue, click Next . In the next New Plug-in Project menu (shown below), change the Name field to something more descriptive, such as \u201cConfigurable Component Example.\u201d Make sure that the Execution Environment list is set to match the JVM version running on the target device ( JavaSE-1.6 or JavaSE-1.7 ). To determine the JVM version running on the target device, log in to its administrative console and enter the command java \u2013version Also, un check the Generate an activator, a Java class that controls the plug-in\u2019s life cycle option button. For the purposes of this example, a single class will be used. An Activator class will not be created; instead, OSGi Declarative Services will be used to start and stop the bundle. Finally, click Finish . You should see the new project in the Package Explorer (or Project Explorer) in Eclipse. Also, you will see the MANIFEST.MF was automatically opened in the Manifest Editor. An OSGi bundle is a regular Java .jar file that contains Java code and resources and a custom Manifest and an Activator. The manifest will be modified in the next section.","title":"Create Plug-in"},{"location":"java-application-development/configurable-application/#add-dependencies-to-manifest","text":"First, you will use the Manifest Editor in Eclipse to add some dependencies. Click the Dependencies tab at the bottom of the editor screen and then click the Automated Management of Dependencies heading to expand it. Under Automated Management of Dependencies, click Add . In the Select a Plug-in field, enter org.eclipse.osgi.services . Select the plug-in name and click OK . Note that this operation is very much like adding standalone jars to the buildpath by including the \u2018-cp\u2019 argument to javac. However, in this case you are telling Eclipse where to find these dependencies the \u201cOSGi way\u201d, so it is aware of them at compile time. Click Add again and use the same procedure to add the following dependencies: slf4j.api org.eclipse.kura.api You should now see the list of dependencies. Save changes to the Manifest.","title":"Add Dependencies to Manifest"},{"location":"java-application-development/configurable-application/#create-java-class","text":"Now you are ready to start writing a simple Java class. Right-click the org.eclipse.kura.example.configurable project. Select New | Class . Set the Package field to org.eclipse.kura.example.configurable , set the Name field to ConfigurableExample , and then click Finish . Write the following code for the new class. You can copy and paste the code provided below into your newly created Java class file. package org.eclipse.kura.example.configurable ; public class ConfigurableExample implements ConfigurableComponent { private static final Logger s_logger = LoggerFactory . getLogger ( ConfigurableExample . class ); private static final String APP_ID = \"org.eclipse.kura.example.configurable.ConfigurableExample\" ; private Map < String , Object > properties ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); } protected void activate ( ComponentContext componentContext , Map < String , Object > properties ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started with config!\" ); updated ( properties ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } public void updated ( Map < String , Object > properties ) { this . properties = properties ; if ( properties != null && ! properties . isEmpty ()) { Iterator < Entry < String , Object >> it = properties . entrySet (). iterator (); while ( it . hasNext ()) { Entry < String , Object > entry = it . next (); s_logger . info ( \"New property - \" + entry . getKey () + \" = \" + entry . getValue () + \" of type \" + entry . getValue (). getClass (). toString ()); } } } } The activate() method is the entry point when the bundle is started. Note this class has two forms of the activate() method. The second method (with the \u201cMap properties\u201d parameter) enables a default configuration to be specified at bundle start time. The deactivate() method is the entry point when the bundle is stopped. You have also specified an updated() method. These methods define how the bundle receives a new configuration from the Kura configuration manager. Kura handles robust configuration management routines automatically once you implement the ConfigurableComponent interface and the updated() method.","title":"Create Java Class"},{"location":"java-application-development/configurable-application/#resolve-dependencies","text":"At this point, there will be errors in your code because of unresolved imports. Select the menu Source | Organize Imports to resolve these errors. Because you added dependencies to your dependency list in the Manifest, you will be prompted to choose one of the following two potential sources for importing a few classes. For the \u201cEntry\u201d class, select java.util.Map.Entry as shown below and click Next . For the \u201cLogger\u201d class, select org.slf4j.Logger as shown below and click Finish . Resolving the imports should clear the errors in the class as shown in the screen capture that follows. Save the changes to the ConfigurableExample class. The complete set of code (with import statements) is shown below. package org.eclipse.kura.example.configurable ; import java.util.Iterator ; import java.util.Map ; import java.util.Map.Entry ; import org.osgi.service.component.ComponentContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.eclipse.kura.configuration.ConfigurableComponent ; public class ConfigurableExample implements ConfigurableComponent { private static final Logger s_logger = LoggerFactory . getLogger ( ConfigurableExample . class ); private static final String APP_ID * = \"org.eclipse.kura.configurable.ConfigurableExample\" ; private Map < String , Object > properties ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); } protected void activate ( ComponentContext componentContext , Map < String , Object > properties ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started with config!\" ); updated ( properties ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } public void updated ( Map < String , Object > properties ) { this . properties = properties ; if ( properties != null && ! properties . isEmpty ()) { Iterator < Entry < String , Object >> it = properties . entrySet (). iterator (); while ( it . hasNext ()) { Entry < String , Object > entry = it . next (); s_logger . info ( \"New property - \" + entry . getKey () + \" = \" + entry . getValue () + \" of type \" + entry . getValue (). getClass (). toString ()); } } } } Switch back to the Manifest Editor. Under Automated Management of Dependencies , ensure the Import-Package option button is selected. Click the add dependencies link to automatically add packages to the dependencies list (under Imported Packages ) based on the \u201cimport\u201d statements in your example code. Save changes to the Manifest again.","title":"Resolve Dependencies"},{"location":"java-application-development/configurable-application/#create-component-class","text":"Right-click the example project and select New | Folder . Create a new folder named \u201cOSGI-INF\u201d. Now, right-click the example project\u2019s \u201cOSGI-INF\u201d folder and select New | Other . From the wizard, select Plug-in Development | Component Definition and click Next . Next to the Class field, click Browse and type the name of your newly created class in the Select entries field. In this case, type the word \u201cConfigurable\u201d, and you will see matching items. Select the ConfigurableExample class and click OK . In the Enter or select the parent folder field, make sure \u201c /OSGI-INF\u201d is at the end of the existing entry (e.g., org.eclipse.kura.example.configurable/OSGI-INF). Set the Name field equal to the Class field as shown below: Click Finish . After the Component class has been created, it will open in the Workspace. On the Services tab, click the Add button under Provided Services . Enter \u201cconfigurable\u201d and select the interface \u201corg.eclipse.kura.example.configurable\u201d. This is required for components that are configurable through the Kura ConfigurationService, so that they expose a Service. In the Overview tab, the Name and Class fields should already point to your Java class. Make the following settings: Set the Activate field to activate and set the Deactivate field to deactivate . This tells the component where these OSGi activation methods are located. Set the Configuration Policy to require . Set the Modified field to updated . This tells the component which method to call when the configuration is updated. Uncheck the box This component is enabled when started , then check both boxes This component is enabled when started and This component is immediately activated . Click the Add Property button. Enter a property with the name \u201cservice.pid\u201d and value \u201corg.eclipse.kura.example.configurable.ConfigurableExample\u201d as shown in the screen capture below. Verify that the completed Overview tab looks like the screen shot shown below and save the Component class definition file: Check the Source tab of the component.xml file and carefully verify that each of the property values and tags match what is shown below: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.example.configurable.ConfigurableExample\" > <implementation class= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> <service> <provide interface= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </service> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </scr:component> If Kura 3.0 or newer versions are used and the \"org.eclipse.kura.core.configuration.legacyServiceTracking\" system property is set to false or not set, proceed as follows. After the Component class has been created, it will open in the Workspace. On the Services tab, click the Add button under Provided Services . Enter \u201cconfigurable\u201d and select the interface \u201corg.eclipse.kura.configuration.ConfigurableComponent\u201d. This is required for components that are configurable through the Kura ConfigurationService, so that they expose a Service. In the Overview tab, the Name and Class fields should already point to your Java class. Make the following settings: Set the Activate field to activate and set the Deactivate field to deactivate . This tells the component where these OSGi activation methods are located. Set the Configuration Policy to require . Set the Modified field to updated . This tells the component which method to call when the configuration is updated. Uncheck the box This component is enabled when started , then check both boxes This component is enabled when started and This component is immediately activated . Click the Add Property button. Enter a property with the name \u201cservice.pid\u201d and value \u201corg.eclipse.kura.example.configurable.ConfigurableExample\u201d as shown in the screen capture below. Verify that the completed Overview tab looks like the screen shot shown below and save the Component class definition file: Check the Source tab of the component.xml file and carefully verify that each of the property values and tags match what is shown below: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" activate= \"activate\" configuration-policy= \"require\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" modified= \"updated\" name= \"org.eclipse.kura.example.configurable.ConfigurableExample\" > <implementation class= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </scr:component>","title":"Create Component Class"},{"location":"java-application-development/configurable-application/#create-the-default-configuration","text":"With the component definition file created, you also need to specify the configurable parameters of this bundle. This is done using the \u201cmetatype\u201d definition. Right-click the OSGI-INF directory for the example project in the Package Explorer window and select New | Folder. Name the folder \u201cmetatype\u201d. Next, right-click the metatype folder and select New | File . Name the file \u201corg.eclipse.kura.example.configurable.ConfigurableExample.xml\u201d as shown in the following screen capture: At this point, you have to write the \u2018metatype\u2019 file that defines the parameters, default values, types, etc. Click on the Source button and paste the following XML text into ConfigurableExample.xml for this example. Save changes to ConfigurableExample.xml. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <MetaData xmlns= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" localization= \"en_us\" > <OCD id= \"org.eclipse.kura.example.configurable.ConfigurableExample\" name= \"ConfigurableExample\" description= \"This is a sample metatype file for a simple configurable component\" > <AD id= \"param1.string\" name= \"param1.string\" type= \"String\" cardinality= \"0\" required= \"true\" default= \"Some Text\" description= \"String configuration parameter\" /> <AD id= \"param2.float\" name= \"param2.float\" type= \"Float\" cardinality= \"0\" required= \"false\" default= \"20.5\" min= \"5.0\" max= \"40.0\" description= \"Float configuration parameter\" /> <AD id= \"param3.integer\" name= \"param3.integer\" type= \"Integer\" cardinality= \"0\" required= \"true\" default= \"2\" min= \"1\" description= \"Integer configuration parameter\" /> </OCD> <Designate pid= \"org.eclipse.kura.example.configurable.ConfigurableExample\" > <Object ocdref= \"org.eclipse.kura.example.configurable.ConfigurableExample\" /> </Designate> </MetaData> In the MANIFEST.MF of this bundle, you must also make sure the XML file gets packaged into the bundle when you export the plug-in. Click the Build tab, and in the Binary Build section of the Manifest editor verify that all the checkboxes for items under META-INF and OSGI-INF are checked. Save the Manifest after making this change.","title":"Create the Default Configuration"},{"location":"java-application-development/configurable-application/#run-the-bundle","text":"At this point, you can run the bundle using the emulator in Eclipse (Linux or OS X only). To do so, expand the org.eclipse.kura.emulator project in the package explorer and browse to src/main/resources. As appropriate for you platform type, right-click Kura_Emulator_ [OS] .launch (where \u201c [OS] \u201d specifies your operating system) and select Run as | KURA_EMULATOR_ [OS] .launch . Doing so will start the Kura emulator and your new bundle in the console window of Eclipse.","title":"Run the Bundle"},{"location":"java-application-development/configurable-application/#view-the-bundle-configuration-in-the-local-web-ui","text":"With the bundle running, open a browser window on the same computer as the Eclipse development environment and browse to the Kura web UI at http://127.0.0.1:8080 . Once connected to the Kura web UI, a log in window appears prompting you to enter the Name and Password as shown below: Enter the appropriate name and password (default is admin/admin) and click Log in . The Kura Admin web UI appears with the ConfigurableExample in the Services area on the left side of the browser window as shown below: From the Kura Admin web UI, you can change the parameters that are used by the Kura configuration manager and in turn call the updated() method of the newly created bundle. To do so, click ConfigurableExample and the configurable component parameters will be displayed as shown below: Make any necessary changes and click the Apply button near the top left of the configuration pane for the modifications to take affect. Every time a change is made to the configuration, a new snapshot is generated along with an ID.","title":"View the Bundle Configuration in the Local Web UI"},{"location":"java-application-development/connected-application/","text":"Connected Application Overview This section describes the prepackaged heater demo bundle that comes with the Kura development environment and demonstrates how to perform the following functions: Run the Kura Emulator Connect to the Cloud Gain an understanding of ConfigurableComponents in Kura Modify configurations of custom bundles Prerequisites Setting up Kura Development Environment Using the Kura web UI Heater Demo Introduction The org.eclipse.kura.demo.heater bundle is a simple OSGi bundle that represents a thermostat and heater combination. The application utilizes the Kura ConfigurableComponent interface to be able to receive configuration updates through the local Kura web UI. In addition, this bundle utilizes OSGi declarative services and the Kura CloudClientListener. This tutorial demonstrates how to modify configurations of custom bundles and shows how those configuration changes can dynamically impact the behavior of the bundle through the Kura web UI. Code Walkthrough The following sections will highlight three important API layers when creating an application that will publish to the cloud. These layers are: DataTransportService Available for standard MQTT messaging. Allows consumers of the service to connect to brokers, publish messages, and receive messages on subscribed topics DataService Delegates data transport to the DataTransportService Provides extended features for managing broker connections, buffering of published messages, and priority based delivery of messages CloudService Further extends the functionality of DataService Provides means for more complex flows (i.e. request/response) Manages single broker connection across multiple applications Provides payload data model with encoding/decoding serializers Publishes life cycle manages for devices and applications Acquiring CloudClient The CloudService can manage multiple applications over a shared MQTT connection by treating each application as a client. The example code uses the \"setCloudService\" and \"unsetCloudService\" methods for referencing and releasing the CloudService. In the bundles activate method, the service reference in conjunction with a unique application ID can then be used to obtain a CloudClient. The relevant code is shown below (ommitted sections are denoted by ==OMMITTED==): == OMMITTED == // Cloud Application identifier private static final String APP_ID = \"heater\" ; == OMMITTED == public void setCloudService ( CloudService cloudService ) { m_cloudService = cloudService ; } public void unsetCloudService ( CloudService cloudService ) { m_cloudService = null ; } == OMMITTED == // Acquire a Cloud Application Client for this Application s_logger . info ( \"Getting CloudClient for {}...\" , APP_ID ); m_cloudClient = m_cloudService . newCloudClient ( APP_ID ); Publishing/Subscribing The private \"doPublish\" method is used to publish messages at a fixed rate. The method demonstrates how to use the CloudClient and KuraPayload to publish MQTT messages. == OMMITTED == // Allocate a new payload KuraPayload payload = new KuraPayload (); // Timestamp the message payload . setTimestamp ( new Date ()); // Add the temperature as a metric to the payload payload . addMetric ( \"temperatureInternal\" , m_temperature ); payload . addMetric ( \"temperatureExternal\" , 5.0F ); payload . addMetric ( \"temperatureExhaust\" , 30.0F ); int code = m_random . nextInt (); if (( m_random . nextInt () % 5 ) == 0 ) { payload . addMetric ( \"errorCode\" , code ); } else { payload . addMetric ( \"errorCode\" , 0 ); } // Publish the message try { m_cloudClient . publish ( topic , payload , qos , retain ); s_logger . info ( \"Published to {} message: {}\" , topic , payload ); } catch ( Exception e ) { s_logger . error ( \"Cannot publish topic: \" + topic , e ); } Similarly, the CloudClient can be used to subscribe to MQTT topics. Although not shown in the example code, the following snippet could be added to subscribe to all published messages: m_cloudClient . subscribe ( topic , qos ); Callback Methods The example class implements CloudClientListener, which provides methods for several common callback methods. The below snippet shows the relevant code for creating the listeners for the demo application. == OMMITTED == public class Heater implements ConfigurableComponent , CloudClientListener == OMMITTED == m_cloudClient . addCloudClientListener ( this ); The available methods for implementation are: onControlMessageArrived: Method called when a control message is received from the broker. onMessageArrived: Method called when a data message is received from the broker. onConnectionLost: Method called when the client has lost connection with the broker. onConnectionEstablished: Method called when the client establishes a connection with the broker. onMessageConfirmed: Method called when a published message has been fully acknowledged by the broker (not applicable for qos 0 messages). onMessagePublished: Method called when a message has been transfered from the publishing queue to the DataTransportService. For more information on the various Kura APIs, please review the Kura APIs Run the Bundle By default, the heater demo bundle does not run automatically. To run the bundle and Kura in the Emulator, locate the org.eclipse.kura.emulator project. Expand it to show the src/main/resources folder. Right-click the correct Kura_Emulator_ [OS] .launch file, depending on which operating system you are running. In the context menu, select the Run As option, and click on Run Configurations . Under OSGi Framework (Run Configurations window shown below), click on the Kura_Emulator_[OS] entry. In the Bundles tab under Workspace, enable the org.eclipse.kura.demo.heater checkbox to enable it as shown below: Click the Apply and Run buttons to start the Kura Emulator. Once this setting has been made, you only need to right-click on the launch file and select Run As and the Kura_Emulator_[OS] option to run with the same settings. This will start Kura running locally and will display a Console window in Eclipse. The Console window will show the OSGi diagnostics as various bundles start and execute. Configure the MQTT Client With the heater demo bundle running, open a browser window on the same computer as the Eclipse development environment and browse to the Kura web UI at http://127.0.0.1:8080 . Once connected to the Kura web UI, a log in window appears prompting you to enter the Name and Password as shown below: Enter the appropriate name and password (default is admin/admin) and click Log in . The Kura Admin web UI appears as shown below: From the Kura web UI, click on MqttDataTransport in the Services pane on the lower left of the browser window. You will see a menu similar to the one shown in the following screen capture: Fill in the following fields then click the Apply button: Field Value broker-url: The url for the MQTT broker (this example shows the MQTT broker-url mqtt://iot.eclipse.org:1883/ hosted by the Eclipse Foundation) topic.context.account-name: Your [account_name] username: Typically [account_name]_broker password: The password for your user client-id The client identifier to be used when connecting to the MQTT broker (optional) Now that the account credentials are set in the MqttDataTransport service, the DataService needs to be configured to connect by default. To do so, click DataService in the Services area on the left of the browser window. For the \u2018connect.auto-on-startup\u2019 parameter, select true as shown below: Modify Bundle Configuration in Local Web UI Bundles changes may be made directly in the emulator web UI. Since you are running an emulated device in Eclipse, you can do this by browsing to http://127.0.0.1:8080 (same URL where the MQTT client was configured in the previous section of this tutorial). If the bundle was running on a real device and you had network access to it, you would browse to http://[ip_address_of_device] . From the Kura web UI, select the Heater bundle from the configurable services on the left and modify the parameters as needed (shown in the screen capture below). By default, the heater demo is configured according to the following characteristics and assumptions about its operational environment: Start operation is at 6:00am (06:00). End operation is at 10:00pm (22:00). It is colder outside than inside the heated chamber (hard-coded to 5 degrees in the application). Output of the heater is constant at 30 degrees (hard-coded). When in operational mode, the temperature will drop inside if the heater is off. The heater turns off when it is about to exceed the setPoint defined in the configuration. After the temperature drops to four times the increment point (a made-up value to show dropping temperature, hard-coded in the application), the heater turns back on, and the temperature starts increment at the rate of the \u2018temperature.increment\u2019 rate. Click Apply for changes to take affect. The updated() method is called after settings are applied for the new configuration. After completing this tutorial, it is highly recommended that you review the heater demo source code in Eclipse to see how it is put together. Kura automatically generates the user configuration interface through implementation of the ConfigurableComponent interface and some small additions to the component.xml file (called heater.xml). This powerful feature provides both a local and remote configuration user interface with no additional development requirements.","title":"Connected Application"},{"location":"java-application-development/connected-application/#connected-application","text":"","title":"Connected Application"},{"location":"java-application-development/connected-application/#overview","text":"This section describes the prepackaged heater demo bundle that comes with the Kura development environment and demonstrates how to perform the following functions: Run the Kura Emulator Connect to the Cloud Gain an understanding of ConfigurableComponents in Kura Modify configurations of custom bundles","title":"Overview"},{"location":"java-application-development/connected-application/#prerequisites","text":"Setting up Kura Development Environment Using the Kura web UI","title":"Prerequisites"},{"location":"java-application-development/connected-application/#heater-demo-introduction","text":"The org.eclipse.kura.demo.heater bundle is a simple OSGi bundle that represents a thermostat and heater combination. The application utilizes the Kura ConfigurableComponent interface to be able to receive configuration updates through the local Kura web UI. In addition, this bundle utilizes OSGi declarative services and the Kura CloudClientListener. This tutorial demonstrates how to modify configurations of custom bundles and shows how those configuration changes can dynamically impact the behavior of the bundle through the Kura web UI.","title":"Heater Demo Introduction"},{"location":"java-application-development/connected-application/#code-walkthrough","text":"The following sections will highlight three important API layers when creating an application that will publish to the cloud. These layers are: DataTransportService Available for standard MQTT messaging. Allows consumers of the service to connect to brokers, publish messages, and receive messages on subscribed topics DataService Delegates data transport to the DataTransportService Provides extended features for managing broker connections, buffering of published messages, and priority based delivery of messages CloudService Further extends the functionality of DataService Provides means for more complex flows (i.e. request/response) Manages single broker connection across multiple applications Provides payload data model with encoding/decoding serializers Publishes life cycle manages for devices and applications","title":"Code Walkthrough"},{"location":"java-application-development/connected-application/#acquiring-cloudclient","text":"The CloudService can manage multiple applications over a shared MQTT connection by treating each application as a client. The example code uses the \"setCloudService\" and \"unsetCloudService\" methods for referencing and releasing the CloudService. In the bundles activate method, the service reference in conjunction with a unique application ID can then be used to obtain a CloudClient. The relevant code is shown below (ommitted sections are denoted by ==OMMITTED==): == OMMITTED == // Cloud Application identifier private static final String APP_ID = \"heater\" ; == OMMITTED == public void setCloudService ( CloudService cloudService ) { m_cloudService = cloudService ; } public void unsetCloudService ( CloudService cloudService ) { m_cloudService = null ; } == OMMITTED == // Acquire a Cloud Application Client for this Application s_logger . info ( \"Getting CloudClient for {}...\" , APP_ID ); m_cloudClient = m_cloudService . newCloudClient ( APP_ID );","title":"Acquiring CloudClient"},{"location":"java-application-development/connected-application/#publishingsubscribing","text":"The private \"doPublish\" method is used to publish messages at a fixed rate. The method demonstrates how to use the CloudClient and KuraPayload to publish MQTT messages. == OMMITTED == // Allocate a new payload KuraPayload payload = new KuraPayload (); // Timestamp the message payload . setTimestamp ( new Date ()); // Add the temperature as a metric to the payload payload . addMetric ( \"temperatureInternal\" , m_temperature ); payload . addMetric ( \"temperatureExternal\" , 5.0F ); payload . addMetric ( \"temperatureExhaust\" , 30.0F ); int code = m_random . nextInt (); if (( m_random . nextInt () % 5 ) == 0 ) { payload . addMetric ( \"errorCode\" , code ); } else { payload . addMetric ( \"errorCode\" , 0 ); } // Publish the message try { m_cloudClient . publish ( topic , payload , qos , retain ); s_logger . info ( \"Published to {} message: {}\" , topic , payload ); } catch ( Exception e ) { s_logger . error ( \"Cannot publish topic: \" + topic , e ); } Similarly, the CloudClient can be used to subscribe to MQTT topics. Although not shown in the example code, the following snippet could be added to subscribe to all published messages: m_cloudClient . subscribe ( topic , qos );","title":"Publishing/Subscribing"},{"location":"java-application-development/connected-application/#callback-methods","text":"The example class implements CloudClientListener, which provides methods for several common callback methods. The below snippet shows the relevant code for creating the listeners for the demo application. == OMMITTED == public class Heater implements ConfigurableComponent , CloudClientListener == OMMITTED == m_cloudClient . addCloudClientListener ( this ); The available methods for implementation are: onControlMessageArrived: Method called when a control message is received from the broker. onMessageArrived: Method called when a data message is received from the broker. onConnectionLost: Method called when the client has lost connection with the broker. onConnectionEstablished: Method called when the client establishes a connection with the broker. onMessageConfirmed: Method called when a published message has been fully acknowledged by the broker (not applicable for qos 0 messages). onMessagePublished: Method called when a message has been transfered from the publishing queue to the DataTransportService. For more information on the various Kura APIs, please review the Kura APIs","title":"Callback Methods"},{"location":"java-application-development/connected-application/#run-the-bundle","text":"By default, the heater demo bundle does not run automatically. To run the bundle and Kura in the Emulator, locate the org.eclipse.kura.emulator project. Expand it to show the src/main/resources folder. Right-click the correct Kura_Emulator_ [OS] .launch file, depending on which operating system you are running. In the context menu, select the Run As option, and click on Run Configurations . Under OSGi Framework (Run Configurations window shown below), click on the Kura_Emulator_[OS] entry. In the Bundles tab under Workspace, enable the org.eclipse.kura.demo.heater checkbox to enable it as shown below: Click the Apply and Run buttons to start the Kura Emulator. Once this setting has been made, you only need to right-click on the launch file and select Run As and the Kura_Emulator_[OS] option to run with the same settings. This will start Kura running locally and will display a Console window in Eclipse. The Console window will show the OSGi diagnostics as various bundles start and execute.","title":"Run the Bundle"},{"location":"java-application-development/connected-application/#configure-the-mqtt-client","text":"With the heater demo bundle running, open a browser window on the same computer as the Eclipse development environment and browse to the Kura web UI at http://127.0.0.1:8080 . Once connected to the Kura web UI, a log in window appears prompting you to enter the Name and Password as shown below: Enter the appropriate name and password (default is admin/admin) and click Log in . The Kura Admin web UI appears as shown below: From the Kura web UI, click on MqttDataTransport in the Services pane on the lower left of the browser window. You will see a menu similar to the one shown in the following screen capture: Fill in the following fields then click the Apply button: Field Value broker-url: The url for the MQTT broker (this example shows the MQTT broker-url mqtt://iot.eclipse.org:1883/ hosted by the Eclipse Foundation) topic.context.account-name: Your [account_name] username: Typically [account_name]_broker password: The password for your user client-id The client identifier to be used when connecting to the MQTT broker (optional) Now that the account credentials are set in the MqttDataTransport service, the DataService needs to be configured to connect by default. To do so, click DataService in the Services area on the left of the browser window. For the \u2018connect.auto-on-startup\u2019 parameter, select true as shown below:","title":"Configure the MQTT Client"},{"location":"java-application-development/connected-application/#modify-bundle-configuration-in-local-web-ui","text":"Bundles changes may be made directly in the emulator web UI. Since you are running an emulated device in Eclipse, you can do this by browsing to http://127.0.0.1:8080 (same URL where the MQTT client was configured in the previous section of this tutorial). If the bundle was running on a real device and you had network access to it, you would browse to http://[ip_address_of_device] . From the Kura web UI, select the Heater bundle from the configurable services on the left and modify the parameters as needed (shown in the screen capture below). By default, the heater demo is configured according to the following characteristics and assumptions about its operational environment: Start operation is at 6:00am (06:00). End operation is at 10:00pm (22:00). It is colder outside than inside the heated chamber (hard-coded to 5 degrees in the application). Output of the heater is constant at 30 degrees (hard-coded). When in operational mode, the temperature will drop inside if the heater is off. The heater turns off when it is about to exceed the setPoint defined in the configuration. After the temperature drops to four times the increment point (a made-up value to show dropping temperature, hard-coded in the application), the heater turns back on, and the temperature starts increment at the rate of the \u2018temperature.increment\u2019 rate. Click Apply for changes to take affect. The updated() method is called after settings are applied for the new configuration. After completing this tutorial, it is highly recommended that you review the heater demo source code in Eclipse to see how it is put together. Kura automatically generates the user configuration interface through implementation of the ConfigurableComponent interface and some small additions to the component.xml file (called heater.xml). This powerful feature provides both a local and remote configuration user interface with no additional development requirements.","title":"Modify Bundle Configuration in Local Web UI"},{"location":"java-application-development/contributing/","text":"Contributing Contributing to Eclipse Kura project is very easy. The steps required to submit code to the project can be found on Github Contributing Page . If you face any issues, or just want to get involved with the kura community feel free to join us on: Github Issues : for bug reporting. Github Discussions : for receiving feedback, making new proposals and generally talking about the project. Kura Dev Meeting If you want to get involved in the development process you can join us at the Kura Dev Meeting. The meeting is held every 2 weeks on Wednesday, at 5 PM CEST on Microsoft Teams. You can join by using this link . The scheduled dates for the meeting can be found here . Unzip the calendar file and double-click on it to add the scheduled dates to your calendar.","title":"Contributing"},{"location":"java-application-development/contributing/#contributing","text":"Contributing to Eclipse Kura project is very easy. The steps required to submit code to the project can be found on Github Contributing Page . If you face any issues, or just want to get involved with the kura community feel free to join us on: Github Issues : for bug reporting. Github Discussions : for receiving feedback, making new proposals and generally talking about the project.","title":"Contributing"},{"location":"java-application-development/contributing/#kura-dev-meeting","text":"If you want to get involved in the development process you can join us at the Kura Dev Meeting. The meeting is held every 2 weeks on Wednesday, at 5 PM CEST on Microsoft Teams. You can join by using this link . The scheduled dates for the meeting can be found here . Unzip the calendar file and double-click on it to add the scheduled dates to your calendar.","title":"Kura Dev Meeting"},{"location":"java-application-development/deploy-and-debug-applications/","text":"Deploy and Debug Applications Overview This section provides a simple example of how to test and deploy OSGi bundles and deployment packages in a Kura environment. These instructions use the \u201cHello World\u201d OSGi project created in the previous section . In this example, you will learn how to perform the following functions: Use local OSGi emulation mode in Eclipse Deploy a bundle to a remote target running the OSGi Framework Install a Deployment Package to a remote target running the OSGi Framework Manage OSGi bundles on a target device Set bundle Logger levels in Kura Prerequisites Setting up Kura Development Environment Hello World Using the Kura Logger Testing the OSGi Plug-in Once you have created an OSGi plug-in, you can test it in Local Emulation Mode and/or deploy it to a Remote Target Device . Local Emulation Mode The Kura user workspace can be used in Eclipse in local emulation mode (Linux/OS X only; this feature is not currently supported under Windows). To deploy the code to a running system, see the section Remote Target Device . Run Kura in Emulator Mode In the Eclipse workspace, locate the org.eclipse.kura.emulator project. Expand it to show the src/main/resources folder. Right-click the Kura_Emulator.launch file. In the context menu, select the Run as option, and select the Kura_Emulator *. This will start Kura running locally and will display a Console window in the bottom pane in Eclipse. The Console window will show the OSGi diagnostics as various bundles start and execute. Because the org.eclipse.kura.example.hello_osgi bundle is in the workspace with a valid activate() method, it is automatically started with the Kura OSGi framework. Note the INFO message highlighted below that shows the bundle\u2019s activate() method was run. List OSGi Bundles in Local Mode With the OSGi framework running in the Eclipse console (refer to the previous section), click in the Console window. Press Enter/Return and then type the \u2018 ss \u2019 command to show a list of installed bundles. Note the bundle ID number for the org.eclipse.kura.example.hello_osgi bundle. Start/Stop Bundle in Local Mode In the OSGi Console window in Eclipse, run the start ## or stop ## commands to start or stop a bundle, where the \u201c ## \u201d is either the bundle ID number or the bundle name (such as \u201cstart org.eclipse.kura.example.hello_osgi\u201d). Note that the INFO messages for both the activate() and deactivate() messages appear in the Console window when the bundle is started or stopped. Install/Uninstall Bundle in Local Mode In the OSGi Console window in Eclipse, bundles can be installed or uninstalled. To uninstall the example bundle, issue the command \u2018 uninstall ## \u2019, where \u201c ## \u201d is either the bundle ID number or the bundle name, such as: uninstall 47 or uninstall org.eclipse.kura.example.hello_osgi A message will appear indicating that the bundle has been stopped. Once the bundle has been uninstalled from the local OSGi console, it cannot be started or installed by number or name. Instead, it must be installed by using the plug-in JAR file created earlier. Issue the \u2018 install \u2019 command to install a bundle into the Emulation environment: install file:/[*path_to_bundle*]/[*bundle_name*].jar where \u201c[path_to_bundle] / [bundle_name] .jar\u201d should be replaced with the name of the bundle exported earlier (the section Hello World Using the Kura Logger ), as shown in the example below: install file:/Users/Nina/Documents/myPlugins/plugins/plugins/plugins/plugins/plugins/org.eclipse.kura.example.hello_osgi_ 1.0.0.201409101740.jar Then the bundle can be started or stopped, as described in the previous section, Start/Stop Bundle in Local Mode . Optionally, you can add the flag \u2018-start \u2019 to the \u2018 install \u2019 command to automatically start the bundle after installation. Remote Target Device One or more OSGi bundles can be deployed to a remote device running Kura, either by installing separate bundle files or deployment packages using Eclipse. Warning These steps require Kura to be running on the target device. This method of deployment is temporary on the remote target device and is not persistent after a restart. To make the deployment permanent, see Making Deployment Permanent . Connect to Remote OSGi Framework To deploy a bundle to the remote target device, you will need to connect Eclipse to the OSGi framework running on the device. This is done using mToolkit. See Kura Setup for instructions on installing mToolkit into the Eclipse development environment. Select the Eclipse menu Window | Show View | Other . Select mToolkit -> Frameworks entry to open the mToolkit Frameworks view. Enter a name for the framework definition and the IP address of the target device. Close the dialog by clicking the OK button. Warning The remote target device must have port 1450 open in its firewall, in order to allow mToolkit o make a connection to its OSGi framework. If this port is not opened, refer to the section Open Port for OSGi Remote Connection . Right-click the framework icon name and select Connect Framework . The list of installed bundles and deployment packages should be retrieved shortly. (Use the Disconnect Framework option to disconnect from the remote target framework when finished.) Open Port for OSGi Remote Connection In order to allow mToolkit to make a remote connection to the OSGi framework on the target device, the device must allow the incoming port in its firewall. To set this option, open a Web browser and log into Kura using its current IP address, such as: http://10.11.5.4 Click the Firewall icon and then click the Open Ports tab. If port 1450 is not shown in the list of allowed ports, click the New button under Open Ports. Enter the port 1450 and select protocol TCP . Then click Submit . Now, click Apply to apply changes to the remote device. Install Single Bundle to Target Device With the Eclipse environment connected to the remote OSGi target framework, a single bundle can be installed on the remote device. In the mToolkit Frameworks view, right-click the Framework name and select Install Bundle . (This requires that you have exported the bundle as a deployable plug-in JAR file. See the section Hello World Using the Kura Logger .) Use the Browse button to select the JAR file and click OK to install it to the target device. The newly installed bundle should be shown in the Frameworks view under Bundles. To control operation of the bundle through the OSGi Frameworks view, right-click the bundle name. The following actions can be performed: Start \u2013 start the bundle Stop \u2013 stop the bundle Update \u2013 reinstall the bundle Install Bundle \u2013 install a different bundle Uninstall Bundle \u2013 remove this bundle from the target device Show Bundle IDs / Show Bundle Versions \u2013 show additional information about bundles You can also verify operation of the bundle on the target device itself. See the section Manage Bundles on Target Device . Install Deployment Package to Target Device With the Eclipse environment connected to the remote OSGi target framework, a deployment package can be installed on the remote device. NOTE: If you have just installed the individual bundle in the previous section, you should uninstall it before proceeding. Doing so will avoid any confusion in having the same bundle installed twice. In the mToolkit Frameworks view, right-click the Framework name and select Install Deployment Package . (This step requires that you have exported the bundle as a deployable plug-in JAR file. See the section Hello World Using the Kura Logger for instructions on exporting the OSGi bundle.) Open the resources/dp folder in the Workspace filesystem directory, select the .dp file ( not the \u201c.dpp\u201d file), and click OK . The deployment package will be installed on the target device and shown in the Frameworks view under Deployment Packages. (The deployment package can also be uninstalled from the Framework view.) The bundle included in the deployment package can also be viewed under Bundles and can be controlled remotely (start/stop) as with other bundles. The operation of the bundle can also be verified on the target device itself. See the section Manage Bundles on Target Device . Connect to OSGi on Target Device You can manage the OSGi framework on a target device by logging into a console on the device using a connected keyboard and VGA monitor or over a network connection using SSH (PuTTY in Windows or \u2018 ssh \u2019 from Linux or Mac). At the command prompt, display the Kura log file with: tail -f /var/log/kura.log Connect to the OSGi framework by typing the following commands: telnet localhost 5002 There are many commands available in the OSGi console for managing bundles. Following are just a few useful commands: Command Description ss Lists names and ID of bundles help Displays the help menu of OSGi commands lb Lists all installed bundles and IDs h [bundle IDs] Displays bundle headers (i.e., Bundle Manifest Version, Name, Required Execution Environment, Symbolic Name, Version, Import Package, Manifest Version, and Service Component) exit Exits the OSGi console and stops Kura disconnect Exits the OSGi console, but leaves Kura running Manage Bundles on Target Device From the OSGi command line, you can display a list of bundles with the \u2018 ss \u2019 command as shown in the example below: ss In this example, the org.eclipse.kura.example.hello_osgi bundle ID is 64. You can run the \u2018 start ## \u2019 or \u2018 stop ## \u2019 commands to start or stop a bundle, where the \u201c## \u201d is either the bundle ID number or the bundle name (such as \u201c start org.eclipse.kura.example.hello_osgi \u201d). To verify that the bundled is stopped, you can issue the \u2018 ss \u2019 command. If the bundled is stopped, the activity will show RESOLVED (as shown below). If the bundle is started, the activity will show ACTIVE (as shown above). Set Kura Logger Levels Kura logger levels are defined in a configuration file. The messages that appear require a log statement in the application and that the log level of the statement matches the log level of the application (such as logger.info or logger.debug). To set or change logger levels, the Kura logger configuration file may be modified using the vi editor. From the Linux command prompt, enter the following command: vi /opt/eclipse/kura/kura/log4j.properties At the bottom of the \u201clog4j.properties\u201d file, there will be one or more \u201clog4j\u201d logger property entries, which determine the logger level used by the bundles at startup. In the example screen capture shown below, the \u201clog4j.logger.org.eclipse.kura\u201d property has been set to \u201cINFO\u201d, which applies to all bundles that start with \u201corg.eclipse.kura.\u201d Additional, more specific, properties may be defined as required for your particular logging needs. The property entries will take on the defined logger level at startup. The logger levels are hierarchical, so that those in a deeper level of the hierarchy will apply; otherwise, the more general logger level will override them. Once you have made the necessary changes, save and close the file using the \u2018 :wq \u2019 command. Restart Kura, and check the log levels in the OSGi console again to make sure that the desired levels have taken effect. Making Deployment Permanent The mToolkit deployment of a package is a temporary installation and does not make the package permanent. Once a set of bundles has been tested on the remote target device and is ready for permanent deployment, the software can be installed on a device with deployment packages from the command line of a target device using the instructions below: Copy the deployment package file (*.dp) to the target device, into the folder: /opt/eclipse/kura/kura/packages Edit the dpa.properties file through the vi editor by entering the following command: vi /opt/eclipse/kura/kura/dpa.properties Add an entry in the dpa.properties file to include the new package name, such as: package_name=file\\:/opt/eclipse/kura/kura/packages/package_filename.dp where, \u201cpackage_name\u201d and \u201cpackage_filename\u201d should be replaced with the actual name of the deployment package. Save and close the file using the \u2018 :wq \u2019 command. Then restart Kura, and the new package should be installed in addition to the default Kura package. In conclusion, this section described how to test a bundle in an Emulation environment within the Eclipse IDE and how to install bundles and Deployment Packages to a remote target system running Kura.","title":"Deploy and Debug Applications"},{"location":"java-application-development/deploy-and-debug-applications/#deploy-and-debug-applications","text":"","title":"Deploy and Debug Applications"},{"location":"java-application-development/deploy-and-debug-applications/#overview","text":"This section provides a simple example of how to test and deploy OSGi bundles and deployment packages in a Kura environment. These instructions use the \u201cHello World\u201d OSGi project created in the previous section . In this example, you will learn how to perform the following functions: Use local OSGi emulation mode in Eclipse Deploy a bundle to a remote target running the OSGi Framework Install a Deployment Package to a remote target running the OSGi Framework Manage OSGi bundles on a target device Set bundle Logger levels in Kura","title":"Overview"},{"location":"java-application-development/deploy-and-debug-applications/#prerequisites","text":"Setting up Kura Development Environment Hello World Using the Kura Logger","title":"Prerequisites"},{"location":"java-application-development/deploy-and-debug-applications/#testing-the-osgi-plug-in","text":"Once you have created an OSGi plug-in, you can test it in Local Emulation Mode and/or deploy it to a Remote Target Device .","title":"Testing the OSGi Plug-in"},{"location":"java-application-development/deploy-and-debug-applications/#local-emulation-mode","text":"The Kura user workspace can be used in Eclipse in local emulation mode (Linux/OS X only; this feature is not currently supported under Windows). To deploy the code to a running system, see the section Remote Target Device .","title":"Local Emulation Mode"},{"location":"java-application-development/deploy-and-debug-applications/#run-kura-in-emulator-mode","text":"In the Eclipse workspace, locate the org.eclipse.kura.emulator project. Expand it to show the src/main/resources folder. Right-click the Kura_Emulator.launch file. In the context menu, select the Run as option, and select the Kura_Emulator *. This will start Kura running locally and will display a Console window in the bottom pane in Eclipse. The Console window will show the OSGi diagnostics as various bundles start and execute. Because the org.eclipse.kura.example.hello_osgi bundle is in the workspace with a valid activate() method, it is automatically started with the Kura OSGi framework. Note the INFO message highlighted below that shows the bundle\u2019s activate() method was run.","title":"Run Kura in Emulator Mode"},{"location":"java-application-development/deploy-and-debug-applications/#list-osgi-bundles-in-local-mode","text":"With the OSGi framework running in the Eclipse console (refer to the previous section), click in the Console window. Press Enter/Return and then type the \u2018 ss \u2019 command to show a list of installed bundles. Note the bundle ID number for the org.eclipse.kura.example.hello_osgi bundle.","title":"List OSGi Bundles in Local Mode"},{"location":"java-application-development/deploy-and-debug-applications/#startstop-bundle-in-local-mode","text":"In the OSGi Console window in Eclipse, run the start ## or stop ## commands to start or stop a bundle, where the \u201c ## \u201d is either the bundle ID number or the bundle name (such as \u201cstart org.eclipse.kura.example.hello_osgi\u201d). Note that the INFO messages for both the activate() and deactivate() messages appear in the Console window when the bundle is started or stopped.","title":"Start/Stop Bundle in Local Mode"},{"location":"java-application-development/deploy-and-debug-applications/#installuninstall-bundle-in-local-mode","text":"In the OSGi Console window in Eclipse, bundles can be installed or uninstalled. To uninstall the example bundle, issue the command \u2018 uninstall ## \u2019, where \u201c ## \u201d is either the bundle ID number or the bundle name, such as: uninstall 47 or uninstall org.eclipse.kura.example.hello_osgi A message will appear indicating that the bundle has been stopped. Once the bundle has been uninstalled from the local OSGi console, it cannot be started or installed by number or name. Instead, it must be installed by using the plug-in JAR file created earlier. Issue the \u2018 install \u2019 command to install a bundle into the Emulation environment: install file:/[*path_to_bundle*]/[*bundle_name*].jar where \u201c[path_to_bundle] / [bundle_name] .jar\u201d should be replaced with the name of the bundle exported earlier (the section Hello World Using the Kura Logger ), as shown in the example below: install file:/Users/Nina/Documents/myPlugins/plugins/plugins/plugins/plugins/plugins/org.eclipse.kura.example.hello_osgi_ 1.0.0.201409101740.jar Then the bundle can be started or stopped, as described in the previous section, Start/Stop Bundle in Local Mode . Optionally, you can add the flag \u2018-start \u2019 to the \u2018 install \u2019 command to automatically start the bundle after installation.","title":"Install/Uninstall Bundle in Local Mode"},{"location":"java-application-development/deploy-and-debug-applications/#remote-target-device","text":"One or more OSGi bundles can be deployed to a remote device running Kura, either by installing separate bundle files or deployment packages using Eclipse. Warning These steps require Kura to be running on the target device. This method of deployment is temporary on the remote target device and is not persistent after a restart. To make the deployment permanent, see Making Deployment Permanent .","title":"Remote Target Device"},{"location":"java-application-development/deploy-and-debug-applications/#connect-to-remote-osgi-framework","text":"To deploy a bundle to the remote target device, you will need to connect Eclipse to the OSGi framework running on the device. This is done using mToolkit. See Kura Setup for instructions on installing mToolkit into the Eclipse development environment. Select the Eclipse menu Window | Show View | Other . Select mToolkit -> Frameworks entry to open the mToolkit Frameworks view. Enter a name for the framework definition and the IP address of the target device. Close the dialog by clicking the OK button. Warning The remote target device must have port 1450 open in its firewall, in order to allow mToolkit o make a connection to its OSGi framework. If this port is not opened, refer to the section Open Port for OSGi Remote Connection . Right-click the framework icon name and select Connect Framework . The list of installed bundles and deployment packages should be retrieved shortly. (Use the Disconnect Framework option to disconnect from the remote target framework when finished.)","title":"Connect to Remote OSGi Framework"},{"location":"java-application-development/deploy-and-debug-applications/#open-port-for-osgi-remote-connection","text":"In order to allow mToolkit to make a remote connection to the OSGi framework on the target device, the device must allow the incoming port in its firewall. To set this option, open a Web browser and log into Kura using its current IP address, such as: http://10.11.5.4 Click the Firewall icon and then click the Open Ports tab. If port 1450 is not shown in the list of allowed ports, click the New button under Open Ports. Enter the port 1450 and select protocol TCP . Then click Submit . Now, click Apply to apply changes to the remote device.","title":"Open Port for OSGi Remote Connection"},{"location":"java-application-development/deploy-and-debug-applications/#install-single-bundle-to-target-device","text":"With the Eclipse environment connected to the remote OSGi target framework, a single bundle can be installed on the remote device. In the mToolkit Frameworks view, right-click the Framework name and select Install Bundle . (This requires that you have exported the bundle as a deployable plug-in JAR file. See the section Hello World Using the Kura Logger .) Use the Browse button to select the JAR file and click OK to install it to the target device. The newly installed bundle should be shown in the Frameworks view under Bundles. To control operation of the bundle through the OSGi Frameworks view, right-click the bundle name. The following actions can be performed: Start \u2013 start the bundle Stop \u2013 stop the bundle Update \u2013 reinstall the bundle Install Bundle \u2013 install a different bundle Uninstall Bundle \u2013 remove this bundle from the target device Show Bundle IDs / Show Bundle Versions \u2013 show additional information about bundles You can also verify operation of the bundle on the target device itself. See the section Manage Bundles on Target Device .","title":"Install Single Bundle to Target Device"},{"location":"java-application-development/deploy-and-debug-applications/#install-deployment-package-to-target-device","text":"With the Eclipse environment connected to the remote OSGi target framework, a deployment package can be installed on the remote device. NOTE: If you have just installed the individual bundle in the previous section, you should uninstall it before proceeding. Doing so will avoid any confusion in having the same bundle installed twice. In the mToolkit Frameworks view, right-click the Framework name and select Install Deployment Package . (This step requires that you have exported the bundle as a deployable plug-in JAR file. See the section Hello World Using the Kura Logger for instructions on exporting the OSGi bundle.) Open the resources/dp folder in the Workspace filesystem directory, select the .dp file ( not the \u201c.dpp\u201d file), and click OK . The deployment package will be installed on the target device and shown in the Frameworks view under Deployment Packages. (The deployment package can also be uninstalled from the Framework view.) The bundle included in the deployment package can also be viewed under Bundles and can be controlled remotely (start/stop) as with other bundles. The operation of the bundle can also be verified on the target device itself. See the section Manage Bundles on Target Device .","title":"Install Deployment Package to Target Device"},{"location":"java-application-development/deploy-and-debug-applications/#connect-to-osgi-on-target-device","text":"You can manage the OSGi framework on a target device by logging into a console on the device using a connected keyboard and VGA monitor or over a network connection using SSH (PuTTY in Windows or \u2018 ssh \u2019 from Linux or Mac). At the command prompt, display the Kura log file with: tail -f /var/log/kura.log Connect to the OSGi framework by typing the following commands: telnet localhost 5002 There are many commands available in the OSGi console for managing bundles. Following are just a few useful commands: Command Description ss Lists names and ID of bundles help Displays the help menu of OSGi commands lb Lists all installed bundles and IDs h [bundle IDs] Displays bundle headers (i.e., Bundle Manifest Version, Name, Required Execution Environment, Symbolic Name, Version, Import Package, Manifest Version, and Service Component) exit Exits the OSGi console and stops Kura disconnect Exits the OSGi console, but leaves Kura running","title":"Connect to OSGi on Target Device"},{"location":"java-application-development/deploy-and-debug-applications/#manage-bundles-on-target-device","text":"From the OSGi command line, you can display a list of bundles with the \u2018 ss \u2019 command as shown in the example below: ss In this example, the org.eclipse.kura.example.hello_osgi bundle ID is 64. You can run the \u2018 start ## \u2019 or \u2018 stop ## \u2019 commands to start or stop a bundle, where the \u201c## \u201d is either the bundle ID number or the bundle name (such as \u201c start org.eclipse.kura.example.hello_osgi \u201d). To verify that the bundled is stopped, you can issue the \u2018 ss \u2019 command. If the bundled is stopped, the activity will show RESOLVED (as shown below). If the bundle is started, the activity will show ACTIVE (as shown above).","title":"Manage Bundles on Target Device"},{"location":"java-application-development/deploy-and-debug-applications/#set-kura-logger-levels","text":"Kura logger levels are defined in a configuration file. The messages that appear require a log statement in the application and that the log level of the statement matches the log level of the application (such as logger.info or logger.debug). To set or change logger levels, the Kura logger configuration file may be modified using the vi editor. From the Linux command prompt, enter the following command: vi /opt/eclipse/kura/kura/log4j.properties At the bottom of the \u201clog4j.properties\u201d file, there will be one or more \u201clog4j\u201d logger property entries, which determine the logger level used by the bundles at startup. In the example screen capture shown below, the \u201clog4j.logger.org.eclipse.kura\u201d property has been set to \u201cINFO\u201d, which applies to all bundles that start with \u201corg.eclipse.kura.\u201d Additional, more specific, properties may be defined as required for your particular logging needs. The property entries will take on the defined logger level at startup. The logger levels are hierarchical, so that those in a deeper level of the hierarchy will apply; otherwise, the more general logger level will override them. Once you have made the necessary changes, save and close the file using the \u2018 :wq \u2019 command. Restart Kura, and check the log levels in the OSGi console again to make sure that the desired levels have taken effect.","title":"Set Kura Logger Levels"},{"location":"java-application-development/deploy-and-debug-applications/#making-deployment-permanent","text":"The mToolkit deployment of a package is a temporary installation and does not make the package permanent. Once a set of bundles has been tested on the remote target device and is ready for permanent deployment, the software can be installed on a device with deployment packages from the command line of a target device using the instructions below: Copy the deployment package file (*.dp) to the target device, into the folder: /opt/eclipse/kura/kura/packages Edit the dpa.properties file through the vi editor by entering the following command: vi /opt/eclipse/kura/kura/dpa.properties Add an entry in the dpa.properties file to include the new package name, such as: package_name=file\\:/opt/eclipse/kura/kura/packages/package_filename.dp where, \u201cpackage_name\u201d and \u201cpackage_filename\u201d should be replaced with the actual name of the deployment package. Save and close the file using the \u2018 :wq \u2019 command. Then restart Kura, and the new package should be installed in addition to the default Kura package. In conclusion, this section described how to test a bundle in an Emulation environment within the Eclipse IDE and how to install bundles and Deployment Packages to a remote target system running Kura.","title":"Making Deployment Permanent"},{"location":"java-application-development/development-environment-setup/","text":"Development Environment Setup In this document we'll cover the required steps to setup the Development Environment for contributing to the Eclipse Kura project. If, instead, you want to develop applications or bundles running on Eclipse Kura refer to the Eclipse Kura Workspace setup guide . The Eclipse Kura development environment may be installed on Windows, Linux, or Mac OS. The setup instructions will be the same across each OS though each system may have unique characteristics. Info The local emulation of Eclipse Kura code is only supported in Linux and Mac, not in Windows. This document will cover the use of Eclipse Oomph installer which is the easiest way to install and configure the Eclipse IDE to start contributing to Eclipse Kura. The setup requires three basic steps: Requirements installation Eclipse Oomph setup Eclipse Kura maven build Requirements Before building Eclipse Kura, you need to have the following programs installed in your system: JDK 1.8 (or JDK 17) Maven 3.5.x (or greater) Recommended additional software: Git Installing Prerequisites in Mac OS To install Java 8, download the JDK tar archive from the Adoptium Project Repository . Once downloaded, copy the tar archive in /Library/Java/JavaVirtualMachines/ and cd into it. Unpack the archive with the following command: sudo tar -xzf <archive-name>.tar.gz The tar archive can be deleted afterwards. Depending on which terminal you are using, edit the profiles (.zshrc, .profile, .bash_profile) to contain: # Adoptium JDK 8 export JAVA_8_HOME = /Library/Java/JavaVirtualMachines/<archive-name>/Contents/Home alias java8 = 'export JAVA_HOME=$JAVA_8_HOME' java8 Reload the terminal and run java -version to make sure it is installed correctly. Using Brew you can easily install Maven from the command line: brew install maven@3.5 Run mvn -version to ensure that Maven has been added to the PATH. If Maven cannot be found, try running brew link maven@3.5 --force or manually add it to your path with: export PATH = \"/usr/local/opt/maven@3.5/bin: $PATH \" Installing Prerequisites in Linux For Java sudo apt install openjdk-8-jdk For Maven You can follow the tutorial from the official Maven site. Remember that you need to install 3.5.x version or greater. Eclipse Oomph setup Download the latest Eclipse Installer appropriate for your platform from the Eclipse Downloads page and start it. Switch to \"Advanced Mode\" (top right hamburger menu) and select \"Eclipse IDE for Eclipse Committers\" and configure the \"Product Version\" to be the version 2023-03 or newer. Select the Eclipse Kura installer from the list. If this is not available, add a new installer from https://raw.githubusercontent.com/eclipse/kura/develop/kura/setups/kura.setup , then check and press the \"Next\" button. Variables setup Select the \"Developer Type\": \"User\" : if you want to develop applications or bundles running on Eclipse Kura, select this option. It will install only the APIs and the examples. \"Developer\" : if you are a framework developer, select this option. It will download and configure the Eclipse Kura framework (for the purpose of this document we'll use this option) Set the JRE 1.8 location value to the installed local jdk-8 VM Update Eclipse Kura Git repository username (prefer the anonymous HTTPS option, link to your fork) and customize further settings if you like (e.g. Root install folder, Installation folder name). To show these options, make sure that the \"Show all variables\" checkbox is enabled. If you plan to contribute to Eclipse Kura you might want to create a fork , see our contributing guide for further informations. For the purpose of this tutorial we'll work with a fictional fork for the username user . To clone the repo use the link appropriate for your fork, in our case it will be: https://github.com/user/kura.git Keep in mind that the \"Root install folder\" is where the Eclipse executable will be installed and the Eclipse Kura sources will be downloaded (in the git subfolder). Press Next, leave all Bootstrap Tasks selected and press the Finish button Accept all the licenses and wait for the installation to finish. At first startup Eclipse IDE will checkout the code, perform a full build and configure a few Working Sets When the tasks are completed, go to into the Package Explorer and Target Platform > Target-Definition > Kura Target Platform Equinox 3.16.0, and press \"Set as Target Platform\" located at the top right of the window: Eclipse Kura maven build Navigate to the git folder created within the Eclipse workspace ( ~/iot-kura-workspace in the example above) and build the target platform: mvn -f target-platform/pom.xml clean install Then build the core components: mvn -f kura/pom.xml clean install Build the examples (optional): mvn -f kura/examples/pom.xml clean install Build the target profiles: mvn -f kura/distrib/pom.xml clean install -DbuildAll Note You can skip tests by adding -Dmaven.test.skip=true in the commands above and you can compile a specific target by specifying the profile (e.g. -Praspberry-pi-armhf ). Build scripts Alternatively you can use the build scripts available in the root directory. ./build-all.sh or ./build-menu.sh and select the profiles you want to build.","title":"Kura Development Environment Setup"},{"location":"java-application-development/development-environment-setup/#development-environment-setup","text":"In this document we'll cover the required steps to setup the Development Environment for contributing to the Eclipse Kura project. If, instead, you want to develop applications or bundles running on Eclipse Kura refer to the Eclipse Kura Workspace setup guide . The Eclipse Kura development environment may be installed on Windows, Linux, or Mac OS. The setup instructions will be the same across each OS though each system may have unique characteristics. Info The local emulation of Eclipse Kura code is only supported in Linux and Mac, not in Windows. This document will cover the use of Eclipse Oomph installer which is the easiest way to install and configure the Eclipse IDE to start contributing to Eclipse Kura. The setup requires three basic steps: Requirements installation Eclipse Oomph setup Eclipse Kura maven build","title":"Development Environment Setup"},{"location":"java-application-development/development-environment-setup/#requirements","text":"Before building Eclipse Kura, you need to have the following programs installed in your system: JDK 1.8 (or JDK 17) Maven 3.5.x (or greater) Recommended additional software: Git","title":"Requirements"},{"location":"java-application-development/development-environment-setup/#installing-prerequisites-in-mac-os","text":"To install Java 8, download the JDK tar archive from the Adoptium Project Repository . Once downloaded, copy the tar archive in /Library/Java/JavaVirtualMachines/ and cd into it. Unpack the archive with the following command: sudo tar -xzf <archive-name>.tar.gz The tar archive can be deleted afterwards. Depending on which terminal you are using, edit the profiles (.zshrc, .profile, .bash_profile) to contain: # Adoptium JDK 8 export JAVA_8_HOME = /Library/Java/JavaVirtualMachines/<archive-name>/Contents/Home alias java8 = 'export JAVA_HOME=$JAVA_8_HOME' java8 Reload the terminal and run java -version to make sure it is installed correctly. Using Brew you can easily install Maven from the command line: brew install maven@3.5 Run mvn -version to ensure that Maven has been added to the PATH. If Maven cannot be found, try running brew link maven@3.5 --force or manually add it to your path with: export PATH = \"/usr/local/opt/maven@3.5/bin: $PATH \"","title":"Installing Prerequisites in Mac OS"},{"location":"java-application-development/development-environment-setup/#installing-prerequisites-in-linux","text":"For Java sudo apt install openjdk-8-jdk For Maven You can follow the tutorial from the official Maven site. Remember that you need to install 3.5.x version or greater.","title":"Installing Prerequisites in Linux"},{"location":"java-application-development/development-environment-setup/#eclipse-oomph-setup","text":"Download the latest Eclipse Installer appropriate for your platform from the Eclipse Downloads page and start it. Switch to \"Advanced Mode\" (top right hamburger menu) and select \"Eclipse IDE for Eclipse Committers\" and configure the \"Product Version\" to be the version 2023-03 or newer. Select the Eclipse Kura installer from the list. If this is not available, add a new installer from https://raw.githubusercontent.com/eclipse/kura/develop/kura/setups/kura.setup , then check and press the \"Next\" button. Variables setup Select the \"Developer Type\": \"User\" : if you want to develop applications or bundles running on Eclipse Kura, select this option. It will install only the APIs and the examples. \"Developer\" : if you are a framework developer, select this option. It will download and configure the Eclipse Kura framework (for the purpose of this document we'll use this option) Set the JRE 1.8 location value to the installed local jdk-8 VM Update Eclipse Kura Git repository username (prefer the anonymous HTTPS option, link to your fork) and customize further settings if you like (e.g. Root install folder, Installation folder name). To show these options, make sure that the \"Show all variables\" checkbox is enabled. If you plan to contribute to Eclipse Kura you might want to create a fork , see our contributing guide for further informations. For the purpose of this tutorial we'll work with a fictional fork for the username user . To clone the repo use the link appropriate for your fork, in our case it will be: https://github.com/user/kura.git Keep in mind that the \"Root install folder\" is where the Eclipse executable will be installed and the Eclipse Kura sources will be downloaded (in the git subfolder). Press Next, leave all Bootstrap Tasks selected and press the Finish button Accept all the licenses and wait for the installation to finish. At first startup Eclipse IDE will checkout the code, perform a full build and configure a few Working Sets When the tasks are completed, go to into the Package Explorer and Target Platform > Target-Definition > Kura Target Platform Equinox 3.16.0, and press \"Set as Target Platform\" located at the top right of the window:","title":"Eclipse Oomph setup"},{"location":"java-application-development/development-environment-setup/#eclipse-kura-maven-build","text":"Navigate to the git folder created within the Eclipse workspace ( ~/iot-kura-workspace in the example above) and build the target platform: mvn -f target-platform/pom.xml clean install Then build the core components: mvn -f kura/pom.xml clean install Build the examples (optional): mvn -f kura/examples/pom.xml clean install Build the target profiles: mvn -f kura/distrib/pom.xml clean install -DbuildAll Note You can skip tests by adding -Dmaven.test.skip=true in the commands above and you can compile a specific target by specifying the profile (e.g. -Praspberry-pi-armhf ).","title":"Eclipse Kura maven build"},{"location":"java-application-development/development-environment-setup/#build-scripts","text":"Alternatively you can use the build scripts available in the root directory. ./build-all.sh or ./build-menu.sh and select the profiles you want to build.","title":"Build scripts"},{"location":"java-application-development/hello-world-application/","text":"Hello World Application Overview This section provides a simple example of how to create a Kura \u201cHello World\u201d OSGi project using Eclipse. With this example, you will learn how to perform the following functions: Create a plugin project Consume the Kura Logger service Write an OSGi Activator Export a single OSGi bundle (plug-in) Create a Deployment Package Prerequisites Setting up the Kura Development Environment Hello World Using the Kura Logger Create Hello World Plug-in In Eclipse, create a new Plug-in project by selecting File | New | Project . Select Plug-in Development | Plug-in Project and click Next . Your screen should display the New Plug-in Project dialog box as shown in the following screen capture. Enter your project a name, such as \u201corg.eclipse.kura.example.hello_osgi\u201d, in the appropriate field. Under Target Platform, ensure that the an OSGi framework option button is selected and set the variable to standard as shown below. You can also (optionally) add projects to a working set. To continue, click Next . In the next New Plug-in Project menu (shown below), change the Name field to a descriptive name, such as \u201cHello World Example with Logger\u201d. Also, verify that the Execution Environment list is set to match the Java JVM version running on the target device ( JavaSE-1.8 or JavaSE-11 ). To determine the JVM version running on the target device, log in to its administrative console and enter the command java \u2013version Finally, uncheck the Generate an activator, a Java class that controls the plug-in\u2019s life cycle option button. For the purposes of this example, a single class will be used. An Activator class will not be created; instead, OSGi Declarative Services will be used to start and stop the bundle. Click Finish . If the Open Associated Perspective pop-up window (shown below) appears for adding Plug-ins and Error Log views, select Yes or No depending on your development requirements. You should see the new project in the My Projects working set in the Package Explorer (or Project Explorer). Also, you will see the MANIFEST.MF was automatically opened in the Manifest Editor. An OSGi bundle is a regular Java .jar file that contains Java code and resources and a custom Manifest and an Activator. Add Dependencies to Manifest First, you will use the Manifest Editor in Eclipse to add some dependencies. Click the Dependencies tab at the bottom of the editor screen and then click the Automated Management of Dependencies heading to expand it. Under Automated Management of Dependencies, click Add . In the Select a Plug-in field, enter org.eclipse.osgi.services . Select the plug-in name and click OK . Note that this operation is very much like adding standalone jars to the buildpath by including the \u2018-cp\u2019 argument to javac. However, in this case you are telling Eclipse where to find these dependencies the \u201cOSGi way\u201d, so it is aware of them at compile time. Click Add again and use the same procedure to add the following dependency: slf4j.api You should now see the list of dependencies. Save changes to the Manifest. Create Java Class Now you are ready to start writing a simple Java class. Right-click the org.eclipse.kura.example.hello_osgi project. Select New | Class . The New Java Class window appears as shown below. Set the Source folder to org.eclipse.kura.example.hello_osgi/src . Set the Package field to org.eclipse.kura.example.hello_osgi , set the Name field to HelloOsgi , and then click Finish . Write the following code for the new class. You can copy and paste the code provided below into your newly created Java class file. package org.eclipse.kura.example.hello_osgi ; public class HelloOsgi { private static final Logger s_logger = LoggerFactory . getLogger ( HelloOsgi . class ); private static final String APP_ID = \"org.eclipse.kura.example.hello_osgi\" ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); s_logger . debug ( APP_ID + \": This is a debug message.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } } The activate() method is the entry point when the bundle in started. The deactivate() method is the entry point when the bundle is stopped. Notice the use of the private LoggerFactory.getLogger() method. If the LoggerFactory method is present (running) in the OSGi framework and your hello_osgi bundle is started, your activate method is called, and you can simply access the service by calling the getLogger() method. One convenient feature of Eclipse, auto-completion, is worth mentioning here. If you type \u2018s_logger.\u2019 (instance name of the \u201cLoggerFactory.getLogger\u201d method) and stop after the period, it will show you a list of methods implemented in that class. The examples above show two different methods used for logging messages. Logger methods include: \u201cerror\u201d, \u201cwarn\u201d, \u201cinfo\u201d, \u201cdebug\u201d, and \u201ctrace\u201d, which represent increasingly lower (more detailed) levels of log information. Logger levels should generally be used to represent the following conditions: ERROR - A serious problem has occurred that requires attention from the system administrator. WARNING - An action occurred or a condition was discovered that should be reviewed and may require action before an error occurs. It may also be used for transient issues. INFO - A report of a normal action or event. This could be a user operation, such as \"login completed\", or an automatic operation, such as a log file rotation. DEBUG - A debug message used for troubleshooting or performance monitoring. It typically contains detailed event data including things an application developer would need to know. TRACE - A fairly detailed output of diagnostic logging, such as actual bytes of a particular message being examined. Resolve Dependencies At this point, there will be errors in your code because of unresolved imports. Select the menu Source | Organize Imports to resolve these errors. Because you added the \u201corg.slf4j\u201d to your dependency list, you will be prompted to choose one of two potential sources for importing the \u201cLogger\u201d class. Select org.slf4j.Logger and click Finish . Now the errors in the class should have been resolved. Save the HelloOsgi class. The complete set of code (with import statements) is shown below. package org.eclipse.kura.example.hello_osgi ; import org.osgi.service.component.ComponentContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class HelloOsgi { private static final Logger s_logger = LoggerFactory . getLogger ( HelloOsgi . class ); private static final String APP_ID = \"org.eclipse.kura.example.hello_osgi\" ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); s_logger . debug ( APP_ID + \": This is a debug message.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } } For more information on using the Simple Logging Facade for Java (slf4j), see the Logger API . Switch back to the Manifest Editor. Under Automated Management of Dependencies, ensure the Import-Package option button is selected. Click the add dependencies link to automatically add packages to the dependencies list based on the \u201cimport\u201d statements in your example code. Save changes to the Manifest again. Create Component Class Right-click the example project and select New | Other . From the wizard, select Plug-in Development | Component Definition and click Next . Warning This option is available only if the Plug-in Development Environment (PDE) is installed in Eclipse (plugins can be installed into Eclipse IDE by searching the name in the Eclipse Marketplace under the Help menu). In the Class field of the New Component Definition window shown below, click Browse. Enter the name of your newly created class in the Select entries field. In this case, type the word \u201chello\u201d, and you will see a list of matching items. Select the HelloOsgi class and click OK . In the Enter or select the parent folder field of the New Component Definition window, add \"/OSGI-INF\" to the existing entry (e.g., org.eclipse.kura.example.hello_osgi/OSGI-INF). Then click Finish . After the Component class has been created, it will open in the Workspace. In the Overview tab, the Name and Class point to our Java class. Set the Activate field to activate and set the Deactivate field to deactivate . Doing so tells the component where these OSGi activation methods are located. Then save the Component class definition file. Deploying the Plug-in The next few sections describe how to create a stand-alone JAR file as a deployable OSGI plug-in and how to create an installable Deployment Package. An OSGi bundle is a Java archive file containing Java code, resources, and a Manifest. A Deployment Package is a set of resources grouped into a single package file that may be deployed in the OSGi framework through the Deployment Admin service and may contain one or more bundles, configuration objects, etc. Export the OSGi Bundle Your bundle can be built as a stand-alone OSGi plug-in. To do so, right-click the project and select the Export menu. This is equivalent to running javac on your project. From the wizard, select Plug-in Development | Deployable plug-ins and fragments and click Next . Under Available Plug-ins and Fragments of the Export window, ensure the newly created plug-in is selected. Under Destination, select the Directory option button and use the Browse button to select an appropriate place to save the JAR file on the local file system. NOTE: During the deployment process that is described in the following section, you will need to remember the location where this JAR file is saved. Click Finish . This will create a JAR file in the selected directory (e.g., /home/joe/myPlugins/plugins/org.eclipse.kura.example.hello_osgi_1.0.0.jar). Create a Deployment Package Rather than creating a stand-alone plug-in, you can also create a Deployment Package that contains multiple bundles, configuration elements, etc. that can be deployed into an OSGi framework. In this example, you will simply create a Deployment Package containing the \u201chello_osgi\u201d bundle. This step requires mToolkit to be installed. (See Kura Setup for instructions on setting up the Eclipse development environment.) Right-click the project and select New | Folder . Select the org.eclipse.kura.example.hello_osgi project and enter a folder named \u201cresources\u201d. Then repeat this step to create a folder named \u201cdp\u201d under the resources folder. The resources/dp folder will be used to store the Deployment Package. Select File | New | Other . Select OSGi | Deployment Package Definition and click Next . Ensure that the Target folder field of the New dpp file window is set to the / [project_name] /resources/dp folder. In the File name field, enter the name for the new Deployment Package file to create, such as \u201chello_osgi\u201d. A version number can also be entered in the Version field. Then click Finish . Under the resources/dp folder in your project, verify that the [filename] .dpp file was created. This is a Deployment Package Project that provides information needed to create the Deployment Package, such as its output directory, ant build file, etc. Select the Bundles tab and then click New . In the Bundle Path column, select the browse icon. Browse to the bundle\u2019s JAR file created earlier . Select the file and click Open . Doing so should populate the remaining columns as needed. Save changes to the deployment package file. In the resources/dp folder, right-click the .dpp file. Select Quick Build . A new [filename] .dp file will be created in the same directory. This is the final Deployment Package that can be installed on a remote target system. In conclusion, you were able to create a new bundle from scratch, write the Java code and Activator, modify the Manifest, and build the plug-in and/or Deployment Package that can be used in a Kura environment. The next steps will be to test your code in an Emulation mode and/or to deploy your code to a target system running Kura. See Testing and Deploying Bundles to continue with those steps.","title":"Hello World Application"},{"location":"java-application-development/hello-world-application/#hello-world-application","text":"","title":"Hello World Application"},{"location":"java-application-development/hello-world-application/#overview","text":"This section provides a simple example of how to create a Kura \u201cHello World\u201d OSGi project using Eclipse. With this example, you will learn how to perform the following functions: Create a plugin project Consume the Kura Logger service Write an OSGi Activator Export a single OSGi bundle (plug-in) Create a Deployment Package","title":"Overview"},{"location":"java-application-development/hello-world-application/#prerequisites","text":"Setting up the Kura Development Environment","title":"Prerequisites"},{"location":"java-application-development/hello-world-application/#hello-world-using-the-kura-logger","text":"","title":"Hello World Using the Kura Logger"},{"location":"java-application-development/hello-world-application/#create-hello-world-plug-in","text":"In Eclipse, create a new Plug-in project by selecting File | New | Project . Select Plug-in Development | Plug-in Project and click Next . Your screen should display the New Plug-in Project dialog box as shown in the following screen capture. Enter your project a name, such as \u201corg.eclipse.kura.example.hello_osgi\u201d, in the appropriate field. Under Target Platform, ensure that the an OSGi framework option button is selected and set the variable to standard as shown below. You can also (optionally) add projects to a working set. To continue, click Next . In the next New Plug-in Project menu (shown below), change the Name field to a descriptive name, such as \u201cHello World Example with Logger\u201d. Also, verify that the Execution Environment list is set to match the Java JVM version running on the target device ( JavaSE-1.8 or JavaSE-11 ). To determine the JVM version running on the target device, log in to its administrative console and enter the command java \u2013version Finally, uncheck the Generate an activator, a Java class that controls the plug-in\u2019s life cycle option button. For the purposes of this example, a single class will be used. An Activator class will not be created; instead, OSGi Declarative Services will be used to start and stop the bundle. Click Finish . If the Open Associated Perspective pop-up window (shown below) appears for adding Plug-ins and Error Log views, select Yes or No depending on your development requirements. You should see the new project in the My Projects working set in the Package Explorer (or Project Explorer). Also, you will see the MANIFEST.MF was automatically opened in the Manifest Editor. An OSGi bundle is a regular Java .jar file that contains Java code and resources and a custom Manifest and an Activator.","title":"Create Hello World Plug-in"},{"location":"java-application-development/hello-world-application/#add-dependencies-to-manifest","text":"First, you will use the Manifest Editor in Eclipse to add some dependencies. Click the Dependencies tab at the bottom of the editor screen and then click the Automated Management of Dependencies heading to expand it. Under Automated Management of Dependencies, click Add . In the Select a Plug-in field, enter org.eclipse.osgi.services . Select the plug-in name and click OK . Note that this operation is very much like adding standalone jars to the buildpath by including the \u2018-cp\u2019 argument to javac. However, in this case you are telling Eclipse where to find these dependencies the \u201cOSGi way\u201d, so it is aware of them at compile time. Click Add again and use the same procedure to add the following dependency: slf4j.api You should now see the list of dependencies. Save changes to the Manifest.","title":"Add Dependencies to Manifest"},{"location":"java-application-development/hello-world-application/#create-java-class","text":"Now you are ready to start writing a simple Java class. Right-click the org.eclipse.kura.example.hello_osgi project. Select New | Class . The New Java Class window appears as shown below. Set the Source folder to org.eclipse.kura.example.hello_osgi/src . Set the Package field to org.eclipse.kura.example.hello_osgi , set the Name field to HelloOsgi , and then click Finish . Write the following code for the new class. You can copy and paste the code provided below into your newly created Java class file. package org.eclipse.kura.example.hello_osgi ; public class HelloOsgi { private static final Logger s_logger = LoggerFactory . getLogger ( HelloOsgi . class ); private static final String APP_ID = \"org.eclipse.kura.example.hello_osgi\" ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); s_logger . debug ( APP_ID + \": This is a debug message.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } } The activate() method is the entry point when the bundle in started. The deactivate() method is the entry point when the bundle is stopped. Notice the use of the private LoggerFactory.getLogger() method. If the LoggerFactory method is present (running) in the OSGi framework and your hello_osgi bundle is started, your activate method is called, and you can simply access the service by calling the getLogger() method. One convenient feature of Eclipse, auto-completion, is worth mentioning here. If you type \u2018s_logger.\u2019 (instance name of the \u201cLoggerFactory.getLogger\u201d method) and stop after the period, it will show you a list of methods implemented in that class. The examples above show two different methods used for logging messages. Logger methods include: \u201cerror\u201d, \u201cwarn\u201d, \u201cinfo\u201d, \u201cdebug\u201d, and \u201ctrace\u201d, which represent increasingly lower (more detailed) levels of log information. Logger levels should generally be used to represent the following conditions: ERROR - A serious problem has occurred that requires attention from the system administrator. WARNING - An action occurred or a condition was discovered that should be reviewed and may require action before an error occurs. It may also be used for transient issues. INFO - A report of a normal action or event. This could be a user operation, such as \"login completed\", or an automatic operation, such as a log file rotation. DEBUG - A debug message used for troubleshooting or performance monitoring. It typically contains detailed event data including things an application developer would need to know. TRACE - A fairly detailed output of diagnostic logging, such as actual bytes of a particular message being examined.","title":"Create Java Class"},{"location":"java-application-development/hello-world-application/#resolve-dependencies","text":"At this point, there will be errors in your code because of unresolved imports. Select the menu Source | Organize Imports to resolve these errors. Because you added the \u201corg.slf4j\u201d to your dependency list, you will be prompted to choose one of two potential sources for importing the \u201cLogger\u201d class. Select org.slf4j.Logger and click Finish . Now the errors in the class should have been resolved. Save the HelloOsgi class. The complete set of code (with import statements) is shown below. package org.eclipse.kura.example.hello_osgi ; import org.osgi.service.component.ComponentContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class HelloOsgi { private static final Logger s_logger = LoggerFactory . getLogger ( HelloOsgi . class ); private static final String APP_ID = \"org.eclipse.kura.example.hello_osgi\" ; protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has started!\" ); s_logger . debug ( APP_ID + \": This is a debug message.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Bundle \" + APP_ID + \" has stopped!\" ); } } For more information on using the Simple Logging Facade for Java (slf4j), see the Logger API . Switch back to the Manifest Editor. Under Automated Management of Dependencies, ensure the Import-Package option button is selected. Click the add dependencies link to automatically add packages to the dependencies list based on the \u201cimport\u201d statements in your example code. Save changes to the Manifest again.","title":"Resolve Dependencies"},{"location":"java-application-development/hello-world-application/#create-component-class","text":"Right-click the example project and select New | Other . From the wizard, select Plug-in Development | Component Definition and click Next . Warning This option is available only if the Plug-in Development Environment (PDE) is installed in Eclipse (plugins can be installed into Eclipse IDE by searching the name in the Eclipse Marketplace under the Help menu). In the Class field of the New Component Definition window shown below, click Browse. Enter the name of your newly created class in the Select entries field. In this case, type the word \u201chello\u201d, and you will see a list of matching items. Select the HelloOsgi class and click OK . In the Enter or select the parent folder field of the New Component Definition window, add \"/OSGI-INF\" to the existing entry (e.g., org.eclipse.kura.example.hello_osgi/OSGI-INF). Then click Finish . After the Component class has been created, it will open in the Workspace. In the Overview tab, the Name and Class point to our Java class. Set the Activate field to activate and set the Deactivate field to deactivate . Doing so tells the component where these OSGi activation methods are located. Then save the Component class definition file.","title":"Create Component Class"},{"location":"java-application-development/hello-world-application/#deploying-the-plug-in","text":"The next few sections describe how to create a stand-alone JAR file as a deployable OSGI plug-in and how to create an installable Deployment Package. An OSGi bundle is a Java archive file containing Java code, resources, and a Manifest. A Deployment Package is a set of resources grouped into a single package file that may be deployed in the OSGi framework through the Deployment Admin service and may contain one or more bundles, configuration objects, etc.","title":"Deploying the Plug-in"},{"location":"java-application-development/hello-world-application/#export-the-osgi-bundle","text":"Your bundle can be built as a stand-alone OSGi plug-in. To do so, right-click the project and select the Export menu. This is equivalent to running javac on your project. From the wizard, select Plug-in Development | Deployable plug-ins and fragments and click Next . Under Available Plug-ins and Fragments of the Export window, ensure the newly created plug-in is selected. Under Destination, select the Directory option button and use the Browse button to select an appropriate place to save the JAR file on the local file system. NOTE: During the deployment process that is described in the following section, you will need to remember the location where this JAR file is saved. Click Finish . This will create a JAR file in the selected directory (e.g., /home/joe/myPlugins/plugins/org.eclipse.kura.example.hello_osgi_1.0.0.jar).","title":"Export the OSGi Bundle"},{"location":"java-application-development/hello-world-application/#create-a-deployment-package","text":"Rather than creating a stand-alone plug-in, you can also create a Deployment Package that contains multiple bundles, configuration elements, etc. that can be deployed into an OSGi framework. In this example, you will simply create a Deployment Package containing the \u201chello_osgi\u201d bundle. This step requires mToolkit to be installed. (See Kura Setup for instructions on setting up the Eclipse development environment.) Right-click the project and select New | Folder . Select the org.eclipse.kura.example.hello_osgi project and enter a folder named \u201cresources\u201d. Then repeat this step to create a folder named \u201cdp\u201d under the resources folder. The resources/dp folder will be used to store the Deployment Package. Select File | New | Other . Select OSGi | Deployment Package Definition and click Next . Ensure that the Target folder field of the New dpp file window is set to the / [project_name] /resources/dp folder. In the File name field, enter the name for the new Deployment Package file to create, such as \u201chello_osgi\u201d. A version number can also be entered in the Version field. Then click Finish . Under the resources/dp folder in your project, verify that the [filename] .dpp file was created. This is a Deployment Package Project that provides information needed to create the Deployment Package, such as its output directory, ant build file, etc. Select the Bundles tab and then click New . In the Bundle Path column, select the browse icon. Browse to the bundle\u2019s JAR file created earlier . Select the file and click Open . Doing so should populate the remaining columns as needed. Save changes to the deployment package file. In the resources/dp folder, right-click the .dpp file. Select Quick Build . A new [filename] .dp file will be created in the same directory. This is the final Deployment Package that can be installed on a remote target system. In conclusion, you were able to create a new bundle from scratch, write the Java code and Activator, modify the Manifest, and build the plug-in and/or Deployment Package that can be used in a Kura environment. The next steps will be to test your code in an Emulation mode and/or to deploy your code to a target system running Kura. See Testing and Deploying Bundles to continue with those steps.","title":"Create a Deployment Package"},{"location":"java-application-development/how-to-manage-network-settings/","text":"How to manage Network Settings This section provides an example of how to create a Kura bundle that can be used to configure the network interfaces of your device. In this example, you will learn how to perform the following functions: Create a plugin that configures the network interfaces Connect to a wireless access point Create a wireless access point As written, the example code configures the device with a static Wi-Fi configuration. Typically, the device settings would be defined through the Kura Gateway Administration Console instead of through Java code. A more practical application of this example is for IP network interfaces that need to be dynamically modified based on some external trigger or condition, such as geo-fencing. The Kura framework allows the device to be programmatically changed via its APIs based on application-specific logic. Prerequisites Setting up the Eclipse Kura Development Environment Network Configuration with Kura Hardware Setup This example requires an embedded device running Kura with at least one Ethernet port and Wi-Fi support. Additionally, the Connect to an Access Point section requires a wireless access point and the following information about the access point: SSID (Network Name) Security Type (WEP, WPA, or WPA2), if any Password/Passphrase, if any Lastly, the Create an Access Point section requires: A wireless device, such as a laptop, to test the access point. Optionally, you may connect the Kura device\u2019s Ethernet port to another network and use Kura as a gateway to that network. Determine Your Network Interfaces In order to determine your network interfaces, run one of the following commands at a terminal on the embedded gateway: ifconfig -a or ip link show Typical network interfaces will appear as follows: lo - loopback interface eth0 - first Ethernet network interface wlan0 - first wireless network interface ppp0 - first point-to-point protocol network interface, which could be a dial-up modem, PPTP VPN connection, cellular modem, etc. Make note of your wireless interface. For this tutorial, we will assume the wireless interface name is \u2018wlan0\u2019. Kura Networking API The networking API consists of two basic services: org.eclipse.kura.net.NetworkService and org.eclipse.kura.net.NetworkAdminService . The NetworkService is used to get the current state of the network. For example, the getNetworkInterfaces() method will return a List of NetInterface objects (such as EthernetInterface or WifiInterface) for each interface. This provides a detailed representation of the current state of that interface, such as its type, whether it is currently up, and its current address, which is returned by the getNetInterfaceAddresses() method as a List of NetInterfaceAddress objects. The NetworkService can also be used to get a list of all the network interface names available on the system, or a list of all the Wi-Fi access points that are currently detected by the system. The NetworkAdminService is used to get and set the configuration for each interface. Similar to the NetworkService, it has a getNetworkInterfaceConfigs() that returns a List of NetInterfaceConfig objects (such as EthernetInterfaceConfig and WifiInterfaceConfig) for each interface. These have the same methods as a NetInterface object but represent the current configuration for that interface. For a NetInterfaceConfig object, the getNetInterfaceAddress() method will return a List of NetInterfaceAddressConfig objects. These NetInterfaceAddressConfig instances, in turn, contain a List of NetConfig objects that define the configuration for that interface. There are many types of NetConfig objects, including: NetConfigIP4 - contains the IPv4 address configuration WifiConfig - contains the Wi-Fi configuration. Note that a WifiInterfaceAddressConfig may contain multiple WifiConfigs, since a configuration might exist for one or more Wi-Fi modes. The currently active WifiConfig is the one with a WifiMode that matches the WifiInterfaceAddressConfig WifiMode. DhcpServerConfigIP4 - contains the IPv4-based DHCP server configuration DnsServerConfigIP4 - contains the IPv4-based DNS server configuration FirewallNatConfig - contains the firewall NAT configuration These NetConfigs can also be used to configure an interface by providing them as a list to the updateEthernetInterfaceConfig() , updateWifiInterfaceConfig() , or updateModemInterfaceConfig() methods in the NetworkAdminService. Connect to an Access Point In this section, you will develop a Kura network configuration bundle that sets up the Wi-Fi interface as a client to a wireless access point. Implement the Bundle To implement the network configuration bundle, perform the following steps: Note For more detailed information about bundle development (i.e., the plug-in project, classes, and MANIFEST file configuration), please refer to the Hello World Application Create a Plug-in Project named org.eclipse.kura.example.network ; set the an OSGi framework option to standard ; uncheck the Generate an activator option; and set the Execution Environment variable to match the JVM on your target device. Include the following bundles in the MANIFEST.MF: org.eclipse.kura org.eclipse.kura.net org.eclipse.kura.net.dhcp org.eclipse.kura.net.firewall org.eclipse.kura.net.wifi org.osgi.service.component org.slf4j Create a class named NetworkConfigExample in the org.eclipse.kura.example.network project. Create an OSGI-INF folder in the org.eclipse.kura.example.network project. Add a Component Class with the parent folder org.eclipse.kura.example.network/OSGI-INF, Component Name org.eclipse.kura.example.network, and Class org.eclipse.kura.example.network.NetworkConfigExample. Select the Services tab in the component.xml file. Under Referenced Services, add org.eclipse.kura.net.NetworkAdminService . Edit the properties of this service, and configure the Bind property to setNetworkAdminService and Unbind to unsetNetworkAdminService as shown in the following screen capture. These settings are required because of the dependency on NetworkAdminService. The following source code will also need to be implemented: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/component.xml - declarative services definition describing what services are exposed by and consumed by this bundle. org.eclipse.kura.example.network.NetworkConfigExample.java - main implementation class. META-INF/MANIFEST.MF File The META-INF/MANIFEST.MF file should look as follows when complete: Warning Whitespace is significant in this file; make sure yours matches this file exactly. Manifest-Version: 1.0 Bundle-ManifestVersion: 2 Bundle-Name: Network Bundle-SymbolicName: org.eclipse.kura.example.network Bundle-Version: 1.0.0.qualifier Bundle-Vendor: ECLIPSE Bundle-RequiredExecutionEnvironment: JavaSE-1.7 Import-Package: org.eclipse.kura, org.eclipse.kura.net, org.eclipse.kura.net.dhcp, org.eclipse.kura.net.firewall, org.eclipse.kura.net.wifi, org.osgi.service.component;version=\"1.2.0\", org.slf4j;version=\"1.6.4\" Service-Component: OSGI-INF/component.xml OSGI-INF/component.xml File <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" name= \"org.eclipse.kura.example.network.NetworkConfigExample\" activate= \"activate\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" configuration-policy= \"require\" modified= \"updated\" > <implementation class= \"org.eclipse.kura.example.network.NetworkConfigExample\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <reference name= \"NetworkAdminService\" interface= \"org.eclipse.kura.net.NetworkAdminService\" policy= \"static\" cardinality= \"1..1\" bind= \"setNetworkAdminService\" unbind= \"unsetNetworkAdminService\" /> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.network.NetworkConfigExample\" /> </scr:component> org.eclipse.kura.example.network.NetworkConfigExample.java package org.eclipse.kura.example.network ; import java.util.ArrayList ; import java.util.List ; import org.osgi.service.component.ComponentContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.eclipse.kura.KuraException ; import org.eclipse.kura.net.IP4Address ; import org.eclipse.kura.net.IPAddress ; import org.eclipse.kura.net.NetConfig ; import org.eclipse.kura.net.NetConfigIP4 ; import org.eclipse.kura.net.NetInterfaceStatus ; import org.eclipse.kura.net.NetworkAdminService ; import org.eclipse.kura.net.dhcp.DhcpServerConfigIP4 ; import org.eclipse.kura.net.firewall.FirewallNatConfig ; import org.eclipse.kura.net.wifi.WifiCiphers ; import org.eclipse.kura.net.wifi.WifiConfig ; import org.eclipse.kura.net.wifi.WifiMode ; import org.eclipse.kura.net.wifi.WifiRadioMode ; import org.eclipse.kura.net.wifi.WifiSecurity ; public class NetworkConfigExample { private static final Logger s_logger = LoggerFactory . getLogger ( NetworkConfigExample . class ); private NetworkAdminService m_netAdminService ; // ---------------------------------------------------------------- // // Dependencies // // ---------------------------------------------------------------- public void setNetworkAdminService ( NetworkAdminService netAdminService ) { this . m_netAdminService = netAdminService ; } public void unsetNetworkAdminService ( NetworkAdminService netAdminService ) { this . m_netAdminService = null ; } // ---------------------------------------------------------------- // // Activation APIs // // ---------------------------------------------------------------- protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Activating NetworkConfigExample...\" ); connectToWirelessAccessPoint (); // createWirelessAccessPoint(); s_logger . info ( \"Activating NetworkConfigExample... Done.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Deactivating NetworkConfigExample...\" ); s_logger . info ( \"Deactivating NetworkConfigExample... Done.\" ); } // ---------------------------------------------------------------- // // Private Methods // // ---------------------------------------------------------------- /** * Connect to a wireless access point using the hard-coded parameters below */ private void connectToWirelessAccessPoint () { String interfaceName = \"wlan0\" ; // Create a NetConfigIP4 - configure as a WAN (gateway) interface, and a DHCP client NetInterfaceStatus netInterfaceStatus = NetInterfaceStatus . netIPv4StatusEnabledWAN ; boolean dhcpClient = true ; boolean autoConnect = true ; NetConfigIP4 netConfigIP4 = new NetConfigIP4 ( netInterfaceStatus , autoConnect , dhcpClient ); // Create a WifiConfig managed mode client String driver = \"nl80211\" ; String ssid = \"access_point_ssid\" ; String password = \"password\" ; WifiSecurity security = WifiSecurity . SECURITY_WPA2 ; WifiCiphers ciphers = WifiCiphers . CCMP_TKIP ; int [] channels = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 }; WifiConfig wifiConfig = new WifiConfig (); wifiConfig . setMode ( WifiMode . INFRA ); wifiConfig . setDriver ( driver ); wifiConfig . setSSID ( ssid ); wifiConfig . setPasskey ( password ); wifiConfig . setSecurity ( security ); wifiConfig . setChannels ( channels ); wifiConfig . setGroupCiphers ( ciphers ); wifiConfig . setPairwiseCiphers ( ciphers ); // Create a NetConfig List List < NetConfig > netConfigs = new ArrayList < NetConfig > (); netConfigs . add ( netConfigIP4 ); netConfigs . add ( wifiConfig ); // Configure the interface try { s_logger . info ( \"Reconfiguring \" + interfaceName + \" to connect to \" + ssid ); m_netAdminService . disableInterface ( interfaceName ); m_netAdminService . updateWifiInterfaceConfig ( interfaceName , autoConnect , null , netConfigs ); s_logger . info ( \"Enable \" + interfaceName ); m_netAdminService . enableInterface ( interfaceName , dhcpClient ); } catch ( KuraException e ) { s_logger . error ( \"Error connecting to wireless access point\" , e ); } } /** * Create a wireless access point */ private void createWirelessAccessPoint () { try { String interfaceName = \"wlan0\" ; // Create a NetConfigIP4 - configure as a LAN interface with a manual IP address NetInterfaceStatus netInterfaceStatus = NetInterfaceStatus . netIPv4StatusEnabledLAN ; boolean dhcpClient = false ; boolean autoConnect = true ; IP4Address ipAddress = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.1\" ); IP4Address subnetMask = ( IP4Address ) IPAddress . parseHostAddress ( \"255.255.255.0\" ); NetConfigIP4 netConfigIP4 = new NetConfigIP4 ( netInterfaceStatus , autoConnect ); netConfigIP4 . setAddress ( ipAddress ); netConfigIP4 . setSubnetMask ( subnetMask ); // Create a WifiConfig access point String driver = \"nl80211\" ; String ssid = \"NetworkConfigExample\" ; String password = \"password\" ; WifiSecurity security = WifiSecurity . SECURITY_WPA2 ; WifiCiphers ciphers = WifiCiphers . CCMP_TKIP ; int [] channels = { 1 }; WifiRadioMode radioMode = WifiRadioMode . RADIO_MODE_80211g ; String hwMode = \"g\" ; WifiConfig wifiConfig = new WifiConfig (); wifiConfig . setMode ( WifiMode . MASTER ); wifiConfig . setDriver ( driver ); wifiConfig . setSSID ( ssid ); wifiConfig . setPasskey ( password ); wifiConfig . setSecurity ( security ); wifiConfig . setChannels ( channels ); wifiConfig . setGroupCiphers ( ciphers ); wifiConfig . setPairwiseCiphers ( ciphers ); wifiConfig . setRadioMode ( radioMode ); wifiConfig . setHardwareMode ( hwMode ); // Create a DhcpServerConfig to enable DHCP server functionality int defaultLeaseTime = 7200 ; int maximumLeaseTime = 7200 ; IP4Address routerAddress = ipAddress ; IP4Address rangeStart = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.100\" ); IP4Address rangeEnd = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.200\" ); IP4Address dhcpSubnetMask = ( IP4Address ) IPAddress . parseHostAddress ( \"255.255.255.0\" ); IP4Address subnet = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.0\" ); short prefix = 24 ; boolean passDns = true ; List < IP4Address > dnsServers = new ArrayList < IP4Address > (); dnsServers . add ( ipAddress ); // Use our IP as the DNS server DhcpServerConfigIP4 dhcpServerConfigIP4 = new DhcpServerConfigIP4 ( interfaceName , true , subnet , routerAddress , dhcpSubnetMask , defaultLeaseTime , maximumLeaseTime , prefix , rangeStart , rangeEnd , passDns , dnsServers ); // Create a FirewallNatConfig to enable NAT (network address translation) // note that the destination interface is determined dynamically FirewallNatConfig natConfig = new FirewallNatConfig ( interfaceName , \"tbd\" , true ); // Create a NetConfig List List < NetConfig > netConfigs = new ArrayList < NetConfig > (); netConfigs . add ( netConfigIP4 ); netConfigs . add ( wifiConfig ); netConfigs . add ( dhcpServerConfigIP4 ); netConfigs . add ( natConfig ); // Configure the interface s_logger . info ( \"Reconfiguring \" + interfaceName + \" as an access point with SSID: \" + ssid ); m_netAdminService . disableInterface ( interfaceName ); m_netAdminService . updateWifiInterfaceConfig ( interfaceName , autoConnect , null , netConfigs ); s_logger . info ( \"Enable \" + interfaceName ); m_netAdminService . enableInterface ( interfaceName , dhcpClient ); } catch ( Exception e ) { s_logger . error ( \"Error configuring as an access point\" , e ); } } } Modify the parameters in the connectToWirelessAccessPoint() method with the specific values for the access point you want to connect to, including the variables for SSID, password, and security settings: String ssid = \"access_point_ssid\"; String password = \"password\"; WifiSecurity security = WifiSecurity. SECURITY_WPA2 ; At this point, the bundle implementation is complete. Make sure to save all files before proceeding. Export the OSGi bundle as a stand-alone plug-in, following the instructions in Hello World Using the Kura Logger . Deploy the Bundle In order to proceed, you need to know the IP address of your embedded gateway that is running Kura. Follow the mToolkit instructions for installing a single bundle to the remote target device located here . Once the bundle has finished deploying, it will set the device\u2019s network configuration and attempt to connect to a Wi-Fi access point using the configured parameters in the connectToWirelessAccessPoint() method. Test the Connection to the Access Point To verify that the interface (wlan0) has acquired an IP address, run the ifconfig command at a terminal on the embedded gateway. To show the current connection status to the access point, run the following commands: wpa_cli -i wlan0 status iw dev wlan0 link iw dev wlan0 station dump Create an Access Point This example code can be modified slightly to make the gateway function as an access point instead of connecting to an access point. To do this, modify the activate() method in the NetworkConfigExample.java file to comment out connectToWirelessAccessPoint() and uncomment createWirelessAccessPoint() . protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Activating NetworkConfigExample...\" ); // connectToWirelessAccessPoint(); createWirelessAccessPoint (); s_logger . info ( \"Activating NetworkConfigExample... Done.\" ); } Modify the access point configuration variables under createWirelessAccessPoint() for your needs, if necessary, such as the variables: IP4Address ipAddress = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.1\" ); IP4Address subnetMask = ( IP4Address ) IPAddress . parseHostAddress ( \"255.255.255.0\" ); // Create a WifiConfig access point String driver = \"nl80211\" ; String ssid = \"NetworkConfigExample\" ; String password = \"password\" ; Export the bundle again as a stand-alone OSGi plug-in and redeploy it to the target device. It should now reconfigure itself to create an access point with an active DHCP server, DNS proxy forwarding, and NAT enabled. Test the Access Point To verify that the interface (wlan0) has a fixed IP address, run the ifconfig command at a terminal on the embedded gateway. To view information on the Wi-Fi access point, including interface name, wireless channel, and MAC address, enter: iw dev wlan0 info To monitor connect and disconnect events from the access point, enter: iw event \u2013f Use another wireless client, such as a laptop, to verify that you can connect to the access point, that it receives an IP address, and that it can ping the network. When the client connects to the access point, the console should show a new station connection event. To view station statistic information, including signal strength and bitrate, enter: iw dev wlan0 station dump Optionally, if the gateway has another interface configured for WAN with connection to the Internet, then the wireless client should be able to reach the Internet using this access point as its gateway. The setup for the other interface (not covered in this example) would need to be configured in the device using the Kura Gateway Administration Console .","title":"How to Manage Network Settings"},{"location":"java-application-development/how-to-manage-network-settings/#how-to-manage-network-settings","text":"This section provides an example of how to create a Kura bundle that can be used to configure the network interfaces of your device. In this example, you will learn how to perform the following functions: Create a plugin that configures the network interfaces Connect to a wireless access point Create a wireless access point As written, the example code configures the device with a static Wi-Fi configuration. Typically, the device settings would be defined through the Kura Gateway Administration Console instead of through Java code. A more practical application of this example is for IP network interfaces that need to be dynamically modified based on some external trigger or condition, such as geo-fencing. The Kura framework allows the device to be programmatically changed via its APIs based on application-specific logic.","title":"How to manage Network Settings"},{"location":"java-application-development/how-to-manage-network-settings/#prerequisites","text":"Setting up the Eclipse Kura Development Environment","title":"Prerequisites"},{"location":"java-application-development/how-to-manage-network-settings/#network-configuration-with-kura","text":"","title":"Network Configuration with Kura"},{"location":"java-application-development/how-to-manage-network-settings/#hardware-setup","text":"This example requires an embedded device running Kura with at least one Ethernet port and Wi-Fi support. Additionally, the Connect to an Access Point section requires a wireless access point and the following information about the access point: SSID (Network Name) Security Type (WEP, WPA, or WPA2), if any Password/Passphrase, if any Lastly, the Create an Access Point section requires: A wireless device, such as a laptop, to test the access point. Optionally, you may connect the Kura device\u2019s Ethernet port to another network and use Kura as a gateway to that network.","title":"Hardware Setup"},{"location":"java-application-development/how-to-manage-network-settings/#determine-your-network-interfaces","text":"In order to determine your network interfaces, run one of the following commands at a terminal on the embedded gateway: ifconfig -a or ip link show Typical network interfaces will appear as follows: lo - loopback interface eth0 - first Ethernet network interface wlan0 - first wireless network interface ppp0 - first point-to-point protocol network interface, which could be a dial-up modem, PPTP VPN connection, cellular modem, etc. Make note of your wireless interface. For this tutorial, we will assume the wireless interface name is \u2018wlan0\u2019.","title":"Determine Your Network Interfaces"},{"location":"java-application-development/how-to-manage-network-settings/#kura-networking-api","text":"The networking API consists of two basic services: org.eclipse.kura.net.NetworkService and org.eclipse.kura.net.NetworkAdminService . The NetworkService is used to get the current state of the network. For example, the getNetworkInterfaces() method will return a List of NetInterface objects (such as EthernetInterface or WifiInterface) for each interface. This provides a detailed representation of the current state of that interface, such as its type, whether it is currently up, and its current address, which is returned by the getNetInterfaceAddresses() method as a List of NetInterfaceAddress objects. The NetworkService can also be used to get a list of all the network interface names available on the system, or a list of all the Wi-Fi access points that are currently detected by the system. The NetworkAdminService is used to get and set the configuration for each interface. Similar to the NetworkService, it has a getNetworkInterfaceConfigs() that returns a List of NetInterfaceConfig objects (such as EthernetInterfaceConfig and WifiInterfaceConfig) for each interface. These have the same methods as a NetInterface object but represent the current configuration for that interface. For a NetInterfaceConfig object, the getNetInterfaceAddress() method will return a List of NetInterfaceAddressConfig objects. These NetInterfaceAddressConfig instances, in turn, contain a List of NetConfig objects that define the configuration for that interface. There are many types of NetConfig objects, including: NetConfigIP4 - contains the IPv4 address configuration WifiConfig - contains the Wi-Fi configuration. Note that a WifiInterfaceAddressConfig may contain multiple WifiConfigs, since a configuration might exist for one or more Wi-Fi modes. The currently active WifiConfig is the one with a WifiMode that matches the WifiInterfaceAddressConfig WifiMode. DhcpServerConfigIP4 - contains the IPv4-based DHCP server configuration DnsServerConfigIP4 - contains the IPv4-based DNS server configuration FirewallNatConfig - contains the firewall NAT configuration These NetConfigs can also be used to configure an interface by providing them as a list to the updateEthernetInterfaceConfig() , updateWifiInterfaceConfig() , or updateModemInterfaceConfig() methods in the NetworkAdminService.","title":"Kura Networking API"},{"location":"java-application-development/how-to-manage-network-settings/#connect-to-an-access-point","text":"In this section, you will develop a Kura network configuration bundle that sets up the Wi-Fi interface as a client to a wireless access point.","title":"Connect to an Access Point"},{"location":"java-application-development/how-to-manage-network-settings/#implement-the-bundle","text":"To implement the network configuration bundle, perform the following steps: Note For more detailed information about bundle development (i.e., the plug-in project, classes, and MANIFEST file configuration), please refer to the Hello World Application Create a Plug-in Project named org.eclipse.kura.example.network ; set the an OSGi framework option to standard ; uncheck the Generate an activator option; and set the Execution Environment variable to match the JVM on your target device. Include the following bundles in the MANIFEST.MF: org.eclipse.kura org.eclipse.kura.net org.eclipse.kura.net.dhcp org.eclipse.kura.net.firewall org.eclipse.kura.net.wifi org.osgi.service.component org.slf4j Create a class named NetworkConfigExample in the org.eclipse.kura.example.network project. Create an OSGI-INF folder in the org.eclipse.kura.example.network project. Add a Component Class with the parent folder org.eclipse.kura.example.network/OSGI-INF, Component Name org.eclipse.kura.example.network, and Class org.eclipse.kura.example.network.NetworkConfigExample. Select the Services tab in the component.xml file. Under Referenced Services, add org.eclipse.kura.net.NetworkAdminService . Edit the properties of this service, and configure the Bind property to setNetworkAdminService and Unbind to unsetNetworkAdminService as shown in the following screen capture. These settings are required because of the dependency on NetworkAdminService. The following source code will also need to be implemented: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/component.xml - declarative services definition describing what services are exposed by and consumed by this bundle. org.eclipse.kura.example.network.NetworkConfigExample.java - main implementation class.","title":"Implement the Bundle"},{"location":"java-application-development/how-to-manage-network-settings/#meta-infmanifestmf-file","text":"The META-INF/MANIFEST.MF file should look as follows when complete: Warning Whitespace is significant in this file; make sure yours matches this file exactly. Manifest-Version: 1.0 Bundle-ManifestVersion: 2 Bundle-Name: Network Bundle-SymbolicName: org.eclipse.kura.example.network Bundle-Version: 1.0.0.qualifier Bundle-Vendor: ECLIPSE Bundle-RequiredExecutionEnvironment: JavaSE-1.7 Import-Package: org.eclipse.kura, org.eclipse.kura.net, org.eclipse.kura.net.dhcp, org.eclipse.kura.net.firewall, org.eclipse.kura.net.wifi, org.osgi.service.component;version=\"1.2.0\", org.slf4j;version=\"1.6.4\" Service-Component: OSGI-INF/component.xml","title":"META-INF/MANIFEST.MF File"},{"location":"java-application-development/how-to-manage-network-settings/#osgi-infcomponentxml-file","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr= \"http://www.osgi.org/xmlns/scr/v1.1.0\" name= \"org.eclipse.kura.example.network.NetworkConfigExample\" activate= \"activate\" deactivate= \"deactivate\" enabled= \"true\" immediate= \"true\" configuration-policy= \"require\" modified= \"updated\" > <implementation class= \"org.eclipse.kura.example.network.NetworkConfigExample\" /> <service> <provide interface= \"org.eclipse.kura.configuration.ConfigurableComponent\" /> </service> <reference name= \"NetworkAdminService\" interface= \"org.eclipse.kura.net.NetworkAdminService\" policy= \"static\" cardinality= \"1..1\" bind= \"setNetworkAdminService\" unbind= \"unsetNetworkAdminService\" /> <property name= \"service.pid\" type= \"String\" value= \"org.eclipse.kura.example.network.NetworkConfigExample\" /> </scr:component>","title":"OSGI-INF/component.xml File"},{"location":"java-application-development/how-to-manage-network-settings/#orgeclipsekuraexamplenetworknetworkconfigexamplejava","text":"package org.eclipse.kura.example.network ; import java.util.ArrayList ; import java.util.List ; import org.osgi.service.component.ComponentContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.eclipse.kura.KuraException ; import org.eclipse.kura.net.IP4Address ; import org.eclipse.kura.net.IPAddress ; import org.eclipse.kura.net.NetConfig ; import org.eclipse.kura.net.NetConfigIP4 ; import org.eclipse.kura.net.NetInterfaceStatus ; import org.eclipse.kura.net.NetworkAdminService ; import org.eclipse.kura.net.dhcp.DhcpServerConfigIP4 ; import org.eclipse.kura.net.firewall.FirewallNatConfig ; import org.eclipse.kura.net.wifi.WifiCiphers ; import org.eclipse.kura.net.wifi.WifiConfig ; import org.eclipse.kura.net.wifi.WifiMode ; import org.eclipse.kura.net.wifi.WifiRadioMode ; import org.eclipse.kura.net.wifi.WifiSecurity ; public class NetworkConfigExample { private static final Logger s_logger = LoggerFactory . getLogger ( NetworkConfigExample . class ); private NetworkAdminService m_netAdminService ; // ---------------------------------------------------------------- // // Dependencies // // ---------------------------------------------------------------- public void setNetworkAdminService ( NetworkAdminService netAdminService ) { this . m_netAdminService = netAdminService ; } public void unsetNetworkAdminService ( NetworkAdminService netAdminService ) { this . m_netAdminService = null ; } // ---------------------------------------------------------------- // // Activation APIs // // ---------------------------------------------------------------- protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Activating NetworkConfigExample...\" ); connectToWirelessAccessPoint (); // createWirelessAccessPoint(); s_logger . info ( \"Activating NetworkConfigExample... Done.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Deactivating NetworkConfigExample...\" ); s_logger . info ( \"Deactivating NetworkConfigExample... Done.\" ); } // ---------------------------------------------------------------- // // Private Methods // // ---------------------------------------------------------------- /** * Connect to a wireless access point using the hard-coded parameters below */ private void connectToWirelessAccessPoint () { String interfaceName = \"wlan0\" ; // Create a NetConfigIP4 - configure as a WAN (gateway) interface, and a DHCP client NetInterfaceStatus netInterfaceStatus = NetInterfaceStatus . netIPv4StatusEnabledWAN ; boolean dhcpClient = true ; boolean autoConnect = true ; NetConfigIP4 netConfigIP4 = new NetConfigIP4 ( netInterfaceStatus , autoConnect , dhcpClient ); // Create a WifiConfig managed mode client String driver = \"nl80211\" ; String ssid = \"access_point_ssid\" ; String password = \"password\" ; WifiSecurity security = WifiSecurity . SECURITY_WPA2 ; WifiCiphers ciphers = WifiCiphers . CCMP_TKIP ; int [] channels = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 }; WifiConfig wifiConfig = new WifiConfig (); wifiConfig . setMode ( WifiMode . INFRA ); wifiConfig . setDriver ( driver ); wifiConfig . setSSID ( ssid ); wifiConfig . setPasskey ( password ); wifiConfig . setSecurity ( security ); wifiConfig . setChannels ( channels ); wifiConfig . setGroupCiphers ( ciphers ); wifiConfig . setPairwiseCiphers ( ciphers ); // Create a NetConfig List List < NetConfig > netConfigs = new ArrayList < NetConfig > (); netConfigs . add ( netConfigIP4 ); netConfigs . add ( wifiConfig ); // Configure the interface try { s_logger . info ( \"Reconfiguring \" + interfaceName + \" to connect to \" + ssid ); m_netAdminService . disableInterface ( interfaceName ); m_netAdminService . updateWifiInterfaceConfig ( interfaceName , autoConnect , null , netConfigs ); s_logger . info ( \"Enable \" + interfaceName ); m_netAdminService . enableInterface ( interfaceName , dhcpClient ); } catch ( KuraException e ) { s_logger . error ( \"Error connecting to wireless access point\" , e ); } } /** * Create a wireless access point */ private void createWirelessAccessPoint () { try { String interfaceName = \"wlan0\" ; // Create a NetConfigIP4 - configure as a LAN interface with a manual IP address NetInterfaceStatus netInterfaceStatus = NetInterfaceStatus . netIPv4StatusEnabledLAN ; boolean dhcpClient = false ; boolean autoConnect = true ; IP4Address ipAddress = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.1\" ); IP4Address subnetMask = ( IP4Address ) IPAddress . parseHostAddress ( \"255.255.255.0\" ); NetConfigIP4 netConfigIP4 = new NetConfigIP4 ( netInterfaceStatus , autoConnect ); netConfigIP4 . setAddress ( ipAddress ); netConfigIP4 . setSubnetMask ( subnetMask ); // Create a WifiConfig access point String driver = \"nl80211\" ; String ssid = \"NetworkConfigExample\" ; String password = \"password\" ; WifiSecurity security = WifiSecurity . SECURITY_WPA2 ; WifiCiphers ciphers = WifiCiphers . CCMP_TKIP ; int [] channels = { 1 }; WifiRadioMode radioMode = WifiRadioMode . RADIO_MODE_80211g ; String hwMode = \"g\" ; WifiConfig wifiConfig = new WifiConfig (); wifiConfig . setMode ( WifiMode . MASTER ); wifiConfig . setDriver ( driver ); wifiConfig . setSSID ( ssid ); wifiConfig . setPasskey ( password ); wifiConfig . setSecurity ( security ); wifiConfig . setChannels ( channels ); wifiConfig . setGroupCiphers ( ciphers ); wifiConfig . setPairwiseCiphers ( ciphers ); wifiConfig . setRadioMode ( radioMode ); wifiConfig . setHardwareMode ( hwMode ); // Create a DhcpServerConfig to enable DHCP server functionality int defaultLeaseTime = 7200 ; int maximumLeaseTime = 7200 ; IP4Address routerAddress = ipAddress ; IP4Address rangeStart = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.100\" ); IP4Address rangeEnd = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.200\" ); IP4Address dhcpSubnetMask = ( IP4Address ) IPAddress . parseHostAddress ( \"255.255.255.0\" ); IP4Address subnet = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.0\" ); short prefix = 24 ; boolean passDns = true ; List < IP4Address > dnsServers = new ArrayList < IP4Address > (); dnsServers . add ( ipAddress ); // Use our IP as the DNS server DhcpServerConfigIP4 dhcpServerConfigIP4 = new DhcpServerConfigIP4 ( interfaceName , true , subnet , routerAddress , dhcpSubnetMask , defaultLeaseTime , maximumLeaseTime , prefix , rangeStart , rangeEnd , passDns , dnsServers ); // Create a FirewallNatConfig to enable NAT (network address translation) // note that the destination interface is determined dynamically FirewallNatConfig natConfig = new FirewallNatConfig ( interfaceName , \"tbd\" , true ); // Create a NetConfig List List < NetConfig > netConfigs = new ArrayList < NetConfig > (); netConfigs . add ( netConfigIP4 ); netConfigs . add ( wifiConfig ); netConfigs . add ( dhcpServerConfigIP4 ); netConfigs . add ( natConfig ); // Configure the interface s_logger . info ( \"Reconfiguring \" + interfaceName + \" as an access point with SSID: \" + ssid ); m_netAdminService . disableInterface ( interfaceName ); m_netAdminService . updateWifiInterfaceConfig ( interfaceName , autoConnect , null , netConfigs ); s_logger . info ( \"Enable \" + interfaceName ); m_netAdminService . enableInterface ( interfaceName , dhcpClient ); } catch ( Exception e ) { s_logger . error ( \"Error configuring as an access point\" , e ); } } } Modify the parameters in the connectToWirelessAccessPoint() method with the specific values for the access point you want to connect to, including the variables for SSID, password, and security settings: String ssid = \"access_point_ssid\"; String password = \"password\"; WifiSecurity security = WifiSecurity. SECURITY_WPA2 ; At this point, the bundle implementation is complete. Make sure to save all files before proceeding. Export the OSGi bundle as a stand-alone plug-in, following the instructions in Hello World Using the Kura Logger .","title":"org.eclipse.kura.example.network.NetworkConfigExample.java"},{"location":"java-application-development/how-to-manage-network-settings/#deploy-the-bundle","text":"In order to proceed, you need to know the IP address of your embedded gateway that is running Kura. Follow the mToolkit instructions for installing a single bundle to the remote target device located here . Once the bundle has finished deploying, it will set the device\u2019s network configuration and attempt to connect to a Wi-Fi access point using the configured parameters in the connectToWirelessAccessPoint() method.","title":"Deploy the Bundle"},{"location":"java-application-development/how-to-manage-network-settings/#test-the-connection-to-the-access-point","text":"To verify that the interface (wlan0) has acquired an IP address, run the ifconfig command at a terminal on the embedded gateway. To show the current connection status to the access point, run the following commands: wpa_cli -i wlan0 status iw dev wlan0 link iw dev wlan0 station dump","title":"Test the Connection to the Access Point"},{"location":"java-application-development/how-to-manage-network-settings/#create-an-access-point","text":"This example code can be modified slightly to make the gateway function as an access point instead of connecting to an access point. To do this, modify the activate() method in the NetworkConfigExample.java file to comment out connectToWirelessAccessPoint() and uncomment createWirelessAccessPoint() . protected void activate ( ComponentContext componentContext ) { s_logger . info ( \"Activating NetworkConfigExample...\" ); // connectToWirelessAccessPoint(); createWirelessAccessPoint (); s_logger . info ( \"Activating NetworkConfigExample... Done.\" ); } Modify the access point configuration variables under createWirelessAccessPoint() for your needs, if necessary, such as the variables: IP4Address ipAddress = ( IP4Address ) IPAddress . parseHostAddress ( \"172.16.10.1\" ); IP4Address subnetMask = ( IP4Address ) IPAddress . parseHostAddress ( \"255.255.255.0\" ); // Create a WifiConfig access point String driver = \"nl80211\" ; String ssid = \"NetworkConfigExample\" ; String password = \"password\" ; Export the bundle again as a stand-alone OSGi plug-in and redeploy it to the target device. It should now reconfigure itself to create an access point with an active DHCP server, DNS proxy forwarding, and NAT enabled.","title":"Create an Access Point"},{"location":"java-application-development/how-to-manage-network-settings/#test-the-access-point","text":"To verify that the interface (wlan0) has a fixed IP address, run the ifconfig command at a terminal on the embedded gateway. To view information on the Wi-Fi access point, including interface name, wireless channel, and MAC address, enter: iw dev wlan0 info To monitor connect and disconnect events from the access point, enter: iw event \u2013f Use another wireless client, such as a laptop, to verify that you can connect to the access point, that it receives an IP address, and that it can ping the network. When the client connects to the access point, the console should show a new station connection event. To view station statistic information, including signal strength and bitrate, enter: iw dev wlan0 station dump Optionally, if the gateway has another interface configured for WAN with connection to the Internet, then the wireless client should be able to reach the Internet using this access point as its gateway. The setup for the other interface (not covered in this example) would need to be configured in the device using the Kura Gateway Administration Console .","title":"Test the Access Point"},{"location":"java-application-development/how-to-serial-ports/","text":"How to Use Serial Ports Overview This section provides an example of how to create a Kura bundle that will communicate with a serial device. In this example, you will communicate with a simple terminal emulator to demonstrate both transmitting and receiving data. You will learn how to perform the following functions: Create a plugin that communicates to serial devices Export the bundle Install the bundle on the remote device Test the communication with minicom where, minicom is acting as an attached serial device such as an NFC reader, GPS device, or some other ASCII-based communication device Prerequisites Setting up Kura Development Environment Hello World Using the Kura Logger Hardware Use an embedded device running Kura with two available serial ports. (If the device does not have a serial port, USB to serial adapters can be used.) Ensure minicom is installed on the embedded device. Serial Communication with Kura This section of the tutorial covers setting up the hardware, determining serial port device nodes, implementing the basic serial communication bundle, deploying the bundle, and validating its functionality. After completing this section, you should be able to communicate with any ASCII-based serial device attached to a Kura-enabled embedded gateway. In this example, we are using ASCII for clarity, but these same techniques can be used to communicate with serial devices that communicate using binary protocols. Hardware Setup Your setup requirements will depend on your hardware platform. At a minimum, you will need two serial ports with a null modem serial, crossover cable connecting them. If your platform has integrated serial ports, you only need to connect them using a null modem serial cable. If you do not have integrated serial ports on your platform, you will need to purchase USB-to-Serial adapters. It is recommended to use a USB-to-Serial adapter with either the PL2303 or FTDI chipset, but others may work depending on your hardware platform and underlying Linux support. Once you have attached these adapters to your device, you can attach the null modem serial cable between the two ports. Determine Serial Device Nodes This step is hardware specific. If your hardware device has integrated serial ports, contact your hardware device manufacturer or review the documentation to find out how the ports are named in the operating system. The device identifiers should be similar to the following: /dev/ttyS*xx* /dev/ttyUSB*xx* /dev/ttyACM*xx* If you are using USB-to-Serial adapters, Linux usually allocates the associated device nodes dynamically at the time of insertion. In order to determine what they are, run the following command at a terminal on the embedded gateway: tail -f /var/log/syslog Warning Depending on your specific Linux implementation, other possible log files may be: /var/log/kern.log, /var/log/kernel, or /var/log/dmesg. With the above command running, insert your USB-to-Serial adapter. You should see output similar to the following: root@localhost:/root> tail -f /var/log/syslog Aug 15 18:43:47 localhost kernel: usb 3-2: new full speed USB device using uhci_hcd and address 3 Aug 15 18:43:47 localhost kernel: pl2303 3-2:1.0: pl2303 converter detected Aug 15 18:43:47 localhost kernel: usb 3-2: pl2303 converter now attached to ttyUSB10 In this example, our device is a PL2303-compatible device and is allocated a device node of \u201c/dev/ttyUSB10\u201d. While your results may differ, the key is to identify the \u201ctty\u201d device that was allocated. For the rest of this tutorial, this device will be referred to as [device_node_1], which in this example is /dev/ttyUSB10. During development, it is also important to keep in mind that these values are dynamic; therefore, from one boot to the next and one insertion to the next, these values may change. To stop \u2018tail\u2019 from running in your console, escape with \u2018 c\u2019. If you are using two USB-to-Serial adapters, repeat the above procedure for the second serial port. The resulting device node will be referred to as [device_node_2]. Implement the Bundle Now that you have two serial ports connected to each other, you are ready to implement the code. You will use the same general method that is described in section Hello World Application with the following exceptions: process to export the OSGi bundle will have an additional step, the actual code in this example will have the following differences: The new Plug-in Project is named \u201corg.eclipse.kura.example.serial\u201d A class named \u201cSerialExample\u201d is created in the org.eclipse.kura.example.serial project The following bundles are included in the Automated Management of Dependencies section in the MANIFEST.MF: javax.comm javax.microedition.io org.eclipse.kura.cloud org.eclipse.kura.comm org.eclipse.kura.configuration org.osgi.service.component org.osgi.service.io org.slf4j The following files need to be implemented: META-INF/MANIFEST.MF \u2013 OSGI manifest that describes the bundle and its dependencies OSGI-INF/component.xml \u2013 declarative services definition that describe what services are exposed and consumed by this bundle OSGI-INF/metatype/org.eclipse.kura.example.serial.SerialExample.xml \u2013 configuration description of the bundle and its parameters, types, and defaults org.eclipse.kura.example.serial.SerialExample.java \u2013 main implementation class META-INF/MANIFEST.MF File The META-INF/MANIFEST.MF file should appear as shown below when complete: NOTE: Whitespace is significant in this file. Make sure yours matches this file exactly with the exception that RequiredExecutionEnvironment may be JavaSE-1.6 or JavaSE-1.7, depending on the Java installation of your device. Manifest-Version: 1.0 Bundle-ManifestVersion: 2 Bundle-Name: Serial Bundle-SymbolicName: org.eclipse.kura.example.serial Bundle-Version: 1.0.0.qualifier Bundle-RequiredExecutionEnvironment: JavaSE-1.7 Service-Component: OSGI-INF/component.xml Bundle-ActivationPolicy: lazy Import-Package: javax.comm;version=\"1.2.0\", javax.microedition.io;resolution:=optional, org.eclipse.kura.cloud;version=\"0.2.0\", org.eclipse.kura.comm;version=\"0.2.0\", org.eclipse.kura.configuration;version=\"0.2.0\", org.osgi.service.component;version=\"1.2.0\", org.osgi.service.io;version=\"1.0.0\", org.slf4j;version=\"1.6.4\" Bundle-ClassPath: . In addition, the build.properties file should have org.eclipse.equinox.io listed as an additional bundle similar to below: additional.bundles = org.eclipse.equinox.io OSGI-INF/component.xml File Warning Starting from Kura 3.0, the configuration service will only track \"relevant services\" that, in their component description files, will provide the ConfigurableComponent or SelfConfigurableComponent interface. The old behavior can be restored by setting the \"org.eclipse.kura.core.configuration.legacyServiceTracking\" property to true. If Kura 2.1.0 or older versions are used or the org.eclipse.kura.core.configuration.legacyServiceTracking system property is set to true, the OSGI-INF/component.xml should appear as shown below when complete: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr=\"http://www.osgi.org/xmlns/scr/v1.1.0\" name=\"org.eclipse.kura.example.serial.SerialExample\" activate=\"activate\" deactivate=\"deactivate\" modified=\"updated\" enabled=\"true\" immediate=\"true\" configuration-policy=\"require\"> <implementation class=\"org.eclipse.kura.example.serial.SerialExample\"/> <property name=\"service.pid\" type=\"String\" value=\"org.eclipse.kura.example.serial.SerialExample\"/> <service> <provide interface=\"org.eclipse.kura.example.serial.SerialExample\"/> </service> <reference bind=\"setConnectionFactory\" cardinality=\"1..1\" interface=\"org.osgi.service.io.ConnectionFactory\" name=\"ConnectionFactory\" policy=\"static\" unbind=\"unsetConnectionFactory\" /> </scr:component> If Kura 3.0 or newer versions are used and the org.eclipse.kura.core.configuration.legacyServiceTracking system property is set to false or not set, the OSGI-INF/component.xml should appear as shown below when complete: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr=\"http://www.osgi.org/xmlns/scr/v1.1.0\" name=\"org.eclipse.kura.example.serial.SerialExample\" activate=\"activate\" deactivate=\"deactivate\" modified=\"updated\" enabled=\"true\" immediate=\"true\" configuration-policy=\"require\"> <implementation class=\"org.eclipse.kura.example.serial.SerialExample\"/> <property name=\"service.pid\" type=\"String\" value=\"org.eclipse.kura.example.serial.SerialExample\"/> <service> <provide interface=\"org.eclipse.kura.configuration.ConfigurableComponent\"/> </service> <reference bind=\"setConnectionFactory\" cardinality=\"1..1\" interface=\"org.osgi.service.io.ConnectionFactory\" name=\"ConnectionFactory\" policy=\"static\" unbind=\"unsetConnectionFactory\" /> </scr:component> OSGI-INF/metatype/org.eclipse.kura.example.serial.SerialExample.xml File The OSGI-INF/metatype/org.eclipse.kura.example.serial.SerialExample.xml file should appear as shown below when complete: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <MetaData xmlns=\"http://www.osgi.org/xmlns/metatype/v1.2.0\" localization=\"en_us\"> <OCD id=\"org.eclipse.kura.example.serial.SerialExample\" name=\"SerialExample\" description=\"Example of a Configuring KURA Application echoing data read from the serial port.\"> <Icon resource=\"http://sphotos-a.xx.fbcdn.net/hphotos-ash4/p480x480/408247_10151040905591065_1989684710_n.jpg\" size=\"32\"/> <AD id=\"serial.device\" name=\"serial.device\" type=\"String\" cardinality=\"0\" required=\"false\" description=\"Name of the serial device (e.g. /dev/ttyS0, /dev/ttyACM0, /dev/ttyUSB0).\"/> <AD id=\"serial.baudrate\" name=\"serial.baudrate\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"9600\" description=\"Baudrate.\"> <Option label=\"9600\" value=\"9600\"/> <Option label=\"19200\" value=\"19200\"/> <Option label=\"38400\" value=\"38400\"/> <Option label=\"57600\" value=\"57600\"/> <Option label=\"115200\" value=\"115200\"/> </AD> <AD id=\"serial.data-bits\" name=\"serial.data-bits\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"8\" description=\"Data bits.\"> <Option label=\"7\" value=\"7\"/> <Option label=\"8\" value=\"8\"/> </AD> <AD id=\"serial.parity\" name=\"serial.parity\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"none\" description=\"Parity.\"> <Option label=\"none\" value=\"none\"/> <Option label=\"even\" value=\"even\"/> <Option label=\"odd\" value=\"odd\"/> </AD> <AD id=\"serial.stop-bits\" name=\"serial.stop-bits\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"1\" description=\"Stop bits.\"> <Option label=\"1\" value=\"1\"/> <Option label=\"2\" value=\"2\"/> </AD> </OCD> <Designate pid=\"org.eclipse.kura.example.serial.SerialExample\"> <Object ocdref=\"org.eclipse.kura.example.serial.SerialExample\"/> </Designate> </MetaData> org.eclipse.kura.example.serial.SerialExample.java File The org.eclipse.kura.example.serial.SerialExample.java file should appear as shown below when complete: package org.eclipse.kura.example.serial ; import java.io.IOException ; import java.io.InputStream ; import java.io.OutputStream ; import java.util.HashMap ; import java.util.Map ; import java.util.concurrent.Future ; import java.util.concurrent.ScheduledThreadPoolExecutor ; import org.osgi.service.component.ComponentContext ; import org.osgi.service.io.ConnectionFactory ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class SerialExample implements ConfigurableComponent { private static final Logger s_logger = LoggerFactory . getLogger ( SerialExample . class ); private static final String SERIAL_DEVICE_PROP_NAME = \"serial.device\" ; private static final String SERIAL_BAUDRATE_PROP_NAME = \"serial.baudrate\" ; private static final String SERIAL_DATA_BITS_PROP_NAME = \"serial.data-bits\" ; private static final String SERIAL_PARITY_PROP_NAME = \"serial.parity\" ; private static final String SERIAL_STOP_BITS_PROP_NAME = \"serial.stop-bits\" ; private ConnectionFactory m_connectionFactory ; private CommConnection m_commConnection ; private InputStream m_commIs ; private OutputStream m_commOs ; private ScheduledThreadPoolExecutor m_worker ; private Future <?> m_handle ; private Map < String , Object > m_properties ; // ---------------------------------------------------------------- // // Dependencies // // ---------------------------------------------------------------- public void setConnectionFactory ( ConnectionFactory connectionFactory ) { this . m_connectionFactory = connectionFactory ; } public void unsetConnectionFactory ( ConnectionFactory connectionFactory ) { this . m_connectionFactory = null ; } // ---------------------------------------------------------------- // // Activation APIs // // ---------------------------------------------------------------- protected void activate ( ComponentContext componentContext , Map < String , Object > properties ) { s_logger . info ( \"Activating SerialExample...\" ); m_worker = new ScheduledThreadPoolExecutor ( 1 ); m_properties = new HashMap < String , Object > (); doUpdate ( properties ); s_logger . info ( \"Activating SerialExample... Done.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Deactivating SerialExample...\" ); // shutting down the worker and cleaning up the properties m_handle . cancel ( true ); m_worker . shutdownNow (); //close the serial port closePort (); s_logger . info ( \"Deactivating SerialExample... Done.\" ); } public void updated ( Map < String , Object > properties ) { s_logger . info ( \"Updated SerialExample...\" ); doUpdate ( properties ); s_logger . info ( \"Updated SerialExample... Done.\" ); } // ---------------------------------------------------------------- // // Private Methods // // ---------------------------------------------------------------- /** * Called after a new set of properties has been configured on the service */ private void doUpdate ( Map < String , Object > properties ) { try { for ( String s : properties . keySet ()) { s_logger . info ( \"Update - \" + s + \": \" + properties . get ( s )); } // cancel a current worker handle if one if active if ( m_handle != null ) { m_handle . cancel ( true ); } //close the serial port so it can be reconfigured closePort (); //store the properties m_properties . clear (); m_properties . putAll ( properties ); //reopen the port with the new configuration openPort (); //start the worker thread m_handle = m_worker . submit ( new Runnable () { @Override public void run () { doSerial (); } }); } catch ( Throwable t ) { s_logger . error ( \"Unexpected Throwable\" , t ); } } private void openPort () { String port = ( String ) m_properties . get ( SERIAL_DEVICE_PROP_NAME ); if ( port == null ) { s_logger . info ( \"Port name not configured\" ); return ; } int baudRate = Integer . valueOf (( String ) m_properties . get ( SERIAL_BAUDRATE_PROP_NAME )); int dataBits = Integer . valueOf (( String ) m_properties . get ( SERIAL_DATA_BITS_PROP_NAME )); int stopBits = Integer . valueOf (( String ) m_properties . get ( SERIAL_STOP_BITS_PROP_NAME )); String sParity = ( String ) m_properties . get ( SERIAL_PARITY_PROP_NAME ); int parity = CommURI . PARITY_NONE ; if ( sParity . equals ( \"none\" )) { parity = CommURI . PARITY_NONE ; } else if ( sParity . equals ( \"odd\" )) { parity = CommURI . PARITY_ODD ; } else if ( sParity . equals ( \"even\" )) { parity = CommURI . PARITY_EVEN ; } String uri = new CommURI . Builder ( port ) . withBaudRate ( baudRate ) . withDataBits ( dataBits ) . withStopBits ( stopBits ) . withParity ( parity ) . withTimeout ( 1000 ) . build (). toString (); try { m_commConnection = ( CommConnection ) m_connectionFactory . createConnection ( uri , 1 , false ); m_commIs = m_commConnection . openInputStream (); m_commOs = m_commConnection . openOutputStream (); s_logger . info ( port + \" open\" ); } catch ( IOException e ) { s_logger . error ( \"Failed to open port \" + port , e ); cleanupPort (); } } private void cleanupPort () { if ( m_commIs != null ) { try { s_logger . info ( \"Closing port input stream...\" ); m_commIs . close (); s_logger . info ( \"Closed port input stream\" ); } catch ( IOException e ) { s_logger . error ( \"Cannot close port input stream\" , e ); } m_commIs = null ; } if ( m_commOs != null ) { try { s_logger . info ( \"Closing port output stream...\" ); m_commOs . close (); s_logger . info ( \"Closed port output stream\" ); } catch ( IOException e ) { s_logger . error ( \"Cannot close port output stream\" , e ); } m_commOs = null ; } if ( m_commConnection != null ) { try { s_logger . info ( \"Closing port...\" ); m_commConnection . close (); s_logger . info ( \"Closed port\" ); } catch ( IOException e ) { s_logger . error ( \"Cannot close port\" , e ); } m_commConnection = null ; } } private void closePort () { cleanupPort (); } private void doSerial () { if ( m_commIs != null ) { try { int c = - 1 ; StringBuilder sb = new StringBuilder (); while ( m_commIs != null ) { if ( m_commIs . available () != 0 ) { c = m_commIs . read (); } else { try { Thread . sleep ( 100 ); continue ; } catch ( InterruptedException e ) { return ; } } // on reception of CR, publish the received sentence if ( c == 13 ) { s_logger . debug ( \"Received serial input, echoing to output: \" + sb . toString ()); sb . append ( \"\\r\\n\" ); String dataRead = sb . toString (); //echo the data to the output stream m_commOs . write ( dataRead . getBytes ()); //reset the buffer sb = new StringBuilder (); } else if ( c != 10 ) { sb . append (( char ) c ); } } } catch ( IOException e ) { s_logger . error ( \"Cannot read port\" , e ); } finally { try { m_commIs . close (); } catch ( IOException e ) { s_logger . error ( \"Cannot close buffered reader\" , e ); } } } } } At this point, the bundle implementation is complete. Make sure to save all files before proceeding. Export the Bundle To build the Serial Example bundle as a stand-alone OSGi plugin, right-click the project and select Export. From the wizard, select Plug-in Development | Deployable plug-ins and fragments and click Next. The Export window appears. Under Available Plug-ins and Fragments, verify that the newly created plug-in is selected. Under Destination, select the Directory option button and use the Browse button to select an appropriate place to save the JAR file on the local file system. Info You will need to know the location where this JAR file is saved for the deployment process. Under Options, select the checkbox Use class files compiled in the workspace in addition to the checkboxes already enabled, and click Finish. Doing so will create a JAR file in the selected directory (e.g., /home/joe/myPlugins/plugins/org.eclipse.kura.example.serial_1.0.0.201410311510.jar). Deploy the Bundle In order to proceed, you need to know the IP address of your embedded gateway that is running Kura. Once you have this IP address, follow the mToolkit instructions for installing a single bundle to a remote target device (refer to section 2.03 Testing and Deploying Bundles ). Once the installation successfully completes, you should see a message from the /var/log/kura.log file indicating that the bundle was successfully installed and configured. You can also run this example with the emulator in a Linux or OS X environment as shown sample output below. Make sure that your user account has owner permission for the serial device in /dev. Validate the Bundle Next, you need to test that your bundle does indeed echo characters back by opening minicom and configuring it to use [device_node_2] that was previously determined. Open minicom using the following command at a Linux terminal on the remote gateway device: minicom -s This command opens a view similar to the following screen capture: Scroll down to Serial port setup and press . A new dialog window opens as shown below: Use the minicom menu options on the left (i.e., A, B, C, etc.) to change desired fields. Set the fields to the same values as shown in the previous screen capture except the Serial Device should match the [device_node_2] on your target device. Once this is set, press \\<ENTER> to exit from this menu. In the main configuration menu, select Exit ( do not select the option Exit from Minicom). At this point, you have successfully started minicom on the second serial port attached to your null modem cable allowing minicom to act as a serial device that can send and receive commands to your Kura bundle. You can verify this operation by typing characters and pressing . The function (specifically a \u2018\\n\u2019 character) signals to the Kura application to echo the buffered characters back to the serial device (minicom in this case). Upon startup, minicom sends an initialization string to the serial device. These characters are sent to the minicom terminal because they were echoed back by Kura listening on the port at the other end of the null modem cable. When you are done, exit minicom by pressing \u2018 a\u2019, then \u2018q\u2019, and finally \u2018 \u2019. Doing so brings you back to the Linux command prompt. This tutorial instructed you how to write and deploy a Kura bundle on your target device that listens for serial data (coming from the minicom terminal and being received on [device_node_1]). This tutorial also demonstrated that the application echoes data back to the same serial port that is received in minicom, which acts a serial device that sends and receives data. If supported by the device, Kura may send and receive binary data instead of ASCII.","title":"How to Use Serial Ports"},{"location":"java-application-development/how-to-serial-ports/#how-to-use-serial-ports","text":"","title":"How to Use Serial Ports"},{"location":"java-application-development/how-to-serial-ports/#overview","text":"This section provides an example of how to create a Kura bundle that will communicate with a serial device. In this example, you will communicate with a simple terminal emulator to demonstrate both transmitting and receiving data. You will learn how to perform the following functions: Create a plugin that communicates to serial devices Export the bundle Install the bundle on the remote device Test the communication with minicom where, minicom is acting as an attached serial device such as an NFC reader, GPS device, or some other ASCII-based communication device","title":"Overview"},{"location":"java-application-development/how-to-serial-ports/#prerequisites","text":"Setting up Kura Development Environment Hello World Using the Kura Logger Hardware Use an embedded device running Kura with two available serial ports. (If the device does not have a serial port, USB to serial adapters can be used.) Ensure minicom is installed on the embedded device.","title":"Prerequisites"},{"location":"java-application-development/how-to-serial-ports/#serial-communication-with-kura","text":"This section of the tutorial covers setting up the hardware, determining serial port device nodes, implementing the basic serial communication bundle, deploying the bundle, and validating its functionality. After completing this section, you should be able to communicate with any ASCII-based serial device attached to a Kura-enabled embedded gateway. In this example, we are using ASCII for clarity, but these same techniques can be used to communicate with serial devices that communicate using binary protocols.","title":"Serial Communication with Kura"},{"location":"java-application-development/how-to-serial-ports/#hardware-setup","text":"Your setup requirements will depend on your hardware platform. At a minimum, you will need two serial ports with a null modem serial, crossover cable connecting them. If your platform has integrated serial ports, you only need to connect them using a null modem serial cable. If you do not have integrated serial ports on your platform, you will need to purchase USB-to-Serial adapters. It is recommended to use a USB-to-Serial adapter with either the PL2303 or FTDI chipset, but others may work depending on your hardware platform and underlying Linux support. Once you have attached these adapters to your device, you can attach the null modem serial cable between the two ports.","title":"Hardware Setup"},{"location":"java-application-development/how-to-serial-ports/#determine-serial-device-nodes","text":"This step is hardware specific. If your hardware device has integrated serial ports, contact your hardware device manufacturer or review the documentation to find out how the ports are named in the operating system. The device identifiers should be similar to the following: /dev/ttyS*xx* /dev/ttyUSB*xx* /dev/ttyACM*xx* If you are using USB-to-Serial adapters, Linux usually allocates the associated device nodes dynamically at the time of insertion. In order to determine what they are, run the following command at a terminal on the embedded gateway: tail -f /var/log/syslog Warning Depending on your specific Linux implementation, other possible log files may be: /var/log/kern.log, /var/log/kernel, or /var/log/dmesg. With the above command running, insert your USB-to-Serial adapter. You should see output similar to the following: root@localhost:/root> tail -f /var/log/syslog Aug 15 18:43:47 localhost kernel: usb 3-2: new full speed USB device using uhci_hcd and address 3 Aug 15 18:43:47 localhost kernel: pl2303 3-2:1.0: pl2303 converter detected Aug 15 18:43:47 localhost kernel: usb 3-2: pl2303 converter now attached to ttyUSB10 In this example, our device is a PL2303-compatible device and is allocated a device node of \u201c/dev/ttyUSB10\u201d. While your results may differ, the key is to identify the \u201ctty\u201d device that was allocated. For the rest of this tutorial, this device will be referred to as [device_node_1], which in this example is /dev/ttyUSB10. During development, it is also important to keep in mind that these values are dynamic; therefore, from one boot to the next and one insertion to the next, these values may change. To stop \u2018tail\u2019 from running in your console, escape with \u2018 c\u2019. If you are using two USB-to-Serial adapters, repeat the above procedure for the second serial port. The resulting device node will be referred to as [device_node_2].","title":"Determine Serial Device Nodes"},{"location":"java-application-development/how-to-serial-ports/#implement-the-bundle","text":"Now that you have two serial ports connected to each other, you are ready to implement the code. You will use the same general method that is described in section Hello World Application with the following exceptions: process to export the OSGi bundle will have an additional step, the actual code in this example will have the following differences: The new Plug-in Project is named \u201corg.eclipse.kura.example.serial\u201d A class named \u201cSerialExample\u201d is created in the org.eclipse.kura.example.serial project The following bundles are included in the Automated Management of Dependencies section in the MANIFEST.MF: javax.comm javax.microedition.io org.eclipse.kura.cloud org.eclipse.kura.comm org.eclipse.kura.configuration org.osgi.service.component org.osgi.service.io org.slf4j The following files need to be implemented: META-INF/MANIFEST.MF \u2013 OSGI manifest that describes the bundle and its dependencies OSGI-INF/component.xml \u2013 declarative services definition that describe what services are exposed and consumed by this bundle OSGI-INF/metatype/org.eclipse.kura.example.serial.SerialExample.xml \u2013 configuration description of the bundle and its parameters, types, and defaults org.eclipse.kura.example.serial.SerialExample.java \u2013 main implementation class","title":"Implement the Bundle"},{"location":"java-application-development/how-to-serial-ports/#meta-infmanifestmf-file","text":"The META-INF/MANIFEST.MF file should appear as shown below when complete: NOTE: Whitespace is significant in this file. Make sure yours matches this file exactly with the exception that RequiredExecutionEnvironment may be JavaSE-1.6 or JavaSE-1.7, depending on the Java installation of your device. Manifest-Version: 1.0 Bundle-ManifestVersion: 2 Bundle-Name: Serial Bundle-SymbolicName: org.eclipse.kura.example.serial Bundle-Version: 1.0.0.qualifier Bundle-RequiredExecutionEnvironment: JavaSE-1.7 Service-Component: OSGI-INF/component.xml Bundle-ActivationPolicy: lazy Import-Package: javax.comm;version=\"1.2.0\", javax.microedition.io;resolution:=optional, org.eclipse.kura.cloud;version=\"0.2.0\", org.eclipse.kura.comm;version=\"0.2.0\", org.eclipse.kura.configuration;version=\"0.2.0\", org.osgi.service.component;version=\"1.2.0\", org.osgi.service.io;version=\"1.0.0\", org.slf4j;version=\"1.6.4\" Bundle-ClassPath: . In addition, the build.properties file should have org.eclipse.equinox.io listed as an additional bundle similar to below: additional.bundles = org.eclipse.equinox.io","title":"META-INF/MANIFEST.MF File"},{"location":"java-application-development/how-to-serial-ports/#osgi-infcomponentxml-file","text":"Warning Starting from Kura 3.0, the configuration service will only track \"relevant services\" that, in their component description files, will provide the ConfigurableComponent or SelfConfigurableComponent interface. The old behavior can be restored by setting the \"org.eclipse.kura.core.configuration.legacyServiceTracking\" property to true. If Kura 2.1.0 or older versions are used or the org.eclipse.kura.core.configuration.legacyServiceTracking system property is set to true, the OSGI-INF/component.xml should appear as shown below when complete: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr=\"http://www.osgi.org/xmlns/scr/v1.1.0\" name=\"org.eclipse.kura.example.serial.SerialExample\" activate=\"activate\" deactivate=\"deactivate\" modified=\"updated\" enabled=\"true\" immediate=\"true\" configuration-policy=\"require\"> <implementation class=\"org.eclipse.kura.example.serial.SerialExample\"/> <property name=\"service.pid\" type=\"String\" value=\"org.eclipse.kura.example.serial.SerialExample\"/> <service> <provide interface=\"org.eclipse.kura.example.serial.SerialExample\"/> </service> <reference bind=\"setConnectionFactory\" cardinality=\"1..1\" interface=\"org.osgi.service.io.ConnectionFactory\" name=\"ConnectionFactory\" policy=\"static\" unbind=\"unsetConnectionFactory\" /> </scr:component> If Kura 3.0 or newer versions are used and the org.eclipse.kura.core.configuration.legacyServiceTracking system property is set to false or not set, the OSGI-INF/component.xml should appear as shown below when complete: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <scr:component xmlns:scr=\"http://www.osgi.org/xmlns/scr/v1.1.0\" name=\"org.eclipse.kura.example.serial.SerialExample\" activate=\"activate\" deactivate=\"deactivate\" modified=\"updated\" enabled=\"true\" immediate=\"true\" configuration-policy=\"require\"> <implementation class=\"org.eclipse.kura.example.serial.SerialExample\"/> <property name=\"service.pid\" type=\"String\" value=\"org.eclipse.kura.example.serial.SerialExample\"/> <service> <provide interface=\"org.eclipse.kura.configuration.ConfigurableComponent\"/> </service> <reference bind=\"setConnectionFactory\" cardinality=\"1..1\" interface=\"org.osgi.service.io.ConnectionFactory\" name=\"ConnectionFactory\" policy=\"static\" unbind=\"unsetConnectionFactory\" /> </scr:component>","title":"OSGI-INF/component.xml File"},{"location":"java-application-development/how-to-serial-ports/#osgi-infmetatypeorgeclipsekuraexampleserialserialexamplexml-file","text":"The OSGI-INF/metatype/org.eclipse.kura.example.serial.SerialExample.xml file should appear as shown below when complete: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <MetaData xmlns=\"http://www.osgi.org/xmlns/metatype/v1.2.0\" localization=\"en_us\"> <OCD id=\"org.eclipse.kura.example.serial.SerialExample\" name=\"SerialExample\" description=\"Example of a Configuring KURA Application echoing data read from the serial port.\"> <Icon resource=\"http://sphotos-a.xx.fbcdn.net/hphotos-ash4/p480x480/408247_10151040905591065_1989684710_n.jpg\" size=\"32\"/> <AD id=\"serial.device\" name=\"serial.device\" type=\"String\" cardinality=\"0\" required=\"false\" description=\"Name of the serial device (e.g. /dev/ttyS0, /dev/ttyACM0, /dev/ttyUSB0).\"/> <AD id=\"serial.baudrate\" name=\"serial.baudrate\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"9600\" description=\"Baudrate.\"> <Option label=\"9600\" value=\"9600\"/> <Option label=\"19200\" value=\"19200\"/> <Option label=\"38400\" value=\"38400\"/> <Option label=\"57600\" value=\"57600\"/> <Option label=\"115200\" value=\"115200\"/> </AD> <AD id=\"serial.data-bits\" name=\"serial.data-bits\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"8\" description=\"Data bits.\"> <Option label=\"7\" value=\"7\"/> <Option label=\"8\" value=\"8\"/> </AD> <AD id=\"serial.parity\" name=\"serial.parity\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"none\" description=\"Parity.\"> <Option label=\"none\" value=\"none\"/> <Option label=\"even\" value=\"even\"/> <Option label=\"odd\" value=\"odd\"/> </AD> <AD id=\"serial.stop-bits\" name=\"serial.stop-bits\" type=\"String\" cardinality=\"0\" required=\"true\" default=\"1\" description=\"Stop bits.\"> <Option label=\"1\" value=\"1\"/> <Option label=\"2\" value=\"2\"/> </AD> </OCD> <Designate pid=\"org.eclipse.kura.example.serial.SerialExample\"> <Object ocdref=\"org.eclipse.kura.example.serial.SerialExample\"/> </Designate> </MetaData>","title":"OSGI-INF/metatype/org.eclipse.kura.example.serial.SerialExample.xml File"},{"location":"java-application-development/how-to-serial-ports/#orgeclipsekuraexampleserialserialexamplejava-file","text":"The org.eclipse.kura.example.serial.SerialExample.java file should appear as shown below when complete: package org.eclipse.kura.example.serial ; import java.io.IOException ; import java.io.InputStream ; import java.io.OutputStream ; import java.util.HashMap ; import java.util.Map ; import java.util.concurrent.Future ; import java.util.concurrent.ScheduledThreadPoolExecutor ; import org.osgi.service.component.ComponentContext ; import org.osgi.service.io.ConnectionFactory ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class SerialExample implements ConfigurableComponent { private static final Logger s_logger = LoggerFactory . getLogger ( SerialExample . class ); private static final String SERIAL_DEVICE_PROP_NAME = \"serial.device\" ; private static final String SERIAL_BAUDRATE_PROP_NAME = \"serial.baudrate\" ; private static final String SERIAL_DATA_BITS_PROP_NAME = \"serial.data-bits\" ; private static final String SERIAL_PARITY_PROP_NAME = \"serial.parity\" ; private static final String SERIAL_STOP_BITS_PROP_NAME = \"serial.stop-bits\" ; private ConnectionFactory m_connectionFactory ; private CommConnection m_commConnection ; private InputStream m_commIs ; private OutputStream m_commOs ; private ScheduledThreadPoolExecutor m_worker ; private Future <?> m_handle ; private Map < String , Object > m_properties ; // ---------------------------------------------------------------- // // Dependencies // // ---------------------------------------------------------------- public void setConnectionFactory ( ConnectionFactory connectionFactory ) { this . m_connectionFactory = connectionFactory ; } public void unsetConnectionFactory ( ConnectionFactory connectionFactory ) { this . m_connectionFactory = null ; } // ---------------------------------------------------------------- // // Activation APIs // // ---------------------------------------------------------------- protected void activate ( ComponentContext componentContext , Map < String , Object > properties ) { s_logger . info ( \"Activating SerialExample...\" ); m_worker = new ScheduledThreadPoolExecutor ( 1 ); m_properties = new HashMap < String , Object > (); doUpdate ( properties ); s_logger . info ( \"Activating SerialExample... Done.\" ); } protected void deactivate ( ComponentContext componentContext ) { s_logger . info ( \"Deactivating SerialExample...\" ); // shutting down the worker and cleaning up the properties m_handle . cancel ( true ); m_worker . shutdownNow (); //close the serial port closePort (); s_logger . info ( \"Deactivating SerialExample... Done.\" ); } public void updated ( Map < String , Object > properties ) { s_logger . info ( \"Updated SerialExample...\" ); doUpdate ( properties ); s_logger . info ( \"Updated SerialExample... Done.\" ); } // ---------------------------------------------------------------- // // Private Methods // // ---------------------------------------------------------------- /** * Called after a new set of properties has been configured on the service */ private void doUpdate ( Map < String , Object > properties ) { try { for ( String s : properties . keySet ()) { s_logger . info ( \"Update - \" + s + \": \" + properties . get ( s )); } // cancel a current worker handle if one if active if ( m_handle != null ) { m_handle . cancel ( true ); } //close the serial port so it can be reconfigured closePort (); //store the properties m_properties . clear (); m_properties . putAll ( properties ); //reopen the port with the new configuration openPort (); //start the worker thread m_handle = m_worker . submit ( new Runnable () { @Override public void run () { doSerial (); } }); } catch ( Throwable t ) { s_logger . error ( \"Unexpected Throwable\" , t ); } } private void openPort () { String port = ( String ) m_properties . get ( SERIAL_DEVICE_PROP_NAME ); if ( port == null ) { s_logger . info ( \"Port name not configured\" ); return ; } int baudRate = Integer . valueOf (( String ) m_properties . get ( SERIAL_BAUDRATE_PROP_NAME )); int dataBits = Integer . valueOf (( String ) m_properties . get ( SERIAL_DATA_BITS_PROP_NAME )); int stopBits = Integer . valueOf (( String ) m_properties . get ( SERIAL_STOP_BITS_PROP_NAME )); String sParity = ( String ) m_properties . get ( SERIAL_PARITY_PROP_NAME ); int parity = CommURI . PARITY_NONE ; if ( sParity . equals ( \"none\" )) { parity = CommURI . PARITY_NONE ; } else if ( sParity . equals ( \"odd\" )) { parity = CommURI . PARITY_ODD ; } else if ( sParity . equals ( \"even\" )) { parity = CommURI . PARITY_EVEN ; } String uri = new CommURI . Builder ( port ) . withBaudRate ( baudRate ) . withDataBits ( dataBits ) . withStopBits ( stopBits ) . withParity ( parity ) . withTimeout ( 1000 ) . build (). toString (); try { m_commConnection = ( CommConnection ) m_connectionFactory . createConnection ( uri , 1 , false ); m_commIs = m_commConnection . openInputStream (); m_commOs = m_commConnection . openOutputStream (); s_logger . info ( port + \" open\" ); } catch ( IOException e ) { s_logger . error ( \"Failed to open port \" + port , e ); cleanupPort (); } } private void cleanupPort () { if ( m_commIs != null ) { try { s_logger . info ( \"Closing port input stream...\" ); m_commIs . close (); s_logger . info ( \"Closed port input stream\" ); } catch ( IOException e ) { s_logger . error ( \"Cannot close port input stream\" , e ); } m_commIs = null ; } if ( m_commOs != null ) { try { s_logger . info ( \"Closing port output stream...\" ); m_commOs . close (); s_logger . info ( \"Closed port output stream\" ); } catch ( IOException e ) { s_logger . error ( \"Cannot close port output stream\" , e ); } m_commOs = null ; } if ( m_commConnection != null ) { try { s_logger . info ( \"Closing port...\" ); m_commConnection . close (); s_logger . info ( \"Closed port\" ); } catch ( IOException e ) { s_logger . error ( \"Cannot close port\" , e ); } m_commConnection = null ; } } private void closePort () { cleanupPort (); } private void doSerial () { if ( m_commIs != null ) { try { int c = - 1 ; StringBuilder sb = new StringBuilder (); while ( m_commIs != null ) { if ( m_commIs . available () != 0 ) { c = m_commIs . read (); } else { try { Thread . sleep ( 100 ); continue ; } catch ( InterruptedException e ) { return ; } } // on reception of CR, publish the received sentence if ( c == 13 ) { s_logger . debug ( \"Received serial input, echoing to output: \" + sb . toString ()); sb . append ( \"\\r\\n\" ); String dataRead = sb . toString (); //echo the data to the output stream m_commOs . write ( dataRead . getBytes ()); //reset the buffer sb = new StringBuilder (); } else if ( c != 10 ) { sb . append (( char ) c ); } } } catch ( IOException e ) { s_logger . error ( \"Cannot read port\" , e ); } finally { try { m_commIs . close (); } catch ( IOException e ) { s_logger . error ( \"Cannot close buffered reader\" , e ); } } } } } At this point, the bundle implementation is complete. Make sure to save all files before proceeding.","title":"org.eclipse.kura.example.serial.SerialExample.java File"},{"location":"java-application-development/how-to-serial-ports/#export-the-bundle","text":"To build the Serial Example bundle as a stand-alone OSGi plugin, right-click the project and select Export. From the wizard, select Plug-in Development | Deployable plug-ins and fragments and click Next. The Export window appears. Under Available Plug-ins and Fragments, verify that the newly created plug-in is selected. Under Destination, select the Directory option button and use the Browse button to select an appropriate place to save the JAR file on the local file system. Info You will need to know the location where this JAR file is saved for the deployment process. Under Options, select the checkbox Use class files compiled in the workspace in addition to the checkboxes already enabled, and click Finish. Doing so will create a JAR file in the selected directory (e.g., /home/joe/myPlugins/plugins/org.eclipse.kura.example.serial_1.0.0.201410311510.jar).","title":"Export the Bundle"},{"location":"java-application-development/how-to-serial-ports/#deploy-the-bundle","text":"In order to proceed, you need to know the IP address of your embedded gateway that is running Kura. Once you have this IP address, follow the mToolkit instructions for installing a single bundle to a remote target device (refer to section 2.03 Testing and Deploying Bundles ). Once the installation successfully completes, you should see a message from the /var/log/kura.log file indicating that the bundle was successfully installed and configured. You can also run this example with the emulator in a Linux or OS X environment as shown sample output below. Make sure that your user account has owner permission for the serial device in /dev.","title":"Deploy the Bundle"},{"location":"java-application-development/how-to-serial-ports/#validate-the-bundle","text":"Next, you need to test that your bundle does indeed echo characters back by opening minicom and configuring it to use [device_node_2] that was previously determined. Open minicom using the following command at a Linux terminal on the remote gateway device: minicom -s This command opens a view similar to the following screen capture: Scroll down to Serial port setup and press . A new dialog window opens as shown below: Use the minicom menu options on the left (i.e., A, B, C, etc.) to change desired fields. Set the fields to the same values as shown in the previous screen capture except the Serial Device should match the [device_node_2] on your target device. Once this is set, press \\<ENTER> to exit from this menu. In the main configuration menu, select Exit ( do not select the option Exit from Minicom). At this point, you have successfully started minicom on the second serial port attached to your null modem cable allowing minicom to act as a serial device that can send and receive commands to your Kura bundle. You can verify this operation by typing characters and pressing . The function (specifically a \u2018\\n\u2019 character) signals to the Kura application to echo the buffered characters back to the serial device (minicom in this case). Upon startup, minicom sends an initialization string to the serial device. These characters are sent to the minicom terminal because they were echoed back by Kura listening on the port at the other end of the null modem cable. When you are done, exit minicom by pressing \u2018 a\u2019, then \u2018q\u2019, and finally \u2018 \u2019. Doing so brings you back to the Linux command prompt. This tutorial instructed you how to write and deploy a Kura bundle on your target device that listens for serial data (coming from the minicom terminal and being received on [device_node_1]). This tutorial also demonstrated that the application echoes data back to the same serial port that is received in minicom, which acts a serial device that sends and receives data. If supported by the device, Kura may send and receive binary data instead of ASCII.","title":"Validate the Bundle"},{"location":"java-application-development/how-to-use-can-bus/","text":"How to Use CAN bus The Kura CAN bus protocol implementation is based on the SocketCAN interface, which provides a socket interface to userspace applications. The sockets are designed as can0 and can1. The SocketCAN package is an implementation of Controller Area Network (CAN) protocols. For more information, refer to the following link: https://www.kernel.org/doc/Documentation/networking/can.txt . Configure the CAN bus Driver The CAN network must be initialized prior to communications. Verify that the CAN driver module has been enabled in the kernel by issuing the following command: ifconfig -a The connections \u201ccan0\u201d and \u201ccan1\u201d should be displayed. Next, the sockets must be enabled and configured using the following commands (the bitrate value must be set according to the bitrate of the device that will be connected): ip link set can0 type can bitrate 50000 triple-sampling on ip link set can0 up ip link set can1 type can bitrate 50000 triple-sampling on ip link set can1 up Use the CAN bus Driver in Kura To use the Can bus Driver in Kura, the bundle org.eclipse.kura.protocol.can must be installed. Refer to the section Application Management for more information. Once this bundle is installed and verified, the CanConnectionService provides access to basic functionalities of the CAN network, including: sendCanMessage \u2013 sends an array of bytes in RAW mode. receiveCanMessage \u2013 reads frames in RAW mode waiting on socket CAN. Refer to the following Kura javadocs for more information: http://download.eclipse.org/kura/docs/api/5.2.0/apidocs/ . Also, for information about the wrapper that this service utilizes, refer to the following link: https://github.com/entropia/libsocket-can-java .","title":"How to Use CAN bus"},{"location":"java-application-development/how-to-use-can-bus/#how-to-use-can-bus","text":"The Kura CAN bus protocol implementation is based on the SocketCAN interface, which provides a socket interface to userspace applications. The sockets are designed as can0 and can1. The SocketCAN package is an implementation of Controller Area Network (CAN) protocols. For more information, refer to the following link: https://www.kernel.org/doc/Documentation/networking/can.txt .","title":"How to Use CAN bus"},{"location":"java-application-development/how-to-use-can-bus/#configure-the-can-bus-driver","text":"The CAN network must be initialized prior to communications. Verify that the CAN driver module has been enabled in the kernel by issuing the following command: ifconfig -a The connections \u201ccan0\u201d and \u201ccan1\u201d should be displayed. Next, the sockets must be enabled and configured using the following commands (the bitrate value must be set according to the bitrate of the device that will be connected): ip link set can0 type can bitrate 50000 triple-sampling on ip link set can0 up ip link set can1 type can bitrate 50000 triple-sampling on ip link set can1 up","title":"Configure the CAN bus Driver"},{"location":"java-application-development/how-to-use-can-bus/#use-the-can-bus-driver-in-kura","text":"To use the Can bus Driver in Kura, the bundle org.eclipse.kura.protocol.can must be installed. Refer to the section Application Management for more information. Once this bundle is installed and verified, the CanConnectionService provides access to basic functionalities of the CAN network, including: sendCanMessage \u2013 sends an array of bytes in RAW mode. receiveCanMessage \u2013 reads frames in RAW mode waiting on socket CAN. Refer to the following Kura javadocs for more information: http://download.eclipse.org/kura/docs/api/5.2.0/apidocs/ . Also, for information about the wrapper that this service utilizes, refer to the following link: https://github.com/entropia/libsocket-can-java .","title":"Use the CAN bus Driver in Kura"},{"location":"java-application-development/how-to-use-dummy-signature-service/","text":"How to use the Dummy Container Signature Validation Service The Dummy Container Signature Validation Service is an example implementation of the Container Signature Validation Service interface which mainly serves as a reference for future implementations and testing. The purpose of this component is to have a service whose configuration dictates the signature verification outcome. In the main text area is possible to set the container image reference that the service will report as correctly signed. The format accepted by the service is: <imageName>:<imageTag>@<imageDigest> where <imageName> : is the container image name. The value will need to be expressed in the form registryURL/imagename in case of a custom registry. Example: nginx or nvcr.io/nvidia/deepstream . <imageTag> : is the container image tag. Example: latest or 6.4-gc-triton-devel . <imageDigest> : is the image digest in the OCI specification format . Each image should be separated by a newline. The service will report a successful signature validation for each image inside its configuration, returning the provided image digest as a result.","title":"How to Use Dummy Container Signature Validation Service"},{"location":"java-application-development/how-to-use-dummy-signature-service/#how-to-use-the-dummy-container-signature-validation-service","text":"The Dummy Container Signature Validation Service is an example implementation of the Container Signature Validation Service interface which mainly serves as a reference for future implementations and testing. The purpose of this component is to have a service whose configuration dictates the signature verification outcome. In the main text area is possible to set the container image reference that the service will report as correctly signed. The format accepted by the service is: <imageName>:<imageTag>@<imageDigest> where <imageName> : is the container image name. The value will need to be expressed in the form registryURL/imagename in case of a custom registry. Example: nginx or nvcr.io/nvidia/deepstream . <imageTag> : is the container image tag. Example: latest or 6.4-gc-triton-devel . <imageDigest> : is the image digest in the OCI specification format . Each image should be separated by a newline. The service will report a successful signature validation for each image inside its configuration, returning the provided image digest as a result.","title":"How to use the Dummy Container Signature Validation Service"},{"location":"java-application-development/how-to-use-gpio/","text":"How to use GPIO GPIO resources can be accessed either using the GPIO Service provided by Kura, or directly using the OpenJDK Device I/O embedded library. GPIO Service Access to GPIO resources is granted by the GPIOService . Once retrieved, the service can be used to acquire a GPIO Pin and use it as a digital output or a digital input. The GPIO Service exposes methods to retrieve a GPIO Pin via its name or index as shown below. KuraGpioPin thePin = gpioServiceInstance . getPinByTerminal ( 18 ); KuraGpioPin thePin = gpioServiceInstance . getPinByName ( \"IgnitionPin\" ); The KuraGpioPin object is used to manipulate GPIO Pins and exposes methods to read the status of an input, or set the status of digital output as shown below. //sets digital output value to high thePin . setValue ( true ); //get value of a digital input pin boolean active = thePin . getValue (); //listen for status change on a digital input pin try { thePin . addPinStatusListener ( new PinStatusListener () { @Override public void pinStatusChange ( boolean value ) { // Perform tasks when pin status changes } }); } catch ( KuraClosedDeviceException e ) { // Here if GPIO cannot be acquired } catch ( IOException e ) { // Here on I/O error } Pin Configuration Pin names, indexes, and configuration are defined in the jdk.dio.properties file. Although GPIO pins can be accessed with their default configuration, the settings of each pin can be changed when acquiring it with the GPIO Service as shown below. KuraGpioPin customInputPin = gpioServiceInstance . getPinByTerminal ( 14 , KuraGPIODirection . INPUT , KuraGPIOMode . INPUT_PULL_UP , KuraGPIOTrigger . BOTH_LEVELS ); OpenJDK Device I/O Linux-level access in Kura is granted through OpenJDK Device I/O, a third-party library that leverages standard Java ME Device I/O APIs to Java SE. Kura is distributed with the relevant native libraries, together with the default hardware configuration, for each platform on which it runs. I2C, SPI, and GPIO resources can be directly accessed through the jdk.dio library present in the target platform. Default Configuration Default hardware configuration for the hardware platform is defined in the jdk.dio.properties file. Standard configuration for complex devices can be added on a per-device basis as shown below. #Default PIN configuration. To be overwritten in the following lines gpio.GPIOPin = initValue:0, deviceNumber:0, direction:3, mode:-1, trigger:3 #Standard PIN configuration 64 = deviceType: gpio.GPIOPin, pinNumber:64, name:RELAY1 APIs Kura supports the full set of APIs for the listed device types. Refer to References for further API information. Accessing a GPIO Pin with OpenJDK Device I/O A GPIO Pin can be accessed by referencing its index in the properties file, or by creating a Pin configuration object and feeding it to the DeviceManager as shown in the code examples below. Accessing a GPIO Pin by its Index # Accessing the GPIO Pin number 17. The default behaviour is defined in the # jdk . dio . properties file # # i . e .: # gpio . GPIOPin = initValue : 0 , deviceNumber : 0 , direction : 3 , mode : - 1 , trigger : 3 # 17 = deviceType : gpio . GPIOPin , pinNumber : 17 , name : GPIO_USER_1 GPIOPin led = ( GPIOPin ) DeviceManager . open ( 17 ); led . setValue ( true ) //Turns the LED on led . setValue ( false ) //Turns the LED off boolean status = led . getValue () //true if the LED is on Accessing a GPIO Pin Using a Device Configuration Object # Accessing the Pin number 17 with custom configuration GPIOPinConfig pinConfig = new GPIOPinConfig ( DeviceConfig . DEFAULT , //GPIO Controller number or name 17 , //GPIO Pin number GPIOPinConfig . DIR_INPUT_ONLY , //Pin direction GPIOPinConfig . MODE_INPUT_PULL_DOWN , //Pin resistor GPIOPinConfig . TRIGGER_BOTH_EDGES , //Triggers false //initial value (for outputs) ); GPIOPin button = ( GPIOPin ) DeviceManager . open ( GPIOPin . class , pinConfig ); button . setInputListener ( new PinListener (){ @Override public void valueChanged ( PinEvent event ) { System . out . println ( \"PIN Status Changed!\" ); System . out . println ( event . getLastTimeStamp () + \" - \" + event . getValue ()); } });","title":"How to Use GPIO"},{"location":"java-application-development/how-to-use-gpio/#how-to-use-gpio","text":"GPIO resources can be accessed either using the GPIO Service provided by Kura, or directly using the OpenJDK Device I/O embedded library.","title":"How to use GPIO"},{"location":"java-application-development/how-to-use-gpio/#gpio-service","text":"Access to GPIO resources is granted by the GPIOService . Once retrieved, the service can be used to acquire a GPIO Pin and use it as a digital output or a digital input. The GPIO Service exposes methods to retrieve a GPIO Pin via its name or index as shown below. KuraGpioPin thePin = gpioServiceInstance . getPinByTerminal ( 18 ); KuraGpioPin thePin = gpioServiceInstance . getPinByName ( \"IgnitionPin\" ); The KuraGpioPin object is used to manipulate GPIO Pins and exposes methods to read the status of an input, or set the status of digital output as shown below. //sets digital output value to high thePin . setValue ( true ); //get value of a digital input pin boolean active = thePin . getValue (); //listen for status change on a digital input pin try { thePin . addPinStatusListener ( new PinStatusListener () { @Override public void pinStatusChange ( boolean value ) { // Perform tasks when pin status changes } }); } catch ( KuraClosedDeviceException e ) { // Here if GPIO cannot be acquired } catch ( IOException e ) { // Here on I/O error }","title":"GPIO Service"},{"location":"java-application-development/how-to-use-gpio/#pin-configuration","text":"Pin names, indexes, and configuration are defined in the jdk.dio.properties file. Although GPIO pins can be accessed with their default configuration, the settings of each pin can be changed when acquiring it with the GPIO Service as shown below. KuraGpioPin customInputPin = gpioServiceInstance . getPinByTerminal ( 14 , KuraGPIODirection . INPUT , KuraGPIOMode . INPUT_PULL_UP , KuraGPIOTrigger . BOTH_LEVELS );","title":"Pin Configuration"},{"location":"java-application-development/how-to-use-gpio/#openjdk-device-io","text":"Linux-level access in Kura is granted through OpenJDK Device I/O, a third-party library that leverages standard Java ME Device I/O APIs to Java SE. Kura is distributed with the relevant native libraries, together with the default hardware configuration, for each platform on which it runs. I2C, SPI, and GPIO resources can be directly accessed through the jdk.dio library present in the target platform.","title":"OpenJDK Device I/O"},{"location":"java-application-development/how-to-use-gpio/#default-configuration","text":"Default hardware configuration for the hardware platform is defined in the jdk.dio.properties file. Standard configuration for complex devices can be added on a per-device basis as shown below. #Default PIN configuration. To be overwritten in the following lines gpio.GPIOPin = initValue:0, deviceNumber:0, direction:3, mode:-1, trigger:3 #Standard PIN configuration 64 = deviceType: gpio.GPIOPin, pinNumber:64, name:RELAY1","title":"Default Configuration"},{"location":"java-application-development/how-to-use-gpio/#apis","text":"Kura supports the full set of APIs for the listed device types. Refer to References for further API information.","title":"APIs"},{"location":"java-application-development/how-to-use-gpio/#accessing-a-gpio-pin-with-openjdk-device-io","text":"A GPIO Pin can be accessed by referencing its index in the properties file, or by creating a Pin configuration object and feeding it to the DeviceManager as shown in the code examples below.","title":"Accessing a GPIO Pin with OpenJDK Device I/O"},{"location":"java-application-development/how-to-use-gpio/#accessing-a-gpio-pin-by-its-index","text":"# Accessing the GPIO Pin number 17. The default behaviour is defined in the # jdk . dio . properties file # # i . e .: # gpio . GPIOPin = initValue : 0 , deviceNumber : 0 , direction : 3 , mode : - 1 , trigger : 3 # 17 = deviceType : gpio . GPIOPin , pinNumber : 17 , name : GPIO_USER_1 GPIOPin led = ( GPIOPin ) DeviceManager . open ( 17 ); led . setValue ( true ) //Turns the LED on led . setValue ( false ) //Turns the LED off boolean status = led . getValue () //true if the LED is on","title":"Accessing a GPIO Pin by its Index"},{"location":"java-application-development/how-to-use-gpio/#accessing-a-gpio-pin-using-a-device-configuration-object","text":"# Accessing the Pin number 17 with custom configuration GPIOPinConfig pinConfig = new GPIOPinConfig ( DeviceConfig . DEFAULT , //GPIO Controller number or name 17 , //GPIO Pin number GPIOPinConfig . DIR_INPUT_ONLY , //Pin direction GPIOPinConfig . MODE_INPUT_PULL_DOWN , //Pin resistor GPIOPinConfig . TRIGGER_BOTH_EDGES , //Triggers false //initial value (for outputs) ); GPIOPin button = ( GPIOPin ) DeviceManager . open ( GPIOPin . class , pinConfig ); button . setInputListener ( new PinListener (){ @Override public void valueChanged ( PinEvent event ) { System . out . println ( \"PIN Status Changed!\" ); System . out . println ( event . getLastTimeStamp () + \" - \" + event . getValue ()); } });","title":"Accessing a GPIO Pin Using a Device Configuration Object"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/","text":"How to Use Legacy Bluetooth LE Beacon Scanner Warning This guide uses the deprecated Kura Bluetooth APIs. Please consider to use the new ones . Overview The Bluetooth Beacon Scanner example is a bundle for Eclipse Kura that uses the Bluetooth LE service to search for near Beacon devices. A Beacon device is a Bluetooth Low Energy device that broadcasts its identity to nearby devices. It uses a specific BLE packet, called beacon or advertising packet, that contains the following information: Proximity UUID - a 128-bit value that uniquely identifies one or more beacons as a certain type or from a certain organization. Major value - an optional 16-bit unsigned integer that can group related beacons with the same proximity UUID. Minor value - an optional 16-bit unsigned integer that differentiates beacons with the same proximity UUID and major value. Tx Power - a value programmed into the beacon that enables distance from the beacon to be determined based on signal strength. The Beacon Scanner bundle is configured with a Company Code in order to filter the near beacons. So, only beacons with a specific Company Code are discovered by the bundle and their information are reported. Moreover the bundle is able to roughly estimate the distance from the beacon. For further information about the Beacons, please refer to the BLE Beacon Example . Prerequisites Development Environment Setup Hardware Embedded device running Kura with Bluetooth 4.0 (LE) capabilities. bluez_ packet must be installed on the embedded device. Follow the installation instructions in How to Use Bluetooth LE . For this tutorial a Raspberry Pi Type B with a LMTechnologies LM506 Bluetooth 4.0 dongle is used. Beacon Scanning with Kura The Beacon Scanner bundle is a Kura example that allows you to configure the Company Code for the Beacon filtering and to start/stop the scanner procedure. Develop the Beacon Scanner Bundle The Beacon Scanner bundle code development follows the guidelines presented in the Hello World Application : Create a Plug-in Project named org.eclipse.kura.example.beacon.scanner . Create the class BeaconScannerExample . Include the following bundles in the MANIFEST.MF: org.eclipse.kura.bluetooth org.eclipse.kura.configuration org.osgi.service.component org.slf4j The following files need to be implemented in order to write the source code: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/beaconExample.xml - declarative services definition that describes the services exposed and consumed by this bundle. OSGI-INF/metatype/org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.xml - configuration description of the bundle and its parameters, types, and defaults. org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.java - main implementation class. OSGI-INF/metatype/org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.xml File The OSGI-INF/metatype/org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.xml file describes the parameters for this bundle including the following: enableScanning - enables Beacon scanning. companyCode - defines a 16-bit company code as hex string. iname - provides the name of bluetooth adapter. org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.java File The com.eurotech.example.beacon.scanner.BeaconScannerExample.java file contains the activate, deactivate and updated methods for this bundle. The activate and updated methods gets the properties from the configurable component and, if the scanning is enabled, call the setup private method. This method gets the BluetoothAdapter , enables the interface if needed, and starts the scan calling the bluetootAdapter.startBeaconScan(companyCode, listener) method. The arguments of the method are the companyCode and a listener that is notified when a device is detected. In this case the BeaconScannerExample class implements BluetoothBeaconScanListener . The following code sample shows the setup method: private void setup () { this . publishTimes = new HashMap < String , Long > (); this . bluetoothAdapter = this . bluetoothService . getBluetoothAdapter ( this . adapterName ); if ( this . bluetoothAdapter != null ) { this . bluetoothAdapter . startBeaconScan ( this . companyCode , this ); } } Since BeaconScannerExample implements BluetoothBeaconScanListener , the onBeaconDataReceived method must be overridden. When a device is detected, the listener is notified and the onBeaconDataReceived method is called with a BluetoothBeaconData object. The BluetoothBeaconData class contains the following fields: uuid - a 128-bit value that uniquely identifies one or more beacons as a certain type or from a certain organization. address - the source of the beacon major - an optional 16-bit unsigned integer that can group related beacons with the same proximity UUID. minor - an optional 16-bit unsigned integer that differentiates beacons with the same proximity UUID and major value. rssi - the Received Signal Strength Indication txpower - a value programmed into the beacon that enables distance from the beacon to be determined based on signal strength. The following code is an implementation of onBeaconDataReceived that logs the BluetoothBeaconData fields: public void onBeaconDataReceived ( BluetoothBeaconData beaconData ) { logger . debug ( \"Beacon from {} detected.\" , beaconData . address ); long now = System . nanoTime (); Long lastPublishTime = this . publishTimes . get ( beaconData . address ); // If this beacon is new, or it last published more than 'rateLimit' ms ago if ( lastPublishTime == null || ( now - lastPublishTime ) / 1000000L > this . rateLimit ) { // Store the publish time against the address this . publishTimes . put ( beaconData . address , now ); if ( this . cloudPublisher == null ) { logger . info ( \"No cloud publisher selected. Cannot publish!\" ); return ; } // Publish the beacon data to the beacon's topic KuraPayload kp = new KuraPayload (); kp . setTimestamp ( new Date ()); kp . addMetric ( \"uuid\" , beaconData . uuid ); kp . addMetric ( \"txpower\" , beaconData . txpower ); kp . addMetric ( \"rssi\" , beaconData . rssi ); kp . addMetric ( \"major\" , beaconData . major ); kp . addMetric ( \"minor\" , beaconData . minor ); kp . addMetric ( \"distance\" , calculateDistance ( beaconData . rssi , beaconData . txpower )); Map < String , Object > properties = new HashMap < String , Object > (); properties . put ( \"address\" , beaconData . address ); KuraMessage message = new KuraMessage ( kp , properties ); try { this . cloudPublisher . publish ( message ); } catch ( KuraException e ) { logger . error ( \"Unable to publish\" , e ); } } } Finally, the Beacon Scanner is able to roughly estimate the distance of the detected beacon using the calculateDistance method: private double calculateDistance ( int rssi , int txpower ) { double distance ; int ratioDB = txpower - rssi ; double ratioLinear = Math . pow ( 10 , ( double ) ratioDB / 10 ); distance = Math . sqrt ( ratioLinear ); return distance ; } Deploy and Validate the Bundle In order to proceed, you need to know the IP address of your embedded gateway that is on the remote target unit. With this information, follow the mToolkit instructions for installing a single bundle to the remote target device located here . When the installation is complete, the bundle starts automatically. In the Kura Gateway Administration Console, the BeaconScannerExample tab appears on the left and enables the device to be configured for scanning. You should see a message similar to the one below from /var/log/kura.log indicating that the bundle was successfully installed and configured. 2016-08-08 14:39:48,351 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.s.BeaconScannerExample - Activating Bluetooth Beacon Scanner example... 2016-08-08 14:39:48,353 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.s.BeaconScannerExample - Activating Bluetooth Beacon Scanner example...Done 2016-08-08 14:39:48,373 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurableComponentTracker - Adding ConfigurableComponent with pid org.eclipse.kura.example.beacon.scanner.BeaconScannerExample, service pid org.eclipse.kura.example.beacon.scanner.BeaconScannerExample and factory pid null 2016-08-08 14:39:48,373 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration of ConfigurableComponent org.eclipse.kura.example.beacon.scanner.BeaconScannerExample by org.eclipse.kura.core.configuration.ConfigurationServiceImpl@1197c95... 2016-08-08 14:40:40,186 [qtp23115489-40] WARN o.e.k.w.s.s.SkinServlet - Resource File /opt/eclipse/kura/console/skin/skin.js does not exist 2016-08-08 14:40:56,996 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Loading init configurations from: 1470667042563... 2016-08-08 14:40:57,679 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Merging configuration for pid: org.eclipse.kura.example.beacon.scanner.BeaconScannerExample 2016-08-08 14:40:57,687 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Updating Configuration of ConfigurableComponent org.eclipse.kura.example.beacon.scanner.BeaconScannerExample ... Done. 2016-08-08 14:40:57,689 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Writing snapshot - Saving /opt/eclipse/kura/data/snapshots/snapshot_1470667257688.xml... 2016-08-08 14:40:57,914 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Writing snapshot - Saving /opt/eclipse/kura/data/snapshots/snapshot_1470667257688.xml... Done. 2016-08-08 14:40:57,916 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Snapshots Garbage Collector. Deleting /opt/eclipse/kura/data/snapshots/snapshot_1470651681077.xml 2016-08-08 14:40:58,013 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.l.BluetoothLeScanner - Starting bluetooth le beacon scan... Using a device equipped with Kura acting as a Beacon (see BLE Beacon Example ), the following lines appear on the log file when the device is detected: 2016-08-08 14:49:03,487 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - UUID : AAAAAAAABBBBCCCCDDDDEEEEEEEEEEEE 2016-08-08 14:49:03,488 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - TxPower : -58 2016-08-08 14:49:03,488 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - RSSI : -55 2016-08-08 14:49:03,489 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Major : 0 2016-08-08 14:49:03,489 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Minor : 0 2016-08-08 14:49:03,490 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Address : 5C:F3:70:60:63:8F 2016-08-08 14:49:03,490 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Distance : 0.7079457843841379","title":"How to Use Legacy Bluetooth LE Beacon Scanner"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#how-to-use-legacy-bluetooth-le-beacon-scanner","text":"Warning This guide uses the deprecated Kura Bluetooth APIs. Please consider to use the new ones .","title":"How to Use Legacy Bluetooth LE Beacon Scanner"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#overview","text":"The Bluetooth Beacon Scanner example is a bundle for Eclipse Kura that uses the Bluetooth LE service to search for near Beacon devices. A Beacon device is a Bluetooth Low Energy device that broadcasts its identity to nearby devices. It uses a specific BLE packet, called beacon or advertising packet, that contains the following information: Proximity UUID - a 128-bit value that uniquely identifies one or more beacons as a certain type or from a certain organization. Major value - an optional 16-bit unsigned integer that can group related beacons with the same proximity UUID. Minor value - an optional 16-bit unsigned integer that differentiates beacons with the same proximity UUID and major value. Tx Power - a value programmed into the beacon that enables distance from the beacon to be determined based on signal strength. The Beacon Scanner bundle is configured with a Company Code in order to filter the near beacons. So, only beacons with a specific Company Code are discovered by the bundle and their information are reported. Moreover the bundle is able to roughly estimate the distance from the beacon. For further information about the Beacons, please refer to the BLE Beacon Example .","title":"Overview"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#prerequisites","text":"Development Environment Setup Hardware Embedded device running Kura with Bluetooth 4.0 (LE) capabilities. bluez_ packet must be installed on the embedded device. Follow the installation instructions in How to Use Bluetooth LE . For this tutorial a Raspberry Pi Type B with a LMTechnologies LM506 Bluetooth 4.0 dongle is used.","title":"Prerequisites"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#beacon-scanning-with-kura","text":"The Beacon Scanner bundle is a Kura example that allows you to configure the Company Code for the Beacon filtering and to start/stop the scanner procedure.","title":"Beacon Scanning with Kura"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#develop-the-beacon-scanner-bundle","text":"The Beacon Scanner bundle code development follows the guidelines presented in the Hello World Application : Create a Plug-in Project named org.eclipse.kura.example.beacon.scanner . Create the class BeaconScannerExample . Include the following bundles in the MANIFEST.MF: org.eclipse.kura.bluetooth org.eclipse.kura.configuration org.osgi.service.component org.slf4j The following files need to be implemented in order to write the source code: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/beaconExample.xml - declarative services definition that describes the services exposed and consumed by this bundle. OSGI-INF/metatype/org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.xml - configuration description of the bundle and its parameters, types, and defaults. org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.java - main implementation class.","title":"Develop the Beacon Scanner Bundle"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#osgi-infmetatypeorgeclipsekuraexamplebeaconscannerbeaconscannerexamplexml-file","text":"The OSGI-INF/metatype/org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.xml file describes the parameters for this bundle including the following: enableScanning - enables Beacon scanning. companyCode - defines a 16-bit company code as hex string. iname - provides the name of bluetooth adapter.","title":"OSGI-INF/metatype/org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.xml File"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#orgeclipsekuraexamplebeaconscannerbeaconscannerexamplejava-file","text":"The com.eurotech.example.beacon.scanner.BeaconScannerExample.java file contains the activate, deactivate and updated methods for this bundle. The activate and updated methods gets the properties from the configurable component and, if the scanning is enabled, call the setup private method. This method gets the BluetoothAdapter , enables the interface if needed, and starts the scan calling the bluetootAdapter.startBeaconScan(companyCode, listener) method. The arguments of the method are the companyCode and a listener that is notified when a device is detected. In this case the BeaconScannerExample class implements BluetoothBeaconScanListener . The following code sample shows the setup method: private void setup () { this . publishTimes = new HashMap < String , Long > (); this . bluetoothAdapter = this . bluetoothService . getBluetoothAdapter ( this . adapterName ); if ( this . bluetoothAdapter != null ) { this . bluetoothAdapter . startBeaconScan ( this . companyCode , this ); } } Since BeaconScannerExample implements BluetoothBeaconScanListener , the onBeaconDataReceived method must be overridden. When a device is detected, the listener is notified and the onBeaconDataReceived method is called with a BluetoothBeaconData object. The BluetoothBeaconData class contains the following fields: uuid - a 128-bit value that uniquely identifies one or more beacons as a certain type or from a certain organization. address - the source of the beacon major - an optional 16-bit unsigned integer that can group related beacons with the same proximity UUID. minor - an optional 16-bit unsigned integer that differentiates beacons with the same proximity UUID and major value. rssi - the Received Signal Strength Indication txpower - a value programmed into the beacon that enables distance from the beacon to be determined based on signal strength. The following code is an implementation of onBeaconDataReceived that logs the BluetoothBeaconData fields: public void onBeaconDataReceived ( BluetoothBeaconData beaconData ) { logger . debug ( \"Beacon from {} detected.\" , beaconData . address ); long now = System . nanoTime (); Long lastPublishTime = this . publishTimes . get ( beaconData . address ); // If this beacon is new, or it last published more than 'rateLimit' ms ago if ( lastPublishTime == null || ( now - lastPublishTime ) / 1000000L > this . rateLimit ) { // Store the publish time against the address this . publishTimes . put ( beaconData . address , now ); if ( this . cloudPublisher == null ) { logger . info ( \"No cloud publisher selected. Cannot publish!\" ); return ; } // Publish the beacon data to the beacon's topic KuraPayload kp = new KuraPayload (); kp . setTimestamp ( new Date ()); kp . addMetric ( \"uuid\" , beaconData . uuid ); kp . addMetric ( \"txpower\" , beaconData . txpower ); kp . addMetric ( \"rssi\" , beaconData . rssi ); kp . addMetric ( \"major\" , beaconData . major ); kp . addMetric ( \"minor\" , beaconData . minor ); kp . addMetric ( \"distance\" , calculateDistance ( beaconData . rssi , beaconData . txpower )); Map < String , Object > properties = new HashMap < String , Object > (); properties . put ( \"address\" , beaconData . address ); KuraMessage message = new KuraMessage ( kp , properties ); try { this . cloudPublisher . publish ( message ); } catch ( KuraException e ) { logger . error ( \"Unable to publish\" , e ); } } } Finally, the Beacon Scanner is able to roughly estimate the distance of the detected beacon using the calculateDistance method: private double calculateDistance ( int rssi , int txpower ) { double distance ; int ratioDB = txpower - rssi ; double ratioLinear = Math . pow ( 10 , ( double ) ratioDB / 10 ); distance = Math . sqrt ( ratioLinear ); return distance ; }","title":"org.eclipse.kura.example.beacon.scanner.BeaconScannerExample.java File"},{"location":"java-application-development/how-to-use-legacy-bt-beacon-scanner/#deploy-and-validate-the-bundle","text":"In order to proceed, you need to know the IP address of your embedded gateway that is on the remote target unit. With this information, follow the mToolkit instructions for installing a single bundle to the remote target device located here . When the installation is complete, the bundle starts automatically. In the Kura Gateway Administration Console, the BeaconScannerExample tab appears on the left and enables the device to be configured for scanning. You should see a message similar to the one below from /var/log/kura.log indicating that the bundle was successfully installed and configured. 2016-08-08 14:39:48,351 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.s.BeaconScannerExample - Activating Bluetooth Beacon Scanner example... 2016-08-08 14:39:48,353 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.s.BeaconScannerExample - Activating Bluetooth Beacon Scanner example...Done 2016-08-08 14:39:48,373 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurableComponentTracker - Adding ConfigurableComponent with pid org.eclipse.kura.example.beacon.scanner.BeaconScannerExample, service pid org.eclipse.kura.example.beacon.scanner.BeaconScannerExample and factory pid null 2016-08-08 14:39:48,373 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration of ConfigurableComponent org.eclipse.kura.example.beacon.scanner.BeaconScannerExample by org.eclipse.kura.core.configuration.ConfigurationServiceImpl@1197c95... 2016-08-08 14:40:40,186 [qtp23115489-40] WARN o.e.k.w.s.s.SkinServlet - Resource File /opt/eclipse/kura/console/skin/skin.js does not exist 2016-08-08 14:40:56,996 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Loading init configurations from: 1470667042563... 2016-08-08 14:40:57,679 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Merging configuration for pid: org.eclipse.kura.example.beacon.scanner.BeaconScannerExample 2016-08-08 14:40:57,687 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Updating Configuration of ConfigurableComponent org.eclipse.kura.example.beacon.scanner.BeaconScannerExample ... Done. 2016-08-08 14:40:57,689 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Writing snapshot - Saving /opt/eclipse/kura/data/snapshots/snapshot_1470667257688.xml... 2016-08-08 14:40:57,914 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Writing snapshot - Saving /opt/eclipse/kura/data/snapshots/snapshot_1470667257688.xml... Done. 2016-08-08 14:40:57,916 [qtp23115489-42] INFO o.e.k.c.c.ConfigurationServiceImpl - Snapshots Garbage Collector. Deleting /opt/eclipse/kura/data/snapshots/snapshot_1470651681077.xml 2016-08-08 14:40:58,013 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.l.BluetoothLeScanner - Starting bluetooth le beacon scan... Using a device equipped with Kura acting as a Beacon (see BLE Beacon Example ), the following lines appear on the log file when the device is detected: 2016-08-08 14:49:03,487 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - UUID : AAAAAAAABBBBCCCCDDDDEEEEEEEEEEEE 2016-08-08 14:49:03,488 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - TxPower : -58 2016-08-08 14:49:03,488 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - RSSI : -55 2016-08-08 14:49:03,489 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Major : 0 2016-08-08 14:49:03,489 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Minor : 0 2016-08-08 14:49:03,490 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Address : 5C:F3:70:60:63:8F 2016-08-08 14:49:03,490 [BluetoothProcess BTSnoop Gobbler] INFO o.e.k.e.b.s.BeaconScannerExample - Distance : 0.7079457843841379","title":"Deploy and Validate the Bundle"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/","text":"How to Use Legacy Bluetooth LE Beacons Warning This guide uses the deprecated Kura Bluetooth APIs. Please consider to use the new ones . Overview The Bluetooth Beacon example is a simple bundle for Eclipse Kura that allows you to configure a device as a Beacon. A Beacon device is a Bluetooth Low Energy device that broadcasts its identity to nearby devices. It uses a specific BLE packet, called beacon or advertising packet, that contains the following information: Proximity UUID - a 128-bit value that uniquely identifies one or more beacons as a certain type or from a certain organization. Major value - an optional 16-bit unsigned integer that can group related beacons with the same proximity UUID. Minor value - an optional 16-bit unsigned integer that differentiates beacons with the same proximity UUID and major value. Tx Power - a value programmed into the beacon that enables distance from the beacon to be determined based on signal strength. The advertising packet has a fixed format and is broadcasted periodically. The information contained in the advertising packet can be used by a receiver, typically a smartphone, to identify the beacon and to roughly estimate its distance. Prerequisites Development Environment Setup Hardware Embedded device running Kura with Bluetooth 4.0 (LE) capabilities. bluez_ packet must be installed on the embedded device. Follow the installation instructions in How to Use Bluetooth LE . For this tutorial a Raspberry Pi Type B with a LMTechnologies LM506 Bluetooth 4.0 dongle is used. Beacon Advertising with hcitool After the embedded device is properly configured, the advertising may be started using the hcitool command contained in the bluez packet. Plug in the Bluetooth dongle if needed and verify that the interface is up with the following command: sudo hciconfig hci0 If the interface is down, enable it with the following command: sudo hciconfig hci0 up To configure the advertising packet, enter the following command: sudo hcitool -i hci0 cmd 0x08 0x0008 1e 02 01 1a 1a ff 4c 00 02 15 aa aa aa aa bb bb cc cc dd dd ee ee ee ee ee ee 01 00 01 00 c5 In this example, the packet will contain the uuid aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee , major 1 , minor 1 and Tx Power -59 dBm. For further information about BLE commands and packet formats, refer to the Bluetooth 4.0 Core specifications To set the advertising interval to 1 second, enter the following command: sudo hcitool -i hci0 cmd 0x08 0x0006 a0 00 a0 00 03 00 00 00 00 00 00 00 00 07 00 Finally, to start the advertising, enter the following command: sudo hcitool -i hci0 cmd 0x08 0x000a 01 To verify that the embedded device is broadcasting its beacon, use a smartphone with a iBeacon scanner app (e.g., iBeacon Finder, iBeacon Scanner, or iBeaconDetector on Android). To stop the advertising, write 0 to the register 0x000a as shown in the following command: sudo hcitool -i hci0 cmd 0x08 0x000a 00 Beacon Advertising with Kura The Beacon bundle is a simple example that allows you to configure the advertising packet, the time interval, and to start/stop the advertising. Develop the Beacon Bundle The Beacon bundle code development follows the guidelines presented in the Hello World Application : Create a Plug-in Project named org.eclipse.kura.example.beacon . Create the class BeaconExample . Include the following bundles in the MANIFEST.MF: org.eclipse.kura.bluetooth org.eclipse.kura.configuration org.osgi.service.component org.slf4j The following files need to be implemented in order to write the source code: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/beaconExample.xml - declarative services definition that describes the services exposed and consumed by this bundle. OSGI-INF/metatype/org.eclipse.kura.example.beacon.BeaconExample.xml - configuration description of the bundle and its parameters, types, and defaults. org.eclipse.kura.example.beacon.BeaconExample.java - main implementation class. OSGI-INF/metatype/org.eclipse.kura.example.beacon.BeaconExample.xml File The OSGI-INF/metatype/org.eclipse.kura.example.beacon.beaconExample.xml file describes the parameters for this bundle including the following: enableAdvertising - enables Beacon advertising. minBeaconInterval - sets the minimum time interval between beacons (milliseconds). maxBeaconInterval - sets the maximum time interval between beacons (milliseconds). uuid - defines a 128-bit uuid for beacon advertising expressed as hex string. major - sets the major value. minor - sets the minor value. companyCode - defines a 16-bit company code as hex string. txPower - indicates the transmission power measured at 1m away from the beacon expressed in dBm. LELimited - defines the LE Discoverable Mode. Set false to advertise for 30.72s and then stops. Set true to advertise indefinitely. BR_EDRSupported - indicates whether BR/EDR is supported. LE_BRController - indicates whether LE and BR/EDR Controller operates simultaneously. LE_BRHost - indicates whether LE and BR/EDR Host operates simultaneously. iname - provides the name of bluetooth adapter. org.eclipse.kura.example.beacon.BeaconExample.java File The com.eurotech.example.beacon.BeaconExample.java file contains the activate and deactivate methods for this bundle. The activate method gets the BluetoothAdapter , enables the interface if needed, and executes the configureBeacon method that configures the device according to the properties. The following code sample shows part of the activate method: // Get Bluetooth adapter with Beacon capabilities and ensure it is enabled this . bluetoothAdapter = this . bluetoothService . getBluetoothAdapter ( this . name , this ); if ( this . bluetoothAdapter != null ) { logger . info ( \"Bluetooth adapter interface => {}\" , this . name ); logger . info ( \"Bluetooth adapter address => {}\" , this . bluetoothAdapter . getAddress ()); logger . info ( \"Bluetooth adapter le enabled => {}\" , this . bluetoothAdapter . isLeReady ()); if ( ! this . bluetoothAdapter . isEnabled ()) { logger . info ( \"Enabling bluetooth adapter...\" ); this . bluetoothAdapter . enable (); logger . info ( \"Bluetooth adapter address => {}\" , this . bluetoothAdapter . getAddress ()); } configureBeacon (); } else { logger . warn ( \"No Bluetooth adapter found ...\" ); } The configureBeacon (shown below) is a private method: private void configureBeacon () { if ( this . enable ) { if ( this . minInterval != null && this . maxInterval != null ) { this . bluetoothAdapter . setBeaconAdvertisingInterval ( this . minInterval , this . maxInterval ); } this . bluetoothAdapter . startBeaconAdvertising (); if ( this . uuid != null && this . major != null && this . minor != null && this . companyCode != null && this . txPower != null ) { this . bluetoothAdapter . setBeaconAdvertisingData ( this . uuid , this . major , this . minor , this . companyCode , this . txPower , this . leLimited , this . leLimited ? false : true , this . brSupported , this . brController , this . brHost ); } } else { this . bluetoothAdapter . stopBeaconAdvertising (); } } Deploy and Validate the Bundle In order to proceed, you need to know the IP address of your embedded gateway that is on the remote target unit. With this information, follow the mToolkit instructions for installing a single bundle to the remote target device located here . When the installation is complete, the bundle starts automatically. In the Kura Gateway Administration Console, the BeaconExample tab appears on the left and enables the beacon to be configured for advertising. You should see a message similar to the one below from /var/log/kura.log indicating that the bundle was successfully installed and configured. 2015-07-09 10:46:06,522 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Activating Bluetooth Beacon example... 2015-07-09 10:46:06,639 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter interface => hci0 2015-07-09 10:46:06,643 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter address => null 2015-07-09 10:46:06,645 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter le enabled => false 2015-07-09 10:46:06,664 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Enabling bluetooth adapter... 2015-07-09 10:46:06,745 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter address => 5C:F3:70:60:63:9E 2015-07-09 10:46:06,770 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.BluetoothAdapterImpl - Set Advertising Parameters on interface hci0 2015-07-09 10:46:06,842 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.b.BluetoothBeaconListener - Command ogf 0x08, ocf 0x0006 Succeeded. 2015-07-09 10:46:06,852 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.BluetoothAdapterImpl - Set Advertising Data on interface hci0 2015-07-09 10:46:06,859 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 06 20 00 2015-07-09 10:46:06,872 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.BluetoothAdapterImpl - Start Advertising on interface hci0 2015-07-09 10:46:06,906 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.b.BluetoothBeaconListener - Command ogf 0x08, ocf 0x0008 Succeeded. 2015-07-09 10:46:06,908 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 08 20 00 2015-07-09 10:46:06,921 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.b.BluetoothBeaconListener - Command ogf 0x08, ocf 0x000a Succeeded. 2015-07-09 10:46:06,923 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 0A 20 00 2015-07-09 10:46:06,947 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurableComponentTracker - Adding ConfigurableComponent org.eclipse.kura.example.beacon.BeaconExample 2015-07-09 10:46:06,950 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration of ConfigurableComponent org.eclipse.kura.example.beacon.BeaconExample by org.eclipse.kura.core.configuration.ConfigurationServiceImpl@11120b6... 2015-07-09 10:46:06,996 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registering org.eclipse.kura.example.beacon.BeaconExample with ocd: org.eclipse.kura.core.configuration.metatype.Tocd@8af8b3 ... 2015-07-09 10:46:06,999 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration Completed for Component org.eclipse.kura.example.beacon.BeaconExample. Note that the bundle writes the string returned by the configuration commands to the log: 2015-07-09 10:46:06,859 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 06 20 00 The last number of the string is the error code. A value of \"00\" indicates a successful command. Refer to the Bluetooth 4.0 Core specifications for a complete list of the error codes. Once the bundle is deployed, you can use a iBeacon scanner app to detect the bundle. Also, you can modify the bundle properties and verify the results in the scanner.","title":"How to Use Legacy Bluetooth LE Beacons"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#how-to-use-legacy-bluetooth-le-beacons","text":"Warning This guide uses the deprecated Kura Bluetooth APIs. Please consider to use the new ones .","title":"How to Use Legacy Bluetooth LE Beacons"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#overview","text":"The Bluetooth Beacon example is a simple bundle for Eclipse Kura that allows you to configure a device as a Beacon. A Beacon device is a Bluetooth Low Energy device that broadcasts its identity to nearby devices. It uses a specific BLE packet, called beacon or advertising packet, that contains the following information: Proximity UUID - a 128-bit value that uniquely identifies one or more beacons as a certain type or from a certain organization. Major value - an optional 16-bit unsigned integer that can group related beacons with the same proximity UUID. Minor value - an optional 16-bit unsigned integer that differentiates beacons with the same proximity UUID and major value. Tx Power - a value programmed into the beacon that enables distance from the beacon to be determined based on signal strength. The advertising packet has a fixed format and is broadcasted periodically. The information contained in the advertising packet can be used by a receiver, typically a smartphone, to identify the beacon and to roughly estimate its distance.","title":"Overview"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#prerequisites","text":"Development Environment Setup Hardware Embedded device running Kura with Bluetooth 4.0 (LE) capabilities. bluez_ packet must be installed on the embedded device. Follow the installation instructions in How to Use Bluetooth LE . For this tutorial a Raspberry Pi Type B with a LMTechnologies LM506 Bluetooth 4.0 dongle is used.","title":"Prerequisites"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#beacon-advertising-with-hcitool","text":"After the embedded device is properly configured, the advertising may be started using the hcitool command contained in the bluez packet. Plug in the Bluetooth dongle if needed and verify that the interface is up with the following command: sudo hciconfig hci0 If the interface is down, enable it with the following command: sudo hciconfig hci0 up To configure the advertising packet, enter the following command: sudo hcitool -i hci0 cmd 0x08 0x0008 1e 02 01 1a 1a ff 4c 00 02 15 aa aa aa aa bb bb cc cc dd dd ee ee ee ee ee ee 01 00 01 00 c5 In this example, the packet will contain the uuid aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee , major 1 , minor 1 and Tx Power -59 dBm. For further information about BLE commands and packet formats, refer to the Bluetooth 4.0 Core specifications To set the advertising interval to 1 second, enter the following command: sudo hcitool -i hci0 cmd 0x08 0x0006 a0 00 a0 00 03 00 00 00 00 00 00 00 00 07 00 Finally, to start the advertising, enter the following command: sudo hcitool -i hci0 cmd 0x08 0x000a 01 To verify that the embedded device is broadcasting its beacon, use a smartphone with a iBeacon scanner app (e.g., iBeacon Finder, iBeacon Scanner, or iBeaconDetector on Android). To stop the advertising, write 0 to the register 0x000a as shown in the following command: sudo hcitool -i hci0 cmd 0x08 0x000a 00","title":"Beacon Advertising with hcitool"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#beacon-advertising-with-kura","text":"The Beacon bundle is a simple example that allows you to configure the advertising packet, the time interval, and to start/stop the advertising.","title":"Beacon Advertising with Kura"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#develop-the-beacon-bundle","text":"The Beacon bundle code development follows the guidelines presented in the Hello World Application : Create a Plug-in Project named org.eclipse.kura.example.beacon . Create the class BeaconExample . Include the following bundles in the MANIFEST.MF: org.eclipse.kura.bluetooth org.eclipse.kura.configuration org.osgi.service.component org.slf4j The following files need to be implemented in order to write the source code: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/beaconExample.xml - declarative services definition that describes the services exposed and consumed by this bundle. OSGI-INF/metatype/org.eclipse.kura.example.beacon.BeaconExample.xml - configuration description of the bundle and its parameters, types, and defaults. org.eclipse.kura.example.beacon.BeaconExample.java - main implementation class.","title":"Develop the Beacon Bundle"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#osgi-infmetatypeorgeclipsekuraexamplebeaconbeaconexamplexml-file","text":"The OSGI-INF/metatype/org.eclipse.kura.example.beacon.beaconExample.xml file describes the parameters for this bundle including the following: enableAdvertising - enables Beacon advertising. minBeaconInterval - sets the minimum time interval between beacons (milliseconds). maxBeaconInterval - sets the maximum time interval between beacons (milliseconds). uuid - defines a 128-bit uuid for beacon advertising expressed as hex string. major - sets the major value. minor - sets the minor value. companyCode - defines a 16-bit company code as hex string. txPower - indicates the transmission power measured at 1m away from the beacon expressed in dBm. LELimited - defines the LE Discoverable Mode. Set false to advertise for 30.72s and then stops. Set true to advertise indefinitely. BR_EDRSupported - indicates whether BR/EDR is supported. LE_BRController - indicates whether LE and BR/EDR Controller operates simultaneously. LE_BRHost - indicates whether LE and BR/EDR Host operates simultaneously. iname - provides the name of bluetooth adapter.","title":"OSGI-INF/metatype/org.eclipse.kura.example.beacon.BeaconExample.xml File"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#orgeclipsekuraexamplebeaconbeaconexamplejava-file","text":"The com.eurotech.example.beacon.BeaconExample.java file contains the activate and deactivate methods for this bundle. The activate method gets the BluetoothAdapter , enables the interface if needed, and executes the configureBeacon method that configures the device according to the properties. The following code sample shows part of the activate method: // Get Bluetooth adapter with Beacon capabilities and ensure it is enabled this . bluetoothAdapter = this . bluetoothService . getBluetoothAdapter ( this . name , this ); if ( this . bluetoothAdapter != null ) { logger . info ( \"Bluetooth adapter interface => {}\" , this . name ); logger . info ( \"Bluetooth adapter address => {}\" , this . bluetoothAdapter . getAddress ()); logger . info ( \"Bluetooth adapter le enabled => {}\" , this . bluetoothAdapter . isLeReady ()); if ( ! this . bluetoothAdapter . isEnabled ()) { logger . info ( \"Enabling bluetooth adapter...\" ); this . bluetoothAdapter . enable (); logger . info ( \"Bluetooth adapter address => {}\" , this . bluetoothAdapter . getAddress ()); } configureBeacon (); } else { logger . warn ( \"No Bluetooth adapter found ...\" ); } The configureBeacon (shown below) is a private method: private void configureBeacon () { if ( this . enable ) { if ( this . minInterval != null && this . maxInterval != null ) { this . bluetoothAdapter . setBeaconAdvertisingInterval ( this . minInterval , this . maxInterval ); } this . bluetoothAdapter . startBeaconAdvertising (); if ( this . uuid != null && this . major != null && this . minor != null && this . companyCode != null && this . txPower != null ) { this . bluetoothAdapter . setBeaconAdvertisingData ( this . uuid , this . major , this . minor , this . companyCode , this . txPower , this . leLimited , this . leLimited ? false : true , this . brSupported , this . brController , this . brHost ); } } else { this . bluetoothAdapter . stopBeaconAdvertising (); } }","title":"org.eclipse.kura.example.beacon.BeaconExample.java File"},{"location":"java-application-development/how-to-use-legacy-bt-le-beacons/#deploy-and-validate-the-bundle","text":"In order to proceed, you need to know the IP address of your embedded gateway that is on the remote target unit. With this information, follow the mToolkit instructions for installing a single bundle to the remote target device located here . When the installation is complete, the bundle starts automatically. In the Kura Gateway Administration Console, the BeaconExample tab appears on the left and enables the beacon to be configured for advertising. You should see a message similar to the one below from /var/log/kura.log indicating that the bundle was successfully installed and configured. 2015-07-09 10:46:06,522 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Activating Bluetooth Beacon example... 2015-07-09 10:46:06,639 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter interface => hci0 2015-07-09 10:46:06,643 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter address => null 2015-07-09 10:46:06,645 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter le enabled => false 2015-07-09 10:46:06,664 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Enabling bluetooth adapter... 2015-07-09 10:46:06,745 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.BeaconExample - Bluetooth adapter address => 5C:F3:70:60:63:9E 2015-07-09 10:46:06,770 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.BluetoothAdapterImpl - Set Advertising Parameters on interface hci0 2015-07-09 10:46:06,842 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.b.BluetoothBeaconListener - Command ogf 0x08, ocf 0x0006 Succeeded. 2015-07-09 10:46:06,852 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.BluetoothAdapterImpl - Set Advertising Data on interface hci0 2015-07-09 10:46:06,859 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 06 20 00 2015-07-09 10:46:06,872 [Component Resolve Thread (Bundle 6)] INFO o.e.k.l.b.BluetoothAdapterImpl - Start Advertising on interface hci0 2015-07-09 10:46:06,906 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.b.BluetoothBeaconListener - Command ogf 0x08, ocf 0x0008 Succeeded. 2015-07-09 10:46:06,908 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 08 20 00 2015-07-09 10:46:06,921 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.b.BluetoothBeaconListener - Command ogf 0x08, ocf 0x000a Succeeded. 2015-07-09 10:46:06,923 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 0A 20 00 2015-07-09 10:46:06,947 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurableComponentTracker - Adding ConfigurableComponent org.eclipse.kura.example.beacon.BeaconExample 2015-07-09 10:46:06,950 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration of ConfigurableComponent org.eclipse.kura.example.beacon.BeaconExample by org.eclipse.kura.core.configuration.ConfigurationServiceImpl@11120b6... 2015-07-09 10:46:06,996 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registering org.eclipse.kura.example.beacon.BeaconExample with ocd: org.eclipse.kura.core.configuration.metatype.Tocd@8af8b3 ... 2015-07-09 10:46:06,999 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration Completed for Component org.eclipse.kura.example.beacon.BeaconExample. Note that the bundle writes the string returned by the configuration commands to the log: 2015-07-09 10:46:06,859 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.BeaconExample - Command results : 01 06 20 00 The last number of the string is the error code. A value of \"00\" indicates a successful command. Refer to the Bluetooth 4.0 Core specifications for a complete list of the error codes. Once the bundle is deployed, you can use a iBeacon scanner app to detect the bundle. Also, you can modify the bundle properties and verify the results in the scanner.","title":"Deploy and Validate the Bundle"},{"location":"java-application-development/how-to-use-legacy-bt-le/","text":"How to Use Legacy Bluetooth LE Warning This guide uses the deprecated Kura Bluetooth APIs. Please consider to use the new ones . Overview This section provides an example of how to develop a simple bundle that discovers and connects to a Smart device (BLE), retrieves data from it, and publishes the results to the cloud. This example uses the TI SensorTag based on CC2541 or CC2650. For more information about this device, refer to https://www.ti.com/tool/cc2541dk-sensor and https://www.ti.com/tool/TIDC-CC2650STK-SENSORTAG . You will learn how to perform the following functions: Prepare the embedded device to communicate with a Smart device Develop a bundle retrieves data from the device Optionally publish the data in the cloud Prerequisites Setting up Kura Development Environment Hardware Use an embedded device running Kura with Bluetooth 4.0 (LE) capabilities Use at least one TI SensorTag This tutorial uses a Raspberry Pi Type B with a LMTechnologies LM506 Bluetooth 4.0 dongle . Prepare the Embedded Device In order to communicate with Smart devices, the bluez package must be installed on the embedded device. To do so, make sure you have the necessary libraries on the Raspberry Pi and proceed as follows: sudo apt-get install libusb-dev libdbus-1-dev libglib2.0-dev libudev-dev libical-dev libreadline-dev Next, download and uncompress the package: sudo wget https://www.kernel.org/pub/linux/bluetooth/bluez-4.101.tar.xz sudo tar xvf bluez-4.101.tar Change to the blues folder, and then configure and install the package: cd bluez-4.101 sudo ./configure --disable-systemd --enable-tools sudo make sudo make install Finally, change the location of the hciconfig and gatttool commands: sudo mv /usr/local/sbin/hciconfig /usr/sbin sudo mv /usr/local/bin/gatttool /usr/sbin Info Both bluez 4.101 and 5.XX are supported. SensorTag Communication via Command Line Once configured, you can scan and connect with a Smart device. A TI SensorTag is used in the example that follows. Plug in the Bluetooth dongle if needed and verify that the interface is up: sudo hciconfig hci0 If the interface is down, enable it with the following command: sudo hciconfig hci0 up Perform a BLE scan with hcitool (this process may be interrupted with ctrl-c ): sudo hcitool lescan LE Scan ... BC:6A:29:AE:CC:96 ( unknown ) BC:6A:29:AE:CC:96 SensorTag If the SensorTag is not listed, press the button on the left side of the device to make it discoverable. Interactive communication with the device is possible using the gatttool: sudo gatttool -b BC:6A:29:AE:CC:96 -I [ ][ BC:6A:29:AE:CC:96 ][ LE ] > connect [ CON ][ BC:6A:29:AE:CC:96 ][ LE ] > If the output of the connect command is connect: Connection refused (111) then you have to enable LE capabilities on your BT interface: cd bluez-4.101/mgmt sudo ./btmgmt le on In order to read the sensor values from the SensorTag, you need to write some registers on the device. The example that follows shows the procedure for retrieving the temperature value from the SensorTag based on the CC2541. Once connected with gatttool, the IR temperature sensor is enabled to write the value 01 to the handle 0x0029: [CON][BC:6A:29:AE:CC:96][LE]> char-write-cmd 0x0029 01 Next, the temperature value is read from the 0x0025 handle: [CON][BC:6A:29:AE:CC:96][LE]> char-read-hnd 0x0025 [CON][BC:6A:29:AE:CC:96][LE]> Characteristic value/descriptor: a7 fe 2c 0d\", In accordance with the documentation, the retrieved raw values have to be refined in order to obtain the ambient and object temperature. Enable notifications writing the value 0001 to the 0x0026 register: [CON][BC:6A:29:AE:CC:96][LE]> char-write-cmd 0x0026 0100 [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: a5 fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: 9f fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: 9a fe 3c 0d Stop the notifications by writing 0000 to the same register: [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: 9e fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> char-write-cmd 0x0026 0000 Notification handle = 0x0025 value: a3 fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> Info bluez 5.XX comes with the bluetoothctl tool that can be used in place of hcitool and gatttool . Please refer to the man page and help for more details. BLE Bundle for TI SensorTag The BLE bundle performs the following operations: Starts a scan for smart devices (lescan) Selects all the TI SensorTag in range Connects to the discovered SensorTags and discovers their capabilities Reads data from all the sensors onboard and writes the values in the log file Warning The Legacy Bluetooth LE Example supports TI SensorTag CC2541 (all firmware versions) and CC2650 (firmware version above 1.20) Develop the BLE Bundle Once the required packages are installed and communication with the SensorTag via command line is established, you may start to develop the BLE bundle. For more detailed information about bundle development (i.e., the plug-in project, classes, and MANIFEST file configuration), please refer to the Hello World Application . Create a Plug-in Project named org.eclipse.kura.example.ble.tisensortag . Create the following classes: BluetoothLe , TiSensorTag , and TiSensorTagGatt . Include the following bundles in the MANIFEST.MF: org.eclipse.kura.bluetooth org.eclipse.kura.configuration org.eclipse.kura.message org.osgi.service.component org.slf4j The following files need to be implemented in order to write the source code: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/bleExample.xml - declarative services definition that describes the services exposed and consumed by this bundle. OSGI-INF/metatype/org.eclipse.kura.example.ble.tisensortag.BluetoothLe.xml - configuration description of the bundle and its parameters, types, and defaults. org.eclipse.kura.example.ble.tisensortag.BluetoothLe.java - main implementation class. org.eclipse.kura.example.ble.tisensortag.TiSensorTag.java - class used to connect with a TI SensorTag. org.eclipse.kura.example.ble.tisensortag.TiSensorTagGatt.java - class that describes all the handles and UUIDs to access to the SensorTag sensors. OSGI-INF/metatype/org.eclipse.kura.example.ble.tisensortag.BluetoothLe.xml File The OSGI-INF/metatype/org.eclipse.kura.example.ble.tisensortag.BluetoothLe.xml file describes the parameters for this bundle including the following: scan_time - specifies the length of time to scan for devices in seconds. period - specifies the time interval in seconds between two publishes. enableTermometer - Enable temperature sensor. enableAccelerometer - Enable accelerometer sensor. ... publishTopic - supplies the topic to publish data to the cloud. iname - Name of bluetooth adapter. org.eclipse.kura.example.ble.tisensortag.BluetoothLe.java File The org.eclipse.kura.example.ble.tisensortag.BluetoothLe.java file contains the activate, deactivate and updated methods for this bundle. The activate and update methods gets the BluetoothAdapter and schedules the execution of the performScan method every second and readTiSensorTags every user defined period. The following code sample shows part of the code: this . options = new BluetoothLeOptions ( properties ); this . startTime = 0 ; if ( this . options . isEnableScan ()) { // re-create the worker this . worker = Executors . newScheduledThreadPool ( 2 ); // Get Bluetooth adapter and ensure it is enabled this . bluetoothAdapter = this . bluetoothService . getBluetoothAdapter ( this . options . getIname ()); if ( this . bluetoothAdapter != null ) { logger . info ( \"Bluetooth adapter interface => {}\" , this . options . getIname ()); if ( ! this . bluetoothAdapter . isEnabled ()) { logger . info ( \"Enabling bluetooth adapter...\" ); this . bluetoothAdapter . enable (); } logger . info ( \"Bluetooth adapter address => {}\" , this . bluetoothAdapter . getAddress ()); this . scanHandle = this . worker . scheduleAtFixedRate ( this :: performScan , 0 , 1 , TimeUnit . SECONDS ); this . readHandle = this . worker . scheduleAtFixedRate ( this :: readTiSensorTags , 0 , this . options . getPeriod (), TimeUnit . SECONDS ); } else { logger . info ( \"Bluetooth adapter {} not found.\" , this . options . getIname ()); } } The performScan method manages the start and stop of the scanning procedure as shown below. void performScan () { // Scan for devices if ( this . bluetoothAdapter . isScanning ()) { logger . info ( \"bluetoothAdapter.isScanning\" ); if ( System . currentTimeMillis () - this . startTime >= this . options . getScantime () * 1000 ) { this . bluetoothAdapter . killLeScan (); } } else { if ( System . currentTimeMillis () - this . startTime >= this . options . getPeriod () * 1000 ) { logger . info ( \"startLeScan\" ); this . bluetoothAdapter . startLeScan ( this ); this . startTime = System . currentTimeMillis (); } } } The BluetoothLe class implements the org.eclipse.kura.bluetooth.BluetoothLeScanListener interface and the onScanResults method is called when the scan procedure ends. The method filters the scan results and stores the SensorTag devices in a list. Part of the onScanResults method is shown below. @Override public void onScanResults ( List < BluetoothDevice > scanResults ) { // Scan for TI SensorTag for ( BluetoothDevice bluetoothDevice : scanResults ) { logger . info ( \"Address {} Name {}\" , bluetoothDevice . getAdress (), bluetoothDevice . getName ()); if ( bluetoothDevice . getName (). contains ( \"SensorTag\" ) && ! isSensorTagInList ( bluetoothDevice . getAdress ())) { this . tiSensorTagList . add ( new TiSensorTag ( bluetoothDevice )); } } } The readTiSensorTags is responsible to read the sensors for all the SensorTags contained in the list and publish the resulting data. private void readTiSensorTags () { // connect to TiSensorTags this . tiSensorTagList . forEach ( myTiSensorTag -> { connect ( myTiSensorTag ); if ( myTiSensorTag . isConnected ()) { ... KuraPayload payload = new KuraPayload (); payload . setTimestamp ( new Date ()); payload . addMetric ( \"Firmware\" , myTiSensorTag . getFirmwareRevision ()); if ( myTiSensorTag . isCC2650 ()) { payload . addMetric ( \"Type\" , \"CC2650\" ); } else { payload . addMetric ( \"Type\" , \"CC2541\" ); } readServicesAndCharacteristics ( myTiSensorTag ); readSensors ( myTiSensorTag , payload ); myTiSensorTag . enableIOService (); publishData ( myTiSensorTag , payload ); ... } else { logger . warn ( \"Cannot connect to TI SensorTag {}.\" , myTiSensorTag . getBluetoothDevice (). getAdress ()); } }); } Since it is not possible to poll the status of the buttons on the SensorTag, the BLE example enables the notifications for them. org.eclipse.kura.example.ble.sensortag.TiSensorTag.java File The org.eclipse.kura.example.ble.sensortag.TiSensorTag class is used to connect and disconnect to the SensorTag. It also contains the methods to configure and read data from the sensor. The connection method uses the BluetoothGatt Service as shown below: public boolean connect ( String adapterName ) { this . bluetoothGatt = this . device . getBluetoothGatt (); boolean connected = false ; try { connected = this . bluetoothGatt . connect ( adapterName ); } catch ( KuraException e ) { logger . error ( e . toString ()); } if ( connected ) { this . bluetoothGatt . setBluetoothLeNotificationListener ( this ); setFirmwareRevision (); this . isConnected = true ; return true ; } else { // If connect command is not executed, close gatttool this . bluetoothGatt . disconnect (); this . isConnected = false ; return false ; } } A set of methods for reading from and writing to the internal register of the device are included in the class. The following code sample presents the methods to manage the temperature sensor. /* * Enable temperature sensor */ public void enableThermometer () { // Write \"01\" to enable thermometer sensor if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2650 , \"01\" ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2541 , \"01\" ); } } /* * Disable temperature sensor */ public void disableThermometer () { // Write \"00\" disable thermometer sensor if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2650 , \"00\" ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2541 , \"00\" ); } } /* * Read temperature sensor */ public double [] readTemperature () { double [] temperatures = new double [ 2 ] ; // Read value try { if ( this . cc2650 ) { temperatures = calculateTemperature ( this . bluetoothGatt . readCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2650 )); } else { temperatures = calculateTemperature ( this . bluetoothGatt . readCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2541 )); } } catch ( KuraException e ) { logger . error ( e . toString ()); } return temperatures ; } /* * Read temperature sensor by UUID */ public double [] readTemperatureByUuid () { double [] temperatures = new double [ 2 ] ; try { temperatures = calculateTemperature ( this . bluetoothGatt . readCharacteristicValueByUuid ( TiSensorTagGatt . UUID_TEMP_SENSOR_VALUE )); } catch ( KuraException e ) { logger . error ( e . toString ()); } return temperatures ; } /* * Enable temperature notifications */ public void enableTemperatureNotifications ( TiSensorTagNotificationListener listener ) { setListener ( listener ); // Write \"01:00 to enable notifications if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2650 , ENABLE_NOTIFICATIONS ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2541 , ENABLE_NOTIFICATIONS ); } } /* * Disable temperature notifications */ public void disableTemperatureNotifications () { unsetListener (); // Write \"00:00 to enable notifications if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2650 , DISABLE_NOTIFICATIONS ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2541 , DISABLE_NOTIFICATIONS ); } } /* * Set sampling period (only for CC2650) */ public void setThermometerPeriod ( String period ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_PERIOD_2650 , period ); } /* * Calculate temperature */ private double [] calculateTemperature ( String value ) { logger . info ( \"Received temperature value: {}\" , value ); double [] temperatures = new double [ 2 ] ; byte [] valueByte = hexStringToByteArray ( value . replace ( \" \" , \"\" )); if ( this . cc2650 ) { int ambT = shortUnsignedAtOffset ( valueByte , 2 ); int objT = shortUnsignedAtOffset ( valueByte , 0 ); temperatures [ 0 ] = ( ambT >> 2 ) * 0.03125 ; temperatures [ 1 ] = ( objT >> 2 ) * 0.03125 ; } else { int ambT = shortUnsignedAtOffset ( valueByte , 2 ); int objT = shortSignedAtOffset ( valueByte , 0 ); temperatures [ 0 ] = ambT / 128.0 ; double vobj2 = objT ; vobj2 *= 0.00000015625 ; double tdie = ambT / 128.0 + 273.15 ; double s0 = 5.593E-14 ; // Calibration factor double a1 = 1.75E-3 ; double a2 = - 1.678E-5 ; double b0 = - 2.94E-5 ; double b1 = - 5.7E-7 ; double b2 = 4.63E-9 ; double c2 = 13.4 ; double tref = 298.15 ; double s = s0 * ( 1 + a1 * ( tdie - tref ) + a2 * Math . pow ( tdie - tref , 2 )); double vos = b0 + b1 * ( tdie - tref ) + b2 * Math . pow ( tdie - tref , 2 ); double fObj = vobj2 - vos + c2 * Math . pow ( vobj2 - vos , 2 ); double tObj = Math . pow ( Math . pow ( tdie , 4 ) + fObj / s , .25 ); temperatures [ 1 ] = tObj - 273.15 ; } return temperatures ; } The TiSensorTag class implements the org.eclipse.kura.bluetooth.BluetoothLeNotificationListener interface and the method onDataReceived is called when a BLE notification is received. In this example the notifications are used only for the buttons. The method is shown below. public void onDataReceived ( String handle , String value ) { if ( this . notificationListener != null ) { Map < String , Object > values = new HashMap <> (); if ( handle . equals ( TiSensorTagGatt . HANDLE_KEYS_STATUS_2541 ) || handle . equals ( TiSensorTagGatt . HANDLE_KEYS_STATUS_2650 )) { logger . info ( \"Received keys value: {}\" , value ); if ( ! value . equals ( \"00\" )) { values . put ( \"Keys\" , Integer . parseInt ( value )); this . notificationListener . notify ( this . device . getAdress (), values ); } } else if ( handle . equals ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2541 ) || handle . equals ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2650 )) { double [] temperatures = calculateTemperature ( value ); values . put ( \"Ambient\" , temperatures [ 0 ] ); values . put ( \"Target\" , temperatures [ 1 ] ); this . notificationListener . notify ( this . device . getAdress (), values ); } } } Deploy and Validate the Bundle In order to proceed, you need to know the IP address of your embedded gateway that is on the remote target unit. Once you do, follow the mToolkit instructions for installing a single bundle to the remote target device located here . When the installation completes, the bundle starts automatically. You should see a message similar to the one below from /var/log/kura.log indicating that the bundle was successfully installed and configured, and started to search for TI SensorTags. 2015-11-11 13:38:19,208 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Activating BluetoothLe example... 2015-11-11 13:38:19,382 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Bluetooth adapter interface => hci0 2015-11-11 13:38:19,383 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Bluetooth adapter address => 5C:F3:70:60:63:8F 2015-11-11 13:38:19,383 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Bluetooth adapter le enabled => true 2015-11-11 13:38:19,395 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - startLeScan 2015-11-11 13:38:19,396 [pool-26-thread-1] INFO o.e.k.l.b.l.BluetoothLeScanner - Starting bluetooth le scan... 2015-11-11 13:38:19,406 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurableComponentTracker - Adding ConfigurableComponent org.eclipse.kura.example.ble.tisensortag.BluetoothLe 2015-11-11 13:38:19,408 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration of ConfigurableComponent org.eclipse.kura.example.ble.tisensortag.BluetoothLe by org.eclipse.kura.core.configuration.ConfigurationServiceImpl@19cb019... 2015-11-11 13:38:19,424 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registering org.eclipse.kura.example.ble.tisensortag.BluetoothLe with ocd: org.eclipse.kura.core.configuration.metatype.Tocd@106b1d9 ... 2015-11-11 13:38:19,426 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration Completed for Component org.eclipse.kura.example.ble.tisensortag.BluetoothLe. 2015-11-11 13:38:20,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:21,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:22,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:23,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:24,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:25,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:25,396 [pool-26-thread-1] INFO o.e.k.l.b.l.BluetoothLeScanner - Killing hcitool... 2015-11-11 13:38:25,449 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - LE Scan ... 2015-11-11 13:38:25,450 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 7F:D8:F8:45:6B:C2 (unknown) 2015-11-11 13:38:25,452 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 7F:D8:F8:45:6B:C2 (unknown) 2015-11-11 13:38:25,453 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - BC:6A:29:AE:CC:96 (unknown) 2015-11-11 13:38:25,454 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - BC:6A:29:AE:CC:96 SensorTag 2015-11-11 13:38:25,455 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 68:64:4B:3F:04:9B (unknown) 2015-11-11 13:38:25,456 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 68:64:4B:3F:04:9B (unknown) 2015-11-11 13:38:25,457 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 18:EE:69:15:21:B0 (unknown) 2015-11-11 13:38:25,458 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 18:EE:69:15:21:B0 (unknown) 2015-11-11 13:38:25,459 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add 68:64:4B:3F:04:9B - (unknown) 2015-11-11 13:38:25,464 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add 18:EE:69:15:21:B0 - (unknown) 2015-11-11 13:38:25,465 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add BC:6A:29:AE:CC:96 - SensorTag 2015-11-11 13:38:25,466 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add 7F:D8:F8:45:6B:C2 - (unknown) 2015-11-11 13:38:25,467 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address 68:64:4B:3F:04:9B Name (unknown) 2015-11-11 13:38:25,467 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Found device = 68:64:4B:3F:04:9B 2015-11-11 13:38:25,468 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address 18:EE:69:15:21:B0 Name (unknown) 2015-11-11 13:38:25,468 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Found device = 18:EE:69:15:21:B0 2015-11-11 13:38:25,469 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address BC:6A:29:AE:CC:96 Name SensorTag 2015-11-11 13:38:25,469 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - TI SensorTag BC:6A:29:AE:CC:96 found. 2015-11-11 13:38:25,470 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address 7F:D8:F8:45:6B:C2 Name (unknown) 2015-11-11 13:38:25,470 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Found device = 7F:D8:F8:45:6B:C2 2015-11-11 13:38:25,470 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Connecting to TiSensorTag... 2015-11-11 13:38:25,475 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothGattImpl - Sending connect message... 2015-11-11 13:38:25,859 [DnsMonitorServiceImpl] WARN o.e.k.n.a.m.DnsMonitorServiceImpl - Not Setting DNS servers to empty 2015-11-11 13:38:26,883 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received temperature value: 7f fe fc 0c 2015-11-11 13:38:26,885 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Ambient: 25.96875 Target: 20.801530505264225 2015-11-11 13:38:28,028 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received accelerometer value: ff 06 42 2015-11-11 13:38:28,029 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Acc X: -0.015625 Acc Y: 0.09375 Acc Z: -1.03125 2015-11-11 13:38:29,182 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received barometer value: e8 6a 22 56 2015-11-11 13:38:29,183 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Humidity: 36.053864 2015-11-11 13:38:30,327 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received magnetometer value: e5 f6 d6 fc 62 04 2015-11-11 13:38:30,328 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Mag X: 203.43018 Mag Y: 320.43457 Mag Z: 765.7471 2015-11-11 13:38:32,623 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received pressure value: 1d fd dd 99 2015-11-11 13:38:32,625 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Pre : 99334.60900594086 2015-11-11 13:38:33,767 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received gyro value: cc 01 1d ff d2 ff 2015-11-11 13:38:33,769 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Gyro X: -101.55487 Gyro Y: -58.58612 Gyro Z: -87.898254 2015-11-11 13:38:33,769 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Not optical sensor on CC2541. 2015-11-11 13:38:34,770 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Not optical sensor on CC2541. 2015-11-11 13:38:34,771 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Light: 0.0","title":"How to Use Legacy Bluetooth LE"},{"location":"java-application-development/how-to-use-legacy-bt-le/#how-to-use-legacy-bluetooth-le","text":"Warning This guide uses the deprecated Kura Bluetooth APIs. Please consider to use the new ones .","title":"How to Use Legacy Bluetooth LE"},{"location":"java-application-development/how-to-use-legacy-bt-le/#overview","text":"This section provides an example of how to develop a simple bundle that discovers and connects to a Smart device (BLE), retrieves data from it, and publishes the results to the cloud. This example uses the TI SensorTag based on CC2541 or CC2650. For more information about this device, refer to https://www.ti.com/tool/cc2541dk-sensor and https://www.ti.com/tool/TIDC-CC2650STK-SENSORTAG . You will learn how to perform the following functions: Prepare the embedded device to communicate with a Smart device Develop a bundle retrieves data from the device Optionally publish the data in the cloud","title":"Overview"},{"location":"java-application-development/how-to-use-legacy-bt-le/#prerequisites","text":"Setting up Kura Development Environment Hardware Use an embedded device running Kura with Bluetooth 4.0 (LE) capabilities Use at least one TI SensorTag This tutorial uses a Raspberry Pi Type B with a LMTechnologies LM506 Bluetooth 4.0 dongle .","title":"Prerequisites"},{"location":"java-application-development/how-to-use-legacy-bt-le/#prepare-the-embedded-device","text":"In order to communicate with Smart devices, the bluez package must be installed on the embedded device. To do so, make sure you have the necessary libraries on the Raspberry Pi and proceed as follows: sudo apt-get install libusb-dev libdbus-1-dev libglib2.0-dev libudev-dev libical-dev libreadline-dev Next, download and uncompress the package: sudo wget https://www.kernel.org/pub/linux/bluetooth/bluez-4.101.tar.xz sudo tar xvf bluez-4.101.tar Change to the blues folder, and then configure and install the package: cd bluez-4.101 sudo ./configure --disable-systemd --enable-tools sudo make sudo make install Finally, change the location of the hciconfig and gatttool commands: sudo mv /usr/local/sbin/hciconfig /usr/sbin sudo mv /usr/local/bin/gatttool /usr/sbin Info Both bluez 4.101 and 5.XX are supported.","title":"Prepare the Embedded Device"},{"location":"java-application-development/how-to-use-legacy-bt-le/#sensortag-communication-via-command-line","text":"Once configured, you can scan and connect with a Smart device. A TI SensorTag is used in the example that follows. Plug in the Bluetooth dongle if needed and verify that the interface is up: sudo hciconfig hci0 If the interface is down, enable it with the following command: sudo hciconfig hci0 up Perform a BLE scan with hcitool (this process may be interrupted with ctrl-c ): sudo hcitool lescan LE Scan ... BC:6A:29:AE:CC:96 ( unknown ) BC:6A:29:AE:CC:96 SensorTag If the SensorTag is not listed, press the button on the left side of the device to make it discoverable. Interactive communication with the device is possible using the gatttool: sudo gatttool -b BC:6A:29:AE:CC:96 -I [ ][ BC:6A:29:AE:CC:96 ][ LE ] > connect [ CON ][ BC:6A:29:AE:CC:96 ][ LE ] > If the output of the connect command is connect: Connection refused (111) then you have to enable LE capabilities on your BT interface: cd bluez-4.101/mgmt sudo ./btmgmt le on In order to read the sensor values from the SensorTag, you need to write some registers on the device. The example that follows shows the procedure for retrieving the temperature value from the SensorTag based on the CC2541. Once connected with gatttool, the IR temperature sensor is enabled to write the value 01 to the handle 0x0029: [CON][BC:6A:29:AE:CC:96][LE]> char-write-cmd 0x0029 01 Next, the temperature value is read from the 0x0025 handle: [CON][BC:6A:29:AE:CC:96][LE]> char-read-hnd 0x0025 [CON][BC:6A:29:AE:CC:96][LE]> Characteristic value/descriptor: a7 fe 2c 0d\", In accordance with the documentation, the retrieved raw values have to be refined in order to obtain the ambient and object temperature. Enable notifications writing the value 0001 to the 0x0026 register: [CON][BC:6A:29:AE:CC:96][LE]> char-write-cmd 0x0026 0100 [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: a5 fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: 9f fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: 9a fe 3c 0d Stop the notifications by writing 0000 to the same register: [CON][BC:6A:29:AE:CC:96][LE]> Notification handle = 0x0025 value: 9e fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> char-write-cmd 0x0026 0000 Notification handle = 0x0025 value: a3 fe 3c 0d [CON][BC:6A:29:AE:CC:96][LE]> Info bluez 5.XX comes with the bluetoothctl tool that can be used in place of hcitool and gatttool . Please refer to the man page and help for more details.","title":"SensorTag Communication via Command Line"},{"location":"java-application-development/how-to-use-legacy-bt-le/#ble-bundle-for-ti-sensortag","text":"The BLE bundle performs the following operations: Starts a scan for smart devices (lescan) Selects all the TI SensorTag in range Connects to the discovered SensorTags and discovers their capabilities Reads data from all the sensors onboard and writes the values in the log file Warning The Legacy Bluetooth LE Example supports TI SensorTag CC2541 (all firmware versions) and CC2650 (firmware version above 1.20)","title":"BLE Bundle for TI SensorTag"},{"location":"java-application-development/how-to-use-legacy-bt-le/#develop-the-ble-bundle","text":"Once the required packages are installed and communication with the SensorTag via command line is established, you may start to develop the BLE bundle. For more detailed information about bundle development (i.e., the plug-in project, classes, and MANIFEST file configuration), please refer to the Hello World Application . Create a Plug-in Project named org.eclipse.kura.example.ble.tisensortag . Create the following classes: BluetoothLe , TiSensorTag , and TiSensorTagGatt . Include the following bundles in the MANIFEST.MF: org.eclipse.kura.bluetooth org.eclipse.kura.configuration org.eclipse.kura.message org.osgi.service.component org.slf4j The following files need to be implemented in order to write the source code: META-INF/MANIFEST.MF - OSGI manifest that describes the bundle and its dependencies. OSGI-INF/bleExample.xml - declarative services definition that describes the services exposed and consumed by this bundle. OSGI-INF/metatype/org.eclipse.kura.example.ble.tisensortag.BluetoothLe.xml - configuration description of the bundle and its parameters, types, and defaults. org.eclipse.kura.example.ble.tisensortag.BluetoothLe.java - main implementation class. org.eclipse.kura.example.ble.tisensortag.TiSensorTag.java - class used to connect with a TI SensorTag. org.eclipse.kura.example.ble.tisensortag.TiSensorTagGatt.java - class that describes all the handles and UUIDs to access to the SensorTag sensors.","title":"Develop the BLE Bundle"},{"location":"java-application-development/how-to-use-legacy-bt-le/#osgi-infmetatypeorgeclipsekuraexamplebletisensortagbluetoothlexml-file","text":"The OSGI-INF/metatype/org.eclipse.kura.example.ble.tisensortag.BluetoothLe.xml file describes the parameters for this bundle including the following: scan_time - specifies the length of time to scan for devices in seconds. period - specifies the time interval in seconds between two publishes. enableTermometer - Enable temperature sensor. enableAccelerometer - Enable accelerometer sensor. ... publishTopic - supplies the topic to publish data to the cloud. iname - Name of bluetooth adapter.","title":"OSGI-INF/metatype/org.eclipse.kura.example.ble.tisensortag.BluetoothLe.xml File"},{"location":"java-application-development/how-to-use-legacy-bt-le/#orgeclipsekuraexamplebletisensortagbluetoothlejava-file","text":"The org.eclipse.kura.example.ble.tisensortag.BluetoothLe.java file contains the activate, deactivate and updated methods for this bundle. The activate and update methods gets the BluetoothAdapter and schedules the execution of the performScan method every second and readTiSensorTags every user defined period. The following code sample shows part of the code: this . options = new BluetoothLeOptions ( properties ); this . startTime = 0 ; if ( this . options . isEnableScan ()) { // re-create the worker this . worker = Executors . newScheduledThreadPool ( 2 ); // Get Bluetooth adapter and ensure it is enabled this . bluetoothAdapter = this . bluetoothService . getBluetoothAdapter ( this . options . getIname ()); if ( this . bluetoothAdapter != null ) { logger . info ( \"Bluetooth adapter interface => {}\" , this . options . getIname ()); if ( ! this . bluetoothAdapter . isEnabled ()) { logger . info ( \"Enabling bluetooth adapter...\" ); this . bluetoothAdapter . enable (); } logger . info ( \"Bluetooth adapter address => {}\" , this . bluetoothAdapter . getAddress ()); this . scanHandle = this . worker . scheduleAtFixedRate ( this :: performScan , 0 , 1 , TimeUnit . SECONDS ); this . readHandle = this . worker . scheduleAtFixedRate ( this :: readTiSensorTags , 0 , this . options . getPeriod (), TimeUnit . SECONDS ); } else { logger . info ( \"Bluetooth adapter {} not found.\" , this . options . getIname ()); } } The performScan method manages the start and stop of the scanning procedure as shown below. void performScan () { // Scan for devices if ( this . bluetoothAdapter . isScanning ()) { logger . info ( \"bluetoothAdapter.isScanning\" ); if ( System . currentTimeMillis () - this . startTime >= this . options . getScantime () * 1000 ) { this . bluetoothAdapter . killLeScan (); } } else { if ( System . currentTimeMillis () - this . startTime >= this . options . getPeriod () * 1000 ) { logger . info ( \"startLeScan\" ); this . bluetoothAdapter . startLeScan ( this ); this . startTime = System . currentTimeMillis (); } } } The BluetoothLe class implements the org.eclipse.kura.bluetooth.BluetoothLeScanListener interface and the onScanResults method is called when the scan procedure ends. The method filters the scan results and stores the SensorTag devices in a list. Part of the onScanResults method is shown below. @Override public void onScanResults ( List < BluetoothDevice > scanResults ) { // Scan for TI SensorTag for ( BluetoothDevice bluetoothDevice : scanResults ) { logger . info ( \"Address {} Name {}\" , bluetoothDevice . getAdress (), bluetoothDevice . getName ()); if ( bluetoothDevice . getName (). contains ( \"SensorTag\" ) && ! isSensorTagInList ( bluetoothDevice . getAdress ())) { this . tiSensorTagList . add ( new TiSensorTag ( bluetoothDevice )); } } } The readTiSensorTags is responsible to read the sensors for all the SensorTags contained in the list and publish the resulting data. private void readTiSensorTags () { // connect to TiSensorTags this . tiSensorTagList . forEach ( myTiSensorTag -> { connect ( myTiSensorTag ); if ( myTiSensorTag . isConnected ()) { ... KuraPayload payload = new KuraPayload (); payload . setTimestamp ( new Date ()); payload . addMetric ( \"Firmware\" , myTiSensorTag . getFirmwareRevision ()); if ( myTiSensorTag . isCC2650 ()) { payload . addMetric ( \"Type\" , \"CC2650\" ); } else { payload . addMetric ( \"Type\" , \"CC2541\" ); } readServicesAndCharacteristics ( myTiSensorTag ); readSensors ( myTiSensorTag , payload ); myTiSensorTag . enableIOService (); publishData ( myTiSensorTag , payload ); ... } else { logger . warn ( \"Cannot connect to TI SensorTag {}.\" , myTiSensorTag . getBluetoothDevice (). getAdress ()); } }); } Since it is not possible to poll the status of the buttons on the SensorTag, the BLE example enables the notifications for them.","title":"org.eclipse.kura.example.ble.tisensortag.BluetoothLe.java File"},{"location":"java-application-development/how-to-use-legacy-bt-le/#orgeclipsekuraexampleblesensortagtisensortagjava-file","text":"The org.eclipse.kura.example.ble.sensortag.TiSensorTag class is used to connect and disconnect to the SensorTag. It also contains the methods to configure and read data from the sensor. The connection method uses the BluetoothGatt Service as shown below: public boolean connect ( String adapterName ) { this . bluetoothGatt = this . device . getBluetoothGatt (); boolean connected = false ; try { connected = this . bluetoothGatt . connect ( adapterName ); } catch ( KuraException e ) { logger . error ( e . toString ()); } if ( connected ) { this . bluetoothGatt . setBluetoothLeNotificationListener ( this ); setFirmwareRevision (); this . isConnected = true ; return true ; } else { // If connect command is not executed, close gatttool this . bluetoothGatt . disconnect (); this . isConnected = false ; return false ; } } A set of methods for reading from and writing to the internal register of the device are included in the class. The following code sample presents the methods to manage the temperature sensor. /* * Enable temperature sensor */ public void enableThermometer () { // Write \"01\" to enable thermometer sensor if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2650 , \"01\" ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2541 , \"01\" ); } } /* * Disable temperature sensor */ public void disableThermometer () { // Write \"00\" disable thermometer sensor if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2650 , \"00\" ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_ENABLE_2541 , \"00\" ); } } /* * Read temperature sensor */ public double [] readTemperature () { double [] temperatures = new double [ 2 ] ; // Read value try { if ( this . cc2650 ) { temperatures = calculateTemperature ( this . bluetoothGatt . readCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2650 )); } else { temperatures = calculateTemperature ( this . bluetoothGatt . readCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2541 )); } } catch ( KuraException e ) { logger . error ( e . toString ()); } return temperatures ; } /* * Read temperature sensor by UUID */ public double [] readTemperatureByUuid () { double [] temperatures = new double [ 2 ] ; try { temperatures = calculateTemperature ( this . bluetoothGatt . readCharacteristicValueByUuid ( TiSensorTagGatt . UUID_TEMP_SENSOR_VALUE )); } catch ( KuraException e ) { logger . error ( e . toString ()); } return temperatures ; } /* * Enable temperature notifications */ public void enableTemperatureNotifications ( TiSensorTagNotificationListener listener ) { setListener ( listener ); // Write \"01:00 to enable notifications if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2650 , ENABLE_NOTIFICATIONS ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2541 , ENABLE_NOTIFICATIONS ); } } /* * Disable temperature notifications */ public void disableTemperatureNotifications () { unsetListener (); // Write \"00:00 to enable notifications if ( this . cc2650 ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2650 , DISABLE_NOTIFICATIONS ); } else { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_NOTIFICATION_2541 , DISABLE_NOTIFICATIONS ); } } /* * Set sampling period (only for CC2650) */ public void setThermometerPeriod ( String period ) { this . bluetoothGatt . writeCharacteristicValue ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_PERIOD_2650 , period ); } /* * Calculate temperature */ private double [] calculateTemperature ( String value ) { logger . info ( \"Received temperature value: {}\" , value ); double [] temperatures = new double [ 2 ] ; byte [] valueByte = hexStringToByteArray ( value . replace ( \" \" , \"\" )); if ( this . cc2650 ) { int ambT = shortUnsignedAtOffset ( valueByte , 2 ); int objT = shortUnsignedAtOffset ( valueByte , 0 ); temperatures [ 0 ] = ( ambT >> 2 ) * 0.03125 ; temperatures [ 1 ] = ( objT >> 2 ) * 0.03125 ; } else { int ambT = shortUnsignedAtOffset ( valueByte , 2 ); int objT = shortSignedAtOffset ( valueByte , 0 ); temperatures [ 0 ] = ambT / 128.0 ; double vobj2 = objT ; vobj2 *= 0.00000015625 ; double tdie = ambT / 128.0 + 273.15 ; double s0 = 5.593E-14 ; // Calibration factor double a1 = 1.75E-3 ; double a2 = - 1.678E-5 ; double b0 = - 2.94E-5 ; double b1 = - 5.7E-7 ; double b2 = 4.63E-9 ; double c2 = 13.4 ; double tref = 298.15 ; double s = s0 * ( 1 + a1 * ( tdie - tref ) + a2 * Math . pow ( tdie - tref , 2 )); double vos = b0 + b1 * ( tdie - tref ) + b2 * Math . pow ( tdie - tref , 2 ); double fObj = vobj2 - vos + c2 * Math . pow ( vobj2 - vos , 2 ); double tObj = Math . pow ( Math . pow ( tdie , 4 ) + fObj / s , .25 ); temperatures [ 1 ] = tObj - 273.15 ; } return temperatures ; } The TiSensorTag class implements the org.eclipse.kura.bluetooth.BluetoothLeNotificationListener interface and the method onDataReceived is called when a BLE notification is received. In this example the notifications are used only for the buttons. The method is shown below. public void onDataReceived ( String handle , String value ) { if ( this . notificationListener != null ) { Map < String , Object > values = new HashMap <> (); if ( handle . equals ( TiSensorTagGatt . HANDLE_KEYS_STATUS_2541 ) || handle . equals ( TiSensorTagGatt . HANDLE_KEYS_STATUS_2650 )) { logger . info ( \"Received keys value: {}\" , value ); if ( ! value . equals ( \"00\" )) { values . put ( \"Keys\" , Integer . parseInt ( value )); this . notificationListener . notify ( this . device . getAdress (), values ); } } else if ( handle . equals ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2541 ) || handle . equals ( TiSensorTagGatt . HANDLE_TEMP_SENSOR_VALUE_2650 )) { double [] temperatures = calculateTemperature ( value ); values . put ( \"Ambient\" , temperatures [ 0 ] ); values . put ( \"Target\" , temperatures [ 1 ] ); this . notificationListener . notify ( this . device . getAdress (), values ); } } }","title":"org.eclipse.kura.example.ble.sensortag.TiSensorTag.java File"},{"location":"java-application-development/how-to-use-legacy-bt-le/#deploy-and-validate-the-bundle","text":"In order to proceed, you need to know the IP address of your embedded gateway that is on the remote target unit. Once you do, follow the mToolkit instructions for installing a single bundle to the remote target device located here . When the installation completes, the bundle starts automatically. You should see a message similar to the one below from /var/log/kura.log indicating that the bundle was successfully installed and configured, and started to search for TI SensorTags. 2015-11-11 13:38:19,208 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Activating BluetoothLe example... 2015-11-11 13:38:19,382 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Bluetooth adapter interface => hci0 2015-11-11 13:38:19,383 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Bluetooth adapter address => 5C:F3:70:60:63:8F 2015-11-11 13:38:19,383 [Component Resolve Thread (Bundle 6)] INFO o.e.k.e.b.t.BluetoothLe - Bluetooth adapter le enabled => true 2015-11-11 13:38:19,395 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - startLeScan 2015-11-11 13:38:19,396 [pool-26-thread-1] INFO o.e.k.l.b.l.BluetoothLeScanner - Starting bluetooth le scan... 2015-11-11 13:38:19,406 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurableComponentTracker - Adding ConfigurableComponent org.eclipse.kura.example.ble.tisensortag.BluetoothLe 2015-11-11 13:38:19,408 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration of ConfigurableComponent org.eclipse.kura.example.ble.tisensortag.BluetoothLe by org.eclipse.kura.core.configuration.ConfigurationServiceImpl@19cb019... 2015-11-11 13:38:19,424 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registering org.eclipse.kura.example.ble.tisensortag.BluetoothLe with ocd: org.eclipse.kura.core.configuration.metatype.Tocd@106b1d9 ... 2015-11-11 13:38:19,426 [Component Resolve Thread (Bundle 6)] INFO o.e.k.c.c.ConfigurationServiceImpl - Registration Completed for Component org.eclipse.kura.example.ble.tisensortag.BluetoothLe. 2015-11-11 13:38:20,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:21,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:22,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:23,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:24,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:25,394 [pool-26-thread-1] INFO o.e.k.e.b.t.BluetoothLe - m_bluetoothAdapter.isScanning 2015-11-11 13:38:25,396 [pool-26-thread-1] INFO o.e.k.l.b.l.BluetoothLeScanner - Killing hcitool... 2015-11-11 13:38:25,449 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - LE Scan ... 2015-11-11 13:38:25,450 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 7F:D8:F8:45:6B:C2 (unknown) 2015-11-11 13:38:25,452 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 7F:D8:F8:45:6B:C2 (unknown) 2015-11-11 13:38:25,453 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - BC:6A:29:AE:CC:96 (unknown) 2015-11-11 13:38:25,454 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - BC:6A:29:AE:CC:96 SensorTag 2015-11-11 13:38:25,455 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 68:64:4B:3F:04:9B (unknown) 2015-11-11 13:38:25,456 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 68:64:4B:3F:04:9B (unknown) 2015-11-11 13:38:25,457 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 18:EE:69:15:21:B0 (unknown) 2015-11-11 13:38:25,458 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - 18:EE:69:15:21:B0 (unknown) 2015-11-11 13:38:25,459 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add 68:64:4B:3F:04:9B - (unknown) 2015-11-11 13:38:25,464 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add 18:EE:69:15:21:B0 - (unknown) 2015-11-11 13:38:25,465 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add BC:6A:29:AE:CC:96 - SensorTag 2015-11-11 13:38:25,466 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothLeScanner - m_scanResult.add 7F:D8:F8:45:6B:C2 - (unknown) 2015-11-11 13:38:25,467 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address 68:64:4B:3F:04:9B Name (unknown) 2015-11-11 13:38:25,467 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Found device = 68:64:4B:3F:04:9B 2015-11-11 13:38:25,468 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address 18:EE:69:15:21:B0 Name (unknown) 2015-11-11 13:38:25,468 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Found device = 18:EE:69:15:21:B0 2015-11-11 13:38:25,469 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address BC:6A:29:AE:CC:96 Name SensorTag 2015-11-11 13:38:25,469 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - TI SensorTag BC:6A:29:AE:CC:96 found. 2015-11-11 13:38:25,470 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Address 7F:D8:F8:45:6B:C2 Name (unknown) 2015-11-11 13:38:25,470 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Found device = 7F:D8:F8:45:6B:C2 2015-11-11 13:38:25,470 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Connecting to TiSensorTag... 2015-11-11 13:38:25,475 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.l.b.l.BluetoothGattImpl - Sending connect message... 2015-11-11 13:38:25,859 [DnsMonitorServiceImpl] WARN o.e.k.n.a.m.DnsMonitorServiceImpl - Not Setting DNS servers to empty 2015-11-11 13:38:26,883 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received temperature value: 7f fe fc 0c 2015-11-11 13:38:26,885 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Ambient: 25.96875 Target: 20.801530505264225 2015-11-11 13:38:28,028 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received accelerometer value: ff 06 42 2015-11-11 13:38:28,029 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Acc X: -0.015625 Acc Y: 0.09375 Acc Z: -1.03125 2015-11-11 13:38:29,182 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received barometer value: e8 6a 22 56 2015-11-11 13:38:29,183 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Humidity: 36.053864 2015-11-11 13:38:30,327 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received magnetometer value: e5 f6 d6 fc 62 04 2015-11-11 13:38:30,328 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Mag X: 203.43018 Mag Y: 320.43457 Mag Z: 765.7471 2015-11-11 13:38:32,623 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received pressure value: 1d fd dd 99 2015-11-11 13:38:32,625 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Pre : 99334.60900594086 2015-11-11 13:38:33,767 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Received gyro value: cc 01 1d ff d2 ff 2015-11-11 13:38:33,769 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Gyro X: -101.55487 Gyro Y: -58.58612 Gyro Z: -87.898254 2015-11-11 13:38:33,769 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Not optical sensor on CC2541. 2015-11-11 13:38:34,770 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.TiSensorTag - Not optical sensor on CC2541. 2015-11-11 13:38:34,771 [BluetoothProcess Input Stream Gobbler] INFO o.e.k.e.b.t.BluetoothLe - Light: 0.0","title":"Deploy and Validate the Bundle"},{"location":"java-application-development/how-to-use-modbus/","text":"How to Use Modbus ModbusProtocolDevice is a service that provides a connection to a device or a network of devices over Serial Line (RS-232/RS-485) or Ethernet using the Modbus protocol. This service implements a subset of the Modbus Application Protocol as defined by Modbus Organization (for more information, refer to http://www.modbus.org/specs.php ). The ModbusProtocolDevice service needs to receive a valid Modbus configuration including the following parameters: Modbus protocol mode - defines the protocol mode as RTU or ASCII (only RTU mode for Ethernet connections). Timeout - sets the timeout in order to detect a disconnected device. The ModbusProtocolDevice service also requires a valid Serial Line or Ethernet connection configuration including the following parameters: Serial Line port name baudrate bits stops parity Ethernet ip address port number When a valid configuration is received, the ModbusProtocolDevice service tries to open the communication port. Serial Line communication uses the CommConnection class; Ethernet communication is based on java.net.Socket. When the communication is established, the client makes direct calls to the Modbus functions. The first parameter of each method is the Modbus address of the queried unit. This address must be in the range of 1 - 247. Function Codes The following function codes are implemented within the ModbusProtocolDevice service: 01 (0x01) readCoils(int unitAddr, int dataAddress, int count) - read 1 to 2000 maximum contiguous status of coils from the attached field device with address \"unitAddr\". An array of booleans representing the requested data points is returned. 02 (0x02) readDiscreteInputs(int unitAddr, int dataAddress, int count) - read 1 to 2000 maximum contiguous status of discrete inputs from the attached field device with address \"unitAddr\". An array of booleans representing the requested data points is returned. 03 (0x03) readHoldingRegisters(int unitAddr, int dataAddress, int count) - read contents of 1 to 125 maximum contiguous block of holding registers from the attached field device with address \"unitAddr\". An array of int representing the requested data points (data registers on 2 bytes) is returned. 04 (0x04) readInputRegisters(int unitAddr, int dataAddress, int count) - read contents of 1 to 125 maximum contiguous block of input registers from the attached field device with address \"unitAddr\". An array of int representing the requested data points (data registers on 2 bytes) is returned. 05 (0x05) writeSingleCoil(int unitAddr, int dataAddress, boolean data) - write a single output to either ON or OFF in the attached field device with address \"unitAddr\". 06 (0x06) writeSingleRegister(int unitAddr, int dataAddress, int data) - write a single holding register in the attached field device with address \"unitAddr\". 15 (0x0F) writeMultipleCoils(int unitAddr, int dataAddress, boolean[ ] data) - write multiple coils in a sequence of coils to either ON or OFF in the attached field device with address \"unitAddr\". 16 (0x10) writeMultipleRegister(int unitAddr, int dataAddress, int[ ] data) - write a block of contiguous registers (1 to 123) in the attached field device with address \"unitAddr\". All functions throw a ModbusProtocolException . Valid exceptions include: INVALID_CONFIGURATION NOT_AVAILABLE NOT_CONNECTED TRANSACTION_FAILURE Code Examples The ModbusProtocolDeviceService is an OSGi declarative service referenced in the client XML definition file: <reference bind= \"setModbusProtocolDeviceService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.protocol.modbus.ModbusProtocolDeviceService\" name= \"ModbusProtocolDeviceService\" policy= \"static\" unbind= \"unsetModbusProtocolDeviceService\" /> public void setModbusProtocolDeviceService ( ModbusProtocolDeviceService modbusService ) { this . m_protocolDevice = modbusService ; } public void unsetModbusProtocolDeviceService ( ModbusProtocolDeviceService modbusService ) { this . m_protocolDevice = null ; } if ( m_protocolDevice != null ){ m_protocolDevice . disconnect (); m_protocolDevice . configureConnection ( modbusSerialProperties ); } If no exception occurs, the ModbusProtocolDevice can then be used to exchange data: boolean [] digitalInputs = m_protocolDevice . readDiscreteInputs ( 1 , 2048 , 8 ); int [] analogInputs = m_protocolDevice . readInputRegisters ( 1 , 512 , 8 ); boolean [] digitalOutputs = m_protocolDevice . readCoils ( 1 , 2048 , 6 ); // LEDS // to set LEDS m_protocolDevice . writeSingleCoil ( 1 , 2047 + LED , On ? TurnON : TurnOFF );","title":"How to Use Modbus"},{"location":"java-application-development/how-to-use-modbus/#how-to-use-modbus","text":"ModbusProtocolDevice is a service that provides a connection to a device or a network of devices over Serial Line (RS-232/RS-485) or Ethernet using the Modbus protocol. This service implements a subset of the Modbus Application Protocol as defined by Modbus Organization (for more information, refer to http://www.modbus.org/specs.php ). The ModbusProtocolDevice service needs to receive a valid Modbus configuration including the following parameters: Modbus protocol mode - defines the protocol mode as RTU or ASCII (only RTU mode for Ethernet connections). Timeout - sets the timeout in order to detect a disconnected device. The ModbusProtocolDevice service also requires a valid Serial Line or Ethernet connection configuration including the following parameters: Serial Line port name baudrate bits stops parity Ethernet ip address port number When a valid configuration is received, the ModbusProtocolDevice service tries to open the communication port. Serial Line communication uses the CommConnection class; Ethernet communication is based on java.net.Socket. When the communication is established, the client makes direct calls to the Modbus functions. The first parameter of each method is the Modbus address of the queried unit. This address must be in the range of 1 - 247.","title":"How to Use Modbus"},{"location":"java-application-development/how-to-use-modbus/#function-codes","text":"The following function codes are implemented within the ModbusProtocolDevice service: 01 (0x01) readCoils(int unitAddr, int dataAddress, int count) - read 1 to 2000 maximum contiguous status of coils from the attached field device with address \"unitAddr\". An array of booleans representing the requested data points is returned. 02 (0x02) readDiscreteInputs(int unitAddr, int dataAddress, int count) - read 1 to 2000 maximum contiguous status of discrete inputs from the attached field device with address \"unitAddr\". An array of booleans representing the requested data points is returned. 03 (0x03) readHoldingRegisters(int unitAddr, int dataAddress, int count) - read contents of 1 to 125 maximum contiguous block of holding registers from the attached field device with address \"unitAddr\". An array of int representing the requested data points (data registers on 2 bytes) is returned. 04 (0x04) readInputRegisters(int unitAddr, int dataAddress, int count) - read contents of 1 to 125 maximum contiguous block of input registers from the attached field device with address \"unitAddr\". An array of int representing the requested data points (data registers on 2 bytes) is returned. 05 (0x05) writeSingleCoil(int unitAddr, int dataAddress, boolean data) - write a single output to either ON or OFF in the attached field device with address \"unitAddr\". 06 (0x06) writeSingleRegister(int unitAddr, int dataAddress, int data) - write a single holding register in the attached field device with address \"unitAddr\". 15 (0x0F) writeMultipleCoils(int unitAddr, int dataAddress, boolean[ ] data) - write multiple coils in a sequence of coils to either ON or OFF in the attached field device with address \"unitAddr\". 16 (0x10) writeMultipleRegister(int unitAddr, int dataAddress, int[ ] data) - write a block of contiguous registers (1 to 123) in the attached field device with address \"unitAddr\". All functions throw a ModbusProtocolException . Valid exceptions include: INVALID_CONFIGURATION NOT_AVAILABLE NOT_CONNECTED TRANSACTION_FAILURE","title":"Function Codes"},{"location":"java-application-development/how-to-use-modbus/#code-examples","text":"The ModbusProtocolDeviceService is an OSGi declarative service referenced in the client XML definition file: <reference bind= \"setModbusProtocolDeviceService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.protocol.modbus.ModbusProtocolDeviceService\" name= \"ModbusProtocolDeviceService\" policy= \"static\" unbind= \"unsetModbusProtocolDeviceService\" /> public void setModbusProtocolDeviceService ( ModbusProtocolDeviceService modbusService ) { this . m_protocolDevice = modbusService ; } public void unsetModbusProtocolDeviceService ( ModbusProtocolDeviceService modbusService ) { this . m_protocolDevice = null ; } if ( m_protocolDevice != null ){ m_protocolDevice . disconnect (); m_protocolDevice . configureConnection ( modbusSerialProperties ); } If no exception occurs, the ModbusProtocolDevice can then be used to exchange data: boolean [] digitalInputs = m_protocolDevice . readDiscreteInputs ( 1 , 2048 , 8 ); int [] analogInputs = m_protocolDevice . readInputRegisters ( 1 , 512 , 8 ); boolean [] digitalOutputs = m_protocolDevice . readCoils ( 1 , 2048 , 6 ); // LEDS // to set LEDS m_protocolDevice . writeSingleCoil ( 1 , 2047 + LED , On ? TurnON : TurnOFF );","title":"Code Examples"},{"location":"java-application-development/how-to-use-new-beacon-apis/","text":"How to Use New Beacon APIs Overview Starting from version 3.1.0, Eclipse Kura implements a new set of APIs for managing Bluetooth Low Energy and Beacon devices. The new APIs replace the existing Bluetooth APIs, but the old ones are still available and can be used. So, the applications developed before Kura 3.1.0 continue to work. The purpose of the new BLE Beacon APIs is to simplify the development of applications that interact with Bluetooth LE Beacon devices, offering clear and easy-to-use methods for advertising and scanning. Eclipse Kura offers out-of-the-box the implementation of the Beacon APIs for iBeacon\u2122 and Eddystone\u2122 technologies. Moreover, the new APIs allow to easily integrate new beacon implementations with Eclipse Kura. How to use Kura iBeacon\u2122 APIs This section briefly presents how to use the iBeacon\u2122 implementation of the Kura Beacon APIs, providing several code snippets to explain how to perform common operations on iBeacons. For a complete example on iBeacon advertising and scanning, please refer to the new iBeacon\u2122 advertiser and iBeacon\u2122 scanner examples. For more information about iBeacon\u2122 please refer to official page . An application that wants to use the iBeacon\u2122 implementation of Kura Beacon APIs should bind the BluetoothLeService and BluetoothLeIBeaconService OSGI services, as shown in the following Java snippet: public void setBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = bluetoothLeService ; } public void unsetBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = null ; } public void setBluetoothLeIBeaconService ( BluetoothLeIBeaconService bluetoothLeIBeaconService ) { this . bluetoothLeIBeaconService = bluetoothLeIBeaconService ; } public void unsetBluetoothLeIBeaconService ( BluetoothLeIBeaconService bluetoothLeIBeaconService ) { this . bluetoothLeIBeaconService = null ; } and in the component definition: <reference bind= \"setBluetoothLeService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.bluetooth.le.BluetoothLeService\" name= \"BluetoothLeService\" policy= \"static\" unbind= \"unsetBluetoothLeService\" /> <reference bind= \"setBluetoothLeIBeaconService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.ble.ibeacon.BluetoothLeIBeaconService\" name= \"BluetoothLeIBeaconService\" policy= \"static\" unbind= \"unsetBluetoothLeIBeaconService\" /> The BluetoothLeService is used to get the BluetoothLeAdapter to be used with the BluetoothLeIBeaconScanner and BluetoothLeIBeaconAdvertiser . As explained here , the adapter can be retrieved and powered on as follows: this . bluetoothLeAdapter = this . bluetoothLeService . getAdapter ( adapterName ); if ( this . bluetoothLeAdapter != null ) { if ( ! this . bluetoothLeAdapter . isPowered ()) { this . bluetoothLeAdapter . setPowered ( true ); } } where adapterName is the name of the adapter, e.g. hci0. Create an iBeacon\u2122 advertiser In order to properly configure an iBeacon\u2122 advertiser, a BluetoothLeIBeaconService is needed to create a new BluetoothLeIBeaconAdvertiser instance bound to a specific Bluetooth adapter: try { BluetoothLeBeaconAdvertiser < BluetoothLeIBeacon > advertiser = this . bluetoothLeIBeaconService . newBeaconAdvertiser ( this . bluetoothLeAdapter ); } catch ( KuraBluetoothBeaconAdvertiserNotAvailable e ) { logger . error ( \"Beacon Advertiser not available on {}\" , this . bluetoothLeAdapter . getInterfaceName (), e ); } Then a BluetoothLeIBeacon object should be created, containing all the information to be broadcasted. In the following snippet, the BluetoothLeIBeacon object is instantiated and added to the advertiser. Then the broadcast time interval is set and the beacon advertising is started. try { BluetoothLeIBeacon iBeacon = new BluetoothLeIBeacon ( uuid , major , minor , txPower ); advertiser . updateBeaconAdvertisingData ( iBeacon ); advertiser . updateBeaconAdvertisingInterval ( minInterval , maxInterval ; advertiser . startBeaconAdvertising (); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"IBeacon configuration failed\" , e ); } The BluetoothLeIBeacon represents the beacon packet that will be broadcasted by the advertiser and it should be configured will the following parameters: uuid a unique number that identifies the beacon. major a number that identifies a subset of beacons within a large group. minor a number that identifies a specific beacon. txPower the transmitter power level indicating the signal strength one meter from the device. Warning Only one advertising packet can be broadcasted at a time on a specific Bluetooth adapter. Finally, in the following snippet the advertiser is stopped and removed from the BluetoothLeIBeaconService : try { advertiser . stopBeaconAdvertising (); this . bluetoothLeIBeaconService . deleteBeaconAdvertiser ( advertiser ); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"Stop iBeacon advertising failed\" , e ); } Create an iBeacon\u2122 scanner As done for the advertiser , a BluetoothLeIBeaconService is needed to create a new BluetoothLeIBeaconScanner instance bound to a specific Bluetooth adapter: bluetoothLeBeaconScanner < BluetoothLeIBeacon > scanner = this . bluetoothLeIBeaconService . newBeaconScanner ( this . bluetoothLeAdapter ); A BluetoothLeIBeaconScanner needs a listener to collect the iBeacon packets that the Bluetooth adapter detects. In the following snippet, a simple listener that prints the iBeacon packet configuration is added to the scanner object: private class iBeaconListener implements BluetoothLeBeaconListener < BluetoothLeIBeacon > { @Override public void onBeaconsReceived ( BluetoothLeIBeacon beacon ) { logger . info ( \"iBeacon received from {}\" , beacon . getAddress ()); logger . info ( \"UUID : {}\" , beacon . getUuid ()); logger . info ( \"Major : {}\" , beacon . getMajor ()); logger . info ( \"Minor : {}\" , beacon . getMinor ()); logger . info ( \"TxPower : {}\" , beacon . getTxPower ()); logger . info ( \"RSSI : {}\" , beacon . getRssi ()); } } scanner . addBeaconListener ( listener ); The scanner is started for a specific time interval (in this case 10 seconds): scanner . startBeaconScan ( 10 ); Finally the scanner should be stopped, if needed, and the resources are released: if ( scanner . isScanning ()) { scanner . stopBeaconScan (); } scanner . removeBeaconListener ( listener ); this . bluetoothLeIBeaconService . deleteBeaconScanner ( scanner ); Note The kura.legacy.bluetooth.beacon.scan property in the kura.properties file defines how the scan for beacons is performed. If set to true , the deprecated hcitool command is used. This guarantees that all the advertisement packets are reported. If set to false , the library will communicate to the OS using dbus. In the latter case, the rate of reports is limited and not all the advertisement packets are reported. How to use Kura Eddystone\u2122 APIs Eddystone\u2122 is a protocol specification that defines a BLE message format for proximity beacon messages. It describes several different frame types that may be used individually or in combinations to create beacons that can be used for a variety of applications. For more information please see here and here . In this section the Eddystone\u2122 implementation of the Kura Beacon APIs is presented, providing several code snippets to explain how to perform common operations on them. For a complete example on Eddystone\u2122 advertising and scanning, please refer to the new Eddystone\u2122 advertiser and Eddystone\u2122 scanner examples. Warning Only Eddystone UID and URL frame types are currently supported. As done with the iBeacon\u2122 implementation, an application has to bind the BluetoothLeService and BluetoothLeEddystoneService OSGI services, as shown in the following Java snippet: public void setBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = bluetoothLeService ; } public void unsetBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = null ; } public void setBluetoothLeEddystoneService ( BluetoothLeEddystoneService bluetoothLeEddystoneService ) { this . bluetoothLeEddystoneService = bluetoothLeEddystoneService ; } public void unsetBluetoothLeEddystoneService ( BluetoothLeEddystoneService bluetoothLeEddystoneService ) { this . bluetoothLeEddystoneService = null ; } and in the component definition: <reference bind= \"setBluetoothLeService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.bluetooth.le.BluetoothLeService\" name= \"BluetoothLeService\" policy= \"static\" unbind= \"unsetBluetoothLeService\" /> <reference bind= \"setBluetoothLeEddystoneService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.ble.eddystone.BluetoothLeEddystoneService\" name= \"BluetoothLeEddystoneService\" policy= \"static\" unbind= \"unsetBluetoothLeEddystoneService\" /> The BluetoothLeService is used to get the BluetoothLeAdapter to be used with the BluetoothLeEddystoneScanner and BluetoothLeEddystoneAdvertiser . As explained here , the adapter can be retrieved and powered on as follows: this . bluetoothLeAdapter = this . bluetoothLeService . getAdapter ( adapterName ); if ( this . bluetoothLeAdapter != null ) { if ( ! this . bluetoothLeAdapter . isPowered ()) { this . bluetoothLeAdapter . setPowered ( true ); } } where adapterName is the name of the adapter, e.g. hci0. Create an Eddystone\u2122 advertiser In order to properly configure an Eddystone\u2122 advertiser, a BluetoothLeEddystoneService is needed to create a new BluetoothLeEddystoneAdvertiser instance bound to a specific Bluetooth adapter: try { BluetoothLeBeaconAdvertiser < BluetoothLeEddystone > advertiser = this . advertising = this . bluetoothLeEddystoneService . newBeaconAdvertiser ( this . bluetoothLeAdapter ); } catch ( KuraBluetoothBeaconAdvertiserNotAvailable e ) { logger . error ( \"Beacon Advertiser not available on {}\" , this . bluetoothLeAdapter . getInterfaceName (), e ); } The advertiser has to be configured with a BluetoothLeEddystone object that contains all the information to be broadcasted. Currently, UID and URL frame types are supported. A UID frame can be created as follows: BluetoothLeEddystone eddystone = new BluetoothLeEddystone (); eddystone . configureEddystoneUIDFrame ( namespace , instance , txPower ); where namespace and instance are respectively 10-byte and 6-byte long sequences that compose a unique 16-byte Beacon ID. The txPower is the calibrated transmission power at 0 m. A URL frame is created as follows: BluetoothLeEddystone eddystone = new BluetoothLeEddystone (); eddystone . configureEddystoneURLFrame ( url , txPower ); where url is the URL to be broadcasted and the txPower is the calibrated transmission power at 0 m. After the BluetoothLeEddystone creation, the packet is added to the advertiser and the broadcast time interval is set. Then the advertiser is started: try { advertiser . updateBeaconAdvertisingData ( eddystone ); advertiser . updateBeaconAdvertisingInterval ( this . options . getMinInterval (), this . options . getMaxInterval ()); advertiserstartBeaconAdvertising (); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"Eddystone configuration failed\" , e ); } Finally, in the following snippet the advertiser is stopped and removed from the BluetoothLeEddystoneService : try { advertiser . stopBeaconAdvertising (); this . bluetoothLeEddystoneService . deleteBeaconAdvertiser ( advertiser ); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"Stop Advertiser advertising failed\" , e ); } Create an Eddystone\u2122 scanner As done for the advertiser , a BluetoothLeEddystoneService is needed to create a new BluetoothLeEddystoneScanner instance bound to a specific Bluetooth adapter: bluetoothLeBeaconScanner < BluetoothLeEddystone > scanner = this . bluetoothLeEddystoneService . newBeaconScanner ( this . bluetoothLeAdapter ); A BluetoothLeEddystoneScanner needs a listener to collect the Eddystone packets that the Bluetooth adapter detects. In the following snippet, a simple listener that detects the frame type and prints the packet content is added to the scanner object: private class EddystoneListener implements BluetoothLeBeaconListener < BluetoothLeEddystone > { @Override public void onBeaconsReceived ( BluetoothLeEddystone beacon ) { logger . info ( \"Eddystone {} received from {}\" , eddystone . getFrameType (), eddystone . getAddress ()); if ( \"UID\" . equals ( eddystone . getFrameType ())) { logger . info ( \"Namespace : {}\" , bytesArrayToHexString ( eddystone . getNamespace ())); logger . info ( \"Instance : {}\" , bytesArrayToHexString ( eddystone . getInstance ())); } else if ( \"URL\" . equals ( eddystone . getFrameType ())) { logger . info ( \"URL : {}\" , eddystone . getUrlScheme () + eddystone . getUrl ()); } logger . info ( \"TxPower : {}\" , eddystone . getTxPower ()); logger . info ( \"RSSI : {}\" , eddystone . getRssi ()); } } scanner . addBeaconListener ( listener ); The scanner is started for a specific time interval (in this case 10 seconds): scanner . startBeaconScan ( 10 ); Finally the scanner should be stopped, if needed, and the resources are released: if ( scanner . isScanning ()) { scanner . stopBeaconScan (); } scanner . removeBeaconListener ( listener ); this . bluetoothLeEddystoneService . deleteBeaconScanner ( scanner ); Note The kura.legacy.bluetooth.beacon.scan property in the kura.properties file defines how the scan for beacons is performed. If set to true , the deprecated hcitool command is used. This guarantees that all the advertisement packets are reported. If set to false , the library will communicate to the OS using dbus. In the latter case, the rate of reports is limited and not all the advertisement packets are reported. Add new Beacon APIs implementation Eclipse Kura offers the implementation for iBeacon\u2122 and Eddystone\u2122 protocols, but it is possible to add implementations of different kinds of beacon protocols. The org.eclipse.kura.bluetooth.le.beacon package contains the interfaces used by the beacon implementations: BluetoothLeBeaconService is the entry point for applications that want to use the Beacon APIs. BluetoothLeBeaconManager is used by the BluetoothLeBeaconService and provides methods to create and delete Beacon advertisers and scanners. BluetoothLeBeaconAdvertiser allows configuring advertisement packets and managing advertising. BluetoothLeBeaconScanner is used to search for specific Beacon packets. BluetoothLeBeaconEncoder implements methods for encoding a Beacon object to a stream of bytes. BluetoothLeBeaconDecoder implements methods for decoding a stream of bytes in to a Beacon object. BluetoothLeBeacon represents a generic Beacon packet. The BluetoothLeBeaconManager , BluetoothLeBeaconScanner and BluetoothLeBeaconAdvertiser interfaces handles generic BluetoothLeBeacon objects and their implementations are provided by the org.eclipse.kura.ble.provider . The others interfaces, instead, are Beacon specific and their implementations depend on the specific protocol that is used. As a consequence, who wants to support a new Beacon protocol, should provide the implementation of the BluetoothLeBeaconService , BluetoothLeBeaconEncoder and BluetoothLeBeaconDecoder interfaces and extend the BluetoothLeBeacon class. As an example, the org.eclipse.kura.ble.ibeacon.provider provides the implementation of the above APIs for the iBeacon\u2122 protocol. In this case, the org.eclipse.kura.ble.ibeacon package contains the following: BluetoothLeIBeacon implements the BluetoothLeBeacon interface for the iBeacon\u2122 packet. BluetoothLeIBeaconEncoder is a marker interface that extends BluetoothLeBeaconEncoder . BluetoothLeIBeaconDecoder is a marker interface that extends BluetoothLeBeaconDecoder . BluetoothLeIBeaconService is a marker interface that extends BluetoothLeBeaconService and is the entry point for applications that wants to use an iBeacon\u2122. The org.eclipse.kura.internal.ble.ibeacon provides the implementations for the above interfaces: BluetoothLeIBeaconEncoderImpl implements BluetoothLeIBeaconEncoder offering a method to encode the BluetoothLeIBeacon into a byte stream. BluetoothLeIBeaconDecoderImpl implements BluetoothLeIBeaconDecoder offering a method to decode a stream of bytes into a BluetoothLeIBeacon object. BluetoothLeIBeaconServiceImpl is the implementation of BluetoothLeIBeaconService and uses the generic BluetoothLeBeaconManager service to create scanners and advertisers. The following image shows the UML diagram.","title":"How to Use New Beacon APIs"},{"location":"java-application-development/how-to-use-new-beacon-apis/#how-to-use-new-beacon-apis","text":"","title":"How to Use New Beacon APIs"},{"location":"java-application-development/how-to-use-new-beacon-apis/#overview","text":"Starting from version 3.1.0, Eclipse Kura implements a new set of APIs for managing Bluetooth Low Energy and Beacon devices. The new APIs replace the existing Bluetooth APIs, but the old ones are still available and can be used. So, the applications developed before Kura 3.1.0 continue to work. The purpose of the new BLE Beacon APIs is to simplify the development of applications that interact with Bluetooth LE Beacon devices, offering clear and easy-to-use methods for advertising and scanning. Eclipse Kura offers out-of-the-box the implementation of the Beacon APIs for iBeacon\u2122 and Eddystone\u2122 technologies. Moreover, the new APIs allow to easily integrate new beacon implementations with Eclipse Kura.","title":"Overview"},{"location":"java-application-development/how-to-use-new-beacon-apis/#how-to-use-kura-ibeacon-apis","text":"This section briefly presents how to use the iBeacon\u2122 implementation of the Kura Beacon APIs, providing several code snippets to explain how to perform common operations on iBeacons. For a complete example on iBeacon advertising and scanning, please refer to the new iBeacon\u2122 advertiser and iBeacon\u2122 scanner examples. For more information about iBeacon\u2122 please refer to official page . An application that wants to use the iBeacon\u2122 implementation of Kura Beacon APIs should bind the BluetoothLeService and BluetoothLeIBeaconService OSGI services, as shown in the following Java snippet: public void setBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = bluetoothLeService ; } public void unsetBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = null ; } public void setBluetoothLeIBeaconService ( BluetoothLeIBeaconService bluetoothLeIBeaconService ) { this . bluetoothLeIBeaconService = bluetoothLeIBeaconService ; } public void unsetBluetoothLeIBeaconService ( BluetoothLeIBeaconService bluetoothLeIBeaconService ) { this . bluetoothLeIBeaconService = null ; } and in the component definition: <reference bind= \"setBluetoothLeService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.bluetooth.le.BluetoothLeService\" name= \"BluetoothLeService\" policy= \"static\" unbind= \"unsetBluetoothLeService\" /> <reference bind= \"setBluetoothLeIBeaconService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.ble.ibeacon.BluetoothLeIBeaconService\" name= \"BluetoothLeIBeaconService\" policy= \"static\" unbind= \"unsetBluetoothLeIBeaconService\" /> The BluetoothLeService is used to get the BluetoothLeAdapter to be used with the BluetoothLeIBeaconScanner and BluetoothLeIBeaconAdvertiser . As explained here , the adapter can be retrieved and powered on as follows: this . bluetoothLeAdapter = this . bluetoothLeService . getAdapter ( adapterName ); if ( this . bluetoothLeAdapter != null ) { if ( ! this . bluetoothLeAdapter . isPowered ()) { this . bluetoothLeAdapter . setPowered ( true ); } } where adapterName is the name of the adapter, e.g. hci0.","title":"How to use Kura iBeacon&trade; APIs"},{"location":"java-application-development/how-to-use-new-beacon-apis/#create-an-ibeacon-advertiser","text":"In order to properly configure an iBeacon\u2122 advertiser, a BluetoothLeIBeaconService is needed to create a new BluetoothLeIBeaconAdvertiser instance bound to a specific Bluetooth adapter: try { BluetoothLeBeaconAdvertiser < BluetoothLeIBeacon > advertiser = this . bluetoothLeIBeaconService . newBeaconAdvertiser ( this . bluetoothLeAdapter ); } catch ( KuraBluetoothBeaconAdvertiserNotAvailable e ) { logger . error ( \"Beacon Advertiser not available on {}\" , this . bluetoothLeAdapter . getInterfaceName (), e ); } Then a BluetoothLeIBeacon object should be created, containing all the information to be broadcasted. In the following snippet, the BluetoothLeIBeacon object is instantiated and added to the advertiser. Then the broadcast time interval is set and the beacon advertising is started. try { BluetoothLeIBeacon iBeacon = new BluetoothLeIBeacon ( uuid , major , minor , txPower ); advertiser . updateBeaconAdvertisingData ( iBeacon ); advertiser . updateBeaconAdvertisingInterval ( minInterval , maxInterval ; advertiser . startBeaconAdvertising (); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"IBeacon configuration failed\" , e ); } The BluetoothLeIBeacon represents the beacon packet that will be broadcasted by the advertiser and it should be configured will the following parameters: uuid a unique number that identifies the beacon. major a number that identifies a subset of beacons within a large group. minor a number that identifies a specific beacon. txPower the transmitter power level indicating the signal strength one meter from the device. Warning Only one advertising packet can be broadcasted at a time on a specific Bluetooth adapter. Finally, in the following snippet the advertiser is stopped and removed from the BluetoothLeIBeaconService : try { advertiser . stopBeaconAdvertising (); this . bluetoothLeIBeaconService . deleteBeaconAdvertiser ( advertiser ); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"Stop iBeacon advertising failed\" , e ); }","title":"Create an iBeacon&trade; advertiser"},{"location":"java-application-development/how-to-use-new-beacon-apis/#create-an-ibeacon-scanner","text":"As done for the advertiser , a BluetoothLeIBeaconService is needed to create a new BluetoothLeIBeaconScanner instance bound to a specific Bluetooth adapter: bluetoothLeBeaconScanner < BluetoothLeIBeacon > scanner = this . bluetoothLeIBeaconService . newBeaconScanner ( this . bluetoothLeAdapter ); A BluetoothLeIBeaconScanner needs a listener to collect the iBeacon packets that the Bluetooth adapter detects. In the following snippet, a simple listener that prints the iBeacon packet configuration is added to the scanner object: private class iBeaconListener implements BluetoothLeBeaconListener < BluetoothLeIBeacon > { @Override public void onBeaconsReceived ( BluetoothLeIBeacon beacon ) { logger . info ( \"iBeacon received from {}\" , beacon . getAddress ()); logger . info ( \"UUID : {}\" , beacon . getUuid ()); logger . info ( \"Major : {}\" , beacon . getMajor ()); logger . info ( \"Minor : {}\" , beacon . getMinor ()); logger . info ( \"TxPower : {}\" , beacon . getTxPower ()); logger . info ( \"RSSI : {}\" , beacon . getRssi ()); } } scanner . addBeaconListener ( listener ); The scanner is started for a specific time interval (in this case 10 seconds): scanner . startBeaconScan ( 10 ); Finally the scanner should be stopped, if needed, and the resources are released: if ( scanner . isScanning ()) { scanner . stopBeaconScan (); } scanner . removeBeaconListener ( listener ); this . bluetoothLeIBeaconService . deleteBeaconScanner ( scanner ); Note The kura.legacy.bluetooth.beacon.scan property in the kura.properties file defines how the scan for beacons is performed. If set to true , the deprecated hcitool command is used. This guarantees that all the advertisement packets are reported. If set to false , the library will communicate to the OS using dbus. In the latter case, the rate of reports is limited and not all the advertisement packets are reported.","title":"Create an iBeacon&trade; scanner"},{"location":"java-application-development/how-to-use-new-beacon-apis/#how-to-use-kura-eddystone-apis","text":"Eddystone\u2122 is a protocol specification that defines a BLE message format for proximity beacon messages. It describes several different frame types that may be used individually or in combinations to create beacons that can be used for a variety of applications. For more information please see here and here . In this section the Eddystone\u2122 implementation of the Kura Beacon APIs is presented, providing several code snippets to explain how to perform common operations on them. For a complete example on Eddystone\u2122 advertising and scanning, please refer to the new Eddystone\u2122 advertiser and Eddystone\u2122 scanner examples. Warning Only Eddystone UID and URL frame types are currently supported. As done with the iBeacon\u2122 implementation, an application has to bind the BluetoothLeService and BluetoothLeEddystoneService OSGI services, as shown in the following Java snippet: public void setBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = bluetoothLeService ; } public void unsetBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = null ; } public void setBluetoothLeEddystoneService ( BluetoothLeEddystoneService bluetoothLeEddystoneService ) { this . bluetoothLeEddystoneService = bluetoothLeEddystoneService ; } public void unsetBluetoothLeEddystoneService ( BluetoothLeEddystoneService bluetoothLeEddystoneService ) { this . bluetoothLeEddystoneService = null ; } and in the component definition: <reference bind= \"setBluetoothLeService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.bluetooth.le.BluetoothLeService\" name= \"BluetoothLeService\" policy= \"static\" unbind= \"unsetBluetoothLeService\" /> <reference bind= \"setBluetoothLeEddystoneService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.ble.eddystone.BluetoothLeEddystoneService\" name= \"BluetoothLeEddystoneService\" policy= \"static\" unbind= \"unsetBluetoothLeEddystoneService\" /> The BluetoothLeService is used to get the BluetoothLeAdapter to be used with the BluetoothLeEddystoneScanner and BluetoothLeEddystoneAdvertiser . As explained here , the adapter can be retrieved and powered on as follows: this . bluetoothLeAdapter = this . bluetoothLeService . getAdapter ( adapterName ); if ( this . bluetoothLeAdapter != null ) { if ( ! this . bluetoothLeAdapter . isPowered ()) { this . bluetoothLeAdapter . setPowered ( true ); } } where adapterName is the name of the adapter, e.g. hci0.","title":"How to use Kura Eddystone&trade; APIs"},{"location":"java-application-development/how-to-use-new-beacon-apis/#create-an-eddystone-advertiser","text":"In order to properly configure an Eddystone\u2122 advertiser, a BluetoothLeEddystoneService is needed to create a new BluetoothLeEddystoneAdvertiser instance bound to a specific Bluetooth adapter: try { BluetoothLeBeaconAdvertiser < BluetoothLeEddystone > advertiser = this . advertising = this . bluetoothLeEddystoneService . newBeaconAdvertiser ( this . bluetoothLeAdapter ); } catch ( KuraBluetoothBeaconAdvertiserNotAvailable e ) { logger . error ( \"Beacon Advertiser not available on {}\" , this . bluetoothLeAdapter . getInterfaceName (), e ); } The advertiser has to be configured with a BluetoothLeEddystone object that contains all the information to be broadcasted. Currently, UID and URL frame types are supported. A UID frame can be created as follows: BluetoothLeEddystone eddystone = new BluetoothLeEddystone (); eddystone . configureEddystoneUIDFrame ( namespace , instance , txPower ); where namespace and instance are respectively 10-byte and 6-byte long sequences that compose a unique 16-byte Beacon ID. The txPower is the calibrated transmission power at 0 m. A URL frame is created as follows: BluetoothLeEddystone eddystone = new BluetoothLeEddystone (); eddystone . configureEddystoneURLFrame ( url , txPower ); where url is the URL to be broadcasted and the txPower is the calibrated transmission power at 0 m. After the BluetoothLeEddystone creation, the packet is added to the advertiser and the broadcast time interval is set. Then the advertiser is started: try { advertiser . updateBeaconAdvertisingData ( eddystone ); advertiser . updateBeaconAdvertisingInterval ( this . options . getMinInterval (), this . options . getMaxInterval ()); advertiserstartBeaconAdvertising (); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"Eddystone configuration failed\" , e ); } Finally, in the following snippet the advertiser is stopped and removed from the BluetoothLeEddystoneService : try { advertiser . stopBeaconAdvertising (); this . bluetoothLeEddystoneService . deleteBeaconAdvertiser ( advertiser ); } catch ( KuraBluetoothCommandException e ) { logger . error ( \"Stop Advertiser advertising failed\" , e ); }","title":"Create an Eddystone&trade; advertiser"},{"location":"java-application-development/how-to-use-new-beacon-apis/#create-an-eddystone-scanner","text":"As done for the advertiser , a BluetoothLeEddystoneService is needed to create a new BluetoothLeEddystoneScanner instance bound to a specific Bluetooth adapter: bluetoothLeBeaconScanner < BluetoothLeEddystone > scanner = this . bluetoothLeEddystoneService . newBeaconScanner ( this . bluetoothLeAdapter ); A BluetoothLeEddystoneScanner needs a listener to collect the Eddystone packets that the Bluetooth adapter detects. In the following snippet, a simple listener that detects the frame type and prints the packet content is added to the scanner object: private class EddystoneListener implements BluetoothLeBeaconListener < BluetoothLeEddystone > { @Override public void onBeaconsReceived ( BluetoothLeEddystone beacon ) { logger . info ( \"Eddystone {} received from {}\" , eddystone . getFrameType (), eddystone . getAddress ()); if ( \"UID\" . equals ( eddystone . getFrameType ())) { logger . info ( \"Namespace : {}\" , bytesArrayToHexString ( eddystone . getNamespace ())); logger . info ( \"Instance : {}\" , bytesArrayToHexString ( eddystone . getInstance ())); } else if ( \"URL\" . equals ( eddystone . getFrameType ())) { logger . info ( \"URL : {}\" , eddystone . getUrlScheme () + eddystone . getUrl ()); } logger . info ( \"TxPower : {}\" , eddystone . getTxPower ()); logger . info ( \"RSSI : {}\" , eddystone . getRssi ()); } } scanner . addBeaconListener ( listener ); The scanner is started for a specific time interval (in this case 10 seconds): scanner . startBeaconScan ( 10 ); Finally the scanner should be stopped, if needed, and the resources are released: if ( scanner . isScanning ()) { scanner . stopBeaconScan (); } scanner . removeBeaconListener ( listener ); this . bluetoothLeEddystoneService . deleteBeaconScanner ( scanner ); Note The kura.legacy.bluetooth.beacon.scan property in the kura.properties file defines how the scan for beacons is performed. If set to true , the deprecated hcitool command is used. This guarantees that all the advertisement packets are reported. If set to false , the library will communicate to the OS using dbus. In the latter case, the rate of reports is limited and not all the advertisement packets are reported.","title":"Create an Eddystone&trade; scanner"},{"location":"java-application-development/how-to-use-new-beacon-apis/#add-new-beacon-apis-implementation","text":"Eclipse Kura offers the implementation for iBeacon\u2122 and Eddystone\u2122 protocols, but it is possible to add implementations of different kinds of beacon protocols. The org.eclipse.kura.bluetooth.le.beacon package contains the interfaces used by the beacon implementations: BluetoothLeBeaconService is the entry point for applications that want to use the Beacon APIs. BluetoothLeBeaconManager is used by the BluetoothLeBeaconService and provides methods to create and delete Beacon advertisers and scanners. BluetoothLeBeaconAdvertiser allows configuring advertisement packets and managing advertising. BluetoothLeBeaconScanner is used to search for specific Beacon packets. BluetoothLeBeaconEncoder implements methods for encoding a Beacon object to a stream of bytes. BluetoothLeBeaconDecoder implements methods for decoding a stream of bytes in to a Beacon object. BluetoothLeBeacon represents a generic Beacon packet. The BluetoothLeBeaconManager , BluetoothLeBeaconScanner and BluetoothLeBeaconAdvertiser interfaces handles generic BluetoothLeBeacon objects and their implementations are provided by the org.eclipse.kura.ble.provider . The others interfaces, instead, are Beacon specific and their implementations depend on the specific protocol that is used. As a consequence, who wants to support a new Beacon protocol, should provide the implementation of the BluetoothLeBeaconService , BluetoothLeBeaconEncoder and BluetoothLeBeaconDecoder interfaces and extend the BluetoothLeBeacon class. As an example, the org.eclipse.kura.ble.ibeacon.provider provides the implementation of the above APIs for the iBeacon\u2122 protocol. In this case, the org.eclipse.kura.ble.ibeacon package contains the following: BluetoothLeIBeacon implements the BluetoothLeBeacon interface for the iBeacon\u2122 packet. BluetoothLeIBeaconEncoder is a marker interface that extends BluetoothLeBeaconEncoder . BluetoothLeIBeaconDecoder is a marker interface that extends BluetoothLeBeaconDecoder . BluetoothLeIBeaconService is a marker interface that extends BluetoothLeBeaconService and is the entry point for applications that wants to use an iBeacon\u2122. The org.eclipse.kura.internal.ble.ibeacon provides the implementations for the above interfaces: BluetoothLeIBeaconEncoderImpl implements BluetoothLeIBeaconEncoder offering a method to encode the BluetoothLeIBeacon into a byte stream. BluetoothLeIBeaconDecoderImpl implements BluetoothLeIBeaconDecoder offering a method to decode a stream of bytes into a BluetoothLeIBeacon object. BluetoothLeIBeaconServiceImpl is the implementation of BluetoothLeIBeaconService and uses the generic BluetoothLeBeaconManager service to create scanners and advertisers. The following image shows the UML diagram.","title":"Add new Beacon APIs implementation"},{"location":"java-application-development/how-to-use-new-bt-le-apis/","text":"How to Use New Bluetooth LE APIs Overview Starting from version 3.1.0, Eclipse Kura implements a new set of APIs for managing Bluetooth Low Energy and Beacon devices. The new APIs replace the existing Bluetooth APIs, but the old ones are still available and can be used. So, the applications developed before Kura 3.1.0 continue to work. The purpose of the new BLE APIs is to simplify the development of applications that interact with Bluetooth LE devices, offering clear and easy-to-use methods, and add new features to correctly manage the connection with remote devices. Moreover, the APIs organize the methods in a logical way to access all levels of a GATT client, from GATT services to GATT characteristics and descriptors, using UUIDs to identify the correct resource. Bluez-Dbus - BLE GATT API The implementation of the new Kura BLE APIs is based on the Bluez-Dbus library that provides an easy to use Bluetooth LE API based on BlueZ over DBus. The library eases the access to GATT services and the management of BLE connections and discovery, without using any wrapper library as it is based on a newer version of dbus-java which uses jnr-unixsocket. APIs description The new BLE APIs are exported in the org.eclipse.kura.bluetooth.le package. The interfaces are briefly described in the following. BluetoothLeService is the entry point of the OSGI service. It allows to get all the Bluetooth interfaces installed on the gateway or a specific one using the name of the adapter. BluetoothLeAdapter represents the physical Bluetooth adapter on the gateway. It allows to start/stop a discovery, search a specific BLE device based on the BD address, power up/down the adapter and get information about the adapter. BluetoothLeDevice represents a Bluetooth LE device. The interface provides methods for connections and disconnections, list the GATT services or search a specific one based on the UUID and get generic information about the device. BluetoothLeGattService represents a GATT service and allows listing the GATT characteristics provided by the device. BluetoothLeGattCharacteristic represents a GATT characteristic. It provides methods to read from and write to the characteristic, enable or disable notifications and get the properties. BluetoothLeGattDescriptor represents a GATT descriptor associated with the characteristic. More information about the APIs can be found in API Reference . How to use the Kura BLE API This section briefly presents how to use the Kura BLE APIs, providing several code snippets to explain how to perform common bluetooth operations. For a complete example, please refer to the new SensorTag application . An application that wants to use the Kura BLE APIs should bind the BluetoothLeService OSGI service, as shown in the following Java snippet: public void setBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = bluetoothLeService ; } public void unsetBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = null ; } and in the component definition: <reference bind= \"setBluetoothLeService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.bluetooth.le.BluetoothLeService\" name= \"BluetoothLeService\" policy= \"static\" unbind= \"unsetBluetoothLeService\" /> Get the Bluetooth adapter Once bound to the BluetoothLeService , an application can get the Bluetooth adapter and power on it, if needed: this . bluetoothLeAdapter = this . bluetoothLeService . getAdapter ( adapterName ); if ( this . bluetoothLeAdapter != null ) { if ( ! this . bluetoothLeAdapter . isPowered ()) { this . bluetoothLeAdapter . setPowered ( true ); } } where adapterName is the name of the adapter, i.e. hci0. Search for BLE devices The BluetoothLeAdapter provides several methods to search for a device, a.k.a. perform a BLE discovery: Future<BluetoothLeDevice> findDeviceByAddress(long timeout, String address) search for a BLE device with the specified address. The method will perform a BLE discovery for at most timeout seconds or until the device is found. It will return a Future instance and the discovered device can be retrieved using the get() method. Future<BluetoothLeDevice> findDeviceByName(long timeout, String name) search for a BLE device with the specified system name and return a Future. void findDeviceByAddress(long timeout, String address, Consumer<BluetoothLeDevice> consumer) search for a BLE device with the specified address. The method will perform a BLE discovery for at most timeout seconds or until the device is found. When the device is found or the timeout is reached the consumer is used to get the device. void findDeviceByAddress(long timeout, String address, Consumer<BluetoothLeDevice> consumer) search for a BLE device with the specified name and use the provided consumer to return the device. Future<List<BluetoothLeDevice>> findDevices(long timeout) and void findDevices(long timeout, Consumer<List<BluetoothLeDevice>> consumer) are similar to the methods above, but they get a list of Bluetooth devices. The following snippet shows how to perform a discovery of 10 seconds using findDevices method: if ( this . bluetoothLeAdapter . isDiscovering ()) { try { this . bluetoothLeAdapter . stopDiscovery (); } catch ( KuraException e ) { logger . error ( \"Failed to stop discovery\" , e ); } } Future < List < BluetoothLeDevice >> future = this . bluetoothLeAdapter . findDevices ( 10 ); try { List < BluetoothLeDevice > ; devices = future . get (); } catch ( InterruptedException | ExecutionException e ) { logger . error ( \"Scan for devices failed\" , e ); } Get the GATT services and characteristics To get the GATT services using the BluetoothLeDevice , use the following snippet: try { List < BluetoothLeGattService > ; services = device . findServices (); } catch ( KuraBluetoothResourceNotFoundException e ) { logger . error ( \"Unable to find GATT services\" , e ); } A specific GATT service can be retrieved using its UUID: try { BluetoothLeGattService service = device . findService ( uuid ); } catch ( KuraBluetoothResourceNotFoundException e ) { logger . error ( \"Unable to find GATT service\" , e ); } Using the GATT service, it is possible to get a specific GATT characteristic (or the complete list) and the GATT descriptor from it: try { BluetoothLeGattCharacteristic characteristic = service . findCharacteristic ( characteristicUuid ); BluetoothLeGattDescriptor descriptor = characteristic . findDescriptor ( descriptorUuid ); } catch ( KuraBluetoothResourceNotFoundException e ) { logger . error ( \"Unable to find GATT resources\" , e ); } IO operations on GATT characteristics and descriptors The Kura BLE APIs provides methods to manage the IO operations on GATT characteristics and descriptors. The following snippet provides an example on how to read and write data to a characteristic. try { byte [] valueRead = characteristic . readValue (); byte [] valueWrite = { 0x01 }; characteristic . writeValue ( valueWrite ); } catch ( KuraBluetoothIOException e ) { logger . error ( \"IO operation failed\" , e ); } In the following example, instead, a notification listener is configured to periodically receive the data from a GATT characteristic and print the first value of the given array. The period is internally set by the BLE device. try { Consumer < byte []> ; callback = valueBytes -> System . out . println (( int ) valueBytes [ 0 ] ); characteristic . enableValueNotifications ( callback ); } catch ( KuraBluetoothNotificationException e ) { logger . error (); } Configure Bluez on the Raspberry Pi The minimum version of Bluez supported by Kura Bluetooth LE APIs is 5.42. The Raspbian Stretch OS comes with Bluez 5.43, but older OS couldn't have an updated Bluez version. In this case, it is possible to compile and install Bluez from sources using a Raspberry Pi. The Bluez sources can be found here Proceed as follows: Install the packages needed for compile Bluez: sudo apt-get install libusb-dev libdbus-1-dev libglib2.0-dev libudev-dev libical-dev libreadline-dev * Download bluez-5.43.tar.xz (or newer version) from here . * Decompress the compressed archive: tar -xf bluez-5.43.tar.x Compile the sources: cd bluez-5.43 ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-library -disable-systemd --enable-experimental --enable-maintainer-mod make make install","title":"How to Use New Bluetooth LE APIs"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#how-to-use-new-bluetooth-le-apis","text":"","title":"How to Use New Bluetooth LE APIs"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#overview","text":"Starting from version 3.1.0, Eclipse Kura implements a new set of APIs for managing Bluetooth Low Energy and Beacon devices. The new APIs replace the existing Bluetooth APIs, but the old ones are still available and can be used. So, the applications developed before Kura 3.1.0 continue to work. The purpose of the new BLE APIs is to simplify the development of applications that interact with Bluetooth LE devices, offering clear and easy-to-use methods, and add new features to correctly manage the connection with remote devices. Moreover, the APIs organize the methods in a logical way to access all levels of a GATT client, from GATT services to GATT characteristics and descriptors, using UUIDs to identify the correct resource.","title":"Overview"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#bluez-dbus-ble-gatt-api","text":"The implementation of the new Kura BLE APIs is based on the Bluez-Dbus library that provides an easy to use Bluetooth LE API based on BlueZ over DBus. The library eases the access to GATT services and the management of BLE connections and discovery, without using any wrapper library as it is based on a newer version of dbus-java which uses jnr-unixsocket.","title":"Bluez-Dbus - BLE GATT API"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#apis-description","text":"The new BLE APIs are exported in the org.eclipse.kura.bluetooth.le package. The interfaces are briefly described in the following. BluetoothLeService is the entry point of the OSGI service. It allows to get all the Bluetooth interfaces installed on the gateway or a specific one using the name of the adapter. BluetoothLeAdapter represents the physical Bluetooth adapter on the gateway. It allows to start/stop a discovery, search a specific BLE device based on the BD address, power up/down the adapter and get information about the adapter. BluetoothLeDevice represents a Bluetooth LE device. The interface provides methods for connections and disconnections, list the GATT services or search a specific one based on the UUID and get generic information about the device. BluetoothLeGattService represents a GATT service and allows listing the GATT characteristics provided by the device. BluetoothLeGattCharacteristic represents a GATT characteristic. It provides methods to read from and write to the characteristic, enable or disable notifications and get the properties. BluetoothLeGattDescriptor represents a GATT descriptor associated with the characteristic. More information about the APIs can be found in API Reference .","title":"APIs description"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#how-to-use-the-kura-ble-api","text":"This section briefly presents how to use the Kura BLE APIs, providing several code snippets to explain how to perform common bluetooth operations. For a complete example, please refer to the new SensorTag application . An application that wants to use the Kura BLE APIs should bind the BluetoothLeService OSGI service, as shown in the following Java snippet: public void setBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = bluetoothLeService ; } public void unsetBluetoothLeService ( BluetoothLeService bluetoothLeService ) { this . bluetoothLeService = null ; } and in the component definition: <reference bind= \"setBluetoothLeService\" cardinality= \"1..1\" interface= \"org.eclipse.kura.bluetooth.le.BluetoothLeService\" name= \"BluetoothLeService\" policy= \"static\" unbind= \"unsetBluetoothLeService\" />","title":"How to use the Kura BLE API"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#get-the-bluetooth-adapter","text":"Once bound to the BluetoothLeService , an application can get the Bluetooth adapter and power on it, if needed: this . bluetoothLeAdapter = this . bluetoothLeService . getAdapter ( adapterName ); if ( this . bluetoothLeAdapter != null ) { if ( ! this . bluetoothLeAdapter . isPowered ()) { this . bluetoothLeAdapter . setPowered ( true ); } } where adapterName is the name of the adapter, i.e. hci0.","title":"Get the Bluetooth adapter"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#search-for-ble-devices","text":"The BluetoothLeAdapter provides several methods to search for a device, a.k.a. perform a BLE discovery: Future<BluetoothLeDevice> findDeviceByAddress(long timeout, String address) search for a BLE device with the specified address. The method will perform a BLE discovery for at most timeout seconds or until the device is found. It will return a Future instance and the discovered device can be retrieved using the get() method. Future<BluetoothLeDevice> findDeviceByName(long timeout, String name) search for a BLE device with the specified system name and return a Future. void findDeviceByAddress(long timeout, String address, Consumer<BluetoothLeDevice> consumer) search for a BLE device with the specified address. The method will perform a BLE discovery for at most timeout seconds or until the device is found. When the device is found or the timeout is reached the consumer is used to get the device. void findDeviceByAddress(long timeout, String address, Consumer<BluetoothLeDevice> consumer) search for a BLE device with the specified name and use the provided consumer to return the device. Future<List<BluetoothLeDevice>> findDevices(long timeout) and void findDevices(long timeout, Consumer<List<BluetoothLeDevice>> consumer) are similar to the methods above, but they get a list of Bluetooth devices. The following snippet shows how to perform a discovery of 10 seconds using findDevices method: if ( this . bluetoothLeAdapter . isDiscovering ()) { try { this . bluetoothLeAdapter . stopDiscovery (); } catch ( KuraException e ) { logger . error ( \"Failed to stop discovery\" , e ); } } Future < List < BluetoothLeDevice >> future = this . bluetoothLeAdapter . findDevices ( 10 ); try { List < BluetoothLeDevice > ; devices = future . get (); } catch ( InterruptedException | ExecutionException e ) { logger . error ( \"Scan for devices failed\" , e ); }","title":"Search for BLE devices"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#get-the-gatt-services-and-characteristics","text":"To get the GATT services using the BluetoothLeDevice , use the following snippet: try { List < BluetoothLeGattService > ; services = device . findServices (); } catch ( KuraBluetoothResourceNotFoundException e ) { logger . error ( \"Unable to find GATT services\" , e ); } A specific GATT service can be retrieved using its UUID: try { BluetoothLeGattService service = device . findService ( uuid ); } catch ( KuraBluetoothResourceNotFoundException e ) { logger . error ( \"Unable to find GATT service\" , e ); } Using the GATT service, it is possible to get a specific GATT characteristic (or the complete list) and the GATT descriptor from it: try { BluetoothLeGattCharacteristic characteristic = service . findCharacteristic ( characteristicUuid ); BluetoothLeGattDescriptor descriptor = characteristic . findDescriptor ( descriptorUuid ); } catch ( KuraBluetoothResourceNotFoundException e ) { logger . error ( \"Unable to find GATT resources\" , e ); }","title":"Get the GATT services and characteristics"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#io-operations-on-gatt-characteristics-and-descriptors","text":"The Kura BLE APIs provides methods to manage the IO operations on GATT characteristics and descriptors. The following snippet provides an example on how to read and write data to a characteristic. try { byte [] valueRead = characteristic . readValue (); byte [] valueWrite = { 0x01 }; characteristic . writeValue ( valueWrite ); } catch ( KuraBluetoothIOException e ) { logger . error ( \"IO operation failed\" , e ); } In the following example, instead, a notification listener is configured to periodically receive the data from a GATT characteristic and print the first value of the given array. The period is internally set by the BLE device. try { Consumer < byte []> ; callback = valueBytes -> System . out . println (( int ) valueBytes [ 0 ] ); characteristic . enableValueNotifications ( callback ); } catch ( KuraBluetoothNotificationException e ) { logger . error (); }","title":"IO operations on GATT characteristics and descriptors"},{"location":"java-application-development/how-to-use-new-bt-le-apis/#configure-bluez-on-the-raspberry-pi","text":"The minimum version of Bluez supported by Kura Bluetooth LE APIs is 5.42. The Raspbian Stretch OS comes with Bluez 5.43, but older OS couldn't have an updated Bluez version. In this case, it is possible to compile and install Bluez from sources using a Raspberry Pi. The Bluez sources can be found here Proceed as follows: Install the packages needed for compile Bluez: sudo apt-get install libusb-dev libdbus-1-dev libglib2.0-dev libudev-dev libical-dev libreadline-dev * Download bluez-5.43.tar.xz (or newer version) from here . * Decompress the compressed archive: tar -xf bluez-5.43.tar.x Compile the sources: cd bluez-5.43 ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-library -disable-systemd --enable-experimental --enable-maintainer-mod make make install","title":"Configure Bluez on the Raspberry Pi"},{"location":"java-application-development/how-to-use-watchdog/","text":"How to use watchdog Overview When enabled, the watchdog is a peripheral monitor that will reboot the system if it is not refreshed during a certain time interval. In Kura, the WatchdogService can be used by critical applications. If the specified application is alive, the service notifies the watchdog; if the application is down, the service stops notifying the watchdog and a hardware reset occurs. The WatchdogService notifies the kernel watchdog driver using the /dev/watchdog device file. You can verify that the watchdog driver is installed using the following command: ls \u2013l /dev/watchdog Configuration To configure the WatchdogService , select the WatchdogService option located in the Services area as shown in the screen capture below. The WatchdogService provides the following configuration parameters: enabled - sets whether or not this service is enabled or disabled. If enabled, you must set a pingInterval periodicity compatible with the watchdog driver. pingInterval - specifies the time between two watchdog notifications. This time is hardware dependent. Generally, the maximum time between two notifications should be between 30 seconds and 1 minute. 10000 milliseconds for the pingInterval is typically a good choice. Code Example The WatchdogService references a list of Critical Components that correspond to the applications implementing the CriticalComponent interface. CriticalComponent is an interface that can be used to denote a component that is crucial to system operations. If a component implements CriticalComponent, then it must state its name as well as its criticalComponentTimeout . The name is a unique identifier in the system. The timeout is the length of time in milliseconds that the CriticalComponent must \"check in\" with the WatchdogService. If the CriticalComponent extends beyond the period of time specified in this timeout, a system reboot will be performed based on the WatchdogService configuration. If at least one of the registered CriticalComponents has not \"checked in\" during the pingInterval time, the WatchdogService stops notifying the watchdog driver. The system reboots when the time interval reaches the hardware time that is programmed for the watchdog. When the WatchdogService is enabled and no application is using it, the service runs silently in the background. An example of the WatchdogService can be found here . The following code snippets demonstrate how to implement the CriticalComponent interface: public class ModbusManager implements ConfigurableComponent , CriticalComponent , CloudClientListener Registration of the class in WatchdogService:: if ( m_watchdogService != null ){ m_watchdogService . registerCriticalComponent ( this ); } Periodic call to checkin method of WatchdogService in the main loop (keeps watchdog notification alive): if ( m_watchdogService != null ){ m_watchdogService . checkin ( this ); }","title":"How to Use Watchdog"},{"location":"java-application-development/how-to-use-watchdog/#how-to-use-watchdog","text":"","title":"How to use watchdog"},{"location":"java-application-development/how-to-use-watchdog/#overview","text":"When enabled, the watchdog is a peripheral monitor that will reboot the system if it is not refreshed during a certain time interval. In Kura, the WatchdogService can be used by critical applications. If the specified application is alive, the service notifies the watchdog; if the application is down, the service stops notifying the watchdog and a hardware reset occurs. The WatchdogService notifies the kernel watchdog driver using the /dev/watchdog device file. You can verify that the watchdog driver is installed using the following command: ls \u2013l /dev/watchdog","title":"Overview"},{"location":"java-application-development/how-to-use-watchdog/#configuration","text":"To configure the WatchdogService , select the WatchdogService option located in the Services area as shown in the screen capture below. The WatchdogService provides the following configuration parameters: enabled - sets whether or not this service is enabled or disabled. If enabled, you must set a pingInterval periodicity compatible with the watchdog driver. pingInterval - specifies the time between two watchdog notifications. This time is hardware dependent. Generally, the maximum time between two notifications should be between 30 seconds and 1 minute. 10000 milliseconds for the pingInterval is typically a good choice.","title":"Configuration"},{"location":"java-application-development/how-to-use-watchdog/#code-example","text":"The WatchdogService references a list of Critical Components that correspond to the applications implementing the CriticalComponent interface. CriticalComponent is an interface that can be used to denote a component that is crucial to system operations. If a component implements CriticalComponent, then it must state its name as well as its criticalComponentTimeout . The name is a unique identifier in the system. The timeout is the length of time in milliseconds that the CriticalComponent must \"check in\" with the WatchdogService. If the CriticalComponent extends beyond the period of time specified in this timeout, a system reboot will be performed based on the WatchdogService configuration. If at least one of the registered CriticalComponents has not \"checked in\" during the pingInterval time, the WatchdogService stops notifying the watchdog driver. The system reboots when the time interval reaches the hardware time that is programmed for the watchdog. When the WatchdogService is enabled and no application is using it, the service runs silently in the background. An example of the WatchdogService can be found here . The following code snippets demonstrate how to implement the CriticalComponent interface: public class ModbusManager implements ConfigurableComponent , CriticalComponent , CloudClientListener Registration of the class in WatchdogService:: if ( m_watchdogService != null ){ m_watchdogService . registerCriticalComponent ( this ); } Periodic call to checkin method of WatchdogService in the main loop (keeps watchdog notification alive): if ( m_watchdogService != null ){ m_watchdogService . checkin ( this ); }","title":"Code Example"},{"location":"java-application-development/kura-workspace-setup/","text":"Kura Workspace Setup This document describes how to set up the Eclipse Kura workspace development environment, which consists of the following components: JVM (Java JDK SE 8) Eclipse IDE Eclipse Kura Workspace This setup will allow you to develop applications or bundles running on Eclipse Kura. It will install only the APIs and the examples. If you want to contribute to the Eclipse Kura project follow this guide instead. The Eclipse Kura development environment may be installed on Windows, Linux, or Mac OS. The setup instructions will be the same across each OS though each system may have unique characteristics. Info The local emulation of Eclipse Kura code is only supported in Linux and Mac, not in Windows. JVM Installation Download and install JDK SE 8 from the following links as appropriate for your OS. For Windows and Linux users, the JDK can be downloaded from the following link: Java SE 8 Downloads . Use the latest version of the Java SE Development Kit and download the version appropriate for your system. For additional information regarding the installation of Java 8 on all supported operating systems, see JDK 8 and JRE 8 Installation Guide . Installing Eclipse IDE Before installing Eclipse, you should choose directory locations for the Eclipse install and its workspaces. Info The following points should be kept in mind regarding Eclipse installs and workspaces: The directory location of the Eclipse workspaces should be chosen carefully. Once Eclipse is installed and workspaces are created, they should never be moved to another location in the file system. There may be multiple installs of Eclipse (of different or similar versions), and single instances of each install can be run simultaneously; but there should never be more that one instance of a specific install running at the same time (to avoid corruption to the Eclipse environment). Each workspace should be used with only one Eclipse install. You should avoid opening the workspace from more than one installation of Eclipse. Download the current distribution of Eclipse for your OS from Eclipse official website . Choose the Eclipse IDE for Eclipse Committers . The zipped Eclipse file will be downloaded to the local file system and can be saved to a temporary location that can be deleted after Eclipse has been installed. After the file has been downloaded, it should be extracted to the Eclipse installs directory. The following screen capture shows the installation in Linux using an eclipse\\installs directory. The Eclipse executable will then be found in the eclipse\\installs\\eclipse directory. This installation will be different depending on the operating system. Because there may potentially be future Eclipse installs extracted into this location, before doing anything else, rename the directory, such as eclipse\\installs\\juno1\\ . Warning Once you begin using this Eclipse install, it should NOT be moved or renamed. Workspaces Creating an Eclipse Workspace Run Eclipse by clicking its executable in the install directory. When Eclipse is run for the first time, a workspace needs to be created. A single workspace will contain all the Java code/projects/bundles, Eclipse configuration parameters, and other relevant files for a specific business-level product. If the Use this as the default option is selected, the designated workspace becomes the default each time you run Eclipse. If a workspace has not already been defined, or if you are creating a different workspace for another development project, enter a new workspace name. The workspace should be named appropriate to the project/product being developed. Warning Once you begin using a particular workspace, it should NOT be moved or renamed at any time. Otherwise, select an existing workspace and click OK . After Eclipse is running, you can select the Eclipse menu File | Switch Workspace | Other to create or open a different workspace. After the new workspace opens, click the Workbench icon to display the development environment. Info Additional workspace configuration: In the Eclipse workspace modify the lifecycle mapping by adding these XML lines to the lifecycle-mapping-metadata.xml in Eclipse Kura workspace. You can find the file in the Windows -> Preferences -> Maven -> Lifecycle Mappings -> Open workspace lifecycle mappings metadata. After editing the file, reload it by pressing the \"Reload workspace lifecycle mappings metadata\" button. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <lifecycleMappingMetadata> <lifecycleMappingFilters> <lifecycleMappingFilter> <symbolicName> org.eclipse.m2e.pde.connector </symbolicName> <versionRange> [2.1.2,) </versionRange> <packagingTypes> <packagingType> eclipse-test-plugin </packagingType> <packagingType> eclipse-plugin </packagingType> <packagingType> eclipse-feature </packagingType> </packagingTypes> </lifecycleMappingFilter> </lifecycleMappingFilters> </lifecycleMappingMetadata> Install the eclipse-tycho plugin following this steps: Menu Help -> Install new software... -> Paste the m2eclipse-tycho repository URL in the Work with: text field -> expand the category and select the Tycho Project Configurators Feature and proceed with the installation. Then restart Eclipse. Importing the Eclipse Kura User Workspace To set up your Eclipse Kura project workspace, you will need to download the Eclipse Kura User Workspace archive from Eclipse Kura Download Page . From the Eclipse File menu, select the Import option. In the Import dialog box, expand the General heading, select Existing Projects into Workspace , and then click Next . Now click the Select archive file option button and browse to the archive file, such as user_workspace_archive_ .zip . Finally, click Finish to import the projects. At this point, you should have four projects in your workspace. The four projects are as follows: org.eclipse.kura.api \u2013 the core Eclipse Kura API. org.eclipse.kura.demo.heater \u2013 an example project that you can use as a starting point for creating your own bundle. org.eclipse.kura.emulator \u2013 the emulator project for running Eclipse Kura within Eclipse (Linux/Mac only). target-definition \u2013 a set of required bundles that are dependencies of the APIs and Eclipse Kura. Eclipse will also report some errors at this point. See the next section to resolve those errors. Workspace Setup This section will guide the users to configure the development workspace environment. JRE Configuration The latest Eclipse IDEs require and configure, by default, a Java 11 environment. In order to be able to leverage and develop using the new workspace for Eclipse Kura, the user will be required to perform a one-time operation to specify to the IDE a Java 8 JDK. Opening the Eclipse preferences and selecting the Installed JREs in the Java section, the user has to select an installed Java 8 instance. After applying the configuration change, the user will be prompted to align also the compiler options. To do so, selecting the Compiler entry in the Java section, the user has to select 1.8 from the list of available Java versions. After applying the changes, the user will be prompted to recompile the environment. Target Definition Setup Click the arrow next to the target-definition project in the workspace and double-click kura-equinox_ .target to open it. In the Target Definition window, click the link Set as Target Platform . Doing so will reset the target platform, rebuild the Eclipse Kura projects, and clear the errors that were reported. At this point, you are ready to begin developing Eclipse Kura-based applications for your target platform. Run the Eclipse Kura Emulator To start the Eclipse Kura emulator, select the \"Eclipse Kura Emulator.launch\" profile from \"Other Projects\" -> \"setups\" -> \"launchers\" and open it with \"Run as\" -> \"Run Configurations...\". Then click on the \"Arguments\" tab and update the \"VM arguments\" as follows to adapt the paths to the folder structure created by the Oomph installer: -Dkura.have.net.admin = false -Dorg.osgi.framework.storage = /tmp/osgi/framework_storage -Dosgi.clean = true -Dosgi.noShutdown = true -Declipse.ignoreApp = true -Dorg.eclipse.kura.mode = emulator -Dkura.configuration = file: ${ workspace_loc } /../git/kura/kura/emulator/org.eclipse.kura.emulator/src/main/resources/kura.properties -Ddpa.configuration = /tmp/kura/dpa.properties -Dlog4j.configurationFile = file: ${ workspace_loc } /../git/kura/kura/emulator/org.eclipse.kura.emulator/src/main/resources/log4j.xml -Dkura.data = ${ workspace_loc } /kura/data -Dkura.snapshots = ${ workspace_loc } /kura/user/snapshots -Dorg.eclipse.equinox.http.jetty.customizer.class = org.eclipse.kura.jetty.customizer.KuraJettyCustomizer The Eclipse Kura Web UI will be available at the following URL: http://127.0.0.1:8080 with username and password admin .","title":"Add-ons Development Environment Setup"},{"location":"java-application-development/kura-workspace-setup/#kura-workspace-setup","text":"This document describes how to set up the Eclipse Kura workspace development environment, which consists of the following components: JVM (Java JDK SE 8) Eclipse IDE Eclipse Kura Workspace This setup will allow you to develop applications or bundles running on Eclipse Kura. It will install only the APIs and the examples. If you want to contribute to the Eclipse Kura project follow this guide instead. The Eclipse Kura development environment may be installed on Windows, Linux, or Mac OS. The setup instructions will be the same across each OS though each system may have unique characteristics. Info The local emulation of Eclipse Kura code is only supported in Linux and Mac, not in Windows.","title":"Kura Workspace Setup"},{"location":"java-application-development/kura-workspace-setup/#jvm-installation","text":"Download and install JDK SE 8 from the following links as appropriate for your OS. For Windows and Linux users, the JDK can be downloaded from the following link: Java SE 8 Downloads . Use the latest version of the Java SE Development Kit and download the version appropriate for your system. For additional information regarding the installation of Java 8 on all supported operating systems, see JDK 8 and JRE 8 Installation Guide .","title":"JVM Installation"},{"location":"java-application-development/kura-workspace-setup/#installing-eclipse-ide","text":"Before installing Eclipse, you should choose directory locations for the Eclipse install and its workspaces. Info The following points should be kept in mind regarding Eclipse installs and workspaces: The directory location of the Eclipse workspaces should be chosen carefully. Once Eclipse is installed and workspaces are created, they should never be moved to another location in the file system. There may be multiple installs of Eclipse (of different or similar versions), and single instances of each install can be run simultaneously; but there should never be more that one instance of a specific install running at the same time (to avoid corruption to the Eclipse environment). Each workspace should be used with only one Eclipse install. You should avoid opening the workspace from more than one installation of Eclipse. Download the current distribution of Eclipse for your OS from Eclipse official website . Choose the Eclipse IDE for Eclipse Committers . The zipped Eclipse file will be downloaded to the local file system and can be saved to a temporary location that can be deleted after Eclipse has been installed. After the file has been downloaded, it should be extracted to the Eclipse installs directory. The following screen capture shows the installation in Linux using an eclipse\\installs directory. The Eclipse executable will then be found in the eclipse\\installs\\eclipse directory. This installation will be different depending on the operating system. Because there may potentially be future Eclipse installs extracted into this location, before doing anything else, rename the directory, such as eclipse\\installs\\juno1\\ . Warning Once you begin using this Eclipse install, it should NOT be moved or renamed.","title":"Installing Eclipse IDE"},{"location":"java-application-development/kura-workspace-setup/#workspaces","text":"","title":"Workspaces"},{"location":"java-application-development/kura-workspace-setup/#creating-an-eclipse-workspace","text":"Run Eclipse by clicking its executable in the install directory. When Eclipse is run for the first time, a workspace needs to be created. A single workspace will contain all the Java code/projects/bundles, Eclipse configuration parameters, and other relevant files for a specific business-level product. If the Use this as the default option is selected, the designated workspace becomes the default each time you run Eclipse. If a workspace has not already been defined, or if you are creating a different workspace for another development project, enter a new workspace name. The workspace should be named appropriate to the project/product being developed. Warning Once you begin using a particular workspace, it should NOT be moved or renamed at any time. Otherwise, select an existing workspace and click OK . After Eclipse is running, you can select the Eclipse menu File | Switch Workspace | Other to create or open a different workspace. After the new workspace opens, click the Workbench icon to display the development environment. Info Additional workspace configuration: In the Eclipse workspace modify the lifecycle mapping by adding these XML lines to the lifecycle-mapping-metadata.xml in Eclipse Kura workspace. You can find the file in the Windows -> Preferences -> Maven -> Lifecycle Mappings -> Open workspace lifecycle mappings metadata. After editing the file, reload it by pressing the \"Reload workspace lifecycle mappings metadata\" button. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <lifecycleMappingMetadata> <lifecycleMappingFilters> <lifecycleMappingFilter> <symbolicName> org.eclipse.m2e.pde.connector </symbolicName> <versionRange> [2.1.2,) </versionRange> <packagingTypes> <packagingType> eclipse-test-plugin </packagingType> <packagingType> eclipse-plugin </packagingType> <packagingType> eclipse-feature </packagingType> </packagingTypes> </lifecycleMappingFilter> </lifecycleMappingFilters> </lifecycleMappingMetadata> Install the eclipse-tycho plugin following this steps: Menu Help -> Install new software... -> Paste the m2eclipse-tycho repository URL in the Work with: text field -> expand the category and select the Tycho Project Configurators Feature and proceed with the installation. Then restart Eclipse.","title":"Creating an Eclipse Workspace"},{"location":"java-application-development/kura-workspace-setup/#importing-the-eclipse-kura-user-workspace","text":"To set up your Eclipse Kura project workspace, you will need to download the Eclipse Kura User Workspace archive from Eclipse Kura Download Page . From the Eclipse File menu, select the Import option. In the Import dialog box, expand the General heading, select Existing Projects into Workspace , and then click Next . Now click the Select archive file option button and browse to the archive file, such as user_workspace_archive_ .zip . Finally, click Finish to import the projects. At this point, you should have four projects in your workspace. The four projects are as follows: org.eclipse.kura.api \u2013 the core Eclipse Kura API. org.eclipse.kura.demo.heater \u2013 an example project that you can use as a starting point for creating your own bundle. org.eclipse.kura.emulator \u2013 the emulator project for running Eclipse Kura within Eclipse (Linux/Mac only). target-definition \u2013 a set of required bundles that are dependencies of the APIs and Eclipse Kura. Eclipse will also report some errors at this point. See the next section to resolve those errors.","title":"Importing the Eclipse Kura User Workspace"},{"location":"java-application-development/kura-workspace-setup/#workspace-setup","text":"This section will guide the users to configure the development workspace environment.","title":"Workspace Setup"},{"location":"java-application-development/kura-workspace-setup/#jre-configuration","text":"The latest Eclipse IDEs require and configure, by default, a Java 11 environment. In order to be able to leverage and develop using the new workspace for Eclipse Kura, the user will be required to perform a one-time operation to specify to the IDE a Java 8 JDK. Opening the Eclipse preferences and selecting the Installed JREs in the Java section, the user has to select an installed Java 8 instance. After applying the configuration change, the user will be prompted to align also the compiler options. To do so, selecting the Compiler entry in the Java section, the user has to select 1.8 from the list of available Java versions. After applying the changes, the user will be prompted to recompile the environment.","title":"JRE Configuration"},{"location":"java-application-development/kura-workspace-setup/#target-definition-setup","text":"Click the arrow next to the target-definition project in the workspace and double-click kura-equinox_ .target to open it. In the Target Definition window, click the link Set as Target Platform . Doing so will reset the target platform, rebuild the Eclipse Kura projects, and clear the errors that were reported. At this point, you are ready to begin developing Eclipse Kura-based applications for your target platform.","title":"Target Definition Setup"},{"location":"java-application-development/kura-workspace-setup/#run-the-eclipse-kura-emulator","text":"To start the Eclipse Kura emulator, select the \"Eclipse Kura Emulator.launch\" profile from \"Other Projects\" -> \"setups\" -> \"launchers\" and open it with \"Run as\" -> \"Run Configurations...\". Then click on the \"Arguments\" tab and update the \"VM arguments\" as follows to adapt the paths to the folder structure created by the Oomph installer: -Dkura.have.net.admin = false -Dorg.osgi.framework.storage = /tmp/osgi/framework_storage -Dosgi.clean = true -Dosgi.noShutdown = true -Declipse.ignoreApp = true -Dorg.eclipse.kura.mode = emulator -Dkura.configuration = file: ${ workspace_loc } /../git/kura/kura/emulator/org.eclipse.kura.emulator/src/main/resources/kura.properties -Ddpa.configuration = /tmp/kura/dpa.properties -Dlog4j.configurationFile = file: ${ workspace_loc } /../git/kura/kura/emulator/org.eclipse.kura.emulator/src/main/resources/log4j.xml -Dkura.data = ${ workspace_loc } /kura/data -Dkura.snapshots = ${ workspace_loc } /kura/user/snapshots -Dorg.eclipse.equinox.http.jetty.customizer.class = org.eclipse.kura.jetty.customizer.KuraJettyCustomizer The Eclipse Kura Web UI will be available at the following URL: http://127.0.0.1:8080 with username and password admin .","title":"Run the Eclipse Kura Emulator"},{"location":"java-application-development/ram-usage-considerations/","text":"RAM Usage Considerations During application development and before moving to production, it is advisable to understand if the amount of free RAM available on the device is enough for correct device operation. Since RAM usage is application dependent, it is important to perform some stress tests to bring the device in the worst case conditions and verify system behavior. Some of the aspects that should be taken into account are the following: Java Heap memory usage Java heap is used to store the Java objects and classes at runtime. The heap should be: Large enough to satisfy the requirements of applications running inside Kura. Small enough so that the requirements of the system and applications running outside Kura are satisfied. The size of the heap is controlled by the -Xms and -Xmx Java command line arguments. These parameters are defined in the /opt/eclipse/kura/bin/start_kura_debug.sh (for development mode) and /opt/eclipse/kura/bin/start_kura_background.sh (for production mode). The -Xms parameter defines the initial size of Java heap and -Xmx defines the maximum size. The JVM will start using Xms as the size of the heap, and then it will grow the heap at runtime up to Xmx if needed, depending on application memory demand. Resizing the heap has a cost in terms of performance, for this reason Xms and Xmx are set to the same size by default on most platforms. In order to understand if the heap is large enough, it is advisable to perform a stress test simulating the conditions of maximum memory demand by the applications running inside Kura. For example, if a in-memory database instance is used by a DataService instance, during the test the database can be filled up to the maximum capacity to verify if this causes any issue. Regarding point 2., it should be noted that heap memory is not necessarily backed by physical memory immediately after JVM startup. Even if the JVM performs an allocation of size Xmx immediately, physical memory will be assigned to the Java process by the kernel only when the memory pages are actually accessed by the JVM. For this reason the amount of physical memory used by the JVM might appear small right after system boot and grow with time, up to the maximum size. This can happen even if the applications running inside Kura do not have high memory requirements, and can lead to potential issues that show up only after some time. In order to recreate such issues, the -XX:+AlwaysPreTouch JVM command line option can be used during development to force the JVM to access all heap memory after start, causing the JVM process to use the maximum amount of physical memory immediately. Logging Another aspect that can lead to RAM related issues is logging. As a general rule, it is recommended to reduce the amount of log messages produced by Kura during normal operation. Kura default logging configuration ( /opt/eclipse/kura/log4j/log4j.xml ) depends on the platform. The size of the files in the /var/log directory will be checked periodically and the files will be rotated to the persisted /var/old_logs directory if needed. External application RAM usage If external applications are installed on the system (e.g. Docker containers), their RAM usage should be analyzed as well. Stress tests related to Java heap size, log size and external applications can be run simultaneously to simulate a worst case scenario.","title":"RAM Usage Considerations"},{"location":"java-application-development/ram-usage-considerations/#ram-usage-considerations","text":"During application development and before moving to production, it is advisable to understand if the amount of free RAM available on the device is enough for correct device operation. Since RAM usage is application dependent, it is important to perform some stress tests to bring the device in the worst case conditions and verify system behavior. Some of the aspects that should be taken into account are the following:","title":"RAM Usage Considerations"},{"location":"java-application-development/ram-usage-considerations/#java-heap-memory-usage","text":"Java heap is used to store the Java objects and classes at runtime. The heap should be: Large enough to satisfy the requirements of applications running inside Kura. Small enough so that the requirements of the system and applications running outside Kura are satisfied. The size of the heap is controlled by the -Xms and -Xmx Java command line arguments. These parameters are defined in the /opt/eclipse/kura/bin/start_kura_debug.sh (for development mode) and /opt/eclipse/kura/bin/start_kura_background.sh (for production mode). The -Xms parameter defines the initial size of Java heap and -Xmx defines the maximum size. The JVM will start using Xms as the size of the heap, and then it will grow the heap at runtime up to Xmx if needed, depending on application memory demand. Resizing the heap has a cost in terms of performance, for this reason Xms and Xmx are set to the same size by default on most platforms. In order to understand if the heap is large enough, it is advisable to perform a stress test simulating the conditions of maximum memory demand by the applications running inside Kura. For example, if a in-memory database instance is used by a DataService instance, during the test the database can be filled up to the maximum capacity to verify if this causes any issue. Regarding point 2., it should be noted that heap memory is not necessarily backed by physical memory immediately after JVM startup. Even if the JVM performs an allocation of size Xmx immediately, physical memory will be assigned to the Java process by the kernel only when the memory pages are actually accessed by the JVM. For this reason the amount of physical memory used by the JVM might appear small right after system boot and grow with time, up to the maximum size. This can happen even if the applications running inside Kura do not have high memory requirements, and can lead to potential issues that show up only after some time. In order to recreate such issues, the -XX:+AlwaysPreTouch JVM command line option can be used during development to force the JVM to access all heap memory after start, causing the JVM process to use the maximum amount of physical memory immediately.","title":"Java Heap memory usage"},{"location":"java-application-development/ram-usage-considerations/#logging","text":"Another aspect that can lead to RAM related issues is logging. As a general rule, it is recommended to reduce the amount of log messages produced by Kura during normal operation. Kura default logging configuration ( /opt/eclipse/kura/log4j/log4j.xml ) depends on the platform. The size of the files in the /var/log directory will be checked periodically and the files will be rotated to the persisted /var/old_logs directory if needed.","title":"Logging"},{"location":"java-application-development/ram-usage-considerations/#external-application-ram-usage","text":"If external applications are installed on the system (e.g. Docker containers), their RAM usage should be analyzed as well. Stress tests related to Java heap size, log size and external applications can be run simultaneously to simulate a worst case scenario.","title":"External application RAM usage"},{"location":"java-application-development/remote-debugging-on-target-platform/","text":"Remote debugging on target platform Eclipse Kura can be started with Java Debug Wire Protocol (JDWP) support, allowing the remote debugging of the developed application using Eclipse IDE. The procedure for remote debugging is presented in the following. Connect to the target platform (i.e. RaspberryPi) and stop the Kura application typing sudo systemctl stop kura or sudo /etc/init.d/kura stop . Start Kura with Java Debug Wire Protocol (JDWP) typing sudo /opt/eclipse/kura/bin/start_kura_debug.sh . This will start Kura and open an OSGi console. It will also start listening for socket connections on port 8000. Warning Starting from Java 9, the JDWP socket connector accepts only local connections by default (see here for further details). To enable remote debugging on Java 9, the following line in /opt/eclipse/kura/bin/start_kura_debug.sh : -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=8000,suspend=n \\ has to be replaced with the following one: -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address= *: 8000,suspend=n \\ Open the tcp port 8000 in the firewall. This can be done through the firewall tab in Kura web interface or using iptables. Install your application bundle on the target platform. From Eclipse IDE, set a breakpoint in the application code at a point that will be reached (i.e. activation method, common logging statement, etc.). Then: Go to \"Run -> Debug Configurations\u2026\" Select \u201cRemote Java Application\u201d and click the \u201cNew launch configuration\u201d button For \u201cProject:\u201d, select the bundle project to be debugged For \u201cConnection Type:\u201d, select the default \u201cStandard (Socket Attach)\u201d For \u201cConnection Properties:\u201d, enter the IP address of the target platform and the tcp port 8000 Click Debug Eclipse will connect to the target platform VM and switch to the Debug Perspective when the breakpoint will have been hit. To stop the remote debugging, select the \u201cDisconnect\u201d button from the Debug Perspective.","title":"Remote Debugging on Target Platform"},{"location":"java-application-development/remote-debugging-on-target-platform/#remote-debugging-on-target-platform","text":"Eclipse Kura can be started with Java Debug Wire Protocol (JDWP) support, allowing the remote debugging of the developed application using Eclipse IDE. The procedure for remote debugging is presented in the following. Connect to the target platform (i.e. RaspberryPi) and stop the Kura application typing sudo systemctl stop kura or sudo /etc/init.d/kura stop . Start Kura with Java Debug Wire Protocol (JDWP) typing sudo /opt/eclipse/kura/bin/start_kura_debug.sh . This will start Kura and open an OSGi console. It will also start listening for socket connections on port 8000. Warning Starting from Java 9, the JDWP socket connector accepts only local connections by default (see here for further details). To enable remote debugging on Java 9, the following line in /opt/eclipse/kura/bin/start_kura_debug.sh : -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=8000,suspend=n \\ has to be replaced with the following one: -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address= *: 8000,suspend=n \\ Open the tcp port 8000 in the firewall. This can be done through the firewall tab in Kura web interface or using iptables. Install your application bundle on the target platform. From Eclipse IDE, set a breakpoint in the application code at a point that will be reached (i.e. activation method, common logging statement, etc.). Then: Go to \"Run -> Debug Configurations\u2026\" Select \u201cRemote Java Application\u201d and click the \u201cNew launch configuration\u201d button For \u201cProject:\u201d, select the bundle project to be debugged For \u201cConnection Type:\u201d, select the default \u201cStandard (Socket Attach)\u201d For \u201cConnection Properties:\u201d, enter the IP address of the target platform and the tcp port 8000 Click Debug Eclipse will connect to the target platform VM and switch to the Debug Perspective when the breakpoint will have been hit. To stop the remote debugging, select the \u201cDisconnect\u201d button from the Debug Perspective.","title":"Remote debugging on target platform"},{"location":"kura-wires/assets-as-wire-components/","text":"Assets as Wire Components An Asset can be used inside a Wire Graph, in this case it is represented as node with two ports an input port and an output port. An Asset used in this way is called WireAsset . Read mode Every time a WireAsset receives an envelope on its input port, it will read the values of all of its channels with READ or READ_WRITE type. The result is emitted as a WireEnvelope with a single WireRecord. The WireRecord contains the following properties: a property with key assetName , value type STRING and the emitting asset asset name as value For each channel in asset configuration with READ or READ_WRITE type named name : a property with key = name , value type = value.type in channel configuration and value = value obtained from read operation. This property will be present only if the read operation is successful. a property with key = <name>_timestamp value type = LONG reporting a timestamp in milliseconds since UNIX epoch. This property will be present only if the timestamp.mode Asset configuration property is set to PER_CHANNEL a property with key = <name>_error , value type = STRING reporting an error message. This property will be present only if read operation fails and the emit.errors Asset configuration property is set to true. For example, if the Asset attached to the Modbus Driver shown in the picture below receives a WireEnvelope on its input port, it can emit an envelope with the following content, assuming that the read operation for each channel succeed: WireEnvelope WireRecord[0] assetName : modbusAsset (type = STRING ) LED1 : true (type = BOOLEAN ) LED1_timestamp : 1597925188 (type = LONG ) LED2 : false (type = BOOLEAN ) LED2_timestamp : 1597925188 (type = LONG ) LED3 : true (type = BOOLEAN ) LED3_timestamp : 1597925188 (type = LONG ) LED4-RED : false (type = BOOLEAN ) LED4-RED_timestamp : 1597925188 (type = LONG ) LED4-GREEN : false (type = BOOLEAN ) LED4-GREEN_timestamp : 1597925188 (type = LONG ) LED4-BLUE : true (type = BOOLEAN ) LED4-BLUE_timestamp : 1597925188 (type = LONG ) Toggle-4 : true (type = BOOLEAN ) Toggle-4_timestamp : 1597925188 (type = LONG ) Toggle-5 : false (type = BOOLEAN ) Toggle-5_timestamp : 1597925188 (type = LONG ) Toggle-6 : true (type = BOOLEAN ) Toggle-6_timestamp : 1597925188 (type = LONG ) Counter-3 : 123 (type = INTEGER ) Counter-3_timestamp : 1597925188 (type = LONG ) Quad-Counter : 11 (type = INTEGER ) Quad-Counter_timestamp : 1597925188 (type = LONG ) Reset-Counter3 : false (type = BOOLEAN ) Reset-Counter3_timestamp : 1597925188 (type = LONG ) Reset-Quad-Counter : false (type = BOOLEAN ) Reset-Quad-Counter_timestamp : 1597925188 (type = LONG ) The emitted WireEnvelope contains a single record containing the properties described above. The Logger WireComponent can be used to inspect the messages emitted on a specific output port of a WireComponent by creating a connection between the output port of the component to the input port of the Logger. In this case the content of the received envelopes will be printed on device log ( /var/log/kura.log ). As mentioned above, the read operation is performed only if an envelope is received on the input port of the WireAsset. In order to achieve this, another component must be connected to the input port of the WireAsset. An example of such component can be the Timer , this component can be configured to periodically emit an envelope containing a single wire record with a single property named TIMER reporting the current UNIX timestamp. Connecting this component to a WireAsset allows to implement a simple read polling cycle. The configuration of the timer defines the polling interval. Listen mode Enabling the listen flag allows to enable unsolicited notifications from the driver. When this happens, the Asset will emit an WireEnvelope containing the updated value for the channel involved in the event. The content of this envelope is the same as the one generated in case of a read operation on the channel. For example if listen is ticked for LED1 and the driver above detects a value change in that channel, the Asset will emit the following envelope: WireEnvelope WireRecord[0] assetName : modbusAsset (type = STRING ) LED1 : false (type = BOOLEAN ) LED1_timestamp : 1597925200 (type = LONG ) This mode does not require to connect any component to the input port of the driver. The conditions that trigger the events for the channels and their meaning is reported in the Driver specific documentation. Note: The example above is not completely realistic since the Modbus driver does not support listen mode. In this case ticking the listen flag will have no effect. The support for listen mode is mentioned in driver documentation. Listen mode and Read mode are not mutually exclusive. If a channel is defined as READ or READ_WRITE and the listen flag is ticked, the driver will emit the channel value when a WireEnvelope is received on its input port or when a driver event is generated. Write mode Additionally, the Wire Graph can also be used to update asset values through write operations, according to the following rule. Every time a WireAsset receives an envelope on its input port, for each property contained in the received WireRecords with key <key> , value type <value type> and value <value> , the driver will perform this operation: If a channel with name <key> is defined in asset configuration whose value.type is equal to <value type> and type is WRITE or READ_WRITE , then the Asset will write <value> to the channel. For example if the Asset above receives the following envelope: WireEnvelope WireRecord[0] LED1 : false (type = BOOLEAN ) LED2 : 78 (type = LONG ) Toggle-4 : true (type = BOOLEAN ) foo : bar (type = STRING ) The following operations will happen: Since the Asset configuration contains a channel named LED1 , with value.type = BOOLEAN , and type = READ_WRITE , the driver will write false to that channel for the rule mentioned above. The LED2 : 78 property will have no effect, since the Asset configuration contains a channel named LED2 with type = READ_WRITE , but value.type = BOOLEAN != LONG . The Toggle-4 : true property will have no effect, since the asset contains a channel named Toggle-4 , with value.type = BOOLEAN but type = READ != WRITE | READ_WRITE The foo : bar property will have no effect, since none of the defined channels has foo as name . The Asset will read and emit all of the channel values with type = READ or READ_WRITE , since a WireEnvelope has been received.","title":"Assets as Wire Components"},{"location":"kura-wires/assets-as-wire-components/#assets-as-wire-components","text":"An Asset can be used inside a Wire Graph, in this case it is represented as node with two ports an input port and an output port. An Asset used in this way is called WireAsset .","title":"Assets as Wire Components"},{"location":"kura-wires/assets-as-wire-components/#read-mode","text":"Every time a WireAsset receives an envelope on its input port, it will read the values of all of its channels with READ or READ_WRITE type. The result is emitted as a WireEnvelope with a single WireRecord. The WireRecord contains the following properties: a property with key assetName , value type STRING and the emitting asset asset name as value For each channel in asset configuration with READ or READ_WRITE type named name : a property with key = name , value type = value.type in channel configuration and value = value obtained from read operation. This property will be present only if the read operation is successful. a property with key = <name>_timestamp value type = LONG reporting a timestamp in milliseconds since UNIX epoch. This property will be present only if the timestamp.mode Asset configuration property is set to PER_CHANNEL a property with key = <name>_error , value type = STRING reporting an error message. This property will be present only if read operation fails and the emit.errors Asset configuration property is set to true. For example, if the Asset attached to the Modbus Driver shown in the picture below receives a WireEnvelope on its input port, it can emit an envelope with the following content, assuming that the read operation for each channel succeed: WireEnvelope WireRecord[0] assetName : modbusAsset (type = STRING ) LED1 : true (type = BOOLEAN ) LED1_timestamp : 1597925188 (type = LONG ) LED2 : false (type = BOOLEAN ) LED2_timestamp : 1597925188 (type = LONG ) LED3 : true (type = BOOLEAN ) LED3_timestamp : 1597925188 (type = LONG ) LED4-RED : false (type = BOOLEAN ) LED4-RED_timestamp : 1597925188 (type = LONG ) LED4-GREEN : false (type = BOOLEAN ) LED4-GREEN_timestamp : 1597925188 (type = LONG ) LED4-BLUE : true (type = BOOLEAN ) LED4-BLUE_timestamp : 1597925188 (type = LONG ) Toggle-4 : true (type = BOOLEAN ) Toggle-4_timestamp : 1597925188 (type = LONG ) Toggle-5 : false (type = BOOLEAN ) Toggle-5_timestamp : 1597925188 (type = LONG ) Toggle-6 : true (type = BOOLEAN ) Toggle-6_timestamp : 1597925188 (type = LONG ) Counter-3 : 123 (type = INTEGER ) Counter-3_timestamp : 1597925188 (type = LONG ) Quad-Counter : 11 (type = INTEGER ) Quad-Counter_timestamp : 1597925188 (type = LONG ) Reset-Counter3 : false (type = BOOLEAN ) Reset-Counter3_timestamp : 1597925188 (type = LONG ) Reset-Quad-Counter : false (type = BOOLEAN ) Reset-Quad-Counter_timestamp : 1597925188 (type = LONG ) The emitted WireEnvelope contains a single record containing the properties described above. The Logger WireComponent can be used to inspect the messages emitted on a specific output port of a WireComponent by creating a connection between the output port of the component to the input port of the Logger. In this case the content of the received envelopes will be printed on device log ( /var/log/kura.log ). As mentioned above, the read operation is performed only if an envelope is received on the input port of the WireAsset. In order to achieve this, another component must be connected to the input port of the WireAsset. An example of such component can be the Timer , this component can be configured to periodically emit an envelope containing a single wire record with a single property named TIMER reporting the current UNIX timestamp. Connecting this component to a WireAsset allows to implement a simple read polling cycle. The configuration of the timer defines the polling interval.","title":"Read mode"},{"location":"kura-wires/assets-as-wire-components/#listen-mode","text":"Enabling the listen flag allows to enable unsolicited notifications from the driver. When this happens, the Asset will emit an WireEnvelope containing the updated value for the channel involved in the event. The content of this envelope is the same as the one generated in case of a read operation on the channel. For example if listen is ticked for LED1 and the driver above detects a value change in that channel, the Asset will emit the following envelope: WireEnvelope WireRecord[0] assetName : modbusAsset (type = STRING ) LED1 : false (type = BOOLEAN ) LED1_timestamp : 1597925200 (type = LONG ) This mode does not require to connect any component to the input port of the driver. The conditions that trigger the events for the channels and their meaning is reported in the Driver specific documentation. Note: The example above is not completely realistic since the Modbus driver does not support listen mode. In this case ticking the listen flag will have no effect. The support for listen mode is mentioned in driver documentation. Listen mode and Read mode are not mutually exclusive. If a channel is defined as READ or READ_WRITE and the listen flag is ticked, the driver will emit the channel value when a WireEnvelope is received on its input port or when a driver event is generated.","title":"Listen mode"},{"location":"kura-wires/assets-as-wire-components/#write-mode","text":"Additionally, the Wire Graph can also be used to update asset values through write operations, according to the following rule. Every time a WireAsset receives an envelope on its input port, for each property contained in the received WireRecords with key <key> , value type <value type> and value <value> , the driver will perform this operation: If a channel with name <key> is defined in asset configuration whose value.type is equal to <value type> and type is WRITE or READ_WRITE , then the Asset will write <value> to the channel. For example if the Asset above receives the following envelope: WireEnvelope WireRecord[0] LED1 : false (type = BOOLEAN ) LED2 : 78 (type = LONG ) Toggle-4 : true (type = BOOLEAN ) foo : bar (type = STRING ) The following operations will happen: Since the Asset configuration contains a channel named LED1 , with value.type = BOOLEAN , and type = READ_WRITE , the driver will write false to that channel for the rule mentioned above. The LED2 : 78 property will have no effect, since the Asset configuration contains a channel named LED2 with type = READ_WRITE , but value.type = BOOLEAN != LONG . The Toggle-4 : true property will have no effect, since the asset contains a channel named Toggle-4 , with value.type = BOOLEAN but type = READ != WRITE | READ_WRITE The foo : bar property will have no effect, since none of the defined channels has foo as name . The Asset will read and emit all of the channel values with type = READ or READ_WRITE , since a WireEnvelope has been received.","title":"Write mode"},{"location":"kura-wires/introduction/","text":"Introduction The Wires feature aims to simplify the development of IoT Edge Computing Applications leveraging reusable configurable components that can be wired together and which, eventually, allows configurable cooperation between these components. In the dataflow programming model, the application logic is expressed as a directed graph (flow) where each node can have inputs, outputs, and independent processing units. There are nodes that only produce outputs and ones that only consume inputs, which usually represent the start and the end of the flow. The inner-graph nodes process the inputs and produce outputs for downstream nodes. The processing unit of a node executes independently and does not affect the execution of other nodes. Thus, the nodes are highly reusable and portable. In this way, the developer can easily prototype its solution without sacrificing flexibility and working at a high level of abstraction: the graph can be extended adding new nodes or drawing new connections. Furthermore, the developer can take advantage of the Eclipse Marketplace integration, being able to use open source or commercial building blocks into the final solution, by simply dragging and dropping a link to the Eclipse Marketplace in the Administrative Web UI. Data Model The communication over a single graph edge ( Wire ) is message oriented, messages are called WireEnvelope s. Each WireEnvelope contains a list of WireRecords . Each WireRecord contains a set of key-value pairs, called properties, the property key is always a string and it is unique within the same record, the property value can have one of the following types: BOOLEAN BYTE_ARRAY DOUBLE INTEGER LONG FLOAT STRING Wire Composer The Wire Composer is the main source of interaction with the Wires framework. It is accessible by clicking on the Wires button under System . The Wires page is composed by a central composer, where the graph can be actually designed, a lower part that is populated when a wire component is clicked and that allows to update the component configuration and a section in the right with the available Wire Components. Wire Components The following components are distributed with Kura: Timer ticks every x seconds and starts the graph; Publisher publishes every message received from a Wire (Wire Message). It is configurable in order to use a specific Cloud Service; Subscriber subscribes to a configurable topic via a specific Cloud Service. It receives a message from a Cloud Platform, wraps it as a Wire Message and sends it through the connected wires to the other components that are part of the Wire Graph; Wire Record Store allows the storage of Wire Messages into a specific stored collection. It has rules for message cleanup and retention; Wire Record Query , allows the filtering of messages residing in a store via a specific query. The corresponding messages are sent as Wire Messages to the connected Wire Components; Logger logs the received messages; Asset \u200ballows the definition of Wire Channels that will be used to communicate with a field device through the associated Driver instance. Graph Download In the top left part of the Wires page the Download button allows to download the configuration of the graph and of all the components that are part of the graph. This snapshot can be used to replicate the same configuration across all the fleet of devices. To upload the stored graph, the user has to access the Settings page and in the Snapshots section click the Upload and Apply button. Warning The graph configuration will be actually merged with the one existing. Be careful to Delete the existing graph and apply, if you don't want to merge with the existing Wires configuration.","title":"Introduction"},{"location":"kura-wires/introduction/#introduction","text":"The Wires feature aims to simplify the development of IoT Edge Computing Applications leveraging reusable configurable components that can be wired together and which, eventually, allows configurable cooperation between these components. In the dataflow programming model, the application logic is expressed as a directed graph (flow) where each node can have inputs, outputs, and independent processing units. There are nodes that only produce outputs and ones that only consume inputs, which usually represent the start and the end of the flow. The inner-graph nodes process the inputs and produce outputs for downstream nodes. The processing unit of a node executes independently and does not affect the execution of other nodes. Thus, the nodes are highly reusable and portable. In this way, the developer can easily prototype its solution without sacrificing flexibility and working at a high level of abstraction: the graph can be extended adding new nodes or drawing new connections. Furthermore, the developer can take advantage of the Eclipse Marketplace integration, being able to use open source or commercial building blocks into the final solution, by simply dragging and dropping a link to the Eclipse Marketplace in the Administrative Web UI.","title":"Introduction"},{"location":"kura-wires/introduction/#data-model","text":"The communication over a single graph edge ( Wire ) is message oriented, messages are called WireEnvelope s. Each WireEnvelope contains a list of WireRecords . Each WireRecord contains a set of key-value pairs, called properties, the property key is always a string and it is unique within the same record, the property value can have one of the following types: BOOLEAN BYTE_ARRAY DOUBLE INTEGER LONG FLOAT STRING","title":"Data Model"},{"location":"kura-wires/introduction/#wire-composer","text":"The Wire Composer is the main source of interaction with the Wires framework. It is accessible by clicking on the Wires button under System . The Wires page is composed by a central composer, where the graph can be actually designed, a lower part that is populated when a wire component is clicked and that allows to update the component configuration and a section in the right with the available Wire Components.","title":"Wire Composer"},{"location":"kura-wires/introduction/#wire-components","text":"The following components are distributed with Kura: Timer ticks every x seconds and starts the graph; Publisher publishes every message received from a Wire (Wire Message). It is configurable in order to use a specific Cloud Service; Subscriber subscribes to a configurable topic via a specific Cloud Service. It receives a message from a Cloud Platform, wraps it as a Wire Message and sends it through the connected wires to the other components that are part of the Wire Graph; Wire Record Store allows the storage of Wire Messages into a specific stored collection. It has rules for message cleanup and retention; Wire Record Query , allows the filtering of messages residing in a store via a specific query. The corresponding messages are sent as Wire Messages to the connected Wire Components; Logger logs the received messages; Asset \u200ballows the definition of Wire Channels that will be used to communicate with a field device through the associated Driver instance.","title":"Wire Components"},{"location":"kura-wires/introduction/#graph-download","text":"In the top left part of the Wires page the Download button allows to download the configuration of the graph and of all the components that are part of the graph. This snapshot can be used to replicate the same configuration across all the fleet of devices. To upload the stored graph, the user has to access the Settings page and in the Snapshots section click the Upload and Apply button. Warning The graph configuration will be actually merged with the one existing. Be careful to Delete the existing graph and apply, if you don't want to merge with the existing Wires configuration.","title":"Graph Download"},{"location":"kura-wires/wire-graph-service-configuration-format/","text":"WireGraphService Configuration Format This document describes the configuration format for the WireGraphService component. The WireGraphService configuration contains all the information related to the Wire Graph topology and rendering properties. The pid of the WireGraphService configuration is org.eclipse.kura.wire.graph.WireGraphService . The WireGraphService configuration represents the current graph layout as a single string typed property named WireGraph that represents a serialized JSON representation of a WireGraph object. JSON definitions Position An object representing a Wire Component position. Properties : x : number optional If not specified, 0.0 will be used as default value The x coordinate of the Wire Component inside the graph canvas y : number optional If not specified, 0.0 will be used as default value The y coordinate of the Wire Component inside the graph canvas { \"x\" : 40 , \"y\" : 0 } { \"x\" : 1.5 } {} PortNameList An object that specifies custom names for Wire Component input and output ports. The properties name for this object must be represented as an integer starting from 0, matching the index of the port whose name needs to be assigned. If the property name is not specified, the default port name will be used. Properties : _portIndex : string The name for the port of index _portIndex { \"0\" : \"foo\" , \"1\" : \"bar\" } {} RenderingProperties An object describing some Wire Component rendering parameters like position and custom port names. Properties : position : object optional If not specified the component coordinates will be set to 0.0. Position inputPortNames : object optional If not specified, the default input port names will be used. PortNameList outputPortNames : object optional If not specified, the default output port names will be used. PortNameList { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" }, \"position\" : { \"x\" : 40 , \"y\" : 0 } } { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" } } { \"position\" : { \"x\" : 40 , \"y\" : 0 } } {} WireComponent An object that describes a Wire Component that is part of a Wire Graph Properties : pid : string The Wire Component pid inputPortCount : number An integer reporting the number of input ports of the Wire Component. outputPortCount : number An integer reporting the number of output ports of the Wire Component. renderingProperties : object optional If not specified, the default rendering properties will be used RenderingProperties { \"inputPortCount\" : 1 , \"outputPortCount\" : 2 , \"pid\" : \"cond\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" }, \"position\" : { \"x\" : 40 , \"y\" : 0 } } } { \"inputPortCount\" : 0 , \"outputPortCount\" : 1 , \"pid\" : \"timer\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : {}, \"position\" : { \"x\" : -220 , \"y\" : -20 } } } Wire An object that describes a Wire connecting two Wire Components. Properties : emitter : string The pid of the emitter component. emitterPort : number The index of the output port of the emitter component that is connected to this Wire. receiver : string The pid of the receiver component. receiverPort : number The index of the input port of the receiver component that is connected to this Wire. { \"emitter\" : \"timer\" , \"emitterPort\" : 0 , \"receiver\" : \"cond\" , \"receiverPort\" : 0 } WireGraph An object that describes the topology and rendering properties of a Wire Graph Properties : components : array The list of the wire components contained in the Wire Graph array elements: object WireComponent wires : array The list of Wires contained in the Wire Graph array elements: object Wire { \"components\" : [ { \"inputPortCount\" : 0 , \"outputPortCount\" : 1 , \"pid\" : \"timer\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : {}, \"position\" : { \"x\" : -220 , \"y\" : -20 } } }, { \"inputPortCount\" : 1 , \"outputPortCount\" : 2 , \"pid\" : \"cond\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" }, \"position\" : { \"x\" : 40 , \"y\" : 0 } } } ], \"wires\" : [ { \"emitter\" : \"timer\" , \"emitterPort\" : 0 , \"receiver\" : \"cond\" , \"receiverPort\" : 0 } ] }","title":"WireGraphService Configuration Format"},{"location":"kura-wires/wire-graph-service-configuration-format/#wiregraphservice-configuration-format","text":"This document describes the configuration format for the WireGraphService component. The WireGraphService configuration contains all the information related to the Wire Graph topology and rendering properties. The pid of the WireGraphService configuration is org.eclipse.kura.wire.graph.WireGraphService . The WireGraphService configuration represents the current graph layout as a single string typed property named WireGraph that represents a serialized JSON representation of a WireGraph object.","title":"WireGraphService Configuration Format"},{"location":"kura-wires/wire-graph-service-configuration-format/#json-definitions","text":"","title":"JSON definitions"},{"location":"kura-wires/wire-graph-service-configuration-format/#position","text":"An object representing a Wire Component position. Properties : x : number optional If not specified, 0.0 will be used as default value The x coordinate of the Wire Component inside the graph canvas y : number optional If not specified, 0.0 will be used as default value The y coordinate of the Wire Component inside the graph canvas { \"x\" : 40 , \"y\" : 0 } { \"x\" : 1.5 } {}","title":"Position"},{"location":"kura-wires/wire-graph-service-configuration-format/#portnamelist","text":"An object that specifies custom names for Wire Component input and output ports. The properties name for this object must be represented as an integer starting from 0, matching the index of the port whose name needs to be assigned. If the property name is not specified, the default port name will be used. Properties : _portIndex : string The name for the port of index _portIndex { \"0\" : \"foo\" , \"1\" : \"bar\" } {}","title":"PortNameList"},{"location":"kura-wires/wire-graph-service-configuration-format/#renderingproperties","text":"An object describing some Wire Component rendering parameters like position and custom port names. Properties : position : object optional If not specified the component coordinates will be set to 0.0. Position inputPortNames : object optional If not specified, the default input port names will be used. PortNameList outputPortNames : object optional If not specified, the default output port names will be used. PortNameList { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" }, \"position\" : { \"x\" : 40 , \"y\" : 0 } } { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" } } { \"position\" : { \"x\" : 40 , \"y\" : 0 } } {}","title":"RenderingProperties"},{"location":"kura-wires/wire-graph-service-configuration-format/#wirecomponent","text":"An object that describes a Wire Component that is part of a Wire Graph Properties : pid : string The Wire Component pid inputPortCount : number An integer reporting the number of input ports of the Wire Component. outputPortCount : number An integer reporting the number of output ports of the Wire Component. renderingProperties : object optional If not specified, the default rendering properties will be used RenderingProperties { \"inputPortCount\" : 1 , \"outputPortCount\" : 2 , \"pid\" : \"cond\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" }, \"position\" : { \"x\" : 40 , \"y\" : 0 } } } { \"inputPortCount\" : 0 , \"outputPortCount\" : 1 , \"pid\" : \"timer\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : {}, \"position\" : { \"x\" : -220 , \"y\" : -20 } } }","title":"WireComponent"},{"location":"kura-wires/wire-graph-service-configuration-format/#wire","text":"An object that describes a Wire connecting two Wire Components. Properties : emitter : string The pid of the emitter component. emitterPort : number The index of the output port of the emitter component that is connected to this Wire. receiver : string The pid of the receiver component. receiverPort : number The index of the input port of the receiver component that is connected to this Wire. { \"emitter\" : \"timer\" , \"emitterPort\" : 0 , \"receiver\" : \"cond\" , \"receiverPort\" : 0 }","title":"Wire"},{"location":"kura-wires/wire-graph-service-configuration-format/#wiregraph","text":"An object that describes the topology and rendering properties of a Wire Graph Properties : components : array The list of the wire components contained in the Wire Graph array elements: object WireComponent wires : array The list of Wires contained in the Wire Graph array elements: object Wire { \"components\" : [ { \"inputPortCount\" : 0 , \"outputPortCount\" : 1 , \"pid\" : \"timer\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : {}, \"position\" : { \"x\" : -220 , \"y\" : -20 } } }, { \"inputPortCount\" : 1 , \"outputPortCount\" : 2 , \"pid\" : \"cond\" , \"renderingProperties\" : { \"inputPortNames\" : {}, \"outputPortNames\" : { \"0\" : \"foo\" , \"1\" : \"bar\" }, \"position\" : { \"x\" : 40 , \"y\" : 0 } } } ], \"wires\" : [ { \"emitter\" : \"timer\" , \"emitterPort\" : 0 , \"receiver\" : \"cond\" , \"receiverPort\" : 0 } ] }","title":"WireGraph"},{"location":"kura-wires/wire-service-references/","text":"References Additional information about Wires is available at the following resources: DZONE Kura Wires Can Help Overcome Challenges of Industrial IoT . Kura Wires: A Sneak Peek . Kura Wires: A Different Perspective to Develop IIoT Applications . Different Dataflow Programming Approaches and Comparison With Kura Wires . Master Thesis Kura Wires: Design and Development of a Component for managing Devices and Drivers in Eclipse Kura 2.0 by Amit Kumar Mondal. Conferences and slides Building IoT Mashups for Industry 4.0 with Eclipse Kura and Kura Wires . Industry 4.0 with Eclipse Kura . Youtube Kura Wires - A Mashup in Eclipse Kura for Industry 4.0 . Kura Wires: Industry 4.0 with Eclipse Kura - EclipseCon Europe 2016 IoT Day .","title":"References"},{"location":"kura-wires/wire-service-references/#references","text":"Additional information about Wires is available at the following resources:","title":"References"},{"location":"kura-wires/wire-service-references/#dzone","text":"Kura Wires Can Help Overcome Challenges of Industrial IoT . Kura Wires: A Sneak Peek . Kura Wires: A Different Perspective to Develop IIoT Applications . Different Dataflow Programming Approaches and Comparison With Kura Wires .","title":"DZONE"},{"location":"kura-wires/wire-service-references/#master-thesis","text":"Kura Wires: Design and Development of a Component for managing Devices and Drivers in Eclipse Kura 2.0 by Amit Kumar Mondal.","title":"Master Thesis"},{"location":"kura-wires/wire-service-references/#conferences-and-slides","text":"Building IoT Mashups for Industry 4.0 with Eclipse Kura and Kura Wires . Industry 4.0 with Eclipse Kura .","title":"Conferences and slides"},{"location":"kura-wires/wire-service-references/#youtube","text":"Kura Wires - A Mashup in Eclipse Kura for Industry 4.0 . Kura Wires: Industry 4.0 with Eclipse Kura - EclipseCon Europe 2016 IoT Day .","title":"Youtube"},{"location":"kura-wires/wire-service-rest-v1/","text":"Wire Service V1 REST APIs and MQTT Request Handler The WIRE-V1 cloud request handler and the corresponding REST APIs allow to update, delete and get the current Wire Graph status. The request handler also supports creating, updating and deleting Asset and Driver instances and retrieving the metadata required for supporting Wire Graph editing applications. The GET/graph/shapshot and PUT/graph/snapshot requests use the same format as the Wire Graph snapshot functionality of the Kura Web UI. A Wire Graph snapshot can be obtained by navigating to the Wires section of Kura Web UI, clicking the Download button and selecting the JSON format. Accessing the REST APIs requires to use an identity with the rest.wires.admin permission assigned. Wire Service V1 REST APIs and MQTT Request Handler Request definitions GET/graph/shapshot PUT/graph/snapshot DEL/graph GET/drivers/pids GET/assets/pids GET/graph/topology POST/configs/byPid DEL/configs/byPid PUT/configs GET/metadata GET/metadata/wireComponents/factoryPids GET/metadata/wireComponents/definitions POST/metadata/wireComponents/definitions/byFactoryPid GET/metadata/drivers/factoryPids GET/metadata/driver/ocds POST/metadata/drivers/ocds/byFactoryPid GET/metadata/drivers/channelDescriptors POST/metadata/drivers/channelDescriptors/byPid GET/metadata/assets/channelDescriptor JSON definitions WireComponentDefinition DriverChannelDescriptor WireGraphMetadata Wire Graph snapshot example Request definitions GET/graph/shapshot REST API path : /services/wire/v1/graph/snapshot description : Returns the current Wire Graph Configuration. The received configuration includes the WireGraphService configuration containing the graph layout, the configuration of the components currently referenced by the Wire Graph, and the configuration of the existing Driver instances. responses : 200 description : The current wire graph configuration. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport PUT/graph/snapshot REST API path : /services/wire/v1/graph/snapshot description : Updates the current Wire Graph. request body : ComponentConfigurationList responses : 200 description : The current Wire Graph has been updated. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: updateGraph for the graph update operation, update:$pid or delete:$pid for update or delete operations performed on configurations not referenced by the Wire Graph, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport This request will replace the current graph topology with the received one. The received configuration must satisfy the following requirements. If any of the requirements is not met, the operation will fail and no changes will be applied to the system: * The configuration of the org.eclipse.kura.wire.graph.WireGraphService component must be specified. * The configuration of the org.eclipse.kura.wire.graph.WireGraphService component must contain a property named WireGraph of STRING type containing the graph layout as described in the WireGraphService document. * The inputPortCount and outputPortCount properties must be specified for all components in WireGraphService configuration. * The configuration of all components referenced by WireGraphService configuration that do not exist on target device must be specified. * The configuration of all components referenced by WireGraphService configuration that do not exist on target device must specify the service.factoryPid configuration property reporting the component factory pid. If a component already exists on the system and its configuration is supplied as part of the request, the component configuration will be updated. In this case the usual configuration merge semantics will be applied, the set of received properties will be merged with the existing one. The properties in the request body will overwrite the existing ones with the same name. WireAsset configurations are treated sligtly differently, an update to a WireAsset configuration is performed by deleting the existing component and creating a new instance with the received configuration. This behavior is necessary in order to allow channel removal. It is also allowed to specify Driver or Asset configurations that are not referenced by the Wire Graph included in the request body. DEL/graph REST API path : /services/wire/v1/graph description : Deletes the current Wire Graph. responses : 200 description : The current wire graph has been deleted. 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/drivers/pids REST API path : /services/wire/v1/drivers/pids description : Returns the list of existing Driver pids. responses : 200 description : The list of driver pids response body : PidAndFactoryPidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/assets/pids REST API path : /services/wire/v1/assets/pids description : Returns the list of existing Asset pids. The returned pids may or may not be referenced by the current Wire Graph. responses : 200 description : The list of driver pids response body : PidAndFactoryPidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/graph/topology REST API path : /services/wire/v1/graph/topology description : Returns the current Wire Graph topology as a WireGraph object. The returned object is the current value of the WireGraph property in Wire Graph Service configuration. This request allows to inspect the Wire Graph topology without downloading the entire Wire Graph snapshot with GET/graph/shapshot . responses : 200 description : The current wire graph topology. response body : WireGraph 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/configs/byPid REST API path : /services/wire/v1/configs/byPid description : Returns the list of configurations referenced by the provided pids. This request can only be used to retrieve Wire Component, Driver or Asset configurations. request body : PidSet responses : 200 description : The returned configurations. If a configuration cannot be found, it will not be included in the response. The returned configuration list can be empty. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. 500 description : An unexpected internal error occurred. response body : GenericFailureReport DEL/configs/byPid REST API path : /services/wire/v1/configs/byPid description : Deletes the configurations referenced by the provided pids. This request can only be used to delete Wire Component, Driver or Asset configurations. This request does not allow to delete configurations that are referenced by the current Wire Graph. request body : PidSet responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. This status will be returned also if the request references pids that are currenly part of the Wire Graph, or components that are not Wire Components, Driver or Asset instances. If this status is retured, no changes will be applied to the system. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: delete:$pid for delete operations, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport PUT/configs REST API path : /services/wire/v1/configs description : Updates or creates the provided configurations. This request can only be used to process Wire Component, Driver or Asset configurations. This request does not allow to create Wire Component configurations that are not referenced by the current Wire Graph, except from WireAsset instances. The component creation/update semantics are the same as PUT/graph/snapshot , this request can be used to perform configuration updates whithout knowing or specifying the Wire Graph topology. request body : ComponentConfigurationList responses : 200 description : The request succeeded 400 description : The request body is not valid JSON or it contains invalid parameters. This status will be returned also if the request involves the creation of components that are not Wire Components, Driver or Asset instances, or the creation of Wire Components that are not referenced by the current Wire Graph. If this status is retured, no changes will be applied to the system. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: update:$pid or delete:$pid for update or delete operations, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport GET/metadata REST API path : /services/wire/v1/metadata description : Returns all available Wire Component, Asset and Driver metadata in a single request. responses : 200 description : The request succeeded. Single fields in the response can be missing if the corresponding list is empty (e.g. driverDescriptors can be missing if no Driver instances exist on the system) response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/metadata/wireComponents/factoryPids REST API path : /services/wire/v1/metadata/wireComponents/factoryPids description : Return the list of available Wire Component factory pids responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/metadata/wireComponents/definitions REST API path : /services/wire/v1/metadata/wireComponents/definitions description : Returns all available Wire Component definitions responses : 200 description : The available Wire Component definitions. All fields except at most wireComponentDefinitions will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/metadata/wireComponents/definitions/byFactoryPid REST API path : /services/wire/v1/metadata/wireComponents/definitions/byFactoryPid description : Returns the Wire Component definitions for the given set of factory pids request body : PidSet responses : 200 description : The available Wire Component definitions. All fields except at most wireComponentDefinitions will be missing. If the metadata for a given factoryPid is not found, the request will succeed and it will not be included in the list. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/metadata/drivers/factoryPids REST API path : /services/wire/v1/metadata/drivers/factoryPids description : Return the list of available Driver factory pids responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/metadata/driver/ocds REST API path : /services/wire/v1/metadata/drivers/ocds description : Returns all available Driver OCDs responses : 200 description : The available Driver OCDs. All fields except at most driverOCDs will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/metadata/drivers/ocds/byFactoryPid REST API path : /services/wire/v1/metadata/drivers/ocds/byFactoryPid description : Returns the Driver OCDSs for the given set of factory pids request body : PidSet responses : 200 description : The requested Driver OCDs. All fields except at most driverOCDs will be missing. If the metadata for a given factoryPid is not found, the request will succeed and it will not be included in the list. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/metadata/drivers/channelDescriptors REST API path : /wire/v1/metadata/drivers/channelDescriptors description : Returns the list of all available Driver channel descriptors responses : 200 description : The list of Driver channel descriptors. All fields except at most driverChannelDescriptors will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/metadata/drivers/channelDescriptors/byPid REST API path : /services/wire/v1/metadata/drivers/channelDescriptors/byPid description : Returns the Driver channel descriptors for the given set of pids request body : PidSet responses : 200 description : The requested Driver channel descriptors. All fields except at most driverChannelDescriptors will be missing. If the metadata for a given pid is not found, the request will succeed and it will not be included in the list. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/metadata/assets/channelDescriptor REST API path : /wire/v1/metadata/assets/channelDescriptor description : Returns the Asset channel descriptor responses : 200 description : The Asset channel descriptors. All fields except assetChannelDescriptor will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport JSON definitions WireComponentDefinition A Wire Component definition object Properties : factoryPid : string The component factory pid minInputPorts : number The minimum input port count maxInputPorts : number The maximum number of input ports defaultInputPorts : number The default number of input ports minOutputPorts : number The minimum number of output ports maxOutputPorts : number The maximum number of output ports defaultOutputPorts : number The default number of output ports inputPortNames : object optional If no custom input port names are defined PortNameList outputPortNames : object optional If no custom output port names are defined PortNameList componentOcd : array optional If the component OCD is empty The component OCD array elements: object AttributeDefinition { \"componentOCD\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"50\" , \"description\" : \"The maximum number of envelopes that can be stored in the queue of this FIFO component\" , \"id\" : \"queue.capacity\" , \"isRequired\" : true , \"name\" : \"queue.capacity\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"Defines the behavior in case of full queue: if set to true new envelopes will be dropped, otherwise, if an emitter delivers an envelope to this component it will block until the envelope can be successfully enqueued.\" , \"id\" : \"discard.envelopes\" , \"isRequired\" : true , \"name\" : \"discard.envelopes\" , \"type\" : \"BOOLEAN\" } ], \"defaultInputPorts\" : 1 , \"defaultOutputPorts\" : 1 , \"factoryPid\" : \"org.eclipse.kura.wire.Fifo\" , \"maxInputPorts\" : 1 , \"maxOutputPorts\" : 1 , \"minInputPorts\" : 1 , \"minOutputPorts\" : 1 } DriverChannelDescriptor An object that describes Driver specific channel configuration properties Properties : pid : string The Driver pid factoryPid : string The Driver factory pid channelDescriptor : array optional If the driver does not define any channel property The list of Driver specific channel configuration properties array elements: object AttributeDefinition { \"channelDescriptor\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"AA:BB:CC:DD:EE:FF\" , \"description\" : \"sensortag.address\" , \"id\" : \"sensortag.address\" , \"isRequired\" : true , \"name\" : \"sensortag.address\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"TEMP_AMBIENT\" , \"description\" : \"sensor.name\" , \"id\" : \"sensor.name\" , \"isRequired\" : true , \"name\" : \"sensor.name\" , \"option\" : [ { \"label\" : \"TEMP_AMBIENT\" , \"value\" : \"TEMP_AMBIENT\" }, { \"label\" : \"TEMP_TARGET\" , \"value\" : \"TEMP_TARGET\" }, { \"label\" : \"HUMIDITY\" , \"value\" : \"HUMIDITY\" }, { \"label\" : \"ACCELERATION_X\" , \"value\" : \"ACCELERATION_X\" }, { \"label\" : \"ACCELERATION_Y\" , \"value\" : \"ACCELERATION_Y\" }, { \"label\" : \"ACCELERATION_Z\" , \"value\" : \"ACCELERATION_Z\" }, { \"label\" : \"MAGNETIC_X\" , \"value\" : \"MAGNETIC_X\" }, { \"label\" : \"MAGNETIC_Y\" , \"value\" : \"MAGNETIC_Y\" }, { \"label\" : \"MAGNETIC_Z\" , \"value\" : \"MAGNETIC_Z\" }, { \"label\" : \"GYROSCOPE_X\" , \"value\" : \"GYROSCOPE_X\" }, { \"label\" : \"GYROSCOPE_Y\" , \"value\" : \"GYROSCOPE_Y\" }, { \"label\" : \"GYROSCOPE_Z\" , \"value\" : \"GYROSCOPE_Z\" }, { \"label\" : \"LIGHT\" , \"value\" : \"LIGHT\" }, { \"label\" : \"PRESSURE\" , \"value\" : \"PRESSURE\" }, { \"label\" : \"GREEN_LED\" , \"value\" : \"GREEN_LED\" }, { \"label\" : \"RED_LED\" , \"value\" : \"RED_LED\" }, { \"label\" : \"BUZZER\" , \"value\" : \"BUZZER\" }, { \"label\" : \"KEYS\" , \"value\" : \"KEYS\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"1000\" , \"description\" : \"notification.period\" , \"id\" : \"notification.period\" , \"isRequired\" : true , \"name\" : \"notification.period\" , \"type\" : \"INTEGER\" } ], \"factoryPid\" : \"org.eclipse.kura.driver.ble.sensortag\" , \"pid\" : \"sensortag\" } WireGraphMetadata An object contiaining metatada describing Wire Components, Drivers and Assets Properties : wireComponentDefinitions : array optional See request specific documentation The list of Wire Component definitions array elements: object WireComponentDefinition driverOCDs : array optional See request specific documentation The list of Driver factory component OCDs array elements: object ComponentConfiguration driverChannelDescriptors : array optional See request specific documentation The list of Driver channel descriptors array elements: object DriverChannelDescriptor assetChannelDescriptor : array optional See request specific documentation The list of Asset specific channel configuration properties array elements: object AttributeDefinition { \"assetChannelDescriptor\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"description\" : \"Determines if the channel is enabled or not\" , \"id\" : \"+enabled\" , \"isRequired\" : true , \"name\" : \"enabled\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"Channel-1\" , \"description\" : \"Name of the Channel\" , \"id\" : \"+name\" , \"isRequired\" : true , \"name\" : \"name\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"READ\" , \"description\" : \"Type of the channel\" , \"id\" : \"+type\" , \"isRequired\" : true , \"name\" : \"type\" , \"option\" : [ { \"label\" : \"READ\" , \"value\" : \"READ\" }, { \"label\" : \"READ_WRITE\" , \"value\" : \"READ_WRITE\" }, { \"label\" : \"WRITE\" , \"value\" : \"WRITE\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"INTEGER\" , \"description\" : \"Value type of the channel\" , \"id\" : \"+value.type\" , \"isRequired\" : true , \"name\" : \"value.type\" , \"option\" : [ { \"label\" : \"BOOLEAN\" , \"value\" : \"BOOLEAN\" }, { \"label\" : \"BYTE_ARRAY\" , \"value\" : \"BYTE_ARRAY\" }, { \"label\" : \"DOUBLE\" , \"value\" : \"DOUBLE\" }, { \"label\" : \"INTEGER\" , \"value\" : \"INTEGER\" }, { \"label\" : \"LONG\" , \"value\" : \"LONG\" }, { \"label\" : \"FLOAT\" , \"value\" : \"FLOAT\" }, { \"label\" : \"STRING\" , \"value\" : \"STRING\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"description\" : \"Scale to be applied to the numeric value of the channel\" , \"id\" : \"+scale\" , \"isRequired\" : false , \"name\" : \"scale\" , \"type\" : \"DOUBLE\" }, { \"cardinality\" : 0 , \"description\" : \"Offset to be applied to the numeric value of the channel\" , \"id\" : \"+offset\" , \"isRequired\" : false , \"name\" : \"offset\" , \"type\" : \"DOUBLE\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"description\" : \"Unit associated to the value of the channel\" , \"id\" : \"+unit\" , \"isRequired\" : false , \"name\" : \"unit\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"Specifies if WireAsset should emit envelopes on Channel events\" , \"id\" : \"+listen\" , \"isRequired\" : true , \"name\" : \"listen\" , \"type\" : \"BOOLEAN\" } ], \"driverChannelDescriptors\" : [ { \"channelDescriptor\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"MyNode\" , \"description\" : \"node.id\" , \"id\" : \"node.id\" , \"isRequired\" : true , \"name\" : \"node.id\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"2\" , \"description\" : \"node.namespace.index\" , \"id\" : \"node.namespace.index\" , \"isRequired\" : true , \"name\" : \"node.namespace.index\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"DEFINED_BY_JAVA_TYPE\" , \"description\" : \"opcua.type\" , \"id\" : \"opcua.type\" , \"isRequired\" : true , \"name\" : \"opcua.type\" , \"option\" : [ { \"label\" : \"DEFINED_BY_JAVA_TYPE\" , \"value\" : \"DEFINED_BY_JAVA_TYPE\" }, { \"label\" : \"BOOLEAN\" , \"value\" : \"BOOLEAN\" }, { \"label\" : \"SBYTE\" , \"value\" : \"SBYTE\" }, { \"label\" : \"INT16\" , \"value\" : \"INT16\" }, { \"label\" : \"INT32\" , \"value\" : \"INT32\" }, { \"label\" : \"INT64\" , \"value\" : \"INT64\" }, { \"label\" : \"BYTE\" , \"value\" : \"BYTE\" }, { \"label\" : \"UINT16\" , \"value\" : \"UINT16\" }, { \"label\" : \"UINT32\" , \"value\" : \"UINT32\" }, { \"label\" : \"UINT64\" , \"value\" : \"UINT64\" }, { \"label\" : \"FLOAT\" , \"value\" : \"FLOAT\" }, { \"label\" : \"DOUBLE\" , \"value\" : \"DOUBLE\" }, { \"label\" : \"STRING\" , \"value\" : \"STRING\" }, { \"label\" : \"BYTE_STRING\" , \"value\" : \"BYTE_STRING\" }, { \"label\" : \"BYTE_ARRAY\" , \"value\" : \"BYTE_ARRAY\" }, { \"label\" : \"SBYTE_ARRAY\" , \"value\" : \"SBYTE_ARRAY\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"STRING\" , \"description\" : \"node.id.type\" , \"id\" : \"node.id.type\" , \"isRequired\" : true , \"name\" : \"node.id.type\" , \"option\" : [ { \"label\" : \"NUMERIC\" , \"value\" : \"NUMERIC\" }, { \"label\" : \"STRING\" , \"value\" : \"STRING\" }, { \"label\" : \"GUID\" , \"value\" : \"GUID\" }, { \"label\" : \"OPAQUE\" , \"value\" : \"OPAQUE\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"Value\" , \"description\" : \"attribute\" , \"id\" : \"attribute\" , \"isRequired\" : true , \"name\" : \"attribute\" , \"option\" : [ { \"label\" : \"NodeId\" , \"value\" : \"NodeId\" }, { \"label\" : \"NodeClass\" , \"value\" : \"NodeClass\" }, { \"label\" : \"BrowseName\" , \"value\" : \"BrowseName\" }, { \"label\" : \"DisplayName\" , \"value\" : \"DisplayName\" }, { \"label\" : \"Description\" , \"value\" : \"Description\" }, { \"label\" : \"WriteMask\" , \"value\" : \"WriteMask\" }, { \"label\" : \"UserWriteMask\" , \"value\" : \"UserWriteMask\" }, { \"label\" : \"IsAbstract\" , \"value\" : \"IsAbstract\" }, { \"label\" : \"Symmetric\" , \"value\" : \"Symmetric\" }, { \"label\" : \"InverseName\" , \"value\" : \"InverseName\" }, { \"label\" : \"ContainsNoLoops\" , \"value\" : \"ContainsNoLoops\" }, { \"label\" : \"EventNotifier\" , \"value\" : \"EventNotifier\" }, { \"label\" : \"Value\" , \"value\" : \"Value\" }, { \"label\" : \"DataType\" , \"value\" : \"DataType\" }, { \"label\" : \"ValueRank\" , \"value\" : \"ValueRank\" }, { \"label\" : \"ArrayDimensions\" , \"value\" : \"ArrayDimensions\" }, { \"label\" : \"AccessLevel\" , \"value\" : \"AccessLevel\" }, { \"label\" : \"UserAccessLevel\" , \"value\" : \"UserAccessLevel\" }, { \"label\" : \"MinimumSamplingInterval\" , \"value\" : \"MinimumSamplingInterval\" }, { \"label\" : \"Historizing\" , \"value\" : \"Historizing\" }, { \"label\" : \"Executable\" , \"value\" : \"Executable\" }, { \"label\" : \"UserExecutable\" , \"value\" : \"UserExecutable\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"1000\" , \"description\" : \"listen.sampling.interval\" , \"id\" : \"listen.sampling.interval\" , \"isRequired\" : true , \"name\" : \"listen.sampling.interval\" , \"type\" : \"DOUBLE\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"10\" , \"description\" : \"listen.queue.size\" , \"id\" : \"listen.queue.size\" , \"isRequired\" : true , \"name\" : \"listen.queue.size\" , \"type\" : \"LONG\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"description\" : \"listen.discard.oldest\" , \"id\" : \"listen.discard.oldest\" , \"isRequired\" : true , \"name\" : \"listen.discard.oldest\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"listen.subscribe.to.children\" , \"id\" : \"listen.subscribe.to.children\" , \"isRequired\" : true , \"name\" : \"listen.subscribe.to.children\" , \"type\" : \"BOOLEAN\" } ], \"factoryPid\" : \"org.eclipse.kura.driver.opcua\" , \"pid\" : \"opcuaDriver\" } ], \"driverOCDs\" : [ { \"definition\" : { \"ad\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"default-server\" , \"description\" : \"OPC-UA Endpoint IP Address\" , \"id\" : \"endpoint.ip\" , \"isRequired\" : true , \"name\" : \"Endpoint IP\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"53530\" , \"description\" : \"OPC-UA Endpoint Port\" , \"id\" : \"endpoint.port\" , \"isRequired\" : true , \"min\" : \"1\" , \"name\" : \"Endpoint port\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"OPC-UA-Server\" , \"description\" : \"OPC-UA Server Name\" , \"id\" : \"server.name\" , \"isRequired\" : false , \"name\" : \"Server Name\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"If set to true the driver will use the hostname, port, and server name parameters specified in the configuration instead of the values contained in endpoint descriptions fetched from the server.\" , \"id\" : \"force.endpoint.url\" , \"isRequired\" : false , \"name\" : \"Force endpoint URL\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"120\" , \"description\" : \"Session timeout (in seconds)\" , \"id\" : \"session.timeout\" , \"isRequired\" : true , \"name\" : \"Session timeout\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"60\" , \"description\" : \"Request timeout (in seconds)\" , \"id\" : \"request.timeout\" , \"isRequired\" : true , \"name\" : \"Request timeout\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"40\" , \"description\" : \"The time to wait for the server response to the 'Hello' message (in seconds)\" , \"id\" : \"acknowledge.timeout\" , \"isRequired\" : true , \"name\" : \"Acknowledge timeout\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"opc-ua client\" , \"description\" : \"OPC-UA application name\" , \"id\" : \"application.name\" , \"isRequired\" : true , \"name\" : \"Application name\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"urn:kura:opcua:client\" , \"description\" : \"OPC-UA application uri\" , \"id\" : \"application.uri\" , \"isRequired\" : true , \"name\" : \"Application URI\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"1000\" , \"description\" : \"The publish interval in milliseconds for the subscription created by the driver.\" , \"id\" : \"subscription.publish.interval\" , \"isRequired\" : true , \"name\" : \"Subscription publish interval\" , \"type\" : \"LONG\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"PFX or JKS Keystore\" , \"description\" : \"Absolute path of the PKCS or JKS keystore that contains the OPC-UA client certificate, private key and trusted server certificates\" , \"id\" : \"certificate.location\" , \"isRequired\" : true , \"name\" : \"Keystore path\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"0\" , \"description\" : \"Security Policy\" , \"id\" : \"security.policy\" , \"isRequired\" : true , \"name\" : \"Security policy\" , \"option\" : [ { \"label\" : \"None\" , \"value\" : \"0\" }, { \"label\" : \"Basic128Rsa15\" , \"value\" : \"1\" }, { \"label\" : \"Basic256\" , \"value\" : \"2\" }, { \"label\" : \"Basic256Sha256\" , \"value\" : \"3\" } ], \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"description\" : \"OPC-UA server username\" , \"id\" : \"username\" , \"isRequired\" : false , \"name\" : \"Username\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"description\" : \"OPC-UA server password\" , \"id\" : \"password\" , \"isRequired\" : false , \"name\" : \"Password\" , \"type\" : \"PASSWORD\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"client-ai\" , \"description\" : \"Alias for the client certificate in the keystore\" , \"id\" : \"keystore.client.alias\" , \"isRequired\" : true , \"name\" : \"Client certificate alias\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"Specifies whether to enable or not server certificate verification\" , \"id\" : \"authenticate.server\" , \"isRequired\" : true , \"name\" : \"Enable server authentication\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"PKCS12\" , \"description\" : \"Keystore type\" , \"id\" : \"keystore.type\" , \"isRequired\" : true , \"name\" : \"Keystore type\" , \"option\" : [ { \"label\" : \"PKCS11\" , \"value\" : \"PKCS11\" }, { \"label\" : \"PKCS12\" , \"value\" : \"PKCS12\" }, { \"label\" : \"JKS\" , \"value\" : \"JKS\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"password\" , \"description\" : \"Configurable Property to set keystore password (default set to password)\" , \"id\" : \"keystore.password\" , \"isRequired\" : true , \"name\" : \"Keystore password\" , \"type\" : \"PASSWORD\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"200\" , \"description\" : \"Maximum number of items that will be included in a single request to the server.\" , \"id\" : \"max.request.items\" , \"isRequired\" : true , \"name\" : \"Max request items\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"BROWSE_PATH\" , \"description\" : \"The format to be used for channel name for subtree subscriptions. If set to BROWSE_PATH, the channel name will contain the browse path of the source node relative to the subscription root. If set to NODE_ID, the name will contain the node id of the source node.\" , \"id\" : \"subtree.subscription.name.format\" , \"isRequired\" : true , \"name\" : \"Subtree subscription events channel name format\" , \"option\" : [ { \"label\" : \"BROWSE_PATH\" , \"value\" : \"BROWSE_PATH\" }, { \"label\" : \"NODE_ID\" , \"value\" : \"NODE_ID\" } ], \"type\" : \"STRING\" } ], \"description\" : \"OPC-UA Driver\" , \"id\" : \"org.eclipse.kura.driver.opcua\" , \"name\" : \"OpcUaDriver\" }, \"pid\" : \"org.eclipse.kura.driver.opcua\" } ], \"wireComponentDefinitions\" : [ { \"componentOCD\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"records[0].TIMER !== null && records[0].TIMER.getValue() > 10 && records[0]['TIMER'].getValue() < 30;\\n\" , \"description\" : \"The boolean expression to be evaluated by this component when a wire envelope is received.\" , \"id\" : \"condition\" , \"isRequired\" : true , \"name\" : \"condition\" , \"type\" : \"STRING\" } ], \"defaultInputPorts\" : 1 , \"defaultOutputPorts\" : 2 , \"factoryPid\" : \"org.eclipse.kura.wire.Conditional\" , \"inputPortNames\" : { \"0\" : \"if\" }, \"maxInputPorts\" : 1 , \"maxOutputPorts\" : 2 , \"minInputPorts\" : 1 , \"minOutputPorts\" : 2 , \"outputPortNames\" : { \"0\" : \"then\" , \"1\" : \"else\" } } ] } Wire Graph snapshot example { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.wire.graph.WireGraphService\" , \"properties\" : { \"WireGraph\" : { \"type\" : \"STRING\" , \"value\" : \"{\\\"components\\\":[{\\\"pid\\\":\\\"timer\\\",\\\"inputPortCount\\\":0,\\\"outputPortCount\\\":1,\\\"renderingProperties\\\":{\\\"position\\\":{\\\"x\\\":-300,\\\"y\\\":-20},\\\"inputPortNames\\\":{},\\\"outputPortNames\\\":{}}},{\\\"pid\\\":\\\"logger\\\",\\\"inputPortCount\\\":1,\\\"outputPortCount\\\":0,\\\"renderingProperties\\\":{\\\"position\\\":{\\\"x\\\":-100,\\\"y\\\":-20},\\\"inputPortNames\\\":{},\\\"outputPortNames\\\":{}}}],\\\"wires\\\":[{\\\"emitter\\\":\\\"timer\\\",\\\"emitterPort\\\":0,\\\"receiver\\\":\\\"logger\\\",\\\"receiverPort\\\":0}]}\" } } }, { \"pid\" : \"timer\" , \"properties\" : { \"componentDescription\" : { \"type\" : \"STRING\" , \"value\" : \"A wire component that fires a ticking event on every configured interval\" }, \"componentId\" : { \"type\" : \"STRING\" , \"value\" : \"timer\" }, \"componentName\" : { \"type\" : \"STRING\" , \"value\" : \"Timer\" }, \"cron.interval\" : { \"type\" : \"STRING\" , \"value\" : \"0/10 * * * * ?\" }, \"emitter.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 1 }, \"factoryComponent\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Timer\" }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"timer\" }, \"receiver.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"service.factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Timer\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Timer-1642493602000-13\" }, \"simple.custom.first.tick.interval\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"simple.first.tick.policy\" : { \"type\" : \"STRING\" , \"value\" : \"DEFAULT\" }, \"simple.interval\" : { \"type\" : \"INTEGER\" , \"value\" : 10 }, \"simple.time.unit\" : { \"type\" : \"STRING\" , \"value\" : \"SECONDS\" }, \"type\" : { \"type\" : \"STRING\" , \"value\" : \"SIMPLE\" } } }, { \"pid\" : \"logger\" , \"properties\" : { \"componentDescription\" : { \"type\" : \"STRING\" , \"value\" : \"A wire component which logs data as received from upstream connected Wire Components\" }, \"componentId\" : { \"type\" : \"STRING\" , \"value\" : \"logger\" }, \"componentName\" : { \"type\" : \"STRING\" , \"value\" : \"Logger\" }, \"emitter.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"factoryComponent\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Logger\" }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"logger\" }, \"log.verbosity\" : { \"type\" : \"STRING\" , \"value\" : \"QUIET\" }, \"receiver.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 1 }, \"service.factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Logger\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Logger-1642493602046-14\" } } } ] }","title":"Wire Service V1 REST APIs and MQTT Request Handler"},{"location":"kura-wires/wire-service-rest-v1/#wire-service-v1-rest-apis-and-mqtt-request-handler","text":"The WIRE-V1 cloud request handler and the corresponding REST APIs allow to update, delete and get the current Wire Graph status. The request handler also supports creating, updating and deleting Asset and Driver instances and retrieving the metadata required for supporting Wire Graph editing applications. The GET/graph/shapshot and PUT/graph/snapshot requests use the same format as the Wire Graph snapshot functionality of the Kura Web UI. A Wire Graph snapshot can be obtained by navigating to the Wires section of Kura Web UI, clicking the Download button and selecting the JSON format. Accessing the REST APIs requires to use an identity with the rest.wires.admin permission assigned. Wire Service V1 REST APIs and MQTT Request Handler Request definitions GET/graph/shapshot PUT/graph/snapshot DEL/graph GET/drivers/pids GET/assets/pids GET/graph/topology POST/configs/byPid DEL/configs/byPid PUT/configs GET/metadata GET/metadata/wireComponents/factoryPids GET/metadata/wireComponents/definitions POST/metadata/wireComponents/definitions/byFactoryPid GET/metadata/drivers/factoryPids GET/metadata/driver/ocds POST/metadata/drivers/ocds/byFactoryPid GET/metadata/drivers/channelDescriptors POST/metadata/drivers/channelDescriptors/byPid GET/metadata/assets/channelDescriptor JSON definitions WireComponentDefinition DriverChannelDescriptor WireGraphMetadata Wire Graph snapshot example","title":"Wire Service V1 REST APIs and MQTT Request Handler"},{"location":"kura-wires/wire-service-rest-v1/#request-definitions","text":"","title":"Request definitions"},{"location":"kura-wires/wire-service-rest-v1/#getgraphshapshot","text":"REST API path : /services/wire/v1/graph/snapshot description : Returns the current Wire Graph Configuration. The received configuration includes the WireGraphService configuration containing the graph layout, the configuration of the components currently referenced by the Wire Graph, and the configuration of the existing Driver instances. responses : 200 description : The current wire graph configuration. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/graph/shapshot"},{"location":"kura-wires/wire-service-rest-v1/#putgraphsnapshot","text":"REST API path : /services/wire/v1/graph/snapshot description : Updates the current Wire Graph. request body : ComponentConfigurationList responses : 200 description : The current Wire Graph has been updated. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: updateGraph for the graph update operation, update:$pid or delete:$pid for update or delete operations performed on configurations not referenced by the Wire Graph, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport This request will replace the current graph topology with the received one. The received configuration must satisfy the following requirements. If any of the requirements is not met, the operation will fail and no changes will be applied to the system: * The configuration of the org.eclipse.kura.wire.graph.WireGraphService component must be specified. * The configuration of the org.eclipse.kura.wire.graph.WireGraphService component must contain a property named WireGraph of STRING type containing the graph layout as described in the WireGraphService document. * The inputPortCount and outputPortCount properties must be specified for all components in WireGraphService configuration. * The configuration of all components referenced by WireGraphService configuration that do not exist on target device must be specified. * The configuration of all components referenced by WireGraphService configuration that do not exist on target device must specify the service.factoryPid configuration property reporting the component factory pid. If a component already exists on the system and its configuration is supplied as part of the request, the component configuration will be updated. In this case the usual configuration merge semantics will be applied, the set of received properties will be merged with the existing one. The properties in the request body will overwrite the existing ones with the same name. WireAsset configurations are treated sligtly differently, an update to a WireAsset configuration is performed by deleting the existing component and creating a new instance with the received configuration. This behavior is necessary in order to allow channel removal. It is also allowed to specify Driver or Asset configurations that are not referenced by the Wire Graph included in the request body.","title":"PUT/graph/snapshot"},{"location":"kura-wires/wire-service-rest-v1/#delgraph","text":"REST API path : /services/wire/v1/graph description : Deletes the current Wire Graph. responses : 200 description : The current wire graph has been deleted. 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"DEL/graph"},{"location":"kura-wires/wire-service-rest-v1/#getdriverspids","text":"REST API path : /services/wire/v1/drivers/pids description : Returns the list of existing Driver pids. responses : 200 description : The list of driver pids response body : PidAndFactoryPidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/drivers/pids"},{"location":"kura-wires/wire-service-rest-v1/#getassetspids","text":"REST API path : /services/wire/v1/assets/pids description : Returns the list of existing Asset pids. The returned pids may or may not be referenced by the current Wire Graph. responses : 200 description : The list of driver pids response body : PidAndFactoryPidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/assets/pids"},{"location":"kura-wires/wire-service-rest-v1/#getgraphtopology","text":"REST API path : /services/wire/v1/graph/topology description : Returns the current Wire Graph topology as a WireGraph object. The returned object is the current value of the WireGraph property in Wire Graph Service configuration. This request allows to inspect the Wire Graph topology without downloading the entire Wire Graph snapshot with GET/graph/shapshot . responses : 200 description : The current wire graph topology. response body : WireGraph 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/graph/topology"},{"location":"kura-wires/wire-service-rest-v1/#postconfigsbypid","text":"REST API path : /services/wire/v1/configs/byPid description : Returns the list of configurations referenced by the provided pids. This request can only be used to retrieve Wire Component, Driver or Asset configurations. request body : PidSet responses : 200 description : The returned configurations. If a configuration cannot be found, it will not be included in the response. The returned configuration list can be empty. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/configs/byPid"},{"location":"kura-wires/wire-service-rest-v1/#delconfigsbypid","text":"REST API path : /services/wire/v1/configs/byPid description : Deletes the configurations referenced by the provided pids. This request can only be used to delete Wire Component, Driver or Asset configurations. This request does not allow to delete configurations that are referenced by the current Wire Graph. request body : PidSet responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. This status will be returned also if the request references pids that are currenly part of the Wire Graph, or components that are not Wire Components, Driver or Asset instances. If this status is retured, no changes will be applied to the system. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: delete:$pid for delete operations, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"DEL/configs/byPid"},{"location":"kura-wires/wire-service-rest-v1/#putconfigs","text":"REST API path : /services/wire/v1/configs description : Updates or creates the provided configurations. This request can only be used to process Wire Component, Driver or Asset configurations. This request does not allow to create Wire Component configurations that are not referenced by the current Wire Graph, except from WireAsset instances. The component creation/update semantics are the same as PUT/graph/snapshot , this request can be used to perform configuration updates whithout knowing or specifying the Wire Graph topology. request body : ComponentConfigurationList responses : 200 description : The request succeeded 400 description : The request body is not valid JSON or it contains invalid parameters. This status will be returned also if the request involves the creation of components that are not Wire Components, Driver or Asset instances, or the creation of Wire Components that are not referenced by the current Wire Graph. If this status is retured, no changes will be applied to the system. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: update:$pid or delete:$pid for update or delete operations, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"PUT/configs"},{"location":"kura-wires/wire-service-rest-v1/#getmetadata","text":"REST API path : /services/wire/v1/metadata description : Returns all available Wire Component, Asset and Driver metadata in a single request. responses : 200 description : The request succeeded. Single fields in the response can be missing if the corresponding list is empty (e.g. driverDescriptors can be missing if no Driver instances exist on the system) response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata"},{"location":"kura-wires/wire-service-rest-v1/#getmetadatawirecomponentsfactorypids","text":"REST API path : /services/wire/v1/metadata/wireComponents/factoryPids description : Return the list of available Wire Component factory pids responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata/wireComponents/factoryPids"},{"location":"kura-wires/wire-service-rest-v1/#getmetadatawirecomponentsdefinitions","text":"REST API path : /services/wire/v1/metadata/wireComponents/definitions description : Returns all available Wire Component definitions responses : 200 description : The available Wire Component definitions. All fields except at most wireComponentDefinitions will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata/wireComponents/definitions"},{"location":"kura-wires/wire-service-rest-v1/#postmetadatawirecomponentsdefinitionsbyfactorypid","text":"REST API path : /services/wire/v1/metadata/wireComponents/definitions/byFactoryPid description : Returns the Wire Component definitions for the given set of factory pids request body : PidSet responses : 200 description : The available Wire Component definitions. All fields except at most wireComponentDefinitions will be missing. If the metadata for a given factoryPid is not found, the request will succeed and it will not be included in the list. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/metadata/wireComponents/definitions/byFactoryPid"},{"location":"kura-wires/wire-service-rest-v1/#getmetadatadriversfactorypids","text":"REST API path : /services/wire/v1/metadata/drivers/factoryPids description : Return the list of available Driver factory pids responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata/drivers/factoryPids"},{"location":"kura-wires/wire-service-rest-v1/#getmetadatadriverocds","text":"REST API path : /services/wire/v1/metadata/drivers/ocds description : Returns all available Driver OCDs responses : 200 description : The available Driver OCDs. All fields except at most driverOCDs will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata/driver/ocds"},{"location":"kura-wires/wire-service-rest-v1/#postmetadatadriversocdsbyfactorypid","text":"REST API path : /services/wire/v1/metadata/drivers/ocds/byFactoryPid description : Returns the Driver OCDSs for the given set of factory pids request body : PidSet responses : 200 description : The requested Driver OCDs. All fields except at most driverOCDs will be missing. If the metadata for a given factoryPid is not found, the request will succeed and it will not be included in the list. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/metadata/drivers/ocds/byFactoryPid"},{"location":"kura-wires/wire-service-rest-v1/#getmetadatadriverschanneldescriptors","text":"REST API path : /wire/v1/metadata/drivers/channelDescriptors description : Returns the list of all available Driver channel descriptors responses : 200 description : The list of Driver channel descriptors. All fields except at most driverChannelDescriptors will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata/drivers/channelDescriptors"},{"location":"kura-wires/wire-service-rest-v1/#postmetadatadriverschanneldescriptorsbypid","text":"REST API path : /services/wire/v1/metadata/drivers/channelDescriptors/byPid description : Returns the Driver channel descriptors for the given set of pids request body : PidSet responses : 200 description : The requested Driver channel descriptors. All fields except at most driverChannelDescriptors will be missing. If the metadata for a given pid is not found, the request will succeed and it will not be included in the list. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/metadata/drivers/channelDescriptors/byPid"},{"location":"kura-wires/wire-service-rest-v1/#getmetadataassetschanneldescriptor","text":"REST API path : /wire/v1/metadata/assets/channelDescriptor description : Returns the Asset channel descriptor responses : 200 description : The Asset channel descriptors. All fields except assetChannelDescriptor will be missing. response body : WireGraphMetadata 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/metadata/assets/channelDescriptor"},{"location":"kura-wires/wire-service-rest-v1/#json-definitions","text":"","title":"JSON definitions"},{"location":"kura-wires/wire-service-rest-v1/#wirecomponentdefinition","text":"A Wire Component definition object Properties : factoryPid : string The component factory pid minInputPorts : number The minimum input port count maxInputPorts : number The maximum number of input ports defaultInputPorts : number The default number of input ports minOutputPorts : number The minimum number of output ports maxOutputPorts : number The maximum number of output ports defaultOutputPorts : number The default number of output ports inputPortNames : object optional If no custom input port names are defined PortNameList outputPortNames : object optional If no custom output port names are defined PortNameList componentOcd : array optional If the component OCD is empty The component OCD array elements: object AttributeDefinition { \"componentOCD\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"50\" , \"description\" : \"The maximum number of envelopes that can be stored in the queue of this FIFO component\" , \"id\" : \"queue.capacity\" , \"isRequired\" : true , \"name\" : \"queue.capacity\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"Defines the behavior in case of full queue: if set to true new envelopes will be dropped, otherwise, if an emitter delivers an envelope to this component it will block until the envelope can be successfully enqueued.\" , \"id\" : \"discard.envelopes\" , \"isRequired\" : true , \"name\" : \"discard.envelopes\" , \"type\" : \"BOOLEAN\" } ], \"defaultInputPorts\" : 1 , \"defaultOutputPorts\" : 1 , \"factoryPid\" : \"org.eclipse.kura.wire.Fifo\" , \"maxInputPorts\" : 1 , \"maxOutputPorts\" : 1 , \"minInputPorts\" : 1 , \"minOutputPorts\" : 1 }","title":"WireComponentDefinition"},{"location":"kura-wires/wire-service-rest-v1/#driverchanneldescriptor","text":"An object that describes Driver specific channel configuration properties Properties : pid : string The Driver pid factoryPid : string The Driver factory pid channelDescriptor : array optional If the driver does not define any channel property The list of Driver specific channel configuration properties array elements: object AttributeDefinition { \"channelDescriptor\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"AA:BB:CC:DD:EE:FF\" , \"description\" : \"sensortag.address\" , \"id\" : \"sensortag.address\" , \"isRequired\" : true , \"name\" : \"sensortag.address\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"TEMP_AMBIENT\" , \"description\" : \"sensor.name\" , \"id\" : \"sensor.name\" , \"isRequired\" : true , \"name\" : \"sensor.name\" , \"option\" : [ { \"label\" : \"TEMP_AMBIENT\" , \"value\" : \"TEMP_AMBIENT\" }, { \"label\" : \"TEMP_TARGET\" , \"value\" : \"TEMP_TARGET\" }, { \"label\" : \"HUMIDITY\" , \"value\" : \"HUMIDITY\" }, { \"label\" : \"ACCELERATION_X\" , \"value\" : \"ACCELERATION_X\" }, { \"label\" : \"ACCELERATION_Y\" , \"value\" : \"ACCELERATION_Y\" }, { \"label\" : \"ACCELERATION_Z\" , \"value\" : \"ACCELERATION_Z\" }, { \"label\" : \"MAGNETIC_X\" , \"value\" : \"MAGNETIC_X\" }, { \"label\" : \"MAGNETIC_Y\" , \"value\" : \"MAGNETIC_Y\" }, { \"label\" : \"MAGNETIC_Z\" , \"value\" : \"MAGNETIC_Z\" }, { \"label\" : \"GYROSCOPE_X\" , \"value\" : \"GYROSCOPE_X\" }, { \"label\" : \"GYROSCOPE_Y\" , \"value\" : \"GYROSCOPE_Y\" }, { \"label\" : \"GYROSCOPE_Z\" , \"value\" : \"GYROSCOPE_Z\" }, { \"label\" : \"LIGHT\" , \"value\" : \"LIGHT\" }, { \"label\" : \"PRESSURE\" , \"value\" : \"PRESSURE\" }, { \"label\" : \"GREEN_LED\" , \"value\" : \"GREEN_LED\" }, { \"label\" : \"RED_LED\" , \"value\" : \"RED_LED\" }, { \"label\" : \"BUZZER\" , \"value\" : \"BUZZER\" }, { \"label\" : \"KEYS\" , \"value\" : \"KEYS\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"1000\" , \"description\" : \"notification.period\" , \"id\" : \"notification.period\" , \"isRequired\" : true , \"name\" : \"notification.period\" , \"type\" : \"INTEGER\" } ], \"factoryPid\" : \"org.eclipse.kura.driver.ble.sensortag\" , \"pid\" : \"sensortag\" }","title":"DriverChannelDescriptor"},{"location":"kura-wires/wire-service-rest-v1/#wiregraphmetadata","text":"An object contiaining metatada describing Wire Components, Drivers and Assets Properties : wireComponentDefinitions : array optional See request specific documentation The list of Wire Component definitions array elements: object WireComponentDefinition driverOCDs : array optional See request specific documentation The list of Driver factory component OCDs array elements: object ComponentConfiguration driverChannelDescriptors : array optional See request specific documentation The list of Driver channel descriptors array elements: object DriverChannelDescriptor assetChannelDescriptor : array optional See request specific documentation The list of Asset specific channel configuration properties array elements: object AttributeDefinition { \"assetChannelDescriptor\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"description\" : \"Determines if the channel is enabled or not\" , \"id\" : \"+enabled\" , \"isRequired\" : true , \"name\" : \"enabled\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"Channel-1\" , \"description\" : \"Name of the Channel\" , \"id\" : \"+name\" , \"isRequired\" : true , \"name\" : \"name\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"READ\" , \"description\" : \"Type of the channel\" , \"id\" : \"+type\" , \"isRequired\" : true , \"name\" : \"type\" , \"option\" : [ { \"label\" : \"READ\" , \"value\" : \"READ\" }, { \"label\" : \"READ_WRITE\" , \"value\" : \"READ_WRITE\" }, { \"label\" : \"WRITE\" , \"value\" : \"WRITE\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"INTEGER\" , \"description\" : \"Value type of the channel\" , \"id\" : \"+value.type\" , \"isRequired\" : true , \"name\" : \"value.type\" , \"option\" : [ { \"label\" : \"BOOLEAN\" , \"value\" : \"BOOLEAN\" }, { \"label\" : \"BYTE_ARRAY\" , \"value\" : \"BYTE_ARRAY\" }, { \"label\" : \"DOUBLE\" , \"value\" : \"DOUBLE\" }, { \"label\" : \"INTEGER\" , \"value\" : \"INTEGER\" }, { \"label\" : \"LONG\" , \"value\" : \"LONG\" }, { \"label\" : \"FLOAT\" , \"value\" : \"FLOAT\" }, { \"label\" : \"STRING\" , \"value\" : \"STRING\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"description\" : \"Scale to be applied to the numeric value of the channel\" , \"id\" : \"+scale\" , \"isRequired\" : false , \"name\" : \"scale\" , \"type\" : \"DOUBLE\" }, { \"cardinality\" : 0 , \"description\" : \"Offset to be applied to the numeric value of the channel\" , \"id\" : \"+offset\" , \"isRequired\" : false , \"name\" : \"offset\" , \"type\" : \"DOUBLE\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"description\" : \"Unit associated to the value of the channel\" , \"id\" : \"+unit\" , \"isRequired\" : false , \"name\" : \"unit\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"Specifies if WireAsset should emit envelopes on Channel events\" , \"id\" : \"+listen\" , \"isRequired\" : true , \"name\" : \"listen\" , \"type\" : \"BOOLEAN\" } ], \"driverChannelDescriptors\" : [ { \"channelDescriptor\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"MyNode\" , \"description\" : \"node.id\" , \"id\" : \"node.id\" , \"isRequired\" : true , \"name\" : \"node.id\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"2\" , \"description\" : \"node.namespace.index\" , \"id\" : \"node.namespace.index\" , \"isRequired\" : true , \"name\" : \"node.namespace.index\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"DEFINED_BY_JAVA_TYPE\" , \"description\" : \"opcua.type\" , \"id\" : \"opcua.type\" , \"isRequired\" : true , \"name\" : \"opcua.type\" , \"option\" : [ { \"label\" : \"DEFINED_BY_JAVA_TYPE\" , \"value\" : \"DEFINED_BY_JAVA_TYPE\" }, { \"label\" : \"BOOLEAN\" , \"value\" : \"BOOLEAN\" }, { \"label\" : \"SBYTE\" , \"value\" : \"SBYTE\" }, { \"label\" : \"INT16\" , \"value\" : \"INT16\" }, { \"label\" : \"INT32\" , \"value\" : \"INT32\" }, { \"label\" : \"INT64\" , \"value\" : \"INT64\" }, { \"label\" : \"BYTE\" , \"value\" : \"BYTE\" }, { \"label\" : \"UINT16\" , \"value\" : \"UINT16\" }, { \"label\" : \"UINT32\" , \"value\" : \"UINT32\" }, { \"label\" : \"UINT64\" , \"value\" : \"UINT64\" }, { \"label\" : \"FLOAT\" , \"value\" : \"FLOAT\" }, { \"label\" : \"DOUBLE\" , \"value\" : \"DOUBLE\" }, { \"label\" : \"STRING\" , \"value\" : \"STRING\" }, { \"label\" : \"BYTE_STRING\" , \"value\" : \"BYTE_STRING\" }, { \"label\" : \"BYTE_ARRAY\" , \"value\" : \"BYTE_ARRAY\" }, { \"label\" : \"SBYTE_ARRAY\" , \"value\" : \"SBYTE_ARRAY\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"STRING\" , \"description\" : \"node.id.type\" , \"id\" : \"node.id.type\" , \"isRequired\" : true , \"name\" : \"node.id.type\" , \"option\" : [ { \"label\" : \"NUMERIC\" , \"value\" : \"NUMERIC\" }, { \"label\" : \"STRING\" , \"value\" : \"STRING\" }, { \"label\" : \"GUID\" , \"value\" : \"GUID\" }, { \"label\" : \"OPAQUE\" , \"value\" : \"OPAQUE\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"Value\" , \"description\" : \"attribute\" , \"id\" : \"attribute\" , \"isRequired\" : true , \"name\" : \"attribute\" , \"option\" : [ { \"label\" : \"NodeId\" , \"value\" : \"NodeId\" }, { \"label\" : \"NodeClass\" , \"value\" : \"NodeClass\" }, { \"label\" : \"BrowseName\" , \"value\" : \"BrowseName\" }, { \"label\" : \"DisplayName\" , \"value\" : \"DisplayName\" }, { \"label\" : \"Description\" , \"value\" : \"Description\" }, { \"label\" : \"WriteMask\" , \"value\" : \"WriteMask\" }, { \"label\" : \"UserWriteMask\" , \"value\" : \"UserWriteMask\" }, { \"label\" : \"IsAbstract\" , \"value\" : \"IsAbstract\" }, { \"label\" : \"Symmetric\" , \"value\" : \"Symmetric\" }, { \"label\" : \"InverseName\" , \"value\" : \"InverseName\" }, { \"label\" : \"ContainsNoLoops\" , \"value\" : \"ContainsNoLoops\" }, { \"label\" : \"EventNotifier\" , \"value\" : \"EventNotifier\" }, { \"label\" : \"Value\" , \"value\" : \"Value\" }, { \"label\" : \"DataType\" , \"value\" : \"DataType\" }, { \"label\" : \"ValueRank\" , \"value\" : \"ValueRank\" }, { \"label\" : \"ArrayDimensions\" , \"value\" : \"ArrayDimensions\" }, { \"label\" : \"AccessLevel\" , \"value\" : \"AccessLevel\" }, { \"label\" : \"UserAccessLevel\" , \"value\" : \"UserAccessLevel\" }, { \"label\" : \"MinimumSamplingInterval\" , \"value\" : \"MinimumSamplingInterval\" }, { \"label\" : \"Historizing\" , \"value\" : \"Historizing\" }, { \"label\" : \"Executable\" , \"value\" : \"Executable\" }, { \"label\" : \"UserExecutable\" , \"value\" : \"UserExecutable\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"1000\" , \"description\" : \"listen.sampling.interval\" , \"id\" : \"listen.sampling.interval\" , \"isRequired\" : true , \"name\" : \"listen.sampling.interval\" , \"type\" : \"DOUBLE\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"10\" , \"description\" : \"listen.queue.size\" , \"id\" : \"listen.queue.size\" , \"isRequired\" : true , \"name\" : \"listen.queue.size\" , \"type\" : \"LONG\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"description\" : \"listen.discard.oldest\" , \"id\" : \"listen.discard.oldest\" , \"isRequired\" : true , \"name\" : \"listen.discard.oldest\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"listen.subscribe.to.children\" , \"id\" : \"listen.subscribe.to.children\" , \"isRequired\" : true , \"name\" : \"listen.subscribe.to.children\" , \"type\" : \"BOOLEAN\" } ], \"factoryPid\" : \"org.eclipse.kura.driver.opcua\" , \"pid\" : \"opcuaDriver\" } ], \"driverOCDs\" : [ { \"definition\" : { \"ad\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"default-server\" , \"description\" : \"OPC-UA Endpoint IP Address\" , \"id\" : \"endpoint.ip\" , \"isRequired\" : true , \"name\" : \"Endpoint IP\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"53530\" , \"description\" : \"OPC-UA Endpoint Port\" , \"id\" : \"endpoint.port\" , \"isRequired\" : true , \"min\" : \"1\" , \"name\" : \"Endpoint port\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"OPC-UA-Server\" , \"description\" : \"OPC-UA Server Name\" , \"id\" : \"server.name\" , \"isRequired\" : false , \"name\" : \"Server Name\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"If set to true the driver will use the hostname, port, and server name parameters specified in the configuration instead of the values contained in endpoint descriptions fetched from the server.\" , \"id\" : \"force.endpoint.url\" , \"isRequired\" : false , \"name\" : \"Force endpoint URL\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"120\" , \"description\" : \"Session timeout (in seconds)\" , \"id\" : \"session.timeout\" , \"isRequired\" : true , \"name\" : \"Session timeout\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"60\" , \"description\" : \"Request timeout (in seconds)\" , \"id\" : \"request.timeout\" , \"isRequired\" : true , \"name\" : \"Request timeout\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"40\" , \"description\" : \"The time to wait for the server response to the 'Hello' message (in seconds)\" , \"id\" : \"acknowledge.timeout\" , \"isRequired\" : true , \"name\" : \"Acknowledge timeout\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"opc-ua client\" , \"description\" : \"OPC-UA application name\" , \"id\" : \"application.name\" , \"isRequired\" : true , \"name\" : \"Application name\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"urn:kura:opcua:client\" , \"description\" : \"OPC-UA application uri\" , \"id\" : \"application.uri\" , \"isRequired\" : true , \"name\" : \"Application URI\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"1000\" , \"description\" : \"The publish interval in milliseconds for the subscription created by the driver.\" , \"id\" : \"subscription.publish.interval\" , \"isRequired\" : true , \"name\" : \"Subscription publish interval\" , \"type\" : \"LONG\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"PFX or JKS Keystore\" , \"description\" : \"Absolute path of the PKCS or JKS keystore that contains the OPC-UA client certificate, private key and trusted server certificates\" , \"id\" : \"certificate.location\" , \"isRequired\" : true , \"name\" : \"Keystore path\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"0\" , \"description\" : \"Security Policy\" , \"id\" : \"security.policy\" , \"isRequired\" : true , \"name\" : \"Security policy\" , \"option\" : [ { \"label\" : \"None\" , \"value\" : \"0\" }, { \"label\" : \"Basic128Rsa15\" , \"value\" : \"1\" }, { \"label\" : \"Basic256\" , \"value\" : \"2\" }, { \"label\" : \"Basic256Sha256\" , \"value\" : \"3\" } ], \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"description\" : \"OPC-UA server username\" , \"id\" : \"username\" , \"isRequired\" : false , \"name\" : \"Username\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"description\" : \"OPC-UA server password\" , \"id\" : \"password\" , \"isRequired\" : false , \"name\" : \"Password\" , \"type\" : \"PASSWORD\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"client-ai\" , \"description\" : \"Alias for the client certificate in the keystore\" , \"id\" : \"keystore.client.alias\" , \"isRequired\" : true , \"name\" : \"Client certificate alias\" , \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"description\" : \"Specifies whether to enable or not server certificate verification\" , \"id\" : \"authenticate.server\" , \"isRequired\" : true , \"name\" : \"Enable server authentication\" , \"type\" : \"BOOLEAN\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"PKCS12\" , \"description\" : \"Keystore type\" , \"id\" : \"keystore.type\" , \"isRequired\" : true , \"name\" : \"Keystore type\" , \"option\" : [ { \"label\" : \"PKCS11\" , \"value\" : \"PKCS11\" }, { \"label\" : \"PKCS12\" , \"value\" : \"PKCS12\" }, { \"label\" : \"JKS\" , \"value\" : \"JKS\" } ], \"type\" : \"STRING\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"password\" , \"description\" : \"Configurable Property to set keystore password (default set to password)\" , \"id\" : \"keystore.password\" , \"isRequired\" : true , \"name\" : \"Keystore password\" , \"type\" : \"PASSWORD\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"200\" , \"description\" : \"Maximum number of items that will be included in a single request to the server.\" , \"id\" : \"max.request.items\" , \"isRequired\" : true , \"name\" : \"Max request items\" , \"type\" : \"INTEGER\" }, { \"cardinality\" : 0 , \"defaultValue\" : \"BROWSE_PATH\" , \"description\" : \"The format to be used for channel name for subtree subscriptions. If set to BROWSE_PATH, the channel name will contain the browse path of the source node relative to the subscription root. If set to NODE_ID, the name will contain the node id of the source node.\" , \"id\" : \"subtree.subscription.name.format\" , \"isRequired\" : true , \"name\" : \"Subtree subscription events channel name format\" , \"option\" : [ { \"label\" : \"BROWSE_PATH\" , \"value\" : \"BROWSE_PATH\" }, { \"label\" : \"NODE_ID\" , \"value\" : \"NODE_ID\" } ], \"type\" : \"STRING\" } ], \"description\" : \"OPC-UA Driver\" , \"id\" : \"org.eclipse.kura.driver.opcua\" , \"name\" : \"OpcUaDriver\" }, \"pid\" : \"org.eclipse.kura.driver.opcua\" } ], \"wireComponentDefinitions\" : [ { \"componentOCD\" : [ { \"cardinality\" : 0 , \"defaultValue\" : \"records[0].TIMER !== null && records[0].TIMER.getValue() > 10 && records[0]['TIMER'].getValue() < 30;\\n\" , \"description\" : \"The boolean expression to be evaluated by this component when a wire envelope is received.\" , \"id\" : \"condition\" , \"isRequired\" : true , \"name\" : \"condition\" , \"type\" : \"STRING\" } ], \"defaultInputPorts\" : 1 , \"defaultOutputPorts\" : 2 , \"factoryPid\" : \"org.eclipse.kura.wire.Conditional\" , \"inputPortNames\" : { \"0\" : \"if\" }, \"maxInputPorts\" : 1 , \"maxOutputPorts\" : 2 , \"minInputPorts\" : 1 , \"minOutputPorts\" : 2 , \"outputPortNames\" : { \"0\" : \"then\" , \"1\" : \"else\" } } ] }","title":"WireGraphMetadata"},{"location":"kura-wires/wire-service-rest-v1/#wire-graph-snapshot-example","text":"{ \"configs\" : [ { \"pid\" : \"org.eclipse.kura.wire.graph.WireGraphService\" , \"properties\" : { \"WireGraph\" : { \"type\" : \"STRING\" , \"value\" : \"{\\\"components\\\":[{\\\"pid\\\":\\\"timer\\\",\\\"inputPortCount\\\":0,\\\"outputPortCount\\\":1,\\\"renderingProperties\\\":{\\\"position\\\":{\\\"x\\\":-300,\\\"y\\\":-20},\\\"inputPortNames\\\":{},\\\"outputPortNames\\\":{}}},{\\\"pid\\\":\\\"logger\\\",\\\"inputPortCount\\\":1,\\\"outputPortCount\\\":0,\\\"renderingProperties\\\":{\\\"position\\\":{\\\"x\\\":-100,\\\"y\\\":-20},\\\"inputPortNames\\\":{},\\\"outputPortNames\\\":{}}}],\\\"wires\\\":[{\\\"emitter\\\":\\\"timer\\\",\\\"emitterPort\\\":0,\\\"receiver\\\":\\\"logger\\\",\\\"receiverPort\\\":0}]}\" } } }, { \"pid\" : \"timer\" , \"properties\" : { \"componentDescription\" : { \"type\" : \"STRING\" , \"value\" : \"A wire component that fires a ticking event on every configured interval\" }, \"componentId\" : { \"type\" : \"STRING\" , \"value\" : \"timer\" }, \"componentName\" : { \"type\" : \"STRING\" , \"value\" : \"Timer\" }, \"cron.interval\" : { \"type\" : \"STRING\" , \"value\" : \"0/10 * * * * ?\" }, \"emitter.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 1 }, \"factoryComponent\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Timer\" }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"timer\" }, \"receiver.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"service.factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Timer\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Timer-1642493602000-13\" }, \"simple.custom.first.tick.interval\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"simple.first.tick.policy\" : { \"type\" : \"STRING\" , \"value\" : \"DEFAULT\" }, \"simple.interval\" : { \"type\" : \"INTEGER\" , \"value\" : 10 }, \"simple.time.unit\" : { \"type\" : \"STRING\" , \"value\" : \"SECONDS\" }, \"type\" : { \"type\" : \"STRING\" , \"value\" : \"SIMPLE\" } } }, { \"pid\" : \"logger\" , \"properties\" : { \"componentDescription\" : { \"type\" : \"STRING\" , \"value\" : \"A wire component which logs data as received from upstream connected Wire Components\" }, \"componentId\" : { \"type\" : \"STRING\" , \"value\" : \"logger\" }, \"componentName\" : { \"type\" : \"STRING\" , \"value\" : \"Logger\" }, \"emitter.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"factoryComponent\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Logger\" }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"logger\" }, \"log.verbosity\" : { \"type\" : \"STRING\" , \"value\" : \"QUIET\" }, \"receiver.port.count\" : { \"type\" : \"INTEGER\" , \"value\" : 1 }, \"service.factoryPid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Logger\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.wire.Logger-1642493602046-14\" } } } ] }","title":"Wire Graph snapshot example"},{"location":"kura-wires/wires-mqtt-namespace/","text":"Wires MQTT Namespace The CloudPublisher is a WireComponent that converts a WireEnvelope in a KuraPayload and publishes it over MQTT. Each WireRecord in a WireEnvelope is trivially converted to a KuraPayload and published on a configurable semantic data or control topic. During this process, the emitter PID of the WireEnvelope is discarded. The CloudPublisher is agnostic with respect to the contents of the WireEnvelope. It does not know for example if a WireEnvelope contains data readings emitted from a WireAsset. On the other hand, WireAssetS are first-class citizens of a Wire graph and the source of the information which is processed by the downstream Wire components. Eventually, the WireEnvelope representing the output of the processing is connected to a CloudPublisher and published to a Cloud platform. In the simplest case, a WireAsset is directly connected to a CloudPublisher and it would be useful to publish the telemetry data under a well-known topic namespace, for example the following full topic: <accountName>/<deviceID>/W1/A1/<assetName> In this case ${assetName} matches the emitterPID of the WireEnvelope emitted by the WireAsset and received by a CloudPublisher. Interested applications can then subscribe to (or query a message datastore for): <accountName>/<deviceID>/W1/# for all Wires (W) topics <accountName>/<deviceID>/W1/A1/# for all WireAsset (W/A) topics <accountName>/<deviceID>/W1/A1/<assetName> for all topics for a specific WireAsset In a more complex scenario there might be filters between the WireAsset \u201csource\u201d and the CloudPublisher \u201csink\u201d and the emitterPID of the WireEnvelope received by the publisher no longer matches the emitterPID of the WireEnvelope emitted by the WireAsset. However the published data still represents \u201cAsset\u201d (filtered) data and should be published under the topic above. The Kura Wires model haven\u2019t the notion of source of an WireEnvelope since a given WireEnvelope instance does not move across the graph but only from one WireEmitter to downstream WireReceiverS that are free to emit something semantically different. To overcome this issue: The CloudPublisher can be configured with a \u201csemantic topic template\u201d like W1/A1/$assetName where tokens prefixed with $ will be expanded to the value of a property with the same name in a WireEnvelope\u2019s WireRecord. Into the WireAsset, it is possible to add an assetName property to the WireEnvelope\u2019s WireRecord.","title":"Wires MQTT Namespace"},{"location":"kura-wires/wires-mqtt-namespace/#wires-mqtt-namespace","text":"The CloudPublisher is a WireComponent that converts a WireEnvelope in a KuraPayload and publishes it over MQTT. Each WireRecord in a WireEnvelope is trivially converted to a KuraPayload and published on a configurable semantic data or control topic. During this process, the emitter PID of the WireEnvelope is discarded. The CloudPublisher is agnostic with respect to the contents of the WireEnvelope. It does not know for example if a WireEnvelope contains data readings emitted from a WireAsset. On the other hand, WireAssetS are first-class citizens of a Wire graph and the source of the information which is processed by the downstream Wire components. Eventually, the WireEnvelope representing the output of the processing is connected to a CloudPublisher and published to a Cloud platform. In the simplest case, a WireAsset is directly connected to a CloudPublisher and it would be useful to publish the telemetry data under a well-known topic namespace, for example the following full topic: <accountName>/<deviceID>/W1/A1/<assetName> In this case ${assetName} matches the emitterPID of the WireEnvelope emitted by the WireAsset and received by a CloudPublisher. Interested applications can then subscribe to (or query a message datastore for): <accountName>/<deviceID>/W1/# for all Wires (W) topics <accountName>/<deviceID>/W1/A1/# for all WireAsset (W/A) topics <accountName>/<deviceID>/W1/A1/<assetName> for all topics for a specific WireAsset In a more complex scenario there might be filters between the WireAsset \u201csource\u201d and the CloudPublisher \u201csink\u201d and the emitterPID of the WireEnvelope received by the publisher no longer matches the emitterPID of the WireEnvelope emitted by the WireAsset. However the published data still represents \u201cAsset\u201d (filtered) data and should be published under the topic above. The Kura Wires model haven\u2019t the notion of source of an WireEnvelope since a given WireEnvelope instance does not move across the graph but only from one WireEmitter to downstream WireReceiverS that are free to emit something semantically different. To overcome this issue: The CloudPublisher can be configured with a \u201csemantic topic template\u201d like W1/A1/$assetName where tokens prefixed with $ will be expanded to the value of a property with the same name in a WireEnvelope\u2019s WireRecord. Into the WireAsset, it is possible to add an assetName property to the WireEnvelope\u2019s WireRecord.","title":"Wires MQTT Namespace"},{"location":"kura-wires/multiport-wire-components/join-component/","text":"Join Component The Join Component is a Multiport-enabled component that merges into a single Wire Envelope the properties contained in the envelopes received in the input ports. It is provided by default in every Kura installation. In the image above a simple usage example of the Join component: two timers simulate separate paths in the graph and the envelopes received by the Conditional component are then merged into a single Wire Envelope that is then received by the logger component. The behaviour of the Join component is specified by the barrier property.","title":"Join Component"},{"location":"kura-wires/multiport-wire-components/join-component/#join-component","text":"The Join Component is a Multiport-enabled component that merges into a single Wire Envelope the properties contained in the envelopes received in the input ports. It is provided by default in every Kura installation. In the image above a simple usage example of the Join component: two timers simulate separate paths in the graph and the envelopes received by the Conditional component are then merged into a single Wire Envelope that is then received by the logger component. The behaviour of the Join component is specified by the barrier property.","title":"Join Component"},{"location":"kura-wires/multiport-wire-components/mathematical-components-example/","text":"Mathematical Components Example Mathematical Wire components can be installed from the Eclipse Marketplace . For these examples, the Wire Math Multiport Components DP will be used, but other more specific operators can be found on the marketplace (like trigonometric functions). The following Multiport-enabled Mathematical examples are provided: Sum Difference Multiplication Division Sum Difference Multiplication Division","title":"Mathematical Components Example"},{"location":"kura-wires/multiport-wire-components/mathematical-components-example/#mathematical-components-example","text":"Mathematical Wire components can be installed from the Eclipse Marketplace . For these examples, the Wire Math Multiport Components DP will be used, but other more specific operators can be found on the marketplace (like trigonometric functions). The following Multiport-enabled Mathematical examples are provided: Sum Difference Multiplication Division","title":"Mathematical Components Example"},{"location":"kura-wires/multiport-wire-components/mathematical-components-example/#sum","text":"","title":"Sum"},{"location":"kura-wires/multiport-wire-components/mathematical-components-example/#difference","text":"","title":"Difference"},{"location":"kura-wires/multiport-wire-components/mathematical-components-example/#multiplication","text":"","title":"Multiplication"},{"location":"kura-wires/multiport-wire-components/mathematical-components-example/#division","text":"","title":"Division"},{"location":"kura-wires/multiport-wire-components/multiport-wire-components/","text":"Multiport Wire Components In order to allow a better routing of data through the Wire Graph, Kura introduces a new class of Wire components named Multiport Wire Components . With the addition of this new functionality, a compatible component instance can be defined with an arbitrary number of input and output ports. In the example provided, we have two components in the Wire Composer: the Conditional component that implements the if-then-else logic the Join component that joins into a single Wire the data processed by two separate branches of a graph Those components are available in every default installation of Kura. In order to show the potentialities of the new APIs, in the Eclipse Kura Marketplace and in the Kura downloads page, are available few more multiport-enabled components for Mathematical processing. Convert a Component to a Multiport Component Component Configuration Changes The following properties need to be specified in the component configuration: input.cardinality.minimum : an integer that specifies the minimum number of input ports that the component can be configured to manage. input.cardinality.maximum : an integer that specifies the maximum number of input ports that the component can be configured to manage. input.cardinality.default : an integer that specifies the default number of input ports that the component will be created with, if not specified in a different way. output.cardinality.minimum : an integer that specifies the minimum number of output ports that the component can be configured to manage. output.cardinality.maximum : an integer that specifies the maximum number of output ports that the component can be configured to manage. output.cardinality.default : an integer that specifies the default number of output ports that the component will be created with, if not specified in a different way. input.port.names : optional mapping between input ports and friendly names output.port.names : optional mapping between output ports and friendly names The component should also provide service interface org.eclipse.kura.wire.WireComponent Code Changes To leverage all the new Multiport functionalities, a Multiport-enabled component must use the newly introduced MultiportWireSupport APIs that provide support to get the list of Emitter and Receiver Ports, as well as to create a new Wire Envelope from a list of Wire Records. For the conditional component, that has two output ports, the following code allows to get the proper Wire Support from the Wire Helper Service and to get the then and else ports to be used to push the processed envelopes. this . wireSupport = ( MultiportWireSupport ) this . wireHelperService . newWireSupport ( this ); final List < EmitterPort > emitterPorts = this . wireSupport . getEmitterPorts (); this . thenPort = emitterPorts . get ( 0 ); this . elsePort = emitterPorts . get ( 1 ); To emit the result, the code has to be adapted to use the Wire Support to create the Wire Envelope that has to be sent. Effectively, the envelope is sent to the corresponding wire invoking the emit method of the corresponding Port, as shown below. final WireEnvelope outputEnvelope = this . wireSupport . createWireEnvelope ( inputRecords ); if (( Boolean ) decision ) { this . thenPort . emit ( outputEnvelope ); } else { this . elsePort . emit ( outputEnvelope ); }","title":"Multiport Wire Components"},{"location":"kura-wires/multiport-wire-components/multiport-wire-components/#multiport-wire-components","text":"In order to allow a better routing of data through the Wire Graph, Kura introduces a new class of Wire components named Multiport Wire Components . With the addition of this new functionality, a compatible component instance can be defined with an arbitrary number of input and output ports. In the example provided, we have two components in the Wire Composer: the Conditional component that implements the if-then-else logic the Join component that joins into a single Wire the data processed by two separate branches of a graph Those components are available in every default installation of Kura. In order to show the potentialities of the new APIs, in the Eclipse Kura Marketplace and in the Kura downloads page, are available few more multiport-enabled components for Mathematical processing.","title":"Multiport Wire Components"},{"location":"kura-wires/multiport-wire-components/multiport-wire-components/#convert-a-component-to-a-multiport-component","text":"","title":"Convert a Component to a Multiport Component"},{"location":"kura-wires/multiport-wire-components/multiport-wire-components/#component-configuration-changes","text":"The following properties need to be specified in the component configuration: input.cardinality.minimum : an integer that specifies the minimum number of input ports that the component can be configured to manage. input.cardinality.maximum : an integer that specifies the maximum number of input ports that the component can be configured to manage. input.cardinality.default : an integer that specifies the default number of input ports that the component will be created with, if not specified in a different way. output.cardinality.minimum : an integer that specifies the minimum number of output ports that the component can be configured to manage. output.cardinality.maximum : an integer that specifies the maximum number of output ports that the component can be configured to manage. output.cardinality.default : an integer that specifies the default number of output ports that the component will be created with, if not specified in a different way. input.port.names : optional mapping between input ports and friendly names output.port.names : optional mapping between output ports and friendly names The component should also provide service interface org.eclipse.kura.wire.WireComponent","title":"Component Configuration Changes"},{"location":"kura-wires/multiport-wire-components/multiport-wire-components/#code-changes","text":"To leverage all the new Multiport functionalities, a Multiport-enabled component must use the newly introduced MultiportWireSupport APIs that provide support to get the list of Emitter and Receiver Ports, as well as to create a new Wire Envelope from a list of Wire Records. For the conditional component, that has two output ports, the following code allows to get the proper Wire Support from the Wire Helper Service and to get the then and else ports to be used to push the processed envelopes. this . wireSupport = ( MultiportWireSupport ) this . wireHelperService . newWireSupport ( this ); final List < EmitterPort > emitterPorts = this . wireSupport . getEmitterPorts (); this . thenPort = emitterPorts . get ( 0 ); this . elsePort = emitterPorts . get ( 1 ); To emit the result, the code has to be adapted to use the Wire Support to create the Wire Envelope that has to be sent. Effectively, the envelope is sent to the corresponding wire invoking the emit method of the corresponding Port, as shown below. final WireEnvelope outputEnvelope = this . wireSupport . createWireEnvelope ( inputRecords ); if (( Boolean ) decision ) { this . thenPort . emit ( outputEnvelope ); } else { this . elsePort . emit ( outputEnvelope ); }","title":"Code Changes"},{"location":"kura-wires/script-components/graalvm-conditional-component/","text":"GraalVM\u2122 Conditional Component The Conditional Component is a multiport-enabled component that implements the if-then-else logic in the Wire Composer. In the image above a simple usage example of the conditional component: a timer ticks and the envelope is received by the conditional component. If the timer has an even number of seconds, then it will evaluate to true and forward the received envelope to the then port: the 'verbose' logger will receive the input. The choice between the two ports is performed based on a condition expressed in the component configuration as in the image below.","title":"GraalVM&trade; Conditional Component"},{"location":"kura-wires/script-components/graalvm-conditional-component/#graalvm-conditional-component","text":"The Conditional Component is a multiport-enabled component that implements the if-then-else logic in the Wire Composer. In the image above a simple usage example of the conditional component: a timer ticks and the envelope is received by the conditional component. If the timer has an even number of seconds, then it will evaluate to true and forward the received envelope to the then port: the 'verbose' logger will receive the input. The choice between the two ports is performed based on a condition expressed in the component configuration as in the image below.","title":"GraalVM&trade; Conditional Component"},{"location":"kura-wires/script-components/graalvm-filter-component/","text":"GraalVM\u2122 Filter Component The Filter Component provides scripting functionalities in Kura Wires using the GraalVM\u2122 JavaScript engine: The script execution is triggered when a wire envelope is received by the filter component. It is possible to access the received envelope and inspect the wire records contained in it from the script. The script can optionally emit a wire envelope containing one or more wire records for each wire envelope received. The script context is persisted across multiple executions, allowing to perform stateful computations like running a counter, performing time averages etc. A slf4j Logger is available to the script for debugging purposes. The script context is restricted to allow only Wires-related processing. Any attempt to load additional Java classes will fail. The default configuration contains an example script describing the component usage, it can be executed connecting a Timer and a Logger component. Usage The following global variables are available to the script: input : an object that represents the received wire envelope. output : an object that allows to emit wire records. logger : a slf4j logger. The following utility functions are available (see Creating and emitting wire records for usage): newWireRecord(Map<String, TypedValue<?>) -> WireRecord newByteArray(int) -> byte[] newBooleanValue(boolean) -> TypedValue newByteArrayValue(byte[]) -> TypedValue newDoubleValue(number) -> TypedValue newIntegerValue(number) -> TypedValue newLongValue(number) -> TypedValue newStringValue(object) -> TypedValue The following global constants expose the org.eclipse.kura.type.DataType enum variants: BOOLEAN BYTE_ARRAY DOUBLE FLOAT INTEGER LONG STRING Received envelope The received envelope is represented by the input global variable and is mapped in Javascript as a WireEnvelope object. GraalVM Javascript Engine allows a 1:1 mapping of Java Objects to JavaScript ones. Hence, it is possible to access the WireRecord s of the envelope and the emitter pid using the methods specified in the WireEnvelope Kura API : logger . info ( 'Emitter pid is {}' , input . getEmitterPid ()) var records = input . getRecords () The records array can be iterated to extract the WireRecord properties (reference the WireRecord Kura API ): for ( let i = 0 ; i < records . length ; i ++ ) { // WireRecord.getProperties() returns a map of String - TypedValue for ( const [ keyString , typedValue ] of records [ i ]. getProperties ()) { logger . info ( 'The {}-th record contains:' \\ , String ( i )) logger . info ( '{}={}\\n' , keyString , typedValue . getValue ()) } } As in the example above, wireRecord.getProperties returns a map of String, TypedValue . Refer to the TypedValue Kura API for the accessible public methods list. Creating and emitting wire records New mutable WireRecord instances can be created using the newWireRecord(Map<String, TypedValue<?>) function. The properties of a mutable WireRecord can be modified by setting Javascript object properties. The properties of a WireRecord object must be instances of the TypedValue class created using the new<type>Value() family of functions. Setting different kind of objects as properties of a WireRecord will result in an exception. The output global variable is an object that can be used for emitting WireRecord s. This object contains a list of WireRecord s that will be emitted when the script execution finishes if no exceptions are thrown. The following code is an example of how to emit a list containing a single WireRecord : var output = new Array () var outputMap = new Object () var byteArray = newByteArray ( 4 ) byteArray [ 0 ] = 1 byteArray [ 1 ] = 2 byteArray [ 2 ] = 0xaa byteArray [ 3 ] = 0xbb outputMap [ 'example.integer' ] = newIntegerValue ( 10 ) outputMap [ 'example.long' ] = newLongValue ( 100 ) outputMap [ 'example.float' ] = newFloatValue ( 1.014 ) outputMap [ 'example.double' ] = newDoubleValue ( 10.12 ) outputMap [ 'example.boolean' ] = newBooleanValue ( true ) outputMap [ 'example.string' ] = newStringValue ( 'Hello World!' ) outputMap [ 'example.byte.array' ] = newByteArrayValue ( byteArray ) output [ 0 ] = newWireRecord ( outputMap ) Script context The script.context.drop option allows to reset the script context. If set to true the script context will be dropped every time the component configuration is updated, resetting the value of any persisted variable. In the example below, with script.context.drop=false the following script will preserve the value of counter across executions. Setting script.context.drop=true will cause counter to be undefined every time the component is triggered. counter = typeof ( counter ) === 'undefined' ? 0 // counter is undefined, initialise it to zero : counter ; // counter is already defined, keep the previous value","title":"GraalVM&trade; Filter Component"},{"location":"kura-wires/script-components/graalvm-filter-component/#graalvm-filter-component","text":"The Filter Component provides scripting functionalities in Kura Wires using the GraalVM\u2122 JavaScript engine: The script execution is triggered when a wire envelope is received by the filter component. It is possible to access the received envelope and inspect the wire records contained in it from the script. The script can optionally emit a wire envelope containing one or more wire records for each wire envelope received. The script context is persisted across multiple executions, allowing to perform stateful computations like running a counter, performing time averages etc. A slf4j Logger is available to the script for debugging purposes. The script context is restricted to allow only Wires-related processing. Any attempt to load additional Java classes will fail. The default configuration contains an example script describing the component usage, it can be executed connecting a Timer and a Logger component.","title":"GraalVM&trade; Filter Component"},{"location":"kura-wires/script-components/graalvm-filter-component/#usage","text":"The following global variables are available to the script: input : an object that represents the received wire envelope. output : an object that allows to emit wire records. logger : a slf4j logger. The following utility functions are available (see Creating and emitting wire records for usage): newWireRecord(Map<String, TypedValue<?>) -> WireRecord newByteArray(int) -> byte[] newBooleanValue(boolean) -> TypedValue newByteArrayValue(byte[]) -> TypedValue newDoubleValue(number) -> TypedValue newIntegerValue(number) -> TypedValue newLongValue(number) -> TypedValue newStringValue(object) -> TypedValue The following global constants expose the org.eclipse.kura.type.DataType enum variants: BOOLEAN BYTE_ARRAY DOUBLE FLOAT INTEGER LONG STRING","title":"Usage"},{"location":"kura-wires/script-components/graalvm-filter-component/#received-envelope","text":"The received envelope is represented by the input global variable and is mapped in Javascript as a WireEnvelope object. GraalVM Javascript Engine allows a 1:1 mapping of Java Objects to JavaScript ones. Hence, it is possible to access the WireRecord s of the envelope and the emitter pid using the methods specified in the WireEnvelope Kura API : logger . info ( 'Emitter pid is {}' , input . getEmitterPid ()) var records = input . getRecords () The records array can be iterated to extract the WireRecord properties (reference the WireRecord Kura API ): for ( let i = 0 ; i < records . length ; i ++ ) { // WireRecord.getProperties() returns a map of String - TypedValue for ( const [ keyString , typedValue ] of records [ i ]. getProperties ()) { logger . info ( 'The {}-th record contains:' \\ , String ( i )) logger . info ( '{}={}\\n' , keyString , typedValue . getValue ()) } } As in the example above, wireRecord.getProperties returns a map of String, TypedValue . Refer to the TypedValue Kura API for the accessible public methods list.","title":"Received envelope"},{"location":"kura-wires/script-components/graalvm-filter-component/#creating-and-emitting-wire-records","text":"New mutable WireRecord instances can be created using the newWireRecord(Map<String, TypedValue<?>) function. The properties of a mutable WireRecord can be modified by setting Javascript object properties. The properties of a WireRecord object must be instances of the TypedValue class created using the new<type>Value() family of functions. Setting different kind of objects as properties of a WireRecord will result in an exception. The output global variable is an object that can be used for emitting WireRecord s. This object contains a list of WireRecord s that will be emitted when the script execution finishes if no exceptions are thrown. The following code is an example of how to emit a list containing a single WireRecord : var output = new Array () var outputMap = new Object () var byteArray = newByteArray ( 4 ) byteArray [ 0 ] = 1 byteArray [ 1 ] = 2 byteArray [ 2 ] = 0xaa byteArray [ 3 ] = 0xbb outputMap [ 'example.integer' ] = newIntegerValue ( 10 ) outputMap [ 'example.long' ] = newLongValue ( 100 ) outputMap [ 'example.float' ] = newFloatValue ( 1.014 ) outputMap [ 'example.double' ] = newDoubleValue ( 10.12 ) outputMap [ 'example.boolean' ] = newBooleanValue ( true ) outputMap [ 'example.string' ] = newStringValue ( 'Hello World!' ) outputMap [ 'example.byte.array' ] = newByteArrayValue ( byteArray ) output [ 0 ] = newWireRecord ( outputMap )","title":"Creating and emitting wire records"},{"location":"kura-wires/script-components/graalvm-filter-component/#script-context","text":"The script.context.drop option allows to reset the script context. If set to true the script context will be dropped every time the component configuration is updated, resetting the value of any persisted variable. In the example below, with script.context.drop=false the following script will preserve the value of counter across executions. Setting script.context.drop=true will cause counter to be undefined every time the component is triggered. counter = typeof ( counter ) === 'undefined' ? 0 // counter is undefined, initialise it to zero : counter ; // counter is already defined, keep the previous value","title":"Script context"},{"location":"kura-wires/script-components/introduction/","text":"Introduction to the Script Components The Script Components allow for performing more complex operations on the received Wire Envelopes using a JavaScript Engine. Depending if the target device is running on Java 8 or Java 17, there are several components to choose from. For devices running a JRE with Nashorn JS Engine (Java < 15), a Script Filter and a Conditional Component are provided: Nashorn-based Script Filter Nashorn-based Conditional Component The above components will run only on Java < 15 since the Nashorn dependency is not included in the DP. The two components are available in the Eclipse Marketplace as two separate entries. These components are deprecated as of Kura version 5.3. The following components instead have the GraalVM\u2122 JavaScript Engine included in the DP and therefore do not require a JRE with Nashorn JS Engine: GraalVM\u2122 Filter Component GraalVM\u2122 Conditional Component The input scripts for these components are not compatible with the Nashorn implementations Script Filter and Conditional Component . Both components are shipped as a single DP named org.eclipse.kura.wire.script.tools . Since the JS engine dependency is shipped along with the DP, these components will work on both Java 8 and Java 17 devices but the DP is bigger in size (~18,6 MB).","title":"Introduction"},{"location":"kura-wires/script-components/introduction/#introduction-to-the-script-components","text":"The Script Components allow for performing more complex operations on the received Wire Envelopes using a JavaScript Engine. Depending if the target device is running on Java 8 or Java 17, there are several components to choose from. For devices running a JRE with Nashorn JS Engine (Java < 15), a Script Filter and a Conditional Component are provided: Nashorn-based Script Filter Nashorn-based Conditional Component The above components will run only on Java < 15 since the Nashorn dependency is not included in the DP. The two components are available in the Eclipse Marketplace as two separate entries. These components are deprecated as of Kura version 5.3. The following components instead have the GraalVM\u2122 JavaScript Engine included in the DP and therefore do not require a JRE with Nashorn JS Engine: GraalVM\u2122 Filter Component GraalVM\u2122 Conditional Component The input scripts for these components are not compatible with the Nashorn implementations Script Filter and Conditional Component . Both components are shipped as a single DP named org.eclipse.kura.wire.script.tools . Since the JS engine dependency is shipped along with the DP, these components will work on both Java 8 and Java 17 devices but the DP is bigger in size (~18,6 MB).","title":"Introduction to the Script Components"},{"location":"kura-wires/script-components/nashorn-conditional-component/","text":"Nashorn Conditional Component Warning This component is deprecated as of Kura version 5.3 since no more available on Java 17. The Conditional component is a multiport-enabled component that implements the if-then-else logic in the Wire Composer. It is provided by default in every Kura installation. In the image above a simple usage example of the Conditional component: a timer ticks and the envelope is received by the Conditional component. The message is then processed and can be sent downstream to the logger component ( then port) or to a publisher ( else port). The choice between the two ports is performed based on a condition expressed in the Conditional component configuration.","title":"Nashorn Conditional Component"},{"location":"kura-wires/script-components/nashorn-conditional-component/#nashorn-conditional-component","text":"Warning This component is deprecated as of Kura version 5.3 since no more available on Java 17. The Conditional component is a multiport-enabled component that implements the if-then-else logic in the Wire Composer. It is provided by default in every Kura installation. In the image above a simple usage example of the Conditional component: a timer ticks and the envelope is received by the Conditional component. The message is then processed and can be sent downstream to the logger component ( then port) or to a publisher ( else port). The choice between the two ports is performed based on a condition expressed in the Conditional component configuration.","title":"Nashorn Conditional Component"},{"location":"kura-wires/script-components/nashorn-script-filter/","text":"Nashorn Script Filter Warning This component is deprecated as of Kura version 5.3 since no more available on Java 17. The Script Filter Component provides scripting functionalities in Kura Wires using the Nashorn Javascript engine: The script execution is triggered when a wire envelope is received by the filter component. It is possible to access to the received envelope and inspect the wire records contained in it form the script. The script can optionally emit a wire envelope containing one or more wire records for each wire envelope received. The script context is persisted across multiple executions, allowing to perform stateful computations like running a counter, performing time averages etc. A slf4j Logger is available to the script for debug purposes. The script context is restricted in order to allow only Wires related processing. Any attempt to load additional Java classes will fail. The default configuration contains an example script describing the component usage, it can be executed connecting a Timer and a Logger component. Usage The following global variables are available to the script: input : an object that represents the received wire envelope. output : an object that allows to emit wire records. logger : a slf4j logger The following utility functions are available (see Creating and emitting wire records for usage): newWireRecord(void) -> WireRecordWrapper newByteArray(void) -> byte[] newBooleanValue(boolean) -> TypedValue newByteArrayValue(byte[]) -> TypedValue newDoubleValue(number) -> TypedValue newFloatValue(number) -> TypedValue newIntegerValue(number) -> TypedValue newLongValue(number) -> TypedValue newStringValue(object) -> TypedValue The following global constants expose the org.eclipse.kura.type.DataType enum variants: BOOLEAN BYTE_ARRAY DOUBLE FLOAT INTEGER LONG STRING Received envelope The received envelope is represented by the input global variable and it has the following properties: emitterPid : the emitter pid of the received envelope as a String. records : an immutable array that represents the Wire Records contained in the Wire Envelope. Each element of the records array is an immutable object that represents a received wire record. Wire record properties are directly mapped to Javascript object properties, and are instances of the org.eclipse.kura.type.TypedValue class. Each Wire Record property has the following methods available: getType(void) -> DataType : Returns the type of the value, as a DataType enum variant. Can be matched against the data type constants described above. getValue(void) -> Object : Returns the actual value. The javascript objects referred as WireRecords in this guide are not instances of the org.eclipse.kura.wire.WireRecord class, but are wrappers that map WireRecord properties into javascript properties. The following code is a simple example script that show how to use the filter: // get the first record from the envelope var record = input . records [ 0 ] // let's assume it contains the LED boolean property and the TEMPERATURE double property record . LED1 . getType () === BOOLEAN // evaluates to true if ( record . LED1 . getValue ()) { // LED1 is on } record . LED1 . getType () === DOUBLE // evaluates to true if ( record . TEMPERATURE . getValue () > 50 ) { // temperature is high, do something } Creating and emitting wire records New mutable WireRecord instances can be created using the newWireRecord(void) -> WireRecordWrapper function. The properties of a mutable WireRecord can be modified by setting Javascript object properties. The properties of a WireRecord object must be instances of the TypedValue class created using the new<type>Value() family of functions. Setting different kind of objects as properties of a WireRecord will result in an exception. The output global variable is an object that can be used for emitting WireRecords. This object contains a list of WireRecords that will be emitted when the script execution finishes, if no exceptions are thrown. New records can be added to the list using the add(WireRecordWrapper) function. It is also possible to emit records contained in the received WireEnvelope. The script filter will emit a wire envelope only if the WireRecord list is not empty when the script execution completes. The following code is an example about how to emit a value: var record = newWireRecord () var byteArray = newByteArray () byteArray [ 0 ] = 1 byteArray [ 1 ] = 2 byteArray [ 2 ] = 0xaa byteArray [ 3 ] = 0xbb record . LED1 = newBooleanValue ( true ) record . foo = newStringValue ( 'bar' ) record [ 'myprop' ] = newDoubleValue ( 123.456 ) record [ 'example.long' ] = newLongValue ( 100 ) record [ 'example.float' ] = newFloatValue ( 1.014 ) record [ 'example.byte.array' ] = newByteArrayValue ( byteArray ) output . add ( record ) Script context The script.context.drop option allows to reset the script context. If set to true the script context will be dropped every time the component configuration is updated, resetting the value of any persisted variable. In the example below, with script.context.drop=false the following script will preserve the value of counter across executions. Setting script.context.drop=true will cause counter to be undefined every time the component is triggered. counter = typeof ( counter ) === 'undefined' ? 0 // counter is undefined, initialise it to zero : counter ; // counter is already defined, keep the previous value","title":"Nashorn Script Filter"},{"location":"kura-wires/script-components/nashorn-script-filter/#nashorn-script-filter","text":"Warning This component is deprecated as of Kura version 5.3 since no more available on Java 17. The Script Filter Component provides scripting functionalities in Kura Wires using the Nashorn Javascript engine: The script execution is triggered when a wire envelope is received by the filter component. It is possible to access to the received envelope and inspect the wire records contained in it form the script. The script can optionally emit a wire envelope containing one or more wire records for each wire envelope received. The script context is persisted across multiple executions, allowing to perform stateful computations like running a counter, performing time averages etc. A slf4j Logger is available to the script for debug purposes. The script context is restricted in order to allow only Wires related processing. Any attempt to load additional Java classes will fail. The default configuration contains an example script describing the component usage, it can be executed connecting a Timer and a Logger component.","title":"Nashorn Script Filter"},{"location":"kura-wires/script-components/nashorn-script-filter/#usage","text":"The following global variables are available to the script: input : an object that represents the received wire envelope. output : an object that allows to emit wire records. logger : a slf4j logger The following utility functions are available (see Creating and emitting wire records for usage): newWireRecord(void) -> WireRecordWrapper newByteArray(void) -> byte[] newBooleanValue(boolean) -> TypedValue newByteArrayValue(byte[]) -> TypedValue newDoubleValue(number) -> TypedValue newFloatValue(number) -> TypedValue newIntegerValue(number) -> TypedValue newLongValue(number) -> TypedValue newStringValue(object) -> TypedValue The following global constants expose the org.eclipse.kura.type.DataType enum variants: BOOLEAN BYTE_ARRAY DOUBLE FLOAT INTEGER LONG STRING","title":"Usage"},{"location":"kura-wires/script-components/nashorn-script-filter/#received-envelope","text":"The received envelope is represented by the input global variable and it has the following properties: emitterPid : the emitter pid of the received envelope as a String. records : an immutable array that represents the Wire Records contained in the Wire Envelope. Each element of the records array is an immutable object that represents a received wire record. Wire record properties are directly mapped to Javascript object properties, and are instances of the org.eclipse.kura.type.TypedValue class. Each Wire Record property has the following methods available: getType(void) -> DataType : Returns the type of the value, as a DataType enum variant. Can be matched against the data type constants described above. getValue(void) -> Object : Returns the actual value. The javascript objects referred as WireRecords in this guide are not instances of the org.eclipse.kura.wire.WireRecord class, but are wrappers that map WireRecord properties into javascript properties. The following code is a simple example script that show how to use the filter: // get the first record from the envelope var record = input . records [ 0 ] // let's assume it contains the LED boolean property and the TEMPERATURE double property record . LED1 . getType () === BOOLEAN // evaluates to true if ( record . LED1 . getValue ()) { // LED1 is on } record . LED1 . getType () === DOUBLE // evaluates to true if ( record . TEMPERATURE . getValue () > 50 ) { // temperature is high, do something }","title":"Received envelope"},{"location":"kura-wires/script-components/nashorn-script-filter/#creating-and-emitting-wire-records","text":"New mutable WireRecord instances can be created using the newWireRecord(void) -> WireRecordWrapper function. The properties of a mutable WireRecord can be modified by setting Javascript object properties. The properties of a WireRecord object must be instances of the TypedValue class created using the new<type>Value() family of functions. Setting different kind of objects as properties of a WireRecord will result in an exception. The output global variable is an object that can be used for emitting WireRecords. This object contains a list of WireRecords that will be emitted when the script execution finishes, if no exceptions are thrown. New records can be added to the list using the add(WireRecordWrapper) function. It is also possible to emit records contained in the received WireEnvelope. The script filter will emit a wire envelope only if the WireRecord list is not empty when the script execution completes. The following code is an example about how to emit a value: var record = newWireRecord () var byteArray = newByteArray () byteArray [ 0 ] = 1 byteArray [ 1 ] = 2 byteArray [ 2 ] = 0xaa byteArray [ 3 ] = 0xbb record . LED1 = newBooleanValue ( true ) record . foo = newStringValue ( 'bar' ) record [ 'myprop' ] = newDoubleValue ( 123.456 ) record [ 'example.long' ] = newLongValue ( 100 ) record [ 'example.float' ] = newFloatValue ( 1.014 ) record [ 'example.byte.array' ] = newByteArrayValue ( byteArray ) output . add ( record )","title":"Creating and emitting wire records"},{"location":"kura-wires/script-components/nashorn-script-filter/#script-context","text":"The script.context.drop option allows to reset the script context. If set to true the script context will be dropped every time the component configuration is updated, resetting the value of any persisted variable. In the example below, with script.context.drop=false the following script will preserve the value of counter across executions. Setting script.context.drop=true will cause counter to be undefined every time the component is triggered. counter = typeof ( counter ) === 'undefined' ? 0 // counter is undefined, initialise it to zero : counter ; // counter is already defined, keep the previous value","title":"Script context"},{"location":"kura-wires/single-port-wire-components/ai-wire-component/","text":"AI Wire Component The component allows interacting with an InferenceEngineService to perform machine learning-related operations. For boards that are not explicitly made for AI, the component can be installed from the Eclipse Marketplace at this link . An InferenceEngineService is a Kura service that implements a simple API to interface with an Inference Engine. The Inference Engine allows to perform inference on trained Artificial Intelligence models commonly described by a file and some configuration for explaining its input and outputs. An example of Inference Engine implementation is the Nvidia\u2122 Triton Server inference engine . In a normal machine learning flow, the input is preprocessed before it is given to the machine learning algorithm, and the result is processed again to be adapted to the rest of the pipeline. Once these models are loaded in the engine, the AI wire component allows to specify the name of the models that are used in the pre-processing , infer , and post-processing steps. Only the infer model name is mandatory so that it is possible to just use the strictly necessary steps in case the pre/post-processing is performed directly by the infer step. Models Input and Output formats The AI wire component takes a WireEnvelope as an input, it processes its records and feeds them to the specified preprocessing or inference model. The outputs of the inference or the post-processing step are then reconverted into a wire record. This section explains the inputs and output formats that the wire component is expecting. Not specifying the models according to this contract will result in a non-functioning inference. The 3 inference steps are applied on each WireRecord contained in the input WireEnvelope . The inputs and outputs will have assigned the corresponding Kura DataType , which can be one of: BOOLEAN DOUBLE FLOAT INTEGER LONG STRING BYTE_ARRAY Reference to Introduction for the data types that are allowed to flow through the wires. The models that manage the input and the output must expect a list of inputs such that: each input corresponds to an entry of the WireRecord properties the entry key will become the input name (e.g. in the case of an asset, the channel name becomes the tensor name) input shape will be [1] In the following, two example configurations for Triton Inference Engine models are provided. A complete usage example that implements an Anomaly Detector using a RaspberryPi SenseHat is provided in the Kura examples repository . Input Specification Example Following, an example of a model configuration for the Nvidia\u2122 Triton Inference Engine . It expects the input from the WireEnvelope that contains a record with properties: ACCELERATION of type Float CHANNEL_0 of type Integer STREAM of type byte[] GYRO of type Boolean This record can be generated from an asset with channel names as above. The output will be a single tensor of type Float , of shape 1x13, and name OUT_PRE . Note that each input will have shape 1. na me : \"preprocessor\" backe n d : \"python\" i n pu t [ { na me : \"ACCELERATION\" da ta _ t ype : FP 32 dims : [ 1 ] } ] i n pu t [ { na me : \"CHANNEL_0\" da ta _ t ype : INT 32 dims : [ 1 ] } ] i n pu t [ { na me : \"STREAM\" da ta _ t ype : BYTES dims : [ 1 ] } ] i n pu t [ { na me : \"GYRO\" da ta _ t ype : BOOL dims : [ 1 ] } ] ou t pu t [ { na me : \"OUT_PRE\" da ta _ t ype : FP 32 dims : [ 13 ] } ] i nstan ce_group [{ ki n d : KIND_CPU }] Output Specification Example Following, an example of a Nvidia\u2122 Triton Inference Engine configuration that takes input IN_POST and produces outputs that will be mapped to a WireRecord with the properties as follows: - RESULT0 of type Boolean - RESULT1 of type Integer - RESULT2 of type byte[] - RESULT3 of type Float Note that each output will have shape 1. na me : \"postprocessor\" backe n d : \"python\" i n pu t [ { na me : \"IN_POST\" da ta _ t ype : FP 32 dims : [ 1 , 5 ] } ] ou t pu t [ { na me : \"RESULT0\" da ta _ t ype : BOOL dims : [ 1 ] } ] ou t pu t [ { na me : \"RESULT1\" da ta _ t ype : INT 32 dims : [ 1 ] } ] ou t pu t [ { na me : \"RESULT2\" da ta _ t ype : BYTES dims : [ 1 ] } ] ou t pu t [ { na me : \"RESULT3\" da ta _ t ype : FP 32 dims : [ 1 ] } ] i nstan ce_group [{ ki n d : KIND_CPU }]","title":"AI Wire Component"},{"location":"kura-wires/single-port-wire-components/ai-wire-component/#ai-wire-component","text":"The component allows interacting with an InferenceEngineService to perform machine learning-related operations. For boards that are not explicitly made for AI, the component can be installed from the Eclipse Marketplace at this link . An InferenceEngineService is a Kura service that implements a simple API to interface with an Inference Engine. The Inference Engine allows to perform inference on trained Artificial Intelligence models commonly described by a file and some configuration for explaining its input and outputs. An example of Inference Engine implementation is the Nvidia\u2122 Triton Server inference engine . In a normal machine learning flow, the input is preprocessed before it is given to the machine learning algorithm, and the result is processed again to be adapted to the rest of the pipeline. Once these models are loaded in the engine, the AI wire component allows to specify the name of the models that are used in the pre-processing , infer , and post-processing steps. Only the infer model name is mandatory so that it is possible to just use the strictly necessary steps in case the pre/post-processing is performed directly by the infer step.","title":"AI Wire Component"},{"location":"kura-wires/single-port-wire-components/ai-wire-component/#models-input-and-output-formats","text":"The AI wire component takes a WireEnvelope as an input, it processes its records and feeds them to the specified preprocessing or inference model. The outputs of the inference or the post-processing step are then reconverted into a wire record. This section explains the inputs and output formats that the wire component is expecting. Not specifying the models according to this contract will result in a non-functioning inference. The 3 inference steps are applied on each WireRecord contained in the input WireEnvelope . The inputs and outputs will have assigned the corresponding Kura DataType , which can be one of: BOOLEAN DOUBLE FLOAT INTEGER LONG STRING BYTE_ARRAY Reference to Introduction for the data types that are allowed to flow through the wires. The models that manage the input and the output must expect a list of inputs such that: each input corresponds to an entry of the WireRecord properties the entry key will become the input name (e.g. in the case of an asset, the channel name becomes the tensor name) input shape will be [1] In the following, two example configurations for Triton Inference Engine models are provided. A complete usage example that implements an Anomaly Detector using a RaspberryPi SenseHat is provided in the Kura examples repository .","title":"Models Input and Output formats"},{"location":"kura-wires/single-port-wire-components/ai-wire-component/#input-specification-example","text":"Following, an example of a model configuration for the Nvidia\u2122 Triton Inference Engine . It expects the input from the WireEnvelope that contains a record with properties: ACCELERATION of type Float CHANNEL_0 of type Integer STREAM of type byte[] GYRO of type Boolean This record can be generated from an asset with channel names as above. The output will be a single tensor of type Float , of shape 1x13, and name OUT_PRE . Note that each input will have shape 1. na me : \"preprocessor\" backe n d : \"python\" i n pu t [ { na me : \"ACCELERATION\" da ta _ t ype : FP 32 dims : [ 1 ] } ] i n pu t [ { na me : \"CHANNEL_0\" da ta _ t ype : INT 32 dims : [ 1 ] } ] i n pu t [ { na me : \"STREAM\" da ta _ t ype : BYTES dims : [ 1 ] } ] i n pu t [ { na me : \"GYRO\" da ta _ t ype : BOOL dims : [ 1 ] } ] ou t pu t [ { na me : \"OUT_PRE\" da ta _ t ype : FP 32 dims : [ 13 ] } ] i nstan ce_group [{ ki n d : KIND_CPU }]","title":"Input Specification Example"},{"location":"kura-wires/single-port-wire-components/ai-wire-component/#output-specification-example","text":"Following, an example of a Nvidia\u2122 Triton Inference Engine configuration that takes input IN_POST and produces outputs that will be mapped to a WireRecord with the properties as follows: - RESULT0 of type Boolean - RESULT1 of type Integer - RESULT2 of type byte[] - RESULT3 of type Float Note that each output will have shape 1. na me : \"postprocessor\" backe n d : \"python\" i n pu t [ { na me : \"IN_POST\" da ta _ t ype : FP 32 dims : [ 1 , 5 ] } ] ou t pu t [ { na me : \"RESULT0\" da ta _ t ype : BOOL dims : [ 1 ] } ] ou t pu t [ { na me : \"RESULT1\" da ta _ t ype : INT 32 dims : [ 1 ] } ] ou t pu t [ { na me : \"RESULT2\" da ta _ t ype : BYTES dims : [ 1 ] } ] ou t pu t [ { na me : \"RESULT3\" da ta _ t ype : FP 32 dims : [ 1 ] } ] i nstan ce_group [{ ki n d : KIND_CPU }]","title":"Output Specification Example"},{"location":"kura-wires/single-port-wire-components/db-store-and-filter/","text":"Wire Record Store and Wire Record Query This tutorial will present how to use Wire Record Store and Wire Record Query components and provide an example based on the OPC-UA simulated server already used in OPC-UA Application . The Wire Record Store component allows the wire graphs to interact with a persistend Wire Record store implementation, for example a SQL database. It stores in a user-defined collection all the envelopes received by the component. The Wire Record Query component, instead, can run a custom query on the attached store and emit the result on the wire. Note The Wire Record Store and Wire Record Query components have been introduced in Kura 5.3.0 as a replacement of the Db Store and Db Filter, that have been deprecated. The reason of the deprecation is the fact that Db Store and Db Filter only support databases that provide a JDBC interface. Moreover, the old Db Store interacts with the database using a set of hardcoded SQL queries. This fact makes it difficult to use it with different databases since the syntax of the queries is usually database-specific. The new components use the org.eclipse.kura.wire.store.provider.WireRecordStoreProvider and org.eclipse.kura.wire.store.provider.QueryableWireRecordStoreProvider APIs introduced in 5.3.0 allowing to use them with generic data store implementations. Please note that Wire Record Query component is not portable by nature, since it allows to execute an arbitrary user defined query. The new APIs allows to use it with non-JDBC data stores. The Wire Record Store component can be configured as follows: Record Collection Name : The name of the record collection that should be used. The implementation of the collection depends on the Wire Record Store implementation, if it is a SQL database, the collection will likely be a table. Maximum Record Collection Size : The maximum number of records that is possible to store in the collection. Cleanup Records Keep : The number of records in the collection to keep while performing a cleanup operation (if set to 0 all the records will be deleted). The cleanup operation is performed when a new record is inserted and the current size of the record collection is greater than the configured Maximum Record Collection Size . WireRecordStoreProvider Target Filter : Specifies, as an OSGi target filter, the pid of the of the Wire Record Store instance to be used. The Wire Record Query component can be configured as follows: Query : Query to be executed. The query syntax depends on the Queryable Wire Record Store implementation. Cache Expiration Interval (Seconds) : This component is capable of maintaining a cache of the records produced by the last query execution and emitting its contents on the Wire until it expires. This value specifies the cache validity interval in seconds. When cache expires, it will cause a new query execution. The query will be executed for every trigger received if the value is set to 0. QueryableWireRecordStoreProvider Target Filter : Specifies, as an OSGi target filter, the pid of the of the Queryable Wire Record Store instance to be used. Emit On Empty Result : Defines the behavior of the component if the result of the performed query is empty. If set to true, an empty envelope will be emitted in this case, if set to false no envelopes will be emitted. The following procedure will create a wire graph that collects data from a simulated OPC-UA Server, stores it in a table in the database, using the Wire Record Store component, and publishes it in the cloud platform. Moreover, the Wire Record Query component is used to read from the database and write data to the OPC-UA Server based on the values read. Configure OPC-UA server simulator Download the OPC-UA server simulator bundle and install it on your Kura instance. It will create a simulated OPC-UA server that exposes some sensors (light, temperature and water sensor) and some actuators (buzzer, led and fan). In the Kura Administrative Web Interface, select \u201cOPCUA Server demo\u201d in \u201cServices\u201d and set server.port to 1234. Click the Apply button. This will start an OPC-UA\u200b server on port 1234. Configure Wires OPC-UA application Install the OPC-UA Driver from Eclipse Kura Marketplace . Use the local Kura Administrative Web Interface to create a new OPC-UA driver instance: Select Drivers and Assets , click the New Driver button Select org.eclipse.kura.driver.opcua , type in a name, and click Apply : a new service will show up under Services. Configure the new service as follows: endpoint.ip : localhost endpoint.port : 1234 server.name : leave blank Click on Wires under System Add a new Timer component and configure the interval at which the OPC-UA server will be sampled Add a new Asset with the previously added OPC-UA Driver Configure the new OPC-UA asset, adding new Channels as shown in the following image. Make sure that all the channels are set to READ. Add a new Wire Record Store named DBStore component and configure it as follows: Record Collection Name : WR_data Maximum Record Collection Size : 10000 Cleanup Records Keep : 0 WireRecordStoreProvider Target Filter : the Wire Record Store Provider pid to be used Add a new Publisher component and configure the chosen cloud platform stack in cloud.service.pid option Add Logger component Add another instance of Timer Add a new Wire Record Query component named DBFilter component and configure it as follows. The query will get the values from the light sensor and if they are less than 200, the fan is activated. Query : SELECT (CASE WHEN \u201clight\u201d < 200 THEN 1 ELSE 0 END) AS \u201cled\u201d FROM \u201cWR_data\u201d ORDER BY TIMESTAMP DESC LIMIT 1; Cache Expiration Interval (Seconds) : 0 QueryableWireRecordStoreProvider Target Filter : the Queryable Wire Record Store Provider pid to be used Add another Asset with the OPC-UA Driver, configured as shown in the following image. Be sure that all the channels are set to WRITE. Note Be aware that the Query syntax can vary accordingly to the dialect used by the database. For example, the MySQL dialect doesn't allow to surround the table or columns names with double-quotes. In the H2DB, this is mandatory instead. Connect the components as shown in the following image, then click on \u201cApply\u201d and check the logs and the cloud platform that the data is correctly published.","title":"Wire Record Store and Query"},{"location":"kura-wires/single-port-wire-components/db-store-and-filter/#wire-record-store-and-wire-record-query","text":"This tutorial will present how to use Wire Record Store and Wire Record Query components and provide an example based on the OPC-UA simulated server already used in OPC-UA Application . The Wire Record Store component allows the wire graphs to interact with a persistend Wire Record store implementation, for example a SQL database. It stores in a user-defined collection all the envelopes received by the component. The Wire Record Query component, instead, can run a custom query on the attached store and emit the result on the wire. Note The Wire Record Store and Wire Record Query components have been introduced in Kura 5.3.0 as a replacement of the Db Store and Db Filter, that have been deprecated. The reason of the deprecation is the fact that Db Store and Db Filter only support databases that provide a JDBC interface. Moreover, the old Db Store interacts with the database using a set of hardcoded SQL queries. This fact makes it difficult to use it with different databases since the syntax of the queries is usually database-specific. The new components use the org.eclipse.kura.wire.store.provider.WireRecordStoreProvider and org.eclipse.kura.wire.store.provider.QueryableWireRecordStoreProvider APIs introduced in 5.3.0 allowing to use them with generic data store implementations. Please note that Wire Record Query component is not portable by nature, since it allows to execute an arbitrary user defined query. The new APIs allows to use it with non-JDBC data stores. The Wire Record Store component can be configured as follows: Record Collection Name : The name of the record collection that should be used. The implementation of the collection depends on the Wire Record Store implementation, if it is a SQL database, the collection will likely be a table. Maximum Record Collection Size : The maximum number of records that is possible to store in the collection. Cleanup Records Keep : The number of records in the collection to keep while performing a cleanup operation (if set to 0 all the records will be deleted). The cleanup operation is performed when a new record is inserted and the current size of the record collection is greater than the configured Maximum Record Collection Size . WireRecordStoreProvider Target Filter : Specifies, as an OSGi target filter, the pid of the of the Wire Record Store instance to be used. The Wire Record Query component can be configured as follows: Query : Query to be executed. The query syntax depends on the Queryable Wire Record Store implementation. Cache Expiration Interval (Seconds) : This component is capable of maintaining a cache of the records produced by the last query execution and emitting its contents on the Wire until it expires. This value specifies the cache validity interval in seconds. When cache expires, it will cause a new query execution. The query will be executed for every trigger received if the value is set to 0. QueryableWireRecordStoreProvider Target Filter : Specifies, as an OSGi target filter, the pid of the of the Queryable Wire Record Store instance to be used. Emit On Empty Result : Defines the behavior of the component if the result of the performed query is empty. If set to true, an empty envelope will be emitted in this case, if set to false no envelopes will be emitted. The following procedure will create a wire graph that collects data from a simulated OPC-UA Server, stores it in a table in the database, using the Wire Record Store component, and publishes it in the cloud platform. Moreover, the Wire Record Query component is used to read from the database and write data to the OPC-UA Server based on the values read.","title":"Wire Record Store and Wire Record Query"},{"location":"kura-wires/single-port-wire-components/db-store-and-filter/#configure-opc-ua-server-simulator","text":"Download the OPC-UA server simulator bundle and install it on your Kura instance. It will create a simulated OPC-UA server that exposes some sensors (light, temperature and water sensor) and some actuators (buzzer, led and fan). In the Kura Administrative Web Interface, select \u201cOPCUA Server demo\u201d in \u201cServices\u201d and set server.port to 1234. Click the Apply button. This will start an OPC-UA\u200b server on port 1234.","title":"Configure OPC-UA server simulator"},{"location":"kura-wires/single-port-wire-components/db-store-and-filter/#configure-wires-opc-ua-application","text":"Install the OPC-UA Driver from Eclipse Kura Marketplace . Use the local Kura Administrative Web Interface to create a new OPC-UA driver instance: Select Drivers and Assets , click the New Driver button Select org.eclipse.kura.driver.opcua , type in a name, and click Apply : a new service will show up under Services. Configure the new service as follows: endpoint.ip : localhost endpoint.port : 1234 server.name : leave blank Click on Wires under System Add a new Timer component and configure the interval at which the OPC-UA server will be sampled Add a new Asset with the previously added OPC-UA Driver Configure the new OPC-UA asset, adding new Channels as shown in the following image. Make sure that all the channels are set to READ. Add a new Wire Record Store named DBStore component and configure it as follows: Record Collection Name : WR_data Maximum Record Collection Size : 10000 Cleanup Records Keep : 0 WireRecordStoreProvider Target Filter : the Wire Record Store Provider pid to be used Add a new Publisher component and configure the chosen cloud platform stack in cloud.service.pid option Add Logger component Add another instance of Timer Add a new Wire Record Query component named DBFilter component and configure it as follows. The query will get the values from the light sensor and if they are less than 200, the fan is activated. Query : SELECT (CASE WHEN \u201clight\u201d < 200 THEN 1 ELSE 0 END) AS \u201cled\u201d FROM \u201cWR_data\u201d ORDER BY TIMESTAMP DESC LIMIT 1; Cache Expiration Interval (Seconds) : 0 QueryableWireRecordStoreProvider Target Filter : the Queryable Wire Record Store Provider pid to be used Add another Asset with the OPC-UA Driver, configured as shown in the following image. Be sure that all the channels are set to WRITE. Note Be aware that the Query syntax can vary accordingly to the dialect used by the database. For example, the MySQL dialect doesn't allow to surround the table or columns names with double-quotes. In the H2DB, this is mandatory instead. Connect the components as shown in the following image, then click on \u201cApply\u201d and check the logs and the cloud platform that the data is correctly published.","title":"Configure Wires OPC-UA application"},{"location":"kura-wires/single-port-wire-components/fifo-component/","text":"FIFO Component This page describes the usage of the FIFO component in Wires. The current Wires threading model allows any component to perform potentially blocking operations when a wire envelope is received. The fact that the wire envelopes are delivered synchronously implies that if a wire component performs blocking operations, other components in the same subgraph might be blocked as well, introducing delays in the processing of the graph. The FIFO component can be used for decoupling blocking or slow wire components from other parts of the graph that cannot tolerate delays. In the graph above, the NODELAY component cannot tolerate potential delays introduced by the DB component, adding a FIFO component allows to decouple the two components. This component implements a FIFO queue that operates as follows: The received envelopes are added to the queue. Adding an envelope to the queue is usually (see below) a non-blocking operation. A dedicated thread pops the envelopes from the queue and delivers them to downstream components. In this way, the threads running the upstream components are not affected by blocking operations performed by the downstream components. In the example above there will be two threads that manage the processing of the graph: A thread from the TIMER Quartz scheduler pool handles the processing for the NODELAY component and submits the envelopes produced by it to the queue of the FIFO component. A second thread introduced by the FIFO component pops the received envelopes from the queue and dispatches them to the DB component, performing the processing required by it. In this way, the NODELAY and DB components are decoupled because they are managed by different threads. Configuration The FIFO component configuration is composed of the following properties: queue.capacity : The size of the queue in terms of the number of storable wire envelopes. discard.envelopes : Configures the behavior of the component in case of a full queue. If set to true , envelopes received when the queue is full will be dropped. In this mode, submitting an envelope to the queue is always a non-blocking operation. It should be used if occasionally losing wire envelopes is acceptable for the application, but introducing delays for upstream components is not. If set to false , adding an envelope when the queue is full will block the submitting thread until there is space in the queue. Submitting an envelope to the FIFO component can be a blocking operation if the queue is full. This mode should be used if dropping wire envelopes is unacceptable for upstream components. The probability of dropping envelopes in discard.envelopes=true mode or the probability of blocking upstream components in discard.envelopes=false mode can be controlled by setting a proper queue size.","title":"FIFO Component"},{"location":"kura-wires/single-port-wire-components/fifo-component/#fifo-component","text":"This page describes the usage of the FIFO component in Wires. The current Wires threading model allows any component to perform potentially blocking operations when a wire envelope is received. The fact that the wire envelopes are delivered synchronously implies that if a wire component performs blocking operations, other components in the same subgraph might be blocked as well, introducing delays in the processing of the graph. The FIFO component can be used for decoupling blocking or slow wire components from other parts of the graph that cannot tolerate delays. In the graph above, the NODELAY component cannot tolerate potential delays introduced by the DB component, adding a FIFO component allows to decouple the two components. This component implements a FIFO queue that operates as follows: The received envelopes are added to the queue. Adding an envelope to the queue is usually (see below) a non-blocking operation. A dedicated thread pops the envelopes from the queue and delivers them to downstream components. In this way, the threads running the upstream components are not affected by blocking operations performed by the downstream components. In the example above there will be two threads that manage the processing of the graph: A thread from the TIMER Quartz scheduler pool handles the processing for the NODELAY component and submits the envelopes produced by it to the queue of the FIFO component. A second thread introduced by the FIFO component pops the received envelopes from the queue and dispatches them to the DB component, performing the processing required by it. In this way, the NODELAY and DB components are decoupled because they are managed by different threads.","title":"FIFO Component"},{"location":"kura-wires/single-port-wire-components/fifo-component/#configuration","text":"The FIFO component configuration is composed of the following properties: queue.capacity : The size of the queue in terms of the number of storable wire envelopes. discard.envelopes : Configures the behavior of the component in case of a full queue. If set to true , envelopes received when the queue is full will be dropped. In this mode, submitting an envelope to the queue is always a non-blocking operation. It should be used if occasionally losing wire envelopes is acceptable for the application, but introducing delays for upstream components is not. If set to false , adding an envelope when the queue is full will block the submitting thread until there is space in the queue. Submitting an envelope to the FIFO component can be a blocking operation if the queue is full. This mode should be used if dropping wire envelopes is unacceptable for upstream components. The probability of dropping envelopes in discard.envelopes=true mode or the probability of blocking upstream components in discard.envelopes=false mode can be controlled by setting a proper queue size.","title":"Configuration"},{"location":"kura-wires/usage-examples/eddystone-driver-application/","text":"Eddystone\u2122 Driver Application with RuuviTag+ As presented in Eddystone Driver , Kura provides a specific driver that can be used to listen for Eddystone\u2122 beacons. The driver is available only for gateways that support the new Kura BLE APIs. This tutorial will explain how to configure an Eddystone\u2122 driver and put it into a Wire graph that retrieves data from a RuuviTag+ . For further information about RuuviTag see here . Configure Kura Wires Eddystone application Install the Eddystone\u2122 driver from the Eclipse Kura Marketplace . On the Kura Web Interface, instantiate an Eddystone\u2122 Driver: Under System , select Drivers and Assets and click on the New Driver button. Select org.eclipse.kura.driver.eddystone as Driver Factory , type a name in to Driver Name and click Apply : a new driver will be instantiated and shown up under the Drivers and Assets tab. Configure the new driver setting the bluetooth interface name (e.g. hci0). From the Drivers and Assets tab, add a new asset bound to the Eddystone\u2122 driver: Click on the New Asset button and fill the form with the Asset Name and selecting the driver created in step 2. as Driver Name . Click Apply and a new asset will be listed under the Eddystone\u2122 driver. Click on the new asset and configure it, adding the channels. Each channel represents a type of frame the Driver is interested to. Please note that in the above picture two channels are created: one for the UID type and the second for the URL . In this example only the URL will be used. Check the listen checkbox for both channels. Click \"Apply\". Click on Wires under System . Add a new Asset with the previously added Eddystone asset. Add a new Javascript Filter component. The filter will be configured to parse the URL frames coming from the RuuviTag+ and extract the environmental data from the on-board sensors. In the script window write the following code: function toHexString ( str ) { var hex = '' ; for ( i = 0 ; i < str . length ; i ++ ) { var hexTemp = str . charCodeAt ( i ). toString ( 16 ) hex += ( hexTemp . length == 2 ? hexTemp : '0' + hexTemp ); } return hex ; }; function decodeValues ( rawSensors ) { var rawSensorsDecoded = Base64 . decode ( rawSensors ) logger . info ( toHexString ( rawSensorsDecoded )) var sensorsValues = new Array (); // Data Format Definition (4) var format = parseInt ( rawSensorsDecoded [ 0 ]. charCodeAt ( 0 )); if ( format == 4 ) { sensorsValues . push ( format ) // Humidity sensorsValues . push ( rawSensorsDecoded [ 1 ]. charCodeAt ( 0 ) * 0.5 ) // Temperature sensorsValues . push ( rawSensorsDecoded [ 2 ]. charCodeAt ( 0 ) & 0x7f ) // Pressure sensorsValues . push ( parseInt ( rawSensorsDecoded [ 4 ]. charCodeAt ( 0 ) << 8 ) + parseInt ( rawSensorsDecoded [ 5 ]. charCodeAt ( 0 ) & 0xff ) + 50000 ) // Random id of tag sensorsValues . push ( rawSensorsDecoded [ 6 ]. charCodeAt ( 0 )) } return sensorsValues ; }; load ( \"https://gist.githubusercontent.com/jarus/948005/raw/524bea3b4e0b74c06c9cfd2a8e54429dda1918fe/base64.js\" ) var record = input . records [ 0 ] if ( record . URLEddystone != null ) { var values = record . URLEddystone . getValue (). split ( \";\" ) if ( values . length == 5 && values [ 1 ]. split ( \"#\" ). length == 2 ) { var outRecord = newWireRecord () var sensorsValues = decodeValues ( values [ 1 ]. split ( \"#\" )[ 1 ]) if ( sensorsValues . length == 5 ) { outRecord . format = newIntegerValue ( sensorsValues [ 0 ]) outRecord . humidity = newDoubleValue ( sensorsValues [ 1 ]) outRecord . temperature = newDoubleValue ( sensorsValues [ 2 ]) outRecord . pressure = newIntegerValue ( sensorsValues [ 3 ]) outRecord . id = newIntegerValue ( sensorsValues [ 4 ]) } outRecord . txPower = newIntegerValue ( parseInt ( values [ 2 ])) outRecord . rssi = newIntegerValue ( parseInt ( values [ 3 ])) outRecord . distance = newDoubleValue ( parseFloat ( values [ 4 ])) output . add ( outRecord ) } } Add Logger component and set the log.verbosity to VERBOSE . Connect the Asset to the Filter and this to the Logger . Click on Apply and check on the logs that the environmental data are correctly logged. INFO o.e.k.w.s.f.p.ScriptFilter - 04541a00c35078 INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.ScriptFilter-1537884418687-2 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - txPower : -7 INFO o.e.k.i.w.l.Logger - rssi : -55 INFO o.e.k.i.w.l.Logger - distance : 251.18864315095797 INFO o.e.k.i.w.l.Logger - format : 4 INFO o.e.k.i.w.l.Logger - temperature : 26.0 INFO o.e.k.i.w.l.Logger - humidity : 42.0 INFO o.e.k.i.w.l.Logger - pressure : 100000 INFO o.e.k.i.w.l.Logger - id : 120 INFO o.e.k.i.w.l.Logger - INFO o.e.k.w.s.f.p.ScriptFilter - 04401a00c35078 INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.ScriptFilter-1537884418687-2 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - txPower : -7 INFO o.e.k.i.w.l.Logger - rssi : -39 INFO o.e.k.i.w.l.Logger - distance : 39.810717055349734 INFO o.e.k.i.w.l.Logger - format : 4 INFO o.e.k.i.w.l.Logger - temperature : 26.0 INFO o.e.k.i.w.l.Logger - humidity : 32.0 INFO o.e.k.i.w.l.Logger - pressure : 100000 INFO o.e.k.i.w.l.Logger - id : 120 INFO o.e.k.i.w.l.Logger -","title":"Eddystone&trade; Driver Application with RuuviTag+"},{"location":"kura-wires/usage-examples/eddystone-driver-application/#eddystone-driver-application-with-ruuvitag","text":"As presented in Eddystone Driver , Kura provides a specific driver that can be used to listen for Eddystone\u2122 beacons. The driver is available only for gateways that support the new Kura BLE APIs. This tutorial will explain how to configure an Eddystone\u2122 driver and put it into a Wire graph that retrieves data from a RuuviTag+ . For further information about RuuviTag see here .","title":"Eddystone&trade; Driver Application with RuuviTag+"},{"location":"kura-wires/usage-examples/eddystone-driver-application/#configure-kura-wires-eddystone-application","text":"Install the Eddystone\u2122 driver from the Eclipse Kura Marketplace . On the Kura Web Interface, instantiate an Eddystone\u2122 Driver: Under System , select Drivers and Assets and click on the New Driver button. Select org.eclipse.kura.driver.eddystone as Driver Factory , type a name in to Driver Name and click Apply : a new driver will be instantiated and shown up under the Drivers and Assets tab. Configure the new driver setting the bluetooth interface name (e.g. hci0). From the Drivers and Assets tab, add a new asset bound to the Eddystone\u2122 driver: Click on the New Asset button and fill the form with the Asset Name and selecting the driver created in step 2. as Driver Name . Click Apply and a new asset will be listed under the Eddystone\u2122 driver. Click on the new asset and configure it, adding the channels. Each channel represents a type of frame the Driver is interested to. Please note that in the above picture two channels are created: one for the UID type and the second for the URL . In this example only the URL will be used. Check the listen checkbox for both channels. Click \"Apply\". Click on Wires under System . Add a new Asset with the previously added Eddystone asset. Add a new Javascript Filter component. The filter will be configured to parse the URL frames coming from the RuuviTag+ and extract the environmental data from the on-board sensors. In the script window write the following code: function toHexString ( str ) { var hex = '' ; for ( i = 0 ; i < str . length ; i ++ ) { var hexTemp = str . charCodeAt ( i ). toString ( 16 ) hex += ( hexTemp . length == 2 ? hexTemp : '0' + hexTemp ); } return hex ; }; function decodeValues ( rawSensors ) { var rawSensorsDecoded = Base64 . decode ( rawSensors ) logger . info ( toHexString ( rawSensorsDecoded )) var sensorsValues = new Array (); // Data Format Definition (4) var format = parseInt ( rawSensorsDecoded [ 0 ]. charCodeAt ( 0 )); if ( format == 4 ) { sensorsValues . push ( format ) // Humidity sensorsValues . push ( rawSensorsDecoded [ 1 ]. charCodeAt ( 0 ) * 0.5 ) // Temperature sensorsValues . push ( rawSensorsDecoded [ 2 ]. charCodeAt ( 0 ) & 0x7f ) // Pressure sensorsValues . push ( parseInt ( rawSensorsDecoded [ 4 ]. charCodeAt ( 0 ) << 8 ) + parseInt ( rawSensorsDecoded [ 5 ]. charCodeAt ( 0 ) & 0xff ) + 50000 ) // Random id of tag sensorsValues . push ( rawSensorsDecoded [ 6 ]. charCodeAt ( 0 )) } return sensorsValues ; }; load ( \"https://gist.githubusercontent.com/jarus/948005/raw/524bea3b4e0b74c06c9cfd2a8e54429dda1918fe/base64.js\" ) var record = input . records [ 0 ] if ( record . URLEddystone != null ) { var values = record . URLEddystone . getValue (). split ( \";\" ) if ( values . length == 5 && values [ 1 ]. split ( \"#\" ). length == 2 ) { var outRecord = newWireRecord () var sensorsValues = decodeValues ( values [ 1 ]. split ( \"#\" )[ 1 ]) if ( sensorsValues . length == 5 ) { outRecord . format = newIntegerValue ( sensorsValues [ 0 ]) outRecord . humidity = newDoubleValue ( sensorsValues [ 1 ]) outRecord . temperature = newDoubleValue ( sensorsValues [ 2 ]) outRecord . pressure = newIntegerValue ( sensorsValues [ 3 ]) outRecord . id = newIntegerValue ( sensorsValues [ 4 ]) } outRecord . txPower = newIntegerValue ( parseInt ( values [ 2 ])) outRecord . rssi = newIntegerValue ( parseInt ( values [ 3 ])) outRecord . distance = newDoubleValue ( parseFloat ( values [ 4 ])) output . add ( outRecord ) } } Add Logger component and set the log.verbosity to VERBOSE . Connect the Asset to the Filter and this to the Logger . Click on Apply and check on the logs that the environmental data are correctly logged. INFO o.e.k.w.s.f.p.ScriptFilter - 04541a00c35078 INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.ScriptFilter-1537884418687-2 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - txPower : -7 INFO o.e.k.i.w.l.Logger - rssi : -55 INFO o.e.k.i.w.l.Logger - distance : 251.18864315095797 INFO o.e.k.i.w.l.Logger - format : 4 INFO o.e.k.i.w.l.Logger - temperature : 26.0 INFO o.e.k.i.w.l.Logger - humidity : 42.0 INFO o.e.k.i.w.l.Logger - pressure : 100000 INFO o.e.k.i.w.l.Logger - id : 120 INFO o.e.k.i.w.l.Logger - INFO o.e.k.w.s.f.p.ScriptFilter - 04401a00c35078 INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.ScriptFilter-1537884418687-2 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - txPower : -7 INFO o.e.k.i.w.l.Logger - rssi : -39 INFO o.e.k.i.w.l.Logger - distance : 39.810717055349734 INFO o.e.k.i.w.l.Logger - format : 4 INFO o.e.k.i.w.l.Logger - temperature : 26.0 INFO o.e.k.i.w.l.Logger - humidity : 32.0 INFO o.e.k.i.w.l.Logger - pressure : 100000 INFO o.e.k.i.w.l.Logger - id : 120 INFO o.e.k.i.w.l.Logger -","title":"Configure Kura Wires Eddystone application"},{"location":"kura-wires/usage-examples/gpio-driver-application/","text":"GPIO Driver Application In this section a simple but effective example of the GPIO Driver on Wires will be presented. This example will implement a Wire graph that toggles a digital GPIO. A listener will be attached to an input GPIO externally connected to the first one. Setup a Raspberry Pi as shown in GPIO Driver section. Add a cable from the LED contact near the red cable to pin 37 (gpio 26) on the RaspberryPi. Configure Kura Wires GPIO Driver Application Install the GPIO Driver from the Eclipse Kura Marketplace . On the Kura web interface, instantiate a GPIO Driver: Under \"System\", select \"Drivers and Assets\" and click on the \"New Driver\" button. Select \"org.eclipse.kura.driver.gpio\" as \"Driver Factory\", type a name in to \"Driver Name\" and click \"Apply\": a new driver will be instantiated and shown up under the \"Drivers and Assets\" tab. From the \"Drivers and Assets\" tab, add a new asset bound to the GPIO driver: Click on the \"New Asset\" button and fill the form with the \"Asset Name\" and selecting the driver created in step 2. as \"Driver Name\". Click \"Apply\" and a new asset will be listed under the GPIO driver. Click on the new asset and configure it, adding only one channel called LED as shown in the following picture: Click \"Apply\". As in point 3., create a new asset as shown below: Click \"Apply\". Click on \"Wires\" under \"System\". Add a new \"Timer\" component and configure the interval at which the LED will be toggled. Add a new \"Script Filter\" (it can be downloaded from the Eclipse Marketplace and configure it with the following script: // create a persistent counter counter = typeof ( counter ) === 'undefined' ? 0 : counter counter ++ // emit the counter value in a different WireRecord var counterRecord = newWireRecord () counterRecord . LED = newBooleanValue ( counter % 2 == 0 ) output . add ( counterRecord ) Add the \"Asset\" created at point 3 and connect the \"Timer\" to the \"Filter\" and the latter to the \"Asset\". Add the \"Asset\" created at point 4. Add \"Logger\" component and set log.verbosity to \"VERBOSE\". Connect the latter \"Asset\" to the \"Logger\". The resulting Wire Graph should be as below: Click on \"Apply\". After a while, the led on the breadboard should start to blink at a rate defined by the \"Timer\" as shown below: Moreover, the kura.log file should show a long sequencce of messages reporting that the value from the input gpio is changed: 2018-04-09 13:08:42,990 [Thread-3289] INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1523276074484-23 2018-04-09 13:08:42,991 [Thread-3289] INFO o.e.k.i.w.l.Logger - Record List content: 2018-04-09 13:08:42,992 [Thread-3289] INFO o.e.k.i.w.l.Logger - Record content: 2018-04-09 13:08:42,993 [Thread-3289] INFO o.e.k.i.w.l.Logger - LED_Feedback : false 2018-04-09 13:08:42,993 [Thread-3289] INFO o.e.k.i.w.l.Logger - assetName : GPIOAssetFeedback 2018-04-09 13:08:42,994 [Thread-3289] INFO o.e.k.i.w.l.Logger - LED_Feedback_timestamp : 1523279322990 2018-04-09 13:08:42,994 [Thread-3289] INFO o.e.k.i.w.l.Logger - 2018-04-09 13:08:44,988 [Thread-3291] INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1523276074484-23 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - Record List content: 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - Record content: 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - LED_Feedback : true 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - assetName : GPIOAssetFeedback 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - LED_Feedback_timestamp : 1523279324988","title":"GPIO Driver Application"},{"location":"kura-wires/usage-examples/gpio-driver-application/#gpio-driver-application","text":"In this section a simple but effective example of the GPIO Driver on Wires will be presented. This example will implement a Wire graph that toggles a digital GPIO. A listener will be attached to an input GPIO externally connected to the first one. Setup a Raspberry Pi as shown in GPIO Driver section. Add a cable from the LED contact near the red cable to pin 37 (gpio 26) on the RaspberryPi.","title":"GPIO Driver Application"},{"location":"kura-wires/usage-examples/gpio-driver-application/#configure-kura-wires-gpio-driver-application","text":"Install the GPIO Driver from the Eclipse Kura Marketplace . On the Kura web interface, instantiate a GPIO Driver: Under \"System\", select \"Drivers and Assets\" and click on the \"New Driver\" button. Select \"org.eclipse.kura.driver.gpio\" as \"Driver Factory\", type a name in to \"Driver Name\" and click \"Apply\": a new driver will be instantiated and shown up under the \"Drivers and Assets\" tab. From the \"Drivers and Assets\" tab, add a new asset bound to the GPIO driver: Click on the \"New Asset\" button and fill the form with the \"Asset Name\" and selecting the driver created in step 2. as \"Driver Name\". Click \"Apply\" and a new asset will be listed under the GPIO driver. Click on the new asset and configure it, adding only one channel called LED as shown in the following picture: Click \"Apply\". As in point 3., create a new asset as shown below: Click \"Apply\". Click on \"Wires\" under \"System\". Add a new \"Timer\" component and configure the interval at which the LED will be toggled. Add a new \"Script Filter\" (it can be downloaded from the Eclipse Marketplace and configure it with the following script: // create a persistent counter counter = typeof ( counter ) === 'undefined' ? 0 : counter counter ++ // emit the counter value in a different WireRecord var counterRecord = newWireRecord () counterRecord . LED = newBooleanValue ( counter % 2 == 0 ) output . add ( counterRecord ) Add the \"Asset\" created at point 3 and connect the \"Timer\" to the \"Filter\" and the latter to the \"Asset\". Add the \"Asset\" created at point 4. Add \"Logger\" component and set log.verbosity to \"VERBOSE\". Connect the latter \"Asset\" to the \"Logger\". The resulting Wire Graph should be as below: Click on \"Apply\". After a while, the led on the breadboard should start to blink at a rate defined by the \"Timer\" as shown below: Moreover, the kura.log file should show a long sequencce of messages reporting that the value from the input gpio is changed: 2018-04-09 13:08:42,990 [Thread-3289] INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1523276074484-23 2018-04-09 13:08:42,991 [Thread-3289] INFO o.e.k.i.w.l.Logger - Record List content: 2018-04-09 13:08:42,992 [Thread-3289] INFO o.e.k.i.w.l.Logger - Record content: 2018-04-09 13:08:42,993 [Thread-3289] INFO o.e.k.i.w.l.Logger - LED_Feedback : false 2018-04-09 13:08:42,993 [Thread-3289] INFO o.e.k.i.w.l.Logger - assetName : GPIOAssetFeedback 2018-04-09 13:08:42,994 [Thread-3289] INFO o.e.k.i.w.l.Logger - LED_Feedback_timestamp : 1523279322990 2018-04-09 13:08:42,994 [Thread-3289] INFO o.e.k.i.w.l.Logger - 2018-04-09 13:08:44,988 [Thread-3291] INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1523276074484-23 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - Record List content: 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - Record content: 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - LED_Feedback : true 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - assetName : GPIOAssetFeedback 2018-04-09 13:08:44,989 [Thread-3291] INFO o.e.k.i.w.l.Logger - LED_Feedback_timestamp : 1523279324988","title":"Configure Kura Wires GPIO Driver Application"},{"location":"kura-wires/usage-examples/ibeacon-driver-application/","text":"iBeacon\u2122 Driver Application As presented in the iBeacon\u2122 Driver , Kura provides a specific driver that can be used to listen for iBeacons packets. The driver is available only for gateways that support the new Kura BLE APIs. This tutorial will explain how to configure a Wire graph that get iBeacon\u2122 data and show them to a logger. Configure the Wires iBeacon\u2122 Application Install the iBeacon driver from the Eclipse Kura Marketplace . On the Web Interface, instantiate the iBeacon Driver: Under \"System\", select \"Drivers and Assets\" and click on the \"New Driver\" button. Select \"org.eclipse.kura.driver.ibeacon\" as \"Driver Factory\", type a name in to \"Driver Name\" and click \"Apply\": a new driver will be instantiated and shown up under the \"Drivers and Assets\" tab. Configure the new driver setting the bluetooth interface name (e.g. hci0). From the \"Drivers and Assets\" tab, add a new asset binded to the iBeacon driver: Click on the \"New Asset\" button and fill the form with the \"Asset Name\" and selecting the driver created in step 2. as \"Driver Name\". Click \"Apply\" and a new asset will be listed under the iBeacon driver. Click on the new asset and configure it, adding a single channel that represents a listener for iBeacon\u2122 advertising packets. Check the listen checkbox for the channel. Click \"Apply\". Click on \"Wires\" under \"System\". Add a new \"Asset\" with the previously added iBeacon asset. Add a new \"Javascript Filter\" component. The filter will be configured to parse the iBeacon packets and extract relevant data from it. In the script window write the following code: var record = input . records [ 0 ] if ( record . ibeacon != null ) { var values = record . ibeacon . getValue (). split ( \";\" ) if ( values . length == 6 ) { var outRecord = newWireRecord () outRecord . uuid = newStringValue ( values [ 0 ]) outRecord . txPower = newIntegerValue ( parseInt ( values [ 1 ])) outRecord . rssi = newIntegerValue ( parseInt ( values [ 2 ])) outRecord . major = newIntegerValue ( parseInt ( values [ 3 ])) outRecord . minor = newIntegerValue ( parseInt ( values [ 4 ])) outRecord . distance = newDoubleValue ( parseFloat ( values [ 5 ])) output . add ( outRecord ) } } Add \"Logger\" component and set the log.verbosity to VERBOSE Connect the \"Asset\" to the \"Filter\" and this to the \"Logger\". Click on \"Apply\". Using this graph, every iBeacon packet will be detected and reported to the log, as shown below. To simulate an iBeacon device, it is possible to use another gateway with the iBeacon advertiser example . INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1537886139797-15 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - assetName : iBeaconAsset INFO o.e.k.i.w.l.Logger - iBeacon : aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee;0;-38;0;0;79.43282347242814 INFO o.e.k.i.w.l.Logger - iBeacon_timestamp : 1537886424085 INFO o.e.k.i.w.l.Logger - INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1537886139797-15 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - assetName : iBeaconAsset INFO o.e.k.i.w.l.Logger - iBeacon : aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee;0;-42;0;0;125.89254117941674 INFO o.e.k.i.w.l.Logger - iBeacon_timestamp : 1537886425086 INFO o.e.k.i.w.l.Logger -","title":"iBeacon&trade; Driver Application"},{"location":"kura-wires/usage-examples/ibeacon-driver-application/#ibeacon-driver-application","text":"As presented in the iBeacon\u2122 Driver , Kura provides a specific driver that can be used to listen for iBeacons packets. The driver is available only for gateways that support the new Kura BLE APIs. This tutorial will explain how to configure a Wire graph that get iBeacon\u2122 data and show them to a logger.","title":"iBeacon&trade; Driver Application"},{"location":"kura-wires/usage-examples/ibeacon-driver-application/#configure-the-wires-ibeacon-application","text":"Install the iBeacon driver from the Eclipse Kura Marketplace . On the Web Interface, instantiate the iBeacon Driver: Under \"System\", select \"Drivers and Assets\" and click on the \"New Driver\" button. Select \"org.eclipse.kura.driver.ibeacon\" as \"Driver Factory\", type a name in to \"Driver Name\" and click \"Apply\": a new driver will be instantiated and shown up under the \"Drivers and Assets\" tab. Configure the new driver setting the bluetooth interface name (e.g. hci0). From the \"Drivers and Assets\" tab, add a new asset binded to the iBeacon driver: Click on the \"New Asset\" button and fill the form with the \"Asset Name\" and selecting the driver created in step 2. as \"Driver Name\". Click \"Apply\" and a new asset will be listed under the iBeacon driver. Click on the new asset and configure it, adding a single channel that represents a listener for iBeacon\u2122 advertising packets. Check the listen checkbox for the channel. Click \"Apply\". Click on \"Wires\" under \"System\". Add a new \"Asset\" with the previously added iBeacon asset. Add a new \"Javascript Filter\" component. The filter will be configured to parse the iBeacon packets and extract relevant data from it. In the script window write the following code: var record = input . records [ 0 ] if ( record . ibeacon != null ) { var values = record . ibeacon . getValue (). split ( \";\" ) if ( values . length == 6 ) { var outRecord = newWireRecord () outRecord . uuid = newStringValue ( values [ 0 ]) outRecord . txPower = newIntegerValue ( parseInt ( values [ 1 ])) outRecord . rssi = newIntegerValue ( parseInt ( values [ 2 ])) outRecord . major = newIntegerValue ( parseInt ( values [ 3 ])) outRecord . minor = newIntegerValue ( parseInt ( values [ 4 ])) outRecord . distance = newDoubleValue ( parseFloat ( values [ 5 ])) output . add ( outRecord ) } } Add \"Logger\" component and set the log.verbosity to VERBOSE Connect the \"Asset\" to the \"Filter\" and this to the \"Logger\". Click on \"Apply\". Using this graph, every iBeacon packet will be detected and reported to the log, as shown below. To simulate an iBeacon device, it is possible to use another gateway with the iBeacon advertiser example . INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1537886139797-15 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - assetName : iBeaconAsset INFO o.e.k.i.w.l.Logger - iBeacon : aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee;0;-38;0;0;79.43282347242814 INFO o.e.k.i.w.l.Logger - iBeacon_timestamp : 1537886424085 INFO o.e.k.i.w.l.Logger - INFO o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.WireAsset-1537886139797-15 INFO o.e.k.i.w.l.Logger - Record List content: INFO o.e.k.i.w.l.Logger - Record content: INFO o.e.k.i.w.l.Logger - assetName : iBeaconAsset INFO o.e.k.i.w.l.Logger - iBeacon : aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee;0;-42;0;0;125.89254117941674 INFO o.e.k.i.w.l.Logger - iBeacon_timestamp : 1537886425086 INFO o.e.k.i.w.l.Logger -","title":"Configure the Wires iBeacon&trade; Application"},{"location":"kura-wires/usage-examples/opcua-application/","text":"OPC-UA Application This tutorial will describe how to collect data from an OPC-UA device and publish them on a cloud platform using Wires. The OPC-UA server device will be emulated using a bundle running on Kura. Configure OPC-UA server simulator Download the OPC-UA server simulator bundle and install it on Kura. It will create a simulated OPC-UA server that exposes some sensors (light, temperature and water sensor) and some actuators (buzzer, led and fan). On the Kura web interface, select OPCUA Server demo in Services and set server.port to 1234. Click the Apply button. This will start an OPC-UA server on port 1234. Configure Wires OPC-UA application Install the OPC-UA driver from Eclipse Kura Marketplace . Use the local Kura Administrative Web Interface to create a new OPC-UA driver instance: Select Drivers and Assets , click the New Driver button Select org.eclipse.kura.driver.opcua , type in a name, and click Apply : a new service will show up under Services. Configure the new service as follows: endpoint.ip : localhost endpoint.port : 1234 server.name : leave blank Click on Wires under System Add a new Timer component and configure the interval at which the OPC-UA server will be sampled Add a new Asset with the previously added OPC-UA driver Configure the new OPC-UA asset, adding new Channels as shown in the following image. Add a new Publisher component and configure the chosen cloud platform stack in cloud.service.pid option Add a Logger component Connect the Timer to the Asset , and the Asset to the Publisher and Logger as shown in the image below. Click on Apply and check the logs and the cloud platform in order to verify that the data is correctly published.","title":"OPC-UA Application"},{"location":"kura-wires/usage-examples/opcua-application/#opc-ua-application","text":"This tutorial will describe how to collect data from an OPC-UA device and publish them on a cloud platform using Wires. The OPC-UA server device will be emulated using a bundle running on Kura.","title":"OPC-UA Application"},{"location":"kura-wires/usage-examples/opcua-application/#configure-opc-ua-server-simulator","text":"Download the OPC-UA server simulator bundle and install it on Kura. It will create a simulated OPC-UA server that exposes some sensors (light, temperature and water sensor) and some actuators (buzzer, led and fan). On the Kura web interface, select OPCUA Server demo in Services and set server.port to 1234. Click the Apply button. This will start an OPC-UA server on port 1234.","title":"Configure OPC-UA server simulator"},{"location":"kura-wires/usage-examples/opcua-application/#configure-wires-opc-ua-application","text":"Install the OPC-UA driver from Eclipse Kura Marketplace . Use the local Kura Administrative Web Interface to create a new OPC-UA driver instance: Select Drivers and Assets , click the New Driver button Select org.eclipse.kura.driver.opcua , type in a name, and click Apply : a new service will show up under Services. Configure the new service as follows: endpoint.ip : localhost endpoint.port : 1234 server.name : leave blank Click on Wires under System Add a new Timer component and configure the interval at which the OPC-UA server will be sampled Add a new Asset with the previously added OPC-UA driver Configure the new OPC-UA asset, adding new Channels as shown in the following image. Add a new Publisher component and configure the chosen cloud platform stack in cloud.service.pid option Add a Logger component Connect the Timer to the Asset , and the Asset to the Publisher and Logger as shown in the image below. Click on Apply and check the logs and the cloud platform in order to verify that the data is correctly published.","title":"Configure Wires OPC-UA application"},{"location":"kura-wires/usage-examples/ti-sensortag-application/","text":"TI SensorTag Application As presented in the Ti SensorTag Driver , Kura provides a specific driver that can be used to interact with Texas Instruments SensorTag devices. The driver is available only for gateways that support the new Bluetooth LE APIs. This tutorial will explain how to configure a Wire graph that connects with a SensorTag, reads sensor values and publishes data to a cloud platform. Warning The SensorTag driver can be used only with TI SensorTags with firmware version >1.20. If your device has an older firmware, please update it. Configure the TI SensorTag Application Install the TI SensorTag driver from the Eclipse Kura Marketplace On the Kura Administrative Web Interface, instantiate a SensorTag Driver: Under System , select Drivers and Assets and click on the New Driver button. Select org.eclipse.kura.driver.ble.sensortag as Driver Factory , type a name in Driver Name and click the Apply button: a new driver will be instantiated and listed in the page. Select the newly created Driver instance and configure the Bluetooth interface name (i.e. hci0). In the Drivers and Assets tab add a new asset and associate it to the SensorTag driver: Click on the New Asset button and fill the form with the Asset Name , selecting the driver created at point 2. Click Apply and a new asset will be listed. Click on the new asset and configure it, adding the channels. Each channel represents a single sensor on the SensorTag and it can be chosen from the sensor.name menu. Fill the sensortag.address with the DB address of the SensorTag you want to connect to. The value.type should be set to double, but also the other choices are possible. Click Apply . Apply the following configuration for the Asset instance: Create a Wire Graph as in the following picture. Please note that the driver supports also unsolicited inputs, setting up a notification for the given channel. In this case, it is sufficient to check the listen option for the chosen channel. The Timer is not needed because the SensorTag will automatically emit the values every notification.period milliseconds.","title":"TI SensorTag Application"},{"location":"kura-wires/usage-examples/ti-sensortag-application/#ti-sensortag-application","text":"As presented in the Ti SensorTag Driver , Kura provides a specific driver that can be used to interact with Texas Instruments SensorTag devices. The driver is available only for gateways that support the new Bluetooth LE APIs. This tutorial will explain how to configure a Wire graph that connects with a SensorTag, reads sensor values and publishes data to a cloud platform. Warning The SensorTag driver can be used only with TI SensorTags with firmware version >1.20. If your device has an older firmware, please update it.","title":"TI SensorTag Application"},{"location":"kura-wires/usage-examples/ti-sensortag-application/#configure-the-ti-sensortag-application","text":"Install the TI SensorTag driver from the Eclipse Kura Marketplace On the Kura Administrative Web Interface, instantiate a SensorTag Driver: Under System , select Drivers and Assets and click on the New Driver button. Select org.eclipse.kura.driver.ble.sensortag as Driver Factory , type a name in Driver Name and click the Apply button: a new driver will be instantiated and listed in the page. Select the newly created Driver instance and configure the Bluetooth interface name (i.e. hci0). In the Drivers and Assets tab add a new asset and associate it to the SensorTag driver: Click on the New Asset button and fill the form with the Asset Name , selecting the driver created at point 2. Click Apply and a new asset will be listed. Click on the new asset and configure it, adding the channels. Each channel represents a single sensor on the SensorTag and it can be chosen from the sensor.name menu. Fill the sensortag.address with the DB address of the SensorTag you want to connect to. The value.type should be set to double, but also the other choices are possible. Click Apply . Apply the following configuration for the Asset instance: Create a Wire Graph as in the following picture. Please note that the driver supports also unsolicited inputs, setting up a notification for the given channel. In this case, it is sufficient to check the listen option for the chosen channel. The Timer is not needed because the SensorTag will automatically emit the values every notification.period milliseconds.","title":"Configure the TI SensorTag Application"},{"location":"quality-assurance/intro/","text":"Introduction Eclipse\u2122 Kura QA Kura QA activities focused on two main areas: unit and integration tests that are executed each time the project builds and manual tests, most of which are executed in the weeks before releases. More on the unit and integration tests can be read in unit testing . More about manual system testing can be read in system testing .","title":"Introduction"},{"location":"quality-assurance/intro/#introduction","text":"","title":"Introduction"},{"location":"quality-assurance/intro/#eclipse-kura-qa","text":"Kura QA activities focused on two main areas: unit and integration tests that are executed each time the project builds and manual tests, most of which are executed in the weeks before releases. More on the unit and integration tests can be read in unit testing . More about manual system testing can be read in system testing .","title":"Eclipse&trade; Kura QA"},{"location":"quality-assurance/system-testing/","text":"System Testing QA Procedure A set of automated and manual test are performed before releasing a new Eclipse\u2122 Kura version to ensure software follows our quality standards. Once a Release Candidate (RC) is tagged on its maintenance branch the QA process starts. The QA process involves a set of automated and manual tests performed on the target environment listed below . These tests are updated continuosly to follow the large amount of features added in each release. The QA process continues with new Release Candidate builds until the amount of defects in the software is reduced. When this happens the RC is promoted to final release and tagged on the maintenance branch. Environment Hardware Raspberry Pi 3/4 Intel Up2 Nvidia Jetson Nano Docker OS Raspberry Pi OS Ubuntu 20.04 Ubuntu 18.04 CentOS 7 Java Eclipse Adoptium Temurin\u2122 JDK 1.8","title":"System Testing"},{"location":"quality-assurance/system-testing/#system-testing","text":"","title":"System Testing"},{"location":"quality-assurance/system-testing/#qa-procedure","text":"A set of automated and manual test are performed before releasing a new Eclipse\u2122 Kura version to ensure software follows our quality standards. Once a Release Candidate (RC) is tagged on its maintenance branch the QA process starts. The QA process involves a set of automated and manual tests performed on the target environment listed below . These tests are updated continuosly to follow the large amount of features added in each release. The QA process continues with new Release Candidate builds until the amount of defects in the software is reduced. When this happens the RC is promoted to final release and tagged on the maintenance branch.","title":"QA Procedure"},{"location":"quality-assurance/system-testing/#environment","text":"","title":"Environment"},{"location":"quality-assurance/system-testing/#hardware","text":"Raspberry Pi 3/4 Intel Up2 Nvidia Jetson Nano Docker","title":"Hardware"},{"location":"quality-assurance/system-testing/#os","text":"Raspberry Pi OS Ubuntu 20.04 Ubuntu 18.04 CentOS 7","title":"OS"},{"location":"quality-assurance/system-testing/#java","text":"Eclipse Adoptium Temurin\u2122 JDK 1.8","title":"Java"},{"location":"quality-assurance/unit-testing/","text":"Unit Testing Build-time testing Build-time testing is further divided into unit testing and integration testing. Unit testing is focused on testing separate methods or groups of methods, preferably in a single class. This way it can verify the correct operation of difficult-to-reach corner cases. Integration testing is a more-high-level testing that tests certain functionality on a group of connected services in an approximation of the real environment. It verifies that the services can successfully register in the environment and connect to other services as well as perform their tasks. Code coverage of the develop branch can be observed in Jenkins . For some tips on running the tests also check Kura GitHub Wiki . Unit Testing Unit tests should try to cover as many corner cases in the code as possible. Add them for (all) the new code you decide to contribute. Test Location Kura discourages to introduce test-only dependencies on the implementation level, so all tests are located in their own projects under test/ . The proper folder to put the tests in is src/test/java . Code Conventions Preferably use <package name>.test as the name of the test project. Add it as a module in test/pom.xml that also serves as maven artifact's parent. Only add src/main/java to build.properties' source.. . Make the bundle a fragment of the class-under-test's bundle so that you gain access to its internal packages. Use the same package for the test as the class under test. Subpackages are OK. Use the same coding style as Kura . Try to incorporate the suggestions SonarLint may have for your tests. Running the Tests The basic flow is to build your implementation using maven and then also build and run the unit tests using mvn clean test (or some other phase e.g. install, which also runs integration tests). Advanced test running and running them in IDE is described in Kura GitHub Wiki . Integration Testing These test proper behavior in the OSGi environment. Some additional configuration is therefore necessary. Test Location We don't want to mess with the implementation code here, either, so all tests are again located in the test projects under test/ . It can be the same project as for unit tests. The proper folder to put the tests in is src/main/java . Code Conventions Preferably use <package name>.test as the name of the test project. Add it as a module in test/pom.xml that also serves as maven artifact's parent. Only add src/main/java to build.properties' source.. . Make the bundle a fragment of the class-under-test's bundle so that you gain access to its internal packages. Use the <package name>.test as the package to put the test in. Also add .test suffix to any subpackages that are also under test. Use the same coding style as Kura . Try to incorporate the suggestions SonarLint may have for your tests. Running the Tests The basic flow is to build your implementation using maven and then also build and run the integration tests using mvn clean install . Advanced test running and running them in IDE is described in Kura GitHub Wiki .","title":"Unit Testing"},{"location":"quality-assurance/unit-testing/#unit-testing","text":"","title":"Unit Testing"},{"location":"quality-assurance/unit-testing/#build-time-testing","text":"Build-time testing is further divided into unit testing and integration testing. Unit testing is focused on testing separate methods or groups of methods, preferably in a single class. This way it can verify the correct operation of difficult-to-reach corner cases. Integration testing is a more-high-level testing that tests certain functionality on a group of connected services in an approximation of the real environment. It verifies that the services can successfully register in the environment and connect to other services as well as perform their tasks. Code coverage of the develop branch can be observed in Jenkins . For some tips on running the tests also check Kura GitHub Wiki .","title":"Build-time testing"},{"location":"quality-assurance/unit-testing/#unit-testing_1","text":"Unit tests should try to cover as many corner cases in the code as possible. Add them for (all) the new code you decide to contribute.","title":"Unit Testing"},{"location":"quality-assurance/unit-testing/#test-location","text":"Kura discourages to introduce test-only dependencies on the implementation level, so all tests are located in their own projects under test/ . The proper folder to put the tests in is src/test/java .","title":"Test Location"},{"location":"quality-assurance/unit-testing/#code-conventions","text":"Preferably use <package name>.test as the name of the test project. Add it as a module in test/pom.xml that also serves as maven artifact's parent. Only add src/main/java to build.properties' source.. . Make the bundle a fragment of the class-under-test's bundle so that you gain access to its internal packages. Use the same package for the test as the class under test. Subpackages are OK. Use the same coding style as Kura . Try to incorporate the suggestions SonarLint may have for your tests.","title":"Code Conventions"},{"location":"quality-assurance/unit-testing/#running-the-tests","text":"The basic flow is to build your implementation using maven and then also build and run the unit tests using mvn clean test (or some other phase e.g. install, which also runs integration tests). Advanced test running and running them in IDE is described in Kura GitHub Wiki .","title":"Running the Tests"},{"location":"quality-assurance/unit-testing/#integration-testing","text":"These test proper behavior in the OSGi environment. Some additional configuration is therefore necessary.","title":"Integration Testing"},{"location":"quality-assurance/unit-testing/#test-location_1","text":"We don't want to mess with the implementation code here, either, so all tests are again located in the test projects under test/ . It can be the same project as for unit tests. The proper folder to put the tests in is src/main/java .","title":"Test Location"},{"location":"quality-assurance/unit-testing/#code-conventions_1","text":"Preferably use <package name>.test as the name of the test project. Add it as a module in test/pom.xml that also serves as maven artifact's parent. Only add src/main/java to build.properties' source.. . Make the bundle a fragment of the class-under-test's bundle so that you gain access to its internal packages. Use the <package name>.test as the package to put the test in. Also add .test suffix to any subpackages that are also under test. Use the same coding style as Kura . Try to incorporate the suggestions SonarLint may have for your tests.","title":"Code Conventions"},{"location":"quality-assurance/unit-testing/#running-the-tests_1","text":"The basic flow is to build your implementation using maven and then also build and run the integration tests using mvn clean install . Advanced test running and running them in IDE is described in Kura GitHub Wiki .","title":"Running the Tests"},{"location":"references/javadoc/","text":"Javadoc Kura API Documentation . Java Communications API (javax.comm) . Java USB (javax.usb) . Java HIDAPI Javadoc . OpenJDK Device I/O API Documentation . CANBus API Documentation .","title":"Javadoc"},{"location":"references/javadoc/#javadoc","text":"Kura API Documentation . Java Communications API (javax.comm) . Java USB (javax.usb) . Java HIDAPI Javadoc . OpenJDK Device I/O API Documentation . CANBus API Documentation .","title":"Javadoc"},{"location":"references/mqtt-namespace/","text":"MQTT Namespace This section provides guidelines on how to structure the MQTT topic namespace for messaging interactions with applications running on IoT gateway devices. Interactions may be solicited by a remote server to the gateway using a request/response messaging model, or unsolicited when the gateway simply reports messages or events to a remote server based on periodic or event-driven patterns. The table below defines some basic terms used in this document: Term Description account_name Identifies a group of devices and users. It can be seen as partition of the MQTT topic namespace. For example, access control lists can be defined so that users are only given access to the child topics of a given account_name . client_id Identifies a single gateway device within an account (typically the MAC address of a gateway\u2019s primary network interface). The client_id maps to the Client Identifier (Client ID) as defined in the MQTT specifications. app_id Unique string identifier for application (e.g., \u201cCONF-V1\u201d, \u201cCONF-V2\u201d, etc.). resource_id Identifies a resource(s) that is owned and managed by a particular application. Management of resources (e.g., sensors, actuators, local files, or configuration options) includes listing them, reading the latest value, or updating them to a new value. A resource_id may be a hierarchical topic, where, for example, \u201csensors/temp\u201d may identify a temperature sensor and \u201csensor/hum\u201d a humidity sensor. A gateway, as identified by a specific client_id and belonging to a particular account_name , may have one or more applications running on it (e.g., \u201capp_id1\u201d, \u201capp_id2\u201d, etc.). Each application can manage one or more resources identified by a distinct resource_id (s). Based on this criterion, an IoT application running on an IoT gateway may be viewed in terms of the resources it owns and manages as well as the unsolicited events it reports. MQTT Request/Response Conversations Solicited interactions require a request/response message pattern to be established over MQTT. To initiate a solicited conversation, a remote server first sends a request message to a given application running on a specific device and then waits for a response. To ensure the delivery of request messages, applications that support request/response conversations via MQTT should subscribe to the following topic on startup: $EDC/account_name/client_id/app_id/# The $EDC prefix is used to mark topics that are used as control topics for remote management. This prefix distinguishes control topics from data topics that are used in unsolicited reports and marks the associated messages as transient (not to be stored in the historical data archive, if present). Note While Kura currently requires \u201c$EDC\u201d as the prefix for control topics, this prefix may change in the future for the following reasons: MQTT 3.1.1 discourages the use of topic starting with \u201c$\u201d for application purposes. As a binding of LWM2M over MQTT is taking shape, it would make sense to use a topic prefix for management messages like \u201cLWM2M\u201d or similar abbreviations (e.g. \"LW2\u201d, \u201cLWM\u201d). A requester (i.e., the remote server) initiates a request/response conversation through the following events: Generating a conversation identifier known as a request.id (e.g., by concatenating a random number to a timestamp) Subscribing to the topic where the response message will be published, where requester.client.id is the client ID of the requester, such as: $EDC/account_name/requester.client.id/app_id/REPLY/request.id Sending the request message to the appropriate application-specific topic with the following fields in the payload: request.id (identifier used to match a response with a request) requester.client.id (client ID of the requester) The application receives the request, processes it, and responds on a REPLY topic structured as: $EDC/account_name/requester.client.id/app_id/REPLY/request.id Note While this recommendation does not mandate the format of the message payload, which is application-specific, it is important that the request.id and requester.client.id fields are included in the payload. Kura leverages an MQTT payload encoded through Google Protocol Buffers. Kura includes the request.id and the requester.client.id as two named metrics of the Request messages. The Kura payload definition can be found here . Once the response for a given request is received, the requester unsubscribes from the REPLY topic. MQTT Request/Response Example The following sample request/response conversation shows the device configuration being provided for an application: account_name: guest device client_id: F0:D2:F1:C4:53:DB app_id: CONF-V1 Remote Service Requester client_id: 00:E0:C7:01:02:03 The remote server publishes a request message similar to the following: Request Topic: $EDC/guest/F0:D2:F1:C4:53:DB/CONF-V1/GET/configurations Request Payload: request.id: 1363603920892-8078887174204257595 requester.client.id: 00:E0:C7:01:02:03 The gateway device replies with a response message similar to the following: Response Topic: $EDC/guest/00:E0:C7:01:02:03/CONF-V1/REPLY/1363603920892-8078887174204257595 Response Payload, where the following properties are mandatory: response.code Possible response code values include: 200 (RESPONSE_CODE_OK) 400 (RESPONSE_CODE_BAD_REQUEST) 404 (RESPONSE_CODE_NOTFOUND) 500 (RESPONSE_CODE_ERROR) response.exception.message (value is null or an exception message) response.exception.message (value is null or an exception stack trace) Note In addition to the mandatory properties, the response payload may also have custom properties whose description is beyond the scope of this document. It is recommended that the requester server employs a timeout to control the length of time that it waits for a response from the gateway device. If a response is not received within the timeout interval, the server can expect that either the device or the application is offline. MQTT Remote Resource Management A remote server interacts with the application\u2019s resources through read , create and update , delete, and execute operations. These operations are based on the previously described request/response conversations. Read Resources An MQTT message published on the following topic is a read request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/GET/resource_id The receiving application responds with a REPLY message containing the latest value of the requested resource. The resource_id is application specific and may be a hierarchical topic. It is recommended to design resource identifiers following the best practices established for REST API. For example, if an application is managing a set of sensors, a read request issued to the topic \" $EDC/account_name/client_id/app_id/GET/sensors \" will reply with the latest values for all sensors. Similarly, a read request issued to the topic \" $EDC/account_name/client_id/app_id/GET/sensors/temp \" will reply with the latest value for only a temperature sensor that is being managed by the application. Create or Update Resources An MQTT message published on the following topic is a create or update request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/PUT/resource_id The receiving application creates the specified resource (or updates it if it already exists) with the value supplied in the message payload and responds with a REPLY message. As in the read operations, the resource_id is application specific and may be a hierarchical topic. It is recommended to design resource identifiers following the best practices established for REST API. For example, to set the value for an actuator, a message can be published to the topic \" $EDC/account_name/client_id/app_id/PUT/actuator/1 \" with the new value suplliied in the message payload. Delete Resources An MQTT message published on the following topic is a delete request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/DEL/resource_id The receiving application deletes the specified resource, if it exists, and responds with a REPLY message. Execute Resources An MQTT message published on the following topic is an execute request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/EXEC/resource_id The receiving application executes the specified resource, if it exists, and responds with a REPLY message. The semantics of the execute operation is application specific. Other Operations The IoT application may respond to certain commands, such as taking a snapshot of its configuration or executing an OS-level command. The following topic namespace is recommended for command operations: $EDC/account_name/client_id/app_id/EXEC/command_name An MQTT message published with this topic triggers the execution of the associated command. The EXEC message may contain properties in the MQTT payload that can be used to parameterize the command execution. MQTT Unsolicited Events IoT applications have the ability to send unsolicited messages to a remote server using events to periodically report data readings from their resources, or to report special events and observed conditions. Tip It is recommended to not use MQTT control topics for unsolicited events, and subsequently, to avoid the $EDC topic prefix. Event MQTT topics generally follow the pattern shown below to report unsolicited data observations for a given resource: account_name/client_id/app_id/resource_id Discoverability The MQTT namespace guidelines in this document do not address remote discoverability of a given device\u2019s applications and its resources. The described interaction pattern can be easily adopted to define an application whose only responsibility is reporting the device profile in terms of installed applications and available resources. Remote OSGi Management via MQTT The concepts previously described have been applied to develop a solution that allows for the remote management of certain aspects of an OSGi container through the MQTT protocol, including: Remote deployment of application bundles Remote start and stop of services Remote read and update of service configurations The following sections describe the MQTT topic namespaces and the application payloads used to achieve the remote management of an OSGi container via MQTT. Note For the scope of this document, some aspects concerning the encoding and compressing of the payload are not included. The applicability of the remote management solution, as inspired by the OSGi component model, can be extended beyond OSGi as the contract with the managing server based on MQTT topics and XML payloads. Remote OSGi ConfigurationAdmin Interactions via MQTT An application bundle is installed in the gateway to allow for remote management of the configuration properties of the services running in the OSGi container. For information about the OSGi Configuration Admin Service and the OSGi Meta Type Service, please refer to the OSGi Service Platform Service R7 Specifications . The app_id for the remote configuration service of an MQTT application is \u201c CONF-V1 \u201d. The resources it manages are the configuration properties of the OSGi services. Service configurations are represented in XML format. The following service configuration XML message is an example of a watchdog service: <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?> <ns2:configuration xmlns:ns2= <http://eurotech.com/esf/2.0 xmlns= <http://www.osgi.org/xmlns/metatype/v1.2.0 > pid=\"org.eclipse.kura.watchdog.WatchdogService\"> <OCD id= \"org.eclipse.kura.watchdog.WatchdogService\" name= \"WatchdogService\" description= \"WatchdogService Configuration\" > <Icon resource= \"WatchdogService\" /> <AD id= \"watchdog.timeout\" name= \"watchdog.timeout\" required= \"true\" default= \"10000\" cardinality= \"0\" type= \"Integer\" description= \"\" /> </OCD> <ns2:properties> <ns2:property type= \"Integer\" array= \"false\" name= \"watchdog.timeout\" > <ns2:value> 10000 </ns2:value> </ns2:property> </ns2:properties> </ns2:configuration> The service configuration XML message is comprised of the following parts: The Object Class Definition (OCD), which describes the service attributes that may be configured. (The syntax of the OCD element is described in the OSGi Service Platform Service R7 Specifications ) The properties element, which contains one or more properties with their associated type and values. The type name must match the name provided in the corresponding attribute definition identifier (AD id) contained in the OCD. The \u201cCONF-V1\u201d application supports the read and update resource operations as described in the following sections. Read All Configurations This operation provides all service configurations for which remote administration is supported. Request Topic: $EDC/account_name/client_id/CONF-V1/GET/configurations Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Configurations of all the registered services serialized in XML format Read Configuration for a Given Service This operation provides configurations for a specific service that is identified by an OSGi service persistent identifier pid . Request Topic: $EDC/account_name/client_id/CONF-V1/GET/configurations/pid Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Configurations of the registered service identified by a pid serialized in XML format Update All Configurations This operation remotely updates the configuration of a set of services. Request Topic: $EDC/account_name/client_id/CONF-V1/PUT/configurations Request Payload: Service configurations serialized in XML format Response Payload: Nothing application-specific beyond the response code Update the Configuration of a Given Service This operation remotely updates the configuration of the service identified by a pid . Request Topic: $EDC/account_name/client_id/CONF-V1/PUT/configurations/pid Request Payload: Service configurations serialized in XML format Response Payload: Nothing application-specific Example Management Web Application The previously described read and update resource operations can be leveraged to develop a web application that allows for remote OSGi service configuration updates via MQTT though a web user-interface. The screen capture that follows shows an example administration application where, for a given IoT gateway, a list of all configurable services is presented to the administrator. When one such service is selected, a form is dynamically generated based on the metadata provided in the service OCD. This form includes logic to handle different attribute types, validate acceptable value ranges, and render optional values as drop-downs. When the form is submitted, the new values are communicated to the device through an MQTT resource update message. Remote OSGi DeploymentAdmin Interactions via MQTT An application is installed in the gateway to allow for the remote management of the deployment packages installed in the OSGi container. For information about the OSGi Deployment Admin Service, please refer to the OSGi Service Platform Service Compendium 4.3 Specifications . The app_id for the remote deployment service of an MQTT application is \u201c DEPLOY-V2 \u201d. It allows to perform the following operations: Download, install and uninstall OSGi Deployment Packages Download and execute system updates based on shell scripts Get the list of bundles currently in the runtime Start and stop bundles DEPLOY-V2 Download and Install Messages The download request allows to download and optionally install a software package. The installation procedure will be performed after the download completes if the dp.install metric is set to true . If the metric is set to false , the installation step will not be performed. The package type must be specified using the dp.install.system.update request metric, the supported types are the following: OSGi Deployment Package : An OSGi deployment package. Selected with dp.install.system.update = false . Executable Shell Script : A shell script that applies a system level update. Selected with dp.install.system.update = true . The device will report the download progress and result of the installation to the cloud platform by sending asynchronous download notification messages and install notification messages . The completion notification logic differs depending on the package type. OSGi Deployment Package : The completion notification will be sent immediately after that the Deployment Package is installed on the system. Executable Shell Script : The completion notification will not be sent immediately after that the shell script is executed, but is determined by the execution of an additional verifier script . The verifier script will be executed at next framework startup . A install notification message will be sent afterwards, with dp.install.status = COMPLETED if the exit status is 0 or dp.install.status = FAILED otherwise. This is based on the assumption that a system level update will typically require a device restart. The verifier script can be provided in the following ways: By specifying a download URL as the value of the dp.install.verifier.uri request metric. In this case the framework will download the verifier script from the provided URL. By installing it during the execution of the main shell script. In this case the file must be placed in the /opt/eclipse/kura/data/persistance/verification directory. The installed verifier file name must have the ${name}-${version}.sh_verifier.sh structure where ${name} and ${version} must be replaced with the values of the dp.name and dp.version request metrics. Warning As said above, in case of Executable Shell Script , the completion notification will not be sent if the verifier script is not provided and/or the framework is not restarted. Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/EXEC/download Payload: metrics: dp.job.id (Long). Mandatory. Represents a unique Job ID for the download. dp.uri (String). Mandatory. Represents the URI of the deployment package. dp.name (String). Mandatory. The value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. dp.version (String). Mandatory. The value of the header DeploymentPackage-Version in the DP MANIFEST. The file will be saved in the temporary directory as - .jar possibly overwriting an existing file. dp.download.protocol (String) Mandatory. Specifies the protocol to be used to download the bundles/shell scripts. Must be set to HTTP or HTTPS. dp.download.block.size (Integer). Optional (if not specified by the cloud platform, it is estimated by the device, depending on the total file size. In this case it is fixed at 1% of the total file size). The size in kBi of the blocks used to download the DP. dp.download.block.delay (Integer). Optional (default: 0). Delay in ms between block transfers. dp.download.notify.block.size (Integer). Optional (if not specified by the cloud platform, it is estimated by the device, depending on the total file size. In this case it is fixed at 5% of the total file size). The size in kBi between the notification messages sent to the cloud platform. dp.download.timeout (Integer). Optional (default: 60000). The timeout in seconds for each block that has to be downloaded. dp.download.resume (Bool). Optional (default: true). Resume download transfer if supported by the server. dp.download.force (Bool). Optional (default: true). Specifies if the download forces to download again the file, if already exists on target device. dp.download.username (String). Optional. Username for password protected download. No authentication will be tried if username is not present. dp.download.password (String). Optional. Password for password protected download. No authentication will be tried if password is not present dp.download.hash (String). Optional. The algorithm and value of the hash of the file used to verify the integrity of the download. The format is of this property is: {algorithm}:{hash value} dp.install (Bool). Optional (default: true). Whether the package should be immediately installed after being downloaded. dp.install.system.update (Bool). Optional (default: false). Sets whether or not this is a system update, rather than a bundle/package update. dp.install.verifier.uri (String). Optional. The verifier script URI to run after the installation of the system update. dp.reboot (Bool). Optional (default: false). Whether the system should be rebooted as part of the package installation process. This property is ignored if dp.install.system.update is true. In such case the reboot must be implemented as part of the script. dp.reboot.delay (Integer). Optional (default: 0 - immediately). Delay after which the device will be rebooted. Only meaningful if dp.reboot is true and dp.install.system.update is false. Response: The client will reply immediately with an appropriate response.code. If the platform retries the request but the download is in progress, the client will reply that the request is already in progress with a 500 error code. If the DP has already been downloaded, the client will reply that the request has been accepted. If the dp.download.force flag is set to true, the client will start the download from the beginning, if false the device will proceed with the installation. Payload: no application-specific metrics or body. Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/GET/download Payload: no application-specific metrics or body. Response: Payload: metrics: dp.http.transfer.size (Integer). The size in kBi of the DP being downloaded dp.http.transfer.progress (Integer). The estimated progress of the download in percentage (0-100%). Do not rely on this indicator to detect the download completion. dp.http.transfer.status (String). An enum specifying the download status (IN_PROGRESS, COMPLETED, FAILED...). job.id (Long) Optional. The ID of the job to notify status Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/DEL/download Payload: no application-specific metrics or body. Response: Response Payload: Nothing application-specific beyond the response code. Unsolicited messages will report the status of the cancel operation. Unsolicited messages for download progress The client will start downloading the DP and will compute the size of the transfer from the HTTP header. This size will be used to estimate the download progress using the request parameter dp.download.block.size. Next, the client will report the download progress to the platform by publishing, with QoS==2, one or more unsolicited messages. If HTTP header is not available, the device will report 50% as dp.download.progress for all the download processes. The value of requester.client.id is one of the last downloads or install request received. Download Notification: $EDC/account_name/requester.client.id/DEPLOY-V2/NOTIFY/client-id/download Payload: metrics: job.id (Long). The ID of the job to notify status dp.download.size (Integer). The size in kBi of the DP being downloaded dp.download.progress (Integer). The estimated progress of the download in percentage (0-100%). Do not rely on this indicator to detect the download completion. dp.download.status (String). An enum specifying the download status (IN_PROGRESS, COMPLETED, FAILED, CANCELLED...). dp.download.error.message (String). In case of FAILED status, this metric will contain information about the error. dp.download.index (Integer). The index of the file that is currently downloaded. This is supposed to support multiple file downloads. Install Messages Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/EXEC/install Payload: metrics: dp.name (String). Mandatory. The value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. dp.version (String). Mandatory. The value of the header DeploymentPackage-Version in the DP MANIFEST. The basename of the DP file will to install is derived as - .jar. The file is assumed to reside in the temporary directory. dp.install.system.update (Bool). Mandatory. Specifies if the specified resource is a system update or not. It can be applied to the system immediately or after a system reboot. dp.install.verifier.uri (String). Optional. The verifier script URI to run after the installation of the system update. dp.reboot (Bool). Optional (default: false). Whether the system should be rebooted as part of the package installation process. There might be DPs requiring a post-installation (from the standpoint of the OSGi Deployment Admin) step requiring a system reboot. Note that the post-install phase is not handled by the Deployment Admin. The installation in this case is complete (and can fail) after the reboot. This property is ignored if dp.install.system.update is true. In such case the reboot must be implemented as part of the script. dp.reboot.delay (Integer). Optional (default: 0 - immediately). Delay after which the device will be rebooted. Only meaningful if dp.reboot is true and dp.install.system.update is false. Note This operation can be retried. Anyway, if it fails once it's likely to fail again. Response: Payload: Nothing application-specific beyond the response code. Unsolicited messages will report the status of the install operation. Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/GET/install Payload: no application-specific metrics or body. Response: Payload: metrics: dp.install.status (String). An enum specifying the install status IDLE INSTALLING BUNDLE dp.name (String). Optional. If installing: the value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. dp.version (String). Optional. If installing: the value of the header DeploymentPackage-Version in the DP MANIFEST. Unsolicited messages for install progress If the value of dp.install in the original download request is true the client will start installing the DP. Due to the limitations of the OSGi DeploymentAdmin, it's not possible to have feedback on the install progress. However, these operations should normally complete in a few seconds, even for an upgrade. Otherwise (dp.install==false), the platform can request the installation of an already downloaded package through the following message: Install notification: $EDC/account_name/requester.client.id/DEPLOY-V2/NOTIFY/client-id/install Payload: metrics: job.id (Long). The ID of the job to notify status dp.name (String). The name of the package that is installing. dp.install.progress (Integer). The estimated progress of the install in percentage (0-100%). Due to limitations of the OSGi DeploymentAdmin, it's not possible to have a linear progress. It will go from 0% to 100% in one step. Do not rely on this indicator to detect the download completion. dp.install.status (String). An enum specifying the install status (IN_PROGRESS, COMPLETED, FAILED...). dp.install.error.message (String) Optional. In case of FAILED status, this metric will contain information about the error. Uninstall Messages Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/EXEC/uninstall Payload: metrics: dp.name (String). Mandatory. The value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. job.id (Long) Mandatory. The ID of the job to notify status dp.version (String). Mandatory. The value of the header DeploymentPackage-Version in the DP MANIFEST. The basename of the DP file will to install is derived as - .jar. The file is assumed to reside in the temporary directory. dp.reboot (Bool). Optional (default: false). Whether the system should be rebooted as part of the package uninstall process. dp.reboot.delay (Integer). Optional (default: 0 - immediately). Delay after which the device will be rebooted. Only meaningful if dp.reboot==true. Response: The client will reply immediately with an appropriate response.code. If the platform retries the request but the uninstall operation is in progress, the client will reply that the request is already in progress with a 500 error code. At the end of the uninstall operation, an unsolicited message is sent to the cloud platform to report the operation status. If a reboot was requested in the received uninstall request, it will be executed with the specified delay. Unsolicited messages for uninstall progress Uninstall notification: $EDC/account_name/requester.client.id/DEPLOY-V2/NOTIFY/client-id/uninstall Payload: metrics: job.id (Long). The ID of the job to notify status dp.name (String). The name of the package that is uninstalling. dp.uninstall.progress (Integer). The estimated progress of the install in percentage (0-100%). Due to limitations of the OSGi DeploymentAdmin, it's not possible to have a linear progress. It will go from 0% to 100% in one step. Do not rely on this indicator to detect the download completion. dp.uninstall.status (String). An enum specifying the uninstall status (IN_PROGRESS, COMPLETED, FAILED...). dp.uninstall.error.message (String) Optional. In case of FAILED status, this metric will contain information about the error. Read All Bundles This operation provides all the bundles installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/DEPLOY-V2/GET/bundles Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed bundles serialized in XML format The following XML message is an example of a bundle: <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?> <bundles> <bundle> <name> org.eclipse.osgi </name> <version> 3.8.1.v20120830-144521 </version> <id> 0 </id> <state> ACTIVE </state> </bundle> <bundle> <name> org.eclipse.equinox.cm </name> <version> 1.0.400.v20120522-1841 </version> <id> 1 </id> <state> ACTIVE </state> </bundle> </bundles> The bundle XML message is comprised of the following bundle elements: Symbolic name Version ID State Start a Bundle This operation starts a bundle identified by its ID. Request Topic: $EDC/account_name/client_id/DEPLOY-V2/EXEC/start/bundle_id Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Nothing application-specific beyond the response code Stop a Bundle This operation stops a bundle identified by its ID. Request Topic: $EDC/account_name/client_id/DEPLOY-V2/EXEC/stop/bundle_id Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Nothing application-specific beyond the response code Example Management Web Application The previously described read, start/stop, and install/uninstall resources can be used to implement a remote management application. An example of such application is Eclipse Kapua. In particular it is possible to use the download and install resources from the following sections in Eclipse Kapua console: Devices section : Selecting the Devices section, a target device, and then clicking on the Install button in the Packages tab will allow to send download and install requests. Batch Jobs section It is possible to create a batch job with the Package Download / Install definition to perform a download / install request on a set of target devices. Remote Gateway Inventory via MQTT An application is installed in the gateway to allow for the remote query of the resources installed in the OSGi container and the underlying OS. The app_id for the remote inventory service of an MQTT application is \u201c INVENTORY-V1 \u201d. The service allows retrieving all the different resources available/installed on the gateway. The service supports the following resources: BUNDLES : represents a OSGi Bundle DP : represents a OSGi Deployment Package DEB : represents a Linux Debian package RPM : represents a Linux RPM package APK : represents a Linux Alpine APK package DOCKER : represents a container CONTAINER IMAGE : represents a container image The resources are represented in JSON format. The following message is an example of a service deployment: { \"inventory\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"io.netty.transport-native-unix-common\" , \"version\" : \"4.1.34.Final\" , \"type\" : \"BUNDLE\" }, ] } The inventory JSON message is comprised of the following package elements: Name Version Type The \u201cINVENTORY-V1\u201d application supports only the read resource operations as described in the following sections. Inventory Bundles Read All Bundles This operation provides all the bundles installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/bundles Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed bundles serialized in JSON format The following JSON message is an example of a bundle: { \"bundles\" :[ { \"name\" : \"org.eclipse.osgi\" , \"version\" : \"3.16.0.v20200828-0759\" , \"id\" : 0 , \"state\" : \"ACTIVE\" , \"signed\" : true }, { \"name\" : \"org.eclipse.equinox.cm\" , \"version\" : \"1.4.400.v20200422-1833\" , \"id\" : 1 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } The bundle JSON message is comprised of the following bundle elements: Symbolic name Version ID State Signed Start Bundle This operation allows to start a bundles installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/EXEC/bundles/_start Request Payload: A JSON object that identifies the target bundle must be specified in payload body. Response Payload: Nothing application specific Stop Bundle Request Topic: $EDC/account_name/client_id/INVENTORY-V1/EXEC/bundles/_stop Request Payload: A JSON object that identifies the target bundle must be specified in payload body. Response Payload: Nothing application specific JSON identifier for start and stop requests The requests for starting and stopping a bundle require the application to include a JSON object in request payload for selecting the target bundle, the defined properties are the following: name : The symbolic name of the bundle to be started/stopped. This parameter must be of string type and it is mandatory. version : The version of the bundle to be stopped. This parameter must be of string type and it is optional. If multiple bundles match the selection criteria, only one of them will be stopped/started, which one is not defined. Examples: { \"name\" : \"org.eclipse.kura.example.beacon\" } { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" } Inventory Deployment Packages Read All Deployment Packages This operation provides the deployment packages installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/packages Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed deployment packages serialized in JSON format The following JSON message is an example of a bundle: { \"deploymentPackages\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"signed\" : false , \"bundles\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"id\" : 171 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } ] } The deployment package JSON message is comprised of the following package elements: Symbolic name Version Signature: true if all the bundles in the deployment package are signed Bundles that are managed by the deployment package along with their symbolic name and version Inventory System Packages (DEB/RPM/APK) Read All System Packages This operation provides the Linux packages installed in OS. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/systemPackages Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed Linux Packages serialized in JSON format The following JSON message is an example of a bundle: { \"systemPackages\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"alsa-utils\" , \"version\" : \"1.1.8-2\" , \"type\" : \"DEB\" }, { \"name\" : \"ansible\" , \"version\" : \"2.7.7+dfsg-1\" , \"type\" : \"DEB\" }, { \"name\" : \"apparmor\" , \"version\" : \"2.13.2-10\" , \"type\" : \"DEB\" }, { \"name\" : \"apt\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-listchanges\" , \"version\" : \"3.19\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-transport-https\" , \"version\" : \"1.8.2.2\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-utils\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" } ] } The bundle JSON message is comprised of the following bundle elements: Name Version Type Inventory Containers List All Containers Using the API exposed by Inventory-V1, the user can manage containers via external applications such as Eclipse Kapua. This operation lists all the containers installed in the gateway. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/containers Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed containers serialized in JSON format The following JSON message is an example of what this request outputs: { \"containers\" : [ { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , \"type\" : \"DOCKER\" , \"state\" : \"active\" } ] } The container JSON message is comprised of the following elements: Name: The name of the docker container. Version: describes both the container's respective image and tag separated by a colon. Type: denotes the type of inventory payload State: describes the container's current state active : Container is running installed : Container is starting uninstalled : Container has failed, or is stopped unknown : Container state can not be determined Start a Container This operation allows starting a container installed on the gateway. * Request Topic * $EDC/account_name/client_id/INVENTORY-V1/EXEC/containers/_start * Request Payload * A JSON object that identifies the target container must be specified in the payload body. This payload will be described in the following section * Response Payload * Nothing application-specific Stop a Container Request Topic $EDC/account_name/client_id/INVENTORY-V1/EXEC/containers/_stop Request Payload A JSON object that identifies the target container must be specified in the payload body. This payload will be described in the following section. Response Payload Nothing application-specific JSON identifier/payload for container start and stop requests The requests for starting and stopping a container require the application to include a JSON object in the request payload for selecting the target container. Docker enforces unique container names on a gateway, and thus they can reliably be used as an identifier. Examples: { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , \"type\" : \"DOCKER\" , \"state\" : \"active\" } { \"name\" : \"container_1\" , } Inventory Container Images List All Images Using the API exposed by Inventory-V1, the user can manage container images via external applications such as Eclipse Kapua. This operation lists all the images in the gateway. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/images Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed containers serialized in JSON format The following JSON message is an example of what this request outputs: { \"images\" : [ { \"name\" : \"nginx\" , \"version\" : \"latest\" , \"type\" : \"CONTAINER_IMAGE\" } ] } The container JSON message is comprised of the following elements: Name: The name of the container image. Version: describes the container image's version. Type: denotes the type of inventory payload Delete a Container Image This operation allows deleting a container image not in use on the gateway. * Request Topic * $EDC/account_name/client_id/INVENTORY-V1/EXEC/images/_delete * Request Payload * A JSON object that identifies the target image must be specified in the payload body. This payload will be described in the following section * Response Payload * Nothing application-specific JSON identifier/payload for container image delete requests The requests for deleting a container image require the application to include a JSON object in the request payload for selecting the target. The JSON requires both name and version fields to be populated. Examples: { \"name\" : \"nginx\" , \"version\" : \"latest\" , \"type\" : \"CONTAINER_IMAGE\" } { \"name\" : \"nginx\" , \"version\" : \"latest\" , } Inventory Summary Read All Resources This operation provides a list of all the resources installed on the gateway Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/inventory Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed Linux Packages serialized in JSON format The following JSON message is an example of a bundle: { \"inventory\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"com.eclipsesource.jaxrs.provider.gson\" , \"version\" : \"2.3.0.201602281253\" , \"type\" : \"BUNDLE\" }, { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"type\" : \"DP\" } ] } The bundle JSON message is comprised of the following bundle elements: Name Version Type Remote Certificates and Keys management via MQTT (KEYS-V1 and KEYS-V2) KEYS-V1 The KEYS-V1 app-id is exposed by the org.eclipse.kura.core.keystore bundle. This request handler allows the remote management platform to get a list of all the KeystoreService instances and corresponding keys managed by the framework in a given device. The request handler allows, also, to install new trusted certificate and to generate new key pairs directly in the device. Finally, the remote platform can request, from a defined key pair, the generation of a CSR that can be countersigned remotely by a trusted CA. Read All the KestoreServices This operation returns the list of all the KeystoreServices instantiated in the framework. Request Topic: $EDC/account_name/client_id/KEYS-V1/GET/keystores Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: List of all the managed KeystoreService instances with number of entries stored The following JSON message is an example of an output provided: [ { \"id\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"type\" : \"jks\" , \"size\" : 4 }, { \"id\" : \"org.eclipse.kura.crypto.CryptoService\" , \"type\" : \"jks\" , \"size\" : 3 }, { \"id\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"type\" : \"jks\" , \"size\" : 1 }, { \"id\" : \"org.eclipse.kura.core.keystore.DMKeystore\" , \"type\" : \"jks\" , \"size\" : 1 } ] Each entry of the array is specified by the following values: id : the KeystoreService PID type : the type of keystore managed by the given instance size : the number of entries in a given KeystoreService instance Read Key Entries This operation returns the list of all the key entries managed by the framework. If a request payload is specified, the list of entries is filtered based on the parameters in the request Request Topic: $EDC/account_name/client_id/KEYS-V1/GET/keystores/entries Request Payload: Nothing application-specific beyond the request ID and requester client ID. In this case the response will contain all the entries in all the managed keystoreService instances. A JSON object with one of the following: { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" } { \"alias\" : \"ca-godaddyclass2ca\" } Response Payload: List of all the key entries managed by the framework eventually filtered based on the parameters in the request. The following JSON message is an example of an output provided in the response body: [ { \"subjectDN\" : \"OU=Go Daddy Class 2 Certification Authority, O=\\\"The Go Daddy Group, Inc.\\\", C=US\" , \"issuer\" : \"OU=Go Daddy Class 2 Certification Authority,O=The Go Daddy Group\\\\, Inc.,C=US\" , \"startDate\" : \"Tue, 29 Jun 2004 17:06:20 GMT\" , \"expirationDate\" : \"Thu, 29 Jun 2034 17:06:20 GMT\" , \"algorithm\" : \"SHA1withRSA\" , \"size\" : 2048 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"alias\" : \"ca-godaddyclass2ca\" , \"type\" : \"TRUSTED_CERTIFICATE\" }, { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ] Read Key Details This operation returns the details associated to a specified key in a keystore Request Topic: $EDC/account_name/client_id/KEYS-V1/GET/keystores/entries/entry Request Payload: A JSON with the keystoreServicePid and the alias of the desired key { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" \"alias\" : \"localhost\" } * Response Payload: * List of all the details associated to a key managed by the framework The following JSON message is an example of an output provided: { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\nMIIFkTCCA3mgAwIBAgIECtXoiDANBgkqhkiG9w0BAQsFADBZMQswCQYDVQQGEwJJ\\nVDELMAkGA1UECBMCVUQxDjAMBgNVBAcTBUFtYXJvMREwDwYDVQQKEwhFdXJvdGVj\\naDEMMAoGA1UECxMDRVNGMQwwCgYDVQQDEwNFU0YwHhcNMjEwNDIyMTUxNTU1WhcN\\nMjQwMTE3MTUxNTU1WjBZMQswCQYDVQQGEwJJVDELMAkGA1UECBMCVUQxDjAMBgNV\\nBAcTBUFtYXJvMREwDwYDVQQKEwhFdXJvdGVjaDEMMAoGA1UECxMDRVNGMQwwCgYD\\nVQQDEwNFU0YwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC7iZ3fHUQa\\nTPgnvSxGZK4f6MZYfLclD74yqaCCWAztNxPQoiBoSPGdsBGBLNeFbwY0Yzg3qwXw\\nYvgzLJmoXV9rSix7LgXPzsSYfUGfu7PeYTy5bG9X2UVyw9LloUM5DKnw++5F7Xy7\\nF0KQQi0z6/HbbPkZ2aGyNRtMCTh1iAGy3gDh/mMnjpUYuoq1luoX1x6I77X0C+NP\\nTxldVYrTeQiswItAHZmkK1R8AYedbFBgjDuTrfRODxBwESn4kQSMLJ8yHYDRm8S6\\ngVz5LdkcM48UiV5hhF+bCD3UvYA00ZgZm2oOG1ONchYrE7pJr7eQVCYaXkS1lALB\\nKaVJzn03wiLJJv1FYLmGt5J/MwfqyCtBTLlieEVfwnxFCkymtews6SYK32e9q/uJ\\nfcdpWH7tOoarnAf7j5mE84rRU3HqzghK0bMxntfrSH3t18ZUt1/4Qx78WfiM1Te3\\nJtnWBqUNJtX6lgT8IxTWwyEqD183tyKIo8hPGyeJrzWA5RL5hYF5rCNTWzqz5Upi\\n0b/YI5K09+Rn8XmEzzaWjFq5zu6/WpqwPRA8kc2RAEA2scnOT+3yl9Lof/M7BrfL\\nMdjVOZ4MfXgl/fhFyd16AObXuZRUIeiWowKtEiNaiUn8paLDxG+LNV7p5wEQCZZI\\n+MsXMMp6G8Te4yILLCcGov7OkO2wx4GPWQIDAQABo2EwXzAxBgNVHSUEKjAoBggr\\nBgEFBQcDAQYIKwYBBQUHAwIGCCsGAQUFBwMDBggrBgEFBQcDCDALBgNVHQ8EBAMC\\nAvwwHQYDVR0OBBYEFKM5PlHoe8qFC6w0quGacazGWE/LMA0GCSqGSIb3DQEBCwUA\\nA4ICAQBvpXmbS9LN8n0A+uq+tM3CNtF3YotWRbQHIGJAFTvdq3003W3CVdmykFc8\\n9Kz8PoY1swBJms7GKjQLkqgTHoq6jU/cIXw+CoLQWmvAugva5C1u/5AHJZqTC06J\\nGZyn1Z9N5Lp0XcgogEyhxdbkHniv7jvcmbCurQijZc9nsd5St7e1pT0Co7KKI6Ff\\nODdVP6kZYBzKo4t20tATdAZJ8t7YHNKNq7ZVs1ej9oYUmmQieNXuE4UoHe5hzVQw\\n567cNHWcTHJoyPve03TSQV91wp5rRUKZm2p0WtFNuv22f5p5sQmttsJltzHCgTwE\\nK0j6qYKnXiq+EQs0A3uF9uiIB/KEDLjxscstqsQGFCFOmjA3GSbmJiKCnss3HkNn\\naknT7XCV6tqgDOfPnNzbWJODjYZ+V0DyNY5uqkG2cyREm/qGbH1kLEXhqdWbKqEs\\nsdW6x8p0ImTaPuRl3XEmXbolavIq+FTtOSz8vW1PsdD3quO6krrwiQMXKv1ZMjup\\nDGIZZ4hUUhN84efjlZyoFRvPRvZ8YvjjrHXLij0vcRxndlicevwl5ezlm0LBOpsT\\nkI2uWrbSbxlue/XdgwFCbN0+mXX88fGj6cjhpvd/xnwHaDHfSG9UoU149LJb6ZIZ\\nru+07QriQQxK8V7AdPr6bhmKPxbbFenvSQmsmgjAY93qtanbNg==\\n-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } Create CSR This operation returns the CSR for a specific key pair managed by the framework Request Topic: $EDC/account_name/client_id/KEYS-V1/POST/keystores/entries/csr Request Payload: A JSON with the all the details necessary to generate the CSR { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"signatureAlgorithm\" : \"SHA256withRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" } Response Payload: The generated CSR in the body of the message -----BEGIN CERTIFICATE REQUEST----- MIIEgTCCAmkCAQAwPDELMAkGA1UEBhMCVVMxEDAOBgNVBAoTB0VjbGlwc2UxDDAK BgNVBAsTA0lvVDENMAsGA1UEAxMES3VyYTCCAiIwDQYJKoZIhvcNAQEBBQADggIP ADCCAgoCggIBAICTNbBm2wIV/TvddB3OW2s2WJmhAOBxwDSdpxGpgWDzmFAydCt5 SfWCIeC0kmQfrJpcvcIB7IoE2I7HWtIOxV9c+E+n6R76NvdBQzB8enFfZu4ahIKy ul2VXQSj0VtYLZvG3yx6af4j8UFWsf2AuAe5Fd1dSBq9aEoRU/D5/uNQOQJi45Hk ds1KK0FcTkfPjugUCLf1Uf0xXnK1V7yZGrgDpPDbZAYCrcsGomdziO8zkE88gKaa oC1madGL44yz5tiHTKvbf+O+fKc31N4iDvnIg8f87IMF0D4afDF+3AJjVfcFtp3Q xWP3zpKqzPzpzWagTzsW446YMxamZgkDxLsVLitQtesom4ON3HT8s+jxHQhCO5LR 83Ge10+6viJtkp20GYCqANO85c3TaD9njOE0y8P/T7Nk8MwnBbVgwa15QEWRqjEd HB6dF5jKdxlfZhPe2AVnLWAd/W96tCIBSqYu6TTH8npprp/S4t10tRkpaLGa+24c VlsjR6AFUX4KksvE/mbXd9QsvKgw/h3g4Jly4W/Ourt1LAH19tzGwULNCS7Ft9rp IXUsbmUUwb0V3B3ptcJUDzPUw8LdbItPnXzaPegxmkHO8IllcrdRBXrpcTwJl1ug MTMWKW/UjUwKcNQ0mGIxQ18aS0mHk8x8bVTnYLcCnGq3NeiFWvOiJIJpAgMBAAGg ADANBgkqhkiG9w0BAQsFAAOCAgEATsHVZAEjkMSpwozWbVvDw4iJOSYaQ7ZJXhGZ n81puMy/kcdNVD2hfG2c4ern8KPib6hYd1mbQpyNtsbJ68VOPIYOdiaqFd7+lbtM IVNETBA9ezXzzXwPCtiJYpmeDYz6HfIzRRzuoJhZtOrgyw8v5wiM0NkenDbTQs4l Od/YPFlHnEDkTNM+B/ZJJxRIg3sPhAAgj5HH0Mj2053z66hLDYAo4Tos98MwUcuA dY1pcs3brxg6z7xz4vbNKyj0Lh8Gua92OSbl1AFZYb6KXm/7+Md0la/YD+K/E2n6 hUAcHkr3ayNuTI6lkQFptCHzb4Zr8rdbu63JRno9PFTnW+fa/0xi35DoHD2SAhwA CUGXTR+HQXkzB/9NE9X0TxS8SwyrE8sfw4usZm25tACdZ33xziqJXOmbChETyL2b J1IcbsHaeN2Shjnj7UQj+hQFnjVwRLTd0zWMN/l7mPj6TiW9ehubE8ce5siHW7NO mqJU1bklxTefefSNHTXrvTInuDXT81gLBRE3x+6uqU2kkJnL8jkrkebDDBhYF+qO 6dB4W5WGbEHxorX2qfjImvy2Ohsl3rL/DqJgqECZaubTz1Xcj/kl9bdxs0pfa6IY Inre5iom9bGcA6W6U34jRsrE2pobi6c9Yimrbr/R2O/8Oy2k94FQta8tg8jbAxBi Z0Vd1nM= -----END CERTIFICATE REQUEST----- Store Trusted Certificate This operation stores the provided certificate as a Trusted Certificate Entry managed by the framework Request Topic: $EDC/account_name/client_id/KEYS-V1/POST/keystores/entries/certificate Request Payload: A JSON with the all the details necessary to generate create the new entry { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"myCertTest99\" , \"certificate\" : \"-----BEGIN CERTIFICATE----- MIIDdzCCAl+gAwIBAgIEQsO0gDANBgkqhkiG9w0BAQsFADBsMRAwDgYDVQQGEwdV bmtub3duMRAwDgYDVQQIEwdVbmtub3duMRAwDgYDVQQHEwdVbmtub3duMRAwDgYD VQQKEwdVbmtub3duMRAwDgYDVQQLEwdVbmtub3duMRAwDgYDVQQDEwdVbmtub3du MB4XDTIxMDQxNDA4MDIyOFoXDTIxMDcxMzA4MDIyOFowbDEQMA4GA1UEBhMHVW5r bm93bjEQMA4GA1UECBMHVW5rbm93bjEQMA4GA1UEBxMHVW5rbm93bjEQMA4GA1UE ChMHVW5rbm93bjEQMA4GA1UECxMHVW5rbm93bjEQMA4GA1UEAxMHVW5rbm93bjCC ASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJSWJDxu8UNC4JGOgK31WCvz NKy2ONH+jTVKnBY7Ckb1hljJY0sKO55aG1HNDfkev2lJTsPIz0nJjNsqBvB1flvf r6XVCxdN0yxvU5g9SpRxE/iiPX0Qt7463OfzyKW97haJrrhF005RHYNcORMY/Phj hFDnZhtAwpbQLzq2UuIZ7okJsx0IgRbjH71ZZuvYCqG7Ct/bp1D7w3tT7gTbIKYH ppQyG9rJDEh9+cr9Hyk8Gz7aAbPT/wMH+/vXDjH2j/M1Tmed0ajuGCJumaTQ4eHs 9xW3B3ugycb6e7Osl/4ESRO5RQL1k2GBONv10OrKDoZ5b66xwSJmC/w3BRWQ1cMC AwEAAaMhMB8wHQYDVR0OBBYEFPospETb5HNeD/DmS9mwt+v/AYq/MA0GCSqGSIb3 DQEBCwUAA4IBAQBxMe1xQVQKt36A5qVlEZyxI9eb6eQRlYzorOgP2tFaOsvDPpRI CALhPmxgQl/5QvKFfCXKoxWj1Spg4sF6fJp6jhSjLpmChS9lf5fRaWS20/pxIddM 10diq3r6HxLKSxCYK7Pf5scOeZquvwfo8Kxye01bvCMFf1s1K3ZEZszk5Oo2MnWU U22YnXfZm1C0h2WMUcou35A7CeVAHPWI0Rvefojv1qYlQScJOkCN5lO6C/1qvRhq nDQdQN/m1HQbpfh2DD6F33nBjkyLQyMRF8uMnspLrLLj8lecSTJZO4fGJOaIXh3O 44da9A02FAf5nRRQpwP2x/4IZ5RTRBzrqbqD -----END CERTIFICATE-----\" } Response Payload: Nothing Generate KeyPair This operation will generate a new key pair directly in the device, based on the parameters received from the request Request Topic: $EDC/account_name/client_id/KEYS-V1/POST/keystores/entries/keypair Request Payload: A JSON with the all the details necessary to create the new key pair { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"algorithm\" : \"RSA\" , \"size\" : 1024 , \"signatureAlgorithm\" : \"SHA256WithRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" } Response Payload: Nothing Delete Entry This operation will delete the specified entry from the framework managed keystores Request Topic: $EDC/account_name/client_id/KEYS-V1/DEL/keystores/entries Request Payload: A JSON with the all the details necessary to identify the entry to be deleted { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"mycerttestec\" } Response Payload: Nothing KEYS-V2 Starting from Kura 5.4.0, the KEYS-V2 request handler is also available, it supports all of the request endpoints of KEYS-V1 plus an additional endpoint that allows to upload and modify private key entries: Uploading a Private Key Entry Request Topic: $EDC/account_name/client_id/KEYS-V2/POST/keystores/entries/privatekey Request Payload: The request should include the private key in unencrypted PEM format and the certificate chain in PEM format, the first certificate in the certificateChain list must use the public key associated with the private key supplied as the privateKey parameter. The device will overwrite the entry with the provided alias if it already exists. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"privateKey\" : \"-----BEGIN RSA PRIVATE KEY-----\\n...\\n-----END RSA PRIVATE KEY-----\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] } Response Payload: Nothing Updating a Private Key Entry Request Topic: $EDC/account_name/client_id/KEYS-V2/POST/keystores/entries/privatekey Request Payload: In order to update the certificate chain associated to a specific private key entry it is possible to use the same format as previous request and omit the privateKey parameter. In this case the certificate chain of the existing entry will be replaced with the one specified in the request and the existing private key will be retained. This request can be useful for example to create a CSR on the device, sign it externally and then updating the corresponding entry with the resulting certificate. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] } Response Payload: Nothing","title":"MQTT Namespace"},{"location":"references/mqtt-namespace/#mqtt-namespace","text":"This section provides guidelines on how to structure the MQTT topic namespace for messaging interactions with applications running on IoT gateway devices. Interactions may be solicited by a remote server to the gateway using a request/response messaging model, or unsolicited when the gateway simply reports messages or events to a remote server based on periodic or event-driven patterns. The table below defines some basic terms used in this document: Term Description account_name Identifies a group of devices and users. It can be seen as partition of the MQTT topic namespace. For example, access control lists can be defined so that users are only given access to the child topics of a given account_name . client_id Identifies a single gateway device within an account (typically the MAC address of a gateway\u2019s primary network interface). The client_id maps to the Client Identifier (Client ID) as defined in the MQTT specifications. app_id Unique string identifier for application (e.g., \u201cCONF-V1\u201d, \u201cCONF-V2\u201d, etc.). resource_id Identifies a resource(s) that is owned and managed by a particular application. Management of resources (e.g., sensors, actuators, local files, or configuration options) includes listing them, reading the latest value, or updating them to a new value. A resource_id may be a hierarchical topic, where, for example, \u201csensors/temp\u201d may identify a temperature sensor and \u201csensor/hum\u201d a humidity sensor. A gateway, as identified by a specific client_id and belonging to a particular account_name , may have one or more applications running on it (e.g., \u201capp_id1\u201d, \u201capp_id2\u201d, etc.). Each application can manage one or more resources identified by a distinct resource_id (s). Based on this criterion, an IoT application running on an IoT gateway may be viewed in terms of the resources it owns and manages as well as the unsolicited events it reports.","title":"MQTT Namespace"},{"location":"references/mqtt-namespace/#mqtt-requestresponse-conversations","text":"Solicited interactions require a request/response message pattern to be established over MQTT. To initiate a solicited conversation, a remote server first sends a request message to a given application running on a specific device and then waits for a response. To ensure the delivery of request messages, applications that support request/response conversations via MQTT should subscribe to the following topic on startup: $EDC/account_name/client_id/app_id/# The $EDC prefix is used to mark topics that are used as control topics for remote management. This prefix distinguishes control topics from data topics that are used in unsolicited reports and marks the associated messages as transient (not to be stored in the historical data archive, if present). Note While Kura currently requires \u201c$EDC\u201d as the prefix for control topics, this prefix may change in the future for the following reasons: MQTT 3.1.1 discourages the use of topic starting with \u201c$\u201d for application purposes. As a binding of LWM2M over MQTT is taking shape, it would make sense to use a topic prefix for management messages like \u201cLWM2M\u201d or similar abbreviations (e.g. \"LW2\u201d, \u201cLWM\u201d). A requester (i.e., the remote server) initiates a request/response conversation through the following events: Generating a conversation identifier known as a request.id (e.g., by concatenating a random number to a timestamp) Subscribing to the topic where the response message will be published, where requester.client.id is the client ID of the requester, such as: $EDC/account_name/requester.client.id/app_id/REPLY/request.id Sending the request message to the appropriate application-specific topic with the following fields in the payload: request.id (identifier used to match a response with a request) requester.client.id (client ID of the requester) The application receives the request, processes it, and responds on a REPLY topic structured as: $EDC/account_name/requester.client.id/app_id/REPLY/request.id Note While this recommendation does not mandate the format of the message payload, which is application-specific, it is important that the request.id and requester.client.id fields are included in the payload. Kura leverages an MQTT payload encoded through Google Protocol Buffers. Kura includes the request.id and the requester.client.id as two named metrics of the Request messages. The Kura payload definition can be found here . Once the response for a given request is received, the requester unsubscribes from the REPLY topic.","title":"MQTT Request/Response Conversations"},{"location":"references/mqtt-namespace/#mqtt-requestresponse-example","text":"The following sample request/response conversation shows the device configuration being provided for an application: account_name: guest device client_id: F0:D2:F1:C4:53:DB app_id: CONF-V1 Remote Service Requester client_id: 00:E0:C7:01:02:03 The remote server publishes a request message similar to the following: Request Topic: $EDC/guest/F0:D2:F1:C4:53:DB/CONF-V1/GET/configurations Request Payload: request.id: 1363603920892-8078887174204257595 requester.client.id: 00:E0:C7:01:02:03 The gateway device replies with a response message similar to the following: Response Topic: $EDC/guest/00:E0:C7:01:02:03/CONF-V1/REPLY/1363603920892-8078887174204257595 Response Payload, where the following properties are mandatory: response.code Possible response code values include: 200 (RESPONSE_CODE_OK) 400 (RESPONSE_CODE_BAD_REQUEST) 404 (RESPONSE_CODE_NOTFOUND) 500 (RESPONSE_CODE_ERROR) response.exception.message (value is null or an exception message) response.exception.message (value is null or an exception stack trace) Note In addition to the mandatory properties, the response payload may also have custom properties whose description is beyond the scope of this document. It is recommended that the requester server employs a timeout to control the length of time that it waits for a response from the gateway device. If a response is not received within the timeout interval, the server can expect that either the device or the application is offline.","title":"MQTT Request/Response Example"},{"location":"references/mqtt-namespace/#mqtt-remote-resource-management","text":"A remote server interacts with the application\u2019s resources through read , create and update , delete, and execute operations. These operations are based on the previously described request/response conversations.","title":"MQTT Remote Resource Management"},{"location":"references/mqtt-namespace/#read-resources","text":"An MQTT message published on the following topic is a read request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/GET/resource_id The receiving application responds with a REPLY message containing the latest value of the requested resource. The resource_id is application specific and may be a hierarchical topic. It is recommended to design resource identifiers following the best practices established for REST API. For example, if an application is managing a set of sensors, a read request issued to the topic \" $EDC/account_name/client_id/app_id/GET/sensors \" will reply with the latest values for all sensors. Similarly, a read request issued to the topic \" $EDC/account_name/client_id/app_id/GET/sensors/temp \" will reply with the latest value for only a temperature sensor that is being managed by the application.","title":"Read Resources"},{"location":"references/mqtt-namespace/#create-or-update-resources","text":"An MQTT message published on the following topic is a create or update request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/PUT/resource_id The receiving application creates the specified resource (or updates it if it already exists) with the value supplied in the message payload and responds with a REPLY message. As in the read operations, the resource_id is application specific and may be a hierarchical topic. It is recommended to design resource identifiers following the best practices established for REST API. For example, to set the value for an actuator, a message can be published to the topic \" $EDC/account_name/client_id/app_id/PUT/actuator/1 \" with the new value suplliied in the message payload.","title":"Create or Update Resources"},{"location":"references/mqtt-namespace/#delete-resources","text":"An MQTT message published on the following topic is a delete request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/DEL/resource_id The receiving application deletes the specified resource, if it exists, and responds with a REPLY message.","title":"Delete Resources"},{"location":"references/mqtt-namespace/#execute-resources","text":"An MQTT message published on the following topic is an execute request for the resource identified by the resource_id : $EDC/account_name/client_id/app_id/EXEC/resource_id The receiving application executes the specified resource, if it exists, and responds with a REPLY message. The semantics of the execute operation is application specific.","title":"Execute Resources"},{"location":"references/mqtt-namespace/#other-operations","text":"The IoT application may respond to certain commands, such as taking a snapshot of its configuration or executing an OS-level command. The following topic namespace is recommended for command operations: $EDC/account_name/client_id/app_id/EXEC/command_name An MQTT message published with this topic triggers the execution of the associated command. The EXEC message may contain properties in the MQTT payload that can be used to parameterize the command execution.","title":"Other Operations"},{"location":"references/mqtt-namespace/#mqtt-unsolicited-events","text":"IoT applications have the ability to send unsolicited messages to a remote server using events to periodically report data readings from their resources, or to report special events and observed conditions. Tip It is recommended to not use MQTT control topics for unsolicited events, and subsequently, to avoid the $EDC topic prefix. Event MQTT topics generally follow the pattern shown below to report unsolicited data observations for a given resource: account_name/client_id/app_id/resource_id","title":"MQTT Unsolicited Events"},{"location":"references/mqtt-namespace/#discoverability","text":"The MQTT namespace guidelines in this document do not address remote discoverability of a given device\u2019s applications and its resources. The described interaction pattern can be easily adopted to define an application whose only responsibility is reporting the device profile in terms of installed applications and available resources.","title":"Discoverability"},{"location":"references/mqtt-namespace/#remote-osgi-management-via-mqtt","text":"The concepts previously described have been applied to develop a solution that allows for the remote management of certain aspects of an OSGi container through the MQTT protocol, including: Remote deployment of application bundles Remote start and stop of services Remote read and update of service configurations The following sections describe the MQTT topic namespaces and the application payloads used to achieve the remote management of an OSGi container via MQTT. Note For the scope of this document, some aspects concerning the encoding and compressing of the payload are not included. The applicability of the remote management solution, as inspired by the OSGi component model, can be extended beyond OSGi as the contract with the managing server based on MQTT topics and XML payloads.","title":"Remote OSGi Management via MQTT"},{"location":"references/mqtt-namespace/#remote-osgi-configurationadmin-interactions-via-mqtt","text":"An application bundle is installed in the gateway to allow for remote management of the configuration properties of the services running in the OSGi container. For information about the OSGi Configuration Admin Service and the OSGi Meta Type Service, please refer to the OSGi Service Platform Service R7 Specifications . The app_id for the remote configuration service of an MQTT application is \u201c CONF-V1 \u201d. The resources it manages are the configuration properties of the OSGi services. Service configurations are represented in XML format. The following service configuration XML message is an example of a watchdog service: <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?> <ns2:configuration xmlns:ns2= <http://eurotech.com/esf/2.0 xmlns= <http://www.osgi.org/xmlns/metatype/v1.2.0 > pid=\"org.eclipse.kura.watchdog.WatchdogService\"> <OCD id= \"org.eclipse.kura.watchdog.WatchdogService\" name= \"WatchdogService\" description= \"WatchdogService Configuration\" > <Icon resource= \"WatchdogService\" /> <AD id= \"watchdog.timeout\" name= \"watchdog.timeout\" required= \"true\" default= \"10000\" cardinality= \"0\" type= \"Integer\" description= \"\" /> </OCD> <ns2:properties> <ns2:property type= \"Integer\" array= \"false\" name= \"watchdog.timeout\" > <ns2:value> 10000 </ns2:value> </ns2:property> </ns2:properties> </ns2:configuration> The service configuration XML message is comprised of the following parts: The Object Class Definition (OCD), which describes the service attributes that may be configured. (The syntax of the OCD element is described in the OSGi Service Platform Service R7 Specifications ) The properties element, which contains one or more properties with their associated type and values. The type name must match the name provided in the corresponding attribute definition identifier (AD id) contained in the OCD. The \u201cCONF-V1\u201d application supports the read and update resource operations as described in the following sections.","title":"Remote OSGi ConfigurationAdmin Interactions via MQTT"},{"location":"references/mqtt-namespace/#read-all-configurations","text":"This operation provides all service configurations for which remote administration is supported. Request Topic: $EDC/account_name/client_id/CONF-V1/GET/configurations Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Configurations of all the registered services serialized in XML format","title":"Read All Configurations"},{"location":"references/mqtt-namespace/#read-configuration-for-a-given-service","text":"This operation provides configurations for a specific service that is identified by an OSGi service persistent identifier pid . Request Topic: $EDC/account_name/client_id/CONF-V1/GET/configurations/pid Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Configurations of the registered service identified by a pid serialized in XML format","title":"Read Configuration for a Given Service"},{"location":"references/mqtt-namespace/#update-all-configurations","text":"This operation remotely updates the configuration of a set of services. Request Topic: $EDC/account_name/client_id/CONF-V1/PUT/configurations Request Payload: Service configurations serialized in XML format Response Payload: Nothing application-specific beyond the response code","title":"Update All Configurations"},{"location":"references/mqtt-namespace/#update-the-configuration-of-a-given-service","text":"This operation remotely updates the configuration of the service identified by a pid . Request Topic: $EDC/account_name/client_id/CONF-V1/PUT/configurations/pid Request Payload: Service configurations serialized in XML format Response Payload: Nothing application-specific","title":"Update the Configuration of a Given Service"},{"location":"references/mqtt-namespace/#example-management-web-application","text":"The previously described read and update resource operations can be leveraged to develop a web application that allows for remote OSGi service configuration updates via MQTT though a web user-interface. The screen capture that follows shows an example administration application where, for a given IoT gateway, a list of all configurable services is presented to the administrator. When one such service is selected, a form is dynamically generated based on the metadata provided in the service OCD. This form includes logic to handle different attribute types, validate acceptable value ranges, and render optional values as drop-downs. When the form is submitted, the new values are communicated to the device through an MQTT resource update message.","title":"Example Management Web Application"},{"location":"references/mqtt-namespace/#remote-osgi-deploymentadmin-interactions-via-mqtt","text":"An application is installed in the gateway to allow for the remote management of the deployment packages installed in the OSGi container. For information about the OSGi Deployment Admin Service, please refer to the OSGi Service Platform Service Compendium 4.3 Specifications . The app_id for the remote deployment service of an MQTT application is \u201c DEPLOY-V2 \u201d. It allows to perform the following operations: Download, install and uninstall OSGi Deployment Packages Download and execute system updates based on shell scripts Get the list of bundles currently in the runtime Start and stop bundles","title":"Remote OSGi DeploymentAdmin Interactions via MQTT"},{"location":"references/mqtt-namespace/#deploy-v2","text":"","title":"DEPLOY-V2"},{"location":"references/mqtt-namespace/#download-and-install-messages","text":"The download request allows to download and optionally install a software package. The installation procedure will be performed after the download completes if the dp.install metric is set to true . If the metric is set to false , the installation step will not be performed. The package type must be specified using the dp.install.system.update request metric, the supported types are the following: OSGi Deployment Package : An OSGi deployment package. Selected with dp.install.system.update = false . Executable Shell Script : A shell script that applies a system level update. Selected with dp.install.system.update = true . The device will report the download progress and result of the installation to the cloud platform by sending asynchronous download notification messages and install notification messages . The completion notification logic differs depending on the package type. OSGi Deployment Package : The completion notification will be sent immediately after that the Deployment Package is installed on the system. Executable Shell Script : The completion notification will not be sent immediately after that the shell script is executed, but is determined by the execution of an additional verifier script . The verifier script will be executed at next framework startup . A install notification message will be sent afterwards, with dp.install.status = COMPLETED if the exit status is 0 or dp.install.status = FAILED otherwise. This is based on the assumption that a system level update will typically require a device restart. The verifier script can be provided in the following ways: By specifying a download URL as the value of the dp.install.verifier.uri request metric. In this case the framework will download the verifier script from the provided URL. By installing it during the execution of the main shell script. In this case the file must be placed in the /opt/eclipse/kura/data/persistance/verification directory. The installed verifier file name must have the ${name}-${version}.sh_verifier.sh structure where ${name} and ${version} must be replaced with the values of the dp.name and dp.version request metrics. Warning As said above, in case of Executable Shell Script , the completion notification will not be sent if the verifier script is not provided and/or the framework is not restarted. Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/EXEC/download Payload: metrics: dp.job.id (Long). Mandatory. Represents a unique Job ID for the download. dp.uri (String). Mandatory. Represents the URI of the deployment package. dp.name (String). Mandatory. The value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. dp.version (String). Mandatory. The value of the header DeploymentPackage-Version in the DP MANIFEST. The file will be saved in the temporary directory as - .jar possibly overwriting an existing file. dp.download.protocol (String) Mandatory. Specifies the protocol to be used to download the bundles/shell scripts. Must be set to HTTP or HTTPS. dp.download.block.size (Integer). Optional (if not specified by the cloud platform, it is estimated by the device, depending on the total file size. In this case it is fixed at 1% of the total file size). The size in kBi of the blocks used to download the DP. dp.download.block.delay (Integer). Optional (default: 0). Delay in ms between block transfers. dp.download.notify.block.size (Integer). Optional (if not specified by the cloud platform, it is estimated by the device, depending on the total file size. In this case it is fixed at 5% of the total file size). The size in kBi between the notification messages sent to the cloud platform. dp.download.timeout (Integer). Optional (default: 60000). The timeout in seconds for each block that has to be downloaded. dp.download.resume (Bool). Optional (default: true). Resume download transfer if supported by the server. dp.download.force (Bool). Optional (default: true). Specifies if the download forces to download again the file, if already exists on target device. dp.download.username (String). Optional. Username for password protected download. No authentication will be tried if username is not present. dp.download.password (String). Optional. Password for password protected download. No authentication will be tried if password is not present dp.download.hash (String). Optional. The algorithm and value of the hash of the file used to verify the integrity of the download. The format is of this property is: {algorithm}:{hash value} dp.install (Bool). Optional (default: true). Whether the package should be immediately installed after being downloaded. dp.install.system.update (Bool). Optional (default: false). Sets whether or not this is a system update, rather than a bundle/package update. dp.install.verifier.uri (String). Optional. The verifier script URI to run after the installation of the system update. dp.reboot (Bool). Optional (default: false). Whether the system should be rebooted as part of the package installation process. This property is ignored if dp.install.system.update is true. In such case the reboot must be implemented as part of the script. dp.reboot.delay (Integer). Optional (default: 0 - immediately). Delay after which the device will be rebooted. Only meaningful if dp.reboot is true and dp.install.system.update is false. Response: The client will reply immediately with an appropriate response.code. If the platform retries the request but the download is in progress, the client will reply that the request is already in progress with a 500 error code. If the DP has already been downloaded, the client will reply that the request has been accepted. If the dp.download.force flag is set to true, the client will start the download from the beginning, if false the device will proceed with the installation. Payload: no application-specific metrics or body. Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/GET/download Payload: no application-specific metrics or body. Response: Payload: metrics: dp.http.transfer.size (Integer). The size in kBi of the DP being downloaded dp.http.transfer.progress (Integer). The estimated progress of the download in percentage (0-100%). Do not rely on this indicator to detect the download completion. dp.http.transfer.status (String). An enum specifying the download status (IN_PROGRESS, COMPLETED, FAILED...). job.id (Long) Optional. The ID of the job to notify status Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/DEL/download Payload: no application-specific metrics or body. Response: Response Payload: Nothing application-specific beyond the response code. Unsolicited messages will report the status of the cancel operation.","title":"Download and Install Messages"},{"location":"references/mqtt-namespace/#unsolicited-messages-for-download-progress","text":"The client will start downloading the DP and will compute the size of the transfer from the HTTP header. This size will be used to estimate the download progress using the request parameter dp.download.block.size. Next, the client will report the download progress to the platform by publishing, with QoS==2, one or more unsolicited messages. If HTTP header is not available, the device will report 50% as dp.download.progress for all the download processes. The value of requester.client.id is one of the last downloads or install request received. Download Notification: $EDC/account_name/requester.client.id/DEPLOY-V2/NOTIFY/client-id/download Payload: metrics: job.id (Long). The ID of the job to notify status dp.download.size (Integer). The size in kBi of the DP being downloaded dp.download.progress (Integer). The estimated progress of the download in percentage (0-100%). Do not rely on this indicator to detect the download completion. dp.download.status (String). An enum specifying the download status (IN_PROGRESS, COMPLETED, FAILED, CANCELLED...). dp.download.error.message (String). In case of FAILED status, this metric will contain information about the error. dp.download.index (Integer). The index of the file that is currently downloaded. This is supposed to support multiple file downloads.","title":"Unsolicited messages for download progress"},{"location":"references/mqtt-namespace/#install-messages","text":"Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/EXEC/install Payload: metrics: dp.name (String). Mandatory. The value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. dp.version (String). Mandatory. The value of the header DeploymentPackage-Version in the DP MANIFEST. The basename of the DP file will to install is derived as - .jar. The file is assumed to reside in the temporary directory. dp.install.system.update (Bool). Mandatory. Specifies if the specified resource is a system update or not. It can be applied to the system immediately or after a system reboot. dp.install.verifier.uri (String). Optional. The verifier script URI to run after the installation of the system update. dp.reboot (Bool). Optional (default: false). Whether the system should be rebooted as part of the package installation process. There might be DPs requiring a post-installation (from the standpoint of the OSGi Deployment Admin) step requiring a system reboot. Note that the post-install phase is not handled by the Deployment Admin. The installation in this case is complete (and can fail) after the reboot. This property is ignored if dp.install.system.update is true. In such case the reboot must be implemented as part of the script. dp.reboot.delay (Integer). Optional (default: 0 - immediately). Delay after which the device will be rebooted. Only meaningful if dp.reboot is true and dp.install.system.update is false. Note This operation can be retried. Anyway, if it fails once it's likely to fail again. Response: Payload: Nothing application-specific beyond the response code. Unsolicited messages will report the status of the install operation. Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/GET/install Payload: no application-specific metrics or body. Response: Payload: metrics: dp.install.status (String). An enum specifying the install status IDLE INSTALLING BUNDLE dp.name (String). Optional. If installing: the value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. dp.version (String). Optional. If installing: the value of the header DeploymentPackage-Version in the DP MANIFEST.","title":"Install Messages"},{"location":"references/mqtt-namespace/#unsolicited-messages-for-install-progress","text":"If the value of dp.install in the original download request is true the client will start installing the DP. Due to the limitations of the OSGi DeploymentAdmin, it's not possible to have feedback on the install progress. However, these operations should normally complete in a few seconds, even for an upgrade. Otherwise (dp.install==false), the platform can request the installation of an already downloaded package through the following message: Install notification: $EDC/account_name/requester.client.id/DEPLOY-V2/NOTIFY/client-id/install Payload: metrics: job.id (Long). The ID of the job to notify status dp.name (String). The name of the package that is installing. dp.install.progress (Integer). The estimated progress of the install in percentage (0-100%). Due to limitations of the OSGi DeploymentAdmin, it's not possible to have a linear progress. It will go from 0% to 100% in one step. Do not rely on this indicator to detect the download completion. dp.install.status (String). An enum specifying the install status (IN_PROGRESS, COMPLETED, FAILED...). dp.install.error.message (String) Optional. In case of FAILED status, this metric will contain information about the error.","title":"Unsolicited messages for install progress"},{"location":"references/mqtt-namespace/#uninstall-messages","text":"Request: Request Topic: $EDC/[account_name]/[client_id]/DEPLOY-V2/EXEC/uninstall Payload: metrics: dp.name (String). Mandatory. The value of the header DeploymentPackage-SymbolicName in the DP MANIFEST. job.id (Long) Mandatory. The ID of the job to notify status dp.version (String). Mandatory. The value of the header DeploymentPackage-Version in the DP MANIFEST. The basename of the DP file will to install is derived as - .jar. The file is assumed to reside in the temporary directory. dp.reboot (Bool). Optional (default: false). Whether the system should be rebooted as part of the package uninstall process. dp.reboot.delay (Integer). Optional (default: 0 - immediately). Delay after which the device will be rebooted. Only meaningful if dp.reboot==true. Response: The client will reply immediately with an appropriate response.code. If the platform retries the request but the uninstall operation is in progress, the client will reply that the request is already in progress with a 500 error code. At the end of the uninstall operation, an unsolicited message is sent to the cloud platform to report the operation status. If a reboot was requested in the received uninstall request, it will be executed with the specified delay.","title":"Uninstall Messages"},{"location":"references/mqtt-namespace/#unsolicited-messages-for-uninstall-progress","text":"Uninstall notification: $EDC/account_name/requester.client.id/DEPLOY-V2/NOTIFY/client-id/uninstall Payload: metrics: job.id (Long). The ID of the job to notify status dp.name (String). The name of the package that is uninstalling. dp.uninstall.progress (Integer). The estimated progress of the install in percentage (0-100%). Due to limitations of the OSGi DeploymentAdmin, it's not possible to have a linear progress. It will go from 0% to 100% in one step. Do not rely on this indicator to detect the download completion. dp.uninstall.status (String). An enum specifying the uninstall status (IN_PROGRESS, COMPLETED, FAILED...). dp.uninstall.error.message (String) Optional. In case of FAILED status, this metric will contain information about the error.","title":"Unsolicited messages for uninstall progress"},{"location":"references/mqtt-namespace/#read-all-bundles","text":"This operation provides all the bundles installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/DEPLOY-V2/GET/bundles Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed bundles serialized in XML format The following XML message is an example of a bundle: <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?> <bundles> <bundle> <name> org.eclipse.osgi </name> <version> 3.8.1.v20120830-144521 </version> <id> 0 </id> <state> ACTIVE </state> </bundle> <bundle> <name> org.eclipse.equinox.cm </name> <version> 1.0.400.v20120522-1841 </version> <id> 1 </id> <state> ACTIVE </state> </bundle> </bundles> The bundle XML message is comprised of the following bundle elements: Symbolic name Version ID State","title":"Read All Bundles"},{"location":"references/mqtt-namespace/#start-a-bundle","text":"This operation starts a bundle identified by its ID. Request Topic: $EDC/account_name/client_id/DEPLOY-V2/EXEC/start/bundle_id Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Nothing application-specific beyond the response code","title":"Start a Bundle"},{"location":"references/mqtt-namespace/#stop-a-bundle","text":"This operation stops a bundle identified by its ID. Request Topic: $EDC/account_name/client_id/DEPLOY-V2/EXEC/stop/bundle_id Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Nothing application-specific beyond the response code","title":"Stop a Bundle"},{"location":"references/mqtt-namespace/#example-management-web-application_1","text":"The previously described read, start/stop, and install/uninstall resources can be used to implement a remote management application. An example of such application is Eclipse Kapua. In particular it is possible to use the download and install resources from the following sections in Eclipse Kapua console: Devices section : Selecting the Devices section, a target device, and then clicking on the Install button in the Packages tab will allow to send download and install requests. Batch Jobs section It is possible to create a batch job with the Package Download / Install definition to perform a download / install request on a set of target devices.","title":"Example Management Web Application"},{"location":"references/mqtt-namespace/#remote-gateway-inventory-via-mqtt","text":"An application is installed in the gateway to allow for the remote query of the resources installed in the OSGi container and the underlying OS. The app_id for the remote inventory service of an MQTT application is \u201c INVENTORY-V1 \u201d. The service allows retrieving all the different resources available/installed on the gateway. The service supports the following resources: BUNDLES : represents a OSGi Bundle DP : represents a OSGi Deployment Package DEB : represents a Linux Debian package RPM : represents a Linux RPM package APK : represents a Linux Alpine APK package DOCKER : represents a container CONTAINER IMAGE : represents a container image The resources are represented in JSON format. The following message is an example of a service deployment: { \"inventory\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"io.netty.transport-native-unix-common\" , \"version\" : \"4.1.34.Final\" , \"type\" : \"BUNDLE\" }, ] } The inventory JSON message is comprised of the following package elements: Name Version Type The \u201cINVENTORY-V1\u201d application supports only the read resource operations as described in the following sections.","title":"Remote Gateway Inventory via MQTT"},{"location":"references/mqtt-namespace/#inventory-bundles","text":"","title":"Inventory Bundles"},{"location":"references/mqtt-namespace/#read-all-bundles_1","text":"This operation provides all the bundles installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/bundles Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed bundles serialized in JSON format The following JSON message is an example of a bundle: { \"bundles\" :[ { \"name\" : \"org.eclipse.osgi\" , \"version\" : \"3.16.0.v20200828-0759\" , \"id\" : 0 , \"state\" : \"ACTIVE\" , \"signed\" : true }, { \"name\" : \"org.eclipse.equinox.cm\" , \"version\" : \"1.4.400.v20200422-1833\" , \"id\" : 1 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } The bundle JSON message is comprised of the following bundle elements: Symbolic name Version ID State Signed","title":"Read All Bundles"},{"location":"references/mqtt-namespace/#start-bundle","text":"This operation allows to start a bundles installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/EXEC/bundles/_start Request Payload: A JSON object that identifies the target bundle must be specified in payload body. Response Payload: Nothing application specific","title":"Start Bundle"},{"location":"references/mqtt-namespace/#stop-bundle","text":"Request Topic: $EDC/account_name/client_id/INVENTORY-V1/EXEC/bundles/_stop Request Payload: A JSON object that identifies the target bundle must be specified in payload body. Response Payload: Nothing application specific","title":"Stop Bundle"},{"location":"references/mqtt-namespace/#json-identifier-for-start-and-stop-requests","text":"The requests for starting and stopping a bundle require the application to include a JSON object in request payload for selecting the target bundle, the defined properties are the following: name : The symbolic name of the bundle to be started/stopped. This parameter must be of string type and it is mandatory. version : The version of the bundle to be stopped. This parameter must be of string type and it is optional. If multiple bundles match the selection criteria, only one of them will be stopped/started, which one is not defined. Examples: { \"name\" : \"org.eclipse.kura.example.beacon\" } { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" }","title":"JSON identifier for start and stop requests"},{"location":"references/mqtt-namespace/#inventory-deployment-packages","text":"","title":"Inventory Deployment Packages"},{"location":"references/mqtt-namespace/#read-all-deployment-packages","text":"This operation provides the deployment packages installed in the OSGi framework. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/packages Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed deployment packages serialized in JSON format The following JSON message is an example of a bundle: { \"deploymentPackages\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"signed\" : false , \"bundles\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"id\" : 171 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } ] } The deployment package JSON message is comprised of the following package elements: Symbolic name Version Signature: true if all the bundles in the deployment package are signed Bundles that are managed by the deployment package along with their symbolic name and version","title":"Read All Deployment Packages"},{"location":"references/mqtt-namespace/#inventory-system-packages-debrpmapk","text":"","title":"Inventory System Packages (DEB/RPM/APK)"},{"location":"references/mqtt-namespace/#read-all-system-packages","text":"This operation provides the Linux packages installed in OS. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/systemPackages Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed Linux Packages serialized in JSON format The following JSON message is an example of a bundle: { \"systemPackages\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"alsa-utils\" , \"version\" : \"1.1.8-2\" , \"type\" : \"DEB\" }, { \"name\" : \"ansible\" , \"version\" : \"2.7.7+dfsg-1\" , \"type\" : \"DEB\" }, { \"name\" : \"apparmor\" , \"version\" : \"2.13.2-10\" , \"type\" : \"DEB\" }, { \"name\" : \"apt\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-listchanges\" , \"version\" : \"3.19\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-transport-https\" , \"version\" : \"1.8.2.2\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-utils\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" } ] } The bundle JSON message is comprised of the following bundle elements: Name Version Type","title":"Read All System Packages"},{"location":"references/mqtt-namespace/#inventory-containers","text":"","title":"Inventory Containers"},{"location":"references/mqtt-namespace/#list-all-containers","text":"Using the API exposed by Inventory-V1, the user can manage containers via external applications such as Eclipse Kapua. This operation lists all the containers installed in the gateway. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/containers Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed containers serialized in JSON format The following JSON message is an example of what this request outputs: { \"containers\" : [ { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , \"type\" : \"DOCKER\" , \"state\" : \"active\" } ] } The container JSON message is comprised of the following elements: Name: The name of the docker container. Version: describes both the container's respective image and tag separated by a colon. Type: denotes the type of inventory payload State: describes the container's current state active : Container is running installed : Container is starting uninstalled : Container has failed, or is stopped unknown : Container state can not be determined","title":"List All Containers"},{"location":"references/mqtt-namespace/#start-a-container","text":"This operation allows starting a container installed on the gateway. * Request Topic * $EDC/account_name/client_id/INVENTORY-V1/EXEC/containers/_start * Request Payload * A JSON object that identifies the target container must be specified in the payload body. This payload will be described in the following section * Response Payload * Nothing application-specific","title":"Start a Container"},{"location":"references/mqtt-namespace/#stop-a-container","text":"Request Topic $EDC/account_name/client_id/INVENTORY-V1/EXEC/containers/_stop Request Payload A JSON object that identifies the target container must be specified in the payload body. This payload will be described in the following section. Response Payload Nothing application-specific","title":"Stop a Container"},{"location":"references/mqtt-namespace/#json-identifierpayload-for-container-start-and-stop-requests","text":"The requests for starting and stopping a container require the application to include a JSON object in the request payload for selecting the target container. Docker enforces unique container names on a gateway, and thus they can reliably be used as an identifier. Examples: { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , \"type\" : \"DOCKER\" , \"state\" : \"active\" } { \"name\" : \"container_1\" , }","title":"JSON identifier/payload for container start and stop requests"},{"location":"references/mqtt-namespace/#inventory-container-images","text":"","title":"Inventory Container Images"},{"location":"references/mqtt-namespace/#list-all-images","text":"Using the API exposed by Inventory-V1, the user can manage container images via external applications such as Eclipse Kapua. This operation lists all the images in the gateway. Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/images Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed containers serialized in JSON format The following JSON message is an example of what this request outputs: { \"images\" : [ { \"name\" : \"nginx\" , \"version\" : \"latest\" , \"type\" : \"CONTAINER_IMAGE\" } ] } The container JSON message is comprised of the following elements: Name: The name of the container image. Version: describes the container image's version. Type: denotes the type of inventory payload","title":"List All Images"},{"location":"references/mqtt-namespace/#delete-a-container-image","text":"This operation allows deleting a container image not in use on the gateway. * Request Topic * $EDC/account_name/client_id/INVENTORY-V1/EXEC/images/_delete * Request Payload * A JSON object that identifies the target image must be specified in the payload body. This payload will be described in the following section * Response Payload * Nothing application-specific","title":"Delete a Container Image"},{"location":"references/mqtt-namespace/#json-identifierpayload-for-container-image-delete-requests","text":"The requests for deleting a container image require the application to include a JSON object in the request payload for selecting the target. The JSON requires both name and version fields to be populated. Examples: { \"name\" : \"nginx\" , \"version\" : \"latest\" , \"type\" : \"CONTAINER_IMAGE\" } { \"name\" : \"nginx\" , \"version\" : \"latest\" , }","title":"JSON identifier/payload for container image delete requests"},{"location":"references/mqtt-namespace/#inventory-summary","text":"","title":"Inventory Summary"},{"location":"references/mqtt-namespace/#read-all-resources","text":"This operation provides a list of all the resources installed on the gateway Request Topic: $EDC/account_name/client_id/INVENTORY-V1/GET/inventory Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: Installed Linux Packages serialized in JSON format The following JSON message is an example of a bundle: { \"inventory\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"com.eclipsesource.jaxrs.provider.gson\" , \"version\" : \"2.3.0.201602281253\" , \"type\" : \"BUNDLE\" }, { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"type\" : \"DP\" } ] } The bundle JSON message is comprised of the following bundle elements: Name Version Type","title":"Read All Resources"},{"location":"references/mqtt-namespace/#remote-certificates-and-keys-management-via-mqtt-keys-v1-and-keys-v2","text":"","title":"Remote Certificates and Keys management via MQTT (KEYS-V1 and KEYS-V2)"},{"location":"references/mqtt-namespace/#keys-v1","text":"The KEYS-V1 app-id is exposed by the org.eclipse.kura.core.keystore bundle. This request handler allows the remote management platform to get a list of all the KeystoreService instances and corresponding keys managed by the framework in a given device. The request handler allows, also, to install new trusted certificate and to generate new key pairs directly in the device. Finally, the remote platform can request, from a defined key pair, the generation of a CSR that can be countersigned remotely by a trusted CA.","title":"KEYS-V1"},{"location":"references/mqtt-namespace/#read-all-the-kestoreservices","text":"This operation returns the list of all the KeystoreServices instantiated in the framework. Request Topic: $EDC/account_name/client_id/KEYS-V1/GET/keystores Request Payload: Nothing application-specific beyond the request ID and requester client ID Response Payload: List of all the managed KeystoreService instances with number of entries stored The following JSON message is an example of an output provided: [ { \"id\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"type\" : \"jks\" , \"size\" : 4 }, { \"id\" : \"org.eclipse.kura.crypto.CryptoService\" , \"type\" : \"jks\" , \"size\" : 3 }, { \"id\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"type\" : \"jks\" , \"size\" : 1 }, { \"id\" : \"org.eclipse.kura.core.keystore.DMKeystore\" , \"type\" : \"jks\" , \"size\" : 1 } ] Each entry of the array is specified by the following values: id : the KeystoreService PID type : the type of keystore managed by the given instance size : the number of entries in a given KeystoreService instance","title":"Read All the KestoreServices"},{"location":"references/mqtt-namespace/#read-key-entries","text":"This operation returns the list of all the key entries managed by the framework. If a request payload is specified, the list of entries is filtered based on the parameters in the request Request Topic: $EDC/account_name/client_id/KEYS-V1/GET/keystores/entries Request Payload: Nothing application-specific beyond the request ID and requester client ID. In this case the response will contain all the entries in all the managed keystoreService instances. A JSON object with one of the following: { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" } { \"alias\" : \"ca-godaddyclass2ca\" } Response Payload: List of all the key entries managed by the framework eventually filtered based on the parameters in the request. The following JSON message is an example of an output provided in the response body: [ { \"subjectDN\" : \"OU=Go Daddy Class 2 Certification Authority, O=\\\"The Go Daddy Group, Inc.\\\", C=US\" , \"issuer\" : \"OU=Go Daddy Class 2 Certification Authority,O=The Go Daddy Group\\\\, Inc.,C=US\" , \"startDate\" : \"Tue, 29 Jun 2004 17:06:20 GMT\" , \"expirationDate\" : \"Thu, 29 Jun 2034 17:06:20 GMT\" , \"algorithm\" : \"SHA1withRSA\" , \"size\" : 2048 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.SSLKeystore\" , \"alias\" : \"ca-godaddyclass2ca\" , \"type\" : \"TRUSTED_CERTIFICATE\" }, { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" } ]","title":"Read Key Entries"},{"location":"references/mqtt-namespace/#read-key-details","text":"This operation returns the details associated to a specified key in a keystore Request Topic: $EDC/account_name/client_id/KEYS-V1/GET/keystores/entries/entry Request Payload: A JSON with the keystoreServicePid and the alias of the desired key { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" \"alias\" : \"localhost\" } * Response Payload: * List of all the details associated to a key managed by the framework The following JSON message is an example of an output provided: { \"algorithm\" : \"RSA\" , \"size\" : 4096 , \"certificateChain\" : [ \"-----BEGIN CERTIFICATE-----\\nMIIFkTCCA3mgAwIBAgIECtXoiDANBgkqhkiG9w0BAQsFADBZMQswCQYDVQQGEwJJ\\nVDELMAkGA1UECBMCVUQxDjAMBgNVBAcTBUFtYXJvMREwDwYDVQQKEwhFdXJvdGVj\\naDEMMAoGA1UECxMDRVNGMQwwCgYDVQQDEwNFU0YwHhcNMjEwNDIyMTUxNTU1WhcN\\nMjQwMTE3MTUxNTU1WjBZMQswCQYDVQQGEwJJVDELMAkGA1UECBMCVUQxDjAMBgNV\\nBAcTBUFtYXJvMREwDwYDVQQKEwhFdXJvdGVjaDEMMAoGA1UECxMDRVNGMQwwCgYD\\nVQQDEwNFU0YwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC7iZ3fHUQa\\nTPgnvSxGZK4f6MZYfLclD74yqaCCWAztNxPQoiBoSPGdsBGBLNeFbwY0Yzg3qwXw\\nYvgzLJmoXV9rSix7LgXPzsSYfUGfu7PeYTy5bG9X2UVyw9LloUM5DKnw++5F7Xy7\\nF0KQQi0z6/HbbPkZ2aGyNRtMCTh1iAGy3gDh/mMnjpUYuoq1luoX1x6I77X0C+NP\\nTxldVYrTeQiswItAHZmkK1R8AYedbFBgjDuTrfRODxBwESn4kQSMLJ8yHYDRm8S6\\ngVz5LdkcM48UiV5hhF+bCD3UvYA00ZgZm2oOG1ONchYrE7pJr7eQVCYaXkS1lALB\\nKaVJzn03wiLJJv1FYLmGt5J/MwfqyCtBTLlieEVfwnxFCkymtews6SYK32e9q/uJ\\nfcdpWH7tOoarnAf7j5mE84rRU3HqzghK0bMxntfrSH3t18ZUt1/4Qx78WfiM1Te3\\nJtnWBqUNJtX6lgT8IxTWwyEqD183tyKIo8hPGyeJrzWA5RL5hYF5rCNTWzqz5Upi\\n0b/YI5K09+Rn8XmEzzaWjFq5zu6/WpqwPRA8kc2RAEA2scnOT+3yl9Lof/M7BrfL\\nMdjVOZ4MfXgl/fhFyd16AObXuZRUIeiWowKtEiNaiUn8paLDxG+LNV7p5wEQCZZI\\n+MsXMMp6G8Te4yILLCcGov7OkO2wx4GPWQIDAQABo2EwXzAxBgNVHSUEKjAoBggr\\nBgEFBQcDAQYIKwYBBQUHAwIGCCsGAQUFBwMDBggrBgEFBQcDCDALBgNVHQ8EBAMC\\nAvwwHQYDVR0OBBYEFKM5PlHoe8qFC6w0quGacazGWE/LMA0GCSqGSIb3DQEBCwUA\\nA4ICAQBvpXmbS9LN8n0A+uq+tM3CNtF3YotWRbQHIGJAFTvdq3003W3CVdmykFc8\\n9Kz8PoY1swBJms7GKjQLkqgTHoq6jU/cIXw+CoLQWmvAugva5C1u/5AHJZqTC06J\\nGZyn1Z9N5Lp0XcgogEyhxdbkHniv7jvcmbCurQijZc9nsd5St7e1pT0Co7KKI6Ff\\nODdVP6kZYBzKo4t20tATdAZJ8t7YHNKNq7ZVs1ej9oYUmmQieNXuE4UoHe5hzVQw\\n567cNHWcTHJoyPve03TSQV91wp5rRUKZm2p0WtFNuv22f5p5sQmttsJltzHCgTwE\\nK0j6qYKnXiq+EQs0A3uF9uiIB/KEDLjxscstqsQGFCFOmjA3GSbmJiKCnss3HkNn\\naknT7XCV6tqgDOfPnNzbWJODjYZ+V0DyNY5uqkG2cyREm/qGbH1kLEXhqdWbKqEs\\nsdW6x8p0ImTaPuRl3XEmXbolavIq+FTtOSz8vW1PsdD3quO6krrwiQMXKv1ZMjup\\nDGIZZ4hUUhN84efjlZyoFRvPRvZ8YvjjrHXLij0vcRxndlicevwl5ezlm0LBOpsT\\nkI2uWrbSbxlue/XdgwFCbN0+mXX88fGj6cjhpvd/xnwHaDHfSG9UoU149LJb6ZIZ\\nru+07QriQQxK8V7AdPr6bhmKPxbbFenvSQmsmgjAY93qtanbNg==\\n-----END CERTIFICATE-----\" ], \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"type\" : \"PRIVATE_KEY\" }","title":"Read Key Details"},{"location":"references/mqtt-namespace/#create-csr","text":"This operation returns the CSR for a specific key pair managed by the framework Request Topic: $EDC/account_name/client_id/KEYS-V1/POST/keystores/entries/csr Request Payload: A JSON with the all the details necessary to generate the CSR { \"keystoreServicePid\" : \"org.eclipse.kura.core.keystore.HttpsKeystore\" , \"alias\" : \"localhost\" , \"signatureAlgorithm\" : \"SHA256withRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" } Response Payload: The generated CSR in the body of the message -----BEGIN CERTIFICATE REQUEST----- MIIEgTCCAmkCAQAwPDELMAkGA1UEBhMCVVMxEDAOBgNVBAoTB0VjbGlwc2UxDDAK BgNVBAsTA0lvVDENMAsGA1UEAxMES3VyYTCCAiIwDQYJKoZIhvcNAQEBBQADggIP ADCCAgoCggIBAICTNbBm2wIV/TvddB3OW2s2WJmhAOBxwDSdpxGpgWDzmFAydCt5 SfWCIeC0kmQfrJpcvcIB7IoE2I7HWtIOxV9c+E+n6R76NvdBQzB8enFfZu4ahIKy ul2VXQSj0VtYLZvG3yx6af4j8UFWsf2AuAe5Fd1dSBq9aEoRU/D5/uNQOQJi45Hk ds1KK0FcTkfPjugUCLf1Uf0xXnK1V7yZGrgDpPDbZAYCrcsGomdziO8zkE88gKaa oC1madGL44yz5tiHTKvbf+O+fKc31N4iDvnIg8f87IMF0D4afDF+3AJjVfcFtp3Q xWP3zpKqzPzpzWagTzsW446YMxamZgkDxLsVLitQtesom4ON3HT8s+jxHQhCO5LR 83Ge10+6viJtkp20GYCqANO85c3TaD9njOE0y8P/T7Nk8MwnBbVgwa15QEWRqjEd HB6dF5jKdxlfZhPe2AVnLWAd/W96tCIBSqYu6TTH8npprp/S4t10tRkpaLGa+24c VlsjR6AFUX4KksvE/mbXd9QsvKgw/h3g4Jly4W/Ourt1LAH19tzGwULNCS7Ft9rp IXUsbmUUwb0V3B3ptcJUDzPUw8LdbItPnXzaPegxmkHO8IllcrdRBXrpcTwJl1ug MTMWKW/UjUwKcNQ0mGIxQ18aS0mHk8x8bVTnYLcCnGq3NeiFWvOiJIJpAgMBAAGg ADANBgkqhkiG9w0BAQsFAAOCAgEATsHVZAEjkMSpwozWbVvDw4iJOSYaQ7ZJXhGZ n81puMy/kcdNVD2hfG2c4ern8KPib6hYd1mbQpyNtsbJ68VOPIYOdiaqFd7+lbtM IVNETBA9ezXzzXwPCtiJYpmeDYz6HfIzRRzuoJhZtOrgyw8v5wiM0NkenDbTQs4l Od/YPFlHnEDkTNM+B/ZJJxRIg3sPhAAgj5HH0Mj2053z66hLDYAo4Tos98MwUcuA dY1pcs3brxg6z7xz4vbNKyj0Lh8Gua92OSbl1AFZYb6KXm/7+Md0la/YD+K/E2n6 hUAcHkr3ayNuTI6lkQFptCHzb4Zr8rdbu63JRno9PFTnW+fa/0xi35DoHD2SAhwA CUGXTR+HQXkzB/9NE9X0TxS8SwyrE8sfw4usZm25tACdZ33xziqJXOmbChETyL2b J1IcbsHaeN2Shjnj7UQj+hQFnjVwRLTd0zWMN/l7mPj6TiW9ehubE8ce5siHW7NO mqJU1bklxTefefSNHTXrvTInuDXT81gLBRE3x+6uqU2kkJnL8jkrkebDDBhYF+qO 6dB4W5WGbEHxorX2qfjImvy2Ohsl3rL/DqJgqECZaubTz1Xcj/kl9bdxs0pfa6IY Inre5iom9bGcA6W6U34jRsrE2pobi6c9Yimrbr/R2O/8Oy2k94FQta8tg8jbAxBi Z0Vd1nM= -----END CERTIFICATE REQUEST-----","title":"Create CSR"},{"location":"references/mqtt-namespace/#store-trusted-certificate","text":"This operation stores the provided certificate as a Trusted Certificate Entry managed by the framework Request Topic: $EDC/account_name/client_id/KEYS-V1/POST/keystores/entries/certificate Request Payload: A JSON with the all the details necessary to generate create the new entry { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"myCertTest99\" , \"certificate\" : \"-----BEGIN CERTIFICATE----- MIIDdzCCAl+gAwIBAgIEQsO0gDANBgkqhkiG9w0BAQsFADBsMRAwDgYDVQQGEwdV bmtub3duMRAwDgYDVQQIEwdVbmtub3duMRAwDgYDVQQHEwdVbmtub3duMRAwDgYD VQQKEwdVbmtub3duMRAwDgYDVQQLEwdVbmtub3duMRAwDgYDVQQDEwdVbmtub3du MB4XDTIxMDQxNDA4MDIyOFoXDTIxMDcxMzA4MDIyOFowbDEQMA4GA1UEBhMHVW5r bm93bjEQMA4GA1UECBMHVW5rbm93bjEQMA4GA1UEBxMHVW5rbm93bjEQMA4GA1UE ChMHVW5rbm93bjEQMA4GA1UECxMHVW5rbm93bjEQMA4GA1UEAxMHVW5rbm93bjCC ASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJSWJDxu8UNC4JGOgK31WCvz NKy2ONH+jTVKnBY7Ckb1hljJY0sKO55aG1HNDfkev2lJTsPIz0nJjNsqBvB1flvf r6XVCxdN0yxvU5g9SpRxE/iiPX0Qt7463OfzyKW97haJrrhF005RHYNcORMY/Phj hFDnZhtAwpbQLzq2UuIZ7okJsx0IgRbjH71ZZuvYCqG7Ct/bp1D7w3tT7gTbIKYH ppQyG9rJDEh9+cr9Hyk8Gz7aAbPT/wMH+/vXDjH2j/M1Tmed0ajuGCJumaTQ4eHs 9xW3B3ugycb6e7Osl/4ESRO5RQL1k2GBONv10OrKDoZ5b66xwSJmC/w3BRWQ1cMC AwEAAaMhMB8wHQYDVR0OBBYEFPospETb5HNeD/DmS9mwt+v/AYq/MA0GCSqGSIb3 DQEBCwUAA4IBAQBxMe1xQVQKt36A5qVlEZyxI9eb6eQRlYzorOgP2tFaOsvDPpRI CALhPmxgQl/5QvKFfCXKoxWj1Spg4sF6fJp6jhSjLpmChS9lf5fRaWS20/pxIddM 10diq3r6HxLKSxCYK7Pf5scOeZquvwfo8Kxye01bvCMFf1s1K3ZEZszk5Oo2MnWU U22YnXfZm1C0h2WMUcou35A7CeVAHPWI0Rvefojv1qYlQScJOkCN5lO6C/1qvRhq nDQdQN/m1HQbpfh2DD6F33nBjkyLQyMRF8uMnspLrLLj8lecSTJZO4fGJOaIXh3O 44da9A02FAf5nRRQpwP2x/4IZ5RTRBzrqbqD -----END CERTIFICATE-----\" } Response Payload: Nothing","title":"Store Trusted Certificate"},{"location":"references/mqtt-namespace/#generate-keypair","text":"This operation will generate a new key pair directly in the device, based on the parameters received from the request Request Topic: $EDC/account_name/client_id/KEYS-V1/POST/keystores/entries/keypair Request Payload: A JSON with the all the details necessary to create the new key pair { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"algorithm\" : \"RSA\" , \"size\" : 1024 , \"signatureAlgorithm\" : \"SHA256WithRSA\" , \"attributes\" : \"CN=Kura, OU=IoT, O=Eclipse, C=US\" } Response Payload: Nothing","title":"Generate KeyPair"},{"location":"references/mqtt-namespace/#delete-entry","text":"This operation will delete the specified entry from the framework managed keystores Request Topic: $EDC/account_name/client_id/KEYS-V1/DEL/keystores/entries Request Payload: A JSON with the all the details necessary to identify the entry to be deleted { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"mycerttestec\" } Response Payload: Nothing","title":"Delete Entry"},{"location":"references/mqtt-namespace/#keys-v2","text":"Starting from Kura 5.4.0, the KEYS-V2 request handler is also available, it supports all of the request endpoints of KEYS-V1 plus an additional endpoint that allows to upload and modify private key entries:","title":"KEYS-V2"},{"location":"references/mqtt-namespace/#uploading-a-private-key-entry","text":"Request Topic: $EDC/account_name/client_id/KEYS-V2/POST/keystores/entries/privatekey Request Payload: The request should include the private key in unencrypted PEM format and the certificate chain in PEM format, the first certificate in the certificateChain list must use the public key associated with the private key supplied as the privateKey parameter. The device will overwrite the entry with the provided alias if it already exists. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"privateKey\" : \"-----BEGIN RSA PRIVATE KEY-----\\n...\\n-----END RSA PRIVATE KEY-----\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] } Response Payload: Nothing","title":"Uploading a Private Key Entry"},{"location":"references/mqtt-namespace/#updating-a-private-key-entry","text":"Request Topic: $EDC/account_name/client_id/KEYS-V2/POST/keystores/entries/privatekey Request Payload: In order to update the certificate chain associated to a specific private key entry it is possible to use the same format as previous request and omit the privateKey parameter. In this case the certificate chain of the existing entry will be replaced with the one specified in the request and the existing private key will be retained. This request can be useful for example to create a CSR on the device, sign it externally and then updating the corresponding entry with the resulting certificate. { \"keystoreServicePid\" : \"MyKeystore\" , \"alias\" : \"keypair1\" , \"certificateChain\" :[ \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\" , ] } Response Payload: Nothing","title":"Updating a Private Key Entry"},{"location":"references/rest-apis/rest-cloudconnection-api/","text":"Rest CloudConnection v1 API Note This API can also be accessed via the RequestHandler with app-id: CLD-V1 . The CloudConnectionRestService APIs provides methods to manage cloud connection related components like CloudEndpoint , CloudPublisher and CloudSubscriber instances. Identities with rest.cloudconnection permissions can access these APIs. GET methods Find Cloud Component Instances Description: This method returns all the Cloud Component instances, including CloudEndpoint , CloudPublisher and CloudSubscriber instances. Method: GET API PATH: services/cloudconnection/v1/instances Responses 200 Ok Status { \"cloudEndpointInstances\" : [ { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-todelete\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-2\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-3\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-test\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" } ], \"pubsubInstances\" : [ { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"pid\" : \"testPub\" , \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"type\" : \"PUBLISHER\" }, { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"pid\" : \"testPub\" , \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"type\" : \"SUBSCRIBER\" } ] } cloudEndpointType : The possible values are: CLOUD_CONNECTION_MANAGER if the component implements CloudConnectionManager CLOUD_ENDPOINT otherwise. If cloudEndpointType is CLOUD_CONNECTION_MANAGER, it is possible to use the cloudEndpoint/connect , cloudEndpoint/disconnect and cloudEndpoint/isConnected methods to manage the connection state. 500 Internal Server Error Get CloudComponent Factories Description: This method returns all the Factories able to create Component for CloudEndpoint , including CloudConnectionFactory , CloudPublisher , CloudSubscriber Method: GET API PATH: services/cloudconnection/v1/factories Responses 200 Ok Status { \"cloudConnectionFactories\" : [ { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-2\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.cloud.CloudService\\\\-[a-zA-Z0-9]+$\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager(\\\\-[a-zA-Z0-9]+)?$\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.CloudEndpoint\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.cloudconnection.raw.mqtt.CloudEndpoint(\\\\-[a-zA-Z0-9]+)?$\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.camel.cloud.factory.CamelFactory\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.camel.cloud.factory.CamelFactory\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.camel.cloud.factory.CamelFactory(\\\\-[a-zA-Z0-9]+)?$\" } ], \"pubSubFactories\" : [ { \"factoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.subscriber.RawMqttSubscriber\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" }, { \"factoryPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" , \"defaultPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" , \"defaultPidRegex\" : \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher(\\\\-[a-zA-Z0-9]+)?$\" }, { \"factoryPid\" : \"org.eclipse.kura.cloud.subscriber.CloudSubscriber\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" }, { \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" }, { \"factoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.publisher.RawMqttPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" }, { \"factoryPid\" : \"org.eclipse.kura.event.publisher.EventPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" } ] } For cloudConnectionFactories elements: cloudConnectionFactoryPid : the PID of the cloud connection factory defaultCloudEndpointPid : If set, it represents the default PID for an instance of a new component suggested by the factory. This can be used by an user interface as a suggestion/placeholder for the name of a new cloud endpoint. cloudEndpointPidRegex : If set, its value represents a regular expression that the PID of a new component must match. For pubSubFactories elements: factoryPid : The factory PID of the publisher/subscripter component. It identifies the component type. It can be used for example to create a new component using the pubSub POST method. cloudConnectionFactoryPid : Specifies the cloudConnectionFactoryPid of the CloudConnectionFactory associated with this component. Each publisher/subscriber component is only compatible with CloudEndpoint instances created by the factory having this cloudConnectionFactoryPid . defaultPid : If set, it represents the default PID for an instance of a new component suggested by the factory. This can be used by an user interface as a suggestion/placeholder for the name of a new publisher/subscriber. defaultPidRegex : If set, its value represents a regular expression that the PID of a new component must match. 500 Internal Server error POST methods Get StackComponents Pids Description: This method retrieves all all PIDs of Component instances that make up the stack for a specific CloudEndpoint . Examples of such components can be CloudService , DataService , DataTransportService . Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/stackComponentPids Request { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" } Responses 200 Ok Status { \"pids\" : [ \"org.eclipse.kura.cloud.CloudService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"org.eclipse.kura.data.DataService\" ] } 404 if cloudConnectionFactoryPid or cloudEndpointPid are not found 500 Internal Server Error Create Cloud Endpoint Description: This method create a new CloudEndpoint . The CloudConnectionFactory will always create a CloudEndpoint instance with the given cloudEndpointPid and optionally other associated stack components, for example CloudService , DataService , DataTransportService . Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint Request { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-1\" } cloudEndpointPid : The cloudEndpointPid of the new instance that will be created. If the associated factory specifies the cloudEndpointPidRegex property, this parameter must match the provided regex. cloudConnectionFactoryPid : The cloudConnectionFactoryPid of the factory that should be used to create the new component. Responses 204 Ok Status 400 malformed cloudConnectionFactoryPid or cloudEndpointPid . 404 Wrong cloudConnectionFactoryPid 500 Internal Server Error Create Publisher/Subscriber instance Description: his method create a new CloudPublisher or a CloudSubscriber instance for a specific CloudEndpoint CloudEndpoint . The type of the instance depends from the type of the specified factory. Method: POST API PATH: services/cloudconnection/v1/pubSub Request { \"pid\" : \"testPub\" , \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" } pid : The PID of the new publisher/subscriber component. If the publisher/subscriber factory specifies the defaultPidRegex property, this parameter must match the provided regex. factoryPid : The factoryPid of the publisher/subscriber factory. cloudEndpointPid : The PID of the CloudEndpoint that the new publisher/subscriber component will be associated with. The associated CloudEndpoint must have been created by the CloudConnectionFactory with the cloudConnectionFactoryPid specified by the publisher/subscriber factory. Responses 204 Ok Status 400 malformed pid , factoryPid or cloudEndpointPid 404 If factoryPid or cloudEndpointPid are wrong. Get Configurations Description: This method retrieves the complete configuration, including the metatype description, of a cloud component instance. This method will return the configuration of CloudPublisher instances, CloudSubscriber instances, or the configuration of components that are part of a cloud stack, whose pids are returned by the cloudEndpoint/stackComponentPids method. Method: POST API PATH: services/cloudconnection/v1/configurations Request { \"pids\" : [ \"testPub\" , \"org.eclipse.kura.cloud.CloudService\" ] } Responses { \"configs\" : [ { \"pid\" : \"testPub\" , \"definition\" : { \"ad\" : [ { \"name\" : \"Application Id\" , \"description\" : \"The application id used to publish messages.\" , \"id\" : \"appId\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"W1\" , \"isRequired\" : true }, { \"name\" : \"Application Topic\" , \"description\" : \"Follows the application Id and specifies the rest of the publishing topic. Wildcards can be defined in the topic by specifing a $value in the field. The publisher will try to match \\\"value\\\" with a corresponding property in the received KuraMessage. If possible, the $value placeholder will be substituted with the real value specified in the KuraMessage received from the user application.\" , \"id\" : \"app.topic\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"A1/$assetName\" , \"isRequired\" : false }, { \"option\" : [ { \"label\" : \"0\" , \"value\" : \"0\" }, { \"label\" : \"1\" , \"value\" : \"1\" } ], \"name\" : \"Qos\" , \"description\" : \"The desired quality of service for the messages that have to be published. If Qos is 0, the message is delivered at most once, or it is not delivered at all. If Qos is set to 1, the message is always delivered at least once.\" , \"id\" : \"qos\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"defaultValue\" : \"0\" , \"isRequired\" : true }, { \"name\" : \"Retain\" , \"description\" : \"Default retaing flag for the published messages.\" , \"id\" : \"retain\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"isRequired\" : true }, { \"option\" : [ { \"label\" : \"Data\" , \"value\" : \"data\" }, { \"label\" : \"Control\" , \"value\" : \"control\" } ], \"name\" : \"Kind of Message\" , \"description\" : \"Type of message to be published.\" , \"id\" : \"message.type\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"data\" , \"isRequired\" : true }, { \"name\" : \"Priority\" , \"description\" : \"Message priority. Priority level 0 (highest) should be used sparingly and reserved for messages that should be sent with the minimum latency. Default is set to 7.\" , \"id\" : \"priority\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"defaultValue\" : \"7\" , \"isRequired\" : true } ], \"name\" : \"CloudPublisher\" , \"description\" : \"The CloudPublisher allows to define publishing parameters and provide a simple endpoint where the applications can attach to publish their messages.\" , \"id\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" }, \"properties\" : { \"app.topic\" : { \"value\" : \"A1/$assetName\" , \"type\" : \"STRING\" }, \"message.type\" : { \"value\" : \"data\" , \"type\" : \"STRING\" }, \"qos\" : { \"value\" : 0 , \"type\" : \"INTEGER\" }, \"appId\" : { \"value\" : \"W1\" , \"type\" : \"STRING\" }, \"retain\" : { \"value\" : false , \"type\" : \"BOOLEAN\" }, \"priority\" : { \"value\" : 7 , \"type\" : \"INTEGER\" }, \"service.factoryPid\" : { \"value\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"type\" : \"STRING\" }, \"cloud.endpoint.service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"testPub\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher-1699623980455-20\" , \"type\" : \"STRING\" } } }, { \"pid\" : \"org.eclipse.kura.cloud.CloudService\" , \"definition\" : { \"ad\" : [ { \"option\" : [ { \"label\" : \"Set display name as device name\" , \"value\" : \"device-name\" }, { \"label\" : \"Set display name from hostname\" , \"value\" : \"hostname\" }, { \"label\" : \"Custom\" , \"value\" : \"custom\" }, { \"label\" : \"Server defined\" , \"value\" : \"server\" } ], \"name\" : \"Device Display-Name\" , \"description\" : \"Friendly name of the device. Device name is the common name of the device (eg: Reliagate 20-25, Raspberry Pi, etc.). Hostname will use the linux hostname utility. Custom allows for defining a unique string. Server defined relies on the remote management server to define a name.\" , \"id\" : \"device.display-name\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"device-name\" , \"isRequired\" : true }, { \"name\" : \"Device Custom-Name\" , \"description\" : \"Custom name for the device. This value is applied ONLY if device.display-name is set to \\\"Custom\\\"\" , \"id\" : \"device.custom-name\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"isRequired\" : false }, { \"name\" : \"Topic Control-Prefix\" , \"description\" : \"Topic prefix for system and device management messages.\" , \"id\" : \"topic.control-prefix\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"$EDC\" , \"isRequired\" : true }, { \"name\" : \"Encode gzip\" , \"description\" : \"Compress message payloads before sending them to the remote server to reduce the network traffic.\" , \"id\" : \"encode.gzip\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"isRequired\" : false }, { \"name\" : \"Republish Mqtt Birth Cert On Gps Lock\" , \"description\" : \"Whether or not to republish the MQTT Birth Certificate on GPS lock event\" , \"id\" : \"republish.mqtt.birth.cert.on.gps.lock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"isRequired\" : true }, { \"name\" : \"Republish Mqtt Birth Cert On Modem Detect\" , \"description\" : \"Whether or not to republish the MQTT Birth Certificate on modem detection event\" , \"id\" : \"republish.mqtt.birth.cert.on.modem.detect\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"isRequired\" : true }, { \"name\" : \"Republish Mqtt Birth Cert On Tamper Event\" , \"description\" : \"Whether or not to republish the MQTT Birth Certificate on a tamper event. This has effect only if a TamperDetectionService is available in the framework.\" , \"id\" : \"republish.mqtt.birth.cert.on.tamper.event\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"isRequired\" : true }, { \"name\" : \"Enable Default Subscriptions\" , \"description\" : \"Manages the default subscriptions to the gateway management MQTT topics. When disabled, the gateway will not be remotely manageable.\" , \"id\" : \"enable.default.subscriptions\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"isRequired\" : true }, { \"option\" : [ { \"label\" : \"Kura Protobuf\" , \"value\" : \"kura-protobuf\" }, { \"label\" : \"Simple JSON\" , \"value\" : \"simple-json\" } ], \"name\" : \"Payload Encoding\" , \"description\" : \"Specify the message payload encoding.\" , \"id\" : \"payload.encoding\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"kura-protobuf\" , \"isRequired\" : true } ], \"icon\" : [ { \"resource\" : \"CloudService\" , \"size\" : 32 } ], \"name\" : \"CloudService\" , \"description\" : \"The CloudService allows for setting a user friendly name for the current device. It also provides the option to compress message payloads to reduce network traffic.\" , \"id\" : \"org.eclipse.kura.cloud.CloudService\" }, \"properties\" : { \"topic.control-prefix\" : { \"value\" : \"$EDC\" , \"type\" : \"STRING\" }, \"republish.mqtt.birth.cert.on.tamper.event\" : { \"value\" : true , \"type\" : \"BOOLEAN\" }, \"device.custom-name\" : { \"value\" : \"Intel UP\u00b2\" , \"type\" : \"STRING\" }, \"device.display-name\" : { \"value\" : \"device-name\" , \"type\" : \"STRING\" }, \"payload.encoding\" : { \"value\" : \"kura-protobuf\" , \"type\" : \"STRING\" }, \"republish.mqtt.birth.cert.on.modem.detect\" : { \"value\" : false , \"type\" : \"BOOLEAN\" }, \"service.factoryPid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService-1699623980404-13\" , \"type\" : \"STRING\" }, \"enable.default.subscriptions\" : { \"value\" : true , \"type\" : \"BOOLEAN\" }, \"republish.mqtt.birth.cert.on.gps.lock\" : { \"value\" : false , \"type\" : \"BOOLEAN\" }, \"encode.gzip\" : { \"value\" : true , \"type\" : \"BOOLEAN\" }, \"DataService.target\" : { \"value\" : \"(kura.service.pid=org.eclipse.kura.data.DataService)\" , \"type\" : \"STRING\" }, \"kura.cloud.service.factory.pid\" : { \"value\" : \"org.eclipse.kura.core.cloud.factory.DefaultCloudServiceFactory\" , \"type\" : \"STRING\" } } } ] } - 200 Status OK - 500 Internal Error Connect CloudEndpoint Description: This method allows to trigger the connection of the specified CloudEndpoint Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/connect Request { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" } Responses 204 Status OK 404 Wrong cloudEndpointPid 500 Internal Server Error in case of connection problems. Disconnect CloudEndpoint Description: This method allows to trigger the disconnection of the specified CloudEndpoint Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/disconnect Request { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" } Responses 204 Status OK 404 Wrong cloudEndpointPid 500 Internal Server Error in case of connection problems. Check CloudEndpoint connection status Description: This method allows to check the status of the connection of the specified CloudEndpoint Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/isConnected Request { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" } Responses { \"connected\" : false } - 200 Status OK - 404 Wrong cloudEndpointPid - 500 Internal Server Error PUT methods Update CloudEndpoint stack component configurations Description: This method allows to update the configuration of a cloud component instance. This method can be used to update the configuration of CloudPublisher instances, CloudSubscriber instances, or the configuration of components that are part of a cloud stack, whose pids are returned by the cloudEndpoint/stackComponentPids method. Method: PUT API PATH: services/cloudconnection/v1/configurations Request takeSnapshot set to true o false to specify if the ConfigurationService must save a snapshot with the updated configuration. { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"properties\" : { \"broker-url\" : { \"type\" : \"STRING\" , \"value\" : \"mqtt://mqtt.eclipseprojects.io:1883\" }, \"topic.context.account-name\" : { \"type\" : \"STRING\" , \"value\" : \"account-name-testX2\" }, \"username\" : { \"type\" : \"STRING\" , \"value\" : \"username\" }, \"password\" : { \"type\" : \"PASSWORD\" , \"value\" : \"Placeholder\" }, \"client-id\" : { \"type\" : \"STRING\" , \"value\" : \"\" }, \"keep-alive\" : { \"type\" : \"INTEGER\" , \"value\" : 30 }, \"timeout\" : { \"type\" : \"INTEGER\" , \"value\" : 20 }, \"clean-session\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"lwt.topic\" : { \"type\" : \"STRING\" , \"value\" : \"$EDC/#account-name/#client-id/MQTT/LWT\" }, \"lwt.payload\" : { \"type\" : \"STRING\" , \"value\" : \"\" }, \"lwt.qos\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"lwt.retain\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"in-flight.persistence\" : { \"type\" : \"STRING\" , \"value\" : \"memory\" }, \"protocol-version\" : { \"type\" : \"INTEGER\" , \"value\" : 4 }, \"SslManagerService.target\" : { \"type\" : \"STRING\" , \"value\" : \"(kura.service.pid=org.eclipse.kura.ssl.SslManagerService)\" } } } ], \"takeSnapshot\" : true } Responses 204 Status OK 400 Bad request if pid is wrong or non existent. DELETE methods Delete CloudEndpoint Description: This method allow to delete a CloudEndpoint instance. Method: DELETE API PATH: services/cloudconnection/v1/cloudEndpoint Request { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-1\" } Responses 204 Status OK 404 if cloudConnectionFactoryPid or cloudEndpointPid are not found Delete Publisher/Subscriber instance Description: This method allows to delete a CloudPublisher or CloudSubscriber instance. Method: DELETE API PATH: services/cloudconnection/v1/pubSub Request { \"pid\" : \"testPub\" } Responses 204 Status OK 404 Wrong cloudConnectionFactoryPid or cloudEndpointPid .","title":"Cloud Connection"},{"location":"references/rest-apis/rest-cloudconnection-api/#rest-cloudconnection-v1-api","text":"Note This API can also be accessed via the RequestHandler with app-id: CLD-V1 . The CloudConnectionRestService APIs provides methods to manage cloud connection related components like CloudEndpoint , CloudPublisher and CloudSubscriber instances. Identities with rest.cloudconnection permissions can access these APIs.","title":"Rest CloudConnection v1 API"},{"location":"references/rest-apis/rest-cloudconnection-api/#get-methods","text":"","title":"GET methods"},{"location":"references/rest-apis/rest-cloudconnection-api/#find-cloud-component-instances","text":"Description: This method returns all the Cloud Component instances, including CloudEndpoint , CloudPublisher and CloudSubscriber instances. Method: GET API PATH: services/cloudconnection/v1/instances","title":"Find Cloud Component Instances"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses","text":"200 Ok Status { \"cloudEndpointInstances\" : [ { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-todelete\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-2\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-3\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-test\" , \"state\" : \"DISCONNECTED\" , \"cloudEndpointType\" : \"CLOUD_CONNECTION_MANAGER\" } ], \"pubsubInstances\" : [ { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"pid\" : \"testPub\" , \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"type\" : \"PUBLISHER\" }, { \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"pid\" : \"testPub\" , \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"type\" : \"SUBSCRIBER\" } ] } cloudEndpointType : The possible values are: CLOUD_CONNECTION_MANAGER if the component implements CloudConnectionManager CLOUD_ENDPOINT otherwise. If cloudEndpointType is CLOUD_CONNECTION_MANAGER, it is possible to use the cloudEndpoint/connect , cloudEndpoint/disconnect and cloudEndpoint/isConnected methods to manage the connection state. 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#get-cloudcomponent-factories","text":"Description: This method returns all the Factories able to create Component for CloudEndpoint , including CloudConnectionFactory , CloudPublisher , CloudSubscriber Method: GET API PATH: services/cloudconnection/v1/factories","title":"Get CloudComponent Factories"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_1","text":"200 Ok Status { \"cloudConnectionFactories\" : [ { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-2\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.cloud.CloudService\\\\-[a-zA-Z0-9]+$\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager(\\\\-[a-zA-Z0-9]+)?$\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.CloudEndpoint\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.cloudconnection.raw.mqtt.CloudEndpoint(\\\\-[a-zA-Z0-9]+)?$\" }, { \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.camel.cloud.factory.CamelFactory\" , \"defaultCloudEndpointPid\" : \"org.eclipse.kura.camel.cloud.factory.CamelFactory\" , \"cloudEndpointPidRegex\" : \"^org.eclipse.kura.camel.cloud.factory.CamelFactory(\\\\-[a-zA-Z0-9]+)?$\" } ], \"pubSubFactories\" : [ { \"factoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.subscriber.RawMqttSubscriber\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" }, { \"factoryPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.ConnectionManager\" , \"defaultPid\" : \"org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher\" , \"defaultPidRegex\" : \"^org.eclipse.kura.cloudconnection.eclipseiot.mqtt.CloudPublisher(\\\\-[a-zA-Z0-9]+)?$\" }, { \"factoryPid\" : \"org.eclipse.kura.cloud.subscriber.CloudSubscriber\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" }, { \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" }, { \"factoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.publisher.RawMqttPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" }, { \"factoryPid\" : \"org.eclipse.kura.event.publisher.EventPublisher\" , \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" } ] } For cloudConnectionFactories elements: cloudConnectionFactoryPid : the PID of the cloud connection factory defaultCloudEndpointPid : If set, it represents the default PID for an instance of a new component suggested by the factory. This can be used by an user interface as a suggestion/placeholder for the name of a new cloud endpoint. cloudEndpointPidRegex : If set, its value represents a regular expression that the PID of a new component must match. For pubSubFactories elements: factoryPid : The factory PID of the publisher/subscripter component. It identifies the component type. It can be used for example to create a new component using the pubSub POST method. cloudConnectionFactoryPid : Specifies the cloudConnectionFactoryPid of the CloudConnectionFactory associated with this component. Each publisher/subscriber component is only compatible with CloudEndpoint instances created by the factory having this cloudConnectionFactoryPid . defaultPid : If set, it represents the default PID for an instance of a new component suggested by the factory. This can be used by an user interface as a suggestion/placeholder for the name of a new publisher/subscriber. defaultPidRegex : If set, its value represents a regular expression that the PID of a new component must match. 500 Internal Server error","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#post-methods","text":"","title":"POST methods"},{"location":"references/rest-apis/rest-cloudconnection-api/#get-stackcomponents-pids","text":"Description: This method retrieves all all PIDs of Component instances that make up the stack for a specific CloudEndpoint . Examples of such components can be CloudService , DataService , DataTransportService . Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/stackComponentPids","title":"Get StackComponents Pids"},{"location":"references/rest-apis/rest-cloudconnection-api/#request","text":"{ \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_2","text":"200 Ok Status { \"pids\" : [ \"org.eclipse.kura.cloud.CloudService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"org.eclipse.kura.data.DataService\" ] } 404 if cloudConnectionFactoryPid or cloudEndpointPid are not found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#create-cloud-endpoint","text":"Description: This method create a new CloudEndpoint . The CloudConnectionFactory will always create a CloudEndpoint instance with the given cloudEndpointPid and optionally other associated stack components, for example CloudService , DataService , DataTransportService . Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint","title":"Create Cloud Endpoint"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_1","text":"{ \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-1\" } cloudEndpointPid : The cloudEndpointPid of the new instance that will be created. If the associated factory specifies the cloudEndpointPidRegex property, this parameter must match the provided regex. cloudConnectionFactoryPid : The cloudConnectionFactoryPid of the factory that should be used to create the new component.","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_3","text":"204 Ok Status 400 malformed cloudConnectionFactoryPid or cloudEndpointPid . 404 Wrong cloudConnectionFactoryPid 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#create-publishersubscriber-instance","text":"Description: his method create a new CloudPublisher or a CloudSubscriber instance for a specific CloudEndpoint CloudEndpoint . The type of the instance depends from the type of the specified factory. Method: POST API PATH: services/cloudconnection/v1/pubSub","title":"Create Publisher/Subscriber instance"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_2","text":"{ \"pid\" : \"testPub\" , \"factoryPid\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" } pid : The PID of the new publisher/subscriber component. If the publisher/subscriber factory specifies the defaultPidRegex property, this parameter must match the provided regex. factoryPid : The factoryPid of the publisher/subscriber factory. cloudEndpointPid : The PID of the CloudEndpoint that the new publisher/subscriber component will be associated with. The associated CloudEndpoint must have been created by the CloudConnectionFactory with the cloudConnectionFactoryPid specified by the publisher/subscriber factory.","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_4","text":"204 Ok Status 400 malformed pid , factoryPid or cloudEndpointPid 404 If factoryPid or cloudEndpointPid are wrong.","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#get-configurations","text":"Description: This method retrieves the complete configuration, including the metatype description, of a cloud component instance. This method will return the configuration of CloudPublisher instances, CloudSubscriber instances, or the configuration of components that are part of a cloud stack, whose pids are returned by the cloudEndpoint/stackComponentPids method. Method: POST API PATH: services/cloudconnection/v1/configurations","title":"Get Configurations"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_3","text":"{ \"pids\" : [ \"testPub\" , \"org.eclipse.kura.cloud.CloudService\" ] }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_5","text":"{ \"configs\" : [ { \"pid\" : \"testPub\" , \"definition\" : { \"ad\" : [ { \"name\" : \"Application Id\" , \"description\" : \"The application id used to publish messages.\" , \"id\" : \"appId\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"W1\" , \"isRequired\" : true }, { \"name\" : \"Application Topic\" , \"description\" : \"Follows the application Id and specifies the rest of the publishing topic. Wildcards can be defined in the topic by specifing a $value in the field. The publisher will try to match \\\"value\\\" with a corresponding property in the received KuraMessage. If possible, the $value placeholder will be substituted with the real value specified in the KuraMessage received from the user application.\" , \"id\" : \"app.topic\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"A1/$assetName\" , \"isRequired\" : false }, { \"option\" : [ { \"label\" : \"0\" , \"value\" : \"0\" }, { \"label\" : \"1\" , \"value\" : \"1\" } ], \"name\" : \"Qos\" , \"description\" : \"The desired quality of service for the messages that have to be published. If Qos is 0, the message is delivered at most once, or it is not delivered at all. If Qos is set to 1, the message is always delivered at least once.\" , \"id\" : \"qos\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"defaultValue\" : \"0\" , \"isRequired\" : true }, { \"name\" : \"Retain\" , \"description\" : \"Default retaing flag for the published messages.\" , \"id\" : \"retain\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"isRequired\" : true }, { \"option\" : [ { \"label\" : \"Data\" , \"value\" : \"data\" }, { \"label\" : \"Control\" , \"value\" : \"control\" } ], \"name\" : \"Kind of Message\" , \"description\" : \"Type of message to be published.\" , \"id\" : \"message.type\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"data\" , \"isRequired\" : true }, { \"name\" : \"Priority\" , \"description\" : \"Message priority. Priority level 0 (highest) should be used sparingly and reserved for messages that should be sent with the minimum latency. Default is set to 7.\" , \"id\" : \"priority\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"defaultValue\" : \"7\" , \"isRequired\" : true } ], \"name\" : \"CloudPublisher\" , \"description\" : \"The CloudPublisher allows to define publishing parameters and provide a simple endpoint where the applications can attach to publish their messages.\" , \"id\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" }, \"properties\" : { \"app.topic\" : { \"value\" : \"A1/$assetName\" , \"type\" : \"STRING\" }, \"message.type\" : { \"value\" : \"data\" , \"type\" : \"STRING\" }, \"qos\" : { \"value\" : 0 , \"type\" : \"INTEGER\" }, \"appId\" : { \"value\" : \"W1\" , \"type\" : \"STRING\" }, \"retain\" : { \"value\" : false , \"type\" : \"BOOLEAN\" }, \"priority\" : { \"value\" : 7 , \"type\" : \"INTEGER\" }, \"service.factoryPid\" : { \"value\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"type\" : \"STRING\" }, \"cloud.endpoint.service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"testPub\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.publisher.CloudPublisher-1699623980455-20\" , \"type\" : \"STRING\" } } }, { \"pid\" : \"org.eclipse.kura.cloud.CloudService\" , \"definition\" : { \"ad\" : [ { \"option\" : [ { \"label\" : \"Set display name as device name\" , \"value\" : \"device-name\" }, { \"label\" : \"Set display name from hostname\" , \"value\" : \"hostname\" }, { \"label\" : \"Custom\" , \"value\" : \"custom\" }, { \"label\" : \"Server defined\" , \"value\" : \"server\" } ], \"name\" : \"Device Display-Name\" , \"description\" : \"Friendly name of the device. Device name is the common name of the device (eg: Reliagate 20-25, Raspberry Pi, etc.). Hostname will use the linux hostname utility. Custom allows for defining a unique string. Server defined relies on the remote management server to define a name.\" , \"id\" : \"device.display-name\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"device-name\" , \"isRequired\" : true }, { \"name\" : \"Device Custom-Name\" , \"description\" : \"Custom name for the device. This value is applied ONLY if device.display-name is set to \\\"Custom\\\"\" , \"id\" : \"device.custom-name\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"isRequired\" : false }, { \"name\" : \"Topic Control-Prefix\" , \"description\" : \"Topic prefix for system and device management messages.\" , \"id\" : \"topic.control-prefix\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"$EDC\" , \"isRequired\" : true }, { \"name\" : \"Encode gzip\" , \"description\" : \"Compress message payloads before sending them to the remote server to reduce the network traffic.\" , \"id\" : \"encode.gzip\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"isRequired\" : false }, { \"name\" : \"Republish Mqtt Birth Cert On Gps Lock\" , \"description\" : \"Whether or not to republish the MQTT Birth Certificate on GPS lock event\" , \"id\" : \"republish.mqtt.birth.cert.on.gps.lock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"isRequired\" : true }, { \"name\" : \"Republish Mqtt Birth Cert On Modem Detect\" , \"description\" : \"Whether or not to republish the MQTT Birth Certificate on modem detection event\" , \"id\" : \"republish.mqtt.birth.cert.on.modem.detect\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"false\" , \"isRequired\" : true }, { \"name\" : \"Republish Mqtt Birth Cert On Tamper Event\" , \"description\" : \"Whether or not to republish the MQTT Birth Certificate on a tamper event. This has effect only if a TamperDetectionService is available in the framework.\" , \"id\" : \"republish.mqtt.birth.cert.on.tamper.event\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"isRequired\" : true }, { \"name\" : \"Enable Default Subscriptions\" , \"description\" : \"Manages the default subscriptions to the gateway management MQTT topics. When disabled, the gateway will not be remotely manageable.\" , \"id\" : \"enable.default.subscriptions\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"defaultValue\" : \"true\" , \"isRequired\" : true }, { \"option\" : [ { \"label\" : \"Kura Protobuf\" , \"value\" : \"kura-protobuf\" }, { \"label\" : \"Simple JSON\" , \"value\" : \"simple-json\" } ], \"name\" : \"Payload Encoding\" , \"description\" : \"Specify the message payload encoding.\" , \"id\" : \"payload.encoding\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"kura-protobuf\" , \"isRequired\" : true } ], \"icon\" : [ { \"resource\" : \"CloudService\" , \"size\" : 32 } ], \"name\" : \"CloudService\" , \"description\" : \"The CloudService allows for setting a user friendly name for the current device. It also provides the option to compress message payloads to reduce network traffic.\" , \"id\" : \"org.eclipse.kura.cloud.CloudService\" }, \"properties\" : { \"topic.control-prefix\" : { \"value\" : \"$EDC\" , \"type\" : \"STRING\" }, \"republish.mqtt.birth.cert.on.tamper.event\" : { \"value\" : true , \"type\" : \"BOOLEAN\" }, \"device.custom-name\" : { \"value\" : \"Intel UP\u00b2\" , \"type\" : \"STRING\" }, \"device.display-name\" : { \"value\" : \"device-name\" , \"type\" : \"STRING\" }, \"payload.encoding\" : { \"value\" : \"kura-protobuf\" , \"type\" : \"STRING\" }, \"republish.mqtt.birth.cert.on.modem.detect\" : { \"value\" : false , \"type\" : \"BOOLEAN\" }, \"service.factoryPid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.cloud.CloudService-1699623980404-13\" , \"type\" : \"STRING\" }, \"enable.default.subscriptions\" : { \"value\" : true , \"type\" : \"BOOLEAN\" }, \"republish.mqtt.birth.cert.on.gps.lock\" : { \"value\" : false , \"type\" : \"BOOLEAN\" }, \"encode.gzip\" : { \"value\" : true , \"type\" : \"BOOLEAN\" }, \"DataService.target\" : { \"value\" : \"(kura.service.pid=org.eclipse.kura.data.DataService)\" , \"type\" : \"STRING\" }, \"kura.cloud.service.factory.pid\" : { \"value\" : \"org.eclipse.kura.core.cloud.factory.DefaultCloudServiceFactory\" , \"type\" : \"STRING\" } } } ] } - 200 Status OK - 500 Internal Error","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#connect-cloudendpoint","text":"Description: This method allows to trigger the connection of the specified CloudEndpoint Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/connect","title":"Connect CloudEndpoint"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_4","text":"{ \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_6","text":"204 Status OK 404 Wrong cloudEndpointPid 500 Internal Server Error in case of connection problems.","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#disconnect-cloudendpoint","text":"Description: This method allows to trigger the disconnection of the specified CloudEndpoint Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/disconnect","title":"Disconnect CloudEndpoint"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_5","text":"{ \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_7","text":"204 Status OK 404 Wrong cloudEndpointPid 500 Internal Server Error in case of connection problems.","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#check-cloudendpoint-connection-status","text":"Description: This method allows to check the status of the connection of the specified CloudEndpoint Method: POST API PATH: services/cloudconnection/v1/cloudEndpoint/isConnected","title":"Check CloudEndpoint connection status"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_6","text":"{ \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService\" }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_8","text":"{ \"connected\" : false } - 200 Status OK - 404 Wrong cloudEndpointPid - 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#put-methods","text":"","title":"PUT methods"},{"location":"references/rest-apis/rest-cloudconnection-api/#update-cloudendpoint-stack-component-configurations","text":"Description: This method allows to update the configuration of a cloud component instance. This method can be used to update the configuration of CloudPublisher instances, CloudSubscriber instances, or the configuration of components that are part of a cloud stack, whose pids are returned by the cloudEndpoint/stackComponentPids method. Method: PUT API PATH: services/cloudconnection/v1/configurations","title":"Update CloudEndpoint stack component configurations"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_7","text":"takeSnapshot set to true o false to specify if the ConfigurationService must save a snapshot with the updated configuration. { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"properties\" : { \"broker-url\" : { \"type\" : \"STRING\" , \"value\" : \"mqtt://mqtt.eclipseprojects.io:1883\" }, \"topic.context.account-name\" : { \"type\" : \"STRING\" , \"value\" : \"account-name-testX2\" }, \"username\" : { \"type\" : \"STRING\" , \"value\" : \"username\" }, \"password\" : { \"type\" : \"PASSWORD\" , \"value\" : \"Placeholder\" }, \"client-id\" : { \"type\" : \"STRING\" , \"value\" : \"\" }, \"keep-alive\" : { \"type\" : \"INTEGER\" , \"value\" : 30 }, \"timeout\" : { \"type\" : \"INTEGER\" , \"value\" : 20 }, \"clean-session\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"lwt.topic\" : { \"type\" : \"STRING\" , \"value\" : \"$EDC/#account-name/#client-id/MQTT/LWT\" }, \"lwt.payload\" : { \"type\" : \"STRING\" , \"value\" : \"\" }, \"lwt.qos\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"lwt.retain\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"in-flight.persistence\" : { \"type\" : \"STRING\" , \"value\" : \"memory\" }, \"protocol-version\" : { \"type\" : \"INTEGER\" , \"value\" : 4 }, \"SslManagerService.target\" : { \"type\" : \"STRING\" , \"value\" : \"(kura.service.pid=org.eclipse.kura.ssl.SslManagerService)\" } } } ], \"takeSnapshot\" : true }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_9","text":"204 Status OK 400 Bad request if pid is wrong or non existent.","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#delete-methods","text":"","title":"DELETE methods"},{"location":"references/rest-apis/rest-cloudconnection-api/#delete-cloudendpoint","text":"Description: This method allow to delete a CloudEndpoint instance. Method: DELETE API PATH: services/cloudconnection/v1/cloudEndpoint","title":"Delete CloudEndpoint"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_8","text":"{ \"cloudConnectionFactoryPid\" : \"org.eclipse.kura.cloud.CloudService\" , \"cloudEndpointPid\" : \"org.eclipse.kura.cloud.CloudService-1\" }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_10","text":"204 Status OK 404 if cloudConnectionFactoryPid or cloudEndpointPid are not found","title":"Responses"},{"location":"references/rest-apis/rest-cloudconnection-api/#delete-publishersubscriber-instance","text":"Description: This method allows to delete a CloudPublisher or CloudSubscriber instance. Method: DELETE API PATH: services/cloudconnection/v1/pubSub","title":"Delete Publisher/Subscriber instance"},{"location":"references/rest-apis/rest-cloudconnection-api/#request_9","text":"{ \"pid\" : \"testPub\" }","title":"Request"},{"location":"references/rest-apis/rest-cloudconnection-api/#responses_11","text":"204 Status OK 404 Wrong cloudConnectionFactoryPid or cloudEndpointPid .","title":"Responses"},{"location":"references/rest-apis/rest-command-api/","text":"Rest Command v1 API Execute Command Method: POST API PATH: /services/command/v1/command/ Request Body { //Command to be executed on gateway \"command\" : \"printenv TextEnvVarName1\" , //Service Password for command Service \"password\" : \"s3curePassw0rd\" , //String base64 encoding of a zip file to transfer to gateway \"zipBytes\" : \"UEsDBAoACAAAAIyD1lYAA AAAAAAAAAAAAAAJACAAdGVzdGZpbGUxVVQNAAfprpRk6a6UZOmulGR1eAsAAQT1AQAABBQAAABQSwcIAAAAAAAAAAAAAAAAUEsBAgoDCgAIAAAAjIPWVgAAAAAAAAAAAAAAAAkAIAAAAAAAAAAAAKSBAAAAAHRlc3RmaWxlMVVUDQAH6a6UZOmulGTprpRkdXgLAAEE9QEAAAQUAAAAUEsFBgAAAAABAAEAVwAAAFcAAAAAAA==\" , //Command argument String array \"arguments\" :[ \"arg 1\" ], //Shell environment Pairs Map \"environmentPairs\" : { \"TextEnvVarName1\" : \"TextEnvVarValue1\" , \"TextEnvVarName2\" : \"TextEnvVarValue2\" }, //Working directory of command to be executed \"workingDirectory\" : \"/tmp\" , } Responses 200 OK status { \"stdout\" : \"Command error output is displayed in this field\" , \"stderr\" : \"Command output is displayed in this field\" , \"exitCode\" : 0 , \"isTimeOut\" : false } 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Execute Asynchronous Command Method: POST API PATH: /services/command/v1/command/async Request Body { //Command to be executed on gateway \"command\" : \"printenv TextEnvVarName1\" , //Service Password for command Service \"password\" : \"s3curePassw0rd\" , //String base64 encoding of a zip file to transfer to gateway \"zipBytes\" : \"UEsDBAoACAAAAIyD1lYAA AAAAAAAAAAAAAAJACAAdGVzdGZpbGUxVVQNAAfprpRk6a6UZOmulGR1eAsAAQT1AQAABBQAAABQSwcIAAAAAAAAAAAAAAAAUEsBAgoDCgAIAAAAjIPWVgAAAAAAAAAAAAAAAAkAIAAAAAAAAAAAAKSBAAAAAHRlc3RmaWxlMVVUDQAH6a6UZOmulGTprpRkdXgLAAEE9QEAAAQUAAAAUEsFBgAAAAABAAEAVwAAAFcAAAAAAA==\" , //Command argument String array \"arguments\" :[ \"arg 1\" ], //Shell environment Pairs Map \"environmentPairs\" : { \"TextEnvVarName1\" : \"TextEnvVarValue1\" , \"TextEnvVarName2\" : \"TextEnvVarValue2\" }, //Working directory of command to be executed \"workingDirectory\" : \"/tmp\" , } Responses 202 Accepted 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Note Use the following command to retrieve the base64 representation of a zip file. base64 -i <filename.zip>","title":"Command"},{"location":"references/rest-apis/rest-command-api/#rest-command-v1-api","text":"","title":"Rest Command v1 API"},{"location":"references/rest-apis/rest-command-api/#execute-command","text":"Method: POST API PATH: /services/command/v1/command/","title":"Execute Command"},{"location":"references/rest-apis/rest-command-api/#request-body","text":"{ //Command to be executed on gateway \"command\" : \"printenv TextEnvVarName1\" , //Service Password for command Service \"password\" : \"s3curePassw0rd\" , //String base64 encoding of a zip file to transfer to gateway \"zipBytes\" : \"UEsDBAoACAAAAIyD1lYAA AAAAAAAAAAAAAAJACAAdGVzdGZpbGUxVVQNAAfprpRk6a6UZOmulGR1eAsAAQT1AQAABBQAAABQSwcIAAAAAAAAAAAAAAAAUEsBAgoDCgAIAAAAjIPWVgAAAAAAAAAAAAAAAAkAIAAAAAAAAAAAAKSBAAAAAHRlc3RmaWxlMVVUDQAH6a6UZOmulGTprpRkdXgLAAEE9QEAAAQUAAAAUEsFBgAAAAABAAEAVwAAAFcAAAAAAA==\" , //Command argument String array \"arguments\" :[ \"arg 1\" ], //Shell environment Pairs Map \"environmentPairs\" : { \"TextEnvVarName1\" : \"TextEnvVarValue1\" , \"TextEnvVarName2\" : \"TextEnvVarValue2\" }, //Working directory of command to be executed \"workingDirectory\" : \"/tmp\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-command-api/#responses","text":"200 OK status { \"stdout\" : \"Command error output is displayed in this field\" , \"stderr\" : \"Command output is displayed in this field\" , \"exitCode\" : 0 , \"isTimeOut\" : false } 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-command-api/#execute-asynchronous-command","text":"Method: POST API PATH: /services/command/v1/command/async","title":"Execute Asynchronous Command"},{"location":"references/rest-apis/rest-command-api/#request-body_1","text":"{ //Command to be executed on gateway \"command\" : \"printenv TextEnvVarName1\" , //Service Password for command Service \"password\" : \"s3curePassw0rd\" , //String base64 encoding of a zip file to transfer to gateway \"zipBytes\" : \"UEsDBAoACAAAAIyD1lYAA AAAAAAAAAAAAAAJACAAdGVzdGZpbGUxVVQNAAfprpRk6a6UZOmulGR1eAsAAQT1AQAABBQAAABQSwcIAAAAAAAAAAAAAAAAUEsBAgoDCgAIAAAAjIPWVgAAAAAAAAAAAAAAAAkAIAAAAAAAAAAAAKSBAAAAAHRlc3RmaWxlMVVUDQAH6a6UZOmulGTprpRkdXgLAAEE9QEAAAQUAAAAUEsFBgAAAAABAAEAVwAAAFcAAAAAAA==\" , //Command argument String array \"arguments\" :[ \"arg 1\" ], //Shell environment Pairs Map \"environmentPairs\" : { \"TextEnvVarName1\" : \"TextEnvVarValue1\" , \"TextEnvVarName2\" : \"TextEnvVarValue2\" }, //Working directory of command to be executed \"workingDirectory\" : \"/tmp\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-command-api/#responses_1","text":"202 Accepted 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Note Use the following command to retrieve the base64 representation of a zip file. base64 -i <filename.zip>","title":"Responses"},{"location":"references/rest-apis/rest-configuration-service-v1/","text":"Configuration V1 REST APIs This page describes the configuration V1 rest APIs. REST APIs The Configuration Service REST APIs are exposed by the org.eclipse.kura.rest.configuration bundle, providing the following REST APIs under the /configuration/v1 path. Method Path Allowed roles Encoding Request parameters Description GET /factoryComponents configuration JSON None The method lists all the FactoryComponents Pids tracked by the ConfigurationService POST /factoryComponents configuration JSON FactoryComponentConfiguration object Creates a new ConfigurableComponent instance by creating a new configuration from a Configuration Admin factory. The FactoryComponentConfiguration object passed as request parameter will provide all the information needed to generate the instance. It links the factory Pid to be used, the target instance Pid, the properties to be used when creating the instance, and if the request should be persisted with a snapshot DELETE /factoryComponents/{pid}?takeSnapshot={takeSnapshot} configuration JSON pid = A String representing the pid of the instance generated by a Factory Component that needs to deleted; takeSnapshot = an optional (default false) boolean to specify if a new snapshot needs to be created after the delete operation For the specified Pid and optional takeSnapshot query parameter, the ConfigurationService instance will delete the corresponding ConfigurableComponent instance GET /configurableComponents configuration JSON None Lists the tracked configurable component Pids GET /configurableComponents/configurations configuration JSON None Lists all the component configurations of all the ConfigurableComponents tracked by the ConfigurationService GET /configurableComponents/configurations/byFilter/{filter} configuration JSON filter = A String representing an OSGi filter. Lists the component configurations of all the ConfigurableComponents tracked by the ConfigurationService that match the filter specified GET /configurableComponents/configurations/byPid/{pid} configuration JSON pid = A String representing the pid of a configurable component instance Provides the ComponentConfiguration of the ConfigurableComponent matching the specified Pid GET /configurableComponents/configurations/byPid/{pid}/_default configuration JSON pid = A String representing the pid of a configurable component instance Provides the default Component Configuration for the component identified by the specified Pid POST /configurableComponents/configurations/byPid/{pid}/_update configuration JSON pid = A String representing the pid of a configurable component instance; ComponentConfigurationUpdateRequest = the updated configuration provided in the request body Allows to update the component configuration identified by the provided PID POST /configurableComponents/configurations/_update configuration JSON componentConfigurations = the list of updated configurations provided in the request body Allows to update the configuration of multiple configurable components GET /snapshots configuration JSON None Lists all the available snapshot IDs managed by the framework GET /snapshots/{id} configuration JSON id = the snapshot Id Returns the content of a given snapshot tracked by the framework POST /snapshots/_write configuration JSON None Triggers the framework to take and persist a snapshot POST /snapshots/_rollback configuration JSON None Rollbacks the framework to the last saved snapshot if available. POST /snapshots/{id}/_rollback configuration JSON id = the snapshot Id Rollbacks the framework to the snapshot identified by the provided ID POST /snapshots/_upload configuration Consumes: XML Framework snapshot in XML form provided in the request body Uploads a snapshot. The framework will update the component(s) configuration accordingly to the configurations received Get all the factory components pids Request : URL - https://<gateway-ip>/services/configuration/v1/factoryComponents Response : [ \"org.eclipse.kura.wire.Conditional\" , \"org.eclipse.kura.cloudconnection.raw.mqtt.publisher.RawMqttPublisher\" , \"org.eclipse.kura.misc.cloudcat.CloudCat\" , \"org.eclipse.kura.core.db.H2DbServer\" , \"org.eclipse.kura.wire.Fifo\" , \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" , \"org.eclipse.kura.core.keystore.FilesystemKeystoreServiceImpl\" , \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"org.eclipse.kura.core.db.H2DbService\" , \"org.eclipse.kura.wire.CloudSubscriber\" , \"org.eclipse.kura.wire.RegexFilter\" , \"org.eclipse.kura.wire.Logger\" , \"org.eclipse.kura.wire.Timer\" , \"com.eurotech.framework.log.manager.LogManager\" , \"com.eurotech.framework.log.journald.wire.JournaldWireComponent\" , \"org.eclipse.kura.cloudconnection.raw.mqtt.subscriber.RawMqttSubscriber\" , \"org.eclipse.kura.cloud.subscriber.CloudSubscriber\" , \"org.eclipse.kura.ssl.SslManagerService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"com.eurotech.framework.log.journald.JournaldLogReader\" , \"org.eclipse.kura.provisioning.ProvisioningService\" , \"org.eclipse.kura.wire.CloudPublisher\" , \"org.eclipse.kura.wire.H2DbWireRecordFilter\" , \"org.eclipse.kura.cloud.CloudService\" , \"org.eclipse.kura.data.DataService\" , \"org.eclipse.kura.wire.H2DbWireRecordStore\" , \"org.eclipse.kura.wire.Join\" , \"com.eurotech.framework.log.publisher.LogPublisher\" ] Create component from factory Request : URL - https://<gateway-ip>/services/configuration/v1/factoryComponents Request body : { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbServer\" , \"pid\" : \"myH2DbServer\" , \"properties\" : [], \"takeSnapshot\" : false } The request must be provided with the following elements: factoryPid : the factory used to generate the new instance pid : the new instance process id properties : eventual properties that will be used to instantiate the new instance and will override the defaults. A list of string, object pair is needed and can be optionally empty. takeSnapshot : specifies if after the creation of a new component a snapshot needs to be taken. Delete a component and optionally take a snapshot Request : URL - https://<gateway-ip>/services/configuration/v1/factoryComponents/{pid}?takeSnapshot={takeSnapshot} takeSnapshot : can be either true or false. If set to true, after the deletion, the framework will take a snapshot. List the tracked configurable component Pids Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents Response : [ \"org.eclipse.kura.clock.ClockService\" , \"org.eclipse.kura.net.admin.NetworkConfigurationService\" , \"org.eclipse.kura.position.PositionService\" , \"com.eurotech.framework.internal.ansible.provider.AnsibleServiceImpl\" , \"org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl\" , \"com.eurotech.framework.internal.ansible.cloud.AnsibleActivityHandler\" , \"default.diagnostic.publisher\" , \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"com.eurotech.framework.internal.fail2ban.Fail2BanConfigurator\" , \"default.log.publisher\" , \"org.eclipse.kura.wire.graph.WireGraphService\" , \"com.eurotech.framework.internal.floodingprotection.FloodingProtectionConfigurator\" , \"org.eclipse.kura.ssl.SslManagerService\" , \"org.eclipse.kura.http.server.manager.HttpService\" , \"org.eclipse.kura.cloud.app.command.CommandCloudApp\" , \"default.ping.publisher\" , \"org.eclipse.kura.db.H2DbService\" , \"com.eurotech.framework.diagnostics.DiagnosticsService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"org.eclipse.kura.deployment.agent\" , \"DMKeystore\" , \"LogReaderJournald\" , \"default.alert.publisher\" , \"org.eclipse.kura.core.deployment.CloudDeploymentHandlerV2\" , \"HttpsKeystore\" , \"com.eurotech.framework.security.aide.AideTamperDetectionServiceConfigurator\" , \"org.eclipse.kura.provisioning.ProvisioningService\" , \"LogManagerAuth\" , \"com.eurotech.framework.security.journald.fss.FssTamperDetectionServiceConfigurator\" , \"org.eclipse.kura.watchdog.WatchdogService\" , \"org.eclipse.kura.cloud.CloudService\" , \"LogManagerActivity\" , \"org.eclipse.kura.data.DataService\" , \"LogManagerDefault\" , \"org.eclipse.kura.web.Console\" , \"SSLKeystore\" , \"com.eurotech.framework.net.vpn.client.VpnClient\" , \"org.eclipse.kura.internal.rest.provider.RestService\" , \"com.eurotech.framework.reboot.RebootService\" ] Lists all the component configurations of all the ConfigurableComponents Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations Response : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : false }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"chrony.advanced.config\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"\" } } }, ... ] List the configurations of all the ConfigurableComponents that match a filter Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byFilter/(service.pid=org.eclipse.kura.clock.ClockService) Response : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : false }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"chrony.advanced.config\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"\" } } } ] Get the configuration of the ConfigurableComponent matching a pid Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byPid/org.eclipse.kura.clock.ClockService Response : { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : false }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"chrony.advanced.config\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"\" } } } Get the default configuration of the ConfigurableComponent matching a pid Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byPid/org.eclipse.kura.clock.ClockService/_default Response : { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc0\" }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 } } } Update the component configuration identified matching a pid Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byPid/org.eclipse.kura.clock.ClockService/_update Request body : { \"takeSnapshot\" : true , \"componentConfigurationRequest\" : { \"properties\" : { \"enabled\" : { \"type\" : \"boolean\" , \"value\" : false , \"array\" : false } } } } Warning Every service may need a different set of parameters and combination of them to reach the desired result. For the NetworkAdminService , for example, the following configuration is required to disable a specific network interface (enp2s0) and prevent re-enabling at reboot. Please verify offline the REST APIs executed and the different deploying scenarios before distributing updates to the fleet of devices. { \"takeSnapshot\" : true , \"componentConfigurationRequest\" : { \"properties\" : { \"net.interface.enp2s0.config.ip4.status\" : { \"type\" : \"string\" , \"value\" : \"netIPv4StatusDisabled\" , \"array\" : false }, \"net.interface.enp2s0.config.autoconnect\" : { \"type\" : \"boolean\" , \"value\" : false , \"array\" : false } } } } Update the configuration of multiple configurable components Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/_update Request body : { \"takeSnapshot\" : true , \"componentConfigurations\" : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"properties\" : { \"enabled\" : { \"type\" : \"boolean\" , \"value\" : false , \"array\" : false } } } ] } List all the available snapshot IDs Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots Response : [ 0 , 1630930775789 , 1630930776355 , 1630930776839 , 1630930797402 , 1630930805305 ] Get the content of a given snapshot Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/{id} Response : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" } } }, ... ] Trigger the framework to take and persist a snapshot Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/_write Response : 1631095409516 Rollbacks to the snapshot identified by the provided ID Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/_rollback Response : 1631093011618 Upload a snapshot as XML Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/_upload Request body : <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.clock.ClockService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.host\" type= \"String\" > <esf:value> 0.pool.ntp.org </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.port\" type= \"Integer\" > <esf:value> 123 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.provider\" type= \"String\" > <esf:value> java-ntp </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.max-retry\" type= \"Integer\" > <esf:value> 0 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.refresh-interval\" type= \"Integer\" > <esf:value> 3600 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"rtc.filename\" type= \"String\" > <esf:value> /dev/rtc1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.set.hwclock\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.timeout\" type= \"Integer\" > <esf:value> 10000 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.retry.interval\" type= \"Integer\" > <esf:value> 5 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"kura.service.pid\" type= \"String\" > <esf:value> org.eclipse.kura.clock.ClockService </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"service.pid\" type= \"String\" > <esf:value> org.eclipse.kura.clock.ClockService </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Configuration V1"},{"location":"references/rest-apis/rest-configuration-service-v1/#configuration-v1-rest-apis","text":"This page describes the configuration V1 rest APIs.","title":"Configuration V1 REST APIs"},{"location":"references/rest-apis/rest-configuration-service-v1/#rest-apis","text":"The Configuration Service REST APIs are exposed by the org.eclipse.kura.rest.configuration bundle, providing the following REST APIs under the /configuration/v1 path. Method Path Allowed roles Encoding Request parameters Description GET /factoryComponents configuration JSON None The method lists all the FactoryComponents Pids tracked by the ConfigurationService POST /factoryComponents configuration JSON FactoryComponentConfiguration object Creates a new ConfigurableComponent instance by creating a new configuration from a Configuration Admin factory. The FactoryComponentConfiguration object passed as request parameter will provide all the information needed to generate the instance. It links the factory Pid to be used, the target instance Pid, the properties to be used when creating the instance, and if the request should be persisted with a snapshot DELETE /factoryComponents/{pid}?takeSnapshot={takeSnapshot} configuration JSON pid = A String representing the pid of the instance generated by a Factory Component that needs to deleted; takeSnapshot = an optional (default false) boolean to specify if a new snapshot needs to be created after the delete operation For the specified Pid and optional takeSnapshot query parameter, the ConfigurationService instance will delete the corresponding ConfigurableComponent instance GET /configurableComponents configuration JSON None Lists the tracked configurable component Pids GET /configurableComponents/configurations configuration JSON None Lists all the component configurations of all the ConfigurableComponents tracked by the ConfigurationService GET /configurableComponents/configurations/byFilter/{filter} configuration JSON filter = A String representing an OSGi filter. Lists the component configurations of all the ConfigurableComponents tracked by the ConfigurationService that match the filter specified GET /configurableComponents/configurations/byPid/{pid} configuration JSON pid = A String representing the pid of a configurable component instance Provides the ComponentConfiguration of the ConfigurableComponent matching the specified Pid GET /configurableComponents/configurations/byPid/{pid}/_default configuration JSON pid = A String representing the pid of a configurable component instance Provides the default Component Configuration for the component identified by the specified Pid POST /configurableComponents/configurations/byPid/{pid}/_update configuration JSON pid = A String representing the pid of a configurable component instance; ComponentConfigurationUpdateRequest = the updated configuration provided in the request body Allows to update the component configuration identified by the provided PID POST /configurableComponents/configurations/_update configuration JSON componentConfigurations = the list of updated configurations provided in the request body Allows to update the configuration of multiple configurable components GET /snapshots configuration JSON None Lists all the available snapshot IDs managed by the framework GET /snapshots/{id} configuration JSON id = the snapshot Id Returns the content of a given snapshot tracked by the framework POST /snapshots/_write configuration JSON None Triggers the framework to take and persist a snapshot POST /snapshots/_rollback configuration JSON None Rollbacks the framework to the last saved snapshot if available. POST /snapshots/{id}/_rollback configuration JSON id = the snapshot Id Rollbacks the framework to the snapshot identified by the provided ID POST /snapshots/_upload configuration Consumes: XML Framework snapshot in XML form provided in the request body Uploads a snapshot. The framework will update the component(s) configuration accordingly to the configurations received","title":"REST APIs"},{"location":"references/rest-apis/rest-configuration-service-v1/#get-all-the-factory-components-pids","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/factoryComponents Response : [ \"org.eclipse.kura.wire.Conditional\" , \"org.eclipse.kura.cloudconnection.raw.mqtt.publisher.RawMqttPublisher\" , \"org.eclipse.kura.misc.cloudcat.CloudCat\" , \"org.eclipse.kura.core.db.H2DbServer\" , \"org.eclipse.kura.wire.Fifo\" , \"org.eclipse.kura.cloudconnection.raw.mqtt.cloud.RawMqttCloudEndpoint\" , \"org.eclipse.kura.core.keystore.FilesystemKeystoreServiceImpl\" , \"org.eclipse.kura.cloud.publisher.CloudPublisher\" , \"org.eclipse.kura.core.db.H2DbService\" , \"org.eclipse.kura.wire.CloudSubscriber\" , \"org.eclipse.kura.wire.RegexFilter\" , \"org.eclipse.kura.wire.Logger\" , \"org.eclipse.kura.wire.Timer\" , \"com.eurotech.framework.log.manager.LogManager\" , \"com.eurotech.framework.log.journald.wire.JournaldWireComponent\" , \"org.eclipse.kura.cloudconnection.raw.mqtt.subscriber.RawMqttSubscriber\" , \"org.eclipse.kura.cloud.subscriber.CloudSubscriber\" , \"org.eclipse.kura.ssl.SslManagerService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"com.eurotech.framework.log.journald.JournaldLogReader\" , \"org.eclipse.kura.provisioning.ProvisioningService\" , \"org.eclipse.kura.wire.CloudPublisher\" , \"org.eclipse.kura.wire.H2DbWireRecordFilter\" , \"org.eclipse.kura.cloud.CloudService\" , \"org.eclipse.kura.data.DataService\" , \"org.eclipse.kura.wire.H2DbWireRecordStore\" , \"org.eclipse.kura.wire.Join\" , \"com.eurotech.framework.log.publisher.LogPublisher\" ]","title":"Get all the factory components pids"},{"location":"references/rest-apis/rest-configuration-service-v1/#create-component-from-factory","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/factoryComponents Request body : { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbServer\" , \"pid\" : \"myH2DbServer\" , \"properties\" : [], \"takeSnapshot\" : false } The request must be provided with the following elements: factoryPid : the factory used to generate the new instance pid : the new instance process id properties : eventual properties that will be used to instantiate the new instance and will override the defaults. A list of string, object pair is needed and can be optionally empty. takeSnapshot : specifies if after the creation of a new component a snapshot needs to be taken.","title":"Create component from factory"},{"location":"references/rest-apis/rest-configuration-service-v1/#delete-a-component-and-optionally-take-a-snapshot","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/factoryComponents/{pid}?takeSnapshot={takeSnapshot} takeSnapshot : can be either true or false. If set to true, after the deletion, the framework will take a snapshot.","title":"Delete a component and optionally take a snapshot"},{"location":"references/rest-apis/rest-configuration-service-v1/#list-the-tracked-configurable-component-pids","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents Response : [ \"org.eclipse.kura.clock.ClockService\" , \"org.eclipse.kura.net.admin.NetworkConfigurationService\" , \"org.eclipse.kura.position.PositionService\" , \"com.eurotech.framework.internal.ansible.provider.AnsibleServiceImpl\" , \"org.eclipse.kura.internal.useradmin.store.RoleRepositoryStoreImpl\" , \"com.eurotech.framework.internal.ansible.cloud.AnsibleActivityHandler\" , \"default.diagnostic.publisher\" , \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"com.eurotech.framework.internal.fail2ban.Fail2BanConfigurator\" , \"default.log.publisher\" , \"org.eclipse.kura.wire.graph.WireGraphService\" , \"com.eurotech.framework.internal.floodingprotection.FloodingProtectionConfigurator\" , \"org.eclipse.kura.ssl.SslManagerService\" , \"org.eclipse.kura.http.server.manager.HttpService\" , \"org.eclipse.kura.cloud.app.command.CommandCloudApp\" , \"default.ping.publisher\" , \"org.eclipse.kura.db.H2DbService\" , \"com.eurotech.framework.diagnostics.DiagnosticsService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"org.eclipse.kura.deployment.agent\" , \"DMKeystore\" , \"LogReaderJournald\" , \"default.alert.publisher\" , \"org.eclipse.kura.core.deployment.CloudDeploymentHandlerV2\" , \"HttpsKeystore\" , \"com.eurotech.framework.security.aide.AideTamperDetectionServiceConfigurator\" , \"org.eclipse.kura.provisioning.ProvisioningService\" , \"LogManagerAuth\" , \"com.eurotech.framework.security.journald.fss.FssTamperDetectionServiceConfigurator\" , \"org.eclipse.kura.watchdog.WatchdogService\" , \"org.eclipse.kura.cloud.CloudService\" , \"LogManagerActivity\" , \"org.eclipse.kura.data.DataService\" , \"LogManagerDefault\" , \"org.eclipse.kura.web.Console\" , \"SSLKeystore\" , \"com.eurotech.framework.net.vpn.client.VpnClient\" , \"org.eclipse.kura.internal.rest.provider.RestService\" , \"com.eurotech.framework.reboot.RebootService\" ]","title":"List the tracked configurable component Pids"},{"location":"references/rest-apis/rest-configuration-service-v1/#lists-all-the-component-configurations-of-all-the-configurablecomponents","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations Response : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : false }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"chrony.advanced.config\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"\" } } }, ... ]","title":"Lists all the component configurations of all the ConfigurableComponents"},{"location":"references/rest-apis/rest-configuration-service-v1/#list-the-configurations-of-all-the-configurablecomponents-that-match-a-filter","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byFilter/(service.pid=org.eclipse.kura.clock.ClockService) Response : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : false }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"chrony.advanced.config\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"\" } } } ]","title":"List the configurations of all the ConfigurableComponents that match a filter"},{"location":"references/rest-apis/rest-configuration-service-v1/#get-the-configuration-of-the-configurablecomponent-matching-a-pid","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byPid/org.eclipse.kura.clock.ClockService Response : { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : false }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"chrony.advanced.config\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"\" } } }","title":"Get the configuration of the ConfigurableComponent matching a pid"},{"location":"references/rest-apis/rest-configuration-service-v1/#get-the-default-configuration-of-the-configurablecomponent-matching-a-pid","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byPid/org.eclipse.kura.clock.ClockService/_default Response : { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"definition\" : { \"ad\" : [ { \"option\" : [], \"name\" : \"enabled\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.set.hwclock\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" , \"cardinality\" : 0 , \"_default\" : \"true\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" , \"otherAttributes\" : {} }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" , \"otherAttributes\" : {} }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" , \"otherAttributes\" : {} } ], \"name\" : \"clock.provider\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"java-ntp\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.host\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"0.pool.ntp.org\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.port\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"max\" : \"65535\" , \"_default\" : \"123\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.timeout\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1000\" , \"_default\" : \"10000\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.max-retry\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"0\" , \"_default\" : \"0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.retry.interval\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"min\" : \"1\" , \"_default\" : \"5\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"clock.ntp.refresh-interval\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" , \"cardinality\" : 0 , \"_default\" : \"3600\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"RTC File Name\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"_default\" : \"/dev/rtc0\" , \"required\" : true , \"otherAttributes\" : {} }, { \"option\" : [], \"name\" : \"Chrony Configuration\" , \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"required\" : false , \"otherAttributes\" : {} } ], \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 , \"otherAttributes\" : {} } ], \"name\" : \"ClockService\" , \"description\" : \"ClockService Configuration\" , \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"otherAttributes\" : {} }, \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc0\" }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 } } }","title":"Get the default configuration of the ConfigurableComponent matching a pid"},{"location":"references/rest-apis/rest-configuration-service-v1/#update-the-component-configuration-identified-matching-a-pid","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/byPid/org.eclipse.kura.clock.ClockService/_update Request body : { \"takeSnapshot\" : true , \"componentConfigurationRequest\" : { \"properties\" : { \"enabled\" : { \"type\" : \"boolean\" , \"value\" : false , \"array\" : false } } } } Warning Every service may need a different set of parameters and combination of them to reach the desired result. For the NetworkAdminService , for example, the following configuration is required to disable a specific network interface (enp2s0) and prevent re-enabling at reboot. Please verify offline the REST APIs executed and the different deploying scenarios before distributing updates to the fleet of devices. { \"takeSnapshot\" : true , \"componentConfigurationRequest\" : { \"properties\" : { \"net.interface.enp2s0.config.ip4.status\" : { \"type\" : \"string\" , \"value\" : \"netIPv4StatusDisabled\" , \"array\" : false }, \"net.interface.enp2s0.config.autoconnect\" : { \"type\" : \"boolean\" , \"value\" : false , \"array\" : false } } } }","title":"Update the component configuration identified matching a pid"},{"location":"references/rest-apis/rest-configuration-service-v1/#update-the-configuration-of-multiple-configurable-components","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/configurableComponents/configurations/_update Request body : { \"takeSnapshot\" : true , \"componentConfigurations\" : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"properties\" : { \"enabled\" : { \"type\" : \"boolean\" , \"value\" : false , \"array\" : false } } } ] }","title":"Update the configuration of multiple configurable components"},{"location":"references/rest-apis/rest-configuration-service-v1/#list-all-the-available-snapshot-ids","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots Response : [ 0 , 1630930775789 , 1630930776355 , 1630930776839 , 1630930797402 , 1630930805305 ]","title":"List all the available snapshot IDs"},{"location":"references/rest-apis/rest-configuration-service-v1/#get-the-content-of-a-given-snapshot","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/{id} Response : [ { \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"properties\" : { \"clock.ntp.host\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.port\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 123 }, \"clock.provider\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"java-ntp\" }, \"clock.ntp.max-retry\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 0 }, \"clock.ntp.refresh-interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 3600 }, \"rtc.filename\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"/dev/rtc1\" }, \"clock.set.hwclock\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.timeout\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 10000 }, \"enabled\" : { \"array\" : false , \"type\" : \"Boolean\" , \"value\" : true }, \"clock.ntp.retry.interval\" : { \"array\" : false , \"type\" : \"Integer\" , \"value\" : 5 }, \"kura.service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"service.pid\" : { \"array\" : false , \"type\" : \"String\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" } } }, ... ]","title":"Get the content of a given snapshot"},{"location":"references/rest-apis/rest-configuration-service-v1/#trigger-the-framework-to-take-and-persist-a-snapshot","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/_write Response : 1631095409516","title":"Trigger the framework to take and persist a snapshot"},{"location":"references/rest-apis/rest-configuration-service-v1/#rollbacks-to-the-snapshot-identified-by-the-provided-id","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/_rollback Response : 1631093011618","title":"Rollbacks to the snapshot identified by the provided ID"},{"location":"references/rest-apis/rest-configuration-service-v1/#upload-a-snapshot-as-xml","text":"Request : URL - https://<gateway-ip>/services/configuration/v1/snapshots/_upload Request body : <?xml version=\"1.0\" encoding=\"UTF-8\"?> <esf:configurations xmlns:esf= \"http://eurotech.com/esf/2.0\" xmlns:ocd= \"http://www.osgi.org/xmlns/metatype/v1.2.0\" > <esf:configuration pid= \"org.eclipse.kura.clock.ClockService\" > <esf:properties> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.host\" type= \"String\" > <esf:value> 0.pool.ntp.org </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.port\" type= \"Integer\" > <esf:value> 123 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.provider\" type= \"String\" > <esf:value> java-ntp </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.max-retry\" type= \"Integer\" > <esf:value> 0 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.refresh-interval\" type= \"Integer\" > <esf:value> 3600 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"rtc.filename\" type= \"String\" > <esf:value> /dev/rtc1 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.set.hwclock\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.timeout\" type= \"Integer\" > <esf:value> 10000 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"enabled\" type= \"Boolean\" > <esf:value> true </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"clock.ntp.retry.interval\" type= \"Integer\" > <esf:value> 5 </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"kura.service.pid\" type= \"String\" > <esf:value> org.eclipse.kura.clock.ClockService </esf:value> </esf:property> <esf:property array= \"false\" encrypted= \"false\" name= \"service.pid\" type= \"String\" > <esf:value> org.eclipse.kura.clock.ClockService </esf:value> </esf:property> </esf:properties> </esf:configuration> </esf:configurations>","title":"Upload a snapshot as XML"},{"location":"references/rest-apis/rest-configuration-service-v2/","text":"Configuration V2 REST APIs and CONF-V2 Request Handler This page describes the CONF-V2 request handler and configuration/v2 rest APIs. Accessing the REST APIs requires to use an identity with the rest.configuration permission assigned. Request definitions GET/snapshots GET/factoryComponents POST/factoryComponents DEL/factoryComponents/byPid GET/factoryComponents/ocd POST/factoryComponents/ocd/byFactoryPid GET/configurableComponents GET/configurableComponents/pidsWithFactory GET/configurableComponents/configurations POST/configurableComponents/configurations/byPid POST/configurableComponents/configurations/byPid/_default PUT/configurableComponents/configurations/_update EXEC/snapshots/_write EXEC/snapshots/_rollback EXEC/snapshots/byId/_rollback JSON definitions PidAndFactoryPidSet SnapshotIdSet PropertyType ConfigurationProperty ConfigurationProperties Option AttributeDefinition ObjectClassDefinition ComponentConfiguration ComponentConfigurationList CreateFactoryComponentConfigurationsRequest UpdateComponentConfigurationRequest DeleteFactoryComponentConfigurationsRequest PidSet SnaphsotId GenericFailureReport BatchFailureReport Request definitions GET/snapshots REST API path : /services/configuration/v2/snapshots description : Returns the ids of the snapshots currently stored on the device. responses : 200 description : The snapshot id set. response body : SnapshotIdSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/factoryComponents REST API path : /services/configuration/v2/factoryComponents description : Returns the ids of the component factories available on the device. responses : 200 description : The factory pid set. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/factoryComponents REST API path : /services/configuration/v2/factoryComponents description : This is a batch request that allows to create one or more factory component instances and optionally create a new snapshot. request body : CreateFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: create:$pid for component creation operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport DEL/factoryComponents/byPid REST API path : /services/configuration/v2/factoryComponents/byPid description : This is a batch request that allows to delete one or more factory component instances and optionally create a new snapshot. request body : DeleteFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: delete:$pid for component delete operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport GET/factoryComponents/ocd REST API path : /services/configuration/v2/factoryComponents/ocd description : Returns the OCD of the components created by the factories available on the device without the need of creating an instance. This request returns the information related to all available factories. responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/factoryComponents/ocd/byFactoryPid REST API path : /services/configuration/v2/factoryComponents/ocd/byFactoryPid description : Returns the OCD of the components created by the factories available on the device without the need of creating an instance. This request returns the information related to a user selected set of factories. request body : PidSet responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. If the OCD for a given factory pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/configurableComponents REST API path : /services/configuration/v2/configurableComponents description : Returns the list of the pids available on the system. responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/configurableComponents/pidsWithFactory REST API path : /services/configuration/v2/configurableComponents/pidsWithFactory description : Returns the list of the pids available on the system, reporting also the factory pid where applicable. responses : 200 description : The request succeeded. response body : PidAndFactoryPidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/configurableComponents/configurations REST API path : /services/configuration/v2/configurableComponents/configurations description : Returns all of component configurations available on the system. This request will return the pid , ocd and properties . responses : 200 description : The request succeeded. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/configurableComponents/configurations/byPid REST API path : /services/configuration/v2/configurableComponents/configurations/byPid description : Returns a user selected set of configurations. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/configurableComponents/configurations/byPid/_default REST API path : /services/configuration/v2/configurableComponents/configurations/byPid/_default description : Returns the default configuration for a given set of component pids. The default configurations are generated basing on component definition only, user applied modifications will not be taken into account. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport PUT/configurableComponents/configurations/_update REST API path : /services/configuration/v2/configurableComponents/configurations/_update description : Updates a given set of component configurations. This request can be also used to apply a configuration snapshot. request body : UpdateComponentConfigurationRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: update:$pid for component update operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport EXEC/snapshots/_write REST API path : /services/configuration/v2/snapshots/_write description : Requests the device to create a new snasphot based on the current defice configuration. If this request is used through REST API, the POST method must be used. responses : 200 description : The request succeeded. The result is the identifier of the new snsapsot response body : SnaphsotId 500 description : An unexpected internal error occurred. response body : GenericFailureReport EXEC/snapshots/_rollback REST API path : /services/configuration/v2/snapshots/_rollback description : Rollbacks the framework to the last saved snapshot if available. If this request is used through REST API, the POST method must be used. responses : 200 description : The request succeeded. The result contains the id of the snapshot used for rollback. response body : SnaphsotId 500 description : An unexpected internal error occurred. response body : GenericFailureReport EXEC/snapshots/byId/_rollback REST API path : /services/configuration/v2/snapshots/byId/_rollback description : Performs a rollback to the snapshot id specified by the user. responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport JSON definitions PidAndFactoryPidSet Represents a set of pids with the corresponding factory pid. Properties : components : array The set of pids and factory pids array elements: object The pid and factory pid Properties : pid : string The component pid. factoryPid : string optional Can be missing if the described component is not a factory instance. The factory pid { \"components\" : [ { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbService\" , \"pid\" : \"org.eclipse.kura.db.H2DbService\" }, { \"factoryPid\" : \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"pid\" : \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" }, { \"pid\" : \"org.eclipse.kura.web.Console\" } ] } SnapshotIdSet An object decribing a set of configuration snapshot ids Properties : ids : array The set of snapshot ids. array elements: number A snapshot id. { \"ids\" : [ 0 , 1638438049921 , 1638438146960 , 1638439710944 , 1638439717931 , 1638439734077 , 1638439767252 , 1638521986953 , 1638521993692 , 1638522572822 ] } PropertyType A string that describes the type of a configuration property. * Possible values * STRING * LONG * DOUBLE * FLOAT * INTEGER * BYTE * CHAR * BOOLEAN * SHORT * PASSWORD \"STRING\" ConfigurationProperty An object describing a configuration property. Properties : type : string (enumerated) PropertyType value : variant optional In requests, this field can be omitted or set to null to assign the null value to a non required configuration property. Describes the property value. The value type depends on the type property. Variants : number If type is LONG , DOUBLE , FLOAT , INTEGER , BYTE or SHORT and the property does not represent an array. string If type is STRING , PASSWORD or CHAR and the property is not an array. In case of CHAR type, the value must have a length of 1. bool If type is BOOLEAN and the property is not an array array If type is LONG , DOUBLE , FLOAT , INTEGER , BYTE or SHORT and the property represents an array. array elements: number The property values as numbers. array If type is STRING , PASSWORD or CHAR and the property is an array. array elements: string The property values as strings. In case of CHAR type, the values must have a length of 1. array If type is BOOLEAN and the property is an array array elements: bool The property values as booleans. { \"type\" : \"STRING\" , \"value\" : \"foo\" } { \"type\" : \"STRING\" , \"value\" : [ \"foo\" , \"bar\" ] } { \"type\" : \"INTEGER\" , \"value\" : 12 } { \"type\" : \"LONG\" , \"value\" : [ 1 , 2 , 3 , 4 ] } { \"type\" : \"PASSWORD\" , \"value\" : \"myPassword\" } { \"type\" : \"PASSWORD\" , \"value\" : [ \"my\" , \"password\" , \"array\" ] } ConfigurationProperties An object representing a set of configuration properties. The members of this object represent configuration property, the member names represent the configuration property ids. This object can have a variable number of members. Properties : propertyName : object ConfigurationProperty { \"KeystoreService.target\" : { \"type\" : \"STRING\" , \"value\" : \"(kura.service.pid=HttpsKeystore)\" }, \"https.client.auth.ports\" : { \"type\" : \"INTEGER\" , \"value\" : [ 4443 ] }, \"https.client.revocation.soft.fail\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"https.ports\" : { \"type\" : \"INTEGER\" , \"value\" : [ 443 ] }, \"https.revocation.check.enabled\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.http.server.manager.HttpService\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.http.server.manager.HttpService\" }, \"ssl.revocation.mode\" : { \"type\" : \"STRING\" , \"value\" : \"PREFER_OCSP\" } } Option An object describing an allowed element for a multi choiche field. Properties : label : string optional This parameter may not be specified by component configuration. An user friendly label for the option. value : string The option value encoded as a string. { \"label\" : \"Value 1\" , \"value\" : \"1\" } { \"value\" : \"foo\" } AttributeDefinition A descriptor of a configuration property. Properties : id : string The id of the attribute definition. This field corresponds to the configuration property name. type : string (enumerated) PropertyType name : string optional This parameter may not be specified by component configuration. An user friendly name for the property. description : string optional This parameter may not be specified by component configuration. An user friendly description for the property. cardinality : number An integer describing the property cardinality. If the value is 0, then the property is a singleton value (not an array), if it is > 0, then the configuration property is an array and this property specifies the maximum allowed array length. min : string optional This parameter may not be specified by component configuration. If not specified, the property does not have a minimum value. Specifies the minimum value for this property as a string. max : string optional This parameter may not be specified by component configuration. If not specified, the property does not have a maximum value. Specifies the maximum value for this property as a string. isRequired : bool Specifies whether the configuration parameter is required or not. defaultValue : string optional This parameter may not be specified by component configuration. Specifies the default value for this property as a string. option : array optional If specified, describes a set of allowed values for the configuration property. The allowed values for this configuration properties array elements: object Option { \"defaultValue\" : \"false\" , \"description\" : \"Specifies whether the DB server is enabled or not.\" , \"id\" : \"db.server.enabled\" , \"isRequired\" : true , \"name\" : \"db.server.enabled\" , \"type\" : \"BOOLEAN\" } { \"defaultValue\" : \"TCP\" , \"description\" : \"Specifies the server type, see http://www.h2database.com/javadoc/org/h2/tools/Server.html for more details.\" , \"id\" : \"db.server.type\" , \"isRequired\" : true , \"name\" : \"db.server.type\" , \"option\" : [ { \"label\" : \"WEB\" , \"value\" : \"WEB\" }, { \"label\" : \"TCP\" , \"value\" : \"TCP\" }, { \"label\" : \"PG\" , \"value\" : \"PG\" } ], \"type\" : \"STRING\" } ObjectClassDefinition Provides some metadata information about a component configuration. Properties : ad : array The metadata about the configuration properties. array elements: object AttributeDefinition icon : array optional Can be missing if the OCD does not define icons. A list of icons that visually represent the configuration. array elements: object Properties : resource : string An identifier of the icon image resource. size : number The icon width and height in pixels. name : string A user friendly name for the component configuration. description : string A user friendly description of the component configuration. id : string An identifier of the component configuration. { \"ad\" : [ { \"defaultValue\" : \"false\" , \"description\" : \"The WatchdogService monitors CriticalComponents and reboots the system if one of them hangs. Once enabled the WatchdogService starts refreshing the watchdog device, which will reset the system if WatchdogService hangs.\" , \"id\" : \"enabled\" , \"isRequired\" : true , \"name\" : \"Watchdog enable\" , \"type\" : \"BOOLEAN\" }, { \"defaultValue\" : \"10000\" , \"description\" : \"WatchdogService's refresh interval in ms of the Watchdog device. The value can be set between 1 and 60 seconds and should not be set to a value greater or equal to the Watchdog device's timeout value\" , \"id\" : \"pingInterval\" , \"isRequired\" : true , \"max\" : \"60000\" , \"name\" : \"Watchdog refresh interval\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"/dev/watchdog\" , \"description\" : \"Watchdog device path e.g. /dev/watchdog.\" , \"id\" : \"watchdogDevice\" , \"isRequired\" : true , \"name\" : \"Watchdog device path\" , \"type\" : \"STRING\" }, { \"defaultValue\" : \"/opt/eclipse/kura/data/kura-reboot-cause\" , \"description\" : \"The path for the file that will contain the reboot cause information.\" , \"id\" : \"rebootCauseFilePath\" , \"isRequired\" : true , \"name\" : \"Reboot Cause File Path\" , \"type\" : \"STRING\" } ], \"description\" : \"The WatchdogService handles the hardware watchdog of the platform. The parameter define the ping periodicity of the hardware watchdog to ensure it does not reboot. The WatchdogService will reset the watchdog timeout, can disable it (where supported) with the Magic Character, but cannot set the refresh rate of a watchdog device.\" , \"icon\" : [ { \"resource\" : \"WatchdogService\" , \"size\" : 32 } ], \"id\" : \"org.eclipse.kura.watchdog.WatchdogService\" , \"name\" : \"WatchdogService\" } ComponentConfiguration Describes a component configuration. Properties : pid : string The identifier of this configuration. ocd : object optional Can be omitted in some requests and responses, see request documentation for more information. ObjectClassDefinition properties : object optional Can be omitted in some requests and responses, see request documentation for more information. ConfigurationProperties { \"definition\" : { \"ad\" : [ { \"cardinality\" : 3 , \"description\" : \"If set to a non empty list, REST API access will be allowed only on the specified ports. If set to an empty list, access will be allowed on all ports. Please make sure that the allowed ports are open in HttpService and Firewall configuration.\" , \"id\" : \"allowed.ports\" , \"isRequired\" : false , \"max\" : \"65535\" , \"min\" : \"1\" , \"name\" : \"Allowed ports\" , \"type\" : \"INTEGER\" } ], \"description\" : \"This service allows to configure settings related to Kura REST APIs\" , \"id\" : \"org.eclipse.kura.internal.rest.provider.RestService\" , \"name\" : \"RestService\" }, \"pid\" : \"org.eclipse.kura.internal.rest.provider.RestService\" , \"properties\" : { \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.internal.rest.provider.RestService\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.internal.rest.provider.RestService\" } } } ComponentConfigurationList Represents a list of component configurations. Properties : configs : array The component configurations array elements: object ComponentConfiguration { \"configs\" : [ { \"definition\" : { \"ad\" : [ { \"defaultValue\" : \"true\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"isRequired\" : true , \"name\" : \"enabled\" , \"type\" : \"BOOLEAN\" }, { \"defaultValue\" : \"true\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"isRequired\" : true , \"name\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" }, { \"defaultValue\" : \"java-ntp\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"isRequired\" : true , \"name\" : \"clock.provider\" , \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" } ], \"type\" : \"STRING\" }, { \"defaultValue\" : \"0.pool.ntp.org\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"isRequired\" : true , \"name\" : \"clock.ntp.host\" , \"type\" : \"STRING\" }, { \"defaultValue\" : \"123\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"isRequired\" : true , \"max\" : \"65535\" , \"min\" : \"1\" , \"name\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"10000\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"isRequired\" : true , \"min\" : \"1000\" , \"name\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"0\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"isRequired\" : true , \"min\" : \"0\" , \"name\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"5\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"isRequired\" : true , \"min\" : \"1\" , \"name\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"3600\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"isRequired\" : true , \"name\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"/dev/rtc0\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"isRequired\" : true , \"name\" : \"RTC File Name\" , \"type\" : \"STRING\" }, { \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"isRequired\" : false , \"name\" : \"Chrony Configuration\" , \"type\" : \"STRING\" } ], \"description\" : \"ClockService Configuration\" , \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 } ], \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"name\" : \"ClockService\" }, \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"properties\" : { \"clock.ntp.host\" : { \"type\" : \"STRING\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"clock.ntp.port\" : { \"type\" : \"INTEGER\" , \"value\" : 123 }, \"clock.ntp.refresh-interval\" : { \"type\" : \"INTEGER\" , \"value\" : 3600 }, \"clock.ntp.retry.interval\" : { \"type\" : \"INTEGER\" , \"value\" : 5 }, \"clock.ntp.timeout\" : { \"type\" : \"INTEGER\" , \"value\" : 10000 }, \"clock.provider\" : { \"type\" : \"STRING\" , \"value\" : \"java-ntp\" }, \"clock.set.hwclock\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"enabled\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"rtc.filename\" : { \"type\" : \"STRING\" , \"value\" : \"/dev/rtc0\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" } } }, { \"definition\" : { \"ad\" : [ { \"defaultValue\" : \"(kura.service.pid=org.eclipse.kura.ssl.SslManagerService)\" , \"description\" : \"Specifies, as an OSGi target filter, the pid of the SslManagerService used to create SSL connections for downloading packages.\" , \"id\" : \"SslManagerService.target\" , \"isRequired\" : true , \"name\" : \"SslManagerService Target Filter\" , \"type\" : \"STRING\" } ], \"description\" : \"This service is responsible of managing the deployment packages installed on the system.\" , \"id\" : \"org.eclipse.kura.deployment.agent\" , \"name\" : \"DeploymentAgent\" }, \"pid\" : \"org.eclipse.kura.deployment.agent\" , \"properties\" : { \"SslManagerService.target\" : { \"type\" : \"STRING\" , \"value\" : \"(kura.service.pid=org.eclipse.kura.ssl.SslManagerService)\" }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.deployment.agent\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.deployment.agent\" } } } ] } CreateFactoryComponentConfigurationsRequest An object describing a factory component instance creation request. Properties : configs : array The set of configurations to be created array elements: object An object describing a factory component confguration. Properties : pid : string The component pid. factoryPid : string The component factory pid properties : object optional If omitted, the component innstance will be created with default configuration. ConfigurationProperties takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the factory component configuration instances have been created. { \"configs\" : [ { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbServer\" , \"pid\" : \"testComponent\" , \"properties\" : { \"db.server.type\" : { \"type\" : \"STRING\" , \"value\" : \"WEB\" } } }, { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbServer\" , \"pid\" : \"thirdComponent\" } ], \"takeSnapshot\" : true } UpdateComponentConfigurationRequest An object that describes a set of configurations that need to be updated. Properties : configs : array The configurations to be updated. The ocd field can be omitted, it will be ignored if specified. array elements: object ComponentConfiguration takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the component configurations have been applied. { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.cloud.app.command.CommandCloudApp\" , \"properties\" : { \"command.enable\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"command.timeout\" : { \"type\" : \"INTEGER\" , \"value\" : 60 } } }, { \"pid\" : \"org.eclipse.kura.position.PositionService\" , \"properties\" : { \"parity\" : { \"type\" : \"STRING\" , \"value\" : 0 } } } ], \"takeSnapshot\" : true } DeleteFactoryComponentConfigurationsRequest An object describing a factory component instance delete request. Properties : pids : array The list of the pids of the factory component instances to be deleted. array elements: string The component pid. takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the factory component configuration instances have been deleted. { \"pids\" : [ \"testComponent\" , \"otherComponent\" ], \"takeSnapshot\" : true } PidSet Represents a set of pids or factory pids. Properties : pids : array The set of pids array elements: string The pid { \"pids\" : [ \"org.eclipse.kura.deployment.agent\" , \"org.eclipse.kura.clock.ClockService\" ] } SnaphsotId An object describing the identifier of a configuration snapshot. Properties : id : number The snapshot id { \"id\" : 163655959932 } GenericFailureReport An object reporting a failure message. Properties : message : string A message describing the failure. { \"message\" : \"An unexpected error occurred.\" } BatchFailureReport An object that is returned by requests that involve multiple operations, when at least one operation failed. This object report an error message for each of the operations that failed. The operations are identified by an id, see request documentation for more details. If an operation is not listed by this object, then the operation succeeded. Properties : failures : array The list of operations that failed. array elements: object An object reporting details about an operation failure. Properties : id : string An identifier of the failed operation. message : string A message describing the failure. { \"failures\" : [ { \"id\" : \"create:testComponent\" , \"message\" : \"Invalid parameter. pid testComponent already exists\" }, { \"id\" : \"create:otherComponent\" , \"message\" : \"Invalid parameter. pid otherComponent already exists\" } ] }","title":"Configuration V2"},{"location":"references/rest-apis/rest-configuration-service-v2/#configuration-v2-rest-apis-and-conf-v2-request-handler","text":"This page describes the CONF-V2 request handler and configuration/v2 rest APIs. Accessing the REST APIs requires to use an identity with the rest.configuration permission assigned. Request definitions GET/snapshots GET/factoryComponents POST/factoryComponents DEL/factoryComponents/byPid GET/factoryComponents/ocd POST/factoryComponents/ocd/byFactoryPid GET/configurableComponents GET/configurableComponents/pidsWithFactory GET/configurableComponents/configurations POST/configurableComponents/configurations/byPid POST/configurableComponents/configurations/byPid/_default PUT/configurableComponents/configurations/_update EXEC/snapshots/_write EXEC/snapshots/_rollback EXEC/snapshots/byId/_rollback JSON definitions PidAndFactoryPidSet SnapshotIdSet PropertyType ConfigurationProperty ConfigurationProperties Option AttributeDefinition ObjectClassDefinition ComponentConfiguration ComponentConfigurationList CreateFactoryComponentConfigurationsRequest UpdateComponentConfigurationRequest DeleteFactoryComponentConfigurationsRequest PidSet SnaphsotId GenericFailureReport BatchFailureReport","title":"Configuration V2 REST APIs and CONF-V2 Request Handler"},{"location":"references/rest-apis/rest-configuration-service-v2/#request-definitions","text":"","title":"Request definitions"},{"location":"references/rest-apis/rest-configuration-service-v2/#getsnapshots","text":"REST API path : /services/configuration/v2/snapshots description : Returns the ids of the snapshots currently stored on the device. responses : 200 description : The snapshot id set. response body : SnapshotIdSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/snapshots"},{"location":"references/rest-apis/rest-configuration-service-v2/#getfactorycomponents","text":"REST API path : /services/configuration/v2/factoryComponents description : Returns the ids of the component factories available on the device. responses : 200 description : The factory pid set. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/factoryComponents"},{"location":"references/rest-apis/rest-configuration-service-v2/#postfactorycomponents","text":"REST API path : /services/configuration/v2/factoryComponents description : This is a batch request that allows to create one or more factory component instances and optionally create a new snapshot. request body : CreateFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: create:$pid for component creation operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"POST/factoryComponents"},{"location":"references/rest-apis/rest-configuration-service-v2/#delfactorycomponentsbypid","text":"REST API path : /services/configuration/v2/factoryComponents/byPid description : This is a batch request that allows to delete one or more factory component instances and optionally create a new snapshot. request body : DeleteFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: delete:$pid for component delete operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"DEL/factoryComponents/byPid"},{"location":"references/rest-apis/rest-configuration-service-v2/#getfactorycomponentsocd","text":"REST API path : /services/configuration/v2/factoryComponents/ocd description : Returns the OCD of the components created by the factories available on the device without the need of creating an instance. This request returns the information related to all available factories. responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/factoryComponents/ocd"},{"location":"references/rest-apis/rest-configuration-service-v2/#postfactorycomponentsocdbyfactorypid","text":"REST API path : /services/configuration/v2/factoryComponents/ocd/byFactoryPid description : Returns the OCD of the components created by the factories available on the device without the need of creating an instance. This request returns the information related to a user selected set of factories. request body : PidSet responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. If the OCD for a given factory pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/factoryComponents/ocd/byFactoryPid"},{"location":"references/rest-apis/rest-configuration-service-v2/#getconfigurablecomponents","text":"REST API path : /services/configuration/v2/configurableComponents description : Returns the list of the pids available on the system. responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/configurableComponents"},{"location":"references/rest-apis/rest-configuration-service-v2/#getconfigurablecomponentspidswithfactory","text":"REST API path : /services/configuration/v2/configurableComponents/pidsWithFactory description : Returns the list of the pids available on the system, reporting also the factory pid where applicable. responses : 200 description : The request succeeded. response body : PidAndFactoryPidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/configurableComponents/pidsWithFactory"},{"location":"references/rest-apis/rest-configuration-service-v2/#getconfigurablecomponentsconfigurations","text":"REST API path : /services/configuration/v2/configurableComponents/configurations description : Returns all of component configurations available on the system. This request will return the pid , ocd and properties . responses : 200 description : The request succeeded. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/configurableComponents/configurations"},{"location":"references/rest-apis/rest-configuration-service-v2/#postconfigurablecomponentsconfigurationsbypid","text":"REST API path : /services/configuration/v2/configurableComponents/configurations/byPid description : Returns a user selected set of configurations. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/configurableComponents/configurations/byPid"},{"location":"references/rest-apis/rest-configuration-service-v2/#postconfigurablecomponentsconfigurationsbypid_default","text":"REST API path : /services/configuration/v2/configurableComponents/configurations/byPid/_default description : Returns the default configuration for a given set of component pids. The default configurations are generated basing on component definition only, user applied modifications will not be taken into account. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/configurableComponents/configurations/byPid/_default"},{"location":"references/rest-apis/rest-configuration-service-v2/#putconfigurablecomponentsconfigurations_update","text":"REST API path : /services/configuration/v2/configurableComponents/configurations/_update description : Updates a given set of component configurations. This request can be also used to apply a configuration snapshot. request body : UpdateComponentConfigurationRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: update:$pid for component update operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"PUT/configurableComponents/configurations/_update"},{"location":"references/rest-apis/rest-configuration-service-v2/#execsnapshots_write","text":"REST API path : /services/configuration/v2/snapshots/_write description : Requests the device to create a new snasphot based on the current defice configuration. If this request is used through REST API, the POST method must be used. responses : 200 description : The request succeeded. The result is the identifier of the new snsapsot response body : SnaphsotId 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"EXEC/snapshots/_write"},{"location":"references/rest-apis/rest-configuration-service-v2/#execsnapshots_rollback","text":"REST API path : /services/configuration/v2/snapshots/_rollback description : Rollbacks the framework to the last saved snapshot if available. If this request is used through REST API, the POST method must be used. responses : 200 description : The request succeeded. The result contains the id of the snapshot used for rollback. response body : SnaphsotId 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"EXEC/snapshots/_rollback"},{"location":"references/rest-apis/rest-configuration-service-v2/#execsnapshotsbyid_rollback","text":"REST API path : /services/configuration/v2/snapshots/byId/_rollback description : Performs a rollback to the snapshot id specified by the user. responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"EXEC/snapshots/byId/_rollback"},{"location":"references/rest-apis/rest-configuration-service-v2/#json-definitions","text":"","title":"JSON definitions"},{"location":"references/rest-apis/rest-configuration-service-v2/#pidandfactorypidset","text":"Represents a set of pids with the corresponding factory pid. Properties : components : array The set of pids and factory pids array elements: object The pid and factory pid Properties : pid : string The component pid. factoryPid : string optional Can be missing if the described component is not a factory instance. The factory pid { \"components\" : [ { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbService\" , \"pid\" : \"org.eclipse.kura.db.H2DbService\" }, { \"factoryPid\" : \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"pid\" : \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" }, { \"pid\" : \"org.eclipse.kura.web.Console\" } ] }","title":"PidAndFactoryPidSet"},{"location":"references/rest-apis/rest-configuration-service-v2/#snapshotidset","text":"An object decribing a set of configuration snapshot ids Properties : ids : array The set of snapshot ids. array elements: number A snapshot id. { \"ids\" : [ 0 , 1638438049921 , 1638438146960 , 1638439710944 , 1638439717931 , 1638439734077 , 1638439767252 , 1638521986953 , 1638521993692 , 1638522572822 ] }","title":"SnapshotIdSet"},{"location":"references/rest-apis/rest-configuration-service-v2/#propertytype","text":"A string that describes the type of a configuration property. * Possible values * STRING * LONG * DOUBLE * FLOAT * INTEGER * BYTE * CHAR * BOOLEAN * SHORT * PASSWORD \"STRING\"","title":"PropertyType"},{"location":"references/rest-apis/rest-configuration-service-v2/#configurationproperty","text":"An object describing a configuration property. Properties : type : string (enumerated) PropertyType value : variant optional In requests, this field can be omitted or set to null to assign the null value to a non required configuration property. Describes the property value. The value type depends on the type property. Variants : number If type is LONG , DOUBLE , FLOAT , INTEGER , BYTE or SHORT and the property does not represent an array. string If type is STRING , PASSWORD or CHAR and the property is not an array. In case of CHAR type, the value must have a length of 1. bool If type is BOOLEAN and the property is not an array array If type is LONG , DOUBLE , FLOAT , INTEGER , BYTE or SHORT and the property represents an array. array elements: number The property values as numbers. array If type is STRING , PASSWORD or CHAR and the property is an array. array elements: string The property values as strings. In case of CHAR type, the values must have a length of 1. array If type is BOOLEAN and the property is an array array elements: bool The property values as booleans. { \"type\" : \"STRING\" , \"value\" : \"foo\" } { \"type\" : \"STRING\" , \"value\" : [ \"foo\" , \"bar\" ] } { \"type\" : \"INTEGER\" , \"value\" : 12 } { \"type\" : \"LONG\" , \"value\" : [ 1 , 2 , 3 , 4 ] } { \"type\" : \"PASSWORD\" , \"value\" : \"myPassword\" } { \"type\" : \"PASSWORD\" , \"value\" : [ \"my\" , \"password\" , \"array\" ] }","title":"ConfigurationProperty"},{"location":"references/rest-apis/rest-configuration-service-v2/#configurationproperties","text":"An object representing a set of configuration properties. The members of this object represent configuration property, the member names represent the configuration property ids. This object can have a variable number of members. Properties : propertyName : object ConfigurationProperty { \"KeystoreService.target\" : { \"type\" : \"STRING\" , \"value\" : \"(kura.service.pid=HttpsKeystore)\" }, \"https.client.auth.ports\" : { \"type\" : \"INTEGER\" , \"value\" : [ 4443 ] }, \"https.client.revocation.soft.fail\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"https.ports\" : { \"type\" : \"INTEGER\" , \"value\" : [ 443 ] }, \"https.revocation.check.enabled\" : { \"type\" : \"BOOLEAN\" , \"value\" : false }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.http.server.manager.HttpService\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.http.server.manager.HttpService\" }, \"ssl.revocation.mode\" : { \"type\" : \"STRING\" , \"value\" : \"PREFER_OCSP\" } }","title":"ConfigurationProperties"},{"location":"references/rest-apis/rest-configuration-service-v2/#option","text":"An object describing an allowed element for a multi choiche field. Properties : label : string optional This parameter may not be specified by component configuration. An user friendly label for the option. value : string The option value encoded as a string. { \"label\" : \"Value 1\" , \"value\" : \"1\" } { \"value\" : \"foo\" }","title":"Option"},{"location":"references/rest-apis/rest-configuration-service-v2/#attributedefinition","text":"A descriptor of a configuration property. Properties : id : string The id of the attribute definition. This field corresponds to the configuration property name. type : string (enumerated) PropertyType name : string optional This parameter may not be specified by component configuration. An user friendly name for the property. description : string optional This parameter may not be specified by component configuration. An user friendly description for the property. cardinality : number An integer describing the property cardinality. If the value is 0, then the property is a singleton value (not an array), if it is > 0, then the configuration property is an array and this property specifies the maximum allowed array length. min : string optional This parameter may not be specified by component configuration. If not specified, the property does not have a minimum value. Specifies the minimum value for this property as a string. max : string optional This parameter may not be specified by component configuration. If not specified, the property does not have a maximum value. Specifies the maximum value for this property as a string. isRequired : bool Specifies whether the configuration parameter is required or not. defaultValue : string optional This parameter may not be specified by component configuration. Specifies the default value for this property as a string. option : array optional If specified, describes a set of allowed values for the configuration property. The allowed values for this configuration properties array elements: object Option { \"defaultValue\" : \"false\" , \"description\" : \"Specifies whether the DB server is enabled or not.\" , \"id\" : \"db.server.enabled\" , \"isRequired\" : true , \"name\" : \"db.server.enabled\" , \"type\" : \"BOOLEAN\" } { \"defaultValue\" : \"TCP\" , \"description\" : \"Specifies the server type, see http://www.h2database.com/javadoc/org/h2/tools/Server.html for more details.\" , \"id\" : \"db.server.type\" , \"isRequired\" : true , \"name\" : \"db.server.type\" , \"option\" : [ { \"label\" : \"WEB\" , \"value\" : \"WEB\" }, { \"label\" : \"TCP\" , \"value\" : \"TCP\" }, { \"label\" : \"PG\" , \"value\" : \"PG\" } ], \"type\" : \"STRING\" }","title":"AttributeDefinition"},{"location":"references/rest-apis/rest-configuration-service-v2/#objectclassdefinition","text":"Provides some metadata information about a component configuration. Properties : ad : array The metadata about the configuration properties. array elements: object AttributeDefinition icon : array optional Can be missing if the OCD does not define icons. A list of icons that visually represent the configuration. array elements: object Properties : resource : string An identifier of the icon image resource. size : number The icon width and height in pixels. name : string A user friendly name for the component configuration. description : string A user friendly description of the component configuration. id : string An identifier of the component configuration. { \"ad\" : [ { \"defaultValue\" : \"false\" , \"description\" : \"The WatchdogService monitors CriticalComponents and reboots the system if one of them hangs. Once enabled the WatchdogService starts refreshing the watchdog device, which will reset the system if WatchdogService hangs.\" , \"id\" : \"enabled\" , \"isRequired\" : true , \"name\" : \"Watchdog enable\" , \"type\" : \"BOOLEAN\" }, { \"defaultValue\" : \"10000\" , \"description\" : \"WatchdogService's refresh interval in ms of the Watchdog device. The value can be set between 1 and 60 seconds and should not be set to a value greater or equal to the Watchdog device's timeout value\" , \"id\" : \"pingInterval\" , \"isRequired\" : true , \"max\" : \"60000\" , \"name\" : \"Watchdog refresh interval\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"/dev/watchdog\" , \"description\" : \"Watchdog device path e.g. /dev/watchdog.\" , \"id\" : \"watchdogDevice\" , \"isRequired\" : true , \"name\" : \"Watchdog device path\" , \"type\" : \"STRING\" }, { \"defaultValue\" : \"/opt/eclipse/kura/data/kura-reboot-cause\" , \"description\" : \"The path for the file that will contain the reboot cause information.\" , \"id\" : \"rebootCauseFilePath\" , \"isRequired\" : true , \"name\" : \"Reboot Cause File Path\" , \"type\" : \"STRING\" } ], \"description\" : \"The WatchdogService handles the hardware watchdog of the platform. The parameter define the ping periodicity of the hardware watchdog to ensure it does not reboot. The WatchdogService will reset the watchdog timeout, can disable it (where supported) with the Magic Character, but cannot set the refresh rate of a watchdog device.\" , \"icon\" : [ { \"resource\" : \"WatchdogService\" , \"size\" : 32 } ], \"id\" : \"org.eclipse.kura.watchdog.WatchdogService\" , \"name\" : \"WatchdogService\" }","title":"ObjectClassDefinition"},{"location":"references/rest-apis/rest-configuration-service-v2/#componentconfiguration","text":"Describes a component configuration. Properties : pid : string The identifier of this configuration. ocd : object optional Can be omitted in some requests and responses, see request documentation for more information. ObjectClassDefinition properties : object optional Can be omitted in some requests and responses, see request documentation for more information. ConfigurationProperties { \"definition\" : { \"ad\" : [ { \"cardinality\" : 3 , \"description\" : \"If set to a non empty list, REST API access will be allowed only on the specified ports. If set to an empty list, access will be allowed on all ports. Please make sure that the allowed ports are open in HttpService and Firewall configuration.\" , \"id\" : \"allowed.ports\" , \"isRequired\" : false , \"max\" : \"65535\" , \"min\" : \"1\" , \"name\" : \"Allowed ports\" , \"type\" : \"INTEGER\" } ], \"description\" : \"This service allows to configure settings related to Kura REST APIs\" , \"id\" : \"org.eclipse.kura.internal.rest.provider.RestService\" , \"name\" : \"RestService\" }, \"pid\" : \"org.eclipse.kura.internal.rest.provider.RestService\" , \"properties\" : { \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.internal.rest.provider.RestService\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.internal.rest.provider.RestService\" } } }","title":"ComponentConfiguration"},{"location":"references/rest-apis/rest-configuration-service-v2/#componentconfigurationlist","text":"Represents a list of component configurations. Properties : configs : array The component configurations array elements: object ComponentConfiguration { \"configs\" : [ { \"definition\" : { \"ad\" : [ { \"defaultValue\" : \"true\" , \"description\" : \"Whether or not to enable the ClockService\" , \"id\" : \"enabled\" , \"isRequired\" : true , \"name\" : \"enabled\" , \"type\" : \"BOOLEAN\" }, { \"defaultValue\" : \"true\" , \"description\" : \"Whether or not to sync the system hardware clock after the system time gets set\" , \"id\" : \"clock.set.hwclock\" , \"isRequired\" : true , \"name\" : \"clock.set.hwclock\" , \"type\" : \"BOOLEAN\" }, { \"defaultValue\" : \"java-ntp\" , \"description\" : \"Source for setting the system clock. Verify the availabiliy of the selected provider before activate it.\" , \"id\" : \"clock.provider\" , \"isRequired\" : true , \"name\" : \"clock.provider\" , \"option\" : [ { \"label\" : \"java-ntp\" , \"value\" : \"java-ntp\" }, { \"label\" : \"ntpd\" , \"value\" : \"ntpd\" }, { \"label\" : \"chrony-advanced\" , \"value\" : \"chrony-advanced\" } ], \"type\" : \"STRING\" }, { \"defaultValue\" : \"0.pool.ntp.org\" , \"description\" : \"The hostname that provides the system time via NTP\" , \"id\" : \"clock.ntp.host\" , \"isRequired\" : true , \"name\" : \"clock.ntp.host\" , \"type\" : \"STRING\" }, { \"defaultValue\" : \"123\" , \"description\" : \"The port number that provides the system time via NTP\" , \"id\" : \"clock.ntp.port\" , \"isRequired\" : true , \"max\" : \"65535\" , \"min\" : \"1\" , \"name\" : \"clock.ntp.port\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"10000\" , \"description\" : \"The NTP timeout in milliseconds\" , \"id\" : \"clock.ntp.timeout\" , \"isRequired\" : true , \"min\" : \"1000\" , \"name\" : \"clock.ntp.timeout\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"0\" , \"description\" : \"The maximum number of retries for the initial synchronization (with interval clock.ntp.retry.interval). If set to 0 the service will retry forever.\" , \"id\" : \"clock.ntp.max-retry\" , \"isRequired\" : true , \"min\" : \"0\" , \"name\" : \"clock.ntp.max-retry\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"5\" , \"description\" : \"When sync fails, interval in seconds between each retry.\" , \"id\" : \"clock.ntp.retry.interval\" , \"isRequired\" : true , \"min\" : \"1\" , \"name\" : \"clock.ntp.retry.interval\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"3600\" , \"description\" : \"Whether or not to sync the clock and if so, the frequency in seconds. If less than zero - no update, if equal to zero - sync once at startup, if greater than zero - the frequency in seconds to perform a new clock sync\" , \"id\" : \"clock.ntp.refresh-interval\" , \"isRequired\" : true , \"name\" : \"clock.ntp.refresh-interval\" , \"type\" : \"INTEGER\" }, { \"defaultValue\" : \"/dev/rtc0\" , \"description\" : \"The RTC File Name. It defaults to /dev/rtc0. This option is not used if chrony-advanced option is selected in clock.provider.\" , \"id\" : \"rtc.filename\" , \"isRequired\" : true , \"name\" : \"RTC File Name\" , \"type\" : \"STRING\" }, { \"description\" : \"Chrony configuration file.|TextArea\" , \"id\" : \"chrony.advanced.config\" , \"isRequired\" : false , \"name\" : \"Chrony Configuration\" , \"type\" : \"STRING\" } ], \"description\" : \"ClockService Configuration\" , \"icon\" : [ { \"resource\" : \"ClockService\" , \"size\" : 32 } ], \"id\" : \"org.eclipse.kura.clock.ClockService\" , \"name\" : \"ClockService\" }, \"pid\" : \"org.eclipse.kura.clock.ClockService\" , \"properties\" : { \"clock.ntp.host\" : { \"type\" : \"STRING\" , \"value\" : \"0.pool.ntp.org\" }, \"clock.ntp.max-retry\" : { \"type\" : \"INTEGER\" , \"value\" : 0 }, \"clock.ntp.port\" : { \"type\" : \"INTEGER\" , \"value\" : 123 }, \"clock.ntp.refresh-interval\" : { \"type\" : \"INTEGER\" , \"value\" : 3600 }, \"clock.ntp.retry.interval\" : { \"type\" : \"INTEGER\" , \"value\" : 5 }, \"clock.ntp.timeout\" : { \"type\" : \"INTEGER\" , \"value\" : 10000 }, \"clock.provider\" : { \"type\" : \"STRING\" , \"value\" : \"java-ntp\" }, \"clock.set.hwclock\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"enabled\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" }, \"rtc.filename\" : { \"type\" : \"STRING\" , \"value\" : \"/dev/rtc0\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.clock.ClockService\" } } }, { \"definition\" : { \"ad\" : [ { \"defaultValue\" : \"(kura.service.pid=org.eclipse.kura.ssl.SslManagerService)\" , \"description\" : \"Specifies, as an OSGi target filter, the pid of the SslManagerService used to create SSL connections for downloading packages.\" , \"id\" : \"SslManagerService.target\" , \"isRequired\" : true , \"name\" : \"SslManagerService Target Filter\" , \"type\" : \"STRING\" } ], \"description\" : \"This service is responsible of managing the deployment packages installed on the system.\" , \"id\" : \"org.eclipse.kura.deployment.agent\" , \"name\" : \"DeploymentAgent\" }, \"pid\" : \"org.eclipse.kura.deployment.agent\" , \"properties\" : { \"SslManagerService.target\" : { \"type\" : \"STRING\" , \"value\" : \"(kura.service.pid=org.eclipse.kura.ssl.SslManagerService)\" }, \"kura.service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.deployment.agent\" }, \"service.pid\" : { \"type\" : \"STRING\" , \"value\" : \"org.eclipse.kura.deployment.agent\" } } } ] }","title":"ComponentConfigurationList"},{"location":"references/rest-apis/rest-configuration-service-v2/#createfactorycomponentconfigurationsrequest","text":"An object describing a factory component instance creation request. Properties : configs : array The set of configurations to be created array elements: object An object describing a factory component confguration. Properties : pid : string The component pid. factoryPid : string The component factory pid properties : object optional If omitted, the component innstance will be created with default configuration. ConfigurationProperties takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the factory component configuration instances have been created. { \"configs\" : [ { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbServer\" , \"pid\" : \"testComponent\" , \"properties\" : { \"db.server.type\" : { \"type\" : \"STRING\" , \"value\" : \"WEB\" } } }, { \"factoryPid\" : \"org.eclipse.kura.core.db.H2DbServer\" , \"pid\" : \"thirdComponent\" } ], \"takeSnapshot\" : true }","title":"CreateFactoryComponentConfigurationsRequest"},{"location":"references/rest-apis/rest-configuration-service-v2/#updatecomponentconfigurationrequest","text":"An object that describes a set of configurations that need to be updated. Properties : configs : array The configurations to be updated. The ocd field can be omitted, it will be ignored if specified. array elements: object ComponentConfiguration takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the component configurations have been applied. { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.cloud.app.command.CommandCloudApp\" , \"properties\" : { \"command.enable\" : { \"type\" : \"BOOLEAN\" , \"value\" : true }, \"command.timeout\" : { \"type\" : \"INTEGER\" , \"value\" : 60 } } }, { \"pid\" : \"org.eclipse.kura.position.PositionService\" , \"properties\" : { \"parity\" : { \"type\" : \"STRING\" , \"value\" : 0 } } } ], \"takeSnapshot\" : true }","title":"UpdateComponentConfigurationRequest"},{"location":"references/rest-apis/rest-configuration-service-v2/#deletefactorycomponentconfigurationsrequest","text":"An object describing a factory component instance delete request. Properties : pids : array The list of the pids of the factory component instances to be deleted. array elements: string The component pid. takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the factory component configuration instances have been deleted. { \"pids\" : [ \"testComponent\" , \"otherComponent\" ], \"takeSnapshot\" : true }","title":"DeleteFactoryComponentConfigurationsRequest"},{"location":"references/rest-apis/rest-configuration-service-v2/#pidset","text":"Represents a set of pids or factory pids. Properties : pids : array The set of pids array elements: string The pid { \"pids\" : [ \"org.eclipse.kura.deployment.agent\" , \"org.eclipse.kura.clock.ClockService\" ] }","title":"PidSet"},{"location":"references/rest-apis/rest-configuration-service-v2/#snaphsotid","text":"An object describing the identifier of a configuration snapshot. Properties : id : number The snapshot id { \"id\" : 163655959932 }","title":"SnaphsotId"},{"location":"references/rest-apis/rest-configuration-service-v2/#genericfailurereport","text":"An object reporting a failure message. Properties : message : string A message describing the failure. { \"message\" : \"An unexpected error occurred.\" }","title":"GenericFailureReport"},{"location":"references/rest-apis/rest-configuration-service-v2/#batchfailurereport","text":"An object that is returned by requests that involve multiple operations, when at least one operation failed. This object report an error message for each of the operations that failed. The operations are identified by an id, see request documentation for more details. If an operation is not listed by this object, then the operation succeeded. Properties : failures : array The list of operations that failed. array elements: object An object reporting details about an operation failure. Properties : id : string An identifier of the failed operation. message : string A message describing the failure. { \"failures\" : [ { \"id\" : \"create:testComponent\" , \"message\" : \"Invalid parameter. pid testComponent already exists\" }, { \"id\" : \"create:otherComponent\" , \"message\" : \"Invalid parameter. pid otherComponent already exists\" } ] }","title":"BatchFailureReport"},{"location":"references/rest-apis/rest-deploy-api/","text":"Rest Deploy v2 API The DeploymentRestService APIs provides methods to manage the installed deployment packages. Identities with rest.deploy permissions can access these APIs. Get installed packages Description: Provides the list of all the deployment packages installed and tracked by the framework. Method: GET API PATH: /deploy/v2/ Responses 200 OK status [{ \"name\" : \"packageName\" , \"version\" : \"packageVersion\" }] Install package from URL Description: Installs the deployment package specified in the InstallRequest. If the request was already issued for the same InstallRequest, it returns the status of the installation process. Method: POST API PATH: /deploy/v2/_install Request Body { \"url\" : \"deploymentPackageUrl\" } Example: { \"url\" : \"http://download.eclipse.org/kura/releases/4.1.0/org.eclipse.kura.demo.heater_1.0.500.dp\" } Please note that the url can refer to a .dp already in the device filesystem. Responses 200 OK status 400 Bad request \"REQUEST_RECEIVED\" Install package from upload Description: Upload and install a Deployment Package. Method: POST API PATH: /deploy/v2/_upload Request Body The POST request body should be encoded in the multipart/form-data enctype , thus allowing for the upload of the Deployment Package file. The uploaded file is expected to be added in the file field of the form. Headers Content-Type : multipart/form-data Body (formdata) file Example Example using curl : curl -X POST -k -u $USERNAME : $PASSWORD \\ --header 'Content-Type: multipart/form-data' \\ --form 'file=@\"/path/to/your/file.dp\"' \\ https:// $ADDRESS /services/deploy/v2/_upload Responses 200 OK status 400 Bad request \"REQUEST_RECEIVED\" Uninstall a package Description: Uninstalls the deployment package identified by the specified name. If the request was already issued, it reports the status of the uninstallation operation. Method: DELETE API PATH: /deploy/v2/{name} Responses 200 OK status \"REQUEST_RECEIVED\" Get Eclipse Marketplace Package Descriptor Description: Provides the Eclipse Marketplace Package Descriptor information of the deployment package identified by URL passed in the request. Method: PUT API PATH: /deploy/v2/_packageDescriptor Request Body { \"url\" : \"deploymentPackageUrl\" } Example: { \"url\" : \"http://marketplace.eclipse.org/marketplace-client-intro?mpc_install=5514714\" } Responses 200 OK status 400 Bad request { \"nodeId\" : \"5514714\" , \"url\" : \"https://marketplace.eclipse.org/content/ai-wire-component-eclipse-kura-5\" , \"dpUrl\" : \"https://download.eclipse.org/kura/releases/5.3.0/org.eclipse.kura.wire.ai.component.provider-1.2.0.dp\" , \"minKuraVersion\" : \"5.1.0\" , \"maxKuraVersion\" : \"\" , \"currentKuraVersion\" : \"5.4.0\" , \"isCompatible\" : true }","title":"Deploy"},{"location":"references/rest-apis/rest-deploy-api/#rest-deploy-v2-api","text":"The DeploymentRestService APIs provides methods to manage the installed deployment packages. Identities with rest.deploy permissions can access these APIs.","title":"Rest Deploy v2 API"},{"location":"references/rest-apis/rest-deploy-api/#get-installed-packages","text":"Description: Provides the list of all the deployment packages installed and tracked by the framework. Method: GET API PATH: /deploy/v2/","title":"Get installed packages"},{"location":"references/rest-apis/rest-deploy-api/#responses","text":"200 OK status [{ \"name\" : \"packageName\" , \"version\" : \"packageVersion\" }]","title":"Responses"},{"location":"references/rest-apis/rest-deploy-api/#install-package-from-url","text":"Description: Installs the deployment package specified in the InstallRequest. If the request was already issued for the same InstallRequest, it returns the status of the installation process. Method: POST API PATH: /deploy/v2/_install","title":"Install package from URL"},{"location":"references/rest-apis/rest-deploy-api/#request-body","text":"{ \"url\" : \"deploymentPackageUrl\" } Example: { \"url\" : \"http://download.eclipse.org/kura/releases/4.1.0/org.eclipse.kura.demo.heater_1.0.500.dp\" } Please note that the url can refer to a .dp already in the device filesystem.","title":"Request Body"},{"location":"references/rest-apis/rest-deploy-api/#responses_1","text":"200 OK status 400 Bad request \"REQUEST_RECEIVED\"","title":"Responses"},{"location":"references/rest-apis/rest-deploy-api/#install-package-from-upload","text":"Description: Upload and install a Deployment Package. Method: POST API PATH: /deploy/v2/_upload","title":"Install package from upload"},{"location":"references/rest-apis/rest-deploy-api/#request-body_1","text":"The POST request body should be encoded in the multipart/form-data enctype , thus allowing for the upload of the Deployment Package file. The uploaded file is expected to be added in the file field of the form.","title":"Request Body"},{"location":"references/rest-apis/rest-deploy-api/#headers","text":"Content-Type : multipart/form-data","title":"Headers"},{"location":"references/rest-apis/rest-deploy-api/#body-formdata","text":"file","title":"Body (formdata)"},{"location":"references/rest-apis/rest-deploy-api/#example","text":"Example using curl : curl -X POST -k -u $USERNAME : $PASSWORD \\ --header 'Content-Type: multipart/form-data' \\ --form 'file=@\"/path/to/your/file.dp\"' \\ https:// $ADDRESS /services/deploy/v2/_upload","title":"Example"},{"location":"references/rest-apis/rest-deploy-api/#responses_2","text":"200 OK status 400 Bad request \"REQUEST_RECEIVED\"","title":"Responses"},{"location":"references/rest-apis/rest-deploy-api/#uninstall-a-package","text":"Description: Uninstalls the deployment package identified by the specified name. If the request was already issued, it reports the status of the uninstallation operation. Method: DELETE API PATH: /deploy/v2/{name}","title":"Uninstall a package"},{"location":"references/rest-apis/rest-deploy-api/#responses_3","text":"200 OK status \"REQUEST_RECEIVED\"","title":"Responses"},{"location":"references/rest-apis/rest-deploy-api/#get-eclipse-marketplace-package-descriptor","text":"Description: Provides the Eclipse Marketplace Package Descriptor information of the deployment package identified by URL passed in the request. Method: PUT API PATH: /deploy/v2/_packageDescriptor","title":"Get Eclipse Marketplace Package Descriptor"},{"location":"references/rest-apis/rest-deploy-api/#request-body_2","text":"{ \"url\" : \"deploymentPackageUrl\" } Example: { \"url\" : \"http://marketplace.eclipse.org/marketplace-client-intro?mpc_install=5514714\" }","title":"Request Body"},{"location":"references/rest-apis/rest-deploy-api/#responses_4","text":"200 OK status 400 Bad request { \"nodeId\" : \"5514714\" , \"url\" : \"https://marketplace.eclipse.org/content/ai-wire-component-eclipse-kura-5\" , \"dpUrl\" : \"https://download.eclipse.org/kura/releases/5.3.0/org.eclipse.kura.wire.ai.component.provider-1.2.0.dp\" , \"minKuraVersion\" : \"5.1.0\" , \"maxKuraVersion\" : \"\" , \"currentKuraVersion\" : \"5.4.0\" , \"isCompatible\" : true }","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/","text":"Rest Identity v1 API Note This API can also be accessed via the RequestHandler with app-id: IDN-V1 . The IdentityRestService APIs provides methods to manage the system identities. Unless otherwise specified, identities with rest.identity permissions can access these APIs. POST methods Create User Description: This method allows to create a new user in the system. Method: POST API PATH: services/identity/v1/identities Request { \"userName\" : \"username\" , \"password\" : \"password\" , \"passwordChangeNeeded\" : false , \"passwordAuthEnabled\" : true , \"permissions\" : [ \"rest.identity\" ] } Responses 200 OK status 400 Bad Request (Password strenght requirements not satisfied) 500 Internal Server Error Get User by Name Description: This method allows to get data about an user in the system. The only considered field is the userName. Method: POST API PATH: services/identity/v1/identities/byName Request { \"userName\" : \"username\" } Responses { \"userName\" : \"kura.user.username\" , \"passwordAuthEnabled\" : false , \"passwordChangeNeeded\" : false , \"permissions\" : [] } 200 OK status 404 userName does not exist 500 Internal Server Error GET methods Get defined permissions Description: This method allows you to get the list of the permissions defined in the system Method: GET API PATH: services/identity/v1/definedPermissions No specific permission is required to access this resource. Responses { \"permissions\" : [ \"rest.command\" , \"rest.inventory\" , \"rest.configuration\" , \"rest.tamper.detection\" , \"rest.security\" , \"kura.cloud.connection.admin\" , \"rest.position\" , \"kura.packages.admin\" , \"kura.device\" , \"rest.wires.admin\" , \"kura.admin\" , \"rest.keystores\" , \"rest.assets\" , \"rest.system\" , \"kura.maintenance\" , \"kura.wires.admin\" , \"rest.identity\" ] } 200 OK status 500 Internal Server Error Get users configuration Description: This method allows you to get the list of the users and their configuration on the system. Method: GET API PATH: services/identity/v1/identities Responses { \"userConfig\" : [ { \"userName\" : \"admin\" , \"passwordAuthEnabled\" : true , \"passwordChangeNeeded\" : false , \"permissions\" : [ \"kura.admin\" ] }, { \"userName\" : \"appadmin\" , \"passwordAuthEnabled\" : true , \"passwordChangeNeeded\" : true , \"permissions\" : [ \"kura.cloud.connection.admin\" , \"kura.packages.admin\" , \"kura.wires.admin\" ] } ] } 200 OK status 500 Internal Server Error Get password requirements Description: This method allows you to get the password requirements. Method: GET API PATH: services/identity/v1/passwordRequirements No specific permission is required to access this resource. Responses { \"passwordMinimumLength\" : 8 , \"passwordRequireDigits\" : false , \"passwordRequireSpecialChars\" : false , \"passwordRequireBothCases\" : false } 200 OK status 500 Internal Server Error PUT methods Update User Description: This method allows to update an existing user in the system. Method: PUT API PATH: services/identity/v1/identities Request { \"userName\" : \"username\" , \"password\" : \"password\" , \"passwordChangeNeeded\" : false , \"passwordAuthEnabled\" : true , \"permissions\" : [ \"rest.identity\" ] } Responses 200 OK status 400 Bad Request (Password strenght requirements not satisfied) 500 Internal Server Error DELETE methods Delete User Description: This method allows to delete an existing user in the system. The only considered field is the userName. Method: DELETE API PATH: services/identity/v1/identities Request { \"userName\" : \"username\" } Responses 200 OK status 404 userName does not exist 500 Internal Server Error","title":"Identity"},{"location":"references/rest-apis/rest-identity-api/#rest-identity-v1-api","text":"Note This API can also be accessed via the RequestHandler with app-id: IDN-V1 . The IdentityRestService APIs provides methods to manage the system identities. Unless otherwise specified, identities with rest.identity permissions can access these APIs.","title":"Rest Identity v1 API"},{"location":"references/rest-apis/rest-identity-api/#post-methods","text":"","title":"POST methods"},{"location":"references/rest-apis/rest-identity-api/#create-user","text":"Description: This method allows to create a new user in the system. Method: POST API PATH: services/identity/v1/identities","title":"Create User"},{"location":"references/rest-apis/rest-identity-api/#request","text":"{ \"userName\" : \"username\" , \"password\" : \"password\" , \"passwordChangeNeeded\" : false , \"passwordAuthEnabled\" : true , \"permissions\" : [ \"rest.identity\" ] }","title":"Request"},{"location":"references/rest-apis/rest-identity-api/#responses","text":"200 OK status 400 Bad Request (Password strenght requirements not satisfied) 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/#get-user-by-name","text":"Description: This method allows to get data about an user in the system. The only considered field is the userName. Method: POST API PATH: services/identity/v1/identities/byName","title":"Get User by Name"},{"location":"references/rest-apis/rest-identity-api/#request_1","text":"{ \"userName\" : \"username\" }","title":"Request"},{"location":"references/rest-apis/rest-identity-api/#responses_1","text":"{ \"userName\" : \"kura.user.username\" , \"passwordAuthEnabled\" : false , \"passwordChangeNeeded\" : false , \"permissions\" : [] } 200 OK status 404 userName does not exist 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/#get-methods","text":"","title":"GET methods"},{"location":"references/rest-apis/rest-identity-api/#get-defined-permissions","text":"Description: This method allows you to get the list of the permissions defined in the system Method: GET API PATH: services/identity/v1/definedPermissions No specific permission is required to access this resource.","title":"Get defined permissions"},{"location":"references/rest-apis/rest-identity-api/#responses_2","text":"{ \"permissions\" : [ \"rest.command\" , \"rest.inventory\" , \"rest.configuration\" , \"rest.tamper.detection\" , \"rest.security\" , \"kura.cloud.connection.admin\" , \"rest.position\" , \"kura.packages.admin\" , \"kura.device\" , \"rest.wires.admin\" , \"kura.admin\" , \"rest.keystores\" , \"rest.assets\" , \"rest.system\" , \"kura.maintenance\" , \"kura.wires.admin\" , \"rest.identity\" ] } 200 OK status 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/#get-users-configuration","text":"Description: This method allows you to get the list of the users and their configuration on the system. Method: GET API PATH: services/identity/v1/identities","title":"Get users configuration"},{"location":"references/rest-apis/rest-identity-api/#responses_3","text":"{ \"userConfig\" : [ { \"userName\" : \"admin\" , \"passwordAuthEnabled\" : true , \"passwordChangeNeeded\" : false , \"permissions\" : [ \"kura.admin\" ] }, { \"userName\" : \"appadmin\" , \"passwordAuthEnabled\" : true , \"passwordChangeNeeded\" : true , \"permissions\" : [ \"kura.cloud.connection.admin\" , \"kura.packages.admin\" , \"kura.wires.admin\" ] } ] } 200 OK status 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/#get-password-requirements","text":"Description: This method allows you to get the password requirements. Method: GET API PATH: services/identity/v1/passwordRequirements No specific permission is required to access this resource.","title":"Get password requirements"},{"location":"references/rest-apis/rest-identity-api/#responses_4","text":"{ \"passwordMinimumLength\" : 8 , \"passwordRequireDigits\" : false , \"passwordRequireSpecialChars\" : false , \"passwordRequireBothCases\" : false } 200 OK status 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/#put-methods","text":"","title":"PUT methods"},{"location":"references/rest-apis/rest-identity-api/#update-user","text":"Description: This method allows to update an existing user in the system. Method: PUT API PATH: services/identity/v1/identities","title":"Update User"},{"location":"references/rest-apis/rest-identity-api/#request_2","text":"{ \"userName\" : \"username\" , \"password\" : \"password\" , \"passwordChangeNeeded\" : false , \"passwordAuthEnabled\" : true , \"permissions\" : [ \"rest.identity\" ] }","title":"Request"},{"location":"references/rest-apis/rest-identity-api/#responses_5","text":"200 OK status 400 Bad Request (Password strenght requirements not satisfied) 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-identity-api/#delete-methods","text":"","title":"DELETE methods"},{"location":"references/rest-apis/rest-identity-api/#delete-user","text":"Description: This method allows to delete an existing user in the system. The only considered field is the userName. Method: DELETE API PATH: services/identity/v1/identities","title":"Delete User"},{"location":"references/rest-apis/rest-identity-api/#request_3","text":"{ \"userName\" : \"username\" }","title":"Request"},{"location":"references/rest-apis/rest-identity-api/#responses_6","text":"200 OK status 404 userName does not exist 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-inventory-api/","text":"Rest Inventory v1 API Global GET Inventory Summary Method: GET Description: returns a list of All Inventory Items API PATH: /services/inventory/v1/inventory Response 200 OK { \"inventory\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"com.eclipsesource.jaxrs.provider.gson\" , \"version\" : \"2.3.0.201602281253\" , \"type\" : \"BUNDLE\" }, { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"type\" : \"DP\" } ] } Bundles GET bundles Method: GET Description: returns a list of bundles. API PATH: /services/inventory/v1/bundles Response 200 OK { \"bundles\" :[ { \"name\" : \"org.eclipse.osgi\" , \"version\" : \"3.16.0.v20200828-0759\" , \"id\" : 0 , \"state\" : \"ACTIVE\" , \"signed\" : true }, { \"name\" : \"org.eclipse.equinox.cm\" , \"version\" : \"1.4.400.v20200422-1833\" , \"id\" : 1 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } Start bundle Method: POST API PATH: /services/inventory/v1/bundles/_start Request Body { \"name\" : \"org.eclipse.osgi\" , } Responses 200 OK status 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Stop bundle Method: POST API PATH: /services/inventory/v1/bundles/_stop Request Body { \"name\" : \"org.eclipse.osgi\" , } Responses 200 OK status 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Deployment Packages GET packages Method: GET Description: returns a list of deployment packages. API PATH: /services/inventory/v1/deploymentPackages Response 200 OK { \"deploymentPackages\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"signed\" : false , \"bundles\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"id\" : 171 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } ] } System Packages (DEB/RPM/APK) GET System Packages Method: GET Description: returns a list of system packages. API PATH: /services/inventory/v1/systemPackages Response 200 OK { \"systemPackages\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"alsa-utils\" , \"version\" : \"1.1.8-2\" , \"type\" : \"DEB\" }, { \"name\" : \"ansible\" , \"version\" : \"2.7.7+dfsg-1\" , \"type\" : \"DEB\" }, { \"name\" : \"apparmor\" , \"version\" : \"2.13.2-10\" , \"type\" : \"DEB\" }, { \"name\" : \"apt\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-listchanges\" , \"version\" : \"3.19\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-transport-https\" , \"version\" : \"1.8.2.2\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-utils\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" } ] } Containers GET Containers Method: Get Description: returns a list of Containers. API PATH: /services/inventory/v1/containers Response 200 OK { \"containers\" : [ { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , \"type\" : \"DOCKER\" , \"state\" : \"active\" } ] } Start container Method: POST API PATH: /services/inventory/v1/containers/_start Request Body { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , } Responses 200 OK 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Stop container Method: POST API PATH: /services/inventory/v1/containers/_stop Request Body { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , } Responses 200 OK 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error Images Images Images Method: Get Description: returns a list of Images. API PATH: /services/inventory/v1/images Response 200 OK { \"containers\" : [ { \"name\" : \"nginx\" , \"version\" : \"latest\" , \"type\" : \"ContainerImage\" , } ] } Delete Image Method: POST API PATH: /services/inventory/v1/images/_delete Request Body { \"name\" : \"nginx\" , \"version\" : \"latest\" , } Responses 200 OK 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error States Bundle States - `ACTIVE`: Container is running - `INSTALLED`: Container is starting - `UNINSTALLED`: Container has failed, or is stopped - `UNKNOWN`: Container state can not be determined Container States - `active`: Container is running - `installed`: Container is starting - `uninstalled`: Container has failed, or is stopped - `unknown`: Container state can not be determined","title":"Inventory"},{"location":"references/rest-apis/rest-inventory-api/#rest-inventory-v1-api","text":"","title":"Rest Inventory v1 API"},{"location":"references/rest-apis/rest-inventory-api/#global","text":"","title":"Global"},{"location":"references/rest-apis/rest-inventory-api/#get-inventory-summary","text":"Method: GET Description: returns a list of All Inventory Items API PATH: /services/inventory/v1/inventory","title":"GET Inventory Summary"},{"location":"references/rest-apis/rest-inventory-api/#response","text":"200 OK { \"inventory\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"com.eclipsesource.jaxrs.provider.gson\" , \"version\" : \"2.3.0.201602281253\" , \"type\" : \"BUNDLE\" }, { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"type\" : \"DP\" } ] }","title":"Response"},{"location":"references/rest-apis/rest-inventory-api/#bundles","text":"","title":"Bundles"},{"location":"references/rest-apis/rest-inventory-api/#get-bundles","text":"Method: GET Description: returns a list of bundles. API PATH: /services/inventory/v1/bundles","title":"GET bundles"},{"location":"references/rest-apis/rest-inventory-api/#response_1","text":"200 OK { \"bundles\" :[ { \"name\" : \"org.eclipse.osgi\" , \"version\" : \"3.16.0.v20200828-0759\" , \"id\" : 0 , \"state\" : \"ACTIVE\" , \"signed\" : true }, { \"name\" : \"org.eclipse.equinox.cm\" , \"version\" : \"1.4.400.v20200422-1833\" , \"id\" : 1 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] }","title":"Response"},{"location":"references/rest-apis/rest-inventory-api/#start-bundle","text":"Method: POST API PATH: /services/inventory/v1/bundles/_start","title":"Start bundle"},{"location":"references/rest-apis/rest-inventory-api/#request-body","text":"{ \"name\" : \"org.eclipse.osgi\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-inventory-api/#responses","text":"200 OK status 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-inventory-api/#stop-bundle","text":"Method: POST API PATH: /services/inventory/v1/bundles/_stop","title":"Stop bundle"},{"location":"references/rest-apis/rest-inventory-api/#request-body_1","text":"{ \"name\" : \"org.eclipse.osgi\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-inventory-api/#responses_1","text":"200 OK status 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-inventory-api/#deployment-packages","text":"","title":"Deployment Packages"},{"location":"references/rest-apis/rest-inventory-api/#get-packages","text":"Method: GET Description: returns a list of deployment packages. API PATH: /services/inventory/v1/deploymentPackages","title":"GET packages"},{"location":"references/rest-apis/rest-inventory-api/#response_2","text":"200 OK { \"deploymentPackages\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"signed\" : false , \"bundles\" :[ { \"name\" : \"org.eclipse.kura.example.beacon\" , \"version\" : \"1.0.500\" , \"id\" : 171 , \"state\" : \"ACTIVE\" , \"signed\" : false } ] } ] }","title":"Response"},{"location":"references/rest-apis/rest-inventory-api/#system-packages-debrpmapk","text":"","title":"System Packages (DEB/RPM/APK)"},{"location":"references/rest-apis/rest-inventory-api/#get-system-packages","text":"Method: GET Description: returns a list of system packages. API PATH: /services/inventory/v1/systemPackages","title":"GET System Packages"},{"location":"references/rest-apis/rest-inventory-api/#response_3","text":"200 OK { \"systemPackages\" :[ { \"name\" : \"adduser\" , \"version\" : \"3.118\" , \"type\" : \"DEB\" }, { \"name\" : \"alsa-utils\" , \"version\" : \"1.1.8-2\" , \"type\" : \"DEB\" }, { \"name\" : \"ansible\" , \"version\" : \"2.7.7+dfsg-1\" , \"type\" : \"DEB\" }, { \"name\" : \"apparmor\" , \"version\" : \"2.13.2-10\" , \"type\" : \"DEB\" }, { \"name\" : \"apt\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-listchanges\" , \"version\" : \"3.19\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-transport-https\" , \"version\" : \"1.8.2.2\" , \"type\" : \"DEB\" }, { \"name\" : \"apt-utils\" , \"version\" : \"1.8.2.1\" , \"type\" : \"DEB\" } ] }","title":"Response"},{"location":"references/rest-apis/rest-inventory-api/#containers","text":"","title":"Containers"},{"location":"references/rest-apis/rest-inventory-api/#get-containers","text":"Method: Get Description: returns a list of Containers. API PATH: /services/inventory/v1/containers","title":"GET Containers"},{"location":"references/rest-apis/rest-inventory-api/#response_4","text":"200 OK { \"containers\" : [ { \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , \"type\" : \"DOCKER\" , \"state\" : \"active\" } ] }","title":"Response"},{"location":"references/rest-apis/rest-inventory-api/#start-container","text":"Method: POST API PATH: /services/inventory/v1/containers/_start","title":"Start container"},{"location":"references/rest-apis/rest-inventory-api/#request-body_2","text":"{ \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-inventory-api/#responses_2","text":"200 OK 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-inventory-api/#stop-container","text":"Method: POST API PATH: /services/inventory/v1/containers/_stop","title":"Stop container"},{"location":"references/rest-apis/rest-inventory-api/#request-body_3","text":"{ \"name\" : \"container_1\" , \"version\" : \"nginx:latest\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-inventory-api/#responses_3","text":"200 OK 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-inventory-api/#images","text":"","title":"Images"},{"location":"references/rest-apis/rest-inventory-api/#images-images","text":"Method: Get Description: returns a list of Images. API PATH: /services/inventory/v1/images","title":"Images Images"},{"location":"references/rest-apis/rest-inventory-api/#response_5","text":"200 OK { \"containers\" : [ { \"name\" : \"nginx\" , \"version\" : \"latest\" , \"type\" : \"ContainerImage\" , } ] }","title":"Response"},{"location":"references/rest-apis/rest-inventory-api/#delete-image","text":"Method: POST API PATH: /services/inventory/v1/images/_delete","title":"Delete Image"},{"location":"references/rest-apis/rest-inventory-api/#request-body_4","text":"{ \"name\" : \"nginx\" , \"version\" : \"latest\" , }","title":"Request Body"},{"location":"references/rest-apis/rest-inventory-api/#responses_4","text":"200 OK 400 Bad Request (Malformed Client JSON) 404 Resource Not Found 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-inventory-api/#states","text":"","title":"States"},{"location":"references/rest-apis/rest-inventory-api/#bundle-states","text":"- `ACTIVE`: Container is running - `INSTALLED`: Container is starting - `UNINSTALLED`: Container has failed, or is stopped - `UNKNOWN`: Container state can not be determined","title":"Bundle States"},{"location":"references/rest-apis/rest-inventory-api/#container-states","text":"- `active`: Container is running - `installed`: Container is starting - `uninstalled`: Container has failed, or is stopped - `unknown`: Container state can not be determined","title":"Container States"},{"location":"references/rest-apis/rest-network-configuration-api/","text":"Network Configuration V1 REST APIs This section describes the networkConfiguration/v1 REST APIs, that allow to retrieve information about the network configuration of the running system. The services pid for which it's possible to obtain and update the configurations are: org.eclipse.kura.net.admin.NetworkConfigurationService : which manages the network configuration of the system, so the network interfaces along with their network configuration (Ip4/Ip6 settings, DHCP, Nat, and so on) org.eclipse.kura.net.admin.FirewallConfigurationService : which manages the Ip4 firewall configurations (open ports, port forwarding and masquerading for IPv4 protocol) org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6 : which manages the Ip6 firewall configurations (open ports, port forwarding and masquerading for IPv6 protocol) To access these REST APIs, an identity with rest.network.configuration permission assigned is required. Request definitions GET/configurableComponents GET/configurableComponents/configurations POST/configurableComponents/configurations/byPid POST/configurableComponents/configurations/byPid/_default PUT/configurableComponents/configurations/_update GET/factoryComponents POST/factoryComponents DEL/factoryComponents/byPid GET/factoryComponents/ocd POST/factoryComponents/ocd/byFactoryPid JSON definitions BatchFailureReport ComponentConfigurationList GenericFailureReport PidSet UpdateComponentConfigurationRequest Request definitions GET/configurableComponents REST API path : /services/networkConfiguration/v1/configurableComponents description : Returns the list of the available services that manages the network configurations on the system. responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport GET/configurableComponents/configurations REST API path : /services/networkConfiguration/v1/configurableComponents/configurations description : Returns all of network component configurations available on the system. This request will return the pid , ocd and properties . responses : 200 description : The request succeeded. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/configurableComponents/configurations/byPid REST API path : /services/networkConfiguration/v1/configurableComponents/configurations/byPid description : Returns a user selected set of network configurations. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the network configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/configurableComponents/configurations/byPid/_default REST API path : /services/networkConfiguration/v1/configurableComponents/configurations/byPid/_default description : Returns the default network configuration for a given set of network component pids. The default configurations are generated basing on component definition only, user applied modifications will not be taken into account. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the network configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport PUT/configurableComponents/configurations/_update REST API path : /services/networkConfiguration/v1/configurableComponents/configurations/_update description : Updates a given set of network component configurations. This request can be also used to apply a network configuration snapshot. request body : UpdateComponentConfigurationRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: update:$pid for component update operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport Warning factoryComponents endopoints are available in the current version of Kura for future compatibility. Currently, as of Kura 5.4.0, there are no network related components that are factory components. The endopoints that should return a list of pids will always return an empty array, while those that should create, delete or update a component will always return a 500 error. GET/factoryComponents REST API path : /services/networkConfiguration/v1/factoryComponents description : Returns the ids of the network component factories available on the device. responses : 200 description : The factory pid set. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/factoryComponents REST API path : /services/networkConfiguration/v1/factoryComponents description : This is a batch request that allows to create one or more network factory component instances and optionally create a new snapshot. request body : CreateFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: create:$pid for component creation operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport DEL/factoryComponents/byPid REST API path : /services/networkConfiguration/v1/factoryComponents/byPid description : This is a batch request that allows to delete one or more network factory component instances and optionally create a new snapshot. request body : DeleteFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: delete:$pid for component delete operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport GET/factoryComponents/ocd REST API path : /services/networkConfiguration/v1/factoryComponents/ocd description : Returns the OCD of the network components created by the factories available on the device without the need of creating an instance. This request returns the information related to all available network factories. responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport POST/factoryComponents/ocd/byFactoryPid REST API path : /services/networkConfiguration/v1/factoryComponents/ocd/byFactoryPid description : Returns the OCD of the components created by the factories available on the device without the need of creating an instance. This request returns the information related to a user selected set of factories. request body : PidSet responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. If the OCD for a given factory pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport JSON definitions BatchFailureReport An object that is returned by requests that involve multiple operations, when at least one operation failed. This object report an error message for each of the operations that failed. The operations are identified by an id, see request documentation for more details. If an operation is not listed by this object, then the operation succeeded. Properties : failures : array The list of operations that failed. array elements: object An object reporting details about an operation failure. Properties : id : string An identifier of the failed operation. message : string A message describing the failure. { \"failures\" : [ { \"id\" : \"create:testComponent\" , \"message\" : \"Invalid parameter. pid testComponent already exists\" }, { \"id\" : \"create:otherComponent\" , \"message\" : \"Invalid parameter. pid otherComponent already exists\" } ] } ComponentConfigurationList Represents a list of component configurations. Properties : configs : array The component configurations array elements: object ComponentConfiguration { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"definition\" : { \"ad\" : [ { \"name\" : \"firewall.open.ports\" , \"description\" : \"The list of firewall opened ports.\" , \"id\" : \"firewall.open.ports\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.port.forwarding\" , \"description\" : \"The list of firewall port forwarding rules.\" , \"id\" : \"firewall.port.forwarding\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.nat\" , \"description\" : \"The list of firewall NAT rules.\" , \"id\" : \"firewall.nat\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true } ], \"name\" : \"FirewallConfigurationService\" , \"description\" : \"Firewall Configuration Service\" , \"id\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" }, \"properties\" : { \"firewall.open.ports\" : { \"value\" : \"22,tcp,0.0.0.0/0,eth0,,,,#;22,tcp,0.0.0.0/0,wlan0,,,,#;443,tcp,0.0.0.0/0,eth0,,,,#;443,tcp,0.0.0.0/0,wlan0,,,,#;4443,tcp,0.0.0.0/0,eth0,,,,#;4443,tcp,0.0.0.0/0,wlan0,,,,#;1450,tcp,0.0.0.0/0,eth0,,,,#;1450,tcp,0.0.0.0/0,wlan0,,,,#;5002,tcp,127.0.0.1/32,,,,,#;53,udp,0.0.0.0/0,eth0,,,,#;53,udp,0.0.0.0/0,wlan0,,,,#;67,udp,0.0.0.0/0,eth0,,,,#;67,udp,0.0.0.0/0,wlan0,,,,#;8000,tcp,0.0.0.0/0,eth0,,,,#;8000,tcp,0.0.0.0/0,wlan0,,,,#\" , \"type\" : \"STRING\" }, \"firewall.port.forwarding\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"firewall.nat\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"type\" : \"STRING\" } } }, { \"pid\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"definition\" : { \"ad\" : [ { \"name\" : \"firewall.ipv6.open.ports\" , \"description\" : \"The list of firewall opened ports.\" , \"id\" : \"firewall.ipv6.open.ports\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.ipv6.port.forwarding\" , \"description\" : \"The list of firewall port forwarding rules.\" , \"id\" : \"firewall.ipv6.port.forwarding\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.ipv6.nat\" , \"description\" : \"The list of firewall NAT rules.\" , \"id\" : \"firewall.ipv6.nat\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true } ], \"name\" : \"FirewallConfigurationServiceIPv6\" , \"description\" : \"Firewall Configuration Service IPV6\" , \"id\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" }, \"properties\" : { \"firewall.ipv6.port.forwarding\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"firewall.ipv6.nat\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"firewall.ipv6.open.ports\" : { \"value\" : \"1234,tcp,0:0:0:0:0:0:0:0/0,,,,,#\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"type\" : \"STRING\" } } } ] } GenericFailureReport An object reporting a failure message. Properties : message : string A message describing the failure. { \"message\" : \"An unexpected error occurred.\" } PidSet Represents a set of pids or factory pids. Properties : pids : array The set of pids array elements: string The pid { \"pids\" : [ \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"org.eclipse.kura.net.admin.NetworkConfigurationService\" , \"org.eclipse.kura.net.admin.FirewallConfigurationService\" ] } UpdateComponentConfigurationRequest An object that describes a set of configurations that need to be updated. Properties : configs : array The configurations to be updated. The ocd field can be omitted, it will be ignored if specified. array elements: object ComponentConfiguration takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the component configurations have been applied. { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"properties\" : { \"firewall.ipv6.open.ports\" : { \"value\" : \"1234,tcp,0:0:0:0:0:0:0:0/0,,,,,#\" , \"type\" : \"STRING\" } } }, { \"pid\" : \"org.eclipse.kura.net.admin.NetworkConfigurationService\" , \"properties\" : { \"net.interface.eth0.config.ip6.status\" : { \"value\" : \"netIPv6StatusUnmanaged\" , \"type\" : \"STRING\" } } } ], \"takeSnapshot\" : true }","title":"Network Configuration"},{"location":"references/rest-apis/rest-network-configuration-api/#network-configuration-v1-rest-apis","text":"This section describes the networkConfiguration/v1 REST APIs, that allow to retrieve information about the network configuration of the running system. The services pid for which it's possible to obtain and update the configurations are: org.eclipse.kura.net.admin.NetworkConfigurationService : which manages the network configuration of the system, so the network interfaces along with their network configuration (Ip4/Ip6 settings, DHCP, Nat, and so on) org.eclipse.kura.net.admin.FirewallConfigurationService : which manages the Ip4 firewall configurations (open ports, port forwarding and masquerading for IPv4 protocol) org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6 : which manages the Ip6 firewall configurations (open ports, port forwarding and masquerading for IPv6 protocol) To access these REST APIs, an identity with rest.network.configuration permission assigned is required. Request definitions GET/configurableComponents GET/configurableComponents/configurations POST/configurableComponents/configurations/byPid POST/configurableComponents/configurations/byPid/_default PUT/configurableComponents/configurations/_update GET/factoryComponents POST/factoryComponents DEL/factoryComponents/byPid GET/factoryComponents/ocd POST/factoryComponents/ocd/byFactoryPid JSON definitions BatchFailureReport ComponentConfigurationList GenericFailureReport PidSet UpdateComponentConfigurationRequest","title":"Network Configuration V1 REST APIs"},{"location":"references/rest-apis/rest-network-configuration-api/#request-definitions","text":"","title":"Request definitions"},{"location":"references/rest-apis/rest-network-configuration-api/#getconfigurablecomponents","text":"REST API path : /services/networkConfiguration/v1/configurableComponents description : Returns the list of the available services that manages the network configurations on the system. responses : 200 description : The request succeeded. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/configurableComponents"},{"location":"references/rest-apis/rest-network-configuration-api/#getconfigurablecomponentsconfigurations","text":"REST API path : /services/networkConfiguration/v1/configurableComponents/configurations description : Returns all of network component configurations available on the system. This request will return the pid , ocd and properties . responses : 200 description : The request succeeded. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/configurableComponents/configurations"},{"location":"references/rest-apis/rest-network-configuration-api/#postconfigurablecomponentsconfigurationsbypid","text":"REST API path : /services/networkConfiguration/v1/configurableComponents/configurations/byPid description : Returns a user selected set of network configurations. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the network configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/configurableComponents/configurations/byPid"},{"location":"references/rest-apis/rest-network-configuration-api/#postconfigurablecomponentsconfigurationsbypid_default","text":"REST API path : /services/networkConfiguration/v1/configurableComponents/configurations/byPid/_default description : Returns the default network configuration for a given set of network component pids. The default configurations are generated basing on component definition only, user applied modifications will not be taken into account. This request will return the pid , ocd and properties . request body : PidSet responses : 200 description : The request succeeded. If the network configuration for a given pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/configurableComponents/configurations/byPid/_default"},{"location":"references/rest-apis/rest-network-configuration-api/#putconfigurablecomponentsconfigurations_update","text":"REST API path : /services/networkConfiguration/v1/configurableComponents/configurations/_update description : Updates a given set of network component configurations. This request can be also used to apply a network configuration snapshot. request body : UpdateComponentConfigurationRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: update:$pid for component update operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport Warning factoryComponents endopoints are available in the current version of Kura for future compatibility. Currently, as of Kura 5.4.0, there are no network related components that are factory components. The endopoints that should return a list of pids will always return an empty array, while those that should create, delete or update a component will always return a 500 error.","title":"PUT/configurableComponents/configurations/_update"},{"location":"references/rest-apis/rest-network-configuration-api/#getfactorycomponents","text":"REST API path : /services/networkConfiguration/v1/factoryComponents description : Returns the ids of the network component factories available on the device. responses : 200 description : The factory pid set. response body : PidSet 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/factoryComponents"},{"location":"references/rest-apis/rest-network-configuration-api/#postfactorycomponents","text":"REST API path : /services/networkConfiguration/v1/factoryComponents description : This is a batch request that allows to create one or more network factory component instances and optionally create a new snapshot. request body : CreateFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: create:$pid for component creation operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"POST/factoryComponents"},{"location":"references/rest-apis/rest-network-configuration-api/#delfactorycomponentsbypid","text":"REST API path : /services/networkConfiguration/v1/factoryComponents/byPid description : This is a batch request that allows to delete one or more network factory component instances and optionally create a new snapshot. request body : DeleteFactoryComponentConfigurationsRequest responses : 200 description : The request succeeded. 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : In case of processing errors, the device will attempt to return a detailed error response containing a message describing the failure reason for each operation. The operation ids are the following: delete:$pid for component delete operations, where $pid is the pid of the instance, and snapshot , for the snapshot creation operation. In case of an unexpected failure, a generic error response will be returned. response body : Variants : object GenericFailureReport object BatchFailureReport","title":"DEL/factoryComponents/byPid"},{"location":"references/rest-apis/rest-network-configuration-api/#getfactorycomponentsocd","text":"REST API path : /services/networkConfiguration/v1/factoryComponents/ocd description : Returns the OCD of the network components created by the factories available on the device without the need of creating an instance. This request returns the information related to all available network factories. responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. response body : ComponentConfigurationList 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"GET/factoryComponents/ocd"},{"location":"references/rest-apis/rest-network-configuration-api/#postfactorycomponentsocdbyfactorypid","text":"REST API path : /services/networkConfiguration/v1/factoryComponents/ocd/byFactoryPid description : Returns the OCD of the components created by the factories available on the device without the need of creating an instance. This request returns the information related to a user selected set of factories. request body : PidSet responses : 200 description : The request succeeded. The pid property of the received configurations will report the factory pid, the ocd field will contain the definition, the properties field will not be present. If the OCD for a given factory pid cannot be found, it will not be included in the result. response body : ComponentConfigurationList 400 description : The request body is not valid JSON or it contains invalid parameters. response body : GenericFailureReport 500 description : An unexpected internal error occurred. response body : GenericFailureReport","title":"POST/factoryComponents/ocd/byFactoryPid"},{"location":"references/rest-apis/rest-network-configuration-api/#json-definitions","text":"","title":"JSON definitions"},{"location":"references/rest-apis/rest-network-configuration-api/#batchfailurereport","text":"An object that is returned by requests that involve multiple operations, when at least one operation failed. This object report an error message for each of the operations that failed. The operations are identified by an id, see request documentation for more details. If an operation is not listed by this object, then the operation succeeded. Properties : failures : array The list of operations that failed. array elements: object An object reporting details about an operation failure. Properties : id : string An identifier of the failed operation. message : string A message describing the failure. { \"failures\" : [ { \"id\" : \"create:testComponent\" , \"message\" : \"Invalid parameter. pid testComponent already exists\" }, { \"id\" : \"create:otherComponent\" , \"message\" : \"Invalid parameter. pid otherComponent already exists\" } ] }","title":"BatchFailureReport"},{"location":"references/rest-apis/rest-network-configuration-api/#componentconfigurationlist","text":"Represents a list of component configurations. Properties : configs : array The component configurations array elements: object ComponentConfiguration { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"definition\" : { \"ad\" : [ { \"name\" : \"firewall.open.ports\" , \"description\" : \"The list of firewall opened ports.\" , \"id\" : \"firewall.open.ports\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.port.forwarding\" , \"description\" : \"The list of firewall port forwarding rules.\" , \"id\" : \"firewall.port.forwarding\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.nat\" , \"description\" : \"The list of firewall NAT rules.\" , \"id\" : \"firewall.nat\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true } ], \"name\" : \"FirewallConfigurationService\" , \"description\" : \"Firewall Configuration Service\" , \"id\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" }, \"properties\" : { \"firewall.open.ports\" : { \"value\" : \"22,tcp,0.0.0.0/0,eth0,,,,#;22,tcp,0.0.0.0/0,wlan0,,,,#;443,tcp,0.0.0.0/0,eth0,,,,#;443,tcp,0.0.0.0/0,wlan0,,,,#;4443,tcp,0.0.0.0/0,eth0,,,,#;4443,tcp,0.0.0.0/0,wlan0,,,,#;1450,tcp,0.0.0.0/0,eth0,,,,#;1450,tcp,0.0.0.0/0,wlan0,,,,#;5002,tcp,127.0.0.1/32,,,,,#;53,udp,0.0.0.0/0,eth0,,,,#;53,udp,0.0.0.0/0,wlan0,,,,#;67,udp,0.0.0.0/0,eth0,,,,#;67,udp,0.0.0.0/0,wlan0,,,,#;8000,tcp,0.0.0.0/0,eth0,,,,#;8000,tcp,0.0.0.0/0,wlan0,,,,#\" , \"type\" : \"STRING\" }, \"firewall.port.forwarding\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"firewall.nat\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"type\" : \"STRING\" } } }, { \"pid\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"definition\" : { \"ad\" : [ { \"name\" : \"firewall.ipv6.open.ports\" , \"description\" : \"The list of firewall opened ports.\" , \"id\" : \"firewall.ipv6.open.ports\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.ipv6.port.forwarding\" , \"description\" : \"The list of firewall port forwarding rules.\" , \"id\" : \"firewall.ipv6.port.forwarding\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true }, { \"name\" : \"firewall.ipv6.nat\" , \"description\" : \"The list of firewall NAT rules.\" , \"id\" : \"firewall.ipv6.nat\" , \"type\" : \"STRING\" , \"cardinality\" : 0 , \"defaultValue\" : \"\" , \"isRequired\" : true } ], \"name\" : \"FirewallConfigurationServiceIPv6\" , \"description\" : \"Firewall Configuration Service IPV6\" , \"id\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" }, \"properties\" : { \"firewall.ipv6.port.forwarding\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"firewall.ipv6.nat\" : { \"value\" : \"\" , \"type\" : \"STRING\" }, \"firewall.ipv6.open.ports\" : { \"value\" : \"1234,tcp,0:0:0:0:0:0:0:0/0,,,,,#\" , \"type\" : \"STRING\" }, \"kura.service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"type\" : \"STRING\" }, \"service.pid\" : { \"value\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"type\" : \"STRING\" } } } ] }","title":"ComponentConfigurationList"},{"location":"references/rest-apis/rest-network-configuration-api/#genericfailurereport","text":"An object reporting a failure message. Properties : message : string A message describing the failure. { \"message\" : \"An unexpected error occurred.\" }","title":"GenericFailureReport"},{"location":"references/rest-apis/rest-network-configuration-api/#pidset","text":"Represents a set of pids or factory pids. Properties : pids : array The set of pids array elements: string The pid { \"pids\" : [ \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"org.eclipse.kura.net.admin.NetworkConfigurationService\" , \"org.eclipse.kura.net.admin.FirewallConfigurationService\" ] }","title":"PidSet"},{"location":"references/rest-apis/rest-network-configuration-api/#updatecomponentconfigurationrequest","text":"An object that describes a set of configurations that need to be updated. Properties : configs : array The configurations to be updated. The ocd field can be omitted, it will be ignored if specified. array elements: object ComponentConfiguration takeSnapshot : bool optional The true value will be used as default if not explicitly specified Defines whether a new snapshot should be created after that the component configurations have been applied. { \"configs\" : [ { \"pid\" : \"org.eclipse.kura.net.admin.ipv6.FirewallConfigurationServiceIPv6\" , \"properties\" : { \"firewall.ipv6.open.ports\" : { \"value\" : \"1234,tcp,0:0:0:0:0:0:0:0/0,,,,,#\" , \"type\" : \"STRING\" } } }, { \"pid\" : \"org.eclipse.kura.net.admin.NetworkConfigurationService\" , \"properties\" : { \"net.interface.eth0.config.ip6.status\" : { \"value\" : \"netIPv6StatusUnmanaged\" , \"type\" : \"STRING\" } } } ], \"takeSnapshot\" : true }","title":"UpdateComponentConfigurationRequest"},{"location":"references/rest-apis/rest-position-api/","text":"Note This API can also be accessed via the RequestHandler with app-id: POS-V1 . Get Position Method: GET API PATH: /services/position/v1/position Responses 200 OK status { //longitude of this position in degrees. \"longitude\" : 7.729571119959449 , //latitude of this position in degrees. \"latitude\" : 50.45345802194789 , //altitude of this position in meters. \"altitude\" : 1000.0 , //the ground speed of this position in meters per second. \"speed\" : 1000.0 , //the track of this position in degrees as a compass heading. \"track\" : 1000.0 } 500 Internal Server Error will also occur when GPS Position is not locked { \"message\" : \"Service unavailable. Position is not locked.\" } Get Date Time Method: GET API PATH: /services/position/v1/dateTime Responses 200 OK status { //The dateTime string is formatted according to the ISO 8601 standard, and will always be in the UTC timezone. \"dateTime\" : \"2023-07-19T18:26:38Z\" } 500 Internal Server Error will also occur when GPS Position is not locked { \"message\" : \"Service unavailable. Position is not locked.\" } Get Is Position Locked Method: GET API PATH: /services/position/v1/isLocked Responses 200 OK status { \"islocked\" : false } - 500 Internal Server Error","title":"Position"},{"location":"references/rest-apis/rest-position-api/#get-position","text":"Method: GET API PATH: /services/position/v1/position","title":"Get Position"},{"location":"references/rest-apis/rest-position-api/#responses","text":"200 OK status { //longitude of this position in degrees. \"longitude\" : 7.729571119959449 , //latitude of this position in degrees. \"latitude\" : 50.45345802194789 , //altitude of this position in meters. \"altitude\" : 1000.0 , //the ground speed of this position in meters per second. \"speed\" : 1000.0 , //the track of this position in degrees as a compass heading. \"track\" : 1000.0 } 500 Internal Server Error will also occur when GPS Position is not locked { \"message\" : \"Service unavailable. Position is not locked.\" }","title":"Responses"},{"location":"references/rest-apis/rest-position-api/#get-date-time","text":"Method: GET API PATH: /services/position/v1/dateTime","title":"Get Date Time"},{"location":"references/rest-apis/rest-position-api/#responses_1","text":"200 OK status { //The dateTime string is formatted according to the ISO 8601 standard, and will always be in the UTC timezone. \"dateTime\" : \"2023-07-19T18:26:38Z\" } 500 Internal Server Error will also occur when GPS Position is not locked { \"message\" : \"Service unavailable. Position is not locked.\" }","title":"Responses"},{"location":"references/rest-apis/rest-position-api/#get-is-position-locked","text":"Method: GET API PATH: /services/position/v1/isLocked","title":"Get Is Position Locked"},{"location":"references/rest-apis/rest-position-api/#responses_2","text":"200 OK status { \"islocked\" : false } - 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-security-api/","text":"Rest Security v1 API Note This API can also be accessed via the RequestHandler with app-id: SEC-V1 . This REST API requires a SecurityService implementation to be registered on the framework, which is not provided by the standard Kura distribution. The SecurityRestService APIs provides methods to manage the system security. Identities with rest.security permissions can access these APIs. POST methods Security policy fingerprint reload Description: This method allows the reload of the security policy's fingerprint Method: POST API PATH: services/security/v1/security-policy-fingerprint/reload Responses 200 OK status 500 Internal Server Error (also returned when no SecurityService implementation is available) Reload command line fingerprint Description: This method allows the reload of the command line fingerprint Method: POST API PATH: services/security/v1/command-line-fingerprint/reload Responses 200 OK status 500 Internal Server Error (also returned when no SecurityService implementation is available) GET methods Debug enabled Note Access to this resource doesn't require the rest.security permission. Description: This method allows you to check whether debug mode is enabled in the system. Method: GET API PATH: services/security/v1/debug-enabled Responses 200 OK status { \"enabled\" : true } 500 Internal Server Error (also returned when no SecurityService implementation is available)","title":"Security"},{"location":"references/rest-apis/rest-security-api/#rest-security-v1-api","text":"Note This API can also be accessed via the RequestHandler with app-id: SEC-V1 . This REST API requires a SecurityService implementation to be registered on the framework, which is not provided by the standard Kura distribution. The SecurityRestService APIs provides methods to manage the system security. Identities with rest.security permissions can access these APIs.","title":"Rest Security v1 API"},{"location":"references/rest-apis/rest-security-api/#post-methods","text":"","title":"POST methods"},{"location":"references/rest-apis/rest-security-api/#security-policy-fingerprint-reload","text":"Description: This method allows the reload of the security policy's fingerprint Method: POST API PATH: services/security/v1/security-policy-fingerprint/reload","title":"Security policy fingerprint reload"},{"location":"references/rest-apis/rest-security-api/#responses","text":"200 OK status 500 Internal Server Error (also returned when no SecurityService implementation is available)","title":"Responses"},{"location":"references/rest-apis/rest-security-api/#reload-command-line-fingerprint","text":"Description: This method allows the reload of the command line fingerprint Method: POST API PATH: services/security/v1/command-line-fingerprint/reload","title":"Reload command line fingerprint"},{"location":"references/rest-apis/rest-security-api/#responses_1","text":"200 OK status 500 Internal Server Error (also returned when no SecurityService implementation is available)","title":"Responses"},{"location":"references/rest-apis/rest-security-api/#get-methods","text":"","title":"GET methods"},{"location":"references/rest-apis/rest-security-api/#debug-enabled","text":"Note Access to this resource doesn't require the rest.security permission. Description: This method allows you to check whether debug mode is enabled in the system. Method: GET API PATH: services/security/v1/debug-enabled","title":"Debug enabled"},{"location":"references/rest-apis/rest-security-api/#responses_2","text":"200 OK status { \"enabled\" : true } 500 Internal Server Error (also returned when no SecurityService implementation is available)","title":"Responses"},{"location":"references/rest-apis/rest-service-listing-api/","text":"Service Listing V1 REST APIs Note This API can also be accessed via the RequestHandler with app-id: SVCLIST-V1 . The SVCLIST-V1 cloud request handler and the corresponding REST APIs allow to retrieve the identifiers (kura.service.pid) of the service running on the system that match user provided search criteria. Request definitions GET/servicePids POST/servicePids/byInterface POST/servicePids/byProperty POST/servicePids/satisfyingReference GET/factoryPids POST/factoryPids/byInterface POST/factoryPids/byProperty JSON definitions InterfaceNames Reference Filter PropertyFilter NotFilter AndFilter OrFilter PidSet GenericFailureReport Request definitions GET/servicePids REST API path : /services/serviceListing/v1/servicePids description : Returns the pid of all services running in the framework. responses : 200 description : An object reporting the pid of all services running in the framework response body : PidSet 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport POST/servicePids/byInterface REST API path : /services/serviceListing/v1/servicePids/byInterface description : Returns the pid of the services providing all of the service interfaces specified in the request request body : InterfaceNames responses : 200 description : An object reporting the pid of the matching services. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport POST/servicePids/byProperty REST API path : /services/serviceListing/v1/servicePids/byProperty description : Returns the pid of the services whose properties match the specified filter. request body : Filter responses : 200 description : An object reporting the pid of the matching services. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport POST/servicePids/satisfyingReference REST API path : /services/serviceListing/v1/servicePids/satisfyingReference description : Returns the pid of the services that provide an interface compatible with a Declarative Service reference. Reference examples are KeystoreService and TruststoreKeystoreService defined by the org.eclipse.kura.ssl.SslManagerService component. request body : Reference responses : 200 description : An object reporting the pid of the matching services. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport GET/factoryPids REST API path : /services/serviceListing/v1/factoryPids description : Returns the factory pids defined in the framework. responses : 200 description : An object reporting the factory pids defined in the framework. response body : PidSet 500 description : If an unexpected failure occurs while retrieving the factory pid list. response body : GenericFailureReport POST/factoryPids/byInterface REST API path : /services/serviceListing/v1/factoryPids/byInterface description : Returns the factory pid of the services that provide all of the specified interfaces. request body : InterfaceNames responses : 200 description : An object reporting the matching factory pids. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the factory pid list. response body : GenericFailureReport POST/factoryPids/byProperty REST API path : /services/serviceListing/v1/factoryPids/byProperty description : Returns the list of factory pids whose properties match the specified filter. request body : Filter responses : 200 description : An object reporting the matching factory pids. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the factory pid list. response body : GenericFailureReport JSON definitions InterfaceNames A list of serviceinterface names. Properties : interfaceNames : array The list of service interface names. array element type: string A service interface name. { \"interfaceNames\" : [ \"org.eclipse.kura.security.keystore.KeystoreService\" , \"org.eclipse.kura.configuration.ConfigurableComponent\" ] } Reference A object specifying a service pid and a reference name. Properties : pid : string The pid of the service containing the reference referenceName : string The reference name { \"pid\" : \"org.eclipse.kura.ssl.SslManagerService\" , \"referenceName\" : \"KeystoreService\" } PropertyFilter A filter matching property keys and values. If the value property omitted, the filter will match if the property is set, regardless of the value. If the service property value is of array or list type, the filter will match if at least one of the elements match. Properties : name : string The property name that should be matched, it must not contain spaces value : string ( optional ) The property value that should be matched. { \"name\" : \"foo\" , \"value\" : \"bar\" } { \"name\" : \"foo\" } NotFilter A filter that negates the result returned by the filter specified as the \"not\" propertiy. Properties : not : object Filter { \"not\" : { \"name\" : \"foo\" , \"value\" : \"bar\" } } AndFilter A filter that matches if all filters specified by the \"and\" propertiy match. Properties : and : array A list of filters that should be combined with the and operator array element type: object Filter { \"and\" : [ { \"name\" : \"foo\" , \"value\" : \"bar\" }, { \"name\" : \"baz\" } ] } OrFilter A filter that matches if any of the filters specified by the \"or\" propertiy match. Properties : or : array A list of filters that should be combined with the or operator array element type: object Filter { \"or\" : [ { \"name\" : \"foo\" , \"value\" : \"bar\" }, { \"name\" : \"baz\" } ] } Filter A filter that operates on service properties. This object allows to specify basic property key/value matchers and the and or and not operators. Variants : object PropertyFilter object NotFilter object AndFilter object OrFilter PidSet Represents a set of pids or factory pids. Properties : pids : array The set of pids array element type: string The pid { \"pids\" : [ \"org.eclipse.kura.cloud.app.command.CommandCloudApp\" , \"org.eclipse.kura.cloud.CloudService\" , \"org.eclipse.kura.cloud.publisher.CloudNotificationPublisher\" , \"org.eclipse.kura.container.orchestration.provider.ContainerOrchestrationService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"org.eclipse.kura.core.deployment.CloudDeploymentHandlerV2\" , \"org.eclipse.kura.crypto.CryptoService\" , \"org.eclipse.kura.data.DataService\" , \"org.eclipse.kura.db.H2DbService\" , \"org.eclipse.kura.deployment.agent\" ] } GenericFailureReport An object reporting a failure message. Properties : message : string A message describing the failure.","title":"Service Listing"},{"location":"references/rest-apis/rest-service-listing-api/#service-listing-v1-rest-apis","text":"Note This API can also be accessed via the RequestHandler with app-id: SVCLIST-V1 . The SVCLIST-V1 cloud request handler and the corresponding REST APIs allow to retrieve the identifiers (kura.service.pid) of the service running on the system that match user provided search criteria. Request definitions GET/servicePids POST/servicePids/byInterface POST/servicePids/byProperty POST/servicePids/satisfyingReference GET/factoryPids POST/factoryPids/byInterface POST/factoryPids/byProperty JSON definitions InterfaceNames Reference Filter PropertyFilter NotFilter AndFilter OrFilter PidSet GenericFailureReport","title":"Service Listing V1 REST APIs"},{"location":"references/rest-apis/rest-service-listing-api/#request-definitions","text":"","title":"Request definitions"},{"location":"references/rest-apis/rest-service-listing-api/#getservicepids","text":"REST API path : /services/serviceListing/v1/servicePids description : Returns the pid of all services running in the framework. responses : 200 description : An object reporting the pid of all services running in the framework response body : PidSet 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport","title":"GET/servicePids"},{"location":"references/rest-apis/rest-service-listing-api/#postservicepidsbyinterface","text":"REST API path : /services/serviceListing/v1/servicePids/byInterface description : Returns the pid of the services providing all of the service interfaces specified in the request request body : InterfaceNames responses : 200 description : An object reporting the pid of the matching services. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport","title":"POST/servicePids/byInterface"},{"location":"references/rest-apis/rest-service-listing-api/#postservicepidsbyproperty","text":"REST API path : /services/serviceListing/v1/servicePids/byProperty description : Returns the pid of the services whose properties match the specified filter. request body : Filter responses : 200 description : An object reporting the pid of the matching services. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport","title":"POST/servicePids/byProperty"},{"location":"references/rest-apis/rest-service-listing-api/#postservicepidssatisfyingreference","text":"REST API path : /services/serviceListing/v1/servicePids/satisfyingReference description : Returns the pid of the services that provide an interface compatible with a Declarative Service reference. Reference examples are KeystoreService and TruststoreKeystoreService defined by the org.eclipse.kura.ssl.SslManagerService component. request body : Reference responses : 200 description : An object reporting the pid of the matching services. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the service pid list. response body : GenericFailureReport","title":"POST/servicePids/satisfyingReference"},{"location":"references/rest-apis/rest-service-listing-api/#getfactorypids","text":"REST API path : /services/serviceListing/v1/factoryPids description : Returns the factory pids defined in the framework. responses : 200 description : An object reporting the factory pids defined in the framework. response body : PidSet 500 description : If an unexpected failure occurs while retrieving the factory pid list. response body : GenericFailureReport","title":"GET/factoryPids"},{"location":"references/rest-apis/rest-service-listing-api/#postfactorypidsbyinterface","text":"REST API path : /services/serviceListing/v1/factoryPids/byInterface description : Returns the factory pid of the services that provide all of the specified interfaces. request body : InterfaceNames responses : 200 description : An object reporting the matching factory pids. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the factory pid list. response body : GenericFailureReport","title":"POST/factoryPids/byInterface"},{"location":"references/rest-apis/rest-service-listing-api/#postfactorypidsbyproperty","text":"REST API path : /services/serviceListing/v1/factoryPids/byProperty description : Returns the list of factory pids whose properties match the specified filter. request body : Filter responses : 200 description : An object reporting the matching factory pids. response body : PidSet 400 description : If the request body is not syntactically correct. response body : GenericFailureReport 500 description : If an unexpected failure occurs while retrieving the factory pid list. response body : GenericFailureReport","title":"POST/factoryPids/byProperty"},{"location":"references/rest-apis/rest-service-listing-api/#json-definitions","text":"","title":"JSON definitions"},{"location":"references/rest-apis/rest-service-listing-api/#interfacenames","text":"A list of serviceinterface names. Properties : interfaceNames : array The list of service interface names. array element type: string A service interface name. { \"interfaceNames\" : [ \"org.eclipse.kura.security.keystore.KeystoreService\" , \"org.eclipse.kura.configuration.ConfigurableComponent\" ] }","title":"InterfaceNames"},{"location":"references/rest-apis/rest-service-listing-api/#reference","text":"A object specifying a service pid and a reference name. Properties : pid : string The pid of the service containing the reference referenceName : string The reference name { \"pid\" : \"org.eclipse.kura.ssl.SslManagerService\" , \"referenceName\" : \"KeystoreService\" }","title":"Reference"},{"location":"references/rest-apis/rest-service-listing-api/#propertyfilter","text":"A filter matching property keys and values. If the value property omitted, the filter will match if the property is set, regardless of the value. If the service property value is of array or list type, the filter will match if at least one of the elements match. Properties : name : string The property name that should be matched, it must not contain spaces value : string ( optional ) The property value that should be matched. { \"name\" : \"foo\" , \"value\" : \"bar\" } { \"name\" : \"foo\" }","title":"PropertyFilter"},{"location":"references/rest-apis/rest-service-listing-api/#notfilter","text":"A filter that negates the result returned by the filter specified as the \"not\" propertiy. Properties : not : object Filter { \"not\" : { \"name\" : \"foo\" , \"value\" : \"bar\" } }","title":"NotFilter"},{"location":"references/rest-apis/rest-service-listing-api/#andfilter","text":"A filter that matches if all filters specified by the \"and\" propertiy match. Properties : and : array A list of filters that should be combined with the and operator array element type: object Filter { \"and\" : [ { \"name\" : \"foo\" , \"value\" : \"bar\" }, { \"name\" : \"baz\" } ] }","title":"AndFilter"},{"location":"references/rest-apis/rest-service-listing-api/#orfilter","text":"A filter that matches if any of the filters specified by the \"or\" propertiy match. Properties : or : array A list of filters that should be combined with the or operator array element type: object Filter { \"or\" : [ { \"name\" : \"foo\" , \"value\" : \"bar\" }, { \"name\" : \"baz\" } ] }","title":"OrFilter"},{"location":"references/rest-apis/rest-service-listing-api/#filter","text":"A filter that operates on service properties. This object allows to specify basic property key/value matchers and the and or and not operators. Variants : object PropertyFilter object NotFilter object AndFilter object OrFilter","title":"Filter"},{"location":"references/rest-apis/rest-service-listing-api/#pidset","text":"Represents a set of pids or factory pids. Properties : pids : array The set of pids array element type: string The pid { \"pids\" : [ \"org.eclipse.kura.cloud.app.command.CommandCloudApp\" , \"org.eclipse.kura.cloud.CloudService\" , \"org.eclipse.kura.cloud.publisher.CloudNotificationPublisher\" , \"org.eclipse.kura.container.orchestration.provider.ContainerOrchestrationService\" , \"org.eclipse.kura.core.data.transport.mqtt.MqttDataTransport\" , \"org.eclipse.kura.core.deployment.CloudDeploymentHandlerV2\" , \"org.eclipse.kura.crypto.CryptoService\" , \"org.eclipse.kura.data.DataService\" , \"org.eclipse.kura.db.H2DbService\" , \"org.eclipse.kura.deployment.agent\" ] }","title":"PidSet"},{"location":"references/rest-apis/rest-service-listing-api/#genericfailurereport","text":"An object reporting a failure message. Properties : message : string A message describing the failure.","title":"GenericFailureReport"},{"location":"references/rest-apis/rest-session-api/","text":"Session V1 Rest APIs The session management REST APIs allow to authenticate and establish an HTTP session. Using this APIs and creating a session is the recommended way for interact with Kura rest APIs from a browser based application. The supported workflows are the following: Login and resource access workflow Try calling the GET/xsrfToken to get an XSRF token, if the request succeeds a vaild session is already available, it is possible to proceed to step 4. It is not necessary to call GET/xsrfToken again until the current session expires, the obtained token is valid as long as the current session is valid. Call the POST/login/password or POST/login/certificate providing the credentials to create a new session. This request will return a session cookie with the response. The session cookie name is currently JSESSIONID . It is important to provide the received cookies in successive requests using the Cookie HTTP request header. If this is not done, requests will fail with 401 code. If the request is performed by a browser, cookie management should be performed automatically. If password authentication has been used and the response object reports that a password change is needed, perform the Update password workflow Repeat step 1. to get an XSRF token. Access the desired resources, set the XSRF token previously obtained as the value of the X-XSRF-Token HTTP header on each request. If a reuqest fails with error code 401, proceed to step 2. Login example with curl 1. Login with username/password and collect the session cookie curl -k -X POST \\ -H 'Content-Type: application/json' \\ https:// $ADDRESS /services/session/v1/login/password \\ -d '{\"password\": \"$KURA_PASS\", \"username\": \"$KURA_USER\"}' -v where: $ADDRESS : is the address of the Kura instance $KURA_USER : is the Kura username $KURA_PASS : is the Kura password in the log you should find a JSESSIONID you'll use in subsequent requests ... < HTTP/1.1 200 OK < Date: Tue, 14 Nov 2023 08:17:26 GMT < Set-Cookie: JSESSIONID=myawesomecookie; Path=/; Secure; HttpOnly < Expires: Thu, 01 Jan 1970 00:00:00 GMT < Content-Type: application/json < Content-Length: 30 < * Connection #0 to host 192.168.1.111 left intact {\"passwordChangeNeeded\":false}% 2. Retrieve the XSRF token curl -k -X GET \\ -b \"JSESSIONID=myawesomecookie\" \\ https:// $ADDRESS /services/session/v1/xsrfToken in the response you'll find your XSRF token you'll need to use in subsequent requests {\"xsrfToken\":\"myawesometoken\"}% 3. Access the resource Using the Cookie and the XSRF token you just retrieved you can access your desired resource curl -k -X GET \\ -H 'X-XSRF-Token: myawesometoken' \\ -b \"JSESSIONID=myawesomecookie\" \\ https:// $ADDRESS /services/deploy/v2/ Update password workflow Get an XSRF token using the GET/xsrfToken endpoint. Call the POST/changePassword , providing both the new and old password, make sure to include the X-XSRF-Token HTTP header. Repeat the Authentication and resource access workflow , starting from step 1. Sessions will expire after an inactivity interval that can be configured using the Session Inactivity Interval (Seconds) RestService configuration parameter. After session expiration, a new login will be necessary. In order to add protection against XSRF attacks, it is necessary to provide an token using the X-XSRF-Token HTTP header in all requests. The token can be obtained using the GET/xsrfToken endpoint after a successful login. Session will be invalidated if the current identity credentials are changed, in this case a new login will be necessary. If a password change is required for the current identity, it will be necessary to perform the Update password workflow before being able to access the other resources. Reference Request definitions POST/login/password POST/login/certificate GET/xsrfToken POST/logout POST/changePassword GET/currentIdentity GET/authenticationMethods JSON definitions AuthenticationResponse UsernamePassword XSRFToken PasswordChangeRequest IdentityInfo AuthenticationInfo GenericFailureReport Request definitions POST/login/password REST API path : /services/session/v1/login/password description : Creates a new session by providing identity name and password. If the response reports that a password change is needed, it is necessary to update the current password in order to be able to access other REST APIs. request body : UsernamePassword responses : 200 description : Request succeeded. response body : AuthenticationResponse 401 description : The provided credentials are not correct. 500 description : An unexpected error occurred. response body : GenericFailureReport POST/login/certificate REST API path : /services/session/v1/login/certificate description : Creates a new session using certificate based authentication. The response will report if the current identity needs a password change for informational purposes only. If authentication is performed using this endpoint, access to other REST APIs will be allowd even if password change is required for the current identity. responses : 200 description : Request succeeded. response body : AuthenticationResponse 401 description : The provided credentials are not correct. 500 description : An unexpected error occurred. response body : GenericFailureReport GET/xsrfToken REST API path : /services/session/v1/xsrfToken description : Gets the XSRF token associated with the current session. It is not necessary to call this method again until the current session expires, the obtained token is valid as long as the current session is valid. responses : 200 description : Request succeeded, the XSRF token is returned in response body. response body : XSRFToken 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport POST/logout REST API path : /services/session/v1/logout description : Terminates the current session. responses : 204 description : Request succeeded, the session is no longer valid. 401 description : The current session is not valid 500 description : An unexpected error occurred. response body : GenericFailureReport POST/changePassword REST API path : /services/session/v1/changePassword description : Changes the password associated with the current identity. The new password will be validated against the currently configured password strength requirements. The current password strenght requirements can be retrieved using the identity/v1/passwordRequirements endpoint. request body : PasswordChangeRequest responses : 204 description : Request succeeded. The current password has been changed. The session is no longer valid, a new login is required. 400 description : The new password is not valid. This can be due to the fact that it does not fullfill the current password strenght requirements. 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport GET/currentIdentity REST API path : /services/session/v1/currentIdentity description : Provides information about the currently authenticated identity. responses : 200 description : Request succeeded response body : IdentityInfo 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport GET/authenticationMethods REST API path : /services/session/v1/authenticationInfo description : Provides information about the available authentication methods. responses : 200 description : Request succeeded response body : AuthenticationInfo 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport JSON definitions AuthenticationResponse Represents the response for a successful authentication request. Properties : passwordChangeNeeded : bool Determines whether a password change is required for the current identity. { \"passwordChangeNeeded\" : true } UsernamePassword Contains an username and password. Properties : username : string The user name. password : string The user password. { \"password\" : \"bar\" , \"username\" : \"foo\" } XSRFToken An object containing an XSRF token. Properties : xsrfToken : string The XSRF token. { \"xsrfToken\" : \"d2b68613-152f-41d5-8b5b-a19448ed0e4e\" } PasswordChangeRequest An object containing the current password and a new password. Properties : currentPassword : string The current password. newPassword : string The new password. { \"currentPassword\" : \"foo\" , \"newPassword\" : \"bar\" } IdentityInfo An object containing information about the current identity Properties : name : string The name of the current identity. passwordChangeNeeded : bool Determines whether a password change is required for the current identity. permissions : array The list of permissions assigned to the current identity. array element type: string The permission name. { \"name\" : \"foo\" , \"passwordChangeNeeded\" : false , \"permissions\" : [ \"rest.bar\" , \"rest.assets\" , \"rest.foo\" ] } AuthenticationInfo An object containing information about the enabled authentication methods. Properties : passwordAuthenticationEnabled : bool Reports whether authentication using the login/password endpoint is enabled. certificateAuthenticationEnabled : bool Reports whether authentication using the login/certificate endpoint is enabled. certificateAuthenticationPorts : array ( optional ) The list of ports available for certificate based authentication. This property will be present only if certificateAuthenticationEnabled is true array element type: string A port that can be used for certificate based authentication. message : string ( optional ) Reports the content of the Login Banner, if configured on the device. A browser based application should display this message to the user before login if this property is set. This property will be missing if the login banner is not enabled. { \"certificateAuthenticationEnabled\" : false , \"passwordAuthenticationEnabled\" : true } { \"certificateAuthenticationEnabled\" : true , \"certificateAuthenticationPorts\" : [ 4443 , 4444 ], \"passwordAuthenticationEnabled\" : true } { \"certificateAuthenticationEnabled\" : false , \"message\" : \"login banner content\" , \"passwordAuthenticationEnabled\" : true } GenericFailureReport An object reporting a failure message. Properties : message : string A message describing the failure.","title":"Session"},{"location":"references/rest-apis/rest-session-api/#session-v1-rest-apis","text":"The session management REST APIs allow to authenticate and establish an HTTP session. Using this APIs and creating a session is the recommended way for interact with Kura rest APIs from a browser based application. The supported workflows are the following:","title":"Session V1 Rest APIs"},{"location":"references/rest-apis/rest-session-api/#login-and-resource-access-workflow","text":"Try calling the GET/xsrfToken to get an XSRF token, if the request succeeds a vaild session is already available, it is possible to proceed to step 4. It is not necessary to call GET/xsrfToken again until the current session expires, the obtained token is valid as long as the current session is valid. Call the POST/login/password or POST/login/certificate providing the credentials to create a new session. This request will return a session cookie with the response. The session cookie name is currently JSESSIONID . It is important to provide the received cookies in successive requests using the Cookie HTTP request header. If this is not done, requests will fail with 401 code. If the request is performed by a browser, cookie management should be performed automatically. If password authentication has been used and the response object reports that a password change is needed, perform the Update password workflow Repeat step 1. to get an XSRF token. Access the desired resources, set the XSRF token previously obtained as the value of the X-XSRF-Token HTTP header on each request. If a reuqest fails with error code 401, proceed to step 2.","title":"Login and resource access workflow"},{"location":"references/rest-apis/rest-session-api/#login-example-with-curl","text":"","title":"Login example with curl"},{"location":"references/rest-apis/rest-session-api/#1-login-with-usernamepassword-and-collect-the-session-cookie","text":"curl -k -X POST \\ -H 'Content-Type: application/json' \\ https:// $ADDRESS /services/session/v1/login/password \\ -d '{\"password\": \"$KURA_PASS\", \"username\": \"$KURA_USER\"}' -v where: $ADDRESS : is the address of the Kura instance $KURA_USER : is the Kura username $KURA_PASS : is the Kura password in the log you should find a JSESSIONID you'll use in subsequent requests ... < HTTP/1.1 200 OK < Date: Tue, 14 Nov 2023 08:17:26 GMT < Set-Cookie: JSESSIONID=myawesomecookie; Path=/; Secure; HttpOnly < Expires: Thu, 01 Jan 1970 00:00:00 GMT < Content-Type: application/json < Content-Length: 30 < * Connection #0 to host 192.168.1.111 left intact {\"passwordChangeNeeded\":false}%","title":"1. Login with username/password and collect the session cookie"},{"location":"references/rest-apis/rest-session-api/#2-retrieve-the-xsrf-token","text":"curl -k -X GET \\ -b \"JSESSIONID=myawesomecookie\" \\ https:// $ADDRESS /services/session/v1/xsrfToken in the response you'll find your XSRF token you'll need to use in subsequent requests {\"xsrfToken\":\"myawesometoken\"}%","title":"2. Retrieve the XSRF token"},{"location":"references/rest-apis/rest-session-api/#3-access-the-resource","text":"Using the Cookie and the XSRF token you just retrieved you can access your desired resource curl -k -X GET \\ -H 'X-XSRF-Token: myawesometoken' \\ -b \"JSESSIONID=myawesomecookie\" \\ https:// $ADDRESS /services/deploy/v2/","title":"3. Access the resource"},{"location":"references/rest-apis/rest-session-api/#update-password-workflow","text":"Get an XSRF token using the GET/xsrfToken endpoint. Call the POST/changePassword , providing both the new and old password, make sure to include the X-XSRF-Token HTTP header. Repeat the Authentication and resource access workflow , starting from step 1. Sessions will expire after an inactivity interval that can be configured using the Session Inactivity Interval (Seconds) RestService configuration parameter. After session expiration, a new login will be necessary. In order to add protection against XSRF attacks, it is necessary to provide an token using the X-XSRF-Token HTTP header in all requests. The token can be obtained using the GET/xsrfToken endpoint after a successful login. Session will be invalidated if the current identity credentials are changed, in this case a new login will be necessary. If a password change is required for the current identity, it will be necessary to perform the Update password workflow before being able to access the other resources.","title":"Update password workflow"},{"location":"references/rest-apis/rest-session-api/#reference","text":"Request definitions POST/login/password POST/login/certificate GET/xsrfToken POST/logout POST/changePassword GET/currentIdentity GET/authenticationMethods JSON definitions AuthenticationResponse UsernamePassword XSRFToken PasswordChangeRequest IdentityInfo AuthenticationInfo GenericFailureReport","title":"Reference"},{"location":"references/rest-apis/rest-session-api/#request-definitions","text":"","title":"Request definitions"},{"location":"references/rest-apis/rest-session-api/#postloginpassword","text":"REST API path : /services/session/v1/login/password description : Creates a new session by providing identity name and password. If the response reports that a password change is needed, it is necessary to update the current password in order to be able to access other REST APIs. request body : UsernamePassword responses : 200 description : Request succeeded. response body : AuthenticationResponse 401 description : The provided credentials are not correct. 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"POST/login/password"},{"location":"references/rest-apis/rest-session-api/#postlogincertificate","text":"REST API path : /services/session/v1/login/certificate description : Creates a new session using certificate based authentication. The response will report if the current identity needs a password change for informational purposes only. If authentication is performed using this endpoint, access to other REST APIs will be allowd even if password change is required for the current identity. responses : 200 description : Request succeeded. response body : AuthenticationResponse 401 description : The provided credentials are not correct. 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"POST/login/certificate"},{"location":"references/rest-apis/rest-session-api/#getxsrftoken","text":"REST API path : /services/session/v1/xsrfToken description : Gets the XSRF token associated with the current session. It is not necessary to call this method again until the current session expires, the obtained token is valid as long as the current session is valid. responses : 200 description : Request succeeded, the XSRF token is returned in response body. response body : XSRFToken 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"GET/xsrfToken"},{"location":"references/rest-apis/rest-session-api/#postlogout","text":"REST API path : /services/session/v1/logout description : Terminates the current session. responses : 204 description : Request succeeded, the session is no longer valid. 401 description : The current session is not valid 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"POST/logout"},{"location":"references/rest-apis/rest-session-api/#postchangepassword","text":"REST API path : /services/session/v1/changePassword description : Changes the password associated with the current identity. The new password will be validated against the currently configured password strength requirements. The current password strenght requirements can be retrieved using the identity/v1/passwordRequirements endpoint. request body : PasswordChangeRequest responses : 204 description : Request succeeded. The current password has been changed. The session is no longer valid, a new login is required. 400 description : The new password is not valid. This can be due to the fact that it does not fullfill the current password strenght requirements. 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"POST/changePassword"},{"location":"references/rest-apis/rest-session-api/#getcurrentidentity","text":"REST API path : /services/session/v1/currentIdentity description : Provides information about the currently authenticated identity. responses : 200 description : Request succeeded response body : IdentityInfo 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"GET/currentIdentity"},{"location":"references/rest-apis/rest-session-api/#getauthenticationmethods","text":"REST API path : /services/session/v1/authenticationInfo description : Provides information about the available authentication methods. responses : 200 description : Request succeeded response body : AuthenticationInfo 401 description : The current session is not valid. 500 description : An unexpected error occurred. response body : GenericFailureReport","title":"GET/authenticationMethods"},{"location":"references/rest-apis/rest-session-api/#json-definitions","text":"","title":"JSON definitions"},{"location":"references/rest-apis/rest-session-api/#authenticationresponse","text":"Represents the response for a successful authentication request. Properties : passwordChangeNeeded : bool Determines whether a password change is required for the current identity. { \"passwordChangeNeeded\" : true }","title":"AuthenticationResponse"},{"location":"references/rest-apis/rest-session-api/#usernamepassword","text":"Contains an username and password. Properties : username : string The user name. password : string The user password. { \"password\" : \"bar\" , \"username\" : \"foo\" }","title":"UsernamePassword"},{"location":"references/rest-apis/rest-session-api/#xsrftoken","text":"An object containing an XSRF token. Properties : xsrfToken : string The XSRF token. { \"xsrfToken\" : \"d2b68613-152f-41d5-8b5b-a19448ed0e4e\" }","title":"XSRFToken"},{"location":"references/rest-apis/rest-session-api/#passwordchangerequest","text":"An object containing the current password and a new password. Properties : currentPassword : string The current password. newPassword : string The new password. { \"currentPassword\" : \"foo\" , \"newPassword\" : \"bar\" }","title":"PasswordChangeRequest"},{"location":"references/rest-apis/rest-session-api/#identityinfo","text":"An object containing information about the current identity Properties : name : string The name of the current identity. passwordChangeNeeded : bool Determines whether a password change is required for the current identity. permissions : array The list of permissions assigned to the current identity. array element type: string The permission name. { \"name\" : \"foo\" , \"passwordChangeNeeded\" : false , \"permissions\" : [ \"rest.bar\" , \"rest.assets\" , \"rest.foo\" ] }","title":"IdentityInfo"},{"location":"references/rest-apis/rest-session-api/#authenticationinfo","text":"An object containing information about the enabled authentication methods. Properties : passwordAuthenticationEnabled : bool Reports whether authentication using the login/password endpoint is enabled. certificateAuthenticationEnabled : bool Reports whether authentication using the login/certificate endpoint is enabled. certificateAuthenticationPorts : array ( optional ) The list of ports available for certificate based authentication. This property will be present only if certificateAuthenticationEnabled is true array element type: string A port that can be used for certificate based authentication. message : string ( optional ) Reports the content of the Login Banner, if configured on the device. A browser based application should display this message to the user before login if this property is set. This property will be missing if the login banner is not enabled. { \"certificateAuthenticationEnabled\" : false , \"passwordAuthenticationEnabled\" : true } { \"certificateAuthenticationEnabled\" : true , \"certificateAuthenticationPorts\" : [ 4443 , 4444 ], \"passwordAuthenticationEnabled\" : true } { \"certificateAuthenticationEnabled\" : false , \"message\" : \"login banner content\" , \"passwordAuthenticationEnabled\" : true }","title":"AuthenticationInfo"},{"location":"references/rest-apis/rest-session-api/#genericfailurereport","text":"An object reporting a failure message. Properties : message : string A message describing the failure.","title":"GenericFailureReport"},{"location":"references/rest-apis/rest-system-api/","text":"Note This API can also be accessed via the RequestHandler with app-id: SYS-V1 . The SystemService APIs return properties that are divided into 3 categories: framework properties , extended properties, and kura properties . Identities with rest.system permissions can access these APIs. Framework properties Property name Type biosVersion String cpuVersion String deviceName String modelId String modelName String partNumber String platform String numberOfProcessors Integer totalMemory Integer freeMemory Integer serialNumber String javaHome String javaVendor String javaVersion String javaVmInfo String javaVmName String javaVmVersion String javaVmVendor String jdkVendorVersion String osArch String osDistro String osDistroVersion String osName String osVersion String isLegacyBluetoothBeaconScan Boolean isLegacyPPPLoggingEnabled Boolean primaryMacAddress String primaryNetworkInterfaceName String fileSeparator String firmwareVersion String kuraDataDirectory String kuraFrameworkConfigDirectory String kuraHomeDirectory String kuraMarketplaceCompatibilityVersion String kuraSnapshotsCount Integer kuraSnapshotsDirectory String kuraStyleDirectory String kuraTemporaryConfigDirectory String kuraUserConfigDirectory String kuraVersion String kuraHaveWebInterface Boolean kuraHaveNetAdmin Boolean kuraWifiTopChannel Integer kuraDefaultNetVirtualDevicesConfig String osgiFirmwareName String osgiFirmwareVersion String commandUser String commandZipMaxUploadNumber Integer commandZipMaxUploadSize Integer Kura properties Property name Type kura.platform String org.osgi.framework.version String kura.user.config String java.vm.vendor String kura.name String file.command.zip.max.number String kura.legacy.ppp.logging.enabled String kura.tmp String kura.packages String build.version String kura.log.download.journal.fields String kura.data String os.name String dpa.read.timeout String file.upload.size.max String console.device.management.service.ignore String kura.command.user String kura.device.name String kura.partNumber String kura.project String kura.company String java.home String version String kura.style.dir String kura.model.id String file.separator String jdk.vendor.version String kura.model.name String kura.serialNumber.provider String kura.have.web.inter String kura.legacy.bluetooth.beacon.scan String java.runtime.version String kura.bios.version String kura.marketplace.compatibility.version String kura.framework.config String kura.firmware.version String kura.plugins String os.version String kura.version String org.osgi.framework.vendor String java.runtime.name String kura.log.download.sources String os.distribution String java.vm.name String kura.primary.network.interface String kura.home String file.command.zip.max.size String os.arch String os.distribution.version String file.upload.in.memory.size.threshold String kura.net.virtual.devices.config String kura.snapshots String kura.have.net.admin String java.vm.info String java.vm.version String dpa.connection.timeout String build.number String ccs.status.notification.url String Note Some of the listed properties, depending on the device, might not be available. GET methods Get framework properties Method: GET API PATH: /services/system/v1/properties/framework Responses 200 OK status { \"biosVersion\" : \"N/A\" , \"cpuVersion\" : \"unknown\" , \"deviceName\" : \"raspberry\" , \"modelId\" : \"raspberry\" , \"modelName\" : \"raspberry\" , \"partNumber\" : \"raspberry\" , \"platform\" : \"aarch64\" , \"numberOfProcessors\" : 4 , \"totalMemory\" : 506816 , \"freeMemory\" : 380379 , \"serialNumber\" : \"10000000ba7c7bfd\" , \"javaHome\" : \"/usr/lib/jvm/java-8-openjdk-armhf/jre\" , \"javaVendor\" : \"OpenJDK Runtime Environment\" , \"javaVersion\" : \"1.8.0_312-8u312-b07-1+rpi1-b07\" , \"javaVmInfo\" : \"mixed mode\" , \"javaVmName\" : \"OpenJDK Client VM\" , \"javaVmVersion\" : \"25.312-b07\" , \"javaVmVendor\" : \"Temurin\" , \"jdkVendorVersion\" : \"Zulu 8.70.0.24-SA-linux64\" , \"osArch\" : \"arm\" , \"osDistro\" : \"Linux\" , \"osDistroVersion\" : \"N/A\" , \"osName\" : \"Linux\" , \"osVersion\" : \"6.1.21-v8+ #1642 SMP PREEMPT Mon Apr 3 17:24:16 BST 2023\" , \"isLegacyBluetoothBeaconScan\" : false , \"isLegacyPPPLoggingEnabled\" : true , \"primaryMacAddress\" : \"E4:5F:01:35:7F:F4\" , \"primaryNetworkInterfaceName\" : \"eth0\" , \"fileSeparator\" : \"/\" , \"firmwareVersion\" : \"N/A\" , \"kuraDataDirectory\" : \"/opt/eclipse/kura/data\" , \"kuraFrameworkConfigDirectory\" : \"/opt/eclipse/kura/framework\" , \"kuraHomeDirectory\" : \"/opt/eclipse/kura\" , \"kuraMarketplaceCompatibilityVersion\" : \"5.4.0.SNAPSHOT\" , \"kuraSnapshotsCount\" : 10 , \"kuraSnapshotsDirectory\" : \"/opt/eclipse/kura/user/snapshots\" , \"kuraStyleDirectory\" : \"/opt/eclipse/kura/console/skin\" , \"kuraTemporaryConfigDirectory\" : \"/tmp/.kura\" , \"kuraUserConfigDirectory\" : \"/opt/eclipse/kura/user\" , \"kuraVersion\" : \"KURA_5.4.0-SNAPSHOT\" , \"kuraHaveWebInterface\" : true , \"kuraHaveNetAdmin\" : true , \"kuraWifiTopChannel\" : 2147483647 , \"kuraDefaultNetVirtualDevicesConfig\" : \"netIPv4StatusUnmanaged\" , \"osgiFirmwareName\" : \"Eclipse\" , \"osgiFirmwareVersion\" : \"1.10.0\" , \"commandUser\" : \"kura\" , \"commandZipMaxUploadNumber\" : 1024 , \"commandZipMaxUploadSize\" : 100 } 500 Internal Server Error Get extended properties Method: GET API PATH: /services/system/v1/properties/extended Responses 200 OK status { \"version\" : \"1.0\" , \"extendedProperties\" : { \"Device Info 1\" : { \"exampleKey1\" : \"value1\" , \"exampleKey2\" : \"value2\" }, \"Device Info 2\" : { \"key1\" : \"val1\" , \"key2\" : \"val2\" } } } 500 Internal Server Error Get Kura properties Method: GET API PATH: /services/system/v1/properties/kura Responses 200 OK status { \"kuraProperties\" : { \"kura.platform\" : \"aarch64\" , \"org.osgi.framework.version\" : \"1.10.0\" , \"kura.user.config\" : \"/opt/eclipse/kura/user\" , \"java.vm.vendor\" : \"Temurin\" , \"kura.name\" : \"Eclipse Kura\" , \"file.command.zip.max.number\" : \"1024\" , \"kura.legacy.ppp.logging.enabled\" : \"true\" , \"kura.tmp\" : \"/tmp/.kura\" , \"kura.packages\" : \"/opt/eclipse/kura/packages\" , \"build.version\" : \"buildNumber\" , \"kura.log.download.journal.fields\" : \"SYSLOG_IDENTIFIER,PRIORITY,MESSAGE,STACKTRACE\" , \"kura.data\" : \"/opt/eclipse/kura/data\" , \"os.name\" : \"Linux\" , \"dpa.read.timeout\" : \"60000\" , \"file.upload.size.max\" : \"-1\" , \"console.device.management.service.ignore\" : \"org.eclipse.kura.net.admin.NetworkConfigurationService,org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"kura.command.user\" : \"kura\" , \"kura.device.name\" : \"raspberry\" , \"kura.partNumber\" : \"raspberry\" , \"kura.project\" : \"generic-arm32\" , \"kura.company\" : \"EUROTECH\" , \"java.home\" : \"/usr/lib/jvm/java-8-openjdk-armhf/jre\" , \"version\" : \"5.4.0-SNAPSHOT\" , \"kura.style.dir\" : \"/opt/eclipse/kura/console/skin\" , \"kura.model.id\" : \"raspberry\" , \"file.separator\" : \"/\" , \"jdk.vendor.version\" : \"Zulu 8.70.0.24-SA-linux64\" , \"kura.model.name\" : \"raspberry\" , \"kura.serialNumber.provider\" : \"cat /proc/cpuinfo | grep Serial | cut -d ' ' -f 2\" , \"kura.have.web.inter\" : \"true\" , \"kura.legacy.bluetooth.beacon.scan\" : \"false\" , \"java.runtime.version\" : \"1.8.0_312-8u312-b07-1+rpi1-b07\" , \"kura.bios.version\" : \"N/A\" , \"kura.marketplace.compatibility.version\" : \"KURA_5.4.0-SNAPSHOT\" , \"kura.framework.config\" : \"/opt/eclipse/kura/framework\" , \"kura.firmware.version\" : \"N/A\" , \"kura.plugins\" : \"/opt/eclipse/kura/plugins\" , \"os.version\" : \"6.1.21-v8+ #1642 SMP PREEMPT Mon Apr 3 17:24:16 BST 2023\" , \"kura.version\" : \"KURA_5.4.0-SNAPSHOT\" , \"org.osgi.framework.vendor\" : \"Eclipse\" , \"java.runtime.name\" : \"OpenJDK Runtime Environment\" , \"kura.log.download.sources\" : \"/var/log\" , \"os.distribution\" : \"Linux\" , \"java.vm.name\" : \"OpenJDK Client VM\" , \"kura.primary.network.interface\" : \"eth0\" , \"kura.home\" : \"/opt/eclipse/kura\" , \"file.command.zip.max.size\" : \"100\" , \"os.arch\" : \"arm\" , \"os.distribution.version\" : \"N/A\" , \"file.upload.in.memory.size.threshold\" : \"10240\" , \"kura.net.virtual.devices.config\" : \"unmanaged\" , \"kura.snapshots\" : \"/opt/eclipse/kura/user/snapshots\" , \"kura.have.net.admin\" : \"true\" , \"java.vm.info\" : \"mixed mode\" , \"java.vm.version\" : \"25.312-b07\" , \"dpa.connection.timeout\" : \"60000\" , \"build.number\" : \"generic-arm32-buildNumber\" , \"ccs.status.notification.url\" : \"ccs:log\" } } 500 Internal Server Error POST methods Filter framework properties This method allows to retrieve framework-related properties by their name. Available properties are in table Framework properties . Method: POST API PATH: /services/system/v1/properties/framework/filter Request Body { \"names\" : [ \"deviceName\" , \"numberOfProcessors\" , \"kuraHaveNetAdmin\" ] } Responses 200 OK status { \"deviceName\" : \"RASBPERRY PI 4\" , \"numberOfProcessors\" : 4 , \"kuraHaveNetAdmin\" : true } 500 Internal Server Error Filter extended properties This method allows to retrieve the extended properties and to filter them by group name. Method: POST API PATH: /services/system/v1/properties/extended/filter Request Body { \"groupNames\" : [ \"Device Info 1\" ] } Responses 200 OK status { \"extendedProperties\" : { \"Device Info 1\" : { \"exampleKey1\" : \"value1\" , \"exampleKey2\" : \"value2\" } } } 500 Internal Server Error Filter kura properties This method allows to retrieve Kura-related properties (derived from the kura.properties file) and filter by their name. Available properties are listed in the table Kura properties . Method: POST API PATH: /services/system/v1/properties/kura/filter Request Body { \"names\" : [ \"kura.platform\" , \"file.upload.size.max\" , \"kura.have.net.admin\" ] } Responses 200 OK status { \"kuraProperties\" : { \"kura.platform\" : \"aarch64\" , \"kura.have.net.admin\" : \"true\" , \"file.upload.size.max\" : \"-1\" } } 500 Internal Server Error","title":"System"},{"location":"references/rest-apis/rest-system-api/#framework-properties","text":"Property name Type biosVersion String cpuVersion String deviceName String modelId String modelName String partNumber String platform String numberOfProcessors Integer totalMemory Integer freeMemory Integer serialNumber String javaHome String javaVendor String javaVersion String javaVmInfo String javaVmName String javaVmVersion String javaVmVendor String jdkVendorVersion String osArch String osDistro String osDistroVersion String osName String osVersion String isLegacyBluetoothBeaconScan Boolean isLegacyPPPLoggingEnabled Boolean primaryMacAddress String primaryNetworkInterfaceName String fileSeparator String firmwareVersion String kuraDataDirectory String kuraFrameworkConfigDirectory String kuraHomeDirectory String kuraMarketplaceCompatibilityVersion String kuraSnapshotsCount Integer kuraSnapshotsDirectory String kuraStyleDirectory String kuraTemporaryConfigDirectory String kuraUserConfigDirectory String kuraVersion String kuraHaveWebInterface Boolean kuraHaveNetAdmin Boolean kuraWifiTopChannel Integer kuraDefaultNetVirtualDevicesConfig String osgiFirmwareName String osgiFirmwareVersion String commandUser String commandZipMaxUploadNumber Integer commandZipMaxUploadSize Integer","title":"Framework properties"},{"location":"references/rest-apis/rest-system-api/#kura-properties","text":"Property name Type kura.platform String org.osgi.framework.version String kura.user.config String java.vm.vendor String kura.name String file.command.zip.max.number String kura.legacy.ppp.logging.enabled String kura.tmp String kura.packages String build.version String kura.log.download.journal.fields String kura.data String os.name String dpa.read.timeout String file.upload.size.max String console.device.management.service.ignore String kura.command.user String kura.device.name String kura.partNumber String kura.project String kura.company String java.home String version String kura.style.dir String kura.model.id String file.separator String jdk.vendor.version String kura.model.name String kura.serialNumber.provider String kura.have.web.inter String kura.legacy.bluetooth.beacon.scan String java.runtime.version String kura.bios.version String kura.marketplace.compatibility.version String kura.framework.config String kura.firmware.version String kura.plugins String os.version String kura.version String org.osgi.framework.vendor String java.runtime.name String kura.log.download.sources String os.distribution String java.vm.name String kura.primary.network.interface String kura.home String file.command.zip.max.size String os.arch String os.distribution.version String file.upload.in.memory.size.threshold String kura.net.virtual.devices.config String kura.snapshots String kura.have.net.admin String java.vm.info String java.vm.version String dpa.connection.timeout String build.number String ccs.status.notification.url String Note Some of the listed properties, depending on the device, might not be available.","title":"Kura properties"},{"location":"references/rest-apis/rest-system-api/#get-methods","text":"","title":"GET methods"},{"location":"references/rest-apis/rest-system-api/#get-framework-properties","text":"Method: GET API PATH: /services/system/v1/properties/framework","title":"Get framework properties"},{"location":"references/rest-apis/rest-system-api/#responses","text":"200 OK status { \"biosVersion\" : \"N/A\" , \"cpuVersion\" : \"unknown\" , \"deviceName\" : \"raspberry\" , \"modelId\" : \"raspberry\" , \"modelName\" : \"raspberry\" , \"partNumber\" : \"raspberry\" , \"platform\" : \"aarch64\" , \"numberOfProcessors\" : 4 , \"totalMemory\" : 506816 , \"freeMemory\" : 380379 , \"serialNumber\" : \"10000000ba7c7bfd\" , \"javaHome\" : \"/usr/lib/jvm/java-8-openjdk-armhf/jre\" , \"javaVendor\" : \"OpenJDK Runtime Environment\" , \"javaVersion\" : \"1.8.0_312-8u312-b07-1+rpi1-b07\" , \"javaVmInfo\" : \"mixed mode\" , \"javaVmName\" : \"OpenJDK Client VM\" , \"javaVmVersion\" : \"25.312-b07\" , \"javaVmVendor\" : \"Temurin\" , \"jdkVendorVersion\" : \"Zulu 8.70.0.24-SA-linux64\" , \"osArch\" : \"arm\" , \"osDistro\" : \"Linux\" , \"osDistroVersion\" : \"N/A\" , \"osName\" : \"Linux\" , \"osVersion\" : \"6.1.21-v8+ #1642 SMP PREEMPT Mon Apr 3 17:24:16 BST 2023\" , \"isLegacyBluetoothBeaconScan\" : false , \"isLegacyPPPLoggingEnabled\" : true , \"primaryMacAddress\" : \"E4:5F:01:35:7F:F4\" , \"primaryNetworkInterfaceName\" : \"eth0\" , \"fileSeparator\" : \"/\" , \"firmwareVersion\" : \"N/A\" , \"kuraDataDirectory\" : \"/opt/eclipse/kura/data\" , \"kuraFrameworkConfigDirectory\" : \"/opt/eclipse/kura/framework\" , \"kuraHomeDirectory\" : \"/opt/eclipse/kura\" , \"kuraMarketplaceCompatibilityVersion\" : \"5.4.0.SNAPSHOT\" , \"kuraSnapshotsCount\" : 10 , \"kuraSnapshotsDirectory\" : \"/opt/eclipse/kura/user/snapshots\" , \"kuraStyleDirectory\" : \"/opt/eclipse/kura/console/skin\" , \"kuraTemporaryConfigDirectory\" : \"/tmp/.kura\" , \"kuraUserConfigDirectory\" : \"/opt/eclipse/kura/user\" , \"kuraVersion\" : \"KURA_5.4.0-SNAPSHOT\" , \"kuraHaveWebInterface\" : true , \"kuraHaveNetAdmin\" : true , \"kuraWifiTopChannel\" : 2147483647 , \"kuraDefaultNetVirtualDevicesConfig\" : \"netIPv4StatusUnmanaged\" , \"osgiFirmwareName\" : \"Eclipse\" , \"osgiFirmwareVersion\" : \"1.10.0\" , \"commandUser\" : \"kura\" , \"commandZipMaxUploadNumber\" : 1024 , \"commandZipMaxUploadSize\" : 100 } 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-system-api/#get-extended-properties","text":"Method: GET API PATH: /services/system/v1/properties/extended","title":"Get extended properties"},{"location":"references/rest-apis/rest-system-api/#responses_1","text":"200 OK status { \"version\" : \"1.0\" , \"extendedProperties\" : { \"Device Info 1\" : { \"exampleKey1\" : \"value1\" , \"exampleKey2\" : \"value2\" }, \"Device Info 2\" : { \"key1\" : \"val1\" , \"key2\" : \"val2\" } } } 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-system-api/#get-kura-properties","text":"Method: GET API PATH: /services/system/v1/properties/kura","title":"Get Kura properties"},{"location":"references/rest-apis/rest-system-api/#responses_2","text":"200 OK status { \"kuraProperties\" : { \"kura.platform\" : \"aarch64\" , \"org.osgi.framework.version\" : \"1.10.0\" , \"kura.user.config\" : \"/opt/eclipse/kura/user\" , \"java.vm.vendor\" : \"Temurin\" , \"kura.name\" : \"Eclipse Kura\" , \"file.command.zip.max.number\" : \"1024\" , \"kura.legacy.ppp.logging.enabled\" : \"true\" , \"kura.tmp\" : \"/tmp/.kura\" , \"kura.packages\" : \"/opt/eclipse/kura/packages\" , \"build.version\" : \"buildNumber\" , \"kura.log.download.journal.fields\" : \"SYSLOG_IDENTIFIER,PRIORITY,MESSAGE,STACKTRACE\" , \"kura.data\" : \"/opt/eclipse/kura/data\" , \"os.name\" : \"Linux\" , \"dpa.read.timeout\" : \"60000\" , \"file.upload.size.max\" : \"-1\" , \"console.device.management.service.ignore\" : \"org.eclipse.kura.net.admin.NetworkConfigurationService,org.eclipse.kura.net.admin.FirewallConfigurationService\" , \"kura.command.user\" : \"kura\" , \"kura.device.name\" : \"raspberry\" , \"kura.partNumber\" : \"raspberry\" , \"kura.project\" : \"generic-arm32\" , \"kura.company\" : \"EUROTECH\" , \"java.home\" : \"/usr/lib/jvm/java-8-openjdk-armhf/jre\" , \"version\" : \"5.4.0-SNAPSHOT\" , \"kura.style.dir\" : \"/opt/eclipse/kura/console/skin\" , \"kura.model.id\" : \"raspberry\" , \"file.separator\" : \"/\" , \"jdk.vendor.version\" : \"Zulu 8.70.0.24-SA-linux64\" , \"kura.model.name\" : \"raspberry\" , \"kura.serialNumber.provider\" : \"cat /proc/cpuinfo | grep Serial | cut -d ' ' -f 2\" , \"kura.have.web.inter\" : \"true\" , \"kura.legacy.bluetooth.beacon.scan\" : \"false\" , \"java.runtime.version\" : \"1.8.0_312-8u312-b07-1+rpi1-b07\" , \"kura.bios.version\" : \"N/A\" , \"kura.marketplace.compatibility.version\" : \"KURA_5.4.0-SNAPSHOT\" , \"kura.framework.config\" : \"/opt/eclipse/kura/framework\" , \"kura.firmware.version\" : \"N/A\" , \"kura.plugins\" : \"/opt/eclipse/kura/plugins\" , \"os.version\" : \"6.1.21-v8+ #1642 SMP PREEMPT Mon Apr 3 17:24:16 BST 2023\" , \"kura.version\" : \"KURA_5.4.0-SNAPSHOT\" , \"org.osgi.framework.vendor\" : \"Eclipse\" , \"java.runtime.name\" : \"OpenJDK Runtime Environment\" , \"kura.log.download.sources\" : \"/var/log\" , \"os.distribution\" : \"Linux\" , \"java.vm.name\" : \"OpenJDK Client VM\" , \"kura.primary.network.interface\" : \"eth0\" , \"kura.home\" : \"/opt/eclipse/kura\" , \"file.command.zip.max.size\" : \"100\" , \"os.arch\" : \"arm\" , \"os.distribution.version\" : \"N/A\" , \"file.upload.in.memory.size.threshold\" : \"10240\" , \"kura.net.virtual.devices.config\" : \"unmanaged\" , \"kura.snapshots\" : \"/opt/eclipse/kura/user/snapshots\" , \"kura.have.net.admin\" : \"true\" , \"java.vm.info\" : \"mixed mode\" , \"java.vm.version\" : \"25.312-b07\" , \"dpa.connection.timeout\" : \"60000\" , \"build.number\" : \"generic-arm32-buildNumber\" , \"ccs.status.notification.url\" : \"ccs:log\" } } 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-system-api/#post-methods","text":"","title":"POST methods"},{"location":"references/rest-apis/rest-system-api/#filter-framework-properties","text":"This method allows to retrieve framework-related properties by their name. Available properties are in table Framework properties . Method: POST API PATH: /services/system/v1/properties/framework/filter","title":"Filter framework properties"},{"location":"references/rest-apis/rest-system-api/#request-body","text":"{ \"names\" : [ \"deviceName\" , \"numberOfProcessors\" , \"kuraHaveNetAdmin\" ] }","title":"Request Body"},{"location":"references/rest-apis/rest-system-api/#responses_3","text":"200 OK status { \"deviceName\" : \"RASBPERRY PI 4\" , \"numberOfProcessors\" : 4 , \"kuraHaveNetAdmin\" : true } 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-system-api/#filter-extended-properties","text":"This method allows to retrieve the extended properties and to filter them by group name. Method: POST API PATH: /services/system/v1/properties/extended/filter","title":"Filter extended properties"},{"location":"references/rest-apis/rest-system-api/#request-body_1","text":"{ \"groupNames\" : [ \"Device Info 1\" ] }","title":"Request Body"},{"location":"references/rest-apis/rest-system-api/#responses_4","text":"200 OK status { \"extendedProperties\" : { \"Device Info 1\" : { \"exampleKey1\" : \"value1\" , \"exampleKey2\" : \"value2\" } } } 500 Internal Server Error","title":"Responses"},{"location":"references/rest-apis/rest-system-api/#filter-kura-properties","text":"This method allows to retrieve Kura-related properties (derived from the kura.properties file) and filter by their name. Available properties are listed in the table Kura properties . Method: POST API PATH: /services/system/v1/properties/kura/filter","title":"Filter kura properties"},{"location":"references/rest-apis/rest-system-api/#request-body_2","text":"{ \"names\" : [ \"kura.platform\" , \"file.upload.size.max\" , \"kura.have.net.admin\" ] }","title":"Request Body"},{"location":"references/rest-apis/rest-system-api/#responses_5","text":"200 OK status { \"kuraProperties\" : { \"kura.platform\" : \"aarch64\" , \"kura.have.net.admin\" : \"true\" , \"file.upload.size.max\" : \"-1\" } } 500 Internal Server Error","title":"Responses"},{"location":"tutorials/AD-EdgeAI/","text":"(function (global, factory) { typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.ClipboardCopyElement = factory()); }(this, function () { 'use strict'; function createNode(text) { const node = document.createElement('pre'); node.style.width = '1px'; node.style.height = '1px'; node.style.position = 'fixed'; node.style.top = '5px'; node.textContent = text; return node; } function copyNode(node) { if ('clipboard' in navigator) { // eslint-disable-next-line flowtype/no-flow-fix-me-comments // $FlowFixMe Clipboard is not defined in Flow yet. return navigator.clipboard.writeText(node.textContent); } const selection = getSelection(); if (selection == null) { return Promise.reject(new Error()); } selection.removeAllRanges(); const range = document.createRange(); range.selectNodeContents(node); selection.addRange(range); document.execCommand('copy'); selection.removeAllRanges(); return Promise.resolve(); } function copyText(text) { if ('clipboard' in navigator) { // eslint-disable-next-line flowtype/no-flow-fix-me-comments // $FlowFixMe Clipboard is not defined in Flow yet. return navigator.clipboard.writeText(text); } const body = document.body; if (!body) { return Promise.reject(new Error()); } const node = createNode(text); body.appendChild(node); copyNode(node); body.removeChild(node); return Promise.resolve(); } function copy(button) { const id = button.getAttribute('for'); const text = button.getAttribute('value'); function trigger() { button.dispatchEvent(new CustomEvent('clipboard-copy', { bubbles: true })); } if (text) { copyText(text).then(trigger); } else if (id) { const root = 'getRootNode' in Element.prototype ? button.getRootNode() : button.ownerDocument; if (!(root instanceof Document || 'ShadowRoot' in window && root instanceof ShadowRoot)) return; const node = root.getElementById(id); if (node) copyTarget(node).then(trigger); } } function copyTarget(content) { if (content instanceof HTMLInputElement || content instanceof HTMLTextAreaElement) { return copyText(content.value); } else if (content instanceof HTMLAnchorElement && content.hasAttribute('href')) { return copyText(content.href); } else { return copyNode(content); } } function clicked(event) { const button = event.currentTarget; if (button instanceof HTMLElement) { copy(button); } } function keydown(event) { if (event.key === ' ' || event.key === 'Enter') { const button = event.currentTarget; if (button instanceof HTMLElement) { event.preventDefault(); copy(button); } } } function focused(event) { event.currentTarget.addEventListener('keydown', keydown); } function blurred(event) { event.currentTarget.removeEventListener('keydown', keydown); } class ClipboardCopyElement extends HTMLElement { constructor() { super(); this.addEventListener('click', clicked); this.addEventListener('focus', focused); this.addEventListener('blur', blurred); } connectedCallback() { if (!this.hasAttribute('tabindex')) { this.setAttribute('tabindex', '0'); } if (!this.hasAttribute('role')) { this.setAttribute('role', 'button'); } } get value() { return this.getAttribute('value') || ''; } set value(text) { this.setAttribute('value', text); } } if (!window.customElements.get('clipboard-copy')) { window.ClipboardCopyElement = ClipboardCopyElement; window.customElements.define('clipboard-copy', ClipboardCopyElement); } return ClipboardCopyElement; })); document.addEventListener('clipboard-copy', function(event) { const notice = event.target.querySelector('.notice') notice.hidden = false setTimeout(function() { notice.hidden = true }, 1000) }) pre { line-height: 125%; } td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; } span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; } td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; } .highlight-ipynb .hll { background-color: var(--jp-cell-editor-active-background) } .highlight-ipynb { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) } .highlight-ipynb .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */ .highlight-ipynb .err { color: var(--jp-mirror-editor-error-color) } /* Error */ .highlight-ipynb .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */ .highlight-ipynb .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */ .highlight-ipynb .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */ .highlight-ipynb .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */ .highlight-ipynb .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */ .highlight-ipynb .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */ .highlight-ipynb .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */ .highlight-ipynb .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */ .highlight-ipynb .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */ .highlight-ipynb .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */ .highlight-ipynb .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */ .highlight-ipynb .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */ .highlight-ipynb .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */ .highlight-ipynb .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */ .highlight-ipynb .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */ .highlight-ipynb .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */ .highlight-ipynb .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */ .highlight-ipynb .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */ .highlight-ipynb .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */ /* This file is taken from the built JupyterLab theme.css Found on share/nbconvert/templates/lab/static Some changes have been made and marked with CHANGE */ .jupyter-wrapper { /* Elevation * * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here: * * https://github.com/material-components/material-components-web * https://material-components-web.appspot.com/elevation.html */ --jp-shadow-base-lightness: 0; --jp-shadow-umbra-color: rgba( var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), 0.2 ); --jp-shadow-penumbra-color: rgba( var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), 0.14 ); --jp-shadow-ambient-color: rgba( var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), 0.12 ); --jp-elevation-z0: none; --jp-elevation-z1: 0px 2px 1px -1px var(--jp-shadow-umbra-color), 0px 1px 1px 0px var(--jp-shadow-penumbra-color), 0px 1px 3px 0px var(--jp-shadow-ambient-color); --jp-elevation-z2: 0px 3px 1px -2px var(--jp-shadow-umbra-color), 0px 2px 2px 0px var(--jp-shadow-penumbra-color), 0px 1px 5px 0px var(--jp-shadow-ambient-color); --jp-elevation-z4: 0px 2px 4px -1px var(--jp-shadow-umbra-color), 0px 4px 5px 0px var(--jp-shadow-penumbra-color), 0px 1px 10px 0px var(--jp-shadow-ambient-color); --jp-elevation-z6: 0px 3px 5px -1px var(--jp-shadow-umbra-color), 0px 6px 10px 0px var(--jp-shadow-penumbra-color), 0px 1px 18px 0px var(--jp-shadow-ambient-color); --jp-elevation-z8: 0px 5px 5px -3px var(--jp-shadow-umbra-color), 0px 8px 10px 1px var(--jp-shadow-penumbra-color), 0px 3px 14px 2px var(--jp-shadow-ambient-color); --jp-elevation-z12: 0px 7px 8px -4px var(--jp-shadow-umbra-color), 0px 12px 17px 2px var(--jp-shadow-penumbra-color), 0px 5px 22px 4px var(--jp-shadow-ambient-color); --jp-elevation-z16: 0px 8px 10px -5px var(--jp-shadow-umbra-color), 0px 16px 24px 2px var(--jp-shadow-penumbra-color), 0px 6px 30px 5px var(--jp-shadow-ambient-color); --jp-elevation-z20: 0px 10px 13px -6px var(--jp-shadow-umbra-color), 0px 20px 31px 3px var(--jp-shadow-penumbra-color), 0px 8px 38px 7px var(--jp-shadow-ambient-color); --jp-elevation-z24: 0px 11px 15px -7px var(--jp-shadow-umbra-color), 0px 24px 38px 3px var(--jp-shadow-penumbra-color), 0px 9px 46px 8px var(--jp-shadow-ambient-color); /* Borders * * The following variables, specify the visual styling of borders in JupyterLab. */ --jp-border-width: 1px; --jp-border-color0: var(--md-grey-400); --jp-border-color1: var(--md-grey-400); --jp-border-color2: var(--md-grey-300); --jp-border-color3: var(--md-grey-200); --jp-border-radius: 2px; /* UI Fonts * * The UI font CSS variables are used for the typography all of the JupyterLab * user interface elements that are not directly user generated content. * * The font sizing here is done assuming that the body font size of --jp-ui-font-size1 * is applied to a parent element. When children elements, such as headings, are sized * in em all things will be computed relative to that body size. */ --jp-ui-font-scale-factor: 1.2; --jp-ui-font-size0: 0.83333em; --jp-ui-font-size1: 13px; /* Base font size */ --jp-ui-font-size2: 1.2em; --jp-ui-font-size3: 1.44em; --jp-ui-font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; /* * Use these font colors against the corresponding main layout colors. * In a light theme, these go from dark to light. */ /* Defaults use Material Design specification */ --jp-ui-font-color0: rgba(0, 0, 0, 1); --jp-ui-font-color1: rgba(0, 0, 0, 0.87); --jp-ui-font-color2: rgba(0, 0, 0, 0.54); --jp-ui-font-color3: rgba(0, 0, 0, 0.38); /* * Use these against the brand/accent/warn/error colors. * These will typically go from light to darker, in both a dark and light theme. */ --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1); --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1); --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7); --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5); /* Content Fonts * * Content font variables are used for typography of user generated content. * * The font sizing here is done assuming that the body font size of --jp-content-font-size1 * is applied to a parent element. When children elements, such as headings, are sized * in em all things will be computed relative to that body size. */ --jp-content-line-height: 1.6; --jp-content-font-scale-factor: 1.2; --jp-content-font-size0: 0.83333em; --jp-content-font-size1: 14px; /* Base font size */ --jp-content-font-size2: 1.2em; --jp-content-font-size3: 1.44em; --jp-content-font-size4: 1.728em; --jp-content-font-size5: 2.0736em; /* This gives a magnification of about 125% in presentation mode over normal. */ --jp-content-presentation-font-size1: 17px; --jp-content-heading-line-height: 1; --jp-content-heading-margin-top: 1.2em; --jp-content-heading-margin-bottom: 0.8em; --jp-content-heading-font-weight: 500; /* Defaults use Material Design specification */ --jp-content-font-color0: rgba(0, 0, 0, 1); --jp-content-font-color1: rgba(0, 0, 0, 0.87); --jp-content-font-color2: rgba(0, 0, 0, 0.54); --jp-content-font-color3: rgba(0, 0, 0, 0.38); --jp-content-link-color: var(--md-blue-700); --jp-content-font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; /* * Code Fonts * * Code font variables are used for typography of code and other monospaces content. */ --jp-code-font-size: 13px; --jp-code-line-height: 1.3077; /* 17px for 13px base */ --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */ --jp-code-font-family-default: Menlo, Consolas, \"DejaVu Sans Mono\", monospace; --jp-code-font-family: var(--jp-code-font-family-default); /* This gives a magnification of about 125% in presentation mode over normal. */ --jp-code-presentation-font-size: 16px; /* may need to tweak cursor width if you change font size */ --jp-code-cursor-width0: 1.4px; --jp-code-cursor-width1: 2px; --jp-code-cursor-width2: 4px; /* Layout * * The following are the main layout colors use in JupyterLab. In a light * theme these would go from light to dark. */ --jp-layout-color0: white; --jp-layout-color1: white; --jp-layout-color2: var(--md-grey-200); --jp-layout-color3: var(--md-grey-400); --jp-layout-color4: var(--md-grey-600); /* Inverse Layout * * The following are the inverse layout colors use in JupyterLab. In a light * theme these would go from dark to light. */ --jp-inverse-layout-color0: #111111; --jp-inverse-layout-color1: var(--md-grey-900); --jp-inverse-layout-color2: var(--md-grey-800); --jp-inverse-layout-color3: var(--md-grey-700); --jp-inverse-layout-color4: var(--md-grey-600); /* Brand/accent */ --jp-brand-color0: var(--md-blue-900); --jp-brand-color1: var(--md-blue-700); --jp-brand-color2: var(--md-blue-300); --jp-brand-color3: var(--md-blue-100); --jp-brand-color4: var(--md-blue-50); --jp-accent-color0: var(--md-green-900); --jp-accent-color1: var(--md-green-700); --jp-accent-color2: var(--md-green-300); --jp-accent-color3: var(--md-green-100); /* State colors (warn, error, success, info) */ --jp-warn-color0: var(--md-orange-900); --jp-warn-color1: var(--md-orange-700); --jp-warn-color2: var(--md-orange-300); --jp-warn-color3: var(--md-orange-100); --jp-error-color0: var(--md-red-900); --jp-error-color1: var(--md-red-700); --jp-error-color2: var(--md-red-300); --jp-error-color3: var(--md-red-100); --jp-success-color0: var(--md-green-900); --jp-success-color1: var(--md-green-700); --jp-success-color2: var(--md-green-300); --jp-success-color3: var(--md-green-100); --jp-info-color0: var(--md-cyan-900); --jp-info-color1: var(--md-cyan-700); --jp-info-color2: var(--md-cyan-300); --jp-info-color3: var(--md-cyan-100); /* Cell specific styles */ --jp-cell-padding: 5px; --jp-cell-collapser-width: 8px; --jp-cell-collapser-min-height: 20px; --jp-cell-collapser-not-active-hover-opacity: 0.6; --jp-cell-editor-background: var(--md-grey-100); --jp-cell-editor-border-color: var(--md-grey-300); --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300); --jp-cell-editor-active-background: var(--jp-layout-color0); --jp-cell-editor-active-border-color: var(--jp-brand-color1); --jp-cell-prompt-width: 64px; --jp-cell-prompt-font-family: var(--jp-code-font-family-default); --jp-cell-prompt-letter-spacing: 0px; --jp-cell-prompt-opacity: 1; --jp-cell-prompt-not-active-opacity: 0.5; --jp-cell-prompt-not-active-font-color: var(--md-grey-700); /* A custom blend of MD grey and blue 600 * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */ --jp-cell-inprompt-font-color: #307fc1; /* A custom blend of MD grey and orange 600 * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */ --jp-cell-outprompt-font-color: #bf5b3d; /* Notebook specific styles */ --jp-notebook-padding: 10px; --jp-notebook-select-background: var(--jp-layout-color1); --jp-notebook-multiselected-color: var(--md-blue-50); /* The scroll padding is calculated to fill enough space at the bottom of the notebook to show one single-line cell (with appropriate padding) at the top when the notebook is scrolled all the way to the bottom. We also subtract one pixel so that no scrollbar appears if we have just one single-line cell in the notebook. This padding is to enable a 'scroll past end' feature in a notebook. */ --jp-notebook-scroll-padding: calc( 100% - var(--jp-code-font-size) * var(--jp-code-line-height) - var(--jp-code-padding) - var(--jp-cell-padding) - 1px ); /* Rendermime styles */ --jp-rendermime-error-background: #fdd; --jp-rendermime-table-row-background: var(--md-grey-100); --jp-rendermime-table-row-hover-background: var(--md-light-blue-50); /* Dialog specific styles */ --jp-dialog-background: rgba(0, 0, 0, 0.25); /* Console specific styles */ --jp-console-padding: 10px; /* Toolbar specific styles */ --jp-toolbar-border-color: var(--jp-border-color1); --jp-toolbar-micro-height: 8px; --jp-toolbar-background: var(--jp-layout-color1); --jp-toolbar-box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.24); --jp-toolbar-header-margin: 4px 4px 0px 4px; --jp-toolbar-active-background: var(--md-grey-300); /* Statusbar specific styles */ --jp-statusbar-height: 24px; /* Input field styles */ --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300); --jp-input-active-background: var(--jp-layout-color1); --jp-input-hover-background: var(--jp-layout-color1); --jp-input-background: var(--md-grey-100); --jp-input-border-color: var(--jp-border-color1); --jp-input-active-border-color: var(--jp-brand-color1); --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3); /* General editor styles */ --jp-editor-selected-background: #d9d9d9; --jp-editor-selected-focused-background: #d7d4f0; --jp-editor-cursor-color: var(--jp-ui-font-color0); /* Code mirror specific styles */ --jp-mirror-editor-keyword-color: #008000; --jp-mirror-editor-atom-color: #88f; --jp-mirror-editor-number-color: #080; --jp-mirror-editor-def-color: #00f; --jp-mirror-editor-variable-color: var(--md-grey-900); --jp-mirror-editor-variable-2-color: #05a; --jp-mirror-editor-variable-3-color: #085; --jp-mirror-editor-punctuation-color: #05a; --jp-mirror-editor-property-color: #05a; --jp-mirror-editor-operator-color: #aa22ff; --jp-mirror-editor-comment-color: #408080; --jp-mirror-editor-string-color: #ba2121; --jp-mirror-editor-string-2-color: #708; --jp-mirror-editor-meta-color: #aa22ff; --jp-mirror-editor-qualifier-color: #555; --jp-mirror-editor-builtin-color: #008000; --jp-mirror-editor-bracket-color: #997; --jp-mirror-editor-tag-color: #170; --jp-mirror-editor-attribute-color: #00c; --jp-mirror-editor-header-color: blue; --jp-mirror-editor-quote-color: #090; --jp-mirror-editor-link-color: #00c; --jp-mirror-editor-error-color: #f00; --jp-mirror-editor-hr-color: #999; /* Vega extension styles */ --jp-vega-background: white; /* Sidebar-related styles */ --jp-sidebar-min-width: 250px; /* Search-related styles */ --jp-search-toggle-off-opacity: 0.5; --jp-search-toggle-hover-opacity: 0.8; --jp-search-toggle-on-opacity: 1; --jp-search-selected-match-background-color: rgb(245, 200, 0); --jp-search-selected-match-color: black; --jp-search-unselected-match-background-color: var( --jp-inverse-layout-color0 ); --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0); /* Icon colors that work well with light or dark backgrounds */ --jp-icon-contrast-color0: var(--md-purple-600); --jp-icon-contrast-color1: var(--md-green-600); --jp-icon-contrast-color2: var(--md-pink-600); --jp-icon-contrast-color3: var(--md-blue-600); } [data-md-color-scheme=\"slate\"] .jupyter-wrapper { /* Elevation * * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here: * * https://github.com/material-components/material-components-web * https://material-components-web.appspot.com/elevation.html */ /* The dark theme shadows need a bit of work, but this will probably also require work on the core layout * colors used in the theme as well. */ --jp-shadow-base-lightness: 32; --jp-shadow-umbra-color: rgba( var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), 0.2 ); --jp-shadow-penumbra-color: rgba( var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), 0.14 ); --jp-shadow-ambient-color: rgba( var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), var(--jp-shadow-base-lightness), 0.12 ); --jp-elevation-z0: none; --jp-elevation-z1: 0px 2px 1px -1px var(--jp-shadow-umbra-color), 0px 1px 1px 0px var(--jp-shadow-penumbra-color), 0px 1px 3px 0px var(--jp-shadow-ambient-color); --jp-elevation-z2: 0px 3px 1px -2px var(--jp-shadow-umbra-color), 0px 2px 2px 0px var(--jp-shadow-penumbra-color), 0px 1px 5px 0px var(--jp-shadow-ambient-color); --jp-elevation-z4: 0px 2px 4px -1px var(--jp-shadow-umbra-color), 0px 4px 5px 0px var(--jp-shadow-penumbra-color), 0px 1px 10px 0px var(--jp-shadow-ambient-color); --jp-elevation-z6: 0px 3px 5px -1px var(--jp-shadow-umbra-color), 0px 6px 10px 0px var(--jp-shadow-penumbra-color), 0px 1px 18px 0px var(--jp-shadow-ambient-color); --jp-elevation-z8: 0px 5px 5px -3px var(--jp-shadow-umbra-color), 0px 8px 10px 1px var(--jp-shadow-penumbra-color), 0px 3px 14px 2px var(--jp-shadow-ambient-color); --jp-elevation-z12: 0px 7px 8px -4px var(--jp-shadow-umbra-color), 0px 12px 17px 2px var(--jp-shadow-penumbra-color), 0px 5px 22px 4px var(--jp-shadow-ambient-color); --jp-elevation-z16: 0px 8px 10px -5px var(--jp-shadow-umbra-color), 0px 16px 24px 2px var(--jp-shadow-penumbra-color), 0px 6px 30px 5px var(--jp-shadow-ambient-color); --jp-elevation-z20: 0px 10px 13px -6px var(--jp-shadow-umbra-color), 0px 20px 31px 3px var(--jp-shadow-penumbra-color), 0px 8px 38px 7px var(--jp-shadow-ambient-color); --jp-elevation-z24: 0px 11px 15px -7px var(--jp-shadow-umbra-color), 0px 24px 38px 3px var(--jp-shadow-penumbra-color), 0px 9px 46px 8px var(--jp-shadow-ambient-color); /* Borders * * The following variables, specify the visual styling of borders in JupyterLab. */ --jp-border-width: 1px; --jp-border-color0: var(--md-grey-700); --jp-border-color1: var(--md-grey-700); --jp-border-color2: var(--md-grey-800); --jp-border-color3: var(--md-grey-900); --jp-border-radius: 2px; /* UI Fonts * * The UI font CSS variables are used for the typography all of the JupyterLab * user interface elements that are not directly user generated content. * * The font sizing here is done assuming that the body font size of --jp-ui-font-size1 * is applied to a parent element. When children elements, such as headings, are sized * in em all things will be computed relative to that body size. */ --jp-ui-font-scale-factor: 1.2; --jp-ui-font-size0: 0.83333em; --jp-ui-font-size1: 13px; /* Base font size */ --jp-ui-font-size2: 1.2em; --jp-ui-font-size3: 1.44em; --jp-ui-font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; /* * Use these font colors against the corresponding main layout colors. * In a light theme, these go from dark to light. */ /* Defaults use Material Design specification */ --jp-ui-font-color0: rgba(255, 255, 255, 1); --jp-ui-font-color1: rgba(255, 255, 255, 0.87); --jp-ui-font-color2: rgba(255, 255, 255, 0.54); --jp-ui-font-color3: rgba(255, 255, 255, 0.38); /* * Use these against the brand/accent/warn/error colors. * These will typically go from light to darker, in both a dark and light theme. */ --jp-ui-inverse-font-color0: rgba(0, 0, 0, 1); --jp-ui-inverse-font-color1: rgba(0, 0, 0, 0.8); --jp-ui-inverse-font-color2: rgba(0, 0, 0, 0.5); --jp-ui-inverse-font-color3: rgba(0, 0, 0, 0.3); /* Content Fonts * * Content font variables are used for typography of user generated content. * * The font sizing here is done assuming that the body font size of --jp-content-font-size1 * is applied to a parent element. When children elements, such as headings, are sized * in em all things will be computed relative to that body size. */ --jp-content-line-height: 1.6; --jp-content-font-scale-factor: 1.2; --jp-content-font-size0: 0.83333em; --jp-content-font-size1: 14px; /* Base font size */ --jp-content-font-size2: 1.2em; --jp-content-font-size3: 1.44em; --jp-content-font-size4: 1.728em; --jp-content-font-size5: 2.0736em; /* This gives a magnification of about 125% in presentation mode over normal. */ --jp-content-presentation-font-size1: 17px; --jp-content-heading-line-height: 1; --jp-content-heading-margin-top: 1.2em; --jp-content-heading-margin-bottom: 0.8em; --jp-content-heading-font-weight: 500; /* Defaults use Material Design specification */ --jp-content-font-color0: rgba(255, 255, 255, 1); --jp-content-font-color1: rgba(255, 255, 255, 1); --jp-content-font-color2: rgba(255, 255, 255, 0.7); --jp-content-font-color3: rgba(255, 255, 255, 0.5); --jp-content-link-color: var(--md-blue-300); --jp-content-font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; /* * Code Fonts * * Code font variables are used for typography of code and other monospaces content. */ --jp-code-font-size: 13px; --jp-code-line-height: 1.3077; /* 17px for 13px base */ --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */ --jp-code-font-family-default: Menlo, Consolas, \"DejaVu Sans Mono\", monospace; --jp-code-font-family: var(--jp-code-font-family-default); /* This gives a magnification of about 125% in presentation mode over normal. */ --jp-code-presentation-font-size: 16px; /* may need to tweak cursor width if you change font size */ --jp-code-cursor-width0: 1.4px; --jp-code-cursor-width1: 2px; --jp-code-cursor-width2: 4px; /* Layout * * The following are the main layout colors use in JupyterLab. In a light * theme these would go from light to dark. */ --jp-layout-color0: #111111; --jp-layout-color1: var(--md-grey-900); --jp-layout-color2: var(--md-grey-800); --jp-layout-color3: var(--md-grey-700); --jp-layout-color4: var(--md-grey-600); /* Inverse Layout * * The following are the inverse layout colors use in JupyterLab. In a light * theme these would go from dark to light. */ --jp-inverse-layout-color0: white; --jp-inverse-layout-color1: white; --jp-inverse-layout-color2: var(--md-grey-200); --jp-inverse-layout-color3: var(--md-grey-400); --jp-inverse-layout-color4: var(--md-grey-600); /* Brand/accent */ --jp-brand-color0: var(--md-blue-700); --jp-brand-color1: var(--md-blue-500); --jp-brand-color2: var(--md-blue-300); --jp-brand-color3: var(--md-blue-100); --jp-brand-color4: var(--md-blue-50); --jp-accent-color0: var(--md-green-700); --jp-accent-color1: var(--md-green-500); --jp-accent-color2: var(--md-green-300); --jp-accent-color3: var(--md-green-100); /* State colors (warn, error, success, info) */ --jp-warn-color0: var(--md-orange-700); --jp-warn-color1: var(--md-orange-500); --jp-warn-color2: var(--md-orange-300); --jp-warn-color3: var(--md-orange-100); --jp-error-color0: var(--md-red-700); --jp-error-color1: var(--md-red-500); --jp-error-color2: var(--md-red-300); --jp-error-color3: var(--md-red-100); --jp-success-color0: var(--md-green-700); --jp-success-color1: var(--md-green-500); --jp-success-color2: var(--md-green-300); --jp-success-color3: var(--md-green-100); --jp-info-color0: var(--md-cyan-700); --jp-info-color1: var(--md-cyan-500); --jp-info-color2: var(--md-cyan-300); --jp-info-color3: var(--md-cyan-100); /* Cell specific styles */ --jp-cell-padding: 5px; --jp-cell-collapser-width: 8px; --jp-cell-collapser-min-height: 20px; --jp-cell-collapser-not-active-hover-opacity: 0.6; --jp-cell-editor-background: var(--jp-layout-color1); --jp-cell-editor-border-color: var(--md-grey-700); --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300); --jp-cell-editor-active-background: var(--jp-layout-color0); --jp-cell-editor-active-border-color: var(--jp-brand-color1); --jp-cell-prompt-width: 64px; --jp-cell-prompt-font-family: var(--jp-code-font-family-default); --jp-cell-prompt-letter-spacing: 0px; --jp-cell-prompt-opacity: 1; --jp-cell-prompt-not-active-opacity: 1; --jp-cell-prompt-not-active-font-color: var(--md-grey-300); /* A custom blend of MD grey and blue 600 * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */ --jp-cell-inprompt-font-color: #307fc1; /* A custom blend of MD grey and orange 600 * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */ --jp-cell-outprompt-font-color: #bf5b3d; /* Notebook specific styles */ --jp-notebook-padding: 10px; --jp-notebook-select-background: var(--jp-layout-color1); --jp-notebook-multiselected-color: rgba(33, 150, 243, 0.24); /* The scroll padding is calculated to fill enough space at the bottom of the notebook to show one single-line cell (with appropriate padding) at the top when the notebook is scrolled all the way to the bottom. We also subtract one pixel so that no scrollbar appears if we have just one single-line cell in the notebook. This padding is to enable a 'scroll past end' feature in a notebook. */ --jp-notebook-scroll-padding: calc( 100% - var(--jp-code-font-size) * var(--jp-code-line-height) - var(--jp-code-padding) - var(--jp-cell-padding) - 1px ); /* Rendermime styles */ --jp-rendermime-error-background: rgba(244, 67, 54, 0.28); --jp-rendermime-table-row-background: var(--md-grey-900); --jp-rendermime-table-row-hover-background: rgba(3, 169, 244, 0.2); /* Dialog specific styles */ --jp-dialog-background: rgba(0, 0, 0, 0.6); /* Console specific styles */ --jp-console-padding: 10px; /* Toolbar specific styles */ --jp-toolbar-border-color: var(--jp-border-color2); --jp-toolbar-micro-height: 8px; --jp-toolbar-background: var(--jp-layout-color1); --jp-toolbar-box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.8); --jp-toolbar-header-margin: 4px 4px 0px 4px; --jp-toolbar-active-background: var(--jp-layout-color0); /* Statusbar specific styles */ --jp-statusbar-height: 24px; /* Input field styles */ --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300); --jp-input-active-background: var(--jp-layout-color0); --jp-input-hover-background: var(--jp-layout-color2); --jp-input-background: var(--md-grey-800); --jp-input-border-color: var(--jp-border-color1); --jp-input-active-border-color: var(--jp-brand-color1); --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3); /* General editor styles */ --jp-editor-selected-background: var(--jp-layout-color2); --jp-editor-selected-focused-background: rgba(33, 150, 243, 0.24); --jp-editor-cursor-color: var(--jp-ui-font-color0); /* Code mirror specific styles */ --jp-mirror-editor-keyword-color: var(--md-green-500); --jp-mirror-editor-atom-color: var(--md-blue-300); --jp-mirror-editor-number-color: var(--md-green-400); --jp-mirror-editor-def-color: var(--md-blue-600); --jp-mirror-editor-variable-color: var(--md-grey-300); --jp-mirror-editor-variable-2-color: var(--md-blue-400); --jp-mirror-editor-variable-3-color: var(--md-green-600); --jp-mirror-editor-punctuation-color: var(--md-blue-400); --jp-mirror-editor-property-color: var(--md-blue-400); --jp-mirror-editor-operator-color: #aa22ff; --jp-mirror-editor-comment-color: #408080; --jp-mirror-editor-string-color: #ff7070; --jp-mirror-editor-string-2-color: var(--md-purple-300); --jp-mirror-editor-meta-color: #aa22ff; --jp-mirror-editor-qualifier-color: #555; --jp-mirror-editor-builtin-color: var(--md-green-600); --jp-mirror-editor-bracket-color: #997; --jp-mirror-editor-tag-color: var(--md-green-700); --jp-mirror-editor-attribute-color: var(--md-blue-700); --jp-mirror-editor-header-color: var(--md-blue-500); --jp-mirror-editor-quote-color: var(--md-green-300); --jp-mirror-editor-link-color: var(--md-blue-700); --jp-mirror-editor-error-color: #f00; --jp-mirror-editor-hr-color: #999; /* Vega extension styles */ --jp-vega-background: var(--md-grey-400); /* Sidebar-related styles */ --jp-sidebar-min-width: 250px; /* Search-related styles */ --jp-search-toggle-off-opacity: 0.6; --jp-search-toggle-hover-opacity: 0.8; --jp-search-toggle-on-opacity: 1; --jp-search-selected-match-background-color: rgb(255, 225, 0); --jp-search-selected-match-color: black; --jp-search-unselected-match-background-color: var( --jp-inverse-layout-color0 ); --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0); /* scrollbar related styles. Supports every browser except Edge. */ /* colors based on JetBrain's Darcula theme */ --jp-scrollbar-background-color: #3f4244; --jp-scrollbar-thumb-color: 88, 96, 97; /* need to specify thumb color as an RGB triplet */ --jp-scrollbar-endpad: 3px; /* the minimum gap between the thumb and the ends of a scrollbar */ /* hacks for setting the thumb shape. These do nothing in Firefox */ --jp-scrollbar-thumb-margin: 3.5px; /* the space in between the sides of the thumb and the track */ --jp-scrollbar-thumb-radius: 9px; /* set to a large-ish value for rounded endcaps on the thumb */ /* Icon colors that work well with light or dark backgrounds */ --jp-icon-contrast-color0: var(--md-purple-600); --jp-icon-contrast-color1: var(--md-green-600); --jp-icon-contrast-color2: var(--md-pink-600); --jp-icon-contrast-color3: var(--md-blue-600); } :root{--md-red-50: #ffebee;--md-red-100: #ffcdd2;--md-red-200: #ef9a9a;--md-red-300: #e57373;--md-red-400: #ef5350;--md-red-500: #f44336;--md-red-600: #e53935;--md-red-700: #d32f2f;--md-red-800: #c62828;--md-red-900: #b71c1c;--md-red-A100: #ff8a80;--md-red-A200: #ff5252;--md-red-A400: #ff1744;--md-red-A700: #d50000;--md-pink-50: #fce4ec;--md-pink-100: #f8bbd0;--md-pink-200: #f48fb1;--md-pink-300: #f06292;--md-pink-400: #ec407a;--md-pink-500: #e91e63;--md-pink-600: #d81b60;--md-pink-700: #c2185b;--md-pink-800: #ad1457;--md-pink-900: #880e4f;--md-pink-A100: #ff80ab;--md-pink-A200: #ff4081;--md-pink-A400: #f50057;--md-pink-A700: #c51162;--md-purple-50: #f3e5f5;--md-purple-100: #e1bee7;--md-purple-200: #ce93d8;--md-purple-300: #ba68c8;--md-purple-400: #ab47bc;--md-purple-500: #9c27b0;--md-purple-600: #8e24aa;--md-purple-700: #7b1fa2;--md-purple-800: #6a1b9a;--md-purple-900: #4a148c;--md-purple-A100: #ea80fc;--md-purple-A200: #e040fb;--md-purple-A400: #d500f9;--md-purple-A700: #aa00ff;--md-deep-purple-50: #ede7f6;--md-deep-purple-100: #d1c4e9;--md-deep-purple-200: #b39ddb;--md-deep-purple-300: #9575cd;--md-deep-purple-400: #7e57c2;--md-deep-purple-500: #673ab7;--md-deep-purple-600: #5e35b1;--md-deep-purple-700: #512da8;--md-deep-purple-800: #4527a0;--md-deep-purple-900: #311b92;--md-deep-purple-A100: #b388ff;--md-deep-purple-A200: #7c4dff;--md-deep-purple-A400: #651fff;--md-deep-purple-A700: #6200ea;--md-indigo-50: #e8eaf6;--md-indigo-100: #c5cae9;--md-indigo-200: #9fa8da;--md-indigo-300: #7986cb;--md-indigo-400: #5c6bc0;--md-indigo-500: #3f51b5;--md-indigo-600: #3949ab;--md-indigo-700: #303f9f;--md-indigo-800: #283593;--md-indigo-900: #1a237e;--md-indigo-A100: #8c9eff;--md-indigo-A200: #536dfe;--md-indigo-A400: #3d5afe;--md-indigo-A700: #304ffe;--md-blue-50: #e3f2fd;--md-blue-100: #bbdefb;--md-blue-200: #90caf9;--md-blue-300: #64b5f6;--md-blue-400: #42a5f5;--md-blue-500: #2196f3;--md-blue-600: #1e88e5;--md-blue-700: #1976d2;--md-blue-800: #1565c0;--md-blue-900: #0d47a1;--md-blue-A100: #82b1ff;--md-blue-A200: #448aff;--md-blue-A400: #2979ff;--md-blue-A700: #2962ff;--md-light-blue-50: #e1f5fe;--md-light-blue-100: #b3e5fc;--md-light-blue-200: #81d4fa;--md-light-blue-300: #4fc3f7;--md-light-blue-400: #29b6f6;--md-light-blue-500: #03a9f4;--md-light-blue-600: #039be5;--md-light-blue-700: #0288d1;--md-light-blue-800: #0277bd;--md-light-blue-900: #01579b;--md-light-blue-A100: #80d8ff;--md-light-blue-A200: #40c4ff;--md-light-blue-A400: #00b0ff;--md-light-blue-A700: #0091ea;--md-cyan-50: #e0f7fa;--md-cyan-100: #b2ebf2;--md-cyan-200: #80deea;--md-cyan-300: #4dd0e1;--md-cyan-400: #26c6da;--md-cyan-500: #00bcd4;--md-cyan-600: #00acc1;--md-cyan-700: #0097a7;--md-cyan-800: #00838f;--md-cyan-900: #006064;--md-cyan-A100: #84ffff;--md-cyan-A200: #18ffff;--md-cyan-A400: #00e5ff;--md-cyan-A700: #00b8d4;--md-teal-50: #e0f2f1;--md-teal-100: #b2dfdb;--md-teal-200: #80cbc4;--md-teal-300: #4db6ac;--md-teal-400: #26a69a;--md-teal-500: #009688;--md-teal-600: #00897b;--md-teal-700: #00796b;--md-teal-800: #00695c;--md-teal-900: #004d40;--md-teal-A100: #a7ffeb;--md-teal-A200: #64ffda;--md-teal-A400: #1de9b6;--md-teal-A700: #00bfa5;--md-green-50: #e8f5e9;--md-green-100: #c8e6c9;--md-green-200: #a5d6a7;--md-green-300: #81c784;--md-green-400: #66bb6a;--md-green-500: #4caf50;--md-green-600: #43a047;--md-green-700: #388e3c;--md-green-800: #2e7d32;--md-green-900: #1b5e20;--md-green-A100: #b9f6ca;--md-green-A200: #69f0ae;--md-green-A400: #00e676;--md-green-A700: #00c853;--md-light-green-50: #f1f8e9;--md-light-green-100: #dcedc8;--md-light-green-200: #c5e1a5;--md-light-green-300: #aed581;--md-light-green-400: #9ccc65;--md-light-green-500: #8bc34a;--md-light-green-600: #7cb342;--md-light-green-700: #689f38;--md-light-green-800: #558b2f;--md-light-green-900: #33691e;--md-light-green-A100: #ccff90;--md-light-green-A200: #b2ff59;--md-light-green-A400: #76ff03;--md-light-green-A700: #64dd17;--md-lime-50: #f9fbe7;--md-lime-100: #f0f4c3;--md-lime-200: #e6ee9c;--md-lime-300: #dce775;--md-lime-400: #d4e157;--md-lime-500: #cddc39;--md-lime-600: #c0ca33;--md-lime-700: #afb42b;--md-lime-800: #9e9d24;--md-lime-900: #827717;--md-lime-A100: #f4ff81;--md-lime-A200: #eeff41;--md-lime-A400: #c6ff00;--md-lime-A700: #aeea00;--md-yellow-50: #fffde7;--md-yellow-100: #fff9c4;--md-yellow-200: #fff59d;--md-yellow-300: #fff176;--md-yellow-400: #ffee58;--md-yellow-500: #ffeb3b;--md-yellow-600: #fdd835;--md-yellow-700: #fbc02d;--md-yellow-800: #f9a825;--md-yellow-900: #f57f17;--md-yellow-A100: #ffff8d;--md-yellow-A200: #ffff00;--md-yellow-A400: #ffea00;--md-yellow-A700: #ffd600;--md-amber-50: #fff8e1;--md-amber-100: #ffecb3;--md-amber-200: #ffe082;--md-amber-300: #ffd54f;--md-amber-400: #ffca28;--md-amber-500: #ffc107;--md-amber-600: #ffb300;--md-amber-700: #ffa000;--md-amber-800: #ff8f00;--md-amber-900: #ff6f00;--md-amber-A100: #ffe57f;--md-amber-A200: #ffd740;--md-amber-A400: #ffc400;--md-amber-A700: #ffab00;--md-orange-50: #fff3e0;--md-orange-100: #ffe0b2;--md-orange-200: #ffcc80;--md-orange-300: #ffb74d;--md-orange-400: #ffa726;--md-orange-500: #ff9800;--md-orange-600: #fb8c00;--md-orange-700: #f57c00;--md-orange-800: #ef6c00;--md-orange-900: #e65100;--md-orange-A100: #ffd180;--md-orange-A200: #ffab40;--md-orange-A400: #ff9100;--md-orange-A700: #ff6d00;--md-deep-orange-50: #fbe9e7;--md-deep-orange-100: #ffccbc;--md-deep-orange-200: #ffab91;--md-deep-orange-300: #ff8a65;--md-deep-orange-400: #ff7043;--md-deep-orange-500: #ff5722;--md-deep-orange-600: #f4511e;--md-deep-orange-700: #e64a19;--md-deep-orange-800: #d84315;--md-deep-orange-900: #bf360c;--md-deep-orange-A100: #ff9e80;--md-deep-orange-A200: #ff6e40;--md-deep-orange-A400: #ff3d00;--md-deep-orange-A700: #dd2c00;--md-brown-50: #efebe9;--md-brown-100: #d7ccc8;--md-brown-200: #bcaaa4;--md-brown-300: #a1887f;--md-brown-400: #8d6e63;--md-brown-500: #795548;--md-brown-600: #6d4c41;--md-brown-700: #5d4037;--md-brown-800: #4e342e;--md-brown-900: #3e2723;--md-grey-50: #fafafa;--md-grey-100: #f5f5f5;--md-grey-200: #eeeeee;--md-grey-300: #e0e0e0;--md-grey-400: #bdbdbd;--md-grey-500: #9e9e9e;--md-grey-600: #757575;--md-grey-700: #616161;--md-grey-800: #424242;--md-grey-900: #212121;--md-blue-grey-50: #eceff1;--md-blue-grey-100: #cfd8dc;--md-blue-grey-200: #b0bec5;--md-blue-grey-300: #90a4ae;--md-blue-grey-400: #78909c;--md-blue-grey-500: #607d8b;--md-blue-grey-600: #546e7a;--md-blue-grey-700: #455a64;--md-blue-grey-800: #37474f;--md-blue-grey-900: #263238}.jupyter-wrapper{/*! Copyright 2015-present Palantir Technologies, Inc. All rights reserved. Licensed under the Apache License, Version 2.0. *//*! Copyright 2017-present Palantir Technologies, Inc. All rights reserved. Licensed under the Apache License, Version 2.0. */}.jupyter-wrapper [data-jp-theme-scrollbars=true]{scrollbar-color:rgb(var(--jp-scrollbar-thumb-color)) var(--jp-scrollbar-background-color)}.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-hscrollbar,.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-vscrollbar{scrollbar-color:rgba(var(--jp-scrollbar-thumb-color), 0.5) rgba(0,0,0,0)}.jupyter-wrapper [data-jp-theme-scrollbars=true] ::-webkit-scrollbar,.jupyter-wrapper [data-jp-theme-scrollbars=true] ::-webkit-scrollbar-corner{background:var(--jp-scrollbar-background-color)}.jupyter-wrapper [data-jp-theme-scrollbars=true] ::-webkit-scrollbar-thumb{background:rgb(var(--jp-scrollbar-thumb-color));border:var(--jp-scrollbar-thumb-margin) solid rgba(0,0,0,0);background-clip:content-box;border-radius:var(--jp-scrollbar-thumb-radius)}.jupyter-wrapper [data-jp-theme-scrollbars=true] ::-webkit-scrollbar-track:horizontal{border-left:var(--jp-scrollbar-endpad) solid var(--jp-scrollbar-background-color);border-right:var(--jp-scrollbar-endpad) solid var(--jp-scrollbar-background-color)}.jupyter-wrapper [data-jp-theme-scrollbars=true] ::-webkit-scrollbar-track:vertical{border-top:var(--jp-scrollbar-endpad) solid var(--jp-scrollbar-background-color);border-bottom:var(--jp-scrollbar-endpad) solid var(--jp-scrollbar-background-color)}.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-hscrollbar::-webkit-scrollbar,.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-vscrollbar::-webkit-scrollbar,.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-hscrollbar::-webkit-scrollbar-corner,.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-vscrollbar::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-hscrollbar::-webkit-scrollbar-thumb,.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-vscrollbar::-webkit-scrollbar-thumb{background:rgba(var(--jp-scrollbar-thumb-color), 0.5);border:var(--jp-scrollbar-thumb-margin) solid rgba(0,0,0,0);background-clip:content-box;border-radius:var(--jp-scrollbar-thumb-radius)}.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-hscrollbar::-webkit-scrollbar-track:horizontal{border-left:var(--jp-scrollbar-endpad) solid rgba(0,0,0,0);border-right:var(--jp-scrollbar-endpad) solid rgba(0,0,0,0)}.jupyter-wrapper [data-jp-theme-scrollbars=true] .CodeMirror-vscrollbar::-webkit-scrollbar-track:vertical{border-top:var(--jp-scrollbar-endpad) solid rgba(0,0,0,0);border-bottom:var(--jp-scrollbar-endpad) solid rgba(0,0,0,0)}.jupyter-wrapper .lm-ScrollBar[data-orientation=horizontal]{min-height:16px;max-height:16px;min-width:45px;border-top:1px solid #a0a0a0}.jupyter-wrapper .lm-ScrollBar[data-orientation=vertical]{min-width:16px;max-width:16px;min-height:45px;border-left:1px solid #a0a0a0}.jupyter-wrapper .lm-ScrollBar-button{background-color:#f0f0f0;background-position:center center;min-height:15px;max-height:15px;min-width:15px;max-width:15px}.jupyter-wrapper .lm-ScrollBar-button:hover{background-color:#dadada}.jupyter-wrapper .lm-ScrollBar-button.lm-mod-active{background-color:#cdcdcd}.jupyter-wrapper .lm-ScrollBar-track{background:#f0f0f0}.jupyter-wrapper .lm-ScrollBar-thumb{background:#cdcdcd}.jupyter-wrapper .lm-ScrollBar-thumb:hover{background:#bababa}.jupyter-wrapper .lm-ScrollBar-thumb.lm-mod-active{background:#a0a0a0}.jupyter-wrapper .lm-ScrollBar[data-orientation=horizontal] .lm-ScrollBar-thumb{height:100%;min-width:15px;border-left:1px solid #a0a0a0;border-right:1px solid #a0a0a0}.jupyter-wrapper .lm-ScrollBar[data-orientation=vertical] .lm-ScrollBar-thumb{width:100%;min-height:15px;border-top:1px solid #a0a0a0;border-bottom:1px solid #a0a0a0}.jupyter-wrapper .lm-ScrollBar[data-orientation=horizontal] .lm-ScrollBar-button[data-action=decrement]{background-image:var(--jp-icon-caret-left);background-size:17px}.jupyter-wrapper .lm-ScrollBar[data-orientation=horizontal] .lm-ScrollBar-button[data-action=increment]{background-image:var(--jp-icon-caret-right);background-size:17px}.jupyter-wrapper .lm-ScrollBar[data-orientation=vertical] .lm-ScrollBar-button[data-action=decrement]{background-image:var(--jp-icon-caret-up);background-size:17px}.jupyter-wrapper .lm-ScrollBar[data-orientation=vertical] .lm-ScrollBar-button[data-action=increment]{background-image:var(--jp-icon-caret-down);background-size:17px}.jupyter-wrapper .p-Widget,.jupyter-wrapper .lm-Widget{box-sizing:border-box;position:relative;overflow:hidden;cursor:default}.jupyter-wrapper .p-Widget.p-mod-hidden,.jupyter-wrapper .lm-Widget.lm-mod-hidden{display:none !important}.jupyter-wrapper .p-CommandPalette,.jupyter-wrapper .lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .p-CommandPalette-search,.jupyter-wrapper .lm-CommandPalette-search{flex:0 0 auto}.jupyter-wrapper .p-CommandPalette-content,.jupyter-wrapper .lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none}.jupyter-wrapper .p-CommandPalette-header,.jupyter-wrapper .lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.jupyter-wrapper .p-CommandPalette-item,.jupyter-wrapper .lm-CommandPalette-item{display:flex;flex-direction:row}.jupyter-wrapper .p-CommandPalette-itemIcon,.jupyter-wrapper .lm-CommandPalette-itemIcon{flex:0 0 auto}.jupyter-wrapper .p-CommandPalette-itemContent,.jupyter-wrapper .lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden}.jupyter-wrapper .p-CommandPalette-itemShortcut,.jupyter-wrapper .lm-CommandPalette-itemShortcut{flex:0 0 auto}.jupyter-wrapper .p-CommandPalette-itemLabel,.jupyter-wrapper .lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.jupyter-wrapper .p-DockPanel,.jupyter-wrapper .lm-DockPanel{z-index:0}.jupyter-wrapper .p-DockPanel-widget,.jupyter-wrapper .lm-DockPanel-widget{z-index:0}.jupyter-wrapper .p-DockPanel-tabBar,.jupyter-wrapper .lm-DockPanel-tabBar{z-index:1}.jupyter-wrapper .p-DockPanel-handle,.jupyter-wrapper .lm-DockPanel-handle{z-index:2}.jupyter-wrapper .p-DockPanel-handle.p-mod-hidden,.jupyter-wrapper .lm-DockPanel-handle.lm-mod-hidden{display:none !important}.jupyter-wrapper .p-DockPanel-handle:after,.jupyter-wrapper .lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:\"\"}.jupyter-wrapper .p-DockPanel-handle[data-orientation=horizontal],.jupyter-wrapper .lm-DockPanel-handle[data-orientation=horizontal]{cursor:ew-resize}.jupyter-wrapper .p-DockPanel-handle[data-orientation=vertical],.jupyter-wrapper .lm-DockPanel-handle[data-orientation=vertical]{cursor:ns-resize}.jupyter-wrapper .p-DockPanel-handle[data-orientation=horizontal]:after,.jupyter-wrapper .lm-DockPanel-handle[data-orientation=horizontal]:after{left:50%;min-width:8px;transform:translateX(-50%)}.jupyter-wrapper .p-DockPanel-handle[data-orientation=vertical]:after,.jupyter-wrapper .lm-DockPanel-handle[data-orientation=vertical]:after{top:50%;min-height:8px;transform:translateY(-50%)}.jupyter-wrapper .p-DockPanel-overlay,.jupyter-wrapper .lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none}.jupyter-wrapper .p-DockPanel-overlay.p-mod-hidden,.jupyter-wrapper .lm-DockPanel-overlay.lm-mod-hidden{display:none !important}.jupyter-wrapper .p-Menu,.jupyter-wrapper .lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .p-Menu-content,.jupyter-wrapper .lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none}.jupyter-wrapper .p-Menu-item,.jupyter-wrapper .lm-Menu-item{display:table-row}.jupyter-wrapper .p-Menu-item.p-mod-hidden,.jupyter-wrapper .p-Menu-item.p-mod-collapsed,.jupyter-wrapper .lm-Menu-item.lm-mod-hidden,.jupyter-wrapper .lm-Menu-item.lm-mod-collapsed{display:none !important}.jupyter-wrapper .p-Menu-itemIcon,.jupyter-wrapper .p-Menu-itemSubmenuIcon,.jupyter-wrapper .lm-Menu-itemIcon,.jupyter-wrapper .lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center}.jupyter-wrapper .p-Menu-itemLabel,.jupyter-wrapper .lm-Menu-itemLabel{display:table-cell;text-align:left}.jupyter-wrapper .p-Menu-itemShortcut,.jupyter-wrapper .lm-Menu-itemShortcut{display:table-cell;text-align:right}.jupyter-wrapper .p-MenuBar,.jupyter-wrapper .lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .p-MenuBar-content,.jupyter-wrapper .lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none}.jupyter-wrapper .p--MenuBar-item,.jupyter-wrapper .lm-MenuBar-item{box-sizing:border-box}.jupyter-wrapper .p-MenuBar-itemIcon,.jupyter-wrapper .p-MenuBar-itemLabel,.jupyter-wrapper .lm-MenuBar-itemIcon,.jupyter-wrapper .lm-MenuBar-itemLabel{display:inline-block}.jupyter-wrapper .p-ScrollBar,.jupyter-wrapper .lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .p-ScrollBar[data-orientation=horizontal],.jupyter-wrapper .lm-ScrollBar[data-orientation=horizontal]{flex-direction:row}.jupyter-wrapper .p-ScrollBar[data-orientation=vertical],.jupyter-wrapper .lm-ScrollBar[data-orientation=vertical]{flex-direction:column}.jupyter-wrapper .p-ScrollBar-button,.jupyter-wrapper .lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto}.jupyter-wrapper .p-ScrollBar-track,.jupyter-wrapper .lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto}.jupyter-wrapper .p-ScrollBar-thumb,.jupyter-wrapper .lm-ScrollBar-thumb{box-sizing:border-box;position:absolute}.jupyter-wrapper .p-SplitPanel-child,.jupyter-wrapper .lm-SplitPanel-child{z-index:0}.jupyter-wrapper .p-SplitPanel-handle,.jupyter-wrapper .lm-SplitPanel-handle{z-index:1}.jupyter-wrapper .p-SplitPanel-handle.p-mod-hidden,.jupyter-wrapper .lm-SplitPanel-handle.lm-mod-hidden{display:none !important}.jupyter-wrapper .p-SplitPanel-handle:after,.jupyter-wrapper .lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:\"\"}.jupyter-wrapper .p-SplitPanel[data-orientation=horizontal]>.p-SplitPanel-handle,.jupyter-wrapper .lm-SplitPanel[data-orientation=horizontal]>.lm-SplitPanel-handle{cursor:ew-resize}.jupyter-wrapper .p-SplitPanel[data-orientation=vertical]>.p-SplitPanel-handle,.jupyter-wrapper .lm-SplitPanel[data-orientation=vertical]>.lm-SplitPanel-handle{cursor:ns-resize}.jupyter-wrapper .p-SplitPanel[data-orientation=horizontal]>.p-SplitPanel-handle:after,.jupyter-wrapper .lm-SplitPanel[data-orientation=horizontal]>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%)}.jupyter-wrapper .p-SplitPanel[data-orientation=vertical]>.p-SplitPanel-handle:after,.jupyter-wrapper .lm-SplitPanel[data-orientation=vertical]>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%)}.jupyter-wrapper .p-TabBar,.jupyter-wrapper .lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .p-TabBar[data-orientation=horizontal],.jupyter-wrapper .lm-TabBar[data-orientation=horizontal]{flex-direction:row}.jupyter-wrapper .p-TabBar[data-orientation=vertical],.jupyter-wrapper .lm-TabBar[data-orientation=vertical]{flex-direction:column}.jupyter-wrapper .p-TabBar-content,.jupyter-wrapper .lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none}.jupyter-wrapper .p-TabBar[data-orientation=horizontal]>.p-TabBar-content,.jupyter-wrapper .lm-TabBar[data-orientation=horizontal]>.lm-TabBar-content{flex-direction:row}.jupyter-wrapper .p-TabBar[data-orientation=vertical]>.p-TabBar-content,.jupyter-wrapper .lm-TabBar[data-orientation=vertical]>.lm-TabBar-content{flex-direction:column}.jupyter-wrapper .p-TabBar-tab,.jupyter-wrapper .lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden}.jupyter-wrapper .p-TabBar-tabIcon,.jupyter-wrapper .p-TabBar-tabCloseIcon,.jupyter-wrapper .lm-TabBar-tabIcon,.jupyter-wrapper .lm-TabBar-tabCloseIcon{flex:0 0 auto}.jupyter-wrapper .p-TabBar-tabLabel,.jupyter-wrapper .lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap}.jupyter-wrapper .p-TabBar-tab.p-mod-hidden,.jupyter-wrapper .lm-TabBar-tab.lm-mod-hidden{display:none !important}.jupyter-wrapper .p-TabBar.p-mod-dragging .p-TabBar-tab,.jupyter-wrapper .lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative}.jupyter-wrapper .p-TabBar.p-mod-dragging[data-orientation=horizontal] .p-TabBar-tab,.jupyter-wrapper .lm-TabBar.lm-mod-dragging[data-orientation=horizontal] .lm-TabBar-tab{left:0;transition:left 150ms ease}.jupyter-wrapper .p-TabBar.p-mod-dragging[data-orientation=vertical] .p-TabBar-tab,.jupyter-wrapper .lm-TabBar.lm-mod-dragging[data-orientation=vertical] .lm-TabBar-tab{top:0;transition:top 150ms ease}.jupyter-wrapper .p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging .lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none}.jupyter-wrapper .p-TabPanel-tabBar,.jupyter-wrapper .lm-TabPanel-tabBar{z-index:1}.jupyter-wrapper .p-TabPanel-stackedPanel,.jupyter-wrapper .lm-TabPanel-stackedPanel{z-index:0}.jupyter-wrapper ::-moz-selection{background:rgba(125,188,255,.6)}.jupyter-wrapper ::selection{background:rgba(125,188,255,.6)}.jupyter-wrapper .bp3-heading{color:#182026;font-weight:600;margin:0 0 10px;padding:0}.jupyter-wrapper .bp3-dark .bp3-heading{color:#f5f8fa}.jupyter-wrapper h1.bp3-heading,.jupyter-wrapper .bp3-running-text h1{line-height:40px;font-size:36px}.jupyter-wrapper h2.bp3-heading,.jupyter-wrapper .bp3-running-text h2{line-height:32px;font-size:28px}.jupyter-wrapper h3.bp3-heading,.jupyter-wrapper .bp3-running-text h3{line-height:25px;font-size:22px}.jupyter-wrapper h4.bp3-heading,.jupyter-wrapper .bp3-running-text h4{line-height:21px;font-size:18px}.jupyter-wrapper h5.bp3-heading,.jupyter-wrapper .bp3-running-text h5{line-height:19px;font-size:16px}.jupyter-wrapper h6.bp3-heading,.jupyter-wrapper .bp3-running-text h6{line-height:16px;font-size:14px}.jupyter-wrapper .bp3-ui-text{text-transform:none;line-height:1.28581;letter-spacing:0;font-size:14px;font-weight:400}.jupyter-wrapper .bp3-monospace-text{text-transform:none;font-family:monospace}.jupyter-wrapper .bp3-text-muted{color:#5c7080}.jupyter-wrapper .bp3-dark .bp3-text-muted{color:#a7b6c2}.jupyter-wrapper .bp3-text-disabled{color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-dark .bp3-text-disabled{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-text-overflow-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal}.jupyter-wrapper .bp3-running-text{line-height:1.5;font-size:14px}.jupyter-wrapper .bp3-running-text h1{color:#182026;font-weight:600;margin-top:40px;margin-bottom:20px}.jupyter-wrapper .bp3-dark .bp3-running-text h1{color:#f5f8fa}.jupyter-wrapper .bp3-running-text h2{color:#182026;font-weight:600;margin-top:40px;margin-bottom:20px}.jupyter-wrapper .bp3-dark .bp3-running-text h2{color:#f5f8fa}.jupyter-wrapper .bp3-running-text h3{color:#182026;font-weight:600;margin-top:40px;margin-bottom:20px}.jupyter-wrapper .bp3-dark .bp3-running-text h3{color:#f5f8fa}.jupyter-wrapper .bp3-running-text h4{color:#182026;font-weight:600;margin-top:40px;margin-bottom:20px}.jupyter-wrapper .bp3-dark .bp3-running-text h4{color:#f5f8fa}.jupyter-wrapper .bp3-running-text h5{color:#182026;font-weight:600;margin-top:40px;margin-bottom:20px}.jupyter-wrapper .bp3-dark .bp3-running-text h5{color:#f5f8fa}.jupyter-wrapper .bp3-running-text h6{color:#182026;font-weight:600;margin-top:40px;margin-bottom:20px}.jupyter-wrapper .bp3-dark .bp3-running-text h6{color:#f5f8fa}.jupyter-wrapper .bp3-running-text hr{margin:20px 0;border:none;border-bottom:1px solid rgba(16,22,26,.15)}.jupyter-wrapper .bp3-dark .bp3-running-text hr{border-color:rgba(255,255,255,.15)}.jupyter-wrapper .bp3-running-text p{margin:0 0 10px;padding:0}.jupyter-wrapper .bp3-text-large{font-size:16px}.jupyter-wrapper .bp3-text-small{font-size:12px}.jupyter-wrapper a{text-decoration:none;color:#106ba3}.jupyter-wrapper a:hover{cursor:pointer;text-decoration:underline;color:#106ba3}.jupyter-wrapper a .bp3-icon,.jupyter-wrapper a .bp3-icon-standard,.jupyter-wrapper a .bp3-icon-large{color:inherit}.jupyter-wrapper a code,.jupyter-wrapper .bp3-dark a code{color:inherit}.jupyter-wrapper .bp3-dark a,.jupyter-wrapper .bp3-dark a:hover{color:#48aff0}.jupyter-wrapper .bp3-dark a .bp3-icon,.jupyter-wrapper .bp3-dark a .bp3-icon-standard,.jupyter-wrapper .bp3-dark a .bp3-icon-large,.jupyter-wrapper .bp3-dark a:hover .bp3-icon,.jupyter-wrapper .bp3-dark a:hover .bp3-icon-standard,.jupyter-wrapper .bp3-dark a:hover .bp3-icon-large{color:inherit}.jupyter-wrapper .bp3-running-text code,.jupyter-wrapper .bp3-code{text-transform:none;font-family:monospace;border-radius:3px;-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2);background:rgba(255,255,255,.7);padding:2px 5px;color:#5c7080;font-size:smaller}.jupyter-wrapper .bp3-dark .bp3-running-text code,.jupyter-wrapper .bp3-running-text .bp3-dark code,.jupyter-wrapper .bp3-dark .bp3-code{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);background:rgba(16,22,26,.3);color:#a7b6c2}.jupyter-wrapper .bp3-running-text a>code,.jupyter-wrapper a>.bp3-code{color:#137cbd}.jupyter-wrapper .bp3-dark .bp3-running-text a>code,.jupyter-wrapper .bp3-running-text .bp3-dark a>code,.jupyter-wrapper .bp3-dark a>.bp3-code{color:inherit}.jupyter-wrapper .bp3-running-text pre,.jupyter-wrapper .bp3-code-block{text-transform:none;font-family:monospace;display:block;margin:10px 0;border-radius:3px;-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.15);box-shadow:inset 0 0 0 1px rgba(16,22,26,.15);background:rgba(255,255,255,.7);padding:13px 15px 12px;line-height:1.4;color:#182026;font-size:13px;word-break:break-all;word-wrap:break-word}.jupyter-wrapper .bp3-dark .bp3-running-text pre,.jupyter-wrapper .bp3-running-text .bp3-dark pre,.jupyter-wrapper .bp3-dark .bp3-code-block{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);background:rgba(16,22,26,.3);color:#f5f8fa}.jupyter-wrapper .bp3-running-text pre>code,.jupyter-wrapper .bp3-code-block>code{-webkit-box-shadow:none;box-shadow:none;background:none;padding:0;color:inherit;font-size:inherit}.jupyter-wrapper .bp3-running-text kbd,.jupyter-wrapper .bp3-key{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);background:#fff;min-width:24px;height:24px;padding:3px 6px;vertical-align:middle;line-height:24px;color:#5c7080;font-family:inherit;font-size:12px}.jupyter-wrapper .bp3-running-text kbd .bp3-icon,.jupyter-wrapper .bp3-key .bp3-icon,.jupyter-wrapper .bp3-running-text kbd .bp3-icon-standard,.jupyter-wrapper .bp3-key .bp3-icon-standard,.jupyter-wrapper .bp3-running-text kbd .bp3-icon-large,.jupyter-wrapper .bp3-key .bp3-icon-large{margin-right:5px}.jupyter-wrapper .bp3-dark .bp3-running-text kbd,.jupyter-wrapper .bp3-running-text .bp3-dark kbd,.jupyter-wrapper .bp3-dark .bp3-key{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4);background:#394b59;color:#a7b6c2}.jupyter-wrapper .bp3-running-text blockquote,.jupyter-wrapper .bp3-blockquote{margin:0 0 10px;border-left:solid 4px rgba(167,182,194,.5);padding:0 20px}.jupyter-wrapper .bp3-dark .bp3-running-text blockquote,.jupyter-wrapper .bp3-running-text .bp3-dark blockquote,.jupyter-wrapper .bp3-dark .bp3-blockquote{border-color:rgba(115,134,148,.5)}.jupyter-wrapper .bp3-running-text ul,.jupyter-wrapper .bp3-running-text ol,.jupyter-wrapper .bp3-list{margin:10px 0;padding-left:30px}.jupyter-wrapper .bp3-running-text ul li:not(:last-child),.jupyter-wrapper .bp3-running-text ol li:not(:last-child),.jupyter-wrapper .bp3-list li:not(:last-child){margin-bottom:5px}.jupyter-wrapper .bp3-running-text ul ol,.jupyter-wrapper .bp3-running-text ol ol,.jupyter-wrapper .bp3-list ol,.jupyter-wrapper .bp3-running-text ul ul,.jupyter-wrapper .bp3-running-text ol ul,.jupyter-wrapper .bp3-list ul{margin-top:5px}.jupyter-wrapper .bp3-list-unstyled{margin:0;padding:0;list-style:none}.jupyter-wrapper .bp3-list-unstyled li{padding:0}.jupyter-wrapper .bp3-rtl{text-align:right}.jupyter-wrapper .bp3-dark{color:#f5f8fa}.jupyter-wrapper :focus{outline:rgba(19,124,189,.6) auto 2px;outline-offset:2px;-moz-outline-radius:6px}.jupyter-wrapper .bp3-focus-disabled :focus{outline:none !important}.jupyter-wrapper .bp3-focus-disabled :focus~.bp3-control-indicator{outline:none !important}.jupyter-wrapper .bp3-alert{max-width:400px;padding:20px}.jupyter-wrapper .bp3-alert-body{display:-webkit-box;display:-ms-flexbox;display:flex}.jupyter-wrapper .bp3-alert-body .bp3-icon{margin-top:0;margin-right:20px;font-size:40px}.jupyter-wrapper .bp3-alert-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;margin-top:10px}.jupyter-wrapper .bp3-alert-footer .bp3-button{margin-left:10px}.jupyter-wrapper .bp3-breadcrumbs{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;cursor:default;height:30px;padding:0;list-style:none}.jupyter-wrapper .bp3-breadcrumbs>li{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.jupyter-wrapper .bp3-breadcrumbs>li::after{display:block;margin:0 5px;background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.71 7.29l-4-4a1.003 1.003 0 0 0-1.42 1.42L8.59 8 5.3 11.29c-.19.18-.3.43-.3.71a1.003 1.003 0 0 0 1.71.71l4-4c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71z' fill='%235C7080'/%3e%3c/svg%3e\");width:16px;height:16px;content:\"\"}.jupyter-wrapper .bp3-breadcrumbs>li:last-of-type::after{display:none}.jupyter-wrapper .bp3-breadcrumb,.jupyter-wrapper .bp3-breadcrumb-current,.jupyter-wrapper .bp3-breadcrumbs-collapsed{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px}.jupyter-wrapper .bp3-breadcrumb,.jupyter-wrapper .bp3-breadcrumbs-collapsed{color:#5c7080}.jupyter-wrapper .bp3-breadcrumb:hover{text-decoration:none}.jupyter-wrapper .bp3-breadcrumb.bp3-disabled{cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-breadcrumb .bp3-icon{margin-right:5px}.jupyter-wrapper .bp3-breadcrumb-current{color:inherit;font-weight:600}.jupyter-wrapper .bp3-breadcrumb-current .bp3-input{vertical-align:baseline;font-size:inherit;font-weight:inherit}.jupyter-wrapper .bp3-breadcrumbs-collapsed{margin-right:2px;border:none;border-radius:3px;background:#ced9e0;cursor:pointer;padding:1px 5px;vertical-align:text-bottom}.jupyter-wrapper .bp3-breadcrumbs-collapsed::before{display:block;background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cg fill='%235C7080'%3e%3ccircle cx='2' cy='8.03' r='2'/%3e%3ccircle cx='14' cy='8.03' r='2'/%3e%3ccircle cx='8' cy='8.03' r='2'/%3e%3c/g%3e%3c/svg%3e\") center no-repeat;width:16px;height:16px;content:\"\"}.jupyter-wrapper .bp3-breadcrumbs-collapsed:hover{background:#bfccd6;text-decoration:none;color:#182026}.jupyter-wrapper .bp3-dark .bp3-breadcrumb,.jupyter-wrapper .bp3-dark .bp3-breadcrumbs-collapsed{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-breadcrumbs>li::after{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-breadcrumb.bp3-disabled{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-breadcrumb-current{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-breadcrumbs-collapsed{background:rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-breadcrumbs-collapsed:hover{background:rgba(16,22,26,.6);color:#f5f8fa}.jupyter-wrapper .bp3-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border:none;border-radius:3px;cursor:pointer;padding:5px 10px;vertical-align:middle;text-align:left;font-size:14px;min-width:30px;min-height:30px}.jupyter-wrapper .bp3-button>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-button>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-button::before,.jupyter-wrapper .bp3-button>*{margin-right:7px}.jupyter-wrapper .bp3-button:empty::before,.jupyter-wrapper .bp3-button>:last-child{margin-right:0}.jupyter-wrapper .bp3-button:empty{padding:0 !important}.jupyter-wrapper .bp3-button:disabled,.jupyter-wrapper .bp3-button.bp3-disabled{cursor:not-allowed}.jupyter-wrapper .bp3-button.bp3-fill{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.jupyter-wrapper .bp3-button.bp3-align-right,.jupyter-wrapper .bp3-align-right .bp3-button{text-align:right}.jupyter-wrapper .bp3-button.bp3-align-left,.jupyter-wrapper .bp3-align-left .bp3-button{text-align:left}.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]){-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-color:#f5f8fa;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));color:#182026}.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]):hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#ebf1f5}.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]):active,.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]).bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background-color:#d8e1e8;background-image:none}.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]):disabled,.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]).bp3-disabled{outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:rgba(206,217,224,.5);background-image:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]):disabled.bp3-active,.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]):disabled.bp3-active:hover,.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]).bp3-disabled.bp3-active,.jupyter-wrapper .bp3-button:not([class*=bp3-intent-]).bp3-disabled.bp3-active:hover{background:rgba(206,217,224,.7)}.jupyter-wrapper .bp3-button.bp3-intent-primary{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#137cbd;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-primary:hover,.jupyter-wrapper .bp3-button.bp3-intent-primary:active,.jupyter-wrapper .bp3-button.bp3-intent-primary.bp3-active{color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-primary:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#106ba3}.jupyter-wrapper .bp3-button.bp3-intent-primary:active,.jupyter-wrapper .bp3-button.bp3-intent-primary.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background-color:#0e5a8a;background-image:none}.jupyter-wrapper .bp3-button.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-button.bp3-intent-primary.bp3-disabled{border-color:rgba(0,0,0,0);-webkit-box-shadow:none;box-shadow:none;background-color:rgba(19,124,189,.5);background-image:none;color:rgba(255,255,255,.6)}.jupyter-wrapper .bp3-button.bp3-intent-success{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#0f9960;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-success:hover,.jupyter-wrapper .bp3-button.bp3-intent-success:active,.jupyter-wrapper .bp3-button.bp3-intent-success.bp3-active{color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-success:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#0d8050}.jupyter-wrapper .bp3-button.bp3-intent-success:active,.jupyter-wrapper .bp3-button.bp3-intent-success.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background-color:#0a6640;background-image:none}.jupyter-wrapper .bp3-button.bp3-intent-success:disabled,.jupyter-wrapper .bp3-button.bp3-intent-success.bp3-disabled{border-color:rgba(0,0,0,0);-webkit-box-shadow:none;box-shadow:none;background-color:rgba(15,153,96,.5);background-image:none;color:rgba(255,255,255,.6)}.jupyter-wrapper .bp3-button.bp3-intent-warning{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#d9822b;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-warning:hover,.jupyter-wrapper .bp3-button.bp3-intent-warning:active,.jupyter-wrapper .bp3-button.bp3-intent-warning.bp3-active{color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-warning:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#bf7326}.jupyter-wrapper .bp3-button.bp3-intent-warning:active,.jupyter-wrapper .bp3-button.bp3-intent-warning.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background-color:#a66321;background-image:none}.jupyter-wrapper .bp3-button.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-button.bp3-intent-warning.bp3-disabled{border-color:rgba(0,0,0,0);-webkit-box-shadow:none;box-shadow:none;background-color:rgba(217,130,43,.5);background-image:none;color:rgba(255,255,255,.6)}.jupyter-wrapper .bp3-button.bp3-intent-danger{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#db3737;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-danger:hover,.jupyter-wrapper .bp3-button.bp3-intent-danger:active,.jupyter-wrapper .bp3-button.bp3-intent-danger.bp3-active{color:#fff}.jupyter-wrapper .bp3-button.bp3-intent-danger:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#c23030}.jupyter-wrapper .bp3-button.bp3-intent-danger:active,.jupyter-wrapper .bp3-button.bp3-intent-danger.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background-color:#a82a2a;background-image:none}.jupyter-wrapper .bp3-button.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-button.bp3-intent-danger.bp3-disabled{border-color:rgba(0,0,0,0);-webkit-box-shadow:none;box-shadow:none;background-color:rgba(219,55,55,.5);background-image:none;color:rgba(255,255,255,.6)}.jupyter-wrapper .bp3-button[class*=bp3-intent-] .bp3-button-spinner .bp3-spinner-head{stroke:#fff}.jupyter-wrapper .bp3-button.bp3-large,.jupyter-wrapper .bp3-large .bp3-button{min-width:40px;min-height:40px;padding:5px 15px;font-size:16px}.jupyter-wrapper .bp3-button.bp3-large::before,.jupyter-wrapper .bp3-button.bp3-large>*,.jupyter-wrapper .bp3-large .bp3-button::before,.jupyter-wrapper .bp3-large .bp3-button>*{margin-right:10px}.jupyter-wrapper .bp3-button.bp3-large:empty::before,.jupyter-wrapper .bp3-button.bp3-large>:last-child,.jupyter-wrapper .bp3-large .bp3-button:empty::before,.jupyter-wrapper .bp3-large .bp3-button>:last-child{margin-right:0}.jupyter-wrapper .bp3-button.bp3-small,.jupyter-wrapper .bp3-small .bp3-button{min-width:24px;min-height:24px;padding:0 7px}.jupyter-wrapper .bp3-button.bp3-loading{position:relative}.jupyter-wrapper .bp3-button.bp3-loading[class*=bp3-icon-]::before{visibility:hidden}.jupyter-wrapper .bp3-button.bp3-loading .bp3-button-spinner{position:absolute;margin:0}.jupyter-wrapper .bp3-button.bp3-loading>:not(.bp3-button-spinner){visibility:hidden}.jupyter-wrapper .bp3-button[class*=bp3-icon-]::before{line-height:1;font-family:\"Icons16\",sans-serif;font-size:16px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:#5c7080}.jupyter-wrapper .bp3-button .bp3-icon,.jupyter-wrapper .bp3-button .bp3-icon-standard,.jupyter-wrapper .bp3-button .bp3-icon-large{color:#5c7080}.jupyter-wrapper .bp3-button .bp3-icon.bp3-align-right,.jupyter-wrapper .bp3-button .bp3-icon-standard.bp3-align-right,.jupyter-wrapper .bp3-button .bp3-icon-large.bp3-align-right{margin-left:7px}.jupyter-wrapper .bp3-button .bp3-icon:first-child:last-child,.jupyter-wrapper .bp3-button .bp3-spinner+.bp3-icon:last-child{margin:0 -7px}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]){-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#394b59;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]):hover,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]):active,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]).bp3-active{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]):hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#30404d}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]):active,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]).bp3-active{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);background-color:#202b33;background-image:none}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]):disabled,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]).bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(57,75,89,.5);background-image:none;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]):disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]).bp3-disabled.bp3-active{background:rgba(57,75,89,.7)}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]) .bp3-button-spinner .bp3-spinner-head{background:rgba(16,22,26,.5);stroke:#8a9ba8}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-])[class*=bp3-icon-]::before{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]) .bp3-icon,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]) .bp3-icon-standard,.jupyter-wrapper .bp3-dark .bp3-button:not([class*=bp3-intent-]) .bp3-icon-large{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-]{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-]:hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-]:active,.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-].bp3-active{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-]:disabled,.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-].bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background-image:none;color:rgba(255,255,255,.3)}.jupyter-wrapper .bp3-dark .bp3-button[class*=bp3-intent-] .bp3-button-spinner .bp3-spinner-head{stroke:#8a9ba8}.jupyter-wrapper .bp3-button:disabled::before,.jupyter-wrapper .bp3-button:disabled .bp3-icon,.jupyter-wrapper .bp3-button:disabled .bp3-icon-standard,.jupyter-wrapper .bp3-button:disabled .bp3-icon-large,.jupyter-wrapper .bp3-button.bp3-disabled::before,.jupyter-wrapper .bp3-button.bp3-disabled .bp3-icon,.jupyter-wrapper .bp3-button.bp3-disabled .bp3-icon-standard,.jupyter-wrapper .bp3-button.bp3-disabled .bp3-icon-large,.jupyter-wrapper .bp3-button[class*=bp3-intent-]::before,.jupyter-wrapper .bp3-button[class*=bp3-intent-] .bp3-icon,.jupyter-wrapper .bp3-button[class*=bp3-intent-] .bp3-icon-standard,.jupyter-wrapper .bp3-button[class*=bp3-intent-] .bp3-icon-large{color:inherit !important}.jupyter-wrapper .bp3-button.bp3-minimal{-webkit-box-shadow:none;box-shadow:none;background:none}.jupyter-wrapper .bp3-button.bp3-minimal:hover{-webkit-box-shadow:none;box-shadow:none;background:rgba(167,182,194,.3);text-decoration:none;color:#182026}.jupyter-wrapper .bp3-button.bp3-minimal:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:rgba(115,134,148,.3);color:#182026}.jupyter-wrapper .bp3-button.bp3-minimal:disabled,.jupyter-wrapper .bp3-button.bp3-minimal:disabled:hover,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-disabled,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-disabled:hover{background:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-button.bp3-minimal:disabled.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal:disabled:hover.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-disabled:hover.bp3-active{background:rgba(115,134,148,.3)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal{-webkit-box-shadow:none;box-shadow:none;background:none;color:inherit}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:hover,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:hover{background:rgba(138,155,168,.15)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-active{background:rgba(138,155,168,.3);color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:disabled,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:disabled:hover,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-disabled:hover{background:none;cursor:not-allowed;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal:disabled:hover.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-disabled:hover.bp3-active{background:rgba(138,155,168,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary{color:#106ba3}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary:hover,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#106ba3}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary:hover{background:rgba(19,124,189,.15);color:#106ba3}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary.bp3-active{background:rgba(19,124,189,.3);color:#106ba3}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled{background:none;color:rgba(16,107,163,.5)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled.bp3-active{background:rgba(19,124,189,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{stroke:#106ba3}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:hover{background:rgba(19,124,189,.2);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary.bp3-active{background:rgba(19,124,189,.3);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled{background:none;color:rgba(72,175,240,.5)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled.bp3-active{background:rgba(19,124,189,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success{color:#0d8050}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success:hover,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#0d8050}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success:hover{background:rgba(15,153,96,.15);color:#0d8050}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success.bp3-active{background:rgba(15,153,96,.3);color:#0d8050}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success:disabled,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled{background:none;color:rgba(13,128,80,.5)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled.bp3-active{background:rgba(15,153,96,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{stroke:#0d8050}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:hover{background:rgba(15,153,96,.2);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success.bp3-active{background:rgba(15,153,96,.3);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:disabled,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled{background:none;color:rgba(61,204,145,.5)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled.bp3-active{background:rgba(15,153,96,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning{color:#bf7326}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning:hover,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#bf7326}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning:hover{background:rgba(217,130,43,.15);color:#bf7326}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning.bp3-active{background:rgba(217,130,43,.3);color:#bf7326}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled{background:none;color:rgba(191,115,38,.5)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled.bp3-active{background:rgba(217,130,43,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{stroke:#bf7326}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:hover{background:rgba(217,130,43,.2);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning.bp3-active{background:rgba(217,130,43,.3);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled{background:none;color:rgba(255,179,102,.5)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled.bp3-active{background:rgba(217,130,43,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger{color:#c23030}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger:hover,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#c23030}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger:hover{background:rgba(219,55,55,.15);color:#c23030}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger:active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger.bp3-active{background:rgba(219,55,55,.3);color:#c23030}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled{background:none;color:rgba(194,48,48,.5)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled.bp3-active{background:rgba(219,55,55,.3)}.jupyter-wrapper .bp3-button.bp3-minimal.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{stroke:#c23030}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:hover{background:rgba(219,55,55,.2);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger.bp3-active{background:rgba(219,55,55,.3);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled{background:none;color:rgba(255,115,115,.5)}.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled.bp3-active{background:rgba(219,55,55,.3)}.jupyter-wrapper a.bp3-button{text-align:center;text-decoration:none;-webkit-transition:none;transition:none}.jupyter-wrapper a.bp3-button,.jupyter-wrapper a.bp3-button:hover,.jupyter-wrapper a.bp3-button:active{color:#182026}.jupyter-wrapper a.bp3-button.bp3-disabled{color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-button-text{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto}.jupyter-wrapper .bp3-button.bp3-align-left .bp3-button-text,.jupyter-wrapper .bp3-button.bp3-align-right .bp3-button-text,.jupyter-wrapper .bp3-button-group.bp3-align-left .bp3-button-text,.jupyter-wrapper .bp3-button-group.bp3-align-right .bp3-button-text{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.jupyter-wrapper .bp3-button-group{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.jupyter-wrapper .bp3-button-group .bp3-button{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;z-index:4}.jupyter-wrapper .bp3-button-group .bp3-button:focus{z-index:5}.jupyter-wrapper .bp3-button-group .bp3-button:hover{z-index:6}.jupyter-wrapper .bp3-button-group .bp3-button:active,.jupyter-wrapper .bp3-button-group .bp3-button.bp3-active{z-index:7}.jupyter-wrapper .bp3-button-group .bp3-button:disabled,.jupyter-wrapper .bp3-button-group .bp3-button.bp3-disabled{z-index:3}.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-]{z-index:9}.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-]:focus{z-index:10}.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-]:hover{z-index:11}.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-]:active,.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-].bp3-active{z-index:12}.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-]:disabled,.jupyter-wrapper .bp3-button-group .bp3-button[class*=bp3-intent-].bp3-disabled{z-index:8}.jupyter-wrapper .bp3-button-group:not(.bp3-minimal)>.bp3-popover-wrapper:not(:first-child) .bp3-button,.jupyter-wrapper .bp3-button-group:not(.bp3-minimal)>.bp3-button:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.jupyter-wrapper .bp3-button-group:not(.bp3-minimal)>.bp3-popover-wrapper:not(:last-child) .bp3-button,.jupyter-wrapper .bp3-button-group:not(.bp3-minimal)>.bp3-button:not(:last-child){margin-right:-1px;border-top-right-radius:0;border-bottom-right-radius:0}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button{-webkit-box-shadow:none;box-shadow:none;background:none}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button:hover{-webkit-box-shadow:none;box-shadow:none;background:rgba(167,182,194,.3);text-decoration:none;color:#182026}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:rgba(115,134,148,.3);color:#182026}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button:disabled,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button:disabled:hover,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover{background:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button:disabled.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button:disabled:hover.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover.bp3-active{background:rgba(115,134,148,.3)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button{-webkit-box-shadow:none;box-shadow:none;background:none;color:inherit}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:hover,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:hover{background:rgba(138,155,168,.15)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-active{background:rgba(138,155,168,.3);color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled:hover,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover{background:none;cursor:not-allowed;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled:hover.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover.bp3-active{background:rgba(138,155,168,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary{color:#106ba3}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:hover,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#106ba3}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:hover{background:rgba(19,124,189,.15);color:#106ba3}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-active{background:rgba(19,124,189,.3);color:#106ba3}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled{background:none;color:rgba(16,107,163,.5)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled.bp3-active{background:rgba(19,124,189,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{stroke:#106ba3}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:hover{background:rgba(19,124,189,.2);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-active{background:rgba(19,124,189,.3);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled{background:none;color:rgba(72,175,240,.5)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled.bp3-active{background:rgba(19,124,189,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success{color:#0d8050}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:hover,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#0d8050}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:hover{background:rgba(15,153,96,.15);color:#0d8050}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-active{background:rgba(15,153,96,.3);color:#0d8050}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled{background:none;color:rgba(13,128,80,.5)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled.bp3-active{background:rgba(15,153,96,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{stroke:#0d8050}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:hover{background:rgba(15,153,96,.2);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-active{background:rgba(15,153,96,.3);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled{background:none;color:rgba(61,204,145,.5)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled.bp3-active{background:rgba(15,153,96,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning{color:#bf7326}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:hover,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#bf7326}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:hover{background:rgba(217,130,43,.15);color:#bf7326}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-active{background:rgba(217,130,43,.3);color:#bf7326}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled{background:none;color:rgba(191,115,38,.5)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled.bp3-active{background:rgba(217,130,43,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{stroke:#bf7326}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:hover{background:rgba(217,130,43,.2);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-active{background:rgba(217,130,43,.3);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled{background:none;color:rgba(255,179,102,.5)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled.bp3-active{background:rgba(217,130,43,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger{color:#c23030}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:hover,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#c23030}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:hover{background:rgba(219,55,55,.15);color:#c23030}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-active{background:rgba(219,55,55,.3);color:#c23030}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled{background:none;color:rgba(194,48,48,.5)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled.bp3-active{background:rgba(219,55,55,.3)}.jupyter-wrapper .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{stroke:#c23030}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:hover{background:rgba(219,55,55,.2);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-active{background:rgba(219,55,55,.3);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled{background:none;color:rgba(255,115,115,.5)}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled.bp3-active{background:rgba(219,55,55,.3)}.jupyter-wrapper .bp3-button-group .bp3-popover-wrapper,.jupyter-wrapper .bp3-button-group .bp3-popover-target{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.jupyter-wrapper .bp3-button-group.bp3-fill{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.jupyter-wrapper .bp3-button-group .bp3-button.bp3-fill,.jupyter-wrapper .bp3-button-group.bp3-fill .bp3-button:not(.bp3-fixed){-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.jupyter-wrapper .bp3-button-group.bp3-vertical{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;vertical-align:top}.jupyter-wrapper .bp3-button-group.bp3-vertical.bp3-fill{width:unset;height:100%}.jupyter-wrapper .bp3-button-group.bp3-vertical .bp3-button{margin-right:0 !important;width:100%}.jupyter-wrapper .bp3-button-group.bp3-vertical:not(.bp3-minimal)>.bp3-popover-wrapper:first-child .bp3-button,.jupyter-wrapper .bp3-button-group.bp3-vertical:not(.bp3-minimal)>.bp3-button:first-child{border-radius:3px 3px 0 0}.jupyter-wrapper .bp3-button-group.bp3-vertical:not(.bp3-minimal)>.bp3-popover-wrapper:last-child .bp3-button,.jupyter-wrapper .bp3-button-group.bp3-vertical:not(.bp3-minimal)>.bp3-button:last-child{border-radius:0 0 3px 3px}.jupyter-wrapper .bp3-button-group.bp3-vertical:not(.bp3-minimal)>.bp3-popover-wrapper:not(:last-child) .bp3-button,.jupyter-wrapper .bp3-button-group.bp3-vertical:not(.bp3-minimal)>.bp3-button:not(:last-child){margin-bottom:-1px}.jupyter-wrapper .bp3-button-group.bp3-align-left .bp3-button{text-align:left}.jupyter-wrapper .bp3-dark .bp3-button-group:not(.bp3-minimal)>.bp3-popover-wrapper:not(:last-child) .bp3-button,.jupyter-wrapper .bp3-dark .bp3-button-group:not(.bp3-minimal)>.bp3-button:not(:last-child){margin-right:1px}.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-vertical>.bp3-popover-wrapper:not(:last-child) .bp3-button,.jupyter-wrapper .bp3-dark .bp3-button-group.bp3-vertical>.bp3-button:not(:last-child){margin-bottom:1px}.jupyter-wrapper .bp3-callout{line-height:1.5;font-size:14px;position:relative;border-radius:3px;background-color:rgba(138,155,168,.15);width:100%;padding:10px 12px 9px}.jupyter-wrapper .bp3-callout[class*=bp3-icon-]{padding-left:40px}.jupyter-wrapper .bp3-callout[class*=bp3-icon-]::before{line-height:1;font-family:\"Icons20\",sans-serif;font-size:20px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;position:absolute;top:10px;left:10px;color:#5c7080}.jupyter-wrapper .bp3-callout.bp3-callout-icon{padding-left:40px}.jupyter-wrapper .bp3-callout.bp3-callout-icon>.bp3-icon:first-child{position:absolute;top:10px;left:10px;color:#5c7080}.jupyter-wrapper .bp3-callout .bp3-heading{margin-top:0;margin-bottom:5px;line-height:20px}.jupyter-wrapper .bp3-callout .bp3-heading:last-child{margin-bottom:0}.jupyter-wrapper .bp3-dark .bp3-callout{background-color:rgba(138,155,168,.2)}.jupyter-wrapper .bp3-dark .bp3-callout[class*=bp3-icon-]::before{color:#a7b6c2}.jupyter-wrapper .bp3-callout.bp3-intent-primary{background-color:rgba(19,124,189,.15)}.jupyter-wrapper .bp3-callout.bp3-intent-primary[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-callout.bp3-intent-primary>.bp3-icon:first-child,.jupyter-wrapper .bp3-callout.bp3-intent-primary .bp3-heading{color:#106ba3}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-primary{background-color:rgba(19,124,189,.25)}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-primary[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-primary>.bp3-icon:first-child,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-primary .bp3-heading{color:#48aff0}.jupyter-wrapper .bp3-callout.bp3-intent-success{background-color:rgba(15,153,96,.15)}.jupyter-wrapper .bp3-callout.bp3-intent-success[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-callout.bp3-intent-success>.bp3-icon:first-child,.jupyter-wrapper .bp3-callout.bp3-intent-success .bp3-heading{color:#0d8050}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-success{background-color:rgba(15,153,96,.25)}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-success[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-success>.bp3-icon:first-child,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-success .bp3-heading{color:#3dcc91}.jupyter-wrapper .bp3-callout.bp3-intent-warning{background-color:rgba(217,130,43,.15)}.jupyter-wrapper .bp3-callout.bp3-intent-warning[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-callout.bp3-intent-warning>.bp3-icon:first-child,.jupyter-wrapper .bp3-callout.bp3-intent-warning .bp3-heading{color:#bf7326}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-warning{background-color:rgba(217,130,43,.25)}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-warning[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-warning>.bp3-icon:first-child,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-warning .bp3-heading{color:#ffb366}.jupyter-wrapper .bp3-callout.bp3-intent-danger{background-color:rgba(219,55,55,.15)}.jupyter-wrapper .bp3-callout.bp3-intent-danger[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-callout.bp3-intent-danger>.bp3-icon:first-child,.jupyter-wrapper .bp3-callout.bp3-intent-danger .bp3-heading{color:#c23030}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-danger{background-color:rgba(219,55,55,.25)}.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-danger[class*=bp3-icon-]::before,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-danger>.bp3-icon:first-child,.jupyter-wrapper .bp3-dark .bp3-callout.bp3-intent-danger .bp3-heading{color:#ff7373}.jupyter-wrapper .bp3-running-text .bp3-callout{margin:20px 0}.jupyter-wrapper .bp3-card{border-radius:3px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.15),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0);box-shadow:0 0 0 1px rgba(16,22,26,.15),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0);background-color:#fff;padding:20px;-webkit-transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-card.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-card{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0);box-shadow:0 0 0 1px rgba(16,22,26,.4),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0);background-color:#30404d}.jupyter-wrapper .bp3-elevation-0{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.15),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0);box-shadow:0 0 0 1px rgba(16,22,26,.15),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0)}.jupyter-wrapper .bp3-elevation-0.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-elevation-0{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0);box-shadow:0 0 0 1px rgba(16,22,26,.4),0 0 0 rgba(16,22,26,0),0 0 0 rgba(16,22,26,0)}.jupyter-wrapper .bp3-elevation-1{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-elevation-1.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-elevation-1{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-elevation-2{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 1px 1px rgba(16,22,26,.2),0 2px 6px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 1px 1px rgba(16,22,26,.2),0 2px 6px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-elevation-2.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-elevation-2{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.4),0 2px 6px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.4),0 2px 6px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-elevation-3{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-elevation-3.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-elevation-3{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-elevation-4{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-elevation-4.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-elevation-4{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-card.bp3-interactive:hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);cursor:pointer}.jupyter-wrapper .bp3-card.bp3-interactive:hover.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-card.bp3-interactive:hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-card.bp3-interactive:active{opacity:.9;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);-webkit-transition-duration:0;transition-duration:0}.jupyter-wrapper .bp3-card.bp3-interactive:active.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-card.bp3-interactive:active{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-collapse{height:0;overflow-y:hidden;-webkit-transition:height 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:height 200ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-collapse .bp3-collapse-body{-webkit-transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-collapse .bp3-collapse-body[aria-hidden=true]{display:none}.jupyter-wrapper .bp3-context-menu .bp3-popover-target{display:block}.jupyter-wrapper .bp3-context-menu-popover-target{position:fixed}.jupyter-wrapper .bp3-divider{margin:5px;border-right:1px solid rgba(16,22,26,.15);border-bottom:1px solid rgba(16,22,26,.15)}.jupyter-wrapper .bp3-dark .bp3-divider{border-color:rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dialog-container{opacity:1;-webkit-transform:scale(1);transform:scale(1);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;min-height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-dialog-container.bp3-overlay-enter>.bp3-dialog,.jupyter-wrapper .bp3-dialog-container.bp3-overlay-appear>.bp3-dialog{opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}.jupyter-wrapper .bp3-dialog-container.bp3-overlay-enter-active>.bp3-dialog,.jupyter-wrapper .bp3-dialog-container.bp3-overlay-appear-active>.bp3-dialog{opacity:1;-webkit-transform:scale(1);transform:scale(1);-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:opacity,transform;transition-property:opacity,transform,-webkit-transform;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-dialog-container.bp3-overlay-exit>.bp3-dialog{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-dialog-container.bp3-overlay-exit-active>.bp3-dialog{opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5);-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:opacity,transform;transition-property:opacity,transform,-webkit-transform;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-dialog{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:30px 0;border-radius:6px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);background:#ebf1f5;width:500px;padding-bottom:20px;pointer-events:all;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.jupyter-wrapper .bp3-dialog:focus{outline:0}.jupyter-wrapper .bp3-dialog.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-dialog{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);background:#293742;color:#f5f8fa}.jupyter-wrapper .bp3-dialog-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:6px 6px 0 0;-webkit-box-shadow:0 1px 0 rgba(16,22,26,.15);box-shadow:0 1px 0 rgba(16,22,26,.15);background:#fff;min-height:40px;padding-right:5px;padding-left:20px}.jupyter-wrapper .bp3-dialog-header .bp3-icon-large,.jupyter-wrapper .bp3-dialog-header .bp3-icon{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:10px;color:#5c7080}.jupyter-wrapper .bp3-dialog-header .bp3-heading{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin:0;line-height:inherit}.jupyter-wrapper .bp3-dialog-header .bp3-heading:last-child{margin-right:20px}.jupyter-wrapper .bp3-dark .bp3-dialog-header{-webkit-box-shadow:0 1px 0 rgba(16,22,26,.4);box-shadow:0 1px 0 rgba(16,22,26,.4);background:#30404d}.jupyter-wrapper .bp3-dark .bp3-dialog-header .bp3-icon-large,.jupyter-wrapper .bp3-dark .bp3-dialog-header .bp3-icon{color:#a7b6c2}.jupyter-wrapper .bp3-dialog-body{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin:20px;line-height:18px}.jupyter-wrapper .bp3-dialog-footer{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 20px}.jupyter-wrapper .bp3-dialog-footer-actions{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.jupyter-wrapper .bp3-dialog-footer-actions .bp3-button{margin-left:10px}.jupyter-wrapper .bp3-drawer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);background:#fff;padding:0}.jupyter-wrapper .bp3-drawer:focus{outline:0}.jupyter-wrapper .bp3-drawer.bp3-position-top{top:0;right:0;left:0;height:50%}.jupyter-wrapper .bp3-drawer.bp3-position-top.bp3-overlay-enter,.jupyter-wrapper .bp3-drawer.bp3-position-top.bp3-overlay-appear{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.jupyter-wrapper .bp3-drawer.bp3-position-top.bp3-overlay-enter-active,.jupyter-wrapper .bp3-drawer.bp3-position-top.bp3-overlay-appear-active{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-top.bp3-overlay-exit{-webkit-transform:translateY(0);transform:translateY(0)}.jupyter-wrapper .bp3-drawer.bp3-position-top.bp3-overlay-exit-active{-webkit-transform:translateY(-100%);transform:translateY(-100%);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-bottom{right:0;bottom:0;left:0;height:50%}.jupyter-wrapper .bp3-drawer.bp3-position-bottom.bp3-overlay-enter,.jupyter-wrapper .bp3-drawer.bp3-position-bottom.bp3-overlay-appear{-webkit-transform:translateY(100%);transform:translateY(100%)}.jupyter-wrapper .bp3-drawer.bp3-position-bottom.bp3-overlay-enter-active,.jupyter-wrapper .bp3-drawer.bp3-position-bottom.bp3-overlay-appear-active{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-bottom.bp3-overlay-exit{-webkit-transform:translateY(0);transform:translateY(0)}.jupyter-wrapper .bp3-drawer.bp3-position-bottom.bp3-overlay-exit-active{-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-left{top:0;bottom:0;left:0;width:50%}.jupyter-wrapper .bp3-drawer.bp3-position-left.bp3-overlay-enter,.jupyter-wrapper .bp3-drawer.bp3-position-left.bp3-overlay-appear{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.jupyter-wrapper .bp3-drawer.bp3-position-left.bp3-overlay-enter-active,.jupyter-wrapper .bp3-drawer.bp3-position-left.bp3-overlay-appear-active{-webkit-transform:translateX(0);transform:translateX(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-left.bp3-overlay-exit{-webkit-transform:translateX(0);transform:translateX(0)}.jupyter-wrapper .bp3-drawer.bp3-position-left.bp3-overlay-exit-active{-webkit-transform:translateX(-100%);transform:translateX(-100%);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-right{top:0;right:0;bottom:0;width:50%}.jupyter-wrapper .bp3-drawer.bp3-position-right.bp3-overlay-enter,.jupyter-wrapper .bp3-drawer.bp3-position-right.bp3-overlay-appear{-webkit-transform:translateX(100%);transform:translateX(100%)}.jupyter-wrapper .bp3-drawer.bp3-position-right.bp3-overlay-enter-active,.jupyter-wrapper .bp3-drawer.bp3-position-right.bp3-overlay-appear-active{-webkit-transform:translateX(0);transform:translateX(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-position-right.bp3-overlay-exit{-webkit-transform:translateX(0);transform:translateX(0)}.jupyter-wrapper .bp3-drawer.bp3-position-right.bp3-overlay-exit-active{-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical){top:0;right:0;bottom:0;width:50%}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical).bp3-overlay-enter,.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical).bp3-overlay-appear{-webkit-transform:translateX(100%);transform:translateX(100%)}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical).bp3-overlay-enter-active,.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical).bp3-overlay-appear-active{-webkit-transform:translateX(0);transform:translateX(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical).bp3-overlay-exit{-webkit-transform:translateX(0);transform:translateX(0)}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right):not(.bp3-vertical).bp3-overlay-exit-active{-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical{right:0;bottom:0;left:0;height:50%}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical.bp3-overlay-enter,.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical.bp3-overlay-appear{-webkit-transform:translateY(100%);transform:translateY(100%)}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical.bp3-overlay-enter-active,.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical.bp3-overlay-appear-active{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical.bp3-overlay-exit{-webkit-transform:translateY(0);transform:translateY(0)}.jupyter-wrapper .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(.bp3-position-right).bp3-vertical.bp3-overlay-exit-active{-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-drawer.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-drawer{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);background:#30404d;color:#f5f8fa}.jupyter-wrapper .bp3-drawer-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;border-radius:0;-webkit-box-shadow:0 1px 0 rgba(16,22,26,.15);box-shadow:0 1px 0 rgba(16,22,26,.15);min-height:40px;padding:5px;padding-left:20px}.jupyter-wrapper .bp3-drawer-header .bp3-icon-large,.jupyter-wrapper .bp3-drawer-header .bp3-icon{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:10px;color:#5c7080}.jupyter-wrapper .bp3-drawer-header .bp3-heading{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin:0;line-height:inherit}.jupyter-wrapper .bp3-drawer-header .bp3-heading:last-child{margin-right:20px}.jupyter-wrapper .bp3-dark .bp3-drawer-header{-webkit-box-shadow:0 1px 0 rgba(16,22,26,.4);box-shadow:0 1px 0 rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-drawer-header .bp3-icon-large,.jupyter-wrapper .bp3-dark .bp3-drawer-header .bp3-icon{color:#a7b6c2}.jupyter-wrapper .bp3-drawer-body{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;overflow:auto;line-height:18px}.jupyter-wrapper .bp3-drawer-footer{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;-webkit-box-shadow:inset 0 1px 0 rgba(16,22,26,.15);box-shadow:inset 0 1px 0 rgba(16,22,26,.15);padding:10px 20px}.jupyter-wrapper .bp3-dark .bp3-drawer-footer{-webkit-box-shadow:inset 0 1px 0 rgba(16,22,26,.4);box-shadow:inset 0 1px 0 rgba(16,22,26,.4)}.jupyter-wrapper .bp3-editable-text{display:inline-block;position:relative;cursor:text;max-width:100%;vertical-align:top;white-space:nowrap}.jupyter-wrapper .bp3-editable-text::before{position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;border-radius:3px;content:\"\";-webkit-transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9),box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9),box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-editable-text:hover::before{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.15);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.15)}.jupyter-wrapper .bp3-editable-text.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);background-color:#fff}.jupyter-wrapper .bp3-editable-text.bp3-disabled::before{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-editable-text.bp3-intent-primary .bp3-editable-text-input,.jupyter-wrapper .bp3-editable-text.bp3-intent-primary .bp3-editable-text-content{color:#137cbd}.jupyter-wrapper .bp3-editable-text.bp3-intent-primary:hover::before{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(19,124,189,.4);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(19,124,189,.4)}.jupyter-wrapper .bp3-editable-text.bp3-intent-primary.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-editable-text.bp3-intent-success .bp3-editable-text-input,.jupyter-wrapper .bp3-editable-text.bp3-intent-success .bp3-editable-text-content{color:#0f9960}.jupyter-wrapper .bp3-editable-text.bp3-intent-success:hover::before{-webkit-box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px rgba(15,153,96,.4);box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px rgba(15,153,96,.4)}.jupyter-wrapper .bp3-editable-text.bp3-intent-success.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-editable-text.bp3-intent-warning .bp3-editable-text-input,.jupyter-wrapper .bp3-editable-text.bp3-intent-warning .bp3-editable-text-content{color:#d9822b}.jupyter-wrapper .bp3-editable-text.bp3-intent-warning:hover::before{-webkit-box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px rgba(217,130,43,.4);box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px rgba(217,130,43,.4)}.jupyter-wrapper .bp3-editable-text.bp3-intent-warning.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-editable-text.bp3-intent-danger .bp3-editable-text-input,.jupyter-wrapper .bp3-editable-text.bp3-intent-danger .bp3-editable-text-content{color:#db3737}.jupyter-wrapper .bp3-editable-text.bp3-intent-danger:hover::before{-webkit-box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px rgba(219,55,55,.4);box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px rgba(219,55,55,.4)}.jupyter-wrapper .bp3-editable-text.bp3-intent-danger.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-dark .bp3-editable-text:hover::before{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(255,255,255,.15);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(255,255,255,.15)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);background-color:rgba(16,22,26,.3)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-disabled::before{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-primary .bp3-editable-text-content{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-primary:hover::before{-webkit-box-shadow:0 0 0 0 rgba(72,175,240,0),0 0 0 0 rgba(72,175,240,0),inset 0 0 0 1px rgba(72,175,240,.4);box-shadow:0 0 0 0 rgba(72,175,240,0),0 0 0 0 rgba(72,175,240,0),inset 0 0 0 1px rgba(72,175,240,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-primary.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #48aff0,0 0 0 3px rgba(72,175,240,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #48aff0,0 0 0 3px rgba(72,175,240,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-success .bp3-editable-text-content{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-success:hover::before{-webkit-box-shadow:0 0 0 0 rgba(61,204,145,0),0 0 0 0 rgba(61,204,145,0),inset 0 0 0 1px rgba(61,204,145,.4);box-shadow:0 0 0 0 rgba(61,204,145,0),0 0 0 0 rgba(61,204,145,0),inset 0 0 0 1px rgba(61,204,145,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-success.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #3dcc91,0 0 0 3px rgba(61,204,145,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #3dcc91,0 0 0 3px rgba(61,204,145,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-warning .bp3-editable-text-content{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-warning:hover::before{-webkit-box-shadow:0 0 0 0 rgba(255,179,102,0),0 0 0 0 rgba(255,179,102,0),inset 0 0 0 1px rgba(255,179,102,.4);box-shadow:0 0 0 0 rgba(255,179,102,0),0 0 0 0 rgba(255,179,102,0),inset 0 0 0 1px rgba(255,179,102,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-warning.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #ffb366,0 0 0 3px rgba(255,179,102,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #ffb366,0 0 0 3px rgba(255,179,102,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-danger .bp3-editable-text-content{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-danger:hover::before{-webkit-box-shadow:0 0 0 0 rgba(255,115,115,0),0 0 0 0 rgba(255,115,115,0),inset 0 0 0 1px rgba(255,115,115,.4);box-shadow:0 0 0 0 rgba(255,115,115,0),0 0 0 0 rgba(255,115,115,0),inset 0 0 0 1px rgba(255,115,115,.4)}.jupyter-wrapper .bp3-dark .bp3-editable-text.bp3-intent-danger.bp3-editable-text-editing::before{-webkit-box-shadow:0 0 0 1px #ff7373,0 0 0 3px rgba(255,115,115,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #ff7373,0 0 0 3px rgba(255,115,115,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-editable-text-input,.jupyter-wrapper .bp3-editable-text-content{display:inherit;position:relative;min-width:inherit;max-width:inherit;vertical-align:top;text-transform:inherit;letter-spacing:inherit;color:inherit;font:inherit;resize:none}.jupyter-wrapper .bp3-editable-text-input{border:none;-webkit-box-shadow:none;box-shadow:none;background:none;width:100%;padding:0;white-space:pre-wrap}.jupyter-wrapper .bp3-editable-text-input::-webkit-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-editable-text-input::-moz-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-editable-text-input:-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-editable-text-input::-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-editable-text-input::placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-editable-text-input:focus{outline:none}.jupyter-wrapper .bp3-editable-text-input::-ms-clear{display:none}.jupyter-wrapper .bp3-editable-text-content{overflow:hidden;padding-right:2px;text-overflow:ellipsis;white-space:pre}.jupyter-wrapper .bp3-editable-text-editing>.bp3-editable-text-content{position:absolute;left:0;visibility:hidden}.jupyter-wrapper .bp3-editable-text-placeholder>.bp3-editable-text-content{color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-dark .bp3-editable-text-placeholder>.bp3-editable-text-content{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-editable-text.bp3-multiline{display:block}.jupyter-wrapper .bp3-editable-text.bp3-multiline .bp3-editable-text-content{overflow:auto;white-space:pre-wrap;word-wrap:break-word}.jupyter-wrapper .bp3-control-group{-webkit-transform:translateZ(0);transform:translateZ(0);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.jupyter-wrapper .bp3-control-group>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-control-group>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-control-group .bp3-button,.jupyter-wrapper .bp3-control-group .bp3-html-select,.jupyter-wrapper .bp3-control-group .bp3-input,.jupyter-wrapper .bp3-control-group .bp3-select{position:relative}.jupyter-wrapper .bp3-control-group .bp3-input{z-index:2;border-radius:inherit}.jupyter-wrapper .bp3-control-group .bp3-input:focus{z-index:14;border-radius:3px}.jupyter-wrapper .bp3-control-group .bp3-input[class*=bp3-intent]{z-index:13}.jupyter-wrapper .bp3-control-group .bp3-input[class*=bp3-intent]:focus{z-index:15}.jupyter-wrapper .bp3-control-group .bp3-input[readonly],.jupyter-wrapper .bp3-control-group .bp3-input:disabled,.jupyter-wrapper .bp3-control-group .bp3-input.bp3-disabled{z-index:1}.jupyter-wrapper .bp3-control-group .bp3-input-group[class*=bp3-intent] .bp3-input{z-index:13}.jupyter-wrapper .bp3-control-group .bp3-input-group[class*=bp3-intent] .bp3-input:focus{z-index:15}.jupyter-wrapper .bp3-control-group .bp3-button,.jupyter-wrapper .bp3-control-group .bp3-html-select select,.jupyter-wrapper .bp3-control-group .bp3-select select{-webkit-transform:translateZ(0);transform:translateZ(0);z-index:4;border-radius:inherit}.jupyter-wrapper .bp3-control-group .bp3-button:focus,.jupyter-wrapper .bp3-control-group .bp3-html-select select:focus,.jupyter-wrapper .bp3-control-group .bp3-select select:focus{z-index:5}.jupyter-wrapper .bp3-control-group .bp3-button:hover,.jupyter-wrapper .bp3-control-group .bp3-html-select select:hover,.jupyter-wrapper .bp3-control-group .bp3-select select:hover{z-index:6}.jupyter-wrapper .bp3-control-group .bp3-button:active,.jupyter-wrapper .bp3-control-group .bp3-html-select select:active,.jupyter-wrapper .bp3-control-group .bp3-select select:active{z-index:7}.jupyter-wrapper .bp3-control-group .bp3-button[readonly],.jupyter-wrapper .bp3-control-group .bp3-button:disabled,.jupyter-wrapper .bp3-control-group .bp3-button.bp3-disabled,.jupyter-wrapper .bp3-control-group .bp3-html-select select[readonly],.jupyter-wrapper .bp3-control-group .bp3-html-select select:disabled,.jupyter-wrapper .bp3-control-group .bp3-html-select select.bp3-disabled,.jupyter-wrapper .bp3-control-group .bp3-select select[readonly],.jupyter-wrapper .bp3-control-group .bp3-select select:disabled,.jupyter-wrapper .bp3-control-group .bp3-select select.bp3-disabled{z-index:3}.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent],.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent],.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent]{z-index:9}.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent]:focus,.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent]:focus,.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent]:focus{z-index:10}.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent]:hover,.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent]:hover,.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent]:hover{z-index:11}.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent]:active,.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent]:active,.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent]:active{z-index:12}.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent][readonly],.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent]:disabled,.jupyter-wrapper .bp3-control-group .bp3-button[class*=bp3-intent].bp3-disabled,.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent][readonly],.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent]:disabled,.jupyter-wrapper .bp3-control-group .bp3-html-select select[class*=bp3-intent].bp3-disabled,.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent][readonly],.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent]:disabled,.jupyter-wrapper .bp3-control-group .bp3-select select[class*=bp3-intent].bp3-disabled{z-index:8}.jupyter-wrapper .bp3-control-group .bp3-input-group>.bp3-icon,.jupyter-wrapper .bp3-control-group .bp3-input-group>.bp3-button,.jupyter-wrapper .bp3-control-group .bp3-input-group>.bp3-input-action{z-index:16}.jupyter-wrapper .bp3-control-group .bp3-select::after,.jupyter-wrapper .bp3-control-group .bp3-html-select::after,.jupyter-wrapper .bp3-control-group .bp3-select>.bp3-icon,.jupyter-wrapper .bp3-control-group .bp3-html-select>.bp3-icon{z-index:17}.jupyter-wrapper .bp3-control-group:not(.bp3-vertical)>*{margin-right:-1px}.jupyter-wrapper .bp3-dark .bp3-control-group:not(.bp3-vertical)>*{margin-right:0}.jupyter-wrapper .bp3-dark .bp3-control-group:not(.bp3-vertical)>.bp3-button+.bp3-button{margin-left:1px}.jupyter-wrapper .bp3-control-group .bp3-popover-wrapper,.jupyter-wrapper .bp3-control-group .bp3-popover-target{border-radius:inherit}.jupyter-wrapper .bp3-control-group>:first-child{border-radius:3px 0 0 3px}.jupyter-wrapper .bp3-control-group>:last-child{margin-right:0;border-radius:0 3px 3px 0}.jupyter-wrapper .bp3-control-group>:only-child{margin-right:0;border-radius:3px}.jupyter-wrapper .bp3-control-group .bp3-input-group .bp3-button{border-radius:3px}.jupyter-wrapper .bp3-control-group>.bp3-fill{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.jupyter-wrapper .bp3-control-group.bp3-fill>*:not(.bp3-fixed){-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.jupyter-wrapper .bp3-control-group.bp3-vertical{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.jupyter-wrapper .bp3-control-group.bp3-vertical>*{margin-top:-1px}.jupyter-wrapper .bp3-control-group.bp3-vertical>:first-child{margin-top:0;border-radius:3px 3px 0 0}.jupyter-wrapper .bp3-control-group.bp3-vertical>:last-child{border-radius:0 0 3px 3px}.jupyter-wrapper .bp3-control{display:block;position:relative;margin-bottom:10px;cursor:pointer;text-transform:none}.jupyter-wrapper .bp3-control input:checked~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#137cbd;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));color:#fff}.jupyter-wrapper .bp3-control:hover input:checked~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#106ba3}.jupyter-wrapper .bp3-control input:not(:disabled):active:checked~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background:#0e5a8a}.jupyter-wrapper .bp3-control input:disabled:checked~.bp3-control-indicator{-webkit-box-shadow:none;box-shadow:none;background:rgba(19,124,189,.5)}.jupyter-wrapper .bp3-dark .bp3-control input:checked~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-control:hover input:checked~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#106ba3}.jupyter-wrapper .bp3-dark .bp3-control input:not(:disabled):active:checked~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background-color:#0e5a8a}.jupyter-wrapper .bp3-dark .bp3-control input:disabled:checked~.bp3-control-indicator{-webkit-box-shadow:none;box-shadow:none;background:rgba(14,90,138,.5)}.jupyter-wrapper .bp3-control:not(.bp3-align-right){padding-left:26px}.jupyter-wrapper .bp3-control:not(.bp3-align-right) .bp3-control-indicator{margin-left:-26px}.jupyter-wrapper .bp3-control.bp3-align-right{padding-right:26px}.jupyter-wrapper .bp3-control.bp3-align-right .bp3-control-indicator{margin-right:-26px}.jupyter-wrapper .bp3-control.bp3-disabled{cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-control.bp3-inline{display:inline-block;margin-right:20px}.jupyter-wrapper .bp3-control input{position:absolute;top:0;left:0;opacity:0;z-index:-1}.jupyter-wrapper .bp3-control .bp3-control-indicator{display:inline-block;position:relative;margin-top:-3px;margin-right:10px;border:none;-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#f5f8fa;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));cursor:pointer;width:1em;height:1em;vertical-align:middle;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-control .bp3-control-indicator::before{display:block;width:1em;height:1em;content:\"\"}.jupyter-wrapper .bp3-control:hover .bp3-control-indicator{background-color:#ebf1f5}.jupyter-wrapper .bp3-control input:not(:disabled):active~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background:#d8e1e8}.jupyter-wrapper .bp3-control input:disabled~.bp3-control-indicator{-webkit-box-shadow:none;box-shadow:none;background:rgba(206,217,224,.5);cursor:not-allowed}.jupyter-wrapper .bp3-control input:focus~.bp3-control-indicator{outline:rgba(19,124,189,.6) auto 2px;outline-offset:2px;-moz-outline-radius:6px}.jupyter-wrapper .bp3-control.bp3-align-right .bp3-control-indicator{float:right;margin-top:1px;margin-left:10px}.jupyter-wrapper .bp3-control.bp3-large{font-size:16px}.jupyter-wrapper .bp3-control.bp3-large:not(.bp3-align-right){padding-left:30px}.jupyter-wrapper .bp3-control.bp3-large:not(.bp3-align-right) .bp3-control-indicator{margin-left:-30px}.jupyter-wrapper .bp3-control.bp3-large.bp3-align-right{padding-right:30px}.jupyter-wrapper .bp3-control.bp3-large.bp3-align-right .bp3-control-indicator{margin-right:-30px}.jupyter-wrapper .bp3-control.bp3-large .bp3-control-indicator{font-size:20px}.jupyter-wrapper .bp3-control.bp3-large.bp3-align-right .bp3-control-indicator{margin-top:0}.jupyter-wrapper .bp3-control.bp3-checkbox input:indeterminate~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#137cbd;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));color:#fff}.jupyter-wrapper .bp3-control.bp3-checkbox:hover input:indeterminate~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 -1px 0 rgba(16,22,26,.2);background-color:#106ba3}.jupyter-wrapper .bp3-control.bp3-checkbox input:not(:disabled):active:indeterminate~.bp3-control-indicator{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background:#0e5a8a}.jupyter-wrapper .bp3-control.bp3-checkbox input:disabled:indeterminate~.bp3-control-indicator{-webkit-box-shadow:none;box-shadow:none;background:rgba(19,124,189,.5)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-checkbox input:indeterminate~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-checkbox:hover input:indeterminate~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#106ba3}.jupyter-wrapper .bp3-dark .bp3-control.bp3-checkbox input:not(:disabled):active:indeterminate~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.4),inset 0 1px 2px rgba(16,22,26,.2);background-color:#0e5a8a}.jupyter-wrapper .bp3-dark .bp3-control.bp3-checkbox input:disabled:indeterminate~.bp3-control-indicator{-webkit-box-shadow:none;box-shadow:none;background:rgba(14,90,138,.5)}.jupyter-wrapper .bp3-control.bp3-checkbox .bp3-control-indicator{border-radius:3px}.jupyter-wrapper .bp3-control.bp3-checkbox input:checked~.bp3-control-indicator::before{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 0 0-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0 0 12 5z' fill='white'/%3e%3c/svg%3e\")}.jupyter-wrapper .bp3-control.bp3-checkbox input:indeterminate~.bp3-control-indicator::before{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M11 7H5c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1z' fill='white'/%3e%3c/svg%3e\")}.jupyter-wrapper .bp3-control.bp3-radio .bp3-control-indicator{border-radius:50%}.jupyter-wrapper .bp3-control.bp3-radio input:checked~.bp3-control-indicator::before{background-image:radial-gradient(#ffffff, #ffffff 28%, transparent 32%)}.jupyter-wrapper .bp3-control.bp3-radio input:checked:disabled~.bp3-control-indicator::before{opacity:.5}.jupyter-wrapper .bp3-control.bp3-radio input:focus~.bp3-control-indicator{-moz-outline-radius:16px}.jupyter-wrapper .bp3-control.bp3-switch input~.bp3-control-indicator{background:rgba(167,182,194,.5)}.jupyter-wrapper .bp3-control.bp3-switch:hover input~.bp3-control-indicator{background:rgba(115,134,148,.5)}.jupyter-wrapper .bp3-control.bp3-switch input:not(:disabled):active~.bp3-control-indicator{background:rgba(92,112,128,.5)}.jupyter-wrapper .bp3-control.bp3-switch input:disabled~.bp3-control-indicator{background:rgba(206,217,224,.5)}.jupyter-wrapper .bp3-control.bp3-switch input:disabled~.bp3-control-indicator::before{background:rgba(255,255,255,.8)}.jupyter-wrapper .bp3-control.bp3-switch input:checked~.bp3-control-indicator{background:#137cbd}.jupyter-wrapper .bp3-control.bp3-switch:hover input:checked~.bp3-control-indicator{background:#106ba3}.jupyter-wrapper .bp3-control.bp3-switch input:checked:not(:disabled):active~.bp3-control-indicator{background:#0e5a8a}.jupyter-wrapper .bp3-control.bp3-switch input:checked:disabled~.bp3-control-indicator{background:rgba(19,124,189,.5)}.jupyter-wrapper .bp3-control.bp3-switch input:checked:disabled~.bp3-control-indicator::before{background:rgba(255,255,255,.8)}.jupyter-wrapper .bp3-control.bp3-switch:not(.bp3-align-right){padding-left:38px}.jupyter-wrapper .bp3-control.bp3-switch:not(.bp3-align-right) .bp3-control-indicator{margin-left:-38px}.jupyter-wrapper .bp3-control.bp3-switch.bp3-align-right{padding-right:38px}.jupyter-wrapper .bp3-control.bp3-switch.bp3-align-right .bp3-control-indicator{margin-right:-38px}.jupyter-wrapper .bp3-control.bp3-switch .bp3-control-indicator{border:none;border-radius:1.75em;-webkit-box-shadow:none !important;box-shadow:none !important;width:auto;min-width:1.75em;-webkit-transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-control.bp3-switch .bp3-control-indicator::before{position:absolute;left:0;margin:2px;border-radius:50%;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.2);background:#fff;width:calc(1em - 4px);height:calc(1em - 4px);-webkit-transition:left 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:left 100ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-control.bp3-switch input:checked~.bp3-control-indicator::before{left:calc(100% - 1em)}.jupyter-wrapper .bp3-control.bp3-switch.bp3-large:not(.bp3-align-right){padding-left:45px}.jupyter-wrapper .bp3-control.bp3-switch.bp3-large:not(.bp3-align-right) .bp3-control-indicator{margin-left:-45px}.jupyter-wrapper .bp3-control.bp3-switch.bp3-large.bp3-align-right{padding-right:45px}.jupyter-wrapper .bp3-control.bp3-switch.bp3-large.bp3-align-right .bp3-control-indicator{margin-right:-45px}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input~.bp3-control-indicator{background:rgba(16,22,26,.5)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch:hover input~.bp3-control-indicator{background:rgba(16,22,26,.7)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:not(:disabled):active~.bp3-control-indicator{background:rgba(16,22,26,.9)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:disabled~.bp3-control-indicator{background:rgba(57,75,89,.5)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:disabled~.bp3-control-indicator::before{background:rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:checked~.bp3-control-indicator{background:#137cbd}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch:hover input:checked~.bp3-control-indicator{background:#106ba3}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:checked:not(:disabled):active~.bp3-control-indicator{background:#0e5a8a}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:checked:disabled~.bp3-control-indicator{background:rgba(14,90,138,.5)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:checked:disabled~.bp3-control-indicator::before{background:rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch .bp3-control-indicator::before{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background:#394b59}.jupyter-wrapper .bp3-dark .bp3-control.bp3-switch input:checked~.bp3-control-indicator::before{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-control.bp3-switch .bp3-switch-inner-text{text-align:center;font-size:.7em}.jupyter-wrapper .bp3-control.bp3-switch .bp3-control-indicator-child:first-child{visibility:hidden;margin-right:1.2em;margin-left:.5em;line-height:0}.jupyter-wrapper .bp3-control.bp3-switch .bp3-control-indicator-child:last-child{visibility:visible;margin-right:.5em;margin-left:1.2em;line-height:1em}.jupyter-wrapper .bp3-control.bp3-switch input:checked~.bp3-control-indicator .bp3-control-indicator-child:first-child{visibility:visible;line-height:1em}.jupyter-wrapper .bp3-control.bp3-switch input:checked~.bp3-control-indicator .bp3-control-indicator-child:last-child{visibility:hidden;line-height:0}.jupyter-wrapper .bp3-dark .bp3-control{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-control.bp3-disabled{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-control .bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#394b59;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0))}.jupyter-wrapper .bp3-dark .bp3-control:hover .bp3-control-indicator{background-color:#30404d}.jupyter-wrapper .bp3-dark .bp3-control input:not(:disabled):active~.bp3-control-indicator{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);background:#202b33}.jupyter-wrapper .bp3-dark .bp3-control input:disabled~.bp3-control-indicator{-webkit-box-shadow:none;box-shadow:none;background:rgba(57,75,89,.5);cursor:not-allowed}.jupyter-wrapper .bp3-dark .bp3-control.bp3-checkbox input:disabled:checked~.bp3-control-indicator,.jupyter-wrapper .bp3-dark .bp3-control.bp3-checkbox input:disabled:indeterminate~.bp3-control-indicator{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-file-input{display:inline-block;position:relative;cursor:pointer;height:30px}.jupyter-wrapper .bp3-file-input input{opacity:0;margin:0;min-width:200px}.jupyter-wrapper .bp3-file-input input:disabled+.bp3-file-upload-input,.jupyter-wrapper .bp3-file-input input.bp3-disabled+.bp3-file-upload-input{-webkit-box-shadow:none;box-shadow:none;background:rgba(206,217,224,.5);cursor:not-allowed;color:rgba(92,112,128,.6);resize:none}.jupyter-wrapper .bp3-file-input input:disabled+.bp3-file-upload-input::after,.jupyter-wrapper .bp3-file-input input.bp3-disabled+.bp3-file-upload-input::after{outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:rgba(206,217,224,.5);background-image:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-input input:disabled+.bp3-file-upload-input::after.bp3-active,.jupyter-wrapper .bp3-file-input input:disabled+.bp3-file-upload-input::after.bp3-active:hover,.jupyter-wrapper .bp3-file-input input.bp3-disabled+.bp3-file-upload-input::after.bp3-active,.jupyter-wrapper .bp3-file-input input.bp3-disabled+.bp3-file-upload-input::after.bp3-active:hover{background:rgba(206,217,224,.7)}.jupyter-wrapper .bp3-dark .bp3-file-input input:disabled+.bp3-file-upload-input,.jupyter-wrapper .bp3-dark .bp3-file-input input.bp3-disabled+.bp3-file-upload-input{-webkit-box-shadow:none;box-shadow:none;background:rgba(57,75,89,.5);color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-input input:disabled+.bp3-file-upload-input::after,.jupyter-wrapper .bp3-dark .bp3-file-input input.bp3-disabled+.bp3-file-upload-input::after{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(57,75,89,.5);background-image:none;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-input input:disabled+.bp3-file-upload-input::after.bp3-active,.jupyter-wrapper .bp3-dark .bp3-file-input input.bp3-disabled+.bp3-file-upload-input::after.bp3-active{background:rgba(57,75,89,.7)}.jupyter-wrapper .bp3-file-input.bp3-file-input-has-selection .bp3-file-upload-input{color:#182026}.jupyter-wrapper .bp3-dark .bp3-file-input.bp3-file-input-has-selection .bp3-file-upload-input{color:#f5f8fa}.jupyter-wrapper .bp3-file-input.bp3-fill{width:100%}.jupyter-wrapper .bp3-file-input.bp3-large,.jupyter-wrapper .bp3-large .bp3-file-input{height:40px}.jupyter-wrapper .bp3-file-input .bp3-file-upload-input-custom-text::after{content:attr(bp3-button-text)}.jupyter-wrapper .bp3-file-upload-input{outline:none;border:none;border-radius:3px;-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);background:#fff;height:30px;padding:0 10px;vertical-align:middle;line-height:30px;color:#182026;font-size:14px;font-weight:400;-webkit-transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-appearance:none;-moz-appearance:none;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;position:absolute;top:0;right:0;left:0;padding-right:80px;color:rgba(92,112,128,.6);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-file-upload-input::-webkit-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-upload-input::-moz-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-upload-input:-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-upload-input::-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-upload-input::placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-upload-input:focus,.jupyter-wrapper .bp3-file-upload-input.bp3-active{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-file-upload-input[type=search],.jupyter-wrapper .bp3-file-upload-input.bp3-round{border-radius:30px;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:10px}.jupyter-wrapper .bp3-file-upload-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.15);box-shadow:inset 0 0 0 1px rgba(16,22,26,.15)}.jupyter-wrapper .bp3-file-upload-input:disabled,.jupyter-wrapper .bp3-file-upload-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background:rgba(206,217,224,.5);cursor:not-allowed;color:rgba(92,112,128,.6);resize:none}.jupyter-wrapper .bp3-file-upload-input::after{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-color:#f5f8fa;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));color:#182026;min-width:24px;min-height:24px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;position:absolute;top:0;right:0;margin:3px;border-radius:3px;width:70px;text-align:center;line-height:24px;content:\"Browse\"}.jupyter-wrapper .bp3-file-upload-input::after:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#ebf1f5}.jupyter-wrapper .bp3-file-upload-input::after:active,.jupyter-wrapper .bp3-file-upload-input::after.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background-color:#d8e1e8;background-image:none}.jupyter-wrapper .bp3-file-upload-input::after:disabled,.jupyter-wrapper .bp3-file-upload-input::after.bp3-disabled{outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:rgba(206,217,224,.5);background-image:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-file-upload-input::after:disabled.bp3-active,.jupyter-wrapper .bp3-file-upload-input::after:disabled.bp3-active:hover,.jupyter-wrapper .bp3-file-upload-input::after.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-file-upload-input::after.bp3-disabled.bp3-active:hover{background:rgba(206,217,224,.7)}.jupyter-wrapper .bp3-file-upload-input:hover::after{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#ebf1f5}.jupyter-wrapper .bp3-file-upload-input:active::after{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background-color:#d8e1e8;background-image:none}.jupyter-wrapper .bp3-large .bp3-file-upload-input{height:40px;line-height:40px;font-size:16px;padding-right:95px}.jupyter-wrapper .bp3-large .bp3-file-upload-input[type=search],.jupyter-wrapper .bp3-large .bp3-file-upload-input.bp3-round{padding:0 15px}.jupyter-wrapper .bp3-large .bp3-file-upload-input::after{min-width:30px;min-height:30px;margin:5px;width:85px;line-height:30px}.jupyter-wrapper .bp3-dark .bp3-file-upload-input{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);background:rgba(16,22,26,.3);color:#f5f8fa;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::-webkit-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::-moz-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input:-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input:focus{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input:disabled,.jupyter-wrapper .bp3-dark .bp3-file-upload-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background:rgba(57,75,89,.5);color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#394b59;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after:hover,.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after:active,.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after.bp3-active{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after:hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#30404d}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after:active,.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after.bp3-active{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);background-color:#202b33;background-image:none}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after:disabled,.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(57,75,89,.5);background-image:none;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after.bp3-disabled.bp3-active{background:rgba(57,75,89,.7)}.jupyter-wrapper .bp3-dark .bp3-file-upload-input::after .bp3-button-spinner .bp3-spinner-head{background:rgba(16,22,26,.5);stroke:#8a9ba8}.jupyter-wrapper .bp3-dark .bp3-file-upload-input:hover::after{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#30404d}.jupyter-wrapper .bp3-dark .bp3-file-upload-input:active::after{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);background-color:#202b33;background-image:none}.jupyter-wrapper .bp3-file-upload-input::after{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1)}.jupyter-wrapper .bp3-form-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 0 15px}.jupyter-wrapper .bp3-form-group label.bp3-label{margin-bottom:5px}.jupyter-wrapper .bp3-form-group .bp3-control{margin-top:7px}.jupyter-wrapper .bp3-form-group .bp3-form-helper-text{margin-top:5px;color:#5c7080;font-size:12px}.jupyter-wrapper .bp3-form-group.bp3-intent-primary .bp3-form-helper-text{color:#106ba3}.jupyter-wrapper .bp3-form-group.bp3-intent-success .bp3-form-helper-text{color:#0d8050}.jupyter-wrapper .bp3-form-group.bp3-intent-warning .bp3-form-helper-text{color:#bf7326}.jupyter-wrapper .bp3-form-group.bp3-intent-danger .bp3-form-helper-text{color:#c23030}.jupyter-wrapper .bp3-form-group.bp3-inline{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.jupyter-wrapper .bp3-form-group.bp3-inline.bp3-large label.bp3-label{margin:0 10px 0 0;line-height:40px}.jupyter-wrapper .bp3-form-group.bp3-inline label.bp3-label{margin:0 10px 0 0;line-height:30px}.jupyter-wrapper .bp3-form-group.bp3-disabled .bp3-label,.jupyter-wrapper .bp3-form-group.bp3-disabled .bp3-text-muted,.jupyter-wrapper .bp3-form-group.bp3-disabled .bp3-form-helper-text{color:rgba(92,112,128,.6) !important}.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-intent-primary .bp3-form-helper-text{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-intent-success .bp3-form-helper-text{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-intent-warning .bp3-form-helper-text{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-intent-danger .bp3-form-helper-text{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-form-group .bp3-form-helper-text{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-disabled .bp3-label,.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-disabled .bp3-text-muted,.jupyter-wrapper .bp3-dark .bp3-form-group.bp3-disabled .bp3-form-helper-text{color:rgba(167,182,194,.6) !important}.jupyter-wrapper .bp3-input-group{display:block;position:relative}.jupyter-wrapper .bp3-input-group .bp3-input{position:relative;width:100%}.jupyter-wrapper .bp3-input-group .bp3-input:not(:first-child){padding-left:30px}.jupyter-wrapper .bp3-input-group .bp3-input:not(:last-child){padding-right:30px}.jupyter-wrapper .bp3-input-group .bp3-input-action,.jupyter-wrapper .bp3-input-group>.bp3-button,.jupyter-wrapper .bp3-input-group>.bp3-icon{position:absolute;top:0}.jupyter-wrapper .bp3-input-group .bp3-input-action:first-child,.jupyter-wrapper .bp3-input-group>.bp3-button:first-child,.jupyter-wrapper .bp3-input-group>.bp3-icon:first-child{left:0}.jupyter-wrapper .bp3-input-group .bp3-input-action:last-child,.jupyter-wrapper .bp3-input-group>.bp3-button:last-child,.jupyter-wrapper .bp3-input-group>.bp3-icon:last-child{right:0}.jupyter-wrapper .bp3-input-group .bp3-button{min-width:24px;min-height:24px;margin:3px;padding:0 7px}.jupyter-wrapper .bp3-input-group .bp3-button:empty{padding:0}.jupyter-wrapper .bp3-input-group>.bp3-icon{z-index:1;color:#5c7080}.jupyter-wrapper .bp3-input-group>.bp3-icon:empty{line-height:1;font-family:\"Icons16\",sans-serif;font-size:16px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.jupyter-wrapper .bp3-input-group>.bp3-icon,.jupyter-wrapper .bp3-input-group .bp3-input-action>.bp3-spinner{margin:7px}.jupyter-wrapper .bp3-input-group .bp3-tag{margin:5px}.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:not(:hover):not(:focus),.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus){color:#5c7080}.jupyter-wrapper .bp3-dark .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:not(:hover):not(:focus),.jupyter-wrapper .bp3-dark .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus){color:#a7b6c2}.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-standard,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-large,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-standard,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-large{color:#5c7080}.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:disabled,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:disabled{color:rgba(92,112,128,.6) !important}.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:disabled .bp3-icon,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:disabled .bp3-icon-standard,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-button.bp3-minimal:disabled .bp3-icon-large,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:disabled .bp3-icon,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:disabled .bp3-icon-standard,.jupyter-wrapper .bp3-input-group .bp3-input:not(:focus)+.bp3-input-action .bp3-button.bp3-minimal:disabled .bp3-icon-large{color:rgba(92,112,128,.6) !important}.jupyter-wrapper .bp3-input-group.bp3-disabled{cursor:not-allowed}.jupyter-wrapper .bp3-input-group.bp3-disabled .bp3-icon{color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input-group.bp3-large .bp3-button{min-width:30px;min-height:30px;margin:5px}.jupyter-wrapper .bp3-input-group.bp3-large>.bp3-icon,.jupyter-wrapper .bp3-input-group.bp3-large .bp3-input-action>.bp3-spinner{margin:12px}.jupyter-wrapper .bp3-input-group.bp3-large .bp3-input{height:40px;line-height:40px;font-size:16px}.jupyter-wrapper .bp3-input-group.bp3-large .bp3-input[type=search],.jupyter-wrapper .bp3-input-group.bp3-large .bp3-input.bp3-round{padding:0 15px}.jupyter-wrapper .bp3-input-group.bp3-large .bp3-input:not(:first-child){padding-left:40px}.jupyter-wrapper .bp3-input-group.bp3-large .bp3-input:not(:last-child){padding-right:40px}.jupyter-wrapper .bp3-input-group.bp3-small .bp3-button{min-width:20px;min-height:20px;margin:2px}.jupyter-wrapper .bp3-input-group.bp3-small .bp3-tag{min-width:20px;min-height:20px;margin:2px}.jupyter-wrapper .bp3-input-group.bp3-small>.bp3-icon,.jupyter-wrapper .bp3-input-group.bp3-small .bp3-input-action>.bp3-spinner{margin:4px}.jupyter-wrapper .bp3-input-group.bp3-small .bp3-input{height:24px;padding-right:8px;padding-left:8px;line-height:24px;font-size:12px}.jupyter-wrapper .bp3-input-group.bp3-small .bp3-input[type=search],.jupyter-wrapper .bp3-input-group.bp3-small .bp3-input.bp3-round{padding:0 12px}.jupyter-wrapper .bp3-input-group.bp3-small .bp3-input:not(:first-child){padding-left:24px}.jupyter-wrapper .bp3-input-group.bp3-small .bp3-input:not(:last-child){padding-right:24px}.jupyter-wrapper .bp3-input-group.bp3-fill{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%}.jupyter-wrapper .bp3-input-group.bp3-round .bp3-button,.jupyter-wrapper .bp3-input-group.bp3-round .bp3-input,.jupyter-wrapper .bp3-input-group.bp3-round .bp3-tag{border-radius:30px}.jupyter-wrapper .bp3-dark .bp3-input-group .bp3-icon{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-input-group.bp3-disabled .bp3-icon{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-input-group.bp3-intent-primary .bp3-input{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px #137cbd,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px #137cbd,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-primary .bp3-input:focus{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-primary .bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px #137cbd;box-shadow:inset 0 0 0 1px #137cbd}.jupyter-wrapper .bp3-input-group.bp3-intent-primary .bp3-input:disabled,.jupyter-wrapper .bp3-input-group.bp3-intent-primary .bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input-group.bp3-intent-primary>.bp3-icon{color:#106ba3}.jupyter-wrapper .bp3-dark .bp3-input-group.bp3-intent-primary>.bp3-icon{color:#48aff0}.jupyter-wrapper .bp3-input-group.bp3-intent-success .bp3-input{-webkit-box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px #0f9960,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px #0f9960,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-success .bp3-input:focus{-webkit-box-shadow:0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-success .bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px #0f9960;box-shadow:inset 0 0 0 1px #0f9960}.jupyter-wrapper .bp3-input-group.bp3-intent-success .bp3-input:disabled,.jupyter-wrapper .bp3-input-group.bp3-intent-success .bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input-group.bp3-intent-success>.bp3-icon{color:#0d8050}.jupyter-wrapper .bp3-dark .bp3-input-group.bp3-intent-success>.bp3-icon{color:#3dcc91}.jupyter-wrapper .bp3-input-group.bp3-intent-warning .bp3-input{-webkit-box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px #d9822b,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px #d9822b,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-warning .bp3-input:focus{-webkit-box-shadow:0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-warning .bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px #d9822b;box-shadow:inset 0 0 0 1px #d9822b}.jupyter-wrapper .bp3-input-group.bp3-intent-warning .bp3-input:disabled,.jupyter-wrapper .bp3-input-group.bp3-intent-warning .bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input-group.bp3-intent-warning>.bp3-icon{color:#bf7326}.jupyter-wrapper .bp3-dark .bp3-input-group.bp3-intent-warning>.bp3-icon{color:#ffb366}.jupyter-wrapper .bp3-input-group.bp3-intent-danger .bp3-input{-webkit-box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px #db3737,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px #db3737,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-danger .bp3-input:focus{-webkit-box-shadow:0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input-group.bp3-intent-danger .bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px #db3737;box-shadow:inset 0 0 0 1px #db3737}.jupyter-wrapper .bp3-input-group.bp3-intent-danger .bp3-input:disabled,.jupyter-wrapper .bp3-input-group.bp3-intent-danger .bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input-group.bp3-intent-danger>.bp3-icon{color:#c23030}.jupyter-wrapper .bp3-dark .bp3-input-group.bp3-intent-danger>.bp3-icon{color:#ff7373}.jupyter-wrapper .bp3-input{outline:none;border:none;border-radius:3px;-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);background:#fff;height:30px;padding:0 10px;vertical-align:middle;line-height:30px;color:#182026;font-size:14px;font-weight:400;-webkit-transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-appearance:none;-moz-appearance:none;appearance:none}.jupyter-wrapper .bp3-input::-webkit-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input::-moz-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input:-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input::-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input::placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input:focus,.jupyter-wrapper .bp3-input.bp3-active{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input[type=search],.jupyter-wrapper .bp3-input.bp3-round{border-radius:30px;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:10px}.jupyter-wrapper .bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.15);box-shadow:inset 0 0 0 1px rgba(16,22,26,.15)}.jupyter-wrapper .bp3-input:disabled,.jupyter-wrapper .bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background:rgba(206,217,224,.5);cursor:not-allowed;color:rgba(92,112,128,.6);resize:none}.jupyter-wrapper .bp3-input.bp3-large{height:40px;line-height:40px;font-size:16px}.jupyter-wrapper .bp3-input.bp3-large[type=search],.jupyter-wrapper .bp3-input.bp3-large.bp3-round{padding:0 15px}.jupyter-wrapper .bp3-input.bp3-small{height:24px;padding-right:8px;padding-left:8px;line-height:24px;font-size:12px}.jupyter-wrapper .bp3-input.bp3-small[type=search],.jupyter-wrapper .bp3-input.bp3-small.bp3-round{padding:0 12px}.jupyter-wrapper .bp3-input.bp3-fill{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%}.jupyter-wrapper .bp3-dark .bp3-input{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);background:rgba(16,22,26,.3);color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-input::-webkit-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-input::-moz-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-input:-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-input::-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-input::placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-input:focus{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input:disabled,.jupyter-wrapper .bp3-dark .bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background:rgba(57,75,89,.5);color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-input.bp3-intent-primary{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px #137cbd,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px #137cbd,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-primary:focus{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-primary[readonly]{-webkit-box-shadow:inset 0 0 0 1px #137cbd;box-shadow:inset 0 0 0 1px #137cbd}.jupyter-wrapper .bp3-input.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-input.bp3-intent-primary.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-primary{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px #137cbd,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px #137cbd,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-primary:focus{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-primary[readonly]{-webkit-box-shadow:inset 0 0 0 1px #137cbd;box-shadow:inset 0 0 0 1px #137cbd}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-primary.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input.bp3-intent-success{-webkit-box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px #0f9960,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px #0f9960,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-success:focus{-webkit-box-shadow:0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-success[readonly]{-webkit-box-shadow:inset 0 0 0 1px #0f9960;box-shadow:inset 0 0 0 1px #0f9960}.jupyter-wrapper .bp3-input.bp3-intent-success:disabled,.jupyter-wrapper .bp3-input.bp3-intent-success.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-success{-webkit-box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px #0f9960,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),0 0 0 0 rgba(15,153,96,0),inset 0 0 0 1px #0f9960,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-success:focus{-webkit-box-shadow:0 0 0 1px #0f9960,0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #0f9960,0 0 0 1px #0f9960,0 0 0 3px rgba(15,153,96,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-success[readonly]{-webkit-box-shadow:inset 0 0 0 1px #0f9960;box-shadow:inset 0 0 0 1px #0f9960}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-success:disabled,.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-success.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input.bp3-intent-warning{-webkit-box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px #d9822b,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px #d9822b,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-warning:focus{-webkit-box-shadow:0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-warning[readonly]{-webkit-box-shadow:inset 0 0 0 1px #d9822b;box-shadow:inset 0 0 0 1px #d9822b}.jupyter-wrapper .bp3-input.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-input.bp3-intent-warning.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-warning{-webkit-box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px #d9822b,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),0 0 0 0 rgba(217,130,43,0),inset 0 0 0 1px #d9822b,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-warning:focus{-webkit-box-shadow:0 0 0 1px #d9822b,0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #d9822b,0 0 0 1px #d9822b,0 0 0 3px rgba(217,130,43,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-warning[readonly]{-webkit-box-shadow:inset 0 0 0 1px #d9822b;box-shadow:inset 0 0 0 1px #d9822b}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-warning.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input.bp3-intent-danger{-webkit-box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px #db3737,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px #db3737,inset 0 0 0 1px rgba(16,22,26,.15),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-danger:focus{-webkit-box-shadow:0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-input.bp3-intent-danger[readonly]{-webkit-box-shadow:inset 0 0 0 1px #db3737;box-shadow:inset 0 0 0 1px #db3737}.jupyter-wrapper .bp3-input.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-input.bp3-intent-danger.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-danger{-webkit-box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px #db3737,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),0 0 0 0 rgba(219,55,55,0),inset 0 0 0 1px #db3737,inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-danger:focus{-webkit-box-shadow:0 0 0 1px #db3737,0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #db3737,0 0 0 1px #db3737,0 0 0 3px rgba(219,55,55,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-danger[readonly]{-webkit-box-shadow:inset 0 0 0 1px #db3737;box-shadow:inset 0 0 0 1px #db3737}.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-dark .bp3-input.bp3-intent-danger.bp3-disabled{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-input::-ms-clear{display:none}.jupyter-wrapper textarea.bp3-input{max-width:100%;padding:10px}.jupyter-wrapper textarea.bp3-input,.jupyter-wrapper textarea.bp3-input.bp3-large,.jupyter-wrapper textarea.bp3-input.bp3-small{height:auto;line-height:inherit}.jupyter-wrapper textarea.bp3-input.bp3-small{padding:8px}.jupyter-wrapper .bp3-dark textarea.bp3-input{-webkit-box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),0 0 0 0 rgba(19,124,189,0),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);background:rgba(16,22,26,.3);color:#f5f8fa}.jupyter-wrapper .bp3-dark textarea.bp3-input::-webkit-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark textarea.bp3-input::-moz-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark textarea.bp3-input:-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark textarea.bp3-input::-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark textarea.bp3-input::placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark textarea.bp3-input:focus{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark textarea.bp3-input[readonly]{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark textarea.bp3-input:disabled,.jupyter-wrapper .bp3-dark textarea.bp3-input.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background:rgba(57,75,89,.5);color:rgba(167,182,194,.6)}.jupyter-wrapper label.bp3-label{display:block;margin-top:0;margin-bottom:15px}.jupyter-wrapper label.bp3-label .bp3-html-select,.jupyter-wrapper label.bp3-label .bp3-input,.jupyter-wrapper label.bp3-label .bp3-select,.jupyter-wrapper label.bp3-label .bp3-slider,.jupyter-wrapper label.bp3-label .bp3-popover-wrapper{display:block;margin-top:5px;text-transform:none}.jupyter-wrapper label.bp3-label .bp3-button-group{margin-top:5px}.jupyter-wrapper label.bp3-label .bp3-select select,.jupyter-wrapper label.bp3-label .bp3-html-select select{width:100%;vertical-align:top;font-weight:400}.jupyter-wrapper label.bp3-label.bp3-disabled,.jupyter-wrapper label.bp3-label.bp3-disabled .bp3-text-muted{color:rgba(92,112,128,.6)}.jupyter-wrapper label.bp3-label.bp3-inline{line-height:30px}.jupyter-wrapper label.bp3-label.bp3-inline .bp3-html-select,.jupyter-wrapper label.bp3-label.bp3-inline .bp3-input,.jupyter-wrapper label.bp3-label.bp3-inline .bp3-input-group,.jupyter-wrapper label.bp3-label.bp3-inline .bp3-select,.jupyter-wrapper label.bp3-label.bp3-inline .bp3-popover-wrapper{display:inline-block;margin:0 0 0 5px;vertical-align:top}.jupyter-wrapper label.bp3-label.bp3-inline .bp3-button-group{margin:0 0 0 5px}.jupyter-wrapper label.bp3-label.bp3-inline .bp3-input-group .bp3-input{margin-left:0}.jupyter-wrapper label.bp3-label.bp3-inline.bp3-large{line-height:40px}.jupyter-wrapper label.bp3-label:not(.bp3-inline) .bp3-popover-target{display:block}.jupyter-wrapper .bp3-dark label.bp3-label{color:#f5f8fa}.jupyter-wrapper .bp3-dark label.bp3-label.bp3-disabled,.jupyter-wrapper .bp3-dark label.bp3-label.bp3-disabled .bp3-text-muted{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-numeric-input .bp3-button-group.bp3-vertical>.bp3-button{-webkit-box-flex:1;-ms-flex:1 1 14px;flex:1 1 14px;width:30px;min-height:0;padding:0}.jupyter-wrapper .bp3-numeric-input .bp3-button-group.bp3-vertical>.bp3-button:first-child{border-radius:0 3px 0 0}.jupyter-wrapper .bp3-numeric-input .bp3-button-group.bp3-vertical>.bp3-button:last-child{border-radius:0 0 3px 0}.jupyter-wrapper .bp3-numeric-input .bp3-button-group.bp3-vertical:first-child>.bp3-button:first-child{border-radius:3px 0 0 0}.jupyter-wrapper .bp3-numeric-input .bp3-button-group.bp3-vertical:first-child>.bp3-button:last-child{border-radius:0 0 0 3px}.jupyter-wrapper .bp3-numeric-input.bp3-large .bp3-button-group.bp3-vertical>.bp3-button{width:40px}.jupyter-wrapper form{display:block}.jupyter-wrapper .bp3-html-select select,.jupyter-wrapper .bp3-select select{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border:none;border-radius:3px;cursor:pointer;padding:5px 10px;vertical-align:middle;text-align:left;font-size:14px;-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-color:#f5f8fa;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));color:#182026;border-radius:3px;width:100%;height:30px;padding:0 25px 0 10px;-moz-appearance:none;-webkit-appearance:none}.jupyter-wrapper .bp3-html-select select>*,.jupyter-wrapper .bp3-select select>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-html-select select>.bp3-fill,.jupyter-wrapper .bp3-select select>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-html-select select::before,.jupyter-wrapper .bp3-select select::before,.jupyter-wrapper .bp3-html-select select>*,.jupyter-wrapper .bp3-select select>*{margin-right:7px}.jupyter-wrapper .bp3-html-select select:empty::before,.jupyter-wrapper .bp3-select select:empty::before,.jupyter-wrapper .bp3-html-select select>:last-child,.jupyter-wrapper .bp3-select select>:last-child{margin-right:0}.jupyter-wrapper .bp3-html-select select:hover,.jupyter-wrapper .bp3-select select:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#ebf1f5}.jupyter-wrapper .bp3-html-select select:active,.jupyter-wrapper .bp3-select select:active,.jupyter-wrapper .bp3-html-select select.bp3-active,.jupyter-wrapper .bp3-select select.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background-color:#d8e1e8;background-image:none}.jupyter-wrapper .bp3-html-select select:disabled,.jupyter-wrapper .bp3-select select:disabled,.jupyter-wrapper .bp3-html-select select.bp3-disabled,.jupyter-wrapper .bp3-select select.bp3-disabled{outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:rgba(206,217,224,.5);background-image:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-html-select select:disabled.bp3-active,.jupyter-wrapper .bp3-select select:disabled.bp3-active,.jupyter-wrapper .bp3-html-select select:disabled.bp3-active:hover,.jupyter-wrapper .bp3-select select:disabled.bp3-active:hover,.jupyter-wrapper .bp3-html-select select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select select.bp3-disabled.bp3-active:hover,.jupyter-wrapper .bp3-select select.bp3-disabled.bp3-active:hover{background:rgba(206,217,224,.7)}.jupyter-wrapper .bp3-html-select.bp3-minimal select,.jupyter-wrapper .bp3-select.bp3-minimal select{-webkit-box-shadow:none;box-shadow:none;background:none}.jupyter-wrapper .bp3-html-select.bp3-minimal select:hover,.jupyter-wrapper .bp3-select.bp3-minimal select:hover{-webkit-box-shadow:none;box-shadow:none;background:rgba(167,182,194,.3);text-decoration:none;color:#182026}.jupyter-wrapper .bp3-html-select.bp3-minimal select:active,.jupyter-wrapper .bp3-select.bp3-minimal select:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:rgba(115,134,148,.3);color:#182026}.jupyter-wrapper .bp3-html-select.bp3-minimal select:disabled,.jupyter-wrapper .bp3-select.bp3-minimal select:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal select:disabled:hover,.jupyter-wrapper .bp3-select.bp3-minimal select:disabled:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-disabled:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-disabled:hover{background:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-html-select.bp3-minimal select:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select:disabled:hover.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select:disabled:hover.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-disabled:hover.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-disabled:hover.bp3-active{background:rgba(115,134,148,.3)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select{-webkit-box-shadow:none;box-shadow:none;background:none;color:inherit}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:hover,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:hover{background:rgba(138,155,168,.15)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-active{background:rgba(138,155,168,.3);color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:disabled,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:disabled:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:disabled:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:disabled:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:disabled:hover,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled:hover{background:none;cursor:not-allowed;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select:disabled:hover.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select:disabled:hover.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select:disabled:hover.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select:disabled:hover.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled:hover.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled:hover.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled:hover.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled:hover.bp3-active{background:rgba(138,155,168,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary{color:#106ba3}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#106ba3}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary:hover{background:rgba(19,124,189,.15);color:#106ba3}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-active{background:rgba(19,124,189,.3);color:#106ba3}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled{background:none;color:rgba(16,107,163,.5)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active{background:rgba(19,124,189,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{stroke:#106ba3}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:hover{background:rgba(19,124,189,.2);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-active{background:rgba(19,124,189,.3);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled{background:none;color:rgba(72,175,240,.5)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled.bp3-active{background:rgba(19,124,189,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success{color:#0d8050}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#0d8050}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success:hover{background:rgba(15,153,96,.15);color:#0d8050}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success.bp3-active{background:rgba(15,153,96,.3);color:#0d8050}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled{background:none;color:rgba(13,128,80,.5)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active{background:rgba(15,153,96,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-success .bp3-button-spinner .bp3-spinner-head,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{stroke:#0d8050}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:hover{background:rgba(15,153,96,.2);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-active{background:rgba(15,153,96,.3);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled{background:none;color:rgba(61,204,145,.5)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled.bp3-active{background:rgba(15,153,96,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning{color:#bf7326}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#bf7326}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning:hover{background:rgba(217,130,43,.15);color:#bf7326}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-active{background:rgba(217,130,43,.3);color:#bf7326}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled{background:none;color:rgba(191,115,38,.5)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active{background:rgba(217,130,43,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{stroke:#bf7326}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:hover{background:rgba(217,130,43,.2);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-active{background:rgba(217,130,43,.3);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled{background:none;color:rgba(255,179,102,.5)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled.bp3-active{background:rgba(217,130,43,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger{color:#c23030}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-active{-webkit-box-shadow:none;box-shadow:none;background:none;color:#c23030}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger:hover,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger:hover{background:rgba(219,55,55,.15);color:#c23030}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger:active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger:active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-active{background:rgba(219,55,55,.3);color:#c23030}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled{background:none;color:rgba(194,48,48,.5)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active{background:rgba(219,55,55,.3)}.jupyter-wrapper .bp3-html-select.bp3-minimal select.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head,.jupyter-wrapper .bp3-select.bp3-minimal select.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{stroke:#c23030}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:hover,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:hover,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:hover,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:hover{background:rgba(219,55,55,.2);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-active{background:rgba(219,55,55,.3);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled{background:none;color:rgba(255,115,115,.5)}.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled.bp3-active{background:rgba(219,55,55,.3)}.jupyter-wrapper .bp3-html-select.bp3-large select,.jupyter-wrapper .bp3-select.bp3-large select{height:40px;padding-right:35px;font-size:16px}.jupyter-wrapper .bp3-dark .bp3-html-select select,.jupyter-wrapper .bp3-dark .bp3-select select{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#394b59;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-html-select select:hover,.jupyter-wrapper .bp3-dark .bp3-select select:hover,.jupyter-wrapper .bp3-dark .bp3-html-select select:active,.jupyter-wrapper .bp3-dark .bp3-select select:active,.jupyter-wrapper .bp3-dark .bp3-html-select select.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select select.bp3-active{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-html-select select:hover,.jupyter-wrapper .bp3-dark .bp3-select select:hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#30404d}.jupyter-wrapper .bp3-dark .bp3-html-select select:active,.jupyter-wrapper .bp3-dark .bp3-select select:active,.jupyter-wrapper .bp3-dark .bp3-html-select select.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select select.bp3-active{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);background-color:#202b33;background-image:none}.jupyter-wrapper .bp3-dark .bp3-html-select select:disabled,.jupyter-wrapper .bp3-dark .bp3-select select:disabled,.jupyter-wrapper .bp3-dark .bp3-html-select select.bp3-disabled,.jupyter-wrapper .bp3-dark .bp3-select select.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(57,75,89,.5);background-image:none;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-html-select select:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select select:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-html-select select.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-select select.bp3-disabled.bp3-active{background:rgba(57,75,89,.7)}.jupyter-wrapper .bp3-dark .bp3-html-select select .bp3-button-spinner .bp3-spinner-head,.jupyter-wrapper .bp3-dark .bp3-select select .bp3-button-spinner .bp3-spinner-head{background:rgba(16,22,26,.5);stroke:#8a9ba8}.jupyter-wrapper .bp3-html-select select:disabled,.jupyter-wrapper .bp3-select select:disabled{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(206,217,224,.5);cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-html-select .bp3-icon,.jupyter-wrapper .bp3-select .bp3-icon,.jupyter-wrapper .bp3-select::after{position:absolute;top:7px;right:7px;color:#5c7080;pointer-events:none}.jupyter-wrapper .bp3-html-select .bp3-disabled.bp3-icon,.jupyter-wrapper .bp3-select .bp3-disabled.bp3-icon,.jupyter-wrapper .bp3-disabled.bp3-select::after{color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-html-select,.jupyter-wrapper .bp3-select{display:inline-block;position:relative;vertical-align:middle;letter-spacing:normal}.jupyter-wrapper .bp3-html-select select::-ms-expand,.jupyter-wrapper .bp3-select select::-ms-expand{display:none}.jupyter-wrapper .bp3-html-select .bp3-icon,.jupyter-wrapper .bp3-select .bp3-icon{color:#5c7080}.jupyter-wrapper .bp3-html-select .bp3-icon:hover,.jupyter-wrapper .bp3-select .bp3-icon:hover{color:#182026}.jupyter-wrapper .bp3-dark .bp3-html-select .bp3-icon,.jupyter-wrapper .bp3-dark .bp3-select .bp3-icon{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-html-select .bp3-icon:hover,.jupyter-wrapper .bp3-dark .bp3-select .bp3-icon:hover{color:#f5f8fa}.jupyter-wrapper .bp3-html-select.bp3-large::after,.jupyter-wrapper .bp3-html-select.bp3-large .bp3-icon,.jupyter-wrapper .bp3-select.bp3-large::after,.jupyter-wrapper .bp3-select.bp3-large .bp3-icon{top:12px;right:12px}.jupyter-wrapper .bp3-html-select.bp3-fill,.jupyter-wrapper .bp3-html-select.bp3-fill select,.jupyter-wrapper .bp3-select.bp3-fill,.jupyter-wrapper .bp3-select.bp3-fill select{width:100%}.jupyter-wrapper .bp3-dark .bp3-html-select option,.jupyter-wrapper .bp3-dark .bp3-select option{background-color:#30404d;color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-html-select::after,.jupyter-wrapper .bp3-dark .bp3-select::after{color:#a7b6c2}.jupyter-wrapper .bp3-select::after{line-height:1;font-family:\"Icons16\",sans-serif;font-size:16px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;content:\"\ue6c6\"}.jupyter-wrapper .bp3-running-text table,.jupyter-wrapper table.bp3-html-table{border-spacing:0;font-size:14px}.jupyter-wrapper .bp3-running-text table th,.jupyter-wrapper table.bp3-html-table th,.jupyter-wrapper .bp3-running-text table td,.jupyter-wrapper table.bp3-html-table td{padding:11px;vertical-align:top;text-align:left}.jupyter-wrapper .bp3-running-text table th,.jupyter-wrapper table.bp3-html-table th{color:#182026;font-weight:600}.jupyter-wrapper .bp3-running-text table td,.jupyter-wrapper table.bp3-html-table td{color:#182026}.jupyter-wrapper .bp3-running-text table tbody tr:first-child th,.jupyter-wrapper table.bp3-html-table tbody tr:first-child th,.jupyter-wrapper .bp3-running-text table tbody tr:first-child td,.jupyter-wrapper table.bp3-html-table tbody tr:first-child td{-webkit-box-shadow:inset 0 1px 0 0 rgba(16,22,26,.15);box-shadow:inset 0 1px 0 0 rgba(16,22,26,.15)}.jupyter-wrapper .bp3-dark .bp3-running-text table th,.jupyter-wrapper .bp3-running-text .bp3-dark table th,.jupyter-wrapper .bp3-dark table.bp3-html-table th{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-running-text table td,.jupyter-wrapper .bp3-running-text .bp3-dark table td,.jupyter-wrapper .bp3-dark table.bp3-html-table td{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-running-text table tbody tr:first-child th,.jupyter-wrapper .bp3-running-text .bp3-dark table tbody tr:first-child th,.jupyter-wrapper .bp3-dark table.bp3-html-table tbody tr:first-child th,.jupyter-wrapper .bp3-dark .bp3-running-text table tbody tr:first-child td,.jupyter-wrapper .bp3-running-text .bp3-dark table tbody tr:first-child td,.jupyter-wrapper .bp3-dark table.bp3-html-table tbody tr:first-child td{-webkit-box-shadow:inset 0 1px 0 0 rgba(255,255,255,.15);box-shadow:inset 0 1px 0 0 rgba(255,255,255,.15)}.jupyter-wrapper table.bp3-html-table.bp3-html-table-condensed th,.jupyter-wrapper table.bp3-html-table.bp3-html-table-condensed td,.jupyter-wrapper table.bp3-html-table.bp3-small th,.jupyter-wrapper table.bp3-html-table.bp3-small td{padding-top:6px;padding-bottom:6px}.jupyter-wrapper table.bp3-html-table.bp3-html-table-striped tbody tr:nth-child(odd) td{background:rgba(191,204,214,.15)}.jupyter-wrapper table.bp3-html-table.bp3-html-table-bordered th:not(:first-child){-webkit-box-shadow:inset 1px 0 0 0 rgba(16,22,26,.15);box-shadow:inset 1px 0 0 0 rgba(16,22,26,.15)}.jupyter-wrapper table.bp3-html-table.bp3-html-table-bordered tbody tr td{-webkit-box-shadow:inset 0 1px 0 0 rgba(16,22,26,.15);box-shadow:inset 0 1px 0 0 rgba(16,22,26,.15)}.jupyter-wrapper table.bp3-html-table.bp3-html-table-bordered tbody tr td:not(:first-child){-webkit-box-shadow:inset 1px 1px 0 0 rgba(16,22,26,.15);box-shadow:inset 1px 1px 0 0 rgba(16,22,26,.15)}.jupyter-wrapper table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td:not(:first-child){-webkit-box-shadow:inset 1px 0 0 0 rgba(16,22,26,.15);box-shadow:inset 1px 0 0 0 rgba(16,22,26,.15)}.jupyter-wrapper table.bp3-html-table.bp3-interactive tbody tr:hover td{background-color:rgba(191,204,214,.3);cursor:pointer}.jupyter-wrapper table.bp3-html-table.bp3-interactive tbody tr:active td{background-color:rgba(191,204,214,.4)}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-html-table-striped tbody tr:nth-child(odd) td{background:rgba(92,112,128,.15)}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-html-table-bordered th:not(:first-child){-webkit-box-shadow:inset 1px 0 0 0 rgba(255,255,255,.15);box-shadow:inset 1px 0 0 0 rgba(255,255,255,.15)}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-html-table-bordered tbody tr td{-webkit-box-shadow:inset 0 1px 0 0 rgba(255,255,255,.15);box-shadow:inset 0 1px 0 0 rgba(255,255,255,.15)}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-html-table-bordered tbody tr td:not(:first-child){-webkit-box-shadow:inset 1px 1px 0 0 rgba(255,255,255,.15);box-shadow:inset 1px 1px 0 0 rgba(255,255,255,.15)}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td{-webkit-box-shadow:inset 1px 0 0 0 rgba(255,255,255,.15);box-shadow:inset 1px 0 0 0 rgba(255,255,255,.15)}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td:first-child{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-interactive tbody tr:hover td{background-color:rgba(92,112,128,.3);cursor:pointer}.jupyter-wrapper .bp3-dark table.bp3-html-table.bp3-interactive tbody tr:active td{background-color:rgba(92,112,128,.4)}.jupyter-wrapper .bp3-key-combo{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.jupyter-wrapper .bp3-key-combo>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-key-combo>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-key-combo::before,.jupyter-wrapper .bp3-key-combo>*{margin-right:5px}.jupyter-wrapper .bp3-key-combo:empty::before,.jupyter-wrapper .bp3-key-combo>:last-child{margin-right:0}.jupyter-wrapper .bp3-hotkey-dialog{top:40px;padding-bottom:0}.jupyter-wrapper .bp3-hotkey-dialog .bp3-dialog-body{margin:0;padding:0}.jupyter-wrapper .bp3-hotkey-dialog .bp3-hotkey-label{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.jupyter-wrapper .bp3-hotkey-column{margin:auto;max-height:80vh;overflow-y:auto;padding:30px}.jupyter-wrapper .bp3-hotkey-column .bp3-heading{margin-bottom:20px}.jupyter-wrapper .bp3-hotkey-column .bp3-heading:not(:first-child){margin-top:40px}.jupyter-wrapper .bp3-hotkey{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-right:0;margin-left:0}.jupyter-wrapper .bp3-hotkey:not(:last-child){margin-bottom:10px}.jupyter-wrapper .bp3-icon{display:inline-block;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;vertical-align:text-bottom}.jupyter-wrapper .bp3-icon:not(:empty)::before{content:\"\" !important;content:unset !important}.jupyter-wrapper .bp3-icon>svg{display:block}.jupyter-wrapper .bp3-icon>svg:not([fill]){fill:currentColor}.jupyter-wrapper .bp3-icon.bp3-intent-primary,.jupyter-wrapper .bp3-icon-standard.bp3-intent-primary,.jupyter-wrapper .bp3-icon-large.bp3-intent-primary{color:#106ba3}.jupyter-wrapper .bp3-dark .bp3-icon.bp3-intent-primary,.jupyter-wrapper .bp3-dark .bp3-icon-standard.bp3-intent-primary,.jupyter-wrapper .bp3-dark .bp3-icon-large.bp3-intent-primary{color:#48aff0}.jupyter-wrapper .bp3-icon.bp3-intent-success,.jupyter-wrapper .bp3-icon-standard.bp3-intent-success,.jupyter-wrapper .bp3-icon-large.bp3-intent-success{color:#0d8050}.jupyter-wrapper .bp3-dark .bp3-icon.bp3-intent-success,.jupyter-wrapper .bp3-dark .bp3-icon-standard.bp3-intent-success,.jupyter-wrapper .bp3-dark .bp3-icon-large.bp3-intent-success{color:#3dcc91}.jupyter-wrapper .bp3-icon.bp3-intent-warning,.jupyter-wrapper .bp3-icon-standard.bp3-intent-warning,.jupyter-wrapper .bp3-icon-large.bp3-intent-warning{color:#bf7326}.jupyter-wrapper .bp3-dark .bp3-icon.bp3-intent-warning,.jupyter-wrapper .bp3-dark .bp3-icon-standard.bp3-intent-warning,.jupyter-wrapper .bp3-dark .bp3-icon-large.bp3-intent-warning{color:#ffb366}.jupyter-wrapper .bp3-icon.bp3-intent-danger,.jupyter-wrapper .bp3-icon-standard.bp3-intent-danger,.jupyter-wrapper .bp3-icon-large.bp3-intent-danger{color:#c23030}.jupyter-wrapper .bp3-dark .bp3-icon.bp3-intent-danger,.jupyter-wrapper .bp3-dark .bp3-icon-standard.bp3-intent-danger,.jupyter-wrapper .bp3-dark .bp3-icon-large.bp3-intent-danger{color:#ff7373}.jupyter-wrapper span.bp3-icon-standard{line-height:1;font-family:\"Icons16\",sans-serif;font-size:16px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block}.jupyter-wrapper span.bp3-icon-large{line-height:1;font-family:\"Icons20\",sans-serif;font-size:20px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block}.jupyter-wrapper span.bp3-icon:empty{line-height:1;font-family:\"Icons20\";font-size:inherit;font-weight:400;font-style:normal}.jupyter-wrapper span.bp3-icon:empty::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.jupyter-wrapper .bp3-icon-add::before{content:\"\ue63e\"}.jupyter-wrapper .bp3-icon-add-column-left::before{content:\"\ue6f9\"}.jupyter-wrapper .bp3-icon-add-column-right::before{content:\"\ue6fa\"}.jupyter-wrapper .bp3-icon-add-row-bottom::before{content:\"\ue6f8\"}.jupyter-wrapper .bp3-icon-add-row-top::before{content:\"\ue6f7\"}.jupyter-wrapper .bp3-icon-add-to-artifact::before{content:\"\ue67c\"}.jupyter-wrapper .bp3-icon-add-to-folder::before{content:\"\ue6d2\"}.jupyter-wrapper .bp3-icon-airplane::before{content:\"\ue74b\"}.jupyter-wrapper .bp3-icon-align-center::before{content:\"\ue603\"}.jupyter-wrapper .bp3-icon-align-justify::before{content:\"\ue605\"}.jupyter-wrapper .bp3-icon-align-left::before{content:\"\ue602\"}.jupyter-wrapper .bp3-icon-align-right::before{content:\"\ue604\"}.jupyter-wrapper .bp3-icon-alignment-bottom::before{content:\"\ue727\"}.jupyter-wrapper .bp3-icon-alignment-horizontal-center::before{content:\"\ue726\"}.jupyter-wrapper .bp3-icon-alignment-left::before{content:\"\ue722\"}.jupyter-wrapper .bp3-icon-alignment-right::before{content:\"\ue724\"}.jupyter-wrapper .bp3-icon-alignment-top::before{content:\"\ue725\"}.jupyter-wrapper .bp3-icon-alignment-vertical-center::before{content:\"\ue723\"}.jupyter-wrapper .bp3-icon-annotation::before{content:\"\ue6f0\"}.jupyter-wrapper .bp3-icon-application::before{content:\"\ue735\"}.jupyter-wrapper .bp3-icon-applications::before{content:\"\ue621\"}.jupyter-wrapper .bp3-icon-archive::before{content:\"\ue907\"}.jupyter-wrapper .bp3-icon-arrow-bottom-left::before{content:\"\u2199\"}.jupyter-wrapper .bp3-icon-arrow-bottom-right::before{content:\"\u2198\"}.jupyter-wrapper .bp3-icon-arrow-down::before{content:\"\u2193\"}.jupyter-wrapper .bp3-icon-arrow-left::before{content:\"\u2190\"}.jupyter-wrapper .bp3-icon-arrow-right::before{content:\"\u2192\"}.jupyter-wrapper .bp3-icon-arrow-top-left::before{content:\"\u2196\"}.jupyter-wrapper .bp3-icon-arrow-top-right::before{content:\"\u2197\"}.jupyter-wrapper .bp3-icon-arrow-up::before{content:\"\u2191\"}.jupyter-wrapper .bp3-icon-arrows-horizontal::before{content:\"\u2194\"}.jupyter-wrapper .bp3-icon-arrows-vertical::before{content:\"\u2195\"}.jupyter-wrapper .bp3-icon-asterisk::before{content:\"*\"}.jupyter-wrapper .bp3-icon-automatic-updates::before{content:\"\ue65f\"}.jupyter-wrapper .bp3-icon-badge::before{content:\"\ue6e3\"}.jupyter-wrapper .bp3-icon-ban-circle::before{content:\"\ue69d\"}.jupyter-wrapper .bp3-icon-bank-account::before{content:\"\ue76f\"}.jupyter-wrapper .bp3-icon-barcode::before{content:\"\ue676\"}.jupyter-wrapper .bp3-icon-blank::before{content:\"\ue900\"}.jupyter-wrapper .bp3-icon-blocked-person::before{content:\"\ue768\"}.jupyter-wrapper .bp3-icon-bold::before{content:\"\ue606\"}.jupyter-wrapper .bp3-icon-book::before{content:\"\ue6b8\"}.jupyter-wrapper .bp3-icon-bookmark::before{content:\"\ue61a\"}.jupyter-wrapper .bp3-icon-box::before{content:\"\ue6bf\"}.jupyter-wrapper .bp3-icon-briefcase::before{content:\"\ue674\"}.jupyter-wrapper .bp3-icon-bring-data::before{content:\"\ue90a\"}.jupyter-wrapper .bp3-icon-build::before{content:\"\ue72d\"}.jupyter-wrapper .bp3-icon-calculator::before{content:\"\ue70b\"}.jupyter-wrapper .bp3-icon-calendar::before{content:\"\ue62b\"}.jupyter-wrapper .bp3-icon-camera::before{content:\"\ue69e\"}.jupyter-wrapper .bp3-icon-caret-down::before{content:\"\u2304\"}.jupyter-wrapper .bp3-icon-caret-left::before{content:\"\u2329\"}.jupyter-wrapper .bp3-icon-caret-right::before{content:\"\u232a\"}.jupyter-wrapper .bp3-icon-caret-up::before{content:\"\u2303\"}.jupyter-wrapper .bp3-icon-cell-tower::before{content:\"\ue770\"}.jupyter-wrapper .bp3-icon-changes::before{content:\"\ue623\"}.jupyter-wrapper .bp3-icon-chart::before{content:\"\ue67e\"}.jupyter-wrapper .bp3-icon-chat::before{content:\"\ue689\"}.jupyter-wrapper .bp3-icon-chevron-backward::before{content:\"\ue6df\"}.jupyter-wrapper .bp3-icon-chevron-down::before{content:\"\ue697\"}.jupyter-wrapper .bp3-icon-chevron-forward::before{content:\"\ue6e0\"}.jupyter-wrapper .bp3-icon-chevron-left::before{content:\"\ue694\"}.jupyter-wrapper .bp3-icon-chevron-right::before{content:\"\ue695\"}.jupyter-wrapper .bp3-icon-chevron-up::before{content:\"\ue696\"}.jupyter-wrapper .bp3-icon-circle::before{content:\"\ue66a\"}.jupyter-wrapper .bp3-icon-circle-arrow-down::before{content:\"\ue68e\"}.jupyter-wrapper .bp3-icon-circle-arrow-left::before{content:\"\ue68c\"}.jupyter-wrapper .bp3-icon-circle-arrow-right::before{content:\"\ue68b\"}.jupyter-wrapper .bp3-icon-circle-arrow-up::before{content:\"\ue68d\"}.jupyter-wrapper .bp3-icon-citation::before{content:\"\ue61b\"}.jupyter-wrapper .bp3-icon-clean::before{content:\"\ue7c5\"}.jupyter-wrapper .bp3-icon-clipboard::before{content:\"\ue61d\"}.jupyter-wrapper .bp3-icon-cloud::before{content:\"\u2601\"}.jupyter-wrapper .bp3-icon-cloud-download::before{content:\"\ue690\"}.jupyter-wrapper .bp3-icon-cloud-upload::before{content:\"\ue691\"}.jupyter-wrapper .bp3-icon-code::before{content:\"\ue661\"}.jupyter-wrapper .bp3-icon-code-block::before{content:\"\ue6c5\"}.jupyter-wrapper .bp3-icon-cog::before{content:\"\ue645\"}.jupyter-wrapper .bp3-icon-collapse-all::before{content:\"\ue763\"}.jupyter-wrapper .bp3-icon-column-layout::before{content:\"\ue6da\"}.jupyter-wrapper .bp3-icon-comment::before{content:\"\ue68a\"}.jupyter-wrapper .bp3-icon-comparison::before{content:\"\ue637\"}.jupyter-wrapper .bp3-icon-compass::before{content:\"\ue79c\"}.jupyter-wrapper .bp3-icon-compressed::before{content:\"\ue6c0\"}.jupyter-wrapper .bp3-icon-confirm::before{content:\"\ue639\"}.jupyter-wrapper .bp3-icon-console::before{content:\"\ue79b\"}.jupyter-wrapper .bp3-icon-contrast::before{content:\"\ue6cb\"}.jupyter-wrapper .bp3-icon-control::before{content:\"\ue67f\"}.jupyter-wrapper .bp3-icon-credit-card::before{content:\"\ue649\"}.jupyter-wrapper .bp3-icon-cross::before{content:\"\u2717\"}.jupyter-wrapper .bp3-icon-crown::before{content:\"\ue7b4\"}.jupyter-wrapper .bp3-icon-cube::before{content:\"\ue7c8\"}.jupyter-wrapper .bp3-icon-cube-add::before{content:\"\ue7c9\"}.jupyter-wrapper .bp3-icon-cube-remove::before{content:\"\ue7d0\"}.jupyter-wrapper .bp3-icon-curved-range-chart::before{content:\"\ue71b\"}.jupyter-wrapper .bp3-icon-cut::before{content:\"\ue6ef\"}.jupyter-wrapper .bp3-icon-dashboard::before{content:\"\ue751\"}.jupyter-wrapper .bp3-icon-data-lineage::before{content:\"\ue908\"}.jupyter-wrapper .bp3-icon-database::before{content:\"\ue683\"}.jupyter-wrapper .bp3-icon-delete::before{content:\"\ue644\"}.jupyter-wrapper .bp3-icon-delta::before{content:\"\u0394\"}.jupyter-wrapper .bp3-icon-derive-column::before{content:\"\ue739\"}.jupyter-wrapper .bp3-icon-desktop::before{content:\"\ue6af\"}.jupyter-wrapper .bp3-icon-diagram-tree::before{content:\"\ue7b3\"}.jupyter-wrapper .bp3-icon-direction-left::before{content:\"\ue681\"}.jupyter-wrapper .bp3-icon-direction-right::before{content:\"\ue682\"}.jupyter-wrapper .bp3-icon-disable::before{content:\"\ue600\"}.jupyter-wrapper .bp3-icon-document::before{content:\"\ue630\"}.jupyter-wrapper .bp3-icon-document-open::before{content:\"\ue71e\"}.jupyter-wrapper .bp3-icon-document-share::before{content:\"\ue71f\"}.jupyter-wrapper .bp3-icon-dollar::before{content:\"$\"}.jupyter-wrapper .bp3-icon-dot::before{content:\"\u2022\"}.jupyter-wrapper .bp3-icon-double-caret-horizontal::before{content:\"\ue6c7\"}.jupyter-wrapper .bp3-icon-double-caret-vertical::before{content:\"\ue6c6\"}.jupyter-wrapper .bp3-icon-double-chevron-down::before{content:\"\ue703\"}.jupyter-wrapper .bp3-icon-double-chevron-left::before{content:\"\ue6ff\"}.jupyter-wrapper .bp3-icon-double-chevron-right::before{content:\"\ue701\"}.jupyter-wrapper .bp3-icon-double-chevron-up::before{content:\"\ue702\"}.jupyter-wrapper .bp3-icon-doughnut-chart::before{content:\"\ue6ce\"}.jupyter-wrapper .bp3-icon-download::before{content:\"\ue62f\"}.jupyter-wrapper .bp3-icon-drag-handle-horizontal::before{content:\"\ue716\"}.jupyter-wrapper .bp3-icon-drag-handle-vertical::before{content:\"\ue715\"}.jupyter-wrapper .bp3-icon-draw::before{content:\"\ue66b\"}.jupyter-wrapper .bp3-icon-drive-time::before{content:\"\ue615\"}.jupyter-wrapper .bp3-icon-duplicate::before{content:\"\ue69c\"}.jupyter-wrapper .bp3-icon-edit::before{content:\"\u270e\"}.jupyter-wrapper .bp3-icon-eject::before{content:\"\u23cf\"}.jupyter-wrapper .bp3-icon-endorsed::before{content:\"\ue75f\"}.jupyter-wrapper .bp3-icon-envelope::before{content:\"\u2709\"}.jupyter-wrapper .bp3-icon-equals::before{content:\"\ue7d9\"}.jupyter-wrapper .bp3-icon-eraser::before{content:\"\ue773\"}.jupyter-wrapper .bp3-icon-error::before{content:\"\ue648\"}.jupyter-wrapper .bp3-icon-euro::before{content:\"\u20ac\"}.jupyter-wrapper .bp3-icon-exchange::before{content:\"\ue636\"}.jupyter-wrapper .bp3-icon-exclude-row::before{content:\"\ue6ea\"}.jupyter-wrapper .bp3-icon-expand-all::before{content:\"\ue764\"}.jupyter-wrapper .bp3-icon-export::before{content:\"\ue633\"}.jupyter-wrapper .bp3-icon-eye-off::before{content:\"\ue6cc\"}.jupyter-wrapper .bp3-icon-eye-on::before{content:\"\ue75a\"}.jupyter-wrapper .bp3-icon-eye-open::before{content:\"\ue66f\"}.jupyter-wrapper .bp3-icon-fast-backward::before{content:\"\ue6a8\"}.jupyter-wrapper .bp3-icon-fast-forward::before{content:\"\ue6ac\"}.jupyter-wrapper .bp3-icon-feed::before{content:\"\ue656\"}.jupyter-wrapper .bp3-icon-feed-subscribed::before{content:\"\ue78f\"}.jupyter-wrapper .bp3-icon-film::before{content:\"\ue6a1\"}.jupyter-wrapper .bp3-icon-filter::before{content:\"\ue638\"}.jupyter-wrapper .bp3-icon-filter-keep::before{content:\"\ue78c\"}.jupyter-wrapper .bp3-icon-filter-list::before{content:\"\ue6ee\"}.jupyter-wrapper .bp3-icon-filter-open::before{content:\"\ue7d7\"}.jupyter-wrapper .bp3-icon-filter-remove::before{content:\"\ue78d\"}.jupyter-wrapper .bp3-icon-flag::before{content:\"\u2691\"}.jupyter-wrapper .bp3-icon-flame::before{content:\"\ue7a9\"}.jupyter-wrapper .bp3-icon-flash::before{content:\"\ue6b3\"}.jupyter-wrapper .bp3-icon-floppy-disk::before{content:\"\ue6b7\"}.jupyter-wrapper .bp3-icon-flow-branch::before{content:\"\ue7c1\"}.jupyter-wrapper .bp3-icon-flow-end::before{content:\"\ue7c4\"}.jupyter-wrapper .bp3-icon-flow-linear::before{content:\"\ue7c0\"}.jupyter-wrapper .bp3-icon-flow-review::before{content:\"\ue7c2\"}.jupyter-wrapper .bp3-icon-flow-review-branch::before{content:\"\ue7c3\"}.jupyter-wrapper .bp3-icon-flows::before{content:\"\ue659\"}.jupyter-wrapper .bp3-icon-folder-close::before{content:\"\ue652\"}.jupyter-wrapper .bp3-icon-folder-new::before{content:\"\ue7b0\"}.jupyter-wrapper .bp3-icon-folder-open::before{content:\"\ue651\"}.jupyter-wrapper .bp3-icon-folder-shared::before{content:\"\ue653\"}.jupyter-wrapper .bp3-icon-folder-shared-open::before{content:\"\ue670\"}.jupyter-wrapper .bp3-icon-follower::before{content:\"\ue760\"}.jupyter-wrapper .bp3-icon-following::before{content:\"\ue761\"}.jupyter-wrapper .bp3-icon-font::before{content:\"\ue6b4\"}.jupyter-wrapper .bp3-icon-fork::before{content:\"\ue63a\"}.jupyter-wrapper .bp3-icon-form::before{content:\"\ue795\"}.jupyter-wrapper .bp3-icon-full-circle::before{content:\"\ue685\"}.jupyter-wrapper .bp3-icon-full-stacked-chart::before{content:\"\ue75e\"}.jupyter-wrapper .bp3-icon-fullscreen::before{content:\"\ue699\"}.jupyter-wrapper .bp3-icon-function::before{content:\"\ue6e5\"}.jupyter-wrapper .bp3-icon-gantt-chart::before{content:\"\ue6f4\"}.jupyter-wrapper .bp3-icon-geolocation::before{content:\"\ue640\"}.jupyter-wrapper .bp3-icon-geosearch::before{content:\"\ue613\"}.jupyter-wrapper .bp3-icon-git-branch::before{content:\"\ue72a\"}.jupyter-wrapper .bp3-icon-git-commit::before{content:\"\ue72b\"}.jupyter-wrapper .bp3-icon-git-merge::before{content:\"\ue729\"}.jupyter-wrapper .bp3-icon-git-new-branch::before{content:\"\ue749\"}.jupyter-wrapper .bp3-icon-git-pull::before{content:\"\ue728\"}.jupyter-wrapper .bp3-icon-git-push::before{content:\"\ue72c\"}.jupyter-wrapper .bp3-icon-git-repo::before{content:\"\ue748\"}.jupyter-wrapper .bp3-icon-glass::before{content:\"\ue6b1\"}.jupyter-wrapper .bp3-icon-globe::before{content:\"\ue666\"}.jupyter-wrapper .bp3-icon-globe-network::before{content:\"\ue7b5\"}.jupyter-wrapper .bp3-icon-graph::before{content:\"\ue673\"}.jupyter-wrapper .bp3-icon-graph-remove::before{content:\"\ue609\"}.jupyter-wrapper .bp3-icon-greater-than::before{content:\"\ue7e1\"}.jupyter-wrapper .bp3-icon-greater-than-or-equal-to::before{content:\"\ue7e2\"}.jupyter-wrapper .bp3-icon-grid::before{content:\"\ue6d0\"}.jupyter-wrapper .bp3-icon-grid-view::before{content:\"\ue6e4\"}.jupyter-wrapper .bp3-icon-group-objects::before{content:\"\ue60a\"}.jupyter-wrapper .bp3-icon-grouped-bar-chart::before{content:\"\ue75d\"}.jupyter-wrapper .bp3-icon-hand::before{content:\"\ue6de\"}.jupyter-wrapper .bp3-icon-hand-down::before{content:\"\ue6bb\"}.jupyter-wrapper .bp3-icon-hand-left::before{content:\"\ue6bc\"}.jupyter-wrapper .bp3-icon-hand-right::before{content:\"\ue6b9\"}.jupyter-wrapper .bp3-icon-hand-up::before{content:\"\ue6ba\"}.jupyter-wrapper .bp3-icon-header::before{content:\"\ue6b5\"}.jupyter-wrapper .bp3-icon-header-one::before{content:\"\ue793\"}.jupyter-wrapper .bp3-icon-header-two::before{content:\"\ue794\"}.jupyter-wrapper .bp3-icon-headset::before{content:\"\ue6dc\"}.jupyter-wrapper .bp3-icon-heart::before{content:\"\u2665\"}.jupyter-wrapper .bp3-icon-heart-broken::before{content:\"\ue7a2\"}.jupyter-wrapper .bp3-icon-heat-grid::before{content:\"\ue6f3\"}.jupyter-wrapper .bp3-icon-heatmap::before{content:\"\ue614\"}.jupyter-wrapper .bp3-icon-help::before{content:\"?\"}.jupyter-wrapper .bp3-icon-helper-management::before{content:\"\ue66d\"}.jupyter-wrapper .bp3-icon-highlight::before{content:\"\ue6ed\"}.jupyter-wrapper .bp3-icon-history::before{content:\"\ue64a\"}.jupyter-wrapper .bp3-icon-home::before{content:\"\u2302\"}.jupyter-wrapper .bp3-icon-horizontal-bar-chart::before{content:\"\ue70c\"}.jupyter-wrapper .bp3-icon-horizontal-bar-chart-asc::before{content:\"\ue75c\"}.jupyter-wrapper .bp3-icon-horizontal-bar-chart-desc::before{content:\"\ue71d\"}.jupyter-wrapper .bp3-icon-horizontal-distribution::before{content:\"\ue720\"}.jupyter-wrapper .bp3-icon-id-number::before{content:\"\ue771\"}.jupyter-wrapper .bp3-icon-image-rotate-left::before{content:\"\ue73a\"}.jupyter-wrapper .bp3-icon-image-rotate-right::before{content:\"\ue73b\"}.jupyter-wrapper .bp3-icon-import::before{content:\"\ue632\"}.jupyter-wrapper .bp3-icon-inbox::before{content:\"\ue629\"}.jupyter-wrapper .bp3-icon-inbox-filtered::before{content:\"\ue7d1\"}.jupyter-wrapper .bp3-icon-inbox-geo::before{content:\"\ue7d2\"}.jupyter-wrapper .bp3-icon-inbox-search::before{content:\"\ue7d3\"}.jupyter-wrapper .bp3-icon-inbox-update::before{content:\"\ue7d4\"}.jupyter-wrapper .bp3-icon-info-sign::before{content:\"\u2139\"}.jupyter-wrapper .bp3-icon-inheritance::before{content:\"\ue7d5\"}.jupyter-wrapper .bp3-icon-inner-join::before{content:\"\ue7a3\"}.jupyter-wrapper .bp3-icon-insert::before{content:\"\ue66c\"}.jupyter-wrapper .bp3-icon-intersection::before{content:\"\ue765\"}.jupyter-wrapper .bp3-icon-ip-address::before{content:\"\ue772\"}.jupyter-wrapper .bp3-icon-issue::before{content:\"\ue774\"}.jupyter-wrapper .bp3-icon-issue-closed::before{content:\"\ue776\"}.jupyter-wrapper .bp3-icon-issue-new::before{content:\"\ue775\"}.jupyter-wrapper .bp3-icon-italic::before{content:\"\ue607\"}.jupyter-wrapper .bp3-icon-join-table::before{content:\"\ue738\"}.jupyter-wrapper .bp3-icon-key::before{content:\"\ue78e\"}.jupyter-wrapper .bp3-icon-key-backspace::before{content:\"\ue707\"}.jupyter-wrapper .bp3-icon-key-command::before{content:\"\ue705\"}.jupyter-wrapper .bp3-icon-key-control::before{content:\"\ue704\"}.jupyter-wrapper .bp3-icon-key-delete::before{content:\"\ue708\"}.jupyter-wrapper .bp3-icon-key-enter::before{content:\"\ue70a\"}.jupyter-wrapper .bp3-icon-key-escape::before{content:\"\ue709\"}.jupyter-wrapper .bp3-icon-key-option::before{content:\"\ue742\"}.jupyter-wrapper .bp3-icon-key-shift::before{content:\"\ue706\"}.jupyter-wrapper .bp3-icon-key-tab::before{content:\"\ue757\"}.jupyter-wrapper .bp3-icon-known-vehicle::before{content:\"\ue73c\"}.jupyter-wrapper .bp3-icon-label::before{content:\"\ue665\"}.jupyter-wrapper .bp3-icon-layer::before{content:\"\ue6cf\"}.jupyter-wrapper .bp3-icon-layers::before{content:\"\ue618\"}.jupyter-wrapper .bp3-icon-layout::before{content:\"\ue60c\"}.jupyter-wrapper .bp3-icon-layout-auto::before{content:\"\ue60d\"}.jupyter-wrapper .bp3-icon-layout-balloon::before{content:\"\ue6d3\"}.jupyter-wrapper .bp3-icon-layout-circle::before{content:\"\ue60e\"}.jupyter-wrapper .bp3-icon-layout-grid::before{content:\"\ue610\"}.jupyter-wrapper .bp3-icon-layout-group-by::before{content:\"\ue611\"}.jupyter-wrapper .bp3-icon-layout-hierarchy::before{content:\"\ue60f\"}.jupyter-wrapper .bp3-icon-layout-linear::before{content:\"\ue6c3\"}.jupyter-wrapper .bp3-icon-layout-skew-grid::before{content:\"\ue612\"}.jupyter-wrapper .bp3-icon-layout-sorted-clusters::before{content:\"\ue6d4\"}.jupyter-wrapper .bp3-icon-learning::before{content:\"\ue904\"}.jupyter-wrapper .bp3-icon-left-join::before{content:\"\ue7a4\"}.jupyter-wrapper .bp3-icon-less-than::before{content:\"\ue7e3\"}.jupyter-wrapper .bp3-icon-less-than-or-equal-to::before{content:\"\ue7e4\"}.jupyter-wrapper .bp3-icon-lifesaver::before{content:\"\ue7c7\"}.jupyter-wrapper .bp3-icon-lightbulb::before{content:\"\ue6b0\"}.jupyter-wrapper .bp3-icon-link::before{content:\"\ue62d\"}.jupyter-wrapper .bp3-icon-list::before{content:\"\u2630\"}.jupyter-wrapper .bp3-icon-list-columns::before{content:\"\ue7b9\"}.jupyter-wrapper .bp3-icon-list-detail-view::before{content:\"\ue743\"}.jupyter-wrapper .bp3-icon-locate::before{content:\"\ue619\"}.jupyter-wrapper .bp3-icon-lock::before{content:\"\ue625\"}.jupyter-wrapper .bp3-icon-log-in::before{content:\"\ue69a\"}.jupyter-wrapper .bp3-icon-log-out::before{content:\"\ue64c\"}.jupyter-wrapper .bp3-icon-manual::before{content:\"\ue6f6\"}.jupyter-wrapper .bp3-icon-manually-entered-data::before{content:\"\ue74a\"}.jupyter-wrapper .bp3-icon-map::before{content:\"\ue662\"}.jupyter-wrapper .bp3-icon-map-create::before{content:\"\ue741\"}.jupyter-wrapper .bp3-icon-map-marker::before{content:\"\ue67d\"}.jupyter-wrapper .bp3-icon-maximize::before{content:\"\ue635\"}.jupyter-wrapper .bp3-icon-media::before{content:\"\ue62c\"}.jupyter-wrapper .bp3-icon-menu::before{content:\"\ue762\"}.jupyter-wrapper .bp3-icon-menu-closed::before{content:\"\ue655\"}.jupyter-wrapper .bp3-icon-menu-open::before{content:\"\ue654\"}.jupyter-wrapper .bp3-icon-merge-columns::before{content:\"\ue74f\"}.jupyter-wrapper .bp3-icon-merge-links::before{content:\"\ue60b\"}.jupyter-wrapper .bp3-icon-minimize::before{content:\"\ue634\"}.jupyter-wrapper .bp3-icon-minus::before{content:\"\u2212\"}.jupyter-wrapper .bp3-icon-mobile-phone::before{content:\"\ue717\"}.jupyter-wrapper .bp3-icon-mobile-video::before{content:\"\ue69f\"}.jupyter-wrapper .bp3-icon-moon::before{content:\"\ue754\"}.jupyter-wrapper .bp3-icon-more::before{content:\"\ue62a\"}.jupyter-wrapper .bp3-icon-mountain::before{content:\"\ue7b1\"}.jupyter-wrapper .bp3-icon-move::before{content:\"\ue693\"}.jupyter-wrapper .bp3-icon-mugshot::before{content:\"\ue6db\"}.jupyter-wrapper .bp3-icon-multi-select::before{content:\"\ue680\"}.jupyter-wrapper .bp3-icon-music::before{content:\"\ue6a6\"}.jupyter-wrapper .bp3-icon-new-drawing::before{content:\"\ue905\"}.jupyter-wrapper .bp3-icon-new-grid-item::before{content:\"\ue747\"}.jupyter-wrapper .bp3-icon-new-layer::before{content:\"\ue902\"}.jupyter-wrapper .bp3-icon-new-layers::before{content:\"\ue903\"}.jupyter-wrapper .bp3-icon-new-link::before{content:\"\ue65c\"}.jupyter-wrapper .bp3-icon-new-object::before{content:\"\ue65d\"}.jupyter-wrapper .bp3-icon-new-person::before{content:\"\ue6e9\"}.jupyter-wrapper .bp3-icon-new-prescription::before{content:\"\ue78b\"}.jupyter-wrapper .bp3-icon-new-text-box::before{content:\"\ue65b\"}.jupyter-wrapper .bp3-icon-ninja::before{content:\"\ue675\"}.jupyter-wrapper .bp3-icon-not-equal-to::before{content:\"\ue7e0\"}.jupyter-wrapper .bp3-icon-notifications::before{content:\"\ue624\"}.jupyter-wrapper .bp3-icon-notifications-updated::before{content:\"\ue7b8\"}.jupyter-wrapper .bp3-icon-numbered-list::before{content:\"\ue746\"}.jupyter-wrapper .bp3-icon-numerical::before{content:\"\ue756\"}.jupyter-wrapper .bp3-icon-office::before{content:\"\ue69b\"}.jupyter-wrapper .bp3-icon-offline::before{content:\"\ue67a\"}.jupyter-wrapper .bp3-icon-oil-field::before{content:\"\ue73f\"}.jupyter-wrapper .bp3-icon-one-column::before{content:\"\ue658\"}.jupyter-wrapper .bp3-icon-outdated::before{content:\"\ue7a8\"}.jupyter-wrapper .bp3-icon-page-layout::before{content:\"\ue660\"}.jupyter-wrapper .bp3-icon-panel-stats::before{content:\"\ue777\"}.jupyter-wrapper .bp3-icon-panel-table::before{content:\"\ue778\"}.jupyter-wrapper .bp3-icon-paperclip::before{content:\"\ue664\"}.jupyter-wrapper .bp3-icon-paragraph::before{content:\"\ue76c\"}.jupyter-wrapper .bp3-icon-path::before{content:\"\ue753\"}.jupyter-wrapper .bp3-icon-path-search::before{content:\"\ue65e\"}.jupyter-wrapper .bp3-icon-pause::before{content:\"\ue6a9\"}.jupyter-wrapper .bp3-icon-people::before{content:\"\ue63d\"}.jupyter-wrapper .bp3-icon-percentage::before{content:\"\ue76a\"}.jupyter-wrapper .bp3-icon-person::before{content:\"\ue63c\"}.jupyter-wrapper .bp3-icon-phone::before{content:\"\u260e\"}.jupyter-wrapper .bp3-icon-pie-chart::before{content:\"\ue684\"}.jupyter-wrapper .bp3-icon-pin::before{content:\"\ue646\"}.jupyter-wrapper .bp3-icon-pivot::before{content:\"\ue6f1\"}.jupyter-wrapper .bp3-icon-pivot-table::before{content:\"\ue6eb\"}.jupyter-wrapper .bp3-icon-play::before{content:\"\ue6ab\"}.jupyter-wrapper .bp3-icon-plus::before{content:\"+\"}.jupyter-wrapper .bp3-icon-polygon-filter::before{content:\"\ue6d1\"}.jupyter-wrapper .bp3-icon-power::before{content:\"\ue6d9\"}.jupyter-wrapper .bp3-icon-predictive-analysis::before{content:\"\ue617\"}.jupyter-wrapper .bp3-icon-prescription::before{content:\"\ue78a\"}.jupyter-wrapper .bp3-icon-presentation::before{content:\"\ue687\"}.jupyter-wrapper .bp3-icon-print::before{content:\"\u2399\"}.jupyter-wrapper .bp3-icon-projects::before{content:\"\ue622\"}.jupyter-wrapper .bp3-icon-properties::before{content:\"\ue631\"}.jupyter-wrapper .bp3-icon-property::before{content:\"\ue65a\"}.jupyter-wrapper .bp3-icon-publish-function::before{content:\"\ue752\"}.jupyter-wrapper .bp3-icon-pulse::before{content:\"\ue6e8\"}.jupyter-wrapper .bp3-icon-random::before{content:\"\ue698\"}.jupyter-wrapper .bp3-icon-record::before{content:\"\ue6ae\"}.jupyter-wrapper .bp3-icon-redo::before{content:\"\ue6c4\"}.jupyter-wrapper .bp3-icon-refresh::before{content:\"\ue643\"}.jupyter-wrapper .bp3-icon-regression-chart::before{content:\"\ue758\"}.jupyter-wrapper .bp3-icon-remove::before{content:\"\ue63f\"}.jupyter-wrapper .bp3-icon-remove-column::before{content:\"\ue755\"}.jupyter-wrapper .bp3-icon-remove-column-left::before{content:\"\ue6fd\"}.jupyter-wrapper .bp3-icon-remove-column-right::before{content:\"\ue6fe\"}.jupyter-wrapper .bp3-icon-remove-row-bottom::before{content:\"\ue6fc\"}.jupyter-wrapper .bp3-icon-remove-row-top::before{content:\"\ue6fb\"}.jupyter-wrapper .bp3-icon-repeat::before{content:\"\ue692\"}.jupyter-wrapper .bp3-icon-reset::before{content:\"\ue7d6\"}.jupyter-wrapper .bp3-icon-resolve::before{content:\"\ue672\"}.jupyter-wrapper .bp3-icon-rig::before{content:\"\ue740\"}.jupyter-wrapper .bp3-icon-right-join::before{content:\"\ue7a5\"}.jupyter-wrapper .bp3-icon-ring::before{content:\"\ue6f2\"}.jupyter-wrapper .bp3-icon-rotate-document::before{content:\"\ue6e1\"}.jupyter-wrapper .bp3-icon-rotate-page::before{content:\"\ue6e2\"}.jupyter-wrapper .bp3-icon-satellite::before{content:\"\ue76b\"}.jupyter-wrapper .bp3-icon-saved::before{content:\"\ue6b6\"}.jupyter-wrapper .bp3-icon-scatter-plot::before{content:\"\ue73e\"}.jupyter-wrapper .bp3-icon-search::before{content:\"\ue64b\"}.jupyter-wrapper .bp3-icon-search-around::before{content:\"\ue608\"}.jupyter-wrapper .bp3-icon-search-template::before{content:\"\ue628\"}.jupyter-wrapper .bp3-icon-search-text::before{content:\"\ue663\"}.jupyter-wrapper .bp3-icon-segmented-control::before{content:\"\ue6ec\"}.jupyter-wrapper .bp3-icon-select::before{content:\"\ue616\"}.jupyter-wrapper .bp3-icon-selection::before{content:\"\u29bf\"}.jupyter-wrapper .bp3-icon-send-to::before{content:\"\ue66e\"}.jupyter-wrapper .bp3-icon-send-to-graph::before{content:\"\ue736\"}.jupyter-wrapper .bp3-icon-send-to-map::before{content:\"\ue737\"}.jupyter-wrapper .bp3-icon-series-add::before{content:\"\ue796\"}.jupyter-wrapper .bp3-icon-series-configuration::before{content:\"\ue79a\"}.jupyter-wrapper .bp3-icon-series-derived::before{content:\"\ue799\"}.jupyter-wrapper .bp3-icon-series-filtered::before{content:\"\ue798\"}.jupyter-wrapper .bp3-icon-series-search::before{content:\"\ue797\"}.jupyter-wrapper .bp3-icon-settings::before{content:\"\ue6a2\"}.jupyter-wrapper .bp3-icon-share::before{content:\"\ue62e\"}.jupyter-wrapper .bp3-icon-shield::before{content:\"\ue7b2\"}.jupyter-wrapper .bp3-icon-shop::before{content:\"\ue6c2\"}.jupyter-wrapper .bp3-icon-shopping-cart::before{content:\"\ue6c1\"}.jupyter-wrapper .bp3-icon-signal-search::before{content:\"\ue909\"}.jupyter-wrapper .bp3-icon-sim-card::before{content:\"\ue718\"}.jupyter-wrapper .bp3-icon-slash::before{content:\"\ue769\"}.jupyter-wrapper .bp3-icon-small-cross::before{content:\"\ue6d7\"}.jupyter-wrapper .bp3-icon-small-minus::before{content:\"\ue70e\"}.jupyter-wrapper .bp3-icon-small-plus::before{content:\"\ue70d\"}.jupyter-wrapper .bp3-icon-small-tick::before{content:\"\ue6d8\"}.jupyter-wrapper .bp3-icon-snowflake::before{content:\"\ue7b6\"}.jupyter-wrapper .bp3-icon-social-media::before{content:\"\ue671\"}.jupyter-wrapper .bp3-icon-sort::before{content:\"\ue64f\"}.jupyter-wrapper .bp3-icon-sort-alphabetical::before{content:\"\ue64d\"}.jupyter-wrapper .bp3-icon-sort-alphabetical-desc::before{content:\"\ue6c8\"}.jupyter-wrapper .bp3-icon-sort-asc::before{content:\"\ue6d5\"}.jupyter-wrapper .bp3-icon-sort-desc::before{content:\"\ue6d6\"}.jupyter-wrapper .bp3-icon-sort-numerical::before{content:\"\ue64e\"}.jupyter-wrapper .bp3-icon-sort-numerical-desc::before{content:\"\ue6c9\"}.jupyter-wrapper .bp3-icon-split-columns::before{content:\"\ue750\"}.jupyter-wrapper .bp3-icon-square::before{content:\"\ue686\"}.jupyter-wrapper .bp3-icon-stacked-chart::before{content:\"\ue6e7\"}.jupyter-wrapper .bp3-icon-star::before{content:\"\u2605\"}.jupyter-wrapper .bp3-icon-star-empty::before{content:\"\u2606\"}.jupyter-wrapper .bp3-icon-step-backward::before{content:\"\ue6a7\"}.jupyter-wrapper .bp3-icon-step-chart::before{content:\"\ue70f\"}.jupyter-wrapper .bp3-icon-step-forward::before{content:\"\ue6ad\"}.jupyter-wrapper .bp3-icon-stop::before{content:\"\ue6aa\"}.jupyter-wrapper .bp3-icon-stopwatch::before{content:\"\ue901\"}.jupyter-wrapper .bp3-icon-strikethrough::before{content:\"\ue7a6\"}.jupyter-wrapper .bp3-icon-style::before{content:\"\ue601\"}.jupyter-wrapper .bp3-icon-swap-horizontal::before{content:\"\ue745\"}.jupyter-wrapper .bp3-icon-swap-vertical::before{content:\"\ue744\"}.jupyter-wrapper .bp3-icon-symbol-circle::before{content:\"\ue72e\"}.jupyter-wrapper .bp3-icon-symbol-cross::before{content:\"\ue731\"}.jupyter-wrapper .bp3-icon-symbol-diamond::before{content:\"\ue730\"}.jupyter-wrapper .bp3-icon-symbol-square::before{content:\"\ue72f\"}.jupyter-wrapper .bp3-icon-symbol-triangle-down::before{content:\"\ue733\"}.jupyter-wrapper .bp3-icon-symbol-triangle-up::before{content:\"\ue732\"}.jupyter-wrapper .bp3-icon-tag::before{content:\"\ue61c\"}.jupyter-wrapper .bp3-icon-take-action::before{content:\"\ue6ca\"}.jupyter-wrapper .bp3-icon-taxi::before{content:\"\ue79e\"}.jupyter-wrapper .bp3-icon-text-highlight::before{content:\"\ue6dd\"}.jupyter-wrapper .bp3-icon-th::before{content:\"\ue667\"}.jupyter-wrapper .bp3-icon-th-derived::before{content:\"\ue669\"}.jupyter-wrapper .bp3-icon-th-disconnect::before{content:\"\ue7d8\"}.jupyter-wrapper .bp3-icon-th-filtered::before{content:\"\ue7c6\"}.jupyter-wrapper .bp3-icon-th-list::before{content:\"\ue668\"}.jupyter-wrapper .bp3-icon-thumbs-down::before{content:\"\ue6be\"}.jupyter-wrapper .bp3-icon-thumbs-up::before{content:\"\ue6bd\"}.jupyter-wrapper .bp3-icon-tick::before{content:\"\u2713\"}.jupyter-wrapper .bp3-icon-tick-circle::before{content:\"\ue779\"}.jupyter-wrapper .bp3-icon-time::before{content:\"\u23f2\"}.jupyter-wrapper .bp3-icon-timeline-area-chart::before{content:\"\ue6cd\"}.jupyter-wrapper .bp3-icon-timeline-bar-chart::before{content:\"\ue620\"}.jupyter-wrapper .bp3-icon-timeline-events::before{content:\"\ue61e\"}.jupyter-wrapper .bp3-icon-timeline-line-chart::before{content:\"\ue61f\"}.jupyter-wrapper .bp3-icon-tint::before{content:\"\ue6b2\"}.jupyter-wrapper .bp3-icon-torch::before{content:\"\ue677\"}.jupyter-wrapper .bp3-icon-tractor::before{content:\"\ue90c\"}.jupyter-wrapper .bp3-icon-train::before{content:\"\ue79f\"}.jupyter-wrapper .bp3-icon-translate::before{content:\"\ue759\"}.jupyter-wrapper .bp3-icon-trash::before{content:\"\ue63b\"}.jupyter-wrapper .bp3-icon-tree::before{content:\"\ue7b7\"}.jupyter-wrapper .bp3-icon-trending-down::before{content:\"\ue71a\"}.jupyter-wrapper .bp3-icon-trending-up::before{content:\"\ue719\"}.jupyter-wrapper .bp3-icon-truck::before{content:\"\ue90b\"}.jupyter-wrapper .bp3-icon-two-columns::before{content:\"\ue657\"}.jupyter-wrapper .bp3-icon-unarchive::before{content:\"\ue906\"}.jupyter-wrapper .bp3-icon-underline::before{content:\"\u2381\"}.jupyter-wrapper .bp3-icon-undo::before{content:\"\u238c\"}.jupyter-wrapper .bp3-icon-ungroup-objects::before{content:\"\ue688\"}.jupyter-wrapper .bp3-icon-unknown-vehicle::before{content:\"\ue73d\"}.jupyter-wrapper .bp3-icon-unlock::before{content:\"\ue626\"}.jupyter-wrapper .bp3-icon-unpin::before{content:\"\ue650\"}.jupyter-wrapper .bp3-icon-unresolve::before{content:\"\ue679\"}.jupyter-wrapper .bp3-icon-updated::before{content:\"\ue7a7\"}.jupyter-wrapper .bp3-icon-upload::before{content:\"\ue68f\"}.jupyter-wrapper .bp3-icon-user::before{content:\"\ue627\"}.jupyter-wrapper .bp3-icon-variable::before{content:\"\ue6f5\"}.jupyter-wrapper .bp3-icon-vertical-bar-chart-asc::before{content:\"\ue75b\"}.jupyter-wrapper .bp3-icon-vertical-bar-chart-desc::before{content:\"\ue71c\"}.jupyter-wrapper .bp3-icon-vertical-distribution::before{content:\"\ue721\"}.jupyter-wrapper .bp3-icon-video::before{content:\"\ue6a0\"}.jupyter-wrapper .bp3-icon-volume-down::before{content:\"\ue6a4\"}.jupyter-wrapper .bp3-icon-volume-off::before{content:\"\ue6a3\"}.jupyter-wrapper .bp3-icon-volume-up::before{content:\"\ue6a5\"}.jupyter-wrapper .bp3-icon-walk::before{content:\"\ue79d\"}.jupyter-wrapper .bp3-icon-warning-sign::before{content:\"\ue647\"}.jupyter-wrapper .bp3-icon-waterfall-chart::before{content:\"\ue6e6\"}.jupyter-wrapper .bp3-icon-widget::before{content:\"\ue678\"}.jupyter-wrapper .bp3-icon-widget-button::before{content:\"\ue790\"}.jupyter-wrapper .bp3-icon-widget-footer::before{content:\"\ue792\"}.jupyter-wrapper .bp3-icon-widget-header::before{content:\"\ue791\"}.jupyter-wrapper .bp3-icon-wrench::before{content:\"\ue734\"}.jupyter-wrapper .bp3-icon-zoom-in::before{content:\"\ue641\"}.jupyter-wrapper .bp3-icon-zoom-out::before{content:\"\ue642\"}.jupyter-wrapper .bp3-icon-zoom-to-fit::before{content:\"\ue67b\"}.jupyter-wrapper .bp3-submenu>.bp3-popover-wrapper{display:block}.jupyter-wrapper .bp3-submenu .bp3-popover-target{display:block}.jupyter-wrapper .bp3-submenu.bp3-popover{-webkit-box-shadow:none;box-shadow:none;padding:0 5px}.jupyter-wrapper .bp3-submenu.bp3-popover>.bp3-popover-content{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-dark .bp3-submenu.bp3-popover,.jupyter-wrapper .bp3-submenu.bp3-popover.bp3-dark{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-dark .bp3-submenu.bp3-popover>.bp3-popover-content,.jupyter-wrapper .bp3-submenu.bp3-popover.bp3-dark>.bp3-popover-content{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-menu{margin:0;border-radius:3px;background:#fff;min-width:180px;padding:5px;list-style:none;text-align:left;color:#182026}.jupyter-wrapper .bp3-menu-divider{display:block;margin:5px;border-top:1px solid rgba(16,22,26,.15)}.jupyter-wrapper .bp3-dark .bp3-menu-divider{border-top-color:rgba(255,255,255,.15)}.jupyter-wrapper .bp3-menu-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;border-radius:2px;padding:5px 7px;text-decoration:none;line-height:20px;color:inherit;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-menu-item>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-menu-item>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-menu-item::before,.jupyter-wrapper .bp3-menu-item>*{margin-right:7px}.jupyter-wrapper .bp3-menu-item:empty::before,.jupyter-wrapper .bp3-menu-item>:last-child{margin-right:0}.jupyter-wrapper .bp3-menu-item>.bp3-fill{word-break:break-word}.jupyter-wrapper .bp3-menu-item:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-menu-item{background-color:rgba(167,182,194,.3);cursor:pointer;text-decoration:none}.jupyter-wrapper .bp3-menu-item.bp3-disabled{background-color:inherit;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-dark .bp3-menu-item{color:inherit}.jupyter-wrapper .bp3-dark .bp3-menu-item:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-menu-item{background-color:rgba(138,155,168,.15);color:inherit}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-disabled{background-color:inherit;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-menu-item.bp3-intent-primary{color:#106ba3}.jupyter-wrapper .bp3-menu-item.bp3-intent-primary .bp3-icon{color:inherit}.jupyter-wrapper .bp3-menu-item.bp3-intent-primary::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary .bp3-menu-item-label{color:#106ba3}.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary.bp3-active{background-color:#137cbd}.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:active{background-color:#106ba3}.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:hover::before,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:hover::after,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:active,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary:active .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary.bp3-active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary.bp3-active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-primary.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-menu-item.bp3-intent-success{color:#0d8050}.jupyter-wrapper .bp3-menu-item.bp3-intent-success .bp3-icon{color:inherit}.jupyter-wrapper .bp3-menu-item.bp3-intent-success::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-success::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-success .bp3-menu-item-label{color:#0d8050}.jupyter-wrapper .bp3-menu-item.bp3-intent-success:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-success.bp3-active{background-color:#0f9960}.jupyter-wrapper .bp3-menu-item.bp3-intent-success:active{background-color:#0d8050}.jupyter-wrapper .bp3-menu-item.bp3-intent-success:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:hover::before,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:hover::after,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:active,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-success:active .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-menu-item.bp3-intent-success.bp3-active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-success.bp3-active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-success.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-menu-item.bp3-intent-warning{color:#bf7326}.jupyter-wrapper .bp3-menu-item.bp3-intent-warning .bp3-icon{color:inherit}.jupyter-wrapper .bp3-menu-item.bp3-intent-warning::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning .bp3-menu-item-label{color:#bf7326}.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning.bp3-active{background-color:#d9822b}.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:active{background-color:#bf7326}.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:hover::before,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:hover::after,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:active,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning:active .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning.bp3-active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning.bp3-active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-warning.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-menu-item.bp3-intent-danger{color:#c23030}.jupyter-wrapper .bp3-menu-item.bp3-intent-danger .bp3-icon{color:inherit}.jupyter-wrapper .bp3-menu-item.bp3-intent-danger::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger .bp3-menu-item-label{color:#c23030}.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger.bp3-active{background-color:#db3737}.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:active{background-color:#c23030}.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:hover::before,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:hover::after,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:active,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger:active .bp3-menu-item-label,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger.bp3-active::before,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger.bp3-active::after,.jupyter-wrapper .bp3-menu-item.bp3-intent-danger.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-menu-item::before{line-height:1;font-family:\"Icons16\",sans-serif;font-size:16px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-right:7px}.jupyter-wrapper .bp3-menu-item::before,.jupyter-wrapper .bp3-menu-item>.bp3-icon{margin-top:2px;color:#5c7080}.jupyter-wrapper .bp3-menu-item .bp3-menu-item-label{color:#5c7080}.jupyter-wrapper .bp3-menu-item:hover,.jupyter-wrapper .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-menu-item{color:inherit}.jupyter-wrapper .bp3-menu-item.bp3-active,.jupyter-wrapper .bp3-menu-item:active{background-color:rgba(115,134,148,.3)}.jupyter-wrapper .bp3-menu-item.bp3-disabled{outline:none !important;background-color:inherit !important;cursor:not-allowed !important;color:rgba(92,112,128,.6) !important}.jupyter-wrapper .bp3-menu-item.bp3-disabled::before,.jupyter-wrapper .bp3-menu-item.bp3-disabled>.bp3-icon,.jupyter-wrapper .bp3-menu-item.bp3-disabled .bp3-menu-item-label{color:rgba(92,112,128,.6) !important}.jupyter-wrapper .bp3-large .bp3-menu-item{padding:9px 7px;line-height:22px;font-size:16px}.jupyter-wrapper .bp3-large .bp3-menu-item .bp3-icon{margin-top:3px}.jupyter-wrapper .bp3-large .bp3-menu-item::before{line-height:1;font-family:\"Icons20\",sans-serif;font-size:20px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-top:1px;margin-right:10px}.jupyter-wrapper button.bp3-menu-item{border:none;background:none;width:100%;text-align:left}.jupyter-wrapper .bp3-menu-header{display:block;margin:5px;border-top:1px solid rgba(16,22,26,.15);cursor:default;padding-left:2px}.jupyter-wrapper .bp3-dark .bp3-menu-header{border-top-color:rgba(255,255,255,.15)}.jupyter-wrapper .bp3-menu-header:first-of-type{border-top:none}.jupyter-wrapper .bp3-menu-header>h6{color:#182026;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;margin:0;padding:10px 7px 0 1px;line-height:17px}.jupyter-wrapper .bp3-dark .bp3-menu-header>h6{color:#f5f8fa}.jupyter-wrapper .bp3-menu-header:first-of-type>h6{padding-top:0}.jupyter-wrapper .bp3-large .bp3-menu-header>h6{padding-top:15px;padding-bottom:5px;font-size:18px}.jupyter-wrapper .bp3-large .bp3-menu-header:first-of-type>h6{padding-top:0}.jupyter-wrapper .bp3-dark .bp3-menu{background:#30404d;color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary .bp3-icon{color:inherit}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary .bp3-menu-item-label{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active{background-color:#137cbd}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:active{background-color:#106ba3}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:hover::before,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item::before,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:hover::after,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item::after,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-primary.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary:active .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success .bp3-icon{color:inherit}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success .bp3-menu-item-label{color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active{background-color:#0f9960}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:active{background-color:#0d8050}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:hover::before,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item::before,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:hover::after,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item::after,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-success.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success:active .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning .bp3-icon{color:inherit}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning .bp3-menu-item-label{color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active{background-color:#d9822b}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:active{background-color:#bf7326}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:hover::before,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item::before,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:hover::after,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item::after,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-warning.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning:active .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger .bp3-icon{color:inherit}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger .bp3-menu-item-label{color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active{background-color:#db3737}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:active{background-color:#c23030}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:hover,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:hover::before,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item::before,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:hover::after,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item::after,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:hover .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open>.bp3-intent-danger.bp3-menu-item .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger:active .bp3-menu-item-label,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active::after,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active .bp3-menu-item-label{color:#fff}.jupyter-wrapper .bp3-dark .bp3-menu-item::before,.jupyter-wrapper .bp3-dark .bp3-menu-item>.bp3-icon{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-menu-item .bp3-menu-item-label{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-active,.jupyter-wrapper .bp3-dark .bp3-menu-item:active{background-color:rgba(138,155,168,.3)}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-disabled{color:rgba(167,182,194,.6) !important}.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-disabled::before,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-disabled>.bp3-icon,.jupyter-wrapper .bp3-dark .bp3-menu-item.bp3-disabled .bp3-menu-item-label{color:rgba(167,182,194,.6) !important}.jupyter-wrapper .bp3-dark .bp3-menu-divider,.jupyter-wrapper .bp3-dark .bp3-menu-header{border-color:rgba(255,255,255,.15)}.jupyter-wrapper .bp3-dark .bp3-menu-header>h6{color:#f5f8fa}.jupyter-wrapper .bp3-label .bp3-menu{margin-top:5px}.jupyter-wrapper .bp3-navbar{position:relative;z-index:10;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.2);background-color:#fff;width:100%;height:50px;padding:0 15px}.jupyter-wrapper .bp3-navbar.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-navbar{background-color:#394b59}.jupyter-wrapper .bp3-navbar.bp3-dark{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-navbar{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 0 0 rgba(16,22,26,0),0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-navbar.bp3-fixed-top{position:fixed;top:0;right:0;left:0}.jupyter-wrapper .bp3-navbar-heading{margin-right:15px;font-size:16px}.jupyter-wrapper .bp3-navbar-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:50px}.jupyter-wrapper .bp3-navbar-group.bp3-align-left{float:left}.jupyter-wrapper .bp3-navbar-group.bp3-align-right{float:right}.jupyter-wrapper .bp3-navbar-divider{margin:0 10px;border-left:1px solid rgba(16,22,26,.15);height:20px}.jupyter-wrapper .bp3-dark .bp3-navbar-divider{border-left-color:rgba(255,255,255,.15)}.jupyter-wrapper .bp3-non-ideal-state{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;text-align:center}.jupyter-wrapper .bp3-non-ideal-state>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-non-ideal-state>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-non-ideal-state::before,.jupyter-wrapper .bp3-non-ideal-state>*{margin-bottom:20px}.jupyter-wrapper .bp3-non-ideal-state:empty::before,.jupyter-wrapper .bp3-non-ideal-state>:last-child{margin-bottom:0}.jupyter-wrapper .bp3-non-ideal-state>*{max-width:400px}.jupyter-wrapper .bp3-non-ideal-state-visual{color:rgba(92,112,128,.6);font-size:60px}.jupyter-wrapper .bp3-dark .bp3-non-ideal-state-visual{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-overflow-list{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;min-width:0}.jupyter-wrapper .bp3-overflow-list-spacer{-ms-flex-negative:1;flex-shrink:1;width:1px}.jupyter-wrapper body.bp3-overlay-open{overflow:hidden}.jupyter-wrapper .bp3-overlay{position:static;top:0;right:0;bottom:0;left:0;z-index:20}.jupyter-wrapper .bp3-overlay:not(.bp3-overlay-open){pointer-events:none}.jupyter-wrapper .bp3-overlay.bp3-overlay-container{position:fixed;overflow:hidden}.jupyter-wrapper .bp3-overlay.bp3-overlay-container.bp3-overlay-inline{position:absolute}.jupyter-wrapper .bp3-overlay.bp3-overlay-scroll-container{position:fixed;overflow:auto}.jupyter-wrapper .bp3-overlay.bp3-overlay-scroll-container.bp3-overlay-inline{position:absolute}.jupyter-wrapper .bp3-overlay.bp3-overlay-inline{display:inline;overflow:visible}.jupyter-wrapper .bp3-overlay-content{position:fixed;z-index:20}.jupyter-wrapper .bp3-overlay-inline .bp3-overlay-content,.jupyter-wrapper .bp3-overlay-scroll-container .bp3-overlay-content{position:absolute}.jupyter-wrapper .bp3-overlay-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;opacity:1;z-index:20;background-color:rgba(16,22,26,.7);overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-overlay-backdrop.bp3-overlay-enter,.jupyter-wrapper .bp3-overlay-backdrop.bp3-overlay-appear{opacity:0}.jupyter-wrapper .bp3-overlay-backdrop.bp3-overlay-enter-active,.jupyter-wrapper .bp3-overlay-backdrop.bp3-overlay-appear-active{opacity:1;-webkit-transition-property:opacity;transition-property:opacity;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-overlay-backdrop.bp3-overlay-exit{opacity:1}.jupyter-wrapper .bp3-overlay-backdrop.bp3-overlay-exit-active{opacity:0;-webkit-transition-property:opacity;transition-property:opacity;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-overlay-backdrop:focus{outline:none}.jupyter-wrapper .bp3-overlay-inline .bp3-overlay-backdrop{position:absolute}.jupyter-wrapper .bp3-panel-stack{position:relative;overflow:hidden}.jupyter-wrapper .bp3-panel-stack-header{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;-webkit-box-shadow:0 1px rgba(16,22,26,.15);box-shadow:0 1px rgba(16,22,26,.15);height:30px}.jupyter-wrapper .bp3-dark .bp3-panel-stack-header{-webkit-box-shadow:0 1px rgba(255,255,255,.15);box-shadow:0 1px rgba(255,255,255,.15)}.jupyter-wrapper .bp3-panel-stack-header>span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.jupyter-wrapper .bp3-panel-stack-header .bp3-heading{margin:0 5px}.jupyter-wrapper .bp3-button.bp3-panel-stack-header-back{margin-left:5px;padding-left:0;white-space:nowrap}.jupyter-wrapper .bp3-button.bp3-panel-stack-header-back .bp3-icon{margin:0 2px}.jupyter-wrapper .bp3-panel-stack-view{position:absolute;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-right:-1px;border-right:1px solid rgba(16,22,26,.15);background-color:#fff;overflow-y:auto}.jupyter-wrapper .bp3-dark .bp3-panel-stack-view{background-color:#30404d}.jupyter-wrapper .bp3-panel-stack-push .bp3-panel-stack-enter,.jupyter-wrapper .bp3-panel-stack-push .bp3-panel-stack-appear{-webkit-transform:translateX(100%);transform:translateX(100%);opacity:0}.jupyter-wrapper .bp3-panel-stack-push .bp3-panel-stack-enter-active,.jupyter-wrapper .bp3-panel-stack-push .bp3-panel-stack-appear-active{-webkit-transform:translate(0%);transform:translate(0%);opacity:1;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform;-webkit-transition-duration:400ms;transition-duration:400ms;-webkit-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-panel-stack-push .bp3-panel-stack-exit{-webkit-transform:translate(0%);transform:translate(0%);opacity:1}.jupyter-wrapper .bp3-panel-stack-push .bp3-panel-stack-exit-active{-webkit-transform:translateX(-50%);transform:translateX(-50%);opacity:0;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform;-webkit-transition-duration:400ms;transition-duration:400ms;-webkit-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-panel-stack-pop .bp3-panel-stack-enter,.jupyter-wrapper .bp3-panel-stack-pop .bp3-panel-stack-appear{-webkit-transform:translateX(-50%);transform:translateX(-50%);opacity:0}.jupyter-wrapper .bp3-panel-stack-pop .bp3-panel-stack-enter-active,.jupyter-wrapper .bp3-panel-stack-pop .bp3-panel-stack-appear-active{-webkit-transform:translate(0%);transform:translate(0%);opacity:1;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform;-webkit-transition-duration:400ms;transition-duration:400ms;-webkit-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-panel-stack-pop .bp3-panel-stack-exit{-webkit-transform:translate(0%);transform:translate(0%);opacity:1}.jupyter-wrapper .bp3-panel-stack-pop .bp3-panel-stack-exit-active{-webkit-transform:translateX(100%);transform:translateX(100%);opacity:0;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform;-webkit-transition-duration:400ms;transition-duration:400ms;-webkit-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-popover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);-webkit-transform:scale(1);transform:scale(1);display:inline-block;z-index:20;border-radius:3px}.jupyter-wrapper .bp3-popover .bp3-popover-arrow{position:absolute;width:30px;height:30px}.jupyter-wrapper .bp3-popover .bp3-popover-arrow::before{margin:5px;width:20px;height:20px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top>.bp3-popover{margin-top:-17px;margin-bottom:17px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top>.bp3-popover>.bp3-popover-arrow{bottom:-11px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top>.bp3-popover>.bp3-popover-arrow svg{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-right>.bp3-popover{margin-left:17px}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-right>.bp3-popover>.bp3-popover-arrow{left:-11px}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-right>.bp3-popover>.bp3-popover-arrow svg{-webkit-transform:rotate(0);transform:rotate(0)}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom>.bp3-popover{margin-top:17px}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom>.bp3-popover>.bp3-popover-arrow{top:-11px}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom>.bp3-popover>.bp3-popover-arrow svg{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-left>.bp3-popover{margin-right:17px;margin-left:-17px}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-left>.bp3-popover>.bp3-popover-arrow{right:-11px}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-left>.bp3-popover>.bp3-popover-arrow svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.jupyter-wrapper .bp3-tether-element-attached-middle>.bp3-popover>.bp3-popover-arrow{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.jupyter-wrapper .bp3-tether-element-attached-center>.bp3-popover>.bp3-popover-arrow{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-top>.bp3-popover>.bp3-popover-arrow{top:-0.3934px}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-right>.bp3-popover>.bp3-popover-arrow{right:-0.3934px}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-left>.bp3-popover>.bp3-popover-arrow{left:-0.3934px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-bottom>.bp3-popover>.bp3-popover-arrow{bottom:-0.3934px}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-element-attached-left>.bp3-popover{-webkit-transform-origin:top left;transform-origin:top left}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-element-attached-center>.bp3-popover{-webkit-transform-origin:top center;transform-origin:top center}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-element-attached-right>.bp3-popover{-webkit-transform-origin:top right;transform-origin:top right}.jupyter-wrapper .bp3-tether-element-attached-middle.bp3-tether-element-attached-left>.bp3-popover{-webkit-transform-origin:center left;transform-origin:center left}.jupyter-wrapper .bp3-tether-element-attached-middle.bp3-tether-element-attached-center>.bp3-popover{-webkit-transform-origin:center center;transform-origin:center center}.jupyter-wrapper .bp3-tether-element-attached-middle.bp3-tether-element-attached-right>.bp3-popover{-webkit-transform-origin:center right;transform-origin:center right}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-element-attached-left>.bp3-popover{-webkit-transform-origin:bottom left;transform-origin:bottom left}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-element-attached-center>.bp3-popover{-webkit-transform-origin:bottom center;transform-origin:bottom center}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-element-attached-right>.bp3-popover{-webkit-transform-origin:bottom right;transform-origin:bottom right}.jupyter-wrapper .bp3-popover .bp3-popover-content{background:#fff;color:inherit}.jupyter-wrapper .bp3-popover .bp3-popover-arrow::before{-webkit-box-shadow:1px 1px 6px rgba(16,22,26,.2);box-shadow:1px 1px 6px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-popover .bp3-popover-arrow-border{fill:#10161a;fill-opacity:.1}.jupyter-wrapper .bp3-popover .bp3-popover-arrow-fill{fill:#fff}.jupyter-wrapper .bp3-popover-enter>.bp3-popover,.jupyter-wrapper .bp3-popover-appear>.bp3-popover{-webkit-transform:scale(0.3);transform:scale(0.3)}.jupyter-wrapper .bp3-popover-enter-active>.bp3-popover,.jupyter-wrapper .bp3-popover-appear-active>.bp3-popover{-webkit-transform:scale(1);transform:scale(1);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-popover-exit>.bp3-popover{-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-popover-exit-active>.bp3-popover{-webkit-transform:scale(0.3);transform:scale(0.3);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-popover .bp3-popover-content{position:relative;border-radius:3px}.jupyter-wrapper .bp3-popover.bp3-popover-content-sizing .bp3-popover-content{max-width:350px;padding:20px}.jupyter-wrapper .bp3-popover-target+.bp3-overlay .bp3-popover.bp3-popover-content-sizing{width:350px}.jupyter-wrapper .bp3-popover.bp3-minimal{margin:0 !important}.jupyter-wrapper .bp3-popover.bp3-minimal .bp3-popover-arrow{display:none}.jupyter-wrapper .bp3-popover.bp3-minimal.bp3-popover{-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-popover-enter>.bp3-popover.bp3-minimal.bp3-popover,.jupyter-wrapper .bp3-popover-appear>.bp3-popover.bp3-minimal.bp3-popover{-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-popover-enter-active>.bp3-popover.bp3-minimal.bp3-popover,.jupyter-wrapper .bp3-popover-appear-active>.bp3-popover.bp3-minimal.bp3-popover{-webkit-transform:scale(1);transform:scale(1);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-popover-exit>.bp3-popover.bp3-minimal.bp3-popover{-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-popover-exit-active>.bp3-popover.bp3-minimal.bp3-popover{-webkit-transform:scale(1);transform:scale(1);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-popover.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-popover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-popover.bp3-dark .bp3-popover-content,.jupyter-wrapper .bp3-dark .bp3-popover .bp3-popover-content{background:#30404d;color:inherit}.jupyter-wrapper .bp3-popover.bp3-dark .bp3-popover-arrow::before,.jupyter-wrapper .bp3-dark .bp3-popover .bp3-popover-arrow::before{-webkit-box-shadow:1px 1px 6px rgba(16,22,26,.4);box-shadow:1px 1px 6px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-popover.bp3-dark .bp3-popover-arrow-border,.jupyter-wrapper .bp3-dark .bp3-popover .bp3-popover-arrow-border{fill:#10161a;fill-opacity:.2}.jupyter-wrapper .bp3-popover.bp3-dark .bp3-popover-arrow-fill,.jupyter-wrapper .bp3-dark .bp3-popover .bp3-popover-arrow-fill{fill:#30404d}.jupyter-wrapper .bp3-popover-arrow::before{display:block;position:absolute;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-radius:2px;content:\"\"}.jupyter-wrapper .bp3-tether-pinned .bp3-popover-arrow{display:none}.jupyter-wrapper .bp3-popover-backdrop{background:rgba(255,255,255,0)}.jupyter-wrapper .bp3-transition-container{opacity:1;display:-webkit-box;display:-ms-flexbox;display:flex;z-index:20}.jupyter-wrapper .bp3-transition-container.bp3-popover-enter,.jupyter-wrapper .bp3-transition-container.bp3-popover-appear{opacity:0}.jupyter-wrapper .bp3-transition-container.bp3-popover-enter-active,.jupyter-wrapper .bp3-transition-container.bp3-popover-appear-active{opacity:1;-webkit-transition-property:opacity;transition-property:opacity;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-transition-container.bp3-popover-exit{opacity:1}.jupyter-wrapper .bp3-transition-container.bp3-popover-exit-active{opacity:0;-webkit-transition-property:opacity;transition-property:opacity;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-transition-container:focus{outline:none}.jupyter-wrapper .bp3-transition-container.bp3-popover-leave .bp3-popover-content{pointer-events:none}.jupyter-wrapper .bp3-transition-container[data-x-out-of-boundaries]{display:none}.jupyter-wrapper span.bp3-popover-target{display:inline-block}.jupyter-wrapper .bp3-popover-wrapper.bp3-fill{width:100%}.jupyter-wrapper .bp3-portal{position:absolute;top:0;right:0;left:0}@-webkit-keyframes linear-progress-bar-stripes{from{background-position:0 0}to{background-position:30px 0}}@keyframes linear-progress-bar-stripes{from{background-position:0 0}to{background-position:30px 0}}.jupyter-wrapper .bp3-progress-bar{display:block;position:relative;border-radius:40px;background:rgba(92,112,128,.2);width:100%;height:8px;overflow:hidden}.jupyter-wrapper .bp3-progress-bar .bp3-progress-meter{position:absolute;border-radius:40px;background:linear-gradient(-45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%);background-color:rgba(92,112,128,.8);background-size:30px 30px;width:100%;height:100%;-webkit-transition:width 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:width 200ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-progress-bar:not(.bp3-no-animation):not(.bp3-no-stripes) .bp3-progress-meter{animation:linear-progress-bar-stripes 300ms linear infinite reverse}.jupyter-wrapper .bp3-progress-bar.bp3-no-stripes .bp3-progress-meter{background-image:none}.jupyter-wrapper .bp3-dark .bp3-progress-bar{background:rgba(16,22,26,.5)}.jupyter-wrapper .bp3-dark .bp3-progress-bar .bp3-progress-meter{background-color:#8a9ba8}.jupyter-wrapper .bp3-progress-bar.bp3-intent-primary .bp3-progress-meter{background-color:#137cbd}.jupyter-wrapper .bp3-progress-bar.bp3-intent-success .bp3-progress-meter{background-color:#0f9960}.jupyter-wrapper .bp3-progress-bar.bp3-intent-warning .bp3-progress-meter{background-color:#d9822b}.jupyter-wrapper .bp3-progress-bar.bp3-intent-danger .bp3-progress-meter{background-color:#db3737}@-webkit-keyframes skeleton-glow{from{border-color:rgba(206,217,224,.2);background:rgba(206,217,224,.2)}to{border-color:rgba(92,112,128,.2);background:rgba(92,112,128,.2)}}@keyframes skeleton-glow{from{border-color:rgba(206,217,224,.2);background:rgba(206,217,224,.2)}to{border-color:rgba(92,112,128,.2);background:rgba(92,112,128,.2)}}.jupyter-wrapper .bp3-skeleton{border-color:rgba(206,217,224,.2) !important;border-radius:2px;-webkit-box-shadow:none !important;box-shadow:none !important;background:rgba(206,217,224,.2);background-clip:padding-box !important;cursor:default;color:rgba(0,0,0,0) !important;-webkit-animation:1000ms linear infinite alternate skeleton-glow;animation:1000ms linear infinite alternate skeleton-glow;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-skeleton::before,.jupyter-wrapper .bp3-skeleton::after,.jupyter-wrapper .bp3-skeleton *{visibility:hidden !important}.jupyter-wrapper .bp3-slider{width:100%;min-width:150px;height:40px;position:relative;outline:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-slider:hover{cursor:pointer}.jupyter-wrapper .bp3-slider:active{cursor:-webkit-grabbing;cursor:grabbing}.jupyter-wrapper .bp3-slider.bp3-disabled{opacity:.5;cursor:not-allowed}.jupyter-wrapper .bp3-slider.bp3-slider-unlabeled{height:16px}.jupyter-wrapper .bp3-slider-track,.jupyter-wrapper .bp3-slider-progress{top:5px;right:0;left:0;height:6px;position:absolute}.jupyter-wrapper .bp3-slider-track{border-radius:3px;overflow:hidden}.jupyter-wrapper .bp3-slider-progress{background:rgba(92,112,128,.2)}.jupyter-wrapper .bp3-dark .bp3-slider-progress{background:rgba(16,22,26,.5)}.jupyter-wrapper .bp3-slider-progress.bp3-intent-primary{background-color:#137cbd}.jupyter-wrapper .bp3-slider-progress.bp3-intent-success{background-color:#0f9960}.jupyter-wrapper .bp3-slider-progress.bp3-intent-warning{background-color:#d9822b}.jupyter-wrapper .bp3-slider-progress.bp3-intent-danger{background-color:#db3737}.jupyter-wrapper .bp3-slider-handle{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-color:#f5f8fa;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));color:#182026;position:absolute;top:0;left:0;border-radius:3px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.2);cursor:pointer;width:16px;height:16px}.jupyter-wrapper .bp3-slider-handle:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#ebf1f5}.jupyter-wrapper .bp3-slider-handle:active,.jupyter-wrapper .bp3-slider-handle.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background-color:#d8e1e8;background-image:none}.jupyter-wrapper .bp3-slider-handle:disabled,.jupyter-wrapper .bp3-slider-handle.bp3-disabled{outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:rgba(206,217,224,.5);background-image:none;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-slider-handle:disabled.bp3-active,.jupyter-wrapper .bp3-slider-handle:disabled.bp3-active:hover,.jupyter-wrapper .bp3-slider-handle.bp3-disabled.bp3-active,.jupyter-wrapper .bp3-slider-handle.bp3-disabled.bp3-active:hover{background:rgba(206,217,224,.7)}.jupyter-wrapper .bp3-slider-handle:focus{z-index:1}.jupyter-wrapper .bp3-slider-handle:hover{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 -1px 0 rgba(16,22,26,.1);background-clip:padding-box;background-color:#ebf1f5;z-index:2;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 1px 1px rgba(16,22,26,.2);cursor:-webkit-grab;cursor:grab}.jupyter-wrapper .bp3-slider-handle.bp3-active{-webkit-box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:inset 0 0 0 1px rgba(16,22,26,.2),inset 0 1px 2px rgba(16,22,26,.2);background-color:#d8e1e8;background-image:none;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),inset 0 1px 1px rgba(16,22,26,.1);box-shadow:0 0 0 1px rgba(16,22,26,.2),inset 0 1px 1px rgba(16,22,26,.1);cursor:-webkit-grabbing;cursor:grabbing}.jupyter-wrapper .bp3-disabled .bp3-slider-handle{-webkit-box-shadow:none;box-shadow:none;background:#bfccd6;pointer-events:none}.jupyter-wrapper .bp3-dark .bp3-slider-handle{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#394b59;background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-slider-handle:hover,.jupyter-wrapper .bp3-dark .bp3-slider-handle:active,.jupyter-wrapper .bp3-dark .bp3-slider-handle.bp3-active{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-slider-handle:hover{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.4);background-color:#30404d}.jupyter-wrapper .bp3-dark .bp3-slider-handle:active,.jupyter-wrapper .bp3-dark .bp3-slider-handle.bp3-active{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.6),inset 0 1px 2px rgba(16,22,26,.2);background-color:#202b33;background-image:none}.jupyter-wrapper .bp3-dark .bp3-slider-handle:disabled,.jupyter-wrapper .bp3-dark .bp3-slider-handle.bp3-disabled{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(57,75,89,.5);background-image:none;color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-slider-handle:disabled.bp3-active,.jupyter-wrapper .bp3-dark .bp3-slider-handle.bp3-disabled.bp3-active{background:rgba(57,75,89,.7)}.jupyter-wrapper .bp3-dark .bp3-slider-handle .bp3-button-spinner .bp3-spinner-head{background:rgba(16,22,26,.5);stroke:#8a9ba8}.jupyter-wrapper .bp3-dark .bp3-slider-handle,.jupyter-wrapper .bp3-dark .bp3-slider-handle:hover{background-color:#394b59}.jupyter-wrapper .bp3-dark .bp3-slider-handle.bp3-active{background-color:#293742}.jupyter-wrapper .bp3-dark .bp3-disabled .bp3-slider-handle{border-color:#5c7080;-webkit-box-shadow:none;box-shadow:none;background:#5c7080}.jupyter-wrapper .bp3-slider-handle .bp3-slider-label{margin-left:8px;border-radius:3px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);background:#394b59;color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-slider-handle .bp3-slider-label{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);background:#e1e8ed;color:#394b59}.jupyter-wrapper .bp3-disabled .bp3-slider-handle .bp3-slider-label{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-slider-handle.bp3-start,.jupyter-wrapper .bp3-slider-handle.bp3-end{width:8px}.jupyter-wrapper .bp3-slider-handle.bp3-start{border-top-right-radius:0;border-bottom-right-radius:0}.jupyter-wrapper .bp3-slider-handle.bp3-end{margin-left:8px;border-top-left-radius:0;border-bottom-left-radius:0}.jupyter-wrapper .bp3-slider-handle.bp3-end .bp3-slider-label{margin-left:0}.jupyter-wrapper .bp3-slider-label{-webkit-transform:translate(-50%, 20px);transform:translate(-50%, 20px);display:inline-block;position:absolute;padding:2px 5px;vertical-align:top;line-height:1;font-size:12px}.jupyter-wrapper .bp3-slider.bp3-vertical{width:40px;min-width:40px;height:150px}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-track,.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-progress{top:0;bottom:0;left:5px;width:6px;height:auto}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-progress{top:auto}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-label{-webkit-transform:translate(20px, 50%);transform:translate(20px, 50%)}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle{top:auto}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle .bp3-slider-label{margin-top:-8px;margin-left:0}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-end,.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-start{margin-left:0;width:16px;height:8px}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-start{border-top-left-radius:0;border-bottom-right-radius:3px}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-start .bp3-slider-label{-webkit-transform:translate(20px);transform:translate(20px)}.jupyter-wrapper .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-end{margin-bottom:8px;border-top-left-radius:3px;border-bottom-left-radius:0;border-bottom-right-radius:0}@-webkit-keyframes pt-spinner-animation{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes pt-spinner-animation{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.jupyter-wrapper .bp3-spinner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow:visible;vertical-align:middle}.jupyter-wrapper .bp3-spinner svg{display:block}.jupyter-wrapper .bp3-spinner path{fill-opacity:0}.jupyter-wrapper .bp3-spinner .bp3-spinner-head{-webkit-transform-origin:center;transform-origin:center;-webkit-transition:stroke-dashoffset 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:stroke-dashoffset 200ms cubic-bezier(0.4, 1, 0.75, 0.9);stroke:rgba(92,112,128,.8);stroke-linecap:round}.jupyter-wrapper .bp3-spinner .bp3-spinner-track{stroke:rgba(92,112,128,.2)}.jupyter-wrapper .bp3-spinner-animation{-webkit-animation:pt-spinner-animation 500ms linear infinite;animation:pt-spinner-animation 500ms linear infinite}.jupyter-wrapper .bp3-no-spin>.bp3-spinner-animation{-webkit-animation:none;animation:none}.jupyter-wrapper .bp3-dark .bp3-spinner .bp3-spinner-head{stroke:#8a9ba8}.jupyter-wrapper .bp3-dark .bp3-spinner .bp3-spinner-track{stroke:rgba(16,22,26,.5)}.jupyter-wrapper .bp3-spinner.bp3-intent-primary .bp3-spinner-head{stroke:#137cbd}.jupyter-wrapper .bp3-spinner.bp3-intent-success .bp3-spinner-head{stroke:#0f9960}.jupyter-wrapper .bp3-spinner.bp3-intent-warning .bp3-spinner-head{stroke:#d9822b}.jupyter-wrapper .bp3-spinner.bp3-intent-danger .bp3-spinner-head{stroke:#db3737}.jupyter-wrapper .bp3-tabs.bp3-vertical{display:-webkit-box;display:-ms-flexbox;display:flex}.jupyter-wrapper .bp3-tabs.bp3-vertical>.bp3-tab-list{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.jupyter-wrapper .bp3-tabs.bp3-vertical>.bp3-tab-list .bp3-tab{border-radius:3px;width:100%;padding:0 10px}.jupyter-wrapper .bp3-tabs.bp3-vertical>.bp3-tab-list .bp3-tab[aria-selected=true]{-webkit-box-shadow:none;box-shadow:none;background-color:rgba(19,124,189,.2)}.jupyter-wrapper .bp3-tabs.bp3-vertical>.bp3-tab-list .bp3-tab-indicator-wrapper .bp3-tab-indicator{top:0;right:0;bottom:0;left:0;border-radius:3px;background-color:rgba(19,124,189,.2);height:auto}.jupyter-wrapper .bp3-tabs.bp3-vertical>.bp3-tab-panel{margin-top:0;padding-left:20px}.jupyter-wrapper .bp3-tab-list{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;position:relative;margin:0;border:none;padding:0;list-style:none}.jupyter-wrapper .bp3-tab-list>*:not(:last-child){margin-right:20px}.jupyter-wrapper .bp3-tab{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;cursor:pointer;max-width:100%;vertical-align:top;line-height:30px;color:#182026;font-size:14px}.jupyter-wrapper .bp3-tab a{display:block;text-decoration:none;color:inherit}.jupyter-wrapper .bp3-tab-indicator-wrapper~.bp3-tab{-webkit-box-shadow:none !important;box-shadow:none !important;background-color:rgba(0,0,0,0) !important}.jupyter-wrapper .bp3-tab[aria-disabled=true]{cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-tab[aria-selected=true]{border-radius:0;-webkit-box-shadow:inset 0 -3px 0 #106ba3;box-shadow:inset 0 -3px 0 #106ba3}.jupyter-wrapper .bp3-tab[aria-selected=true],.jupyter-wrapper .bp3-tab:not([aria-disabled=true]):hover{color:#106ba3}.jupyter-wrapper .bp3-tab:focus{-moz-outline-radius:0}.jupyter-wrapper .bp3-large>.bp3-tab{line-height:40px;font-size:16px}.jupyter-wrapper .bp3-tab-panel{margin-top:20px}.jupyter-wrapper .bp3-tab-panel[aria-hidden=true]{display:none}.jupyter-wrapper .bp3-tab-indicator-wrapper{position:absolute;top:0;left:0;-webkit-transform:translateX(0),translateY(0);transform:translateX(0),translateY(0);-webkit-transition:height,width,-webkit-transform;transition:height,width,-webkit-transform;transition:height,transform,width;transition:height,transform,width,-webkit-transform;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);pointer-events:none}.jupyter-wrapper .bp3-tab-indicator-wrapper .bp3-tab-indicator{position:absolute;right:0;bottom:0;left:0;background-color:#106ba3;height:3px}.jupyter-wrapper .bp3-tab-indicator-wrapper.bp3-no-animation{-webkit-transition:none;transition:none}.jupyter-wrapper .bp3-dark .bp3-tab{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-tab[aria-disabled=true]{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-tab[aria-selected=true]{-webkit-box-shadow:inset 0 -3px 0 #48aff0;box-shadow:inset 0 -3px 0 #48aff0}.jupyter-wrapper .bp3-dark .bp3-tab[aria-selected=true],.jupyter-wrapper .bp3-dark .bp3-tab:not([aria-disabled=true]):hover{color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-tab-indicator{background-color:#48aff0}.jupyter-wrapper .bp3-flex-expander{-webkit-box-flex:1;-ms-flex:1 1;flex:1 1}.jupyter-wrapper .bp3-tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;border:none;border-radius:3px;-webkit-box-shadow:none;box-shadow:none;background-color:#5c7080;min-width:20px;max-width:100%;min-height:20px;padding:2px 6px;line-height:16px;color:#f5f8fa;font-size:12px}.jupyter-wrapper .bp3-tag.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-interactive:hover{background-color:rgba(92,112,128,.85)}.jupyter-wrapper .bp3-tag.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-interactive:active{background-color:rgba(92,112,128,.7)}.jupyter-wrapper .bp3-tag>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-tag>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-tag::before,.jupyter-wrapper .bp3-tag>*{margin-right:4px}.jupyter-wrapper .bp3-tag:empty::before,.jupyter-wrapper .bp3-tag>:last-child{margin-right:0}.jupyter-wrapper .bp3-tag:focus{outline:rgba(19,124,189,.6) auto 2px;outline-offset:0;-moz-outline-radius:6px}.jupyter-wrapper .bp3-tag.bp3-round{border-radius:30px;padding-right:8px;padding-left:8px}.jupyter-wrapper .bp3-dark .bp3-tag{background-color:#bfccd6;color:#182026}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-interactive:hover{background-color:rgba(191,204,214,.85)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-interactive:active{background-color:rgba(191,204,214,.7)}.jupyter-wrapper .bp3-dark .bp3-tag>.bp3-icon,.jupyter-wrapper .bp3-dark .bp3-tag .bp3-icon-standard,.jupyter-wrapper .bp3-dark .bp3-tag .bp3-icon-large{fill:currentColor}.jupyter-wrapper .bp3-tag>.bp3-icon,.jupyter-wrapper .bp3-tag .bp3-icon-standard,.jupyter-wrapper .bp3-tag .bp3-icon-large{fill:#fff}.jupyter-wrapper .bp3-tag.bp3-large,.jupyter-wrapper .bp3-large .bp3-tag{min-width:30px;min-height:30px;padding:0 10px;line-height:20px;font-size:14px}.jupyter-wrapper .bp3-tag.bp3-large::before,.jupyter-wrapper .bp3-tag.bp3-large>*,.jupyter-wrapper .bp3-large .bp3-tag::before,.jupyter-wrapper .bp3-large .bp3-tag>*{margin-right:7px}.jupyter-wrapper .bp3-tag.bp3-large:empty::before,.jupyter-wrapper .bp3-tag.bp3-large>:last-child,.jupyter-wrapper .bp3-large .bp3-tag:empty::before,.jupyter-wrapper .bp3-large .bp3-tag>:last-child{margin-right:0}.jupyter-wrapper .bp3-tag.bp3-large.bp3-round,.jupyter-wrapper .bp3-large .bp3-tag.bp3-round{padding-right:12px;padding-left:12px}.jupyter-wrapper .bp3-tag.bp3-intent-primary{background:#137cbd;color:#fff}.jupyter-wrapper .bp3-tag.bp3-intent-primary.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-intent-primary.bp3-interactive:hover{background-color:rgba(19,124,189,.85)}.jupyter-wrapper .bp3-tag.bp3-intent-primary.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-intent-primary.bp3-interactive:active{background-color:rgba(19,124,189,.7)}.jupyter-wrapper .bp3-tag.bp3-intent-success{background:#0f9960;color:#fff}.jupyter-wrapper .bp3-tag.bp3-intent-success.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-intent-success.bp3-interactive:hover{background-color:rgba(15,153,96,.85)}.jupyter-wrapper .bp3-tag.bp3-intent-success.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-intent-success.bp3-interactive:active{background-color:rgba(15,153,96,.7)}.jupyter-wrapper .bp3-tag.bp3-intent-warning{background:#d9822b;color:#fff}.jupyter-wrapper .bp3-tag.bp3-intent-warning.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-intent-warning.bp3-interactive:hover{background-color:rgba(217,130,43,.85)}.jupyter-wrapper .bp3-tag.bp3-intent-warning.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-intent-warning.bp3-interactive:active{background-color:rgba(217,130,43,.7)}.jupyter-wrapper .bp3-tag.bp3-intent-danger{background:#db3737;color:#fff}.jupyter-wrapper .bp3-tag.bp3-intent-danger.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-intent-danger.bp3-interactive:hover{background-color:rgba(219,55,55,.85)}.jupyter-wrapper .bp3-tag.bp3-intent-danger.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-intent-danger.bp3-interactive:active{background-color:rgba(219,55,55,.7)}.jupyter-wrapper .bp3-tag.bp3-fill{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.jupyter-wrapper .bp3-tag.bp3-minimal>.bp3-icon,.jupyter-wrapper .bp3-tag.bp3-minimal .bp3-icon-standard,.jupyter-wrapper .bp3-tag.bp3-minimal .bp3-icon-large{fill:#5c7080}.jupyter-wrapper .bp3-tag.bp3-minimal:not([class*=bp3-intent-]){background-color:rgba(138,155,168,.2);color:#182026}.jupyter-wrapper .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive:hover{background-color:rgba(92,112,128,.3)}.jupyter-wrapper .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive:active{background-color:rgba(92,112,128,.4)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]){color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive:hover{background-color:rgba(191,204,214,.3)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive.bp3-active,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]).bp3-interactive:active{background-color:rgba(191,204,214,.4)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-])>.bp3-icon,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]) .bp3-icon-standard,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal:not([class*=bp3-intent-]) .bp3-icon-large{fill:#a7b6c2}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary{background-color:rgba(19,124,189,.15);color:#106ba3}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:hover{background-color:rgba(19,124,189,.25)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:active{background-color:rgba(19,124,189,.35)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary>.bp3-icon,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary .bp3-icon-standard,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-primary .bp3-icon-large{fill:#137cbd}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary{background-color:rgba(19,124,189,.25);color:#48aff0}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:hover{background-color:rgba(19,124,189,.35)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:active{background-color:rgba(19,124,189,.45)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success{background-color:rgba(15,153,96,.15);color:#0d8050}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:hover{background-color:rgba(15,153,96,.25)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:active{background-color:rgba(15,153,96,.35)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success>.bp3-icon,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success .bp3-icon-standard,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-success .bp3-icon-large{fill:#0f9960}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success{background-color:rgba(15,153,96,.25);color:#3dcc91}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:hover{background-color:rgba(15,153,96,.35)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:active{background-color:rgba(15,153,96,.45)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning{background-color:rgba(217,130,43,.15);color:#bf7326}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:hover{background-color:rgba(217,130,43,.25)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:active{background-color:rgba(217,130,43,.35)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning>.bp3-icon,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning .bp3-icon-standard,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-warning .bp3-icon-large{fill:#d9822b}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning{background-color:rgba(217,130,43,.25);color:#ffb366}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:hover{background-color:rgba(217,130,43,.35)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:active{background-color:rgba(217,130,43,.45)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger{background-color:rgba(219,55,55,.15);color:#c23030}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:hover{background-color:rgba(219,55,55,.25)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:active{background-color:rgba(219,55,55,.35)}.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger>.bp3-icon,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger .bp3-icon-standard,.jupyter-wrapper .bp3-tag.bp3-minimal.bp3-intent-danger .bp3-icon-large{fill:#db3737}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger{background-color:rgba(219,55,55,.25);color:#ff7373}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive{cursor:pointer}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:hover{background-color:rgba(219,55,55,.35)}.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive.bp3-active,.jupyter-wrapper .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:active{background-color:rgba(219,55,55,.45)}.jupyter-wrapper .bp3-tag-remove{display:-webkit-box;display:-ms-flexbox;display:flex;opacity:.5;margin-top:-2px;margin-right:-6px !important;margin-bottom:-2px;border:none;background:none;cursor:pointer;padding:2px;padding-left:0;color:inherit}.jupyter-wrapper .bp3-tag-remove:hover{opacity:.8;background:none;text-decoration:none}.jupyter-wrapper .bp3-tag-remove:active{opacity:1}.jupyter-wrapper .bp3-tag-remove:empty::before{line-height:1;font-family:\"Icons16\",sans-serif;font-size:16px;font-weight:400;font-style:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;content:\"\ue6d7\"}.jupyter-wrapper .bp3-large .bp3-tag-remove{margin-right:-10px !important;padding:5px;padding-left:0}.jupyter-wrapper .bp3-large .bp3-tag-remove:empty::before{line-height:1;font-family:\"Icons20\",sans-serif;font-size:20px;font-weight:400;font-style:normal}.jupyter-wrapper .bp3-tag-input{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;cursor:text;height:auto;min-height:30px;padding-right:0;padding-left:5px;line-height:inherit}.jupyter-wrapper .bp3-tag-input>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-tag-input>.bp3-tag-input-values{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-icon{margin-top:7px;margin-right:7px;margin-left:2px;color:#5c7080}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-item-align:stretch;align-self:stretch;margin-top:5px;margin-right:7px;min-width:0}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values>*{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values>.bp3-fill{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values::before,.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values>*{margin-right:5px}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values:empty::before,.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values>:last-child{margin-right:0}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values:first-child .bp3-input-ghost:first-child{padding-left:5px}.jupyter-wrapper .bp3-tag-input .bp3-tag-input-values>*{margin-bottom:5px}.jupyter-wrapper .bp3-tag-input .bp3-tag{overflow-wrap:break-word}.jupyter-wrapper .bp3-tag-input .bp3-tag.bp3-active{outline:rgba(19,124,189,.6) auto 2px;outline-offset:0;-moz-outline-radius:6px}.jupyter-wrapper .bp3-tag-input .bp3-input-ghost{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:80px;line-height:20px}.jupyter-wrapper .bp3-tag-input .bp3-input-ghost:disabled,.jupyter-wrapper .bp3-tag-input .bp3-input-ghost.bp3-disabled{cursor:not-allowed}.jupyter-wrapper .bp3-tag-input .bp3-button,.jupyter-wrapper .bp3-tag-input .bp3-spinner{margin:3px;margin-left:0}.jupyter-wrapper .bp3-tag-input .bp3-button{min-width:24px;min-height:24px;padding:0 7px}.jupyter-wrapper .bp3-tag-input.bp3-large{height:auto;min-height:40px}.jupyter-wrapper .bp3-tag-input.bp3-large::before,.jupyter-wrapper .bp3-tag-input.bp3-large>*{margin-right:10px}.jupyter-wrapper .bp3-tag-input.bp3-large:empty::before,.jupyter-wrapper .bp3-tag-input.bp3-large>:last-child{margin-right:0}.jupyter-wrapper .bp3-tag-input.bp3-large .bp3-tag-input-icon{margin-top:10px;margin-left:5px}.jupyter-wrapper .bp3-tag-input.bp3-large .bp3-input-ghost{line-height:30px}.jupyter-wrapper .bp3-tag-input.bp3-large .bp3-button{min-width:30px;min-height:30px;padding:5px 10px;margin:5px;margin-left:0}.jupyter-wrapper .bp3-tag-input.bp3-large .bp3-spinner{margin:8px;margin-left:0}.jupyter-wrapper .bp3-tag-input.bp3-active{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 1px 1px rgba(16,22,26,.2);background-color:#fff}.jupyter-wrapper .bp3-tag-input.bp3-active.bp3-intent-primary{-webkit-box-shadow:0 0 0 1px #106ba3,0 0 0 3px rgba(16,107,163,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #106ba3,0 0 0 3px rgba(16,107,163,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-tag-input.bp3-active.bp3-intent-success{-webkit-box-shadow:0 0 0 1px #0d8050,0 0 0 3px rgba(13,128,80,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #0d8050,0 0 0 3px rgba(13,128,80,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-tag-input.bp3-active.bp3-intent-warning{-webkit-box-shadow:0 0 0 1px #bf7326,0 0 0 3px rgba(191,115,38,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #bf7326,0 0 0 3px rgba(191,115,38,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-tag-input.bp3-active.bp3-intent-danger{-webkit-box-shadow:0 0 0 1px #c23030,0 0 0 3px rgba(194,48,48,.3),inset 0 1px 1px rgba(16,22,26,.2);box-shadow:0 0 0 1px #c23030,0 0 0 3px rgba(194,48,48,.3),inset 0 1px 1px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-tag-input-icon,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-tag-input-icon{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-input-ghost,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-input-ghost{color:#f5f8fa}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-input-ghost::-webkit-input-placeholder,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-input-ghost::-webkit-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-input-ghost::-moz-placeholder,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-input-ghost::-moz-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-input-ghost:-ms-input-placeholder,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-input-ghost:-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-input-ghost::-ms-input-placeholder,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-input-ghost::-ms-input-placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-tag-input .bp3-input-ghost::placeholder,.jupyter-wrapper .bp3-tag-input.bp3-dark .bp3-input-ghost::placeholder{color:rgba(167,182,194,.6)}.jupyter-wrapper .bp3-dark .bp3-tag-input.bp3-active,.jupyter-wrapper .bp3-tag-input.bp3-dark.bp3-active{-webkit-box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #137cbd,0 0 0 1px #137cbd,0 0 0 3px rgba(19,124,189,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);background-color:rgba(16,22,26,.3)}.jupyter-wrapper .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-primary,.jupyter-wrapper .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-primary{-webkit-box-shadow:0 0 0 1px #106ba3,0 0 0 3px rgba(16,107,163,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #106ba3,0 0 0 3px rgba(16,107,163,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-success,.jupyter-wrapper .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-success{-webkit-box-shadow:0 0 0 1px #0d8050,0 0 0 3px rgba(13,128,80,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #0d8050,0 0 0 3px rgba(13,128,80,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-warning,.jupyter-wrapper .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-warning{-webkit-box-shadow:0 0 0 1px #bf7326,0 0 0 3px rgba(191,115,38,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #bf7326,0 0 0 3px rgba(191,115,38,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-danger,.jupyter-wrapper .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-danger{-webkit-box-shadow:0 0 0 1px #c23030,0 0 0 3px rgba(194,48,48,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4);box-shadow:0 0 0 1px #c23030,0 0 0 3px rgba(194,48,48,.3),inset 0 0 0 1px rgba(16,22,26,.3),inset 0 1px 1px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-input-ghost{border:none;-webkit-box-shadow:none;box-shadow:none;background:none;padding:0}.jupyter-wrapper .bp3-input-ghost::-webkit-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input-ghost::-moz-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input-ghost:-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input-ghost::-ms-input-placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input-ghost::placeholder{opacity:1;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-input-ghost:focus{outline:none !important}.jupyter-wrapper .bp3-toast{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;position:relative !important;margin:20px 0 0;border-radius:3px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);background-color:#fff;min-width:300px;max-width:500px;pointer-events:all}.jupyter-wrapper .bp3-toast.bp3-toast-enter,.jupyter-wrapper .bp3-toast.bp3-toast-appear{-webkit-transform:translateY(-40px);transform:translateY(-40px)}.jupyter-wrapper .bp3-toast.bp3-toast-enter-active,.jupyter-wrapper .bp3-toast.bp3-toast-appear-active{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-toast.bp3-toast-enter~.bp3-toast,.jupyter-wrapper .bp3-toast.bp3-toast-appear~.bp3-toast{-webkit-transform:translateY(-40px);transform:translateY(-40px)}.jupyter-wrapper .bp3-toast.bp3-toast-enter-active~.bp3-toast,.jupyter-wrapper .bp3-toast.bp3-toast-appear-active~.bp3-toast{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-toast.bp3-toast-exit{opacity:1;-webkit-filter:blur(0);filter:blur(0)}.jupyter-wrapper .bp3-toast.bp3-toast-exit-active{opacity:0;-webkit-filter:blur(10px);filter:blur(10px);-webkit-transition-property:opacity,-webkit-filter;transition-property:opacity,-webkit-filter;transition-property:opacity,filter;transition-property:opacity,filter,-webkit-filter;-webkit-transition-duration:300ms;transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-toast.bp3-toast-exit~.bp3-toast{-webkit-transform:translateY(0);transform:translateY(0)}.jupyter-wrapper .bp3-toast.bp3-toast-exit-active~.bp3-toast{-webkit-transform:translateY(-40px);transform:translateY(-40px);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:50ms;transition-delay:50ms}.jupyter-wrapper .bp3-toast .bp3-button-group{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:5px;padding-left:0}.jupyter-wrapper .bp3-toast>.bp3-icon{margin:12px;margin-right:0;color:#5c7080}.jupyter-wrapper .bp3-toast.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-toast{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);background-color:#394b59}.jupyter-wrapper .bp3-toast.bp3-dark>.bp3-icon,.jupyter-wrapper .bp3-dark .bp3-toast>.bp3-icon{color:#a7b6c2}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] a{color:rgba(255,255,255,.7)}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] a:hover{color:#fff}.jupyter-wrapper .bp3-toast[class*=bp3-intent-]>.bp3-icon{color:#fff}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button,.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button::before,.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button .bp3-icon,.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button:active{color:rgba(255,255,255,.7) !important}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button:focus{outline-color:rgba(255,255,255,.5)}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button:hover{background-color:rgba(255,255,255,.15) !important;color:#fff !important}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button:active{background-color:rgba(255,255,255,.3) !important;color:#fff !important}.jupyter-wrapper .bp3-toast[class*=bp3-intent-] .bp3-button::after{background:rgba(255,255,255,.3) !important}.jupyter-wrapper .bp3-toast.bp3-intent-primary{background-color:#137cbd;color:#fff}.jupyter-wrapper .bp3-toast.bp3-intent-success{background-color:#0f9960;color:#fff}.jupyter-wrapper .bp3-toast.bp3-intent-warning{background-color:#d9822b;color:#fff}.jupyter-wrapper .bp3-toast.bp3-intent-danger{background-color:#db3737;color:#fff}.jupyter-wrapper .bp3-toast-message{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:11px;word-break:break-word}.jupyter-wrapper .bp3-toast-container{display:-webkit-box !important;display:-ms-flexbox !important;display:flex !important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:fixed;right:0;left:0;z-index:40;overflow:hidden;padding:0 20px 20px;pointer-events:none}.jupyter-wrapper .bp3-toast-container.bp3-toast-container-top{top:0;bottom:auto}.jupyter-wrapper .bp3-toast-container.bp3-toast-container-bottom{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;top:auto;bottom:0}.jupyter-wrapper .bp3-toast-container.bp3-toast-container-left{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.jupyter-wrapper .bp3-toast-container.bp3-toast-container-right{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.jupyter-wrapper .bp3-toast-container-bottom .bp3-toast.bp3-toast-enter:not(.bp3-toast-enter-active),.jupyter-wrapper .bp3-toast-container-bottom .bp3-toast.bp3-toast-enter:not(.bp3-toast-enter-active)~.bp3-toast,.jupyter-wrapper .bp3-toast-container-bottom .bp3-toast.bp3-toast-appear:not(.bp3-toast-appear-active),.jupyter-wrapper .bp3-toast-container-bottom .bp3-toast.bp3-toast-appear:not(.bp3-toast-appear-active)~.bp3-toast,.jupyter-wrapper .bp3-toast-container-bottom .bp3-toast.bp3-toast-leave-active~.bp3-toast{-webkit-transform:translateY(60px);transform:translateY(60px)}.jupyter-wrapper .bp3-tooltip{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 2px 4px rgba(16,22,26,.2),0 8px 24px rgba(16,22,26,.2);-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-tooltip .bp3-popover-arrow{position:absolute;width:22px;height:22px}.jupyter-wrapper .bp3-tooltip .bp3-popover-arrow::before{margin:4px;width:14px;height:14px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top>.bp3-tooltip{margin-top:-11px;margin-bottom:11px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top>.bp3-tooltip>.bp3-popover-arrow{bottom:-8px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top>.bp3-tooltip>.bp3-popover-arrow svg{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-right>.bp3-tooltip{margin-left:11px}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-right>.bp3-tooltip>.bp3-popover-arrow{left:-8px}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-right>.bp3-tooltip>.bp3-popover-arrow svg{-webkit-transform:rotate(0);transform:rotate(0)}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom>.bp3-tooltip{margin-top:11px}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom>.bp3-tooltip>.bp3-popover-arrow{top:-8px}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom>.bp3-tooltip>.bp3-popover-arrow svg{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-left>.bp3-tooltip{margin-right:11px;margin-left:-11px}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-left>.bp3-tooltip>.bp3-popover-arrow{right:-8px}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-left>.bp3-tooltip>.bp3-popover-arrow svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.jupyter-wrapper .bp3-tether-element-attached-middle>.bp3-tooltip>.bp3-popover-arrow{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.jupyter-wrapper .bp3-tether-element-attached-center>.bp3-tooltip>.bp3-popover-arrow{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-target-attached-top>.bp3-tooltip>.bp3-popover-arrow{top:-0.22183px}.jupyter-wrapper .bp3-tether-element-attached-right.bp3-tether-target-attached-right>.bp3-tooltip>.bp3-popover-arrow{right:-0.22183px}.jupyter-wrapper .bp3-tether-element-attached-left.bp3-tether-target-attached-left>.bp3-tooltip>.bp3-popover-arrow{left:-0.22183px}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-target-attached-bottom>.bp3-tooltip>.bp3-popover-arrow{bottom:-0.22183px}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-element-attached-left>.bp3-tooltip{-webkit-transform-origin:top left;transform-origin:top left}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-element-attached-center>.bp3-tooltip{-webkit-transform-origin:top center;transform-origin:top center}.jupyter-wrapper .bp3-tether-element-attached-top.bp3-tether-element-attached-right>.bp3-tooltip{-webkit-transform-origin:top right;transform-origin:top right}.jupyter-wrapper .bp3-tether-element-attached-middle.bp3-tether-element-attached-left>.bp3-tooltip{-webkit-transform-origin:center left;transform-origin:center left}.jupyter-wrapper .bp3-tether-element-attached-middle.bp3-tether-element-attached-center>.bp3-tooltip{-webkit-transform-origin:center center;transform-origin:center center}.jupyter-wrapper .bp3-tether-element-attached-middle.bp3-tether-element-attached-right>.bp3-tooltip{-webkit-transform-origin:center right;transform-origin:center right}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-element-attached-left>.bp3-tooltip{-webkit-transform-origin:bottom left;transform-origin:bottom left}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-element-attached-center>.bp3-tooltip{-webkit-transform-origin:bottom center;transform-origin:bottom center}.jupyter-wrapper .bp3-tether-element-attached-bottom.bp3-tether-element-attached-right>.bp3-tooltip{-webkit-transform-origin:bottom right;transform-origin:bottom right}.jupyter-wrapper .bp3-tooltip .bp3-popover-content{background:#394b59;color:#f5f8fa}.jupyter-wrapper .bp3-tooltip .bp3-popover-arrow::before{-webkit-box-shadow:1px 1px 6px rgba(16,22,26,.2);box-shadow:1px 1px 6px rgba(16,22,26,.2)}.jupyter-wrapper .bp3-tooltip .bp3-popover-arrow-border{fill:#10161a;fill-opacity:.1}.jupyter-wrapper .bp3-tooltip .bp3-popover-arrow-fill{fill:#394b59}.jupyter-wrapper .bp3-popover-enter>.bp3-tooltip,.jupyter-wrapper .bp3-popover-appear>.bp3-tooltip{-webkit-transform:scale(0.8);transform:scale(0.8)}.jupyter-wrapper .bp3-popover-enter-active>.bp3-tooltip,.jupyter-wrapper .bp3-popover-appear-active>.bp3-tooltip{-webkit-transform:scale(1);transform:scale(1);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-popover-exit>.bp3-tooltip{-webkit-transform:scale(1);transform:scale(1)}.jupyter-wrapper .bp3-popover-exit-active>.bp3-tooltip{-webkit-transform:scale(0.8);transform:scale(0.8);-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:100ms;transition-duration:100ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-tooltip .bp3-popover-content{padding:10px 12px}.jupyter-wrapper .bp3-tooltip.bp3-dark,.jupyter-wrapper .bp3-dark .bp3-tooltip{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 2px 4px rgba(16,22,26,.4),0 8px 24px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-tooltip.bp3-dark .bp3-popover-content,.jupyter-wrapper .bp3-dark .bp3-tooltip .bp3-popover-content{background:#e1e8ed;color:#394b59}.jupyter-wrapper .bp3-tooltip.bp3-dark .bp3-popover-arrow::before,.jupyter-wrapper .bp3-dark .bp3-tooltip .bp3-popover-arrow::before{-webkit-box-shadow:1px 1px 6px rgba(16,22,26,.4);box-shadow:1px 1px 6px rgba(16,22,26,.4)}.jupyter-wrapper .bp3-tooltip.bp3-dark .bp3-popover-arrow-border,.jupyter-wrapper .bp3-dark .bp3-tooltip .bp3-popover-arrow-border{fill:#10161a;fill-opacity:.2}.jupyter-wrapper .bp3-tooltip.bp3-dark .bp3-popover-arrow-fill,.jupyter-wrapper .bp3-dark .bp3-tooltip .bp3-popover-arrow-fill{fill:#e1e8ed}.jupyter-wrapper .bp3-tooltip.bp3-intent-primary .bp3-popover-content{background:#137cbd;color:#fff}.jupyter-wrapper .bp3-tooltip.bp3-intent-primary .bp3-popover-arrow-fill{fill:#137cbd}.jupyter-wrapper .bp3-tooltip.bp3-intent-success .bp3-popover-content{background:#0f9960;color:#fff}.jupyter-wrapper .bp3-tooltip.bp3-intent-success .bp3-popover-arrow-fill{fill:#0f9960}.jupyter-wrapper .bp3-tooltip.bp3-intent-warning .bp3-popover-content{background:#d9822b;color:#fff}.jupyter-wrapper .bp3-tooltip.bp3-intent-warning .bp3-popover-arrow-fill{fill:#d9822b}.jupyter-wrapper .bp3-tooltip.bp3-intent-danger .bp3-popover-content{background:#db3737;color:#fff}.jupyter-wrapper .bp3-tooltip.bp3-intent-danger .bp3-popover-arrow-fill{fill:#db3737}.jupyter-wrapper .bp3-tooltip-indicator{border-bottom:dotted 1px;cursor:help}.jupyter-wrapper .bp3-tree .bp3-icon,.jupyter-wrapper .bp3-tree .bp3-icon-standard,.jupyter-wrapper .bp3-tree .bp3-icon-large{color:#5c7080}.jupyter-wrapper .bp3-tree .bp3-icon.bp3-intent-primary,.jupyter-wrapper .bp3-tree .bp3-icon-standard.bp3-intent-primary,.jupyter-wrapper .bp3-tree .bp3-icon-large.bp3-intent-primary{color:#137cbd}.jupyter-wrapper .bp3-tree .bp3-icon.bp3-intent-success,.jupyter-wrapper .bp3-tree .bp3-icon-standard.bp3-intent-success,.jupyter-wrapper .bp3-tree .bp3-icon-large.bp3-intent-success{color:#0f9960}.jupyter-wrapper .bp3-tree .bp3-icon.bp3-intent-warning,.jupyter-wrapper .bp3-tree .bp3-icon-standard.bp3-intent-warning,.jupyter-wrapper .bp3-tree .bp3-icon-large.bp3-intent-warning{color:#d9822b}.jupyter-wrapper .bp3-tree .bp3-icon.bp3-intent-danger,.jupyter-wrapper .bp3-tree .bp3-icon-standard.bp3-intent-danger,.jupyter-wrapper .bp3-tree .bp3-icon-large.bp3-intent-danger{color:#db3737}.jupyter-wrapper .bp3-tree-node-list{margin:0;padding-left:0;list-style:none}.jupyter-wrapper .bp3-tree-root{position:relative;background-color:rgba(0,0,0,0);cursor:default;padding-left:0}.jupyter-wrapper .bp3-tree-node-content-0{padding-left:0px}.jupyter-wrapper .bp3-tree-node-content-1{padding-left:23px}.jupyter-wrapper .bp3-tree-node-content-2{padding-left:46px}.jupyter-wrapper .bp3-tree-node-content-3{padding-left:69px}.jupyter-wrapper .bp3-tree-node-content-4{padding-left:92px}.jupyter-wrapper .bp3-tree-node-content-5{padding-left:115px}.jupyter-wrapper .bp3-tree-node-content-6{padding-left:138px}.jupyter-wrapper .bp3-tree-node-content-7{padding-left:161px}.jupyter-wrapper .bp3-tree-node-content-8{padding-left:184px}.jupyter-wrapper .bp3-tree-node-content-9{padding-left:207px}.jupyter-wrapper .bp3-tree-node-content-10{padding-left:230px}.jupyter-wrapper .bp3-tree-node-content-11{padding-left:253px}.jupyter-wrapper .bp3-tree-node-content-12{padding-left:276px}.jupyter-wrapper .bp3-tree-node-content-13{padding-left:299px}.jupyter-wrapper .bp3-tree-node-content-14{padding-left:322px}.jupyter-wrapper .bp3-tree-node-content-15{padding-left:345px}.jupyter-wrapper .bp3-tree-node-content-16{padding-left:368px}.jupyter-wrapper .bp3-tree-node-content-17{padding-left:391px}.jupyter-wrapper .bp3-tree-node-content-18{padding-left:414px}.jupyter-wrapper .bp3-tree-node-content-19{padding-left:437px}.jupyter-wrapper .bp3-tree-node-content-20{padding-left:460px}.jupyter-wrapper .bp3-tree-node-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:30px;padding-right:5px}.jupyter-wrapper .bp3-tree-node-content:hover{background-color:rgba(191,204,214,.4)}.jupyter-wrapper .bp3-tree-node-caret,.jupyter-wrapper .bp3-tree-node-caret-none{min-width:30px}.jupyter-wrapper .bp3-tree-node-caret{color:#5c7080;-webkit-transform:rotate(0deg);transform:rotate(0deg);cursor:pointer;padding:7px;-webkit-transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9),-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9)}.jupyter-wrapper .bp3-tree-node-caret:hover{color:#182026}.jupyter-wrapper .bp3-dark .bp3-tree-node-caret{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-tree-node-caret:hover{color:#f5f8fa}.jupyter-wrapper .bp3-tree-node-caret.bp3-tree-node-caret-open{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.jupyter-wrapper .bp3-tree-node-caret.bp3-icon-standard::before{content:\"\ue695\"}.jupyter-wrapper .bp3-tree-node-icon{position:relative;margin-right:7px}.jupyter-wrapper .bp3-tree-node-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-tree-node-label span{display:inline}.jupyter-wrapper .bp3-tree-node-secondary-label{padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .bp3-tree-node-secondary-label .bp3-popover-wrapper,.jupyter-wrapper .bp3-tree-node-secondary-label .bp3-popover-target{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.jupyter-wrapper .bp3-tree-node.bp3-disabled .bp3-tree-node-content{background-color:inherit;cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-tree-node.bp3-disabled .bp3-tree-node-caret,.jupyter-wrapper .bp3-tree-node.bp3-disabled .bp3-tree-node-icon{cursor:not-allowed;color:rgba(92,112,128,.6)}.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content{background-color:#137cbd}.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content,.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content .bp3-icon,.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content .bp3-icon-standard,.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content .bp3-icon-large{color:#fff}.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content .bp3-tree-node-caret::before{color:rgba(255,255,255,.7)}.jupyter-wrapper .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content .bp3-tree-node-caret:hover::before{color:#fff}.jupyter-wrapper .bp3-dark .bp3-tree-node-content:hover{background-color:rgba(92,112,128,.3)}.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-standard,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-large{color:#a7b6c2}.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon.bp3-intent-primary,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-primary,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-primary{color:#137cbd}.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon.bp3-intent-success,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-success,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-success{color:#0f9960}.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon.bp3-intent-warning,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-warning,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-warning{color:#d9822b}.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon.bp3-intent-danger,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-danger,.jupyter-wrapper .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-danger{color:#db3737}.jupyter-wrapper .bp3-dark .bp3-tree-node.bp3-tree-node-selected>.bp3-tree-node-content{background-color:#137cbd}.jupyter-wrapper .bp3-omnibar{-webkit-filter:blur(0);filter:blur(0);opacity:1;top:20vh;left:calc(50% - 250px);z-index:21;border-radius:3px;-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);box-shadow:0 0 0 1px rgba(16,22,26,.1),0 4px 8px rgba(16,22,26,.2),0 18px 46px 6px rgba(16,22,26,.2);background-color:#fff;width:500px}.jupyter-wrapper .bp3-omnibar.bp3-overlay-enter,.jupyter-wrapper .bp3-omnibar.bp3-overlay-appear{-webkit-filter:blur(20px);filter:blur(20px);opacity:.2}.jupyter-wrapper .bp3-omnibar.bp3-overlay-enter-active,.jupyter-wrapper .bp3-omnibar.bp3-overlay-appear-active{-webkit-filter:blur(0);filter:blur(0);opacity:1;-webkit-transition-property:opacity,-webkit-filter;transition-property:opacity,-webkit-filter;transition-property:filter,opacity;transition-property:filter,opacity,-webkit-filter;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-omnibar.bp3-overlay-exit{-webkit-filter:blur(0);filter:blur(0);opacity:1}.jupyter-wrapper .bp3-omnibar.bp3-overlay-exit-active{-webkit-filter:blur(20px);filter:blur(20px);opacity:.2;-webkit-transition-property:opacity,-webkit-filter;transition-property:opacity,-webkit-filter;transition-property:filter,opacity;transition-property:filter,opacity,-webkit-filter;-webkit-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);-webkit-transition-delay:0;transition-delay:0}.jupyter-wrapper .bp3-omnibar .bp3-input{border-radius:0;background-color:rgba(0,0,0,0)}.jupyter-wrapper .bp3-omnibar .bp3-input,.jupyter-wrapper .bp3-omnibar .bp3-input:focus{-webkit-box-shadow:none;box-shadow:none}.jupyter-wrapper .bp3-omnibar .bp3-menu{border-radius:0;-webkit-box-shadow:inset 0 1px 0 rgba(16,22,26,.15);box-shadow:inset 0 1px 0 rgba(16,22,26,.15);background-color:rgba(0,0,0,0);max-height:calc(60vh - 40px);overflow:auto}.jupyter-wrapper .bp3-omnibar .bp3-menu:empty{display:none}.jupyter-wrapper .bp3-dark .bp3-omnibar,.jupyter-wrapper .bp3-omnibar.bp3-dark{-webkit-box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);box-shadow:0 0 0 1px rgba(16,22,26,.2),0 4px 8px rgba(16,22,26,.4),0 18px 46px 6px rgba(16,22,26,.4);background-color:#30404d}.jupyter-wrapper .bp3-omnibar-overlay .bp3-overlay-backdrop{background-color:rgba(16,22,26,.2)}.jupyter-wrapper .bp3-select-popover .bp3-popover-content{padding:5px}.jupyter-wrapper .bp3-select-popover .bp3-input-group{margin-bottom:0}.jupyter-wrapper .bp3-select-popover .bp3-menu{max-width:400px;max-height:300px;overflow:auto;padding:0}.jupyter-wrapper .bp3-select-popover .bp3-menu:not(:first-child){padding-top:5px}.jupyter-wrapper .bp3-multi-select{min-width:150px}.jupyter-wrapper .bp3-multi-select-popover .bp3-menu{max-width:400px;max-height:300px;overflow:auto}.jupyter-wrapper .bp3-select-popover .bp3-popover-content{padding:5px}.jupyter-wrapper .bp3-select-popover .bp3-input-group{margin-bottom:0}.jupyter-wrapper .bp3-select-popover .bp3-menu{max-width:400px;max-height:300px;overflow:auto;padding:0}.jupyter-wrapper .bp3-select-popover .bp3-menu:not(:first-child){padding-top:5px}.jupyter-wrapper :root{--jp-icon-add: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-bug: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDhoLTIuODFjLS40NS0uNzgtMS4wNy0xLjQ1LTEuODItMS45NkwxNyA0LjQxIDE1LjU5IDNsLTIuMTcgMi4xN0MxMi45NiA1LjA2IDEyLjQ5IDUgMTIgNWMtLjQ5IDAtLjk2LjA2LTEuNDEuMTdMOC40MSAzIDcgNC40MWwxLjYyIDEuNjNDNy44OCA2LjU1IDcuMjYgNy4yMiA2LjgxIDhINHYyaDIuMDljLS4wNS4zMy0uMDkuNjYtLjA5IDF2MUg0djJoMnYxYzAgLjM0LjA0LjY3LjA5IDFINHYyaDIuODFjMS4wNCAxLjc5IDIuOTcgMyA1LjE5IDNzNC4xNS0xLjIxIDUuMTktM0gyMHYtMmgtMi4wOWMuMDUtLjMzLjA5LS42Ni4wOS0xdi0xaDJ2LTJoLTJ2LTFjMC0uMzQtLjA0LS42Ny0uMDktMUgyMFY4em0tNiA4aC00di0yaDR2MnptMC00aC00di0yaDR2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-build: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE0LjkgMTcuNDVDMTYuMjUgMTcuNDUgMTcuMzUgMTYuMzUgMTcuMzUgMTVDMTcuMzUgMTMuNjUgMTYuMjUgMTIuNTUgMTQuOSAxMi41NUMxMy41NCAxMi41NSAxMi40NSAxMy42NSAxMi40NSAxNUMxMi40NSAxNi4zNSAxMy41NCAxNy40NSAxNC45IDE3LjQ1Wk0yMC4xIDE1LjY4TDIxLjU4IDE2Ljg0QzIxLjcxIDE2Ljk1IDIxLjc1IDE3LjEzIDIxLjY2IDE3LjI5TDIwLjI2IDE5LjcxQzIwLjE3IDE5Ljg2IDIwIDE5LjkyIDE5LjgzIDE5Ljg2TDE4LjA5IDE5LjE2QzE3LjczIDE5LjQ0IDE3LjMzIDE5LjY3IDE2LjkxIDE5Ljg1TDE2LjY0IDIxLjdDMTYuNjIgMjEuODcgMTYuNDcgMjIgMTYuMyAyMkgxMy41QzEzLjMyIDIyIDEzLjE4IDIxLjg3IDEzLjE1IDIxLjdMMTIuODkgMTkuODVDMTIuNDYgMTkuNjcgMTIuMDcgMTkuNDQgMTEuNzEgMTkuMTZMOS45NjAwMiAxOS44NkM5LjgxMDAyIDE5LjkyIDkuNjIwMDIgMTkuODYgOS41NDAwMiAxOS43MUw4LjE0MDAyIDE3LjI5QzguMDUwMDIgMTcuMTMgOC4wOTAwMiAxNi45NSA4LjIyMDAyIDE2Ljg0TDkuNzAwMDIgMTUuNjhMOS42NTAwMSAxNUw5LjcwMDAyIDE0LjMxTDguMjIwMDIgMTMuMTZDOC4wOTAwMiAxMy4wNSA4LjA1MDAyIDEyLjg2IDguMTQwMDIgMTIuNzFMOS41NDAwMiAxMC4yOUM5LjYyMDAyIDEwLjEzIDkuODEwMDIgMTAuMDcgOS45NjAwMiAxMC4xM0wxMS43MSAxMC44NEMxMi4wNyAxMC41NiAxMi40NiAxMC4zMiAxMi44OSAxMC4xNUwxMy4xNSA4LjI4OTk4QzEzLjE4IDguMTI5OTggMTMuMzIgNy45OTk5OCAxMy41IDcuOTk5OThIMTYuM0MxNi40NyA3Ljk5OTk4IDE2LjYyIDguMTI5OTggMTYuNjQgOC4yODk5OEwxNi45MSAxMC4xNUMxNy4zMyAxMC4zMiAxNy43MyAxMC41NiAxOC4wOSAxMC44NEwxOS44MyAxMC4xM0MyMCAxMC4wNyAyMC4xNyAxMC4xMyAyMC4yNiAxMC4yOUwyMS42NiAxMi43MUMyMS43NSAxMi44NiAyMS43MSAxMy4wNSAyMS41OCAxMy4xNkwyMC4xIDE0LjMxTDIwLjE1IDE1TDIwLjEgMTUuNjhaIi8+CiAgICA8cGF0aCBkPSJNNy4zMjk2NiA3LjQ0NDU0QzguMDgzMSA3LjAwOTU0IDguMzM5MzIgNi4wNTMzMiA3LjkwNDMyIDUuMjk5ODhDNy40NjkzMiA0LjU0NjQzIDYuNTA4MSA0LjI4MTU2IDUuNzU0NjYgNC43MTY1NkM1LjM5MTc2IDQuOTI2MDggNS4xMjY5NSA1LjI3MTE4IDUuMDE4NDkgNS42NzU5NEM0LjkxMDA0IDYuMDgwNzEgNC45NjY4MiA2LjUxMTk4IDUuMTc2MzQgNi44NzQ4OEM1LjYxMTM0IDcuNjI4MzIgNi41NzYyMiA3Ljg3OTU0IDcuMzI5NjYgNy40NDQ1NFpNOS42NTcxOCA0Ljc5NTkzTDEwLjg2NzIgNC45NTE3OUMxMC45NjI4IDQuOTc3NDEgMTEuMDQwMiA1LjA3MTMzIDExLjAzODIgNS4xODc5M0wxMS4wMzg4IDYuOTg4OTNDMTEuMDQ1NSA3LjEwMDU0IDEwLjk2MTYgNy4xOTUxOCAxMC44NTUgNy4yMTA1NEw5LjY2MDAxIDcuMzgwODNMOS4yMzkxNSA4LjEzMTg4TDkuNjY5NjEgOS4yNTc0NUM5LjcwNzI5IDkuMzYyNzEgOS42NjkzNCA5LjQ3Njk5IDkuNTc0MDggOS41MzE5OUw4LjAxNTIzIDEwLjQzMkM3LjkxMTMxIDEwLjQ5MiA3Ljc5MzM3IDEwLjQ2NzcgNy43MjEwNSAxMC4zODI0TDYuOTg3NDggOS40MzE4OEw2LjEwOTMxIDkuNDMwODNMNS4zNDcwNCAxMC4zOTA1QzUuMjg5MDkgMTAuNDcwMiA1LjE3MzgzIDEwLjQ5MDUgNS4wNzE4NyAxMC40MzM5TDMuNTEyNDUgOS41MzI5M0MzLjQxMDQ5IDkuNDc2MzMgMy4zNzY0NyA5LjM1NzQxIDMuNDEwNzUgOS4yNTY3OUwzLjg2MzQ3IDguMTQwOTNMMy42MTc0OSA3Ljc3NDg4TDMuNDIzNDcgNy4zNzg4M0wyLjIzMDc1IDcuMjEyOTdDMi4xMjY0NyA3LjE5MjM1IDIuMDQwNDkgNy4xMDM0MiAyLjA0MjQ1IDYuOTg2ODJMMi4wNDE4NyA1LjE4NTgyQzIuMDQzODMgNS4wNjkyMiAyLjExOTA5IDQuOTc5NTggMi4yMTcwNCA0Ljk2OTIyTDMuNDIwNjUgNC43OTM5M0wzLjg2NzQ5IDQuMDI3ODhMMy40MTEwNSAyLjkxNzMxQzMuMzczMzcgMi44MTIwNCAzLjQxMTMxIDIuNjk3NzYgMy41MTUyMyAyLjYzNzc2TDUuMDc0MDggMS43Mzc3NkM1LjE2OTM0IDEuNjgyNzYgNS4yODcyOSAxLjcwNzA0IDUuMzU5NjEgMS43OTIzMUw2LjExOTE1IDIuNzI3ODhMNi45ODAwMSAyLjczODkzTDcuNzI0OTYgMS43ODkyMkM3Ljc5MTU2IDEuNzA0NTggNy45MTU0OCAxLjY3OTIyIDguMDA4NzkgMS43NDA4Mkw5LjU2ODIxIDIuNjQxODJDOS42NzAxNyAyLjY5ODQyIDkuNzEyODUgMi44MTIzNCA5LjY4NzIzIDIuOTA3OTdMOS4yMTcxOCA0LjAzMzgzTDkuNDYzMTYgNC4zOTk4OEw5LjY1NzE4IDQuNzk1OTNaIi8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-caret-down-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iOS45LDEzLjYgMy42LDcuNCA0LjQsNi42IDkuOSwxMi4yIDE1LjQsNi43IDE2LjEsNy40ICIvPgoJPC9nPgo8L3N2Zz4K);--jp-icon-caret-down-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNS45TDksOS43bDMuOC0zLjhsMS4yLDEuMmwtNC45LDVsLTQuOS01TDUuMiw1Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-caret-down: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNy41TDksMTEuMmwzLjgtMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-caret-left: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik0xMC44LDEyLjhMNy4xLDlsMy44LTMuOGwwLDcuNkgxMC44eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-caret-right: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik03LjIsNS4yTDEwLjksOWwtMy44LDMuOFY1LjJINy4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-caret-up-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMTUuNCwxMy4zIDkuOSw3LjcgNC40LDEzLjIgMy42LDEyLjUgOS45LDYuMyAxNi4xLDEyLjYgIi8+Cgk8L2c+Cjwvc3ZnPgo=);--jp-icon-caret-up: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik01LjIsMTAuNUw5LDYuOGwzLjgsMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-case-sensitive: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWFjY2VudDIiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTcuNiw4aDAuOWwzLjUsOGgtMS4xTDEwLDE0SDZsLTAuOSwySDRMNy42LDh6IE04LDkuMUw2LjQsMTNoMy4yTDgsOS4xeiIvPgogICAgPHBhdGggZD0iTTE2LjYsOS44Yy0wLjIsMC4xLTAuNCwwLjEtMC43LDAuMWMtMC4yLDAtMC40LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMi0wLjQtMC4yLTAuNyBjLTAuMywwLjMtMC42LDAuNS0wLjksMC43Yy0wLjMsMC4xLTAuNywwLjItMS4xLDAuMmMtMC4zLDAtMC41LDAtMC43LTAuMWMtMC4yLTAuMS0wLjQtMC4yLTAuNi0wLjNjLTAuMi0wLjEtMC4zLTAuMy0wLjQtMC41IGMtMC4xLTAuMi0wLjEtMC40LTAuMS0wLjdjMC0wLjMsMC4xLTAuNiwwLjItMC44YzAuMS0wLjIsMC4zLTAuNCwwLjQtMC41QzEyLDcsMTIuMiw2LjksMTIuNSw2LjhjMC4yLTAuMSwwLjUtMC4xLDAuNy0wLjIgYzAuMy0wLjEsMC41LTAuMSwwLjctMC4xYzAuMiwwLDAuNC0wLjEsMC42LTAuMWMwLjIsMCwwLjMtMC4xLDAuNC0wLjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjRjMC0xLTEuMS0xLTEuMy0xIGMtMC40LDAtMS40LDAtMS40LDEuMmgtMC45YzAtMC40LDAuMS0wLjcsMC4yLTFjMC4xLTAuMiwwLjMtMC40LDAuNS0wLjZjMC4yLTAuMiwwLjUtMC4zLDAuOC0wLjNDMTMuMyw0LDEzLjYsNCwxMy45LDQgYzAuMywwLDAuNSwwLDAuOCwwLjFjMC4zLDAsMC41LDAuMSwwLjcsMC4yYzAuMiwwLjEsMC40LDAuMywwLjUsMC41QzE2LDUsMTYsNS4yLDE2LDUuNnYyLjljMCwwLjIsMCwwLjQsMCwwLjUgYzAsMC4xLDAuMSwwLjIsMC4zLDAuMmMwLjEsMCwwLjIsMCwwLjMsMFY5Ljh6IE0xNS4yLDYuOWMtMS4yLDAuNi0zLjEsMC4yLTMuMSwxLjRjMCwxLjQsMy4xLDEsMy4xLTAuNVY2Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTYuMTdMNC44MyAxMmwtMS40MiAxLjQxTDkgMTkgMjEgN2wtMS40MS0xLjQxeiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-circle-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-circle: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-clear: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8bWFzayBpZD0iZG9udXRIb2xlIj4KICAgIDxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSJibGFjayIvPgogIDwvbWFzaz4KCiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxyZWN0IGhlaWdodD0iMTgiIHdpZHRoPSIyIiB4PSIxMSIgeT0iMyIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1LCAxMiwgMTIpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgbWFzaz0idXJsKCNkb251dEhvbGUpIi8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-close: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1ub25lIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIGpwLWljb24zLWhvdmVyIiBmaWxsPSJub25lIj4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjExIi8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIGpwLWljb24tYWNjZW50Mi1ob3ZlciIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogIDwvZz4KCiAgPGcgY2xhc3M9ImpwLWljb24tbm9uZSBqcC1pY29uLWJ1c3kiIGZpbGw9Im5vbmUiPgogICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNyIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-console: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwMCAyMDAiPgogIDxnIGNsYXNzPSJqcC1pY29uLWJyYW5kMSBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMjg4RDEiPgogICAgPHBhdGggZD0iTTIwIDE5LjhoMTYwdjE1OS45SDIweiIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNmZmYiPgogICAgPHBhdGggZD0iTTEwNSAxMjcuM2g0MHYxMi44aC00MHpNNTEuMSA3N0w3NCA5OS45bC0yMy4zIDIzLjMgMTAuNSAxMC41IDIzLjMtMjMuM0w5NSA5OS45IDg0LjUgODkuNCA2MS42IDY2LjV6Ii8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-copy: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTExLjksMUgzLjJDMi40LDEsMS43LDEuNywxLjcsMi41djEwLjJoMS41VjIuNWg4LjdWMXogTTE0LjEsMy45aC04Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjV2MTAuMmMwLDAuOCwwLjcsMS41LDEuNSwxLjVoOCBjMC44LDAsMS41LTAuNywxLjUtMS41VjUuNEMxNS41LDQuNiwxNC45LDMuOSwxNC4xLDMuOXogTTE0LjEsMTUuNWgtOFY1LjRoOFYxNS41eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-cut: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkuNjQgNy42NGMuMjMtLjUuMzYtMS4wNS4zNi0xLjY0IDAtMi4yMS0xLjc5LTQtNC00UzIgMy43OSAyIDZzMS43OSA0IDQgNGMuNTkgMCAxLjE0LS4xMyAxLjY0LS4zNkwxMCAxMmwtMi4zNiAyLjM2QzcuMTQgMTQuMTMgNi41OSAxNCA2IDE0Yy0yLjIxIDAtNCAxLjc5LTQgNHMxLjc5IDQgNCA0IDQtMS43OSA0LTRjMC0uNTktLjEzLTEuMTQtLjM2LTEuNjRMMTIgMTRsNyA3aDN2LTFMOS42NCA3LjY0ek02IDhjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTAgMTJjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTYtNy41Yy0uMjggMC0uNS0uMjItLjUtLjVzLjIyLS41LjUtLjUuNS4yMi41LjUtLjIyLjUtLjUuNXpNMTkgM2wtNiA2IDIgMiA3LTdWM3oiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-download: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-edit: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRjLS4zOS0uMzktMS4wMi0uMzktMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3oiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-ellipses: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iNSIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjEyIiByPSIyIi8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-extension: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwLjUgMTFIMTlWN2MwLTEuMS0uOS0yLTItMmgtNFYzLjVDMTMgMi4xMiAxMS44OCAxIDEwLjUgMVM4IDIuMTIgOCAzLjVWNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAydjMuOEgzLjVjMS40OSAwIDIuNyAxLjIxIDIuNyAyLjdzLTEuMjEgMi43LTIuNyAyLjdIMlYyMGMwIDEuMS45IDIgMiAyaDMuOHYtMS41YzAtMS40OSAxLjIxLTIuNyAyLjctMi43IDEuNDkgMCAyLjcgMS4yMSAyLjcgMi43VjIySDE3YzEuMSAwIDItLjkgMi0ydi00aDEuNWMxLjM4IDAgMi41LTEuMTIgMi41LTIuNVMyMS44OCAxMSAyMC41IDExeiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-fast-forward: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTQgMThsOC41LTZMNCA2djEyem05LTEydjEybDguNS02TDEzIDZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);--jp-icon-file-upload: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-file: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuMyA4LjJsLTUuNS01LjVjLS4zLS4zLS43LS41LTEuMi0uNUgzLjljLS44LjEtMS42LjktMS42IDEuOHYxNC4xYzAgLjkuNyAxLjYgMS42IDEuNmgxNC4yYy45IDAgMS42LS43IDEuNi0xLjZWOS40Yy4xLS41LS4xLS45LS40LTEuMnptLTUuOC0zLjNsMy40IDMuNmgtMy40VjQuOXptMy45IDEyLjdINC43Yy0uMSAwLS4yIDAtLjItLjJWNC43YzAtLjIuMS0uMy4yLS4zaDcuMnY0LjRzMCAuOC4zIDEuMWMuMy4zIDEuMS4zIDEuMS4zaDQuM3Y3LjJzLS4xLjItLjIuMnoiLz4KPC9zdmc+Cg==);--jp-icon-filter-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEwIDE4aDR2LTJoLTR2MnpNMyA2djJoMThWNkgzem0zIDdoMTJ2LTJINnYyeiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+Cjwvc3ZnPgo=);--jp-icon-html5: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMDAiIGQ9Ik0xMDguNCAwaDIzdjIyLjhoMjEuMlYwaDIzdjY5aC0yM1Y0NmgtMjF2MjNoLTIzLjJNMjA2IDIzaC0yMC4zVjBoNjMuN3YyM0gyMjl2NDZoLTIzbTUzLjUtNjloMjQuMWwxNC44IDI0LjNMMzEzLjIgMGgyNC4xdjY5aC0yM1YzNC44bC0xNi4xIDI0LjgtMTYuMS0yNC44VjY5aC0yMi42bTg5LjItNjloMjN2NDYuMmgzMi42VjY5aC01NS42Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2U0NGQyNiIgZD0iTTEwNy42IDQ3MWwtMzMtMzcwLjRoMzYyLjhsLTMzIDM3MC4yTDI1NS43IDUxMiIvPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNmMTY1MjkiIGQ9Ik0yNTYgNDgwLjVWMTMxaDE0OC4zTDM3NiA0NDciLz4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNlYmViZWIiIGQ9Ik0xNDIgMTc2LjNoMTE0djQ1LjRoLTY0LjJsNC4yIDQ2LjVoNjB2NDUuM0gxNTQuNG0yIDIyLjhIMjAybDMuMiAzNi4zIDUwLjggMTMuNnY0Ny40bC05My4yLTI2Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIiBkPSJNMzY5LjYgMTc2LjNIMjU1Ljh2NDUuNGgxMDkuNm0tNC4xIDQ2LjVIMjU1Ljh2NDUuNGg1NmwtNS4zIDU5LTUwLjcgMTMuNnY0Ny4ybDkzLTI1LjgiLz4KPC9zdmc+Cg==);--jp-icon-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1icmFuZDQganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNGRkYiIGQ9Ik0yLjIgMi4yaDE3LjV2MTcuNUgyLjJ6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzNGNTFCNSIgZD0iTTIuMiAyLjJ2MTcuNWgxNy41bC4xLTE3LjVIMi4yem0xMi4xIDIuMmMxLjIgMCAyLjIgMSAyLjIgMi4ycy0xIDIuMi0yLjIgMi4yLTIuMi0xLTIuMi0yLjIgMS0yLjIgMi4yLTIuMnpNNC40IDE3LjZsMy4zLTguOCAzLjMgNi42IDIuMi0zLjIgNC40IDUuNEg0LjR6Ii8+Cjwvc3ZnPgo=);--jp-icon-inspector: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxNEg0di00aDExdjR6bTAtNUg0VjloMTF2NHptNSA1aC00VjloNHY5eiIvPgo8L3N2Zz4K);--jp-icon-json: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMSBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNGOUE4MjUiPgogICAgPHBhdGggZD0iTTIwLjIgMTEuOGMtMS42IDAtMS43LjUtMS43IDEgMCAuNC4xLjkuMSAxLjMuMS41LjEuOS4xIDEuMyAwIDEuNy0xLjQgMi4zLTMuNSAyLjNoLS45di0xLjloLjVjMS4xIDAgMS40IDAgMS40LS44IDAtLjMgMC0uNi0uMS0xIDAtLjQtLjEtLjgtLjEtMS4yIDAtMS4zIDAtMS44IDEuMy0yLTEuMy0uMi0xLjMtLjctMS4zLTIgMC0uNC4xLS44LjEtMS4yLjEtLjQuMS0uNy4xLTEgMC0uOC0uNC0uNy0xLjQtLjhoLS41VjQuMWguOWMyLjIgMCAzLjUuNyAzLjUgMi4zIDAgLjQtLjEuOS0uMSAxLjMtLjEuNS0uMS45LS4xIDEuMyAwIC41LjIgMSAxLjcgMXYxLjh6TTEuOCAxMC4xYzEuNiAwIDEuNy0uNSAxLjctMSAwLS40LS4xLS45LS4xLTEuMy0uMS0uNS0uMS0uOS0uMS0xLjMgMC0xLjYgMS40LTIuMyAzLjUtMi4zaC45djEuOWgtLjVjLTEgMC0xLjQgMC0xLjQuOCAwIC4zIDAgLjYuMSAxIDAgLjIuMS42LjEgMSAwIDEuMyAwIDEuOC0xLjMgMkM2IDExLjIgNiAxMS43IDYgMTNjMCAuNC0uMS44LS4xIDEuMi0uMS4zLS4xLjctLjEgMSAwIC44LjMuOCAxLjQuOGguNXYxLjloLS45Yy0yLjEgMC0zLjUtLjYtMy41LTIuMyAwLS40LjEtLjkuMS0xLjMuMS0uNS4xLS45LjEtMS4zIDAtLjUtLjItMS0xLjctMXYtMS45eiIvPgogICAgPGNpcmNsZSBjeD0iMTEiIGN5PSIxMy44IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY3g9IjExIiBjeT0iOC4yIiByPSIyLjEiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-jupyter-favicon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUyIiBoZWlnaHQ9IjE2NSIgdmlld0JveD0iMCAwIDE1MiAxNjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA3ODk0NywgMTEwLjU4MjkyNykiIGQ9Ik03NS45NDIyODQyLDI5LjU4MDQ1NjEgQzQzLjMwMjM5NDcsMjkuNTgwNDU2MSAxNC43OTY3ODMyLDE3LjY1MzQ2MzQgMCwwIEM1LjUxMDgzMjExLDE1Ljg0MDY4MjkgMTUuNzgxNTM4OSwyOS41NjY3NzMyIDI5LjM5MDQ5NDcsMzkuMjc4NDE3MSBDNDIuOTk5Nyw0OC45ODk4NTM3IDU5LjI3MzcsNTQuMjA2NzgwNSA3NS45NjA1Nzg5LDU0LjIwNjc4MDUgQzkyLjY0NzQ1NzksNTQuMjA2NzgwNSAxMDguOTIxNDU4LDQ4Ljk4OTg1MzcgMTIyLjUzMDY2MywzOS4yNzg0MTcxIEMxMzYuMTM5NDUzLDI5LjU2Njc3MzIgMTQ2LjQxMDI4NCwxNS44NDA2ODI5IDE1MS45MjExNTgsMCBDMTM3LjA4Nzg2OCwxNy42NTM0NjM0IDEwOC41ODI1ODksMjkuNTgwNDU2MSA3NS45NDIyODQyLDI5LjU4MDQ1NjEgTDc1Ljk0MjI4NDIsMjkuNTgwNDU2MSBaIiAvPgogICAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMzczNjgsIDAuNzA0ODc4KSIgZD0iTTc1Ljk3ODQ1NzksMjQuNjI2NDA3MyBDMTA4LjYxODc2MywyNC42MjY0MDczIDEzNy4xMjQ0NTgsMzYuNTUzNDQxNSAxNTEuOTIxMTU4LDU0LjIwNjc4MDUgQzE0Ni40MTAyODQsMzguMzY2MjIyIDEzNi4xMzk0NTMsMjQuNjQwMTMxNyAxMjIuNTMwNjYzLDE0LjkyODQ4NzggQzEwOC45MjE0NTgsNS4yMTY4NDM5IDkyLjY0NzQ1NzksMCA3NS45NjA1Nzg5LDAgQzU5LjI3MzcsMCA0Mi45OTk3LDUuMjE2ODQzOSAyOS4zOTA0OTQ3LDE0LjkyODQ4NzggQzE1Ljc4MTUzODksMjQuNjQwMTMxNyA1LjUxMDgzMjExLDM4LjM2NjIyMiAwLDU0LjIwNjc4MDUgQzE0LjgzMzA4MTYsMzYuNTg5OTI5MyA0My4zMzg1Njg0LDI0LjYyNjQwNzMgNzUuOTc4NDU3OSwyNC42MjY0MDczIEw3NS45Nzg0NTc5LDI0LjYyNjQwNzMgWiIgLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-jupyter: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzkiIGhlaWdodD0iNTEiIHZpZXdCb3g9IjAgMCAzOSA1MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYzOCAtMjI4MSkiPgogICAgPGcgY2xhc3M9ImpwLWljb24td2FybjAiIGZpbGw9IiNGMzc3MjYiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5Ljc0IDIzMTEuOTgpIiBkPSJNIDE4LjI2NDYgNy4xMzQxMUMgMTAuNDE0NSA3LjEzNDExIDMuNTU4NzIgNC4yNTc2IDAgMEMgMS4zMjUzOSAzLjgyMDQgMy43OTU1NiA3LjEzMDgxIDcuMDY4NiA5LjQ3MzAzQyAxMC4zNDE3IDExLjgxNTIgMTQuMjU1NyAxMy4wNzM0IDE4LjI2OSAxMy4wNzM0QyAyMi4yODIzIDEzLjA3MzQgMjYuMTk2MyAxMS44MTUyIDI5LjQ2OTQgOS40NzMwM0MgMzIuNzQyNCA3LjEzMDgxIDM1LjIxMjYgMy44MjA0IDM2LjUzOCAwQyAzMi45NzA1IDQuMjU3NiAyNi4xMTQ4IDcuMTM0MTEgMTguMjY0NiA3LjEzNDExWiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5LjczIDIyODUuNDgpIiBkPSJNIDE4LjI3MzMgNS45MzkzMUMgMjYuMTIzNSA1LjkzOTMxIDMyLjk3OTMgOC44MTU4MyAzNi41MzggMTMuMDczNEMgMzUuMjEyNiA5LjI1MzAzIDMyLjc0MjQgNS45NDI2MiAyOS40Njk0IDMuNjAwNEMgMjYuMTk2MyAxLjI1ODE4IDIyLjI4MjMgMCAxOC4yNjkgMEMgMTQuMjU1NyAwIDEwLjM0MTcgMS4yNTgxOCA3LjA2ODYgMy42MDA0QyAzLjc5NTU2IDUuOTQyNjIgMS4zMjUzOSA5LjI1MzAzIDAgMTMuMDczNEMgMy41Njc0NSA4LjgyNDYzIDEwLjQyMzIgNS45MzkzMSAxOC4yNzMzIDUuOTM5MzFaIi8+CiAgICA8L2c+CiAgICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjY5LjMgMjI4MS4zMSkiIGQ9Ik0gNS44OTM1MyAyLjg0NEMgNS45MTg4OSAzLjQzMTY1IDUuNzcwODUgNC4wMTM2NyA1LjQ2ODE1IDQuNTE2NDVDIDUuMTY1NDUgNS4wMTkyMiA0LjcyMTY4IDUuNDIwMTUgNC4xOTI5OSA1LjY2ODUxQyAzLjY2NDMgNS45MTY4OCAzLjA3NDQ0IDYuMDAxNTEgMi40OTgwNSA1LjkxMTcxQyAxLjkyMTY2IDUuODIxOSAxLjM4NDYzIDUuNTYxNyAwLjk1NDg5OCA1LjE2NDAxQyAwLjUyNTE3IDQuNzY2MzMgMC4yMjIwNTYgNC4yNDkwMyAwLjA4MzkwMzcgMy42Nzc1N0MgLTAuMDU0MjQ4MyAzLjEwNjExIC0wLjAyMTIzIDIuNTA2MTcgMC4xNzg3ODEgMS45NTM2NEMgMC4zNzg3OTMgMS40MDExIDAuNzM2ODA5IDAuOTIwODE3IDEuMjA3NTQgMC41NzM1MzhDIDEuNjc4MjYgMC4yMjYyNTkgMi4yNDA1NSAwLjAyNzU5MTkgMi44MjMyNiAwLjAwMjY3MjI5QyAzLjYwMzg5IC0wLjAzMDcxMTUgNC4zNjU3MyAwLjI0OTc4OSA0Ljk0MTQyIDAuNzgyNTUxQyA1LjUxNzExIDEuMzE1MzEgNS44NTk1NiAyLjA1Njc2IDUuODkzNTMgMi44NDRaIi8+CiAgICAgIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MzkuOCAyMzIzLjgxKSIgZD0iTSA3LjQyNzg5IDMuNTgzMzhDIDcuNDYwMDggNC4zMjQzIDcuMjczNTUgNS4wNTgxOSA2Ljg5MTkzIDUuNjkyMTNDIDYuNTEwMzEgNi4zMjYwNyA1Ljk1MDc1IDYuODMxNTYgNS4yODQxMSA3LjE0NDZDIDQuNjE3NDcgNy40NTc2MyAzLjg3MzcxIDcuNTY0MTQgMy4xNDcwMiA3LjQ1MDYzQyAyLjQyMDMyIDcuMzM3MTIgMS43NDMzNiA3LjAwODcgMS4yMDE4NCA2LjUwNjk1QyAwLjY2MDMyOCA2LjAwNTIgMC4yNzg2MSA1LjM1MjY4IDAuMTA1MDE3IDQuNjMyMDJDIC0wLjA2ODU3NTcgMy45MTEzNSAtMC4wMjYyMzYxIDMuMTU0OTQgMC4yMjY2NzUgMi40NTg1NkMgMC40Nzk1ODcgMS43NjIxNyAwLjkzMTY5NyAxLjE1NzEzIDEuNTI1NzYgMC43MjAwMzNDIDIuMTE5ODMgMC4yODI5MzUgMi44MjkxNCAwLjAzMzQzOTUgMy41NjM4OSAwLjAwMzEzMzQ0QyA0LjU0NjY3IC0wLjAzNzQwMzMgNS41MDUyOSAwLjMxNjcwNiA2LjIyOTYxIDAuOTg3ODM1QyA2Ljk1MzkzIDEuNjU4OTYgNy4zODQ4NCAyLjU5MjM1IDcuNDI3ODkgMy41ODMzOEwgNy40Mjc4OSAzLjU4MzM4WiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM4LjM2IDIyODYuMDYpIiBkPSJNIDIuMjc0NzEgNC4zOTYyOUMgMS44NDM2MyA0LjQxNTA4IDEuNDE2NzEgNC4zMDQ0NSAxLjA0Nzk5IDQuMDc4NDNDIDAuNjc5MjY4IDMuODUyNCAwLjM4NTMyOCAzLjUyMTE0IDAuMjAzMzcxIDMuMTI2NTZDIDAuMDIxNDEzNiAyLjczMTk4IC0wLjA0MDM3OTggMi4yOTE4MyAwLjAyNTgxMTYgMS44NjE4MUMgMC4wOTIwMDMxIDEuNDMxOCAwLjI4MzIwNCAxLjAzMTI2IDAuNTc1MjEzIDAuNzEwODgzQyAwLjg2NzIyMiAwLjM5MDUxIDEuMjQ2OTEgMC4xNjQ3MDggMS42NjYyMiAwLjA2MjA1OTJDIDIuMDg1NTMgLTAuMDQwNTg5NyAyLjUyNTYxIC0wLjAxNTQ3MTQgMi45MzA3NiAwLjEzNDIzNUMgMy4zMzU5MSAwLjI4Mzk0MSAzLjY4NzkyIDAuNTUxNTA1IDMuOTQyMjIgMC45MDMwNkMgNC4xOTY1MiAxLjI1NDYyIDQuMzQxNjkgMS42NzQzNiA0LjM1OTM1IDIuMTA5MTZDIDQuMzgyOTkgMi42OTEwNyA0LjE3Njc4IDMuMjU4NjkgMy43ODU5NyAzLjY4NzQ2QyAzLjM5NTE2IDQuMTE2MjQgMi44NTE2NiA0LjM3MTE2IDIuMjc0NzEgNC4zOTYyOUwgMi4yNzQ3MSA0LjM5NjI5WiIvPgogICAgPC9nPgogIDwvZz4+Cjwvc3ZnPgo=);--jp-icon-jupyterlab-wordmark: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIHZpZXdCb3g9IjAgMCAxODYwLjggNDc1Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0RTRFNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MC4xMzY0MDEsIDY0LjI3MTQ5MykiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDU4Ljg3NTU2NikiPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA4NzYwMywgMC4xNDAyOTQpIj4KICAgICAgICA8cGF0aCBkPSJNLTQyNi45LDE2OS44YzAsNDguNy0zLjcsNjQuNy0xMy42LDc2LjRjLTEwLjgsMTAtMjUsMTUuNS0zOS43LDE1LjVsMy43LDI5IGMyMi44LDAuMyw0NC44LTcuOSw2MS45LTIzLjFjMTcuOC0xOC41LDI0LTQ0LjEsMjQtODMuM1YwSC00Mjd2MTcwLjFMLTQyNi45LDE2OS44TC00MjYuOSwxNjkuOHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU1LjA0NTI5NiwgNTYuODM3MTA0KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNTYyNDUzLCAxLjc5OTg0MikiPgogICAgICAgIDxwYXRoIGQ9Ik0tMzEyLDE0OGMwLDIxLDAsMzkuNSwxLjcsNTUuNGgtMzEuOGwtMi4xLTMzLjNoLTAuOGMtNi43LDExLjYtMTYuNCwyMS4zLTI4LDI3LjkgYy0xMS42LDYuNi0yNC44LDEwLTM4LjIsOS44Yy0zMS40LDAtNjktMTcuNy02OS04OVYwaDM2LjR2MTEyLjdjMCwzOC43LDExLjYsNjQuNyw0NC42LDY0LjdjMTAuMy0wLjIsMjAuNC0zLjUsMjguOS05LjQgYzguNS01LjksMTUuMS0xNC4zLDE4LjktMjMuOWMyLjItNi4xLDMuMy0xMi41LDMuMy0xOC45VjAuMmgzNi40VjE0OEgtMzEyTC0zMTIsMTQ4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTAuMDEzMzIyLCA1My40Nzk2MzgpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS43MDY0NTgsIDAuMjMxNDI1KSI+CiAgICAgICAgPHBhdGggZD0iTS00NzguNiw3MS40YzAtMjYtMC44LTQ3LTEuNy02Ni43aDMyLjdsMS43LDM0LjhoMC44YzcuMS0xMi41LDE3LjUtMjIuOCwzMC4xLTI5LjcgYzEyLjUtNywyNi43LTEwLjMsNDEtOS44YzQ4LjMsMCw4NC43LDQxLjcsODQuNywxMDMuM2MwLDczLjEtNDMuNywxMDkuMi05MSwxMDkuMmMtMTIuMSwwLjUtMjQuMi0yLjItMzUtNy44IGMtMTAuOC01LjYtMTkuOS0xMy45LTI2LjYtMjQuMmgtMC44VjI5MWgtMzZ2LTIyMEwtNDc4LjYsNzEuNEwtNDc4LjYsNzEuNHogTS00NDIuNiwxMjUuNmMwLjEsNS4xLDAuNiwxMC4xLDEuNywxNS4xIGMzLDEyLjMsOS45LDIzLjMsMTkuOCwzMS4xYzkuOSw3LjgsMjIuMSwxMi4xLDM0LjcsMTIuMWMzOC41LDAsNjAuNy0zMS45LDYwLjctNzguNWMwLTQwLjctMjEuMS03NS42LTU5LjUtNzUuNiBjLTEyLjksMC40LTI1LjMsNS4xLTM1LjMsMTMuNGMtOS45LDguMy0xNi45LDE5LjctMTkuNiwzMi40Yy0xLjUsNC45LTIuMywxMC0yLjUsMTUuMVYxMjUuNkwtNDQyLjYsMTI1LjZMLTQ0Mi42LDEyNS42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYuNzQwNzI2LCA1Ni44MzcxMDQpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NTEyMjYsIDEuOTg5Mjk5KSI+CiAgICAgICAgPHBhdGggZD0iTS00NDAuOCwwbDQzLjcsMTIwLjFjNC41LDEzLjQsOS41LDI5LjQsMTIuOCw0MS43aDAuOGMzLjctMTIuMiw3LjktMjcuNywxMi44LTQyLjQgbDM5LjctMTE5LjJoMzguNUwtMzQ2LjksMTQ1Yy0yNiw2OS43LTQzLjcsMTA1LjQtNjguNiwxMjcuMmMtMTIuNSwxMS43LTI3LjksMjAtNDQuNiwyMy45bC05LjEtMzEuMSBjMTEuNy0zLjksMjIuNS0xMC4xLDMxLjgtMTguMWMxMy4yLTExLjEsMjMuNy0yNS4yLDMwLjYtNDEuMmMxLjUtMi44LDIuNS01LjcsMi45LTguOGMtMC4zLTMuMy0xLjItNi42LTIuNS05LjdMLTQ4MC4yLDAuMSBoMzkuN0wtNDQwLjgsMEwtNDQwLjgsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODIyLjc0ODEwNCwgMC4wMDAwMDApIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40NjQwNTAsIDAuMzc4OTE0KSI+CiAgICAgICAgPHBhdGggZD0iTS00MTMuNywwdjU4LjNoNTJ2MjguMmgtNTJWMTk2YzAsMjUsNywzOS41LDI3LjMsMzkuNWM3LjEsMC4xLDE0LjItMC43LDIxLjEtMi41IGwxLjcsMjcuN2MtMTAuMywzLjctMjEuMyw1LjQtMzIuMiw1Yy03LjMsMC40LTE0LjYtMC43LTIxLjMtMy40Yy02LjgtMi43LTEyLjktNi44LTE3LjktMTIuMWMtMTAuMy0xMC45LTE0LjEtMjktMTQuMS01Mi45IFY4Ni41aC0zMVY1OC4zaDMxVjkuNkwtNDEzLjcsMEwtNDEzLjcsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTc0LjQzMzI4NiwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTkwMDM0LCAwLjYxMDMzOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDQ1LjgsMTEzYzAuOCw1MCwzMi4yLDcwLjYsNjguNiw3MC42YzE5LDAuNiwzNy45LTMsNTUuMy0xMC41bDYuMiwyNi40IGMtMjAuOSw4LjktNDMuNSwxMy4xLTY2LjIsMTIuNmMtNjEuNSwwLTk4LjMtNDEuMi05OC4zLTEwMi41Qy00ODAuMiw0OC4yLTQ0NC43LDAtMzg2LjUsMGM2NS4yLDAsODIuNyw1OC4zLDgyLjcsOTUuNyBjLTAuMSw1LjgtMC41LDExLjUtMS4yLDE3LjJoLTE0MC42SC00NDUuOEwtNDQ1LjgsMTEzeiBNLTMzOS4yLDg2LjZjMC40LTIzLjUtOS41LTYwLjEtNTAuNC02MC4xIGMtMzYuOCwwLTUyLjgsMzQuNC01NS43LDYwLjFILTMzOS4yTC0zMzkuMiw4Ni42TC0zMzkuMiw4Ni42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAxLjk2MTA1OCwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMTc5NjQwLCAwLjcwNTA2OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDc4LjYsNjhjMC0yMy45LTAuNC00NC41LTEuNy02My40aDMxLjhsMS4yLDM5LjloMS43YzkuMS0yNy4zLDMxLTQ0LjUsNTUuMy00NC41IGMzLjUtMC4xLDcsMC40LDEwLjMsMS4ydjM0LjhjLTQuMS0wLjktOC4yLTEuMy0xMi40LTEuMmMtMjUuNiwwLTQzLjcsMTkuNy00OC43LDQ3LjRjLTEsNS43LTEuNiwxMS41LTEuNywxNy4ydjEwOC4zaC0zNlY2OCBMLTQ3OC42LDY4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCBkPSJNMTM1Mi4zLDMyNi4yaDM3VjI4aC0zN1YzMjYuMnogTTE2MDQuOCwzMjYuMmMtMi41LTEzLjktMy40LTMxLjEtMy40LTQ4Ljd2LTc2IGMwLTQwLjctMTUuMS04My4xLTc3LjMtODMuMWMtMjUuNiwwLTUwLDcuMS02Ni44LDE4LjFsOC40LDI0LjRjMTQuMy05LjIsMzQtMTUuMSw1My0xNS4xYzQxLjYsMCw0Ni4yLDMwLjIsNDYuMiw0N3Y0LjIgYy03OC42LTAuNC0xMjIuMywyNi41LTEyMi4zLDc1LjZjMCwyOS40LDIxLDU4LjQsNjIuMiw1OC40YzI5LDAsNTAuOS0xNC4zLDYyLjItMzAuMmgxLjNsMi45LDI1LjZIMTYwNC44eiBNMTU2NS43LDI1Ny43IGMwLDMuOC0wLjgsOC0yLjEsMTEuOGMtNS45LDE3LjItMjIuNywzNC00OS4yLDM0Yy0xOC45LDAtMzQuOS0xMS4zLTM0LjktMzUuM2MwLTM5LjUsNDUuOC00Ni42LDg2LjItNDUuOFYyNTcuN3ogTTE2OTguNSwzMjYuMiBsMS43LTMzLjZoMS4zYzE1LjEsMjYuOSwzOC43LDM4LjIsNjguMSwzOC4yYzQ1LjQsMCw5MS4yLTM2LjEsOTEuMi0xMDguOGMwLjQtNjEuNy0zNS4zLTEwMy43LTg1LjctMTAzLjcgYy0zMi44LDAtNTYuMywxNC43LTY5LjMsMzcuNGgtMC44VjI4aC0zNi42djI0NS43YzAsMTguMS0wLjgsMzguNi0xLjcsNTIuNUgxNjk4LjV6IE0xNzA0LjgsMjA4LjJjMC01LjksMS4zLTEwLjksMi4xLTE1LjEgYzcuNi0yOC4xLDMxLjEtNDUuNCw1Ni4zLTQ1LjRjMzkuNSwwLDYwLjUsMzQuOSw2MC41LDc1LjZjMCw0Ni42LTIzLjEsNzguMS02MS44LDc4LjFjLTI2LjksMC00OC4zLTE3LjYtNTUuNS00My4zIGMtMC44LTQuMi0xLjctOC44LTEuNy0xMy40VjIwOC4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzYxNjE2MSIgZD0iTTE1IDlIOXY2aDZWOXptLTIgNGgtMnYtMmgydjJ6bTgtMlY5aC0yVjdjMC0xLjEtLjktMi0yLTJoLTJWM2gtMnYyaC0yVjNIOXYySDdjLTEuMSAwLTIgLjktMiAydjJIM3YyaDJ2MkgzdjJoMnYyYzAgMS4xLjkgMiAyIDJoMnYyaDJ2LTJoMnYyaDJ2LTJoMmMxLjEgMCAyLS45IDItMnYtMmgydi0yaC0ydi0yaDJ6bS00IDZIN1Y3aDEwdjEweiIvPgo8L3N2Zz4K);--jp-icon-keyboard: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMTdjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY3YzAtMS4xLS45LTItMi0yem0tOSAzaDJ2MmgtMlY4em0wIDNoMnYyaC0ydi0yek04IDhoMnYySDhWOHptMCAzaDJ2Mkg4di0yem0tMSAySDV2LTJoMnYyem0wLTNINVY4aDJ2MnptOSA3SDh2LTJoOHYyem0wLTRoLTJ2LTJoMnYyem0wLTNoLTJWOGgydjJ6bTMgM2gtMnYtMmgydjJ6bTAtM2gtMlY4aDJ2MnoiLz4KPC9zdmc+Cg==);--jp-icon-launcher: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkgMTlINVY1aDdWM0g1YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiLz4KPC9zdmc+Cg==);--jp-icon-line-form: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IndoaXRlIiBkPSJNNS44OCA0LjEyTDEzLjc2IDEybC03Ljg4IDcuODhMOCAyMmwxMC0xMEw4IDJ6Ii8+Cjwvc3ZnPgo=);--jp-icon-link: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMuOSAxMmMwLTEuNzEgMS4zOS0zLjEgMy4xLTMuMWg0VjdIN2MtMi43NiAwLTUgMi4yNC01IDVzMi4yNCA1IDUgNWg0di0xLjlIN2MtMS43MSAwLTMuMS0xLjM5LTMuMS0zLjF6TTggMTNoOHYtMkg4djJ6bTktNmgtNHYxLjloNGMxLjcxIDAgMy4xIDEuMzkgMy4xIDMuMXMtMS4zOSAzLjEtMy4xIDMuMWgtNFYxN2g0YzIuNzYgMCA1LTIuMjQgNS01cy0yLjI0LTUtNS01eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xOSA1djE0SDVWNWgxNG0xLjEtMkgzLjljLS41IDAtLjkuNC0uOS45djE2LjJjMCAuNC40LjkuOS45aDE2LjJjLjQgMCAuOS0uNS45LS45VjMuOWMwLS41LS41LS45LS45LS45ek0xMSA3aDZ2MmgtNlY3em0wIDRoNnYyaC02di0yem0wIDRoNnYyaC02ek03IDdoMnYySDd6bTAgNGgydjJIN3ptMCA0aDJ2Mkg3eiIvPgo8L3N2Zz4=);--jp-icon-listings-info: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTAuOTc4IDUwLjk3OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTAuOTc4IDUwLjk3ODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggc3R5bGU9ImZpbGw6IzAxMDAwMjsiIGQ9Ik00My41Miw3LjQ1OEMzOC43MTEsMi42NDgsMzIuMzA3LDAsMjUuNDg5LDBDMTguNjcsMCwxMi4yNjYsMi42NDgsNy40NTgsNy40NTgNCgkJCQljLTkuOTQzLDkuOTQxLTkuOTQzLDI2LjExOSwwLDM2LjA2MmM0LjgwOSw0LjgwOSwxMS4yMTIsNy40NTYsMTguMDMxLDcuNDU4YzAsMCwwLjAwMSwwLDAuMDAyLDANCgkJCQljNi44MTYsMCwxMy4yMjEtMi42NDgsMTguMDI5LTcuNDU4YzQuODA5LTQuODA5LDcuNDU3LTExLjIxMiw3LjQ1Ny0xOC4wM0M1MC45NzcsMTguNjcsNDguMzI4LDEyLjI2Niw0My41Miw3LjQ1OHoNCgkJCQkgTTQyLjEwNiw0Mi4xMDVjLTQuNDMyLDQuNDMxLTEwLjMzMiw2Ljg3Mi0xNi42MTUsNi44NzJoLTAuMDAyYy02LjI4NS0wLjAwMS0xMi4xODctMi40NDEtMTYuNjE3LTYuODcyDQoJCQkJYy05LjE2Mi05LjE2My05LjE2Mi0yNC4wNzEsMC0zMy4yMzNDMTMuMzAzLDQuNDQsMTkuMjA0LDIsMjUuNDg5LDJjNi4yODQsMCwxMi4xODYsMi40NCwxNi42MTcsNi44NzINCgkJCQljNC40MzEsNC40MzEsNi44NzEsMTAuMzMyLDYuODcxLDE2LjYxN0M0OC45NzcsMzEuNzcyLDQ2LjUzNiwzNy42NzUsNDIuMTA2LDQyLjEwNXoiLz4NCgkJPC9nPg0KCQk8Zz4NCgkJCTxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMjMuNTc4LDMyLjIxOGMtMC4wMjMtMS43MzQsMC4xNDMtMy4wNTksMC40OTYtMy45NzJjMC4zNTMtMC45MTMsMS4xMS0xLjk5NywyLjI3Mi0zLjI1Mw0KCQkJCWMwLjQ2OC0wLjUzNiwwLjkyMy0xLjA2MiwxLjM2Ny0xLjU3NWMwLjYyNi0wLjc1MywxLjEwNC0xLjQ3OCwxLjQzNi0yLjE3NWMwLjMzMS0wLjcwNywwLjQ5NS0xLjU0MSwwLjQ5NS0yLjUNCgkJCQljMC0xLjA5Ni0wLjI2LTIuMDg4LTAuNzc5LTIuOTc5Yy0wLjU2NS0wLjg3OS0xLjUwMS0xLjMzNi0yLjgwNi0xLjM2OWMtMS44MDIsMC4wNTctMi45ODUsMC42NjctMy41NSwxLjgzMg0KCQkJCWMtMC4zMDEsMC41MzUtMC41MDMsMS4xNDEtMC42MDcsMS44MTRjLTAuMTM5LDAuNzA3LTAuMjA3LDEuNDMyLTAuMjA3LDIuMTc0aC0yLjkzN2MtMC4wOTEtMi4yMDgsMC40MDctNC4xMTQsMS40OTMtNS43MTkNCgkJCQljMS4wNjItMS42NCwyLjg1NS0yLjQ4MSw1LjM3OC0yLjUyN2MyLjE2LDAuMDIzLDMuODc0LDAuNjA4LDUuMTQxLDEuNzU4YzEuMjc4LDEuMTYsMS45MjksMi43NjQsMS45NSw0LjgxMQ0KCQkJCWMwLDEuMTQyLTAuMTM3LDIuMTExLTAuNDEsMi45MTFjLTAuMzA5LDAuODQ1LTAuNzMxLDEuNTkzLTEuMjY4LDIuMjQzYy0wLjQ5MiwwLjY1LTEuMDY4LDEuMzE4LTEuNzMsMi4wMDINCgkJCQljLTAuNjUsMC42OTctMS4zMTMsMS40NzktMS45ODcsMi4zNDZjLTAuMjM5LDAuMzc3LTAuNDI5LDAuNzc3LTAuNTY1LDEuMTk5Yy0wLjE2LDAuOTU5LTAuMjE3LDEuOTUxLTAuMTcxLDIuOTc5DQoJCQkJQzI2LjU4OSwzMi4yMTgsMjMuNTc4LDMyLjIxOCwyMy41NzgsMzIuMjE4eiBNMjMuNTc4LDM4LjIydi0zLjQ4NGgzLjA3NnYzLjQ4NEgyMy41Nzh6Ii8+DQoJCTwvZz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==);--jp-icon-markdown: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjN0IxRkEyIiBkPSJNNSAxNC45aDEybC02LjEgNnptOS40LTYuOGMwLTEuMy0uMS0yLjktLjEtNC41LS40IDEuNC0uOSAyLjktMS4zIDQuM2wtMS4zIDQuM2gtMkw4LjUgNy45Yy0uNC0xLjMtLjctMi45LTEtNC4zLS4xIDEuNi0uMSAzLjItLjIgNC42TDcgMTIuNEg0LjhsLjctMTFoMy4zTDEwIDVjLjQgMS4yLjcgMi43IDEgMy45LjMtMS4yLjctMi42IDEtMy45bDEuMi0zLjdoMy4zbC42IDExaC0yLjRsLS4zLTQuMnoiLz4KPC9zdmc+Cg==);--jp-icon-new-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjExIDAtMS45OS44OS0xLjk5IDJMMiAxOGMwIDEuMTEuODkgMiAyIDJoMTZjMS4xMSAwIDItLjg5IDItMlY4YzAtMS4xMS0uODktMi0yLTJ6bS0xIDhoLTN2M2gtMnYtM2gtM3YtMmgzVjloMnYzaDN2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-not-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI1IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMTkgMTcuMTg0NCAyLjk2OTY4IDE0LjMwMzIgMS44NjA5NCAxMS40NDA5WiIvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24yIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMTU5MiA5LjMyMDMxKSIgZD0iTTcuMzY4NDIgMEwwIDcuMzY0NzkiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMzE1OTIgMTYuNjgzNikgc2NhbGUoMSAtMSkiIGQ9Ik03LjM2ODQyIDBMMCA3LjM2NDc5Ii8+Cjwvc3ZnPgo=);--jp-icon-notebook: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNFRjZDMDAiPgogICAgPHBhdGggZD0iTTE4LjcgMy4zdjE1LjRIMy4zVjMuM2gxNS40bTEuNS0xLjVIMS44djE4LjNoMTguM2wuMS0xOC4zeiIvPgogICAgPHBhdGggZD0iTTE2LjUgMTYuNWwtNS40LTQuMy01LjYgNC4zdi0xMWgxMXoiLz4KICA8L2c+Cjwvc3ZnPgo=);--jp-icon-palette: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE4IDEzVjIwSDRWNkg5LjAyQzkuMDcgNS4yOSA5LjI0IDQuNjIgOS41IDRINEMyLjkgNCAyIDQuOSAyIDZWMjBDMiAyMS4xIDIuOSAyMiA0IDIySDE4QzE5LjEgMjIgMjAgMjEuMSAyMCAyMFYxNUwxOCAxM1pNMTkuMyA4Ljg5QzE5Ljc0IDguMTkgMjAgNy4zOCAyMCA2LjVDMjAgNC4wMSAxNy45OSAyIDE1LjUgMkMxMy4wMSAyIDExIDQuMDEgMTEgNi41QzExIDguOTkgMTMuMDEgMTEgMTUuNDkgMTFDMTYuMzcgMTEgMTcuMTkgMTAuNzQgMTcuODggMTAuM0wyMSAxMy40MkwyMi40MiAxMkwxOS4zIDguODlaTTE1LjUgOUMxNC4xMiA5IDEzIDcuODggMTMgNi41QzEzIDUuMTIgMTQuMTIgNCAxNS41IDRDMTYuODggNCAxOCA1LjEyIDE4IDYuNUMxOCA3Ljg4IDE2Ljg4IDkgMTUuNSA5WiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDZIOS4wMTg5NEM5LjAwNjM5IDYuMTY1MDIgOSA2LjMzMTc2IDkgNi41QzkgOC44MTU3NyAxMC4yMTEgMTAuODQ4NyAxMi4wMzQzIDEySDlWMTRIMTZWMTIuOTgxMUMxNi41NzAzIDEyLjkzNzcgMTcuMTIgMTIuODIwNyAxNy42Mzk2IDEyLjYzOTZMMTggMTNWMjBINFY2Wk04IDhINlYxMEg4VjhaTTYgMTJIOFYxNEg2VjEyWk04IDE2SDZWMThIOFYxNlpNOSAxNkgxNlYxOEg5VjE2WiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-paste: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE5IDJoLTQuMThDMTQuNC44NCAxMy4zIDAgMTIgMGMtMS4zIDAtMi40Ljg0LTIuODIgMkg1Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS03IDBjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXptNyAxOEg1VjRoMnYzaDEwVjRoMnYxNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);--jp-icon-python: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMEQ0N0ExIj4KICAgIDxwYXRoIGQ9Ik0xMS4xIDYuOVY1LjhINi45YzAtLjUgMC0xLjMuMi0xLjYuNC0uNy44LTEuMSAxLjctMS40IDEuNy0uMyAyLjUtLjMgMy45LS4xIDEgLjEgMS45LjkgMS45IDEuOXY0LjJjMCAuNS0uOSAxLjYtMiAxLjZIOC44Yy0xLjUgMC0yLjQgMS40LTIuNCAyLjh2Mi4ySDQuN0MzLjUgMTUuMSAzIDE0IDMgMTMuMVY5Yy0uMS0xIC42LTIgMS44LTIgMS41LS4xIDYuMy0uMSA2LjMtLjF6Ii8+CiAgICA8cGF0aCBkPSJNMTAuOSAxNS4xdjEuMWg0LjJjMCAuNSAwIDEuMy0uMiAxLjYtLjQuNy0uOCAxLjEtMS43IDEuNC0xLjcuMy0yLjUuMy0zLjkuMS0xLS4xLTEuOS0uOS0xLjktMS45di00LjJjMC0uNS45LTEuNiAyLTEuNmgzLjhjMS41IDAgMi40LTEuNCAyLjQtMi44VjYuNmgxLjdDMTguNSA2LjkgMTkgOCAxOSA4LjlWMTNjMCAxLS43IDIuMS0xLjkgMi4xaC02LjJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-r-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjE5NkYzIiBkPSJNNC40IDIuNWMxLjItLjEgMi45LS4zIDQuOS0uMyAyLjUgMCA0LjEuNCA1LjIgMS4zIDEgLjcgMS41IDEuOSAxLjUgMy41IDAgMi0xLjQgMy41LTIuOSA0LjEgMS4yLjQgMS43IDEuNiAyLjIgMyAuNiAxLjkgMSAzLjkgMS4zIDQuNmgtMy44Yy0uMy0uNC0uOC0xLjctMS4yLTMuN3MtMS4yLTIuNi0yLjYtMi42aC0uOXY2LjRINC40VjIuNXptMy43IDYuOWgxLjRjMS45IDAgMi45LS45IDIuOS0yLjNzLTEtMi4zLTIuOC0yLjNjLS43IDAtMS4zIDAtMS42LjJ2NC41aC4xdi0uMXoiLz4KPC9zdmc+Cg==);--jp-icon-react: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMTUwIDE1MCA1NDEuOSAyOTUuMyI+CiAgPGcgY2xhc3M9ImpwLWljb24tYnJhbmQyIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC43IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNC0xNC43IDI4LTMxLjQgNDEuMy00OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-refresh: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTkgMTMuNWMtMi40OSAwLTQuNS0yLjAxLTQuNS00LjVTNi41MSA0LjUgOSA0LjVjMS4yNCAwIDIuMzYuNTIgMy4xNyAxLjMzTDEwIDhoNVYzbC0xLjc2IDEuNzZDMTIuMTUgMy42OCAxMC42NiAzIDkgMyA1LjY5IDMgMy4wMSA1LjY5IDMuMDEgOVM1LjY5IDE1IDkgMTVjMi45NyAwIDUuNDMtMi4xNiA1LjktNWgtMS41MmMtLjQ2IDItMi4yNCAzLjUtNC4zOCAzLjV6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);--jp-icon-regex: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiBmaWxsPSIjRkZGIj4KICAgIDxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjUuNSIgY3k9IjE0LjUiIHI9IjEuNSIvPgogICAgPHJlY3QgeD0iMTIiIHk9IjQiIGNsYXNzPSJzdDIiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiLz4KICAgIDxyZWN0IHg9IjguNSIgeT0iNy41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiAtMC41IDAuNSAwLjg2NiAtMi4zMjU1IDcuMzIxOSkiIGNsYXNzPSJzdDIiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiLz4KICAgIDxyZWN0IHg9IjEyIiB5PSI0IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjUgLTAuODY2IDAuODY2IDAuNSAtMC42Nzc5IDE0LjgyNTIpIiBjbGFzcz0ic3QyIiB3aWR0aD0iMSIgaGVpZ2h0PSI4Ii8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-run: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPgogICAgPC9nPgo8L3N2Zz4K);--jp-icon-running: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-save: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPgogICAgPC9nPgo8L3N2Zz4K);--jp-icon-search: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-settings: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVBLjQ4OC40ODggMCAwMDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==);--jp-icon-spreadsheet: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNENBRjUwIiBkPSJNMi4yIDIuMnYxNy42aDE3LjZWMi4ySDIuMnptMTUuNCA3LjdoLTUuNVY0LjRoNS41djUuNXpNOS45IDQuNHY1LjVINC40VjQuNGg1LjV6bS01LjUgNy43aDUuNXY1LjVINC40di01LjV6bTcuNyA1LjV2LTUuNWg1LjV2NS41aC01LjV6Ii8+Cjwvc3ZnPgo=);--jp-icon-stop: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);--jp-icon-tab: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIxIDNIM2MtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxOGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE2SDNWNWgxMHY0aDh2MTB6Ii8+CiAgPC9nPgo8L3N2Zz4K);--jp-icon-terminal: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiA+CiAgICA8cmVjdCBjbGFzcz0ianAtaWNvbjIganAtaWNvbi1zZWxlY3RhYmxlIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMikiIGZpbGw9IiMzMzMzMzMiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uLWFjY2VudDIganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGQ9Ik01LjA1NjY0IDguNzYxNzJDNS4wNTY2NCA4LjU5NzY2IDUuMDMxMjUgOC40NTMxMiA0Ljk4MDQ3IDguMzI4MTJDNC45MzM1OSA4LjE5OTIyIDQuODU1NDcgOC4wODIwMyA0Ljc0NjA5IDcuOTc2NTZDNC42NDA2MiA3Ljg3MTA5IDQuNSA3Ljc3NTM5IDQuMzI0MjIgNy42ODk0NUM0LjE1MjM0IDcuNTk5NjEgMy45NDMzNiA3LjUxMTcyIDMuNjk3MjcgNy40MjU3OEMzLjMwMjczIDcuMjg1MTYgMi45NDMzNiA3LjEzNjcyIDIuNjE5MTQgNi45ODA0N0MyLjI5NDkyIDYuODI0MjIgMi4wMTc1OCA2LjY0MjU4IDEuNzg3MTEgNi40MzU1NUMxLjU2MDU1IDYuMjI4NTIgMS4zODQ3NyA1Ljk4ODI4IDEuMjU5NzcgNS43MTQ4NEMxLjEzNDc3IDUuNDM3NSAxLjA3MjI3IDUuMTA5MzggMS4wNzIyNyA0LjczMDQ3QzEuMDcyMjcgNC4zOTg0NCAxLjEyODkxIDQuMDk1NyAxLjI0MjE5IDMuODIyMjdDMS4zNTU0NyAzLjU0NDkyIDEuNTE1NjIgMy4zMDQ2OSAxLjcyMjY2IDMuMTAxNTZDMS45Mjk2OSAyLjg5ODQ0IDIuMTc5NjkgMi43MzQzNyAyLjQ3MjY2IDIuNjA5MzhDMi43NjU2MiAyLjQ4NDM4IDMuMDkxOCAyLjQwNDMgMy40NTExNyAyLjM2OTE0VjEuMTA5MzhINC4zODg2N1YyLjM4MDg2QzQuNzQwMjMgMi40Mjc3MyA1LjA1NjY0IDIuNTIzNDQgNS4zMzc4OSAyLjY2Nzk3QzUuNjE5MTQgMi44MTI1IDUuODU3NDIgMy4wMDE5NSA2LjA1MjczIDMuMjM2MzNDNi4yNTE5NSAzLjQ2NjggNi40MDQzIDMuNzQwMjMgNi41MDk3NyA0LjA1NjY0QzYuNjE5MTQgNC4zNjkxNCA2LjY3MzgzIDQuNzIwNyA2LjY3MzgzIDUuMTExMzNINS4wNDQ5MkM1LjA0NDkyIDQuNjM4NjcgNC45Mzc1IDQuMjgxMjUgNC43MjI2NiA0LjAzOTA2QzQuNTA3ODEgMy43OTI5NyA0LjIxNjggMy42Njk5MiAzLjg0OTYxIDMuNjY5OTJDMy42NTAzOSAzLjY2OTkyIDMuNDc2NTYgMy42OTcyNyAzLjMyODEyIDMuNzUxOTVDMy4xODM1OSAzLjgwMjczIDMuMDY0NDUgMy44NzY5NSAyLjk3MDcgMy45NzQ2MUMyLjg3Njk1IDQuMDY4MzYgMi44MDY2NCA0LjE3OTY5IDIuNzU5NzcgNC4zMDg1OUMyLjcxNjggNC40Mzc1IDIuNjk1MzEgNC41NzgxMiAyLjY5NTMxIDQuNzMwNDdDMi42OTUzMSA0Ljg4MjgxIDIuNzE2OCA1LjAxOTUzIDIuNzU5NzcgNS4xNDA2MkMyLjgwNjY0IDUuMjU3ODEgMi44ODI4MSA1LjM2NzE5IDIuOTg4MjggNS40Njg3NUMzLjA5NzY2IDUuNTcwMzEgMy4yNDAyMyA1LjY2Nzk3IDMuNDE2MDIgNS43NjE3MkMzLjU5MTggNS44NTE1NiAzLjgxMDU1IDUuOTQzMzYgNC4wNzIyNyA2LjAzNzExQzQuNDY2OCA2LjE4NTU1IDQuODI0MjIgNi4zMzk4NCA1LjE0NDUzIDYuNUM1LjQ2NDg0IDYuNjU2MjUgNS43MzgyOCA2LjgzOTg0IDUuOTY0ODQgNy4wNTA3OEM2LjE5NTMxIDcuMjU3ODEgNi4zNzEwOSA3LjUgNi40OTIxOSA3Ljc3NzM0QzYuNjE3MTkgOC4wNTA3OCA2LjY3OTY5IDguMzc1IDYuNjc5NjkgOC43NUM2LjY3OTY5IDkuMDkzNzUgNi42MjMwNSA5LjQwNDMgNi41MDk3NyA5LjY4MTY0QzYuMzk2NDggOS45NTUwOCA2LjIzNDM4IDEwLjE5MTQgNi4wMjM0NCAxMC4zOTA2QzUuODEyNSAxMC41ODk4IDUuNTU4NTkgMTAuNzUgNS4yNjE3MiAxMC44NzExQzQuOTY0ODQgMTAuOTg4MyA0LjYzMjgxIDExLjA2NDUgNC4yNjU2MiAxMS4wOTk2VjEyLjI0OEgzLjMzMzk4VjExLjA5OTZDMy4wMDE5NSAxMS4wNjg0IDIuNjc5NjkgMTAuOTk2MSAyLjM2NzE5IDEwLjg4MjhDMi4wNTQ2OSAxMC43NjU2IDEuNzc3MzQgMTAuNTk3NyAxLjUzNTE2IDEwLjM3ODlDMS4yOTY4OCAxMC4xNjAyIDEuMTA1NDcgOS44ODQ3NyAwLjk2MDkzOCA5LjU1MjczQzAuODE2NDA2IDkuMjE2OCAwLjc0NDE0MSA4LjgxNDQ1IDAuNzQ0MTQxIDguMzQ1N0gyLjM3ODkxQzIuMzc4OTEgOC42MjY5NSAyLjQxOTkyIDguODYzMjggMi41MDE5NSA5LjA1NDY5QzIuNTgzOTggOS4yNDIxOSAyLjY4OTQ1IDkuMzkyNTggMi44MTgzNiA5LjUwNTg2QzIuOTUxMTcgOS42MTUyMyAzLjEwMTU2IDkuNjkzMzYgMy4yNjk1MyA5Ljc0MDIzQzMuNDM3NSA5Ljc4NzExIDMuNjA5MzggOS44MTA1NSAzLjc4NTE2IDkuODEwNTVDNC4yMDMxMiA5LjgxMDU1IDQuNTE5NTMgOS43MTI4OSA0LjczNDM4IDkuNTE3NThDNC45NDkyMiA5LjMyMjI3IDUuMDU2NjQgOS4wNzAzMSA1LjA1NjY0IDguNzYxNzJaTTEzLjQxOCAxMi4yNzE1SDguMDc0MjJWMTFIMTMuNDE4VjEyLjI3MTVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzLjk1MjY0IDYpIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K);--jp-icon-text-editor: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTUgMTVIM3YyaDEydi0yem0wLThIM3YyaDEyVjd6TTMgMTNoMTh2LTJIM3Yyem0wIDhoMTh2LTJIM3Yyek0zIDN2MmgxOFYzSDN6Ii8+Cjwvc3ZnPgo=);--jp-icon-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMiAxNy4xODQ0IDIuOTY5NjggMTQuMzAzMiAxLjg2MDk0IDExLjQ0MDlaIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiMzMzMzMzMiIHN0cm9rZT0iIzMzMzMzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCA5Ljg2NzE5KSIgZD0iTTIuODYwMTUgNC44NjUzNUwwLjcyNjU0OSAyLjk5OTU5TDAgMy42MzA0NUwyLjg2MDE1IDYuMTMxNTdMOCAwLjYzMDg3Mkw3LjI3ODU3IDBMMi44NjAxNSA0Ljg2NTM1WiIvPgo8L3N2Zz4K);--jp-icon-undo: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-vega: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbjEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjEyMTIxIj4KICAgIDxwYXRoIGQ9Ik0xMC42IDUuNGwyLjItMy4ySDIuMnY3LjNsNC02LjZ6Ii8+CiAgICA8cGF0aCBkPSJNMTUuOCAyLjJsLTQuNCA2LjZMNyA2LjNsLTQuOCA4djUuNWgxNy42VjIuMmgtNHptLTcgMTUuNEg1LjV2LTQuNGgzLjN2NC40em00LjQgMEg5LjhWOS44aDMuNHY3Ljh6bTQuNCAwaC0zLjRWNi41aDMuNHYxMS4xeiIvPgogIDwvZz4KPC9zdmc+Cg==);--jp-icon-yaml: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1jb250cmFzdDIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjRDgxQjYwIj4KICAgIDxwYXRoIGQ9Ik03LjIgMTguNnYtNS40TDMgNS42aDMuM2wxLjQgMy4xYy4zLjkuNiAxLjYgMSAyLjUuMy0uOC42LTEuNiAxLTIuNWwxLjQtMy4xaDMuNGwtNC40IDcuNnY1LjVsLTIuOS0uMXoiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxNi41IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxMSIgcj0iMi4xIi8+CiAgPC9nPgo8L3N2Zz4K)}.jupyter-wrapper .jp-AddIcon{background-image:var(--jp-icon-add)}.jupyter-wrapper .jp-BugIcon{background-image:var(--jp-icon-bug)}.jupyter-wrapper .jp-BuildIcon{background-image:var(--jp-icon-build)}.jupyter-wrapper .jp-CaretDownEmptyIcon{background-image:var(--jp-icon-caret-down-empty)}.jupyter-wrapper .jp-CaretDownEmptyThinIcon{background-image:var(--jp-icon-caret-down-empty-thin)}.jupyter-wrapper .jp-CaretDownIcon{background-image:var(--jp-icon-caret-down)}.jupyter-wrapper .jp-CaretLeftIcon{background-image:var(--jp-icon-caret-left)}.jupyter-wrapper .jp-CaretRightIcon{background-image:var(--jp-icon-caret-right)}.jupyter-wrapper .jp-CaretUpEmptyThinIcon{background-image:var(--jp-icon-caret-up-empty-thin)}.jupyter-wrapper .jp-CaretUpIcon{background-image:var(--jp-icon-caret-up)}.jupyter-wrapper .jp-CaseSensitiveIcon{background-image:var(--jp-icon-case-sensitive)}.jupyter-wrapper .jp-CheckIcon{background-image:var(--jp-icon-check)}.jupyter-wrapper .jp-CircleEmptyIcon{background-image:var(--jp-icon-circle-empty)}.jupyter-wrapper .jp-CircleIcon{background-image:var(--jp-icon-circle)}.jupyter-wrapper .jp-ClearIcon{background-image:var(--jp-icon-clear)}.jupyter-wrapper .jp-CloseIcon{background-image:var(--jp-icon-close)}.jupyter-wrapper .jp-ConsoleIcon{background-image:var(--jp-icon-console)}.jupyter-wrapper .jp-CopyIcon{background-image:var(--jp-icon-copy)}.jupyter-wrapper .jp-CutIcon{background-image:var(--jp-icon-cut)}.jupyter-wrapper .jp-DownloadIcon{background-image:var(--jp-icon-download)}.jupyter-wrapper .jp-EditIcon{background-image:var(--jp-icon-edit)}.jupyter-wrapper .jp-EllipsesIcon{background-image:var(--jp-icon-ellipses)}.jupyter-wrapper .jp-ExtensionIcon{background-image:var(--jp-icon-extension)}.jupyter-wrapper .jp-FastForwardIcon{background-image:var(--jp-icon-fast-forward)}.jupyter-wrapper .jp-FileIcon{background-image:var(--jp-icon-file)}.jupyter-wrapper .jp-FileUploadIcon{background-image:var(--jp-icon-file-upload)}.jupyter-wrapper .jp-FilterListIcon{background-image:var(--jp-icon-filter-list)}.jupyter-wrapper .jp-FolderIcon{background-image:var(--jp-icon-folder)}.jupyter-wrapper .jp-Html5Icon{background-image:var(--jp-icon-html5)}.jupyter-wrapper .jp-ImageIcon{background-image:var(--jp-icon-image)}.jupyter-wrapper .jp-InspectorIcon{background-image:var(--jp-icon-inspector)}.jupyter-wrapper .jp-JsonIcon{background-image:var(--jp-icon-json)}.jupyter-wrapper .jp-JupyterFaviconIcon{background-image:var(--jp-icon-jupyter-favicon)}.jupyter-wrapper .jp-JupyterIcon{background-image:var(--jp-icon-jupyter)}.jupyter-wrapper .jp-JupyterlabWordmarkIcon{background-image:var(--jp-icon-jupyterlab-wordmark)}.jupyter-wrapper .jp-KernelIcon{background-image:var(--jp-icon-kernel)}.jupyter-wrapper .jp-KeyboardIcon{background-image:var(--jp-icon-keyboard)}.jupyter-wrapper .jp-LauncherIcon{background-image:var(--jp-icon-launcher)}.jupyter-wrapper .jp-LineFormIcon{background-image:var(--jp-icon-line-form)}.jupyter-wrapper .jp-LinkIcon{background-image:var(--jp-icon-link)}.jupyter-wrapper .jp-ListIcon{background-image:var(--jp-icon-list)}.jupyter-wrapper .jp-ListingsInfoIcon{background-image:var(--jp-icon-listings-info)}.jupyter-wrapper .jp-MarkdownIcon{background-image:var(--jp-icon-markdown)}.jupyter-wrapper .jp-NewFolderIcon{background-image:var(--jp-icon-new-folder)}.jupyter-wrapper .jp-NotTrustedIcon{background-image:var(--jp-icon-not-trusted)}.jupyter-wrapper .jp-NotebookIcon{background-image:var(--jp-icon-notebook)}.jupyter-wrapper .jp-PaletteIcon{background-image:var(--jp-icon-palette)}.jupyter-wrapper .jp-PasteIcon{background-image:var(--jp-icon-paste)}.jupyter-wrapper .jp-PythonIcon{background-image:var(--jp-icon-python)}.jupyter-wrapper .jp-RKernelIcon{background-image:var(--jp-icon-r-kernel)}.jupyter-wrapper .jp-ReactIcon{background-image:var(--jp-icon-react)}.jupyter-wrapper .jp-RefreshIcon{background-image:var(--jp-icon-refresh)}.jupyter-wrapper .jp-RegexIcon{background-image:var(--jp-icon-regex)}.jupyter-wrapper .jp-RunIcon{background-image:var(--jp-icon-run)}.jupyter-wrapper .jp-RunningIcon{background-image:var(--jp-icon-running)}.jupyter-wrapper .jp-SaveIcon{background-image:var(--jp-icon-save)}.jupyter-wrapper .jp-SearchIcon{background-image:var(--jp-icon-search)}.jupyter-wrapper .jp-SettingsIcon{background-image:var(--jp-icon-settings)}.jupyter-wrapper .jp-SpreadsheetIcon{background-image:var(--jp-icon-spreadsheet)}.jupyter-wrapper .jp-StopIcon{background-image:var(--jp-icon-stop)}.jupyter-wrapper .jp-TabIcon{background-image:var(--jp-icon-tab)}.jupyter-wrapper .jp-TerminalIcon{background-image:var(--jp-icon-terminal)}.jupyter-wrapper .jp-TextEditorIcon{background-image:var(--jp-icon-text-editor)}.jupyter-wrapper .jp-TrustedIcon{background-image:var(--jp-icon-trusted)}.jupyter-wrapper .jp-UndoIcon{background-image:var(--jp-icon-undo)}.jupyter-wrapper .jp-VegaIcon{background-image:var(--jp-icon-vega)}.jupyter-wrapper .jp-YamlIcon{background-image:var(--jp-icon-yaml)}.jupyter-wrapper :root{--jp-icon-search-white: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==)}.jupyter-wrapper .jp-Icon,.jupyter-wrapper .jp-MaterialIcon{background-position:center;background-repeat:no-repeat;background-size:16px;min-width:16px;min-height:16px}.jupyter-wrapper .jp-Icon-cover{background-position:center;background-repeat:no-repeat;background-size:cover}.jupyter-wrapper .jp-Icon-16{background-size:16px;min-width:16px;min-height:16px}.jupyter-wrapper .jp-Icon-18{background-size:18px;min-width:18px;min-height:18px}.jupyter-wrapper .jp-Icon-20{background-size:20px;min-width:20px;min-height:20px}.jupyter-wrapper .jp-icon0[fill]{fill:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon1[fill]{fill:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon2[fill]{fill:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon3[fill]{fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon4[fill]{fill:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon0[stroke]{stroke:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon1[stroke]{stroke:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon2[stroke]{stroke:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon3[stroke]{stroke:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon4[stroke]{stroke:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon-accent0[fill]{fill:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-accent1[fill]{fill:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-accent2[fill]{fill:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-accent3[fill]{fill:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-accent4[fill]{fill:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-accent0[stroke]{stroke:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-accent1[stroke]{stroke:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-accent2[stroke]{stroke:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-accent3[stroke]{stroke:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-accent4[stroke]{stroke:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-none[fill]{fill:none}.jupyter-wrapper .jp-icon-none[stroke]{stroke:none}.jupyter-wrapper .jp-icon-brand0[fill]{fill:var(--jp-brand-color0)}.jupyter-wrapper .jp-icon-brand1[fill]{fill:var(--jp-brand-color1)}.jupyter-wrapper .jp-icon-brand2[fill]{fill:var(--jp-brand-color2)}.jupyter-wrapper .jp-icon-brand3[fill]{fill:var(--jp-brand-color3)}.jupyter-wrapper .jp-icon-brand4[fill]{fill:var(--jp-brand-color4)}.jupyter-wrapper .jp-icon-brand0[stroke]{stroke:var(--jp-brand-color0)}.jupyter-wrapper .jp-icon-brand1[stroke]{stroke:var(--jp-brand-color1)}.jupyter-wrapper .jp-icon-brand2[stroke]{stroke:var(--jp-brand-color2)}.jupyter-wrapper .jp-icon-brand3[stroke]{stroke:var(--jp-brand-color3)}.jupyter-wrapper .jp-icon-brand4[stroke]{stroke:var(--jp-brand-color4)}.jupyter-wrapper .jp-icon-warn0[fill]{fill:var(--jp-warn-color0)}.jupyter-wrapper .jp-icon-warn1[fill]{fill:var(--jp-warn-color1)}.jupyter-wrapper .jp-icon-warn2[fill]{fill:var(--jp-warn-color2)}.jupyter-wrapper .jp-icon-warn3[fill]{fill:var(--jp-warn-color3)}.jupyter-wrapper .jp-icon-warn0[stroke]{stroke:var(--jp-warn-color0)}.jupyter-wrapper .jp-icon-warn1[stroke]{stroke:var(--jp-warn-color1)}.jupyter-wrapper .jp-icon-warn2[stroke]{stroke:var(--jp-warn-color2)}.jupyter-wrapper .jp-icon-warn3[stroke]{stroke:var(--jp-warn-color3)}.jupyter-wrapper .jp-icon-contrast0[fill]{fill:var(--jp-icon-contrast-color0)}.jupyter-wrapper .jp-icon-contrast1[fill]{fill:var(--jp-icon-contrast-color1)}.jupyter-wrapper .jp-icon-contrast2[fill]{fill:var(--jp-icon-contrast-color2)}.jupyter-wrapper .jp-icon-contrast3[fill]{fill:var(--jp-icon-contrast-color3)}.jupyter-wrapper .jp-icon-contrast0[stroke]{stroke:var(--jp-icon-contrast-color0)}.jupyter-wrapper .jp-icon-contrast1[stroke]{stroke:var(--jp-icon-contrast-color1)}.jupyter-wrapper .jp-icon-contrast2[stroke]{stroke:var(--jp-icon-contrast-color2)}.jupyter-wrapper .jp-icon-contrast3[stroke]{stroke:var(--jp-icon-contrast-color3)}.jupyter-wrapper #setting-editor .jp-PluginList .jp-mod-selected .jp-icon-selectable[fill]{fill:#fff}.jupyter-wrapper #setting-editor .jp-PluginList .jp-mod-selected .jp-icon-selectable-inverse[fill]{fill:var(--jp-brand-color1)}.jupyter-wrapper .jp-DirListing-item.jp-mod-selected .jp-icon-selectable[fill]{fill:#fff}.jupyter-wrapper .jp-DirListing-item.jp-mod-selected .jp-icon-selectable-inverse[fill]{fill:var(--jp-brand-color1)}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-active .jp-icon-selectable[fill]{fill:#fff}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-active .jp-icon-selectable-inverse[fill]{fill:var(--jp-brand-color1)}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-active .jp-icon-hover :hover .jp-icon-selectable[fill]{fill:var(--jp-brand-color1)}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-active .jp-icon-hover :hover .jp-icon-selectable-inverse[fill]{fill:#fff}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-dirty>.lm-TabBar-tabCloseIcon>:not(:hover)>.jp-icon3[fill]{fill:none}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-dirty>.lm-TabBar-tabCloseIcon>:not(:hover)>.jp-icon-busy[fill]{fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper #tab-manager .lm-TabBar-tab.jp-mod-dirty.jp-mod-active>.lm-TabBar-tabCloseIcon>:not(:hover)>.jp-icon-busy[fill]{fill:#fff}.jupyter-wrapper .lm-DockPanel-tabBar .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty>.lm-TabBar-tabCloseIcon>:not(:hover)>.jp-icon3[fill]{fill:none}.jupyter-wrapper .lm-DockPanel-tabBar .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty>.lm-TabBar-tabCloseIcon>:not(:hover)>.jp-icon-busy[fill]{fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper #jp-main-statusbar .jp-mod-selected .jp-icon-selectable[fill]{fill:#fff}.jupyter-wrapper #jp-main-statusbar .jp-mod-selected .jp-icon-selectable-inverse[fill]{fill:var(--jp-brand-color1)}.jupyter-wrapper :root{--jp-warn-color0: var(--md-orange-700)}.jupyter-wrapper .jp-DragIcon{margin-right:4px}.jupyter-wrapper .jp-icon-alt .jp-icon0[fill]{fill:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-alt .jp-icon1[fill]{fill:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-alt .jp-icon2[fill]{fill:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-alt .jp-icon3[fill]{fill:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-alt .jp-icon4[fill]{fill:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-alt .jp-icon0[stroke]{stroke:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-alt .jp-icon1[stroke]{stroke:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-alt .jp-icon2[stroke]{stroke:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-alt .jp-icon3[stroke]{stroke:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-alt .jp-icon4[stroke]{stroke:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent0[fill]{fill:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent1[fill]{fill:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent2[fill]{fill:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent3[fill]{fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent4[fill]{fill:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent0[stroke]{stroke:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent1[stroke]{stroke:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent2[stroke]{stroke:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent3[stroke]{stroke:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon-alt .jp-icon-accent4[stroke]{stroke:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon-hoverShow:not(:hover) svg{display:none !important}.jupyter-wrapper .jp-icon-hover :hover .jp-icon0-hover[fill]{fill:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon1-hover[fill]{fill:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon2-hover[fill]{fill:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon3-hover[fill]{fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon4-hover[fill]{fill:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon0-hover[stroke]{stroke:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon1-hover[stroke]{stroke:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon2-hover[stroke]{stroke:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon3-hover[stroke]{stroke:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon4-hover[stroke]{stroke:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent0-hover[fill]{fill:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent1-hover[fill]{fill:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent2-hover[fill]{fill:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent3-hover[fill]{fill:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent4-hover[fill]{fill:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent0-hover[stroke]{stroke:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent1-hover[stroke]{stroke:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent2-hover[stroke]{stroke:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent3-hover[stroke]{stroke:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-accent4-hover[stroke]{stroke:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-none-hover[fill]{fill:none}.jupyter-wrapper .jp-icon-hover :hover .jp-icon-none-hover[stroke]{stroke:none}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[fill]{fill:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[fill]{fill:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[fill]{fill:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[fill]{fill:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[fill]{fill:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[stroke]{stroke:var(--jp-layout-color0)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[stroke]{stroke:var(--jp-layout-color1)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[stroke]{stroke:var(--jp-layout-color2)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[stroke]{stroke:var(--jp-layout-color3)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[stroke]{stroke:var(--jp-layout-color4)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[fill]{fill:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[fill]{fill:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[fill]{fill:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[fill]{fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[fill]{fill:var(--jp-inverse-layout-color4)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[stroke]{stroke:var(--jp-inverse-layout-color0)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[stroke]{stroke:var(--jp-inverse-layout-color1)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[stroke]{stroke:var(--jp-inverse-layout-color2)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[stroke]{stroke:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[stroke]{stroke:var(--jp-inverse-layout-color4)}.jupyter-wrapper :focus{outline:unset;outline-offset:unset;-moz-outline-radius:unset}.jupyter-wrapper .jp-Button{border-radius:var(--jp-border-radius);padding:0px 12px;font-size:var(--jp-ui-font-size1)}.jupyter-wrapper button.jp-Button.bp3-button.bp3-minimal:hover{background-color:var(--jp-layout-color2)}.jupyter-wrapper .jp-Button.minimal{color:unset !important}.jupyter-wrapper .jp-Button.jp-ToolbarButtonComponent{text-transform:none}.jupyter-wrapper .jp-InputGroup input{box-sizing:border-box;border-radius:0;background-color:rgba(0,0,0,0);color:var(--jp-ui-font-color0);box-shadow:inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color)}.jupyter-wrapper .jp-InputGroup input:focus{box-shadow:inset 0 0 0 var(--jp-border-width) var(--jp-input-active-box-shadow-color),inset 0 0 0 3px var(--jp-input-active-box-shadow-color)}.jupyter-wrapper .jp-InputGroup input::placeholder,.jupyter-wrapper input::placeholder{color:var(--jp-ui-font-color3)}.jupyter-wrapper .jp-BPIcon{display:inline-block;vertical-align:middle;margin:auto}.jupyter-wrapper .bp3-icon.jp-BPIcon>svg:not([fill]){fill:var(--jp-inverse-layout-color3)}.jupyter-wrapper .jp-InputGroupAction{padding:6px}.jupyter-wrapper .jp-HTMLSelect.jp-DefaultStyle select{background-color:initial;border:none;border-radius:0;box-shadow:none;color:var(--jp-ui-font-color0);display:block;font-size:var(--jp-ui-font-size1);height:24px;line-height:14px;padding:0 25px 0 10px;text-align:left;-moz-appearance:none;-webkit-appearance:none}.jupyter-wrapper .jp-HTMLSelect.jp-DefaultStyle select:hover,.jupyter-wrapper .jp-HTMLSelect.jp-DefaultStyle select>option{background-color:var(--jp-layout-color2);color:var(--jp-ui-font-color0)}.jupyter-wrapper select{box-sizing:border-box}.jupyter-wrapper .jp-Collapse{display:flex;flex-direction:column;align-items:stretch;border-top:1px solid var(--jp-border-color2);border-bottom:1px solid var(--jp-border-color2)}.jupyter-wrapper .jp-Collapse-header{padding:1px 12px;color:var(--jp-ui-font-color1);background-color:var(--jp-layout-color1);font-size:var(--jp-ui-font-size2)}.jupyter-wrapper .jp-Collapse-header:hover{background-color:var(--jp-layout-color2)}.jupyter-wrapper .jp-Collapse-contents{padding:0px 12px 0px 12px;background-color:var(--jp-layout-color1);color:var(--jp-ui-font-color1);overflow:auto}.jupyter-wrapper :root{--jp-private-commandpalette-search-height: 28px}.jupyter-wrapper .lm-CommandPalette{padding-bottom:0px;color:var(--jp-ui-font-color1);background:var(--jp-layout-color1);font-size:var(--jp-ui-font-size1)}.jupyter-wrapper .lm-CommandPalette-search{padding:4px;background-color:var(--jp-layout-color1);z-index:2}.jupyter-wrapper .lm-CommandPalette-wrapper{overflow:overlay;padding:0px 9px;background-color:var(--jp-input-active-background);height:30px;box-shadow:inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color)}.jupyter-wrapper .lm-CommandPalette.lm-mod-focused .lm-CommandPalette-wrapper{box-shadow:inset 0 0 0 1px var(--jp-input-active-box-shadow-color),inset 0 0 0 3px var(--jp-input-active-box-shadow-color)}.jupyter-wrapper .lm-CommandPalette-wrapper::after{content:\" \";color:#fff;background-color:var(--jp-brand-color1);position:absolute;top:4px;right:4px;height:30px;width:10px;padding:0px 10px;background-image:var(--jp-icon-search-white);background-size:20px;background-repeat:no-repeat;background-position:center}.jupyter-wrapper .lm-CommandPalette-input{background:rgba(0,0,0,0);width:calc(100% - 18px);float:left;border:none;outline:none;font-size:var(--jp-ui-font-size1);color:var(--jp-ui-font-color0);line-height:var(--jp-private-commandpalette-search-height)}.jupyter-wrapper .lm-CommandPalette-input::-webkit-input-placeholder,.jupyter-wrapper .lm-CommandPalette-input::-moz-placeholder,.jupyter-wrapper .lm-CommandPalette-input:-ms-input-placeholder{color:var(--jp-ui-font-color3);font-size:var(--jp-ui-font-size1)}.jupyter-wrapper .lm-CommandPalette-header:first-child{margin-top:0px}.jupyter-wrapper .lm-CommandPalette-header{border-bottom:solid var(--jp-border-width) var(--jp-border-color2);color:var(--jp-ui-font-color1);cursor:pointer;display:flex;font-size:var(--jp-ui-font-size0);font-weight:600;letter-spacing:1px;margin-top:8px;padding:8px 0 8px 12px;text-transform:uppercase}.jupyter-wrapper .lm-CommandPalette-header.lm-mod-active{background:var(--jp-layout-color2)}.jupyter-wrapper .lm-CommandPalette-header>mark{background-color:rgba(0,0,0,0);font-weight:bold;color:var(--jp-ui-font-color1)}.jupyter-wrapper .lm-CommandPalette-item{padding:4px 12px 4px 4px;color:var(--jp-ui-font-color1);font-size:var(--jp-ui-font-size1);font-weight:400;display:flex}.jupyter-wrapper .lm-CommandPalette-item.lm-mod-disabled{color:var(--jp-ui-font-color3)}.jupyter-wrapper .lm-CommandPalette-item.lm-mod-active{background:var(--jp-layout-color3)}.jupyter-wrapper .lm-CommandPalette-item.lm-mod-active:hover:not(.lm-mod-disabled){background:var(--jp-layout-color4)}.jupyter-wrapper .lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled){background:var(--jp-layout-color2)}.jupyter-wrapper .lm-CommandPalette-itemContent{overflow:hidden}.jupyter-wrapper .lm-CommandPalette-itemLabel>mark{color:var(--jp-ui-font-color0);background-color:rgba(0,0,0,0);font-weight:bold}.jupyter-wrapper .lm-CommandPalette-item.lm-mod-disabled mark{color:var(--jp-ui-font-color3)}.jupyter-wrapper .lm-CommandPalette-item .lm-CommandPalette-itemIcon{margin:0 4px 0 0;position:relative;width:16px;top:2px;flex:0 0 auto}.jupyter-wrapper .lm-CommandPalette-item.lm-mod-disabled .lm-CommandPalette-itemIcon{opacity:.4}.jupyter-wrapper .lm-CommandPalette-item .lm-CommandPalette-itemShortcut{flex:0 0 auto}.jupyter-wrapper .lm-CommandPalette-itemCaption{display:none}.jupyter-wrapper .lm-CommandPalette-content{background-color:var(--jp-layout-color1)}.jupyter-wrapper .lm-CommandPalette-content:empty:after{content:\"No results\";margin:auto;margin-top:20px;width:100px;display:block;font-size:var(--jp-ui-font-size2);font-family:var(--jp-ui-font-family);font-weight:lighter}.jupyter-wrapper .lm-CommandPalette-emptyMessage{text-align:center;margin-top:24px;line-height:1.32;padding:0px 8px;color:var(--jp-content-font-color3)}.jupyter-wrapper .jp-Dialog{position:absolute;z-index:10000;display:flex;flex-direction:column;align-items:center;justify-content:center;top:0px;left:0px;margin:0;padding:0;width:100%;height:100%;background:var(--jp-dialog-background)}.jupyter-wrapper .jp-Dialog-content{display:flex;flex-direction:column;margin-left:auto;margin-right:auto;background:var(--jp-layout-color1);padding:24px;padding-bottom:12px;min-width:300px;min-height:150px;max-width:1000px;max-height:500px;box-sizing:border-box;box-shadow:var(--jp-elevation-z20);word-wrap:break-word;border-radius:var(--jp-border-radius);font-size:var(--jp-ui-font-size1);color:var(--jp-ui-font-color1)}.jupyter-wrapper .jp-Dialog-button{overflow:visible}.jupyter-wrapper button.jp-Dialog-button:focus{outline:1px solid var(--jp-brand-color1);outline-offset:4px;-moz-outline-radius:0px}.jupyter-wrapper button.jp-Dialog-button:focus::-moz-focus-inner{border:0}.jupyter-wrapper .jp-Dialog-header{flex:0 0 auto;padding-bottom:12px;font-size:var(--jp-ui-font-size3);font-weight:400;color:var(--jp-ui-font-color0)}.jupyter-wrapper .jp-Dialog-body{display:flex;flex-direction:column;flex:1 1 auto;font-size:var(--jp-ui-font-size1);background:var(--jp-layout-color1);overflow:auto}.jupyter-wrapper .jp-Dialog-footer{display:flex;flex-direction:row;justify-content:flex-end;flex:0 0 auto;margin-left:-12px;margin-right:-12px;padding:12px}.jupyter-wrapper .jp-Dialog-title{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.jupyter-wrapper .jp-Dialog-body>.jp-select-wrapper{width:100%}.jupyter-wrapper .jp-Dialog-body>button{padding:0px 16px}.jupyter-wrapper .jp-Dialog-body>label{line-height:1.4;color:var(--jp-ui-font-color0)}.jupyter-wrapper .jp-Dialog-button.jp-mod-styled:not(:last-child){margin-right:12px}.jupyter-wrapper .jp-HoverBox{position:fixed}.jupyter-wrapper .jp-HoverBox.jp-mod-outofview{display:none}.jupyter-wrapper .jp-IFrame{width:100%;height:100%}.jupyter-wrapper .jp-IFrame>iframe{border:none}.jupyter-wrapper body.lm-mod-override-cursor .jp-IFrame{position:relative}.jupyter-wrapper body.lm-mod-override-cursor .jp-IFrame:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0)}.jupyter-wrapper .jp-MainAreaWidget>:focus{outline:none}.jupyter-wrapper :root{--md-red-50: #ffebee;--md-red-100: #ffcdd2;--md-red-200: #ef9a9a;--md-red-300: #e57373;--md-red-400: #ef5350;--md-red-500: #f44336;--md-red-600: #e53935;--md-red-700: #d32f2f;--md-red-800: #c62828;--md-red-900: #b71c1c;--md-red-A100: #ff8a80;--md-red-A200: #ff5252;--md-red-A400: #ff1744;--md-red-A700: #d50000;--md-pink-50: #fce4ec;--md-pink-100: #f8bbd0;--md-pink-200: #f48fb1;--md-pink-300: #f06292;--md-pink-400: #ec407a;--md-pink-500: #e91e63;--md-pink-600: #d81b60;--md-pink-700: #c2185b;--md-pink-800: #ad1457;--md-pink-900: #880e4f;--md-pink-A100: #ff80ab;--md-pink-A200: #ff4081;--md-pink-A400: #f50057;--md-pink-A700: #c51162;--md-purple-50: #f3e5f5;--md-purple-100: #e1bee7;--md-purple-200: #ce93d8;--md-purple-300: #ba68c8;--md-purple-400: #ab47bc;--md-purple-500: #9c27b0;--md-purple-600: #8e24aa;--md-purple-700: #7b1fa2;--md-purple-800: #6a1b9a;--md-purple-900: #4a148c;--md-purple-A100: #ea80fc;--md-purple-A200: #e040fb;--md-purple-A400: #d500f9;--md-purple-A700: #aa00ff;--md-deep-purple-50: #ede7f6;--md-deep-purple-100: #d1c4e9;--md-deep-purple-200: #b39ddb;--md-deep-purple-300: #9575cd;--md-deep-purple-400: #7e57c2;--md-deep-purple-500: #673ab7;--md-deep-purple-600: #5e35b1;--md-deep-purple-700: #512da8;--md-deep-purple-800: #4527a0;--md-deep-purple-900: #311b92;--md-deep-purple-A100: #b388ff;--md-deep-purple-A200: #7c4dff;--md-deep-purple-A400: #651fff;--md-deep-purple-A700: #6200ea;--md-indigo-50: #e8eaf6;--md-indigo-100: #c5cae9;--md-indigo-200: #9fa8da;--md-indigo-300: #7986cb;--md-indigo-400: #5c6bc0;--md-indigo-500: #3f51b5;--md-indigo-600: #3949ab;--md-indigo-700: #303f9f;--md-indigo-800: #283593;--md-indigo-900: #1a237e;--md-indigo-A100: #8c9eff;--md-indigo-A200: #536dfe;--md-indigo-A400: #3d5afe;--md-indigo-A700: #304ffe;--md-blue-50: #e3f2fd;--md-blue-100: #bbdefb;--md-blue-200: #90caf9;--md-blue-300: #64b5f6;--md-blue-400: #42a5f5;--md-blue-500: #2196f3;--md-blue-600: #1e88e5;--md-blue-700: #1976d2;--md-blue-800: #1565c0;--md-blue-900: #0d47a1;--md-blue-A100: #82b1ff;--md-blue-A200: #448aff;--md-blue-A400: #2979ff;--md-blue-A700: #2962ff;--md-light-blue-50: #e1f5fe;--md-light-blue-100: #b3e5fc;--md-light-blue-200: #81d4fa;--md-light-blue-300: #4fc3f7;--md-light-blue-400: #29b6f6;--md-light-blue-500: #03a9f4;--md-light-blue-600: #039be5;--md-light-blue-700: #0288d1;--md-light-blue-800: #0277bd;--md-light-blue-900: #01579b;--md-light-blue-A100: #80d8ff;--md-light-blue-A200: #40c4ff;--md-light-blue-A400: #00b0ff;--md-light-blue-A700: #0091ea;--md-cyan-50: #e0f7fa;--md-cyan-100: #b2ebf2;--md-cyan-200: #80deea;--md-cyan-300: #4dd0e1;--md-cyan-400: #26c6da;--md-cyan-500: #00bcd4;--md-cyan-600: #00acc1;--md-cyan-700: #0097a7;--md-cyan-800: #00838f;--md-cyan-900: #006064;--md-cyan-A100: #84ffff;--md-cyan-A200: #18ffff;--md-cyan-A400: #00e5ff;--md-cyan-A700: #00b8d4;--md-teal-50: #e0f2f1;--md-teal-100: #b2dfdb;--md-teal-200: #80cbc4;--md-teal-300: #4db6ac;--md-teal-400: #26a69a;--md-teal-500: #009688;--md-teal-600: #00897b;--md-teal-700: #00796b;--md-teal-800: #00695c;--md-teal-900: #004d40;--md-teal-A100: #a7ffeb;--md-teal-A200: #64ffda;--md-teal-A400: #1de9b6;--md-teal-A700: #00bfa5;--md-green-50: #e8f5e9;--md-green-100: #c8e6c9;--md-green-200: #a5d6a7;--md-green-300: #81c784;--md-green-400: #66bb6a;--md-green-500: #4caf50;--md-green-600: #43a047;--md-green-700: #388e3c;--md-green-800: #2e7d32;--md-green-900: #1b5e20;--md-green-A100: #b9f6ca;--md-green-A200: #69f0ae;--md-green-A400: #00e676;--md-green-A700: #00c853;--md-light-green-50: #f1f8e9;--md-light-green-100: #dcedc8;--md-light-green-200: #c5e1a5;--md-light-green-300: #aed581;--md-light-green-400: #9ccc65;--md-light-green-500: #8bc34a;--md-light-green-600: #7cb342;--md-light-green-700: #689f38;--md-light-green-800: #558b2f;--md-light-green-900: #33691e;--md-light-green-A100: #ccff90;--md-light-green-A200: #b2ff59;--md-light-green-A400: #76ff03;--md-light-green-A700: #64dd17;--md-lime-50: #f9fbe7;--md-lime-100: #f0f4c3;--md-lime-200: #e6ee9c;--md-lime-300: #dce775;--md-lime-400: #d4e157;--md-lime-500: #cddc39;--md-lime-600: #c0ca33;--md-lime-700: #afb42b;--md-lime-800: #9e9d24;--md-lime-900: #827717;--md-lime-A100: #f4ff81;--md-lime-A200: #eeff41;--md-lime-A400: #c6ff00;--md-lime-A700: #aeea00;--md-yellow-50: #fffde7;--md-yellow-100: #fff9c4;--md-yellow-200: #fff59d;--md-yellow-300: #fff176;--md-yellow-400: #ffee58;--md-yellow-500: #ffeb3b;--md-yellow-600: #fdd835;--md-yellow-700: #fbc02d;--md-yellow-800: #f9a825;--md-yellow-900: #f57f17;--md-yellow-A100: #ffff8d;--md-yellow-A200: #ffff00;--md-yellow-A400: #ffea00;--md-yellow-A700: #ffd600;--md-amber-50: #fff8e1;--md-amber-100: #ffecb3;--md-amber-200: #ffe082;--md-amber-300: #ffd54f;--md-amber-400: #ffca28;--md-amber-500: #ffc107;--md-amber-600: #ffb300;--md-amber-700: #ffa000;--md-amber-800: #ff8f00;--md-amber-900: #ff6f00;--md-amber-A100: #ffe57f;--md-amber-A200: #ffd740;--md-amber-A400: #ffc400;--md-amber-A700: #ffab00;--md-orange-50: #fff3e0;--md-orange-100: #ffe0b2;--md-orange-200: #ffcc80;--md-orange-300: #ffb74d;--md-orange-400: #ffa726;--md-orange-500: #ff9800;--md-orange-600: #fb8c00;--md-orange-700: #f57c00;--md-orange-800: #ef6c00;--md-orange-900: #e65100;--md-orange-A100: #ffd180;--md-orange-A200: #ffab40;--md-orange-A400: #ff9100;--md-orange-A700: #ff6d00;--md-deep-orange-50: #fbe9e7;--md-deep-orange-100: #ffccbc;--md-deep-orange-200: #ffab91;--md-deep-orange-300: #ff8a65;--md-deep-orange-400: #ff7043;--md-deep-orange-500: #ff5722;--md-deep-orange-600: #f4511e;--md-deep-orange-700: #e64a19;--md-deep-orange-800: #d84315;--md-deep-orange-900: #bf360c;--md-deep-orange-A100: #ff9e80;--md-deep-orange-A200: #ff6e40;--md-deep-orange-A400: #ff3d00;--md-deep-orange-A700: #dd2c00;--md-brown-50: #efebe9;--md-brown-100: #d7ccc8;--md-brown-200: #bcaaa4;--md-brown-300: #a1887f;--md-brown-400: #8d6e63;--md-brown-500: #795548;--md-brown-600: #6d4c41;--md-brown-700: #5d4037;--md-brown-800: #4e342e;--md-brown-900: #3e2723;--md-grey-50: #fafafa;--md-grey-100: #f5f5f5;--md-grey-200: #eeeeee;--md-grey-300: #e0e0e0;--md-grey-400: #bdbdbd;--md-grey-500: #9e9e9e;--md-grey-600: #757575;--md-grey-700: #616161;--md-grey-800: #424242;--md-grey-900: #212121;--md-blue-grey-50: #eceff1;--md-blue-grey-100: #cfd8dc;--md-blue-grey-200: #b0bec5;--md-blue-grey-300: #90a4ae;--md-blue-grey-400: #78909c;--md-blue-grey-500: #607d8b;--md-blue-grey-600: #546e7a;--md-blue-grey-700: #455a64;--md-blue-grey-800: #37474f;--md-blue-grey-900: #263238}.jupyter-wrapper .jp-Spinner{position:absolute;display:flex;justify-content:center;align-items:center;z-index:10;left:0;top:0;width:100%;height:100%;background:var(--jp-layout-color0);outline:none}.jupyter-wrapper .jp-SpinnerContent{font-size:10px;margin:50px auto;text-indent:-9999em;width:3em;height:3em;border-radius:50%;background:var(--jp-brand-color3);background:linear-gradient(to right, #f37626 10%, rgba(255, 255, 255, 0) 42%);position:relative;animation:load3 1s infinite linear,fadeIn 1s}.jupyter-wrapper .jp-SpinnerContent:before{width:50%;height:50%;background:#f37626;border-radius:100% 0 0 0;position:absolute;top:0;left:0;content:\"\"}.jupyter-wrapper .jp-SpinnerContent:after{background:var(--jp-layout-color0);width:75%;height:75%;border-radius:50%;content:\"\";margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes load3{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.jupyter-wrapper button.jp-mod-styled{font-size:var(--jp-ui-font-size1);color:var(--jp-ui-font-color0);border:none;box-sizing:border-box;text-align:center;line-height:32px;height:32px;padding:0px 12px;letter-spacing:.8px;outline:none;appearance:none;-webkit-appearance:none;-moz-appearance:none}.jupyter-wrapper input.jp-mod-styled{background:var(--jp-input-background);height:28px;box-sizing:border-box;border:var(--jp-border-width) solid var(--jp-border-color1);padding-left:7px;padding-right:7px;font-size:var(--jp-ui-font-size2);color:var(--jp-ui-font-color0);outline:none;appearance:none;-webkit-appearance:none;-moz-appearance:none}.jupyter-wrapper input.jp-mod-styled:focus{border:var(--jp-border-width) solid var(--md-blue-500);box-shadow:inset 0 0 4px var(--md-blue-300)}.jupyter-wrapper .jp-select-wrapper{display:flex;position:relative;flex-direction:column;padding:1px;background-color:var(--jp-layout-color1);height:28px;box-sizing:border-box;margin-bottom:12px}.jupyter-wrapper .jp-select-wrapper.jp-mod-focused select.jp-mod-styled{border:var(--jp-border-width) solid var(--jp-input-active-border-color);box-shadow:var(--jp-input-box-shadow);background-color:var(--jp-input-active-background)}.jupyter-wrapper select.jp-mod-styled:hover{background-color:var(--jp-layout-color1);cursor:pointer;color:var(--jp-ui-font-color0);background-color:var(--jp-input-hover-background);box-shadow:inset 0 0px 1px rgba(0,0,0,.5)}.jupyter-wrapper select.jp-mod-styled{flex:1 1 auto;height:32px;width:100%;font-size:var(--jp-ui-font-size2);background:var(--jp-input-background);color:var(--jp-ui-font-color0);padding:0 25px 0 8px;border:var(--jp-border-width) solid var(--jp-input-border-color);border-radius:0px;outline:none;appearance:none;-webkit-appearance:none;-moz-appearance:none}.jupyter-wrapper :root{--jp-private-toolbar-height: calc( 28px + var(--jp-border-width) )}.jupyter-wrapper .jp-Toolbar{color:var(--jp-ui-font-color1);flex:0 0 auto;display:flex;flex-direction:row;border-bottom:var(--jp-border-width) solid var(--jp-toolbar-border-color);box-shadow:var(--jp-toolbar-box-shadow);background:var(--jp-toolbar-background);min-height:var(--jp-toolbar-micro-height);padding:2px;z-index:1}.jupyter-wrapper .jp-Toolbar>.jp-Toolbar-item.jp-Toolbar-spacer{flex-grow:1;flex-shrink:1}.jupyter-wrapper .jp-Toolbar-item.jp-Toolbar-kernelStatus{display:inline-block;width:32px;background-repeat:no-repeat;background-position:center;background-size:16px}.jupyter-wrapper .jp-Toolbar>.jp-Toolbar-item{flex:0 0 auto;display:flex;padding-left:1px;padding-right:1px;font-size:var(--jp-ui-font-size1);line-height:var(--jp-private-toolbar-height);height:100%}.jupyter-wrapper div.jp-ToolbarButton{color:rgba(0,0,0,0);border:none;box-sizing:border-box;outline:none;appearance:none;-webkit-appearance:none;-moz-appearance:none;padding:0px;margin:0px}.jupyter-wrapper button.jp-ToolbarButtonComponent{background:var(--jp-layout-color1);border:none;box-sizing:border-box;outline:none;appearance:none;-webkit-appearance:none;-moz-appearance:none;padding:0px 6px;margin:0px;height:24px;border-radius:var(--jp-border-radius);display:flex;align-items:center;text-align:center;font-size:14px;min-width:unset;min-height:unset}.jupyter-wrapper button.jp-ToolbarButtonComponent:disabled{opacity:.4}.jupyter-wrapper button.jp-ToolbarButtonComponent span{padding:0px;flex:0 0 auto}.jupyter-wrapper button.jp-ToolbarButtonComponent .jp-ToolbarButtonComponent-label{font-size:var(--jp-ui-font-size1);line-height:100%;padding-left:2px;color:var(--jp-ui-font-color1)}.jupyter-wrapper body.p-mod-override-cursor *,.jupyter-wrapper body.lm-mod-override-cursor *{cursor:inherit !important}.jupyter-wrapper .jp-JSONEditor{display:flex;flex-direction:column;width:100%}.jupyter-wrapper .jp-JSONEditor-host{flex:1 1 auto;border:var(--jp-border-width) solid var(--jp-input-border-color);border-radius:0px;background:var(--jp-layout-color0);min-height:50px;padding:1px}.jupyter-wrapper .jp-JSONEditor.jp-mod-error .jp-JSONEditor-host{border-color:red;outline-color:red}.jupyter-wrapper .jp-JSONEditor-header{display:flex;flex:1 0 auto;padding:0 0 0 12px}.jupyter-wrapper .jp-JSONEditor-header label{flex:0 0 auto}.jupyter-wrapper .jp-JSONEditor-commitButton{height:16px;width:16px;background-size:18px;background-repeat:no-repeat;background-position:center}.jupyter-wrapper .jp-JSONEditor-host.jp-mod-focused{background-color:var(--jp-input-active-background);border:1px solid var(--jp-input-active-border-color);box-shadow:var(--jp-input-box-shadow)}.jupyter-wrapper .jp-Editor.jp-mod-dropTarget{border:var(--jp-border-width) solid var(--jp-input-active-border-color);box-shadow:var(--jp-input-box-shadow)}.jupyter-wrapper .CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.jupyter-wrapper .CodeMirror-lines{padding:4px 0}.jupyter-wrapper .CodeMirror pre.CodeMirror-line,.jupyter-wrapper .CodeMirror pre.CodeMirror-line-like{padding:0 4px}.jupyter-wrapper .CodeMirror-scrollbar-filler,.jupyter-wrapper .CodeMirror-gutter-filler{background-color:#fff}.jupyter-wrapper .CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.jupyter-wrapper .CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.jupyter-wrapper .CodeMirror-guttermarker{color:#000}.jupyter-wrapper .CodeMirror-guttermarker-subtle{color:#999}.jupyter-wrapper .CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.jupyter-wrapper .CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.jupyter-wrapper .cm-fat-cursor .CodeMirror-cursor{width:auto;border:0 !important;background:#7e7}.jupyter-wrapper .cm-fat-cursor div.CodeMirror-cursors{z-index:1}.jupyter-wrapper .cm-fat-cursor-mark{background-color:rgba(20,255,20,.5);-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite}.jupyter-wrapper .cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:rgba(0,0,0,0)}}@-webkit-keyframes blink{50%{background-color:rgba(0,0,0,0)}}@keyframes blink{50%{background-color:rgba(0,0,0,0)}}.jupyter-wrapper .cm-tab{display:inline-block;text-decoration:inherit}.jupyter-wrapper .CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:0;overflow:hidden}.jupyter-wrapper .CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.jupyter-wrapper .cm-s-default .cm-header{color:blue}.jupyter-wrapper .cm-s-default .cm-quote{color:#090}.jupyter-wrapper .cm-negative{color:#d44}.jupyter-wrapper .cm-positive{color:#292}.jupyter-wrapper .cm-header,.jupyter-wrapper .cm-strong{font-weight:bold}.jupyter-wrapper .cm-em{font-style:italic}.jupyter-wrapper .cm-link{text-decoration:underline}.jupyter-wrapper .cm-strikethrough{text-decoration:line-through}.jupyter-wrapper .cm-s-default .cm-keyword{color:#708}.jupyter-wrapper .cm-s-default .cm-atom{color:#219}.jupyter-wrapper .cm-s-default .cm-number{color:#164}.jupyter-wrapper .cm-s-default .cm-def{color:blue}.jupyter-wrapper .cm-s-default .cm-variable-2{color:#05a}.jupyter-wrapper .cm-s-default .cm-variable-3,.jupyter-wrapper .cm-s-default .cm-type{color:#085}.jupyter-wrapper .cm-s-default .cm-comment{color:#a50}.jupyter-wrapper .cm-s-default .cm-string{color:#a11}.jupyter-wrapper .cm-s-default .cm-string-2{color:#f50}.jupyter-wrapper .cm-s-default .cm-meta{color:#555}.jupyter-wrapper .cm-s-default .cm-qualifier{color:#555}.jupyter-wrapper .cm-s-default .cm-builtin{color:#30a}.jupyter-wrapper .cm-s-default .cm-bracket{color:#997}.jupyter-wrapper .cm-s-default .cm-tag{color:#170}.jupyter-wrapper .cm-s-default .cm-attribute{color:#00c}.jupyter-wrapper .cm-s-default .cm-hr{color:#999}.jupyter-wrapper .cm-s-default .cm-link{color:#00c}.jupyter-wrapper .cm-s-default .cm-error{color:red}.jupyter-wrapper .cm-invalidchar{color:red}.jupyter-wrapper .CodeMirror-composing{border-bottom:2px solid}.jupyter-wrapper div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}.jupyter-wrapper div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.jupyter-wrapper .CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.jupyter-wrapper .CodeMirror-activeline-background{background:#e8f2ff}.jupyter-wrapper .CodeMirror{position:relative;overflow:hidden;background:#fff}.jupyter-wrapper .CodeMirror-scroll{overflow:scroll !important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.jupyter-wrapper .CodeMirror-sizer{position:relative;border-right:30px solid rgba(0,0,0,0)}.jupyter-wrapper .CodeMirror-vscrollbar,.jupyter-wrapper .CodeMirror-hscrollbar,.jupyter-wrapper .CodeMirror-scrollbar-filler,.jupyter-wrapper .CodeMirror-gutter-filler{position:absolute;z-index:6;display:none}.jupyter-wrapper .CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.jupyter-wrapper .CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.jupyter-wrapper .CodeMirror-scrollbar-filler{right:0;bottom:0}.jupyter-wrapper .CodeMirror-gutter-filler{left:0;bottom:0}.jupyter-wrapper .CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.jupyter-wrapper .CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.jupyter-wrapper .CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none !important;border:none !important}.jupyter-wrapper .CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.jupyter-wrapper .CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.jupyter-wrapper .CodeMirror-gutter-wrapper ::selection{background-color:rgba(0,0,0,0)}.jupyter-wrapper .CodeMirror-gutter-wrapper ::-moz-selection{background-color:rgba(0,0,0,0)}.jupyter-wrapper .CodeMirror-lines{cursor:text;min-height:1px}.jupyter-wrapper .CodeMirror pre.CodeMirror-line,.jupyter-wrapper .CodeMirror pre.CodeMirror-line-like{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:rgba(0,0,0,0);font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.jupyter-wrapper .CodeMirror-wrap pre.CodeMirror-line,.jupyter-wrapper .CodeMirror-wrap pre.CodeMirror-line-like{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.jupyter-wrapper .CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.jupyter-wrapper .CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.jupyter-wrapper .CodeMirror-rtl pre{direction:rtl}.jupyter-wrapper .CodeMirror-code{outline:none}.jupyter-wrapper .CodeMirror-scroll,.jupyter-wrapper .CodeMirror-sizer,.jupyter-wrapper .CodeMirror-gutter,.jupyter-wrapper .CodeMirror-gutters,.jupyter-wrapper .CodeMirror-linenumber{-moz-box-sizing:content-box;box-sizing:content-box}.jupyter-wrapper .CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.jupyter-wrapper .CodeMirror-cursor{position:absolute;pointer-events:none}.jupyter-wrapper .CodeMirror-measure pre{position:static}.jupyter-wrapper div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.jupyter-wrapper div.CodeMirror-dragcursors{visibility:visible}.jupyter-wrapper .CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.jupyter-wrapper .CodeMirror-selected{background:#d9d9d9}.jupyter-wrapper .CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.jupyter-wrapper .CodeMirror-crosshair{cursor:crosshair}.jupyter-wrapper .CodeMirror-line::selection,.jupyter-wrapper .CodeMirror-line>span::selection,.jupyter-wrapper .CodeMirror-line>span>span::selection{background:#d7d4f0}.jupyter-wrapper .CodeMirror-line::-moz-selection,.jupyter-wrapper .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.jupyter-wrapper .cm-searching{background-color:#ffa;background-color:rgba(255,255,0,.4)}.jupyter-wrapper .cm-force-border{padding-right:.1px}@media print{.jupyter-wrapper .CodeMirror div.CodeMirror-cursors{visibility:hidden}}.jupyter-wrapper .cm-tab-wrap-hack:after{content:\"\"}.jupyter-wrapper span.CodeMirror-selectedtext{background:none}.jupyter-wrapper .CodeMirror-dialog{position:absolute;left:0;right:0;background:inherit;z-index:15;padding:.1em .8em;overflow:hidden;color:inherit}.jupyter-wrapper .CodeMirror-dialog-top{border-bottom:1px solid #eee;top:0}.jupyter-wrapper .CodeMirror-dialog-bottom{border-top:1px solid #eee;bottom:0}.jupyter-wrapper .CodeMirror-dialog input{border:none;outline:none;background:rgba(0,0,0,0);width:20em;color:inherit;font-family:monospace}.jupyter-wrapper .CodeMirror-dialog button{font-size:70%}.jupyter-wrapper .CodeMirror-foldmarker{color:blue;text-shadow:#b9f 1px 1px 2px,#b9f -1px -1px 2px,#b9f 1px -1px 2px,#b9f -1px 1px 2px;font-family:arial;line-height:.3;cursor:pointer}.jupyter-wrapper .CodeMirror-foldgutter{width:.7em}.jupyter-wrapper .CodeMirror-foldgutter-open,.jupyter-wrapper .CodeMirror-foldgutter-folded{cursor:pointer}.jupyter-wrapper .CodeMirror-foldgutter-open:after{content:\"\u25be\"}.jupyter-wrapper .CodeMirror-foldgutter-folded:after{content:\"\u25b8\"}.jupyter-wrapper .cm-s-material.CodeMirror{background-color:#263238;color:#eff}.jupyter-wrapper .cm-s-material .CodeMirror-gutters{background:#263238;color:#546e7a;border:none}.jupyter-wrapper .cm-s-material .CodeMirror-guttermarker,.jupyter-wrapper .cm-s-material .CodeMirror-guttermarker-subtle,.jupyter-wrapper .cm-s-material .CodeMirror-linenumber{color:#546e7a}.jupyter-wrapper .cm-s-material .CodeMirror-cursor{border-left:1px solid #fc0}.jupyter-wrapper .cm-s-material div.CodeMirror-selected{background:rgba(128,203,196,.2)}.jupyter-wrapper .cm-s-material.CodeMirror-focused div.CodeMirror-selected{background:rgba(128,203,196,.2)}.jupyter-wrapper .cm-s-material .CodeMirror-line::selection,.jupyter-wrapper .cm-s-material .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-material .CodeMirror-line>span>span::selection{background:rgba(128,203,196,.2)}.jupyter-wrapper .cm-s-material .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-material .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-material .CodeMirror-line>span>span::-moz-selection{background:rgba(128,203,196,.2)}.jupyter-wrapper .cm-s-material .CodeMirror-activeline-background{background:rgba(0,0,0,.5)}.jupyter-wrapper .cm-s-material .cm-keyword{color:#c792ea}.jupyter-wrapper .cm-s-material .cm-operator{color:#89ddff}.jupyter-wrapper .cm-s-material .cm-variable-2{color:#eff}.jupyter-wrapper .cm-s-material .cm-variable-3,.jupyter-wrapper .cm-s-material .cm-type{color:#f07178}.jupyter-wrapper .cm-s-material .cm-builtin{color:#ffcb6b}.jupyter-wrapper .cm-s-material .cm-atom{color:#f78c6c}.jupyter-wrapper .cm-s-material .cm-number{color:#ff5370}.jupyter-wrapper .cm-s-material .cm-def{color:#82aaff}.jupyter-wrapper .cm-s-material .cm-string{color:#c3e88d}.jupyter-wrapper .cm-s-material .cm-string-2{color:#f07178}.jupyter-wrapper .cm-s-material .cm-comment{color:#546e7a}.jupyter-wrapper .cm-s-material .cm-variable{color:#f07178}.jupyter-wrapper .cm-s-material .cm-tag{color:#ff5370}.jupyter-wrapper .cm-s-material .cm-meta{color:#ffcb6b}.jupyter-wrapper .cm-s-material .cm-attribute{color:#c792ea}.jupyter-wrapper .cm-s-material .cm-property{color:#c792ea}.jupyter-wrapper .cm-s-material .cm-qualifier{color:#decb6b}.jupyter-wrapper .cm-s-material .cm-variable-3,.jupyter-wrapper .cm-s-material .cm-type{color:#decb6b}.jupyter-wrapper .cm-s-material .cm-error{color:#fff;background-color:#ff5370}.jupyter-wrapper .cm-s-material .CodeMirror-matchingbracket{text-decoration:underline;color:#fff !important}.jupyter-wrapper .cm-s-zenburn .CodeMirror-gutters{background:#3f3f3f !important}.jupyter-wrapper .cm-s-zenburn .CodeMirror-foldgutter-open,.jupyter-wrapper .CodeMirror-foldgutter-folded{color:#999}.jupyter-wrapper .cm-s-zenburn .CodeMirror-cursor{border-left:1px solid #fff}.jupyter-wrapper .cm-s-zenburn{background-color:#3f3f3f;color:#dcdccc}.jupyter-wrapper .cm-s-zenburn span.cm-builtin{color:#dcdccc;font-weight:bold}.jupyter-wrapper .cm-s-zenburn span.cm-comment{color:#7f9f7f}.jupyter-wrapper .cm-s-zenburn span.cm-keyword{color:#f0dfaf;font-weight:bold}.jupyter-wrapper .cm-s-zenburn span.cm-atom{color:#bfebbf}.jupyter-wrapper .cm-s-zenburn span.cm-def{color:#dcdccc}.jupyter-wrapper .cm-s-zenburn span.cm-variable{color:#dfaf8f}.jupyter-wrapper .cm-s-zenburn span.cm-variable-2{color:#dcdccc}.jupyter-wrapper .cm-s-zenburn span.cm-string{color:#cc9393}.jupyter-wrapper .cm-s-zenburn span.cm-string-2{color:#cc9393}.jupyter-wrapper .cm-s-zenburn span.cm-number{color:#dcdccc}.jupyter-wrapper .cm-s-zenburn span.cm-tag{color:#93e0e3}.jupyter-wrapper .cm-s-zenburn span.cm-property{color:#dfaf8f}.jupyter-wrapper .cm-s-zenburn span.cm-attribute{color:#dfaf8f}.jupyter-wrapper .cm-s-zenburn span.cm-qualifier{color:#7cb8bb}.jupyter-wrapper .cm-s-zenburn span.cm-meta{color:#f0dfaf}.jupyter-wrapper .cm-s-zenburn span.cm-header{color:#f0efd0}.jupyter-wrapper .cm-s-zenburn span.cm-operator{color:#f0efd0}.jupyter-wrapper .cm-s-zenburn span.CodeMirror-matchingbracket{box-sizing:border-box;background:rgba(0,0,0,0);border-bottom:1px solid}.jupyter-wrapper .cm-s-zenburn span.CodeMirror-nonmatchingbracket{border-bottom:1px solid;background:none}.jupyter-wrapper .cm-s-zenburn .CodeMirror-activeline{background:#000}.jupyter-wrapper .cm-s-zenburn .CodeMirror-activeline-background{background:#000}.jupyter-wrapper .cm-s-zenburn div.CodeMirror-selected{background:#545454}.jupyter-wrapper .cm-s-zenburn .CodeMirror-focused div.CodeMirror-selected{background:#4f4f4f}.jupyter-wrapper .cm-s-abcdef.CodeMirror{background:#0f0f0f;color:#defdef}.jupyter-wrapper .cm-s-abcdef div.CodeMirror-selected{background:#515151}.jupyter-wrapper .cm-s-abcdef .CodeMirror-line::selection,.jupyter-wrapper .cm-s-abcdef .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-abcdef .CodeMirror-line>span>span::selection{background:rgba(56,56,56,.99)}.jupyter-wrapper .cm-s-abcdef .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-abcdef .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-abcdef .CodeMirror-line>span>span::-moz-selection{background:rgba(56,56,56,.99)}.jupyter-wrapper .cm-s-abcdef .CodeMirror-gutters{background:#555;border-right:2px solid #314151}.jupyter-wrapper .cm-s-abcdef .CodeMirror-guttermarker{color:#222}.jupyter-wrapper .cm-s-abcdef .CodeMirror-guttermarker-subtle{color:azure}.jupyter-wrapper .cm-s-abcdef .CodeMirror-linenumber{color:#fff}.jupyter-wrapper .cm-s-abcdef .CodeMirror-cursor{border-left:1px solid lime}.jupyter-wrapper .cm-s-abcdef span.cm-keyword{color:#b8860b;font-weight:bold}.jupyter-wrapper .cm-s-abcdef span.cm-atom{color:#77f}.jupyter-wrapper .cm-s-abcdef span.cm-number{color:violet}.jupyter-wrapper .cm-s-abcdef span.cm-def{color:#fffabc}.jupyter-wrapper .cm-s-abcdef span.cm-variable{color:#abcdef}.jupyter-wrapper .cm-s-abcdef span.cm-variable-2{color:#cacbcc}.jupyter-wrapper .cm-s-abcdef span.cm-variable-3,.jupyter-wrapper .cm-s-abcdef span.cm-type{color:#def}.jupyter-wrapper .cm-s-abcdef span.cm-property{color:#fedcba}.jupyter-wrapper .cm-s-abcdef span.cm-operator{color:#ff0}.jupyter-wrapper .cm-s-abcdef span.cm-comment{color:#7a7b7c;font-style:italic}.jupyter-wrapper .cm-s-abcdef span.cm-string{color:#2b4}.jupyter-wrapper .cm-s-abcdef span.cm-meta{color:#c9f}.jupyter-wrapper .cm-s-abcdef span.cm-qualifier{color:#fff700}.jupyter-wrapper .cm-s-abcdef span.cm-builtin{color:#30aabc}.jupyter-wrapper .cm-s-abcdef span.cm-bracket{color:#8a8a8a}.jupyter-wrapper .cm-s-abcdef span.cm-tag{color:#fd4}.jupyter-wrapper .cm-s-abcdef span.cm-attribute{color:#df0}.jupyter-wrapper .cm-s-abcdef span.cm-error{color:red}.jupyter-wrapper .cm-s-abcdef span.cm-header{color:#7fffd4;font-weight:bold}.jupyter-wrapper .cm-s-abcdef span.cm-link{color:#8a2be2}.jupyter-wrapper .cm-s-abcdef .CodeMirror-activeline-background{background:#314151}.jupyter-wrapper .cm-s-base16-light.CodeMirror{background:#f5f5f5;color:#202020}.jupyter-wrapper .cm-s-base16-light div.CodeMirror-selected{background:#e0e0e0}.jupyter-wrapper .cm-s-base16-light .CodeMirror-line::selection,.jupyter-wrapper .cm-s-base16-light .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-base16-light .CodeMirror-line>span>span::selection{background:#e0e0e0}.jupyter-wrapper .cm-s-base16-light .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-base16-light .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-base16-light .CodeMirror-line>span>span::-moz-selection{background:#e0e0e0}.jupyter-wrapper .cm-s-base16-light .CodeMirror-gutters{background:#f5f5f5;border-right:0px}.jupyter-wrapper .cm-s-base16-light .CodeMirror-guttermarker{color:#ac4142}.jupyter-wrapper .cm-s-base16-light .CodeMirror-guttermarker-subtle{color:#b0b0b0}.jupyter-wrapper .cm-s-base16-light .CodeMirror-linenumber{color:#b0b0b0}.jupyter-wrapper .cm-s-base16-light .CodeMirror-cursor{border-left:1px solid #505050}.jupyter-wrapper .cm-s-base16-light span.cm-comment{color:#8f5536}.jupyter-wrapper .cm-s-base16-light span.cm-atom{color:#aa759f}.jupyter-wrapper .cm-s-base16-light span.cm-number{color:#aa759f}.jupyter-wrapper .cm-s-base16-light span.cm-property,.jupyter-wrapper .cm-s-base16-light span.cm-attribute{color:#90a959}.jupyter-wrapper .cm-s-base16-light span.cm-keyword{color:#ac4142}.jupyter-wrapper .cm-s-base16-light span.cm-string{color:#f4bf75}.jupyter-wrapper .cm-s-base16-light span.cm-variable{color:#90a959}.jupyter-wrapper .cm-s-base16-light span.cm-variable-2{color:#6a9fb5}.jupyter-wrapper .cm-s-base16-light span.cm-def{color:#d28445}.jupyter-wrapper .cm-s-base16-light span.cm-bracket{color:#202020}.jupyter-wrapper .cm-s-base16-light span.cm-tag{color:#ac4142}.jupyter-wrapper .cm-s-base16-light span.cm-link{color:#aa759f}.jupyter-wrapper .cm-s-base16-light span.cm-error{background:#ac4142;color:#505050}.jupyter-wrapper .cm-s-base16-light .CodeMirror-activeline-background{background:#dddcdc}.jupyter-wrapper .cm-s-base16-light .CodeMirror-matchingbracket{color:#f5f5f5 !important;background-color:#6a9fb5 !important}.jupyter-wrapper .cm-s-base16-dark.CodeMirror{background:#151515;color:#e0e0e0}.jupyter-wrapper .cm-s-base16-dark div.CodeMirror-selected{background:#303030}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-line::selection,.jupyter-wrapper .cm-s-base16-dark .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-base16-dark .CodeMirror-line>span>span::selection{background:rgba(48,48,48,.99)}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-base16-dark .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-base16-dark .CodeMirror-line>span>span::-moz-selection{background:rgba(48,48,48,.99)}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-gutters{background:#151515;border-right:0px}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-guttermarker{color:#ac4142}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-guttermarker-subtle{color:#505050}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-linenumber{color:#505050}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-cursor{border-left:1px solid #b0b0b0}.jupyter-wrapper .cm-s-base16-dark span.cm-comment{color:#8f5536}.jupyter-wrapper .cm-s-base16-dark span.cm-atom{color:#aa759f}.jupyter-wrapper .cm-s-base16-dark span.cm-number{color:#aa759f}.jupyter-wrapper .cm-s-base16-dark span.cm-property,.jupyter-wrapper .cm-s-base16-dark span.cm-attribute{color:#90a959}.jupyter-wrapper .cm-s-base16-dark span.cm-keyword{color:#ac4142}.jupyter-wrapper .cm-s-base16-dark span.cm-string{color:#f4bf75}.jupyter-wrapper .cm-s-base16-dark span.cm-variable{color:#90a959}.jupyter-wrapper .cm-s-base16-dark span.cm-variable-2{color:#6a9fb5}.jupyter-wrapper .cm-s-base16-dark span.cm-def{color:#d28445}.jupyter-wrapper .cm-s-base16-dark span.cm-bracket{color:#e0e0e0}.jupyter-wrapper .cm-s-base16-dark span.cm-tag{color:#ac4142}.jupyter-wrapper .cm-s-base16-dark span.cm-link{color:#aa759f}.jupyter-wrapper .cm-s-base16-dark span.cm-error{background:#ac4142;color:#b0b0b0}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-activeline-background{background:#202020}.jupyter-wrapper .cm-s-base16-dark .CodeMirror-matchingbracket{text-decoration:underline;color:#fff !important}.jupyter-wrapper .cm-s-dracula.CodeMirror,.jupyter-wrapper .cm-s-dracula .CodeMirror-gutters{background-color:#282a36 !important;color:#f8f8f2 !important;border:none}.jupyter-wrapper .cm-s-dracula .CodeMirror-gutters{color:#282a36}.jupyter-wrapper .cm-s-dracula .CodeMirror-cursor{border-left:solid thin #f8f8f0}.jupyter-wrapper .cm-s-dracula .CodeMirror-linenumber{color:#6d8a88}.jupyter-wrapper .cm-s-dracula .CodeMirror-selected{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-dracula .CodeMirror-line::selection,.jupyter-wrapper .cm-s-dracula .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-dracula .CodeMirror-line>span>span::selection{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-dracula .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-dracula .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-dracula .CodeMirror-line>span>span::-moz-selection{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-dracula span.cm-comment{color:#6272a4}.jupyter-wrapper .cm-s-dracula span.cm-string,.jupyter-wrapper .cm-s-dracula span.cm-string-2{color:#f1fa8c}.jupyter-wrapper .cm-s-dracula span.cm-number{color:#bd93f9}.jupyter-wrapper .cm-s-dracula span.cm-variable{color:#50fa7b}.jupyter-wrapper .cm-s-dracula span.cm-variable-2{color:#fff}.jupyter-wrapper .cm-s-dracula span.cm-def{color:#50fa7b}.jupyter-wrapper .cm-s-dracula span.cm-operator{color:#ff79c6}.jupyter-wrapper .cm-s-dracula span.cm-keyword{color:#ff79c6}.jupyter-wrapper .cm-s-dracula span.cm-atom{color:#bd93f9}.jupyter-wrapper .cm-s-dracula span.cm-meta{color:#f8f8f2}.jupyter-wrapper .cm-s-dracula span.cm-tag{color:#ff79c6}.jupyter-wrapper .cm-s-dracula span.cm-attribute{color:#50fa7b}.jupyter-wrapper .cm-s-dracula span.cm-qualifier{color:#50fa7b}.jupyter-wrapper .cm-s-dracula span.cm-property{color:#66d9ef}.jupyter-wrapper .cm-s-dracula span.cm-builtin{color:#50fa7b}.jupyter-wrapper .cm-s-dracula span.cm-variable-3,.jupyter-wrapper .cm-s-dracula span.cm-type{color:#ffb86c}.jupyter-wrapper .cm-s-dracula .CodeMirror-activeline-background{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-dracula .CodeMirror-matchingbracket{text-decoration:underline;color:#fff !important}.jupyter-wrapper .cm-s-hopscotch.CodeMirror{background:#322931;color:#d5d3d5}.jupyter-wrapper .cm-s-hopscotch div.CodeMirror-selected{background:#433b42 !important}.jupyter-wrapper .cm-s-hopscotch .CodeMirror-gutters{background:#322931;border-right:0px}.jupyter-wrapper .cm-s-hopscotch .CodeMirror-linenumber{color:#797379}.jupyter-wrapper .cm-s-hopscotch .CodeMirror-cursor{border-left:1px solid #989498 !important}.jupyter-wrapper .cm-s-hopscotch span.cm-comment{color:#b33508}.jupyter-wrapper .cm-s-hopscotch span.cm-atom{color:#c85e7c}.jupyter-wrapper .cm-s-hopscotch span.cm-number{color:#c85e7c}.jupyter-wrapper .cm-s-hopscotch span.cm-property,.jupyter-wrapper .cm-s-hopscotch span.cm-attribute{color:#8fc13e}.jupyter-wrapper .cm-s-hopscotch span.cm-keyword{color:#dd464c}.jupyter-wrapper .cm-s-hopscotch span.cm-string{color:#fdcc59}.jupyter-wrapper .cm-s-hopscotch span.cm-variable{color:#8fc13e}.jupyter-wrapper .cm-s-hopscotch span.cm-variable-2{color:#1290bf}.jupyter-wrapper .cm-s-hopscotch span.cm-def{color:#fd8b19}.jupyter-wrapper .cm-s-hopscotch span.cm-error{background:#dd464c;color:#989498}.jupyter-wrapper .cm-s-hopscotch span.cm-bracket{color:#d5d3d5}.jupyter-wrapper .cm-s-hopscotch span.cm-tag{color:#dd464c}.jupyter-wrapper .cm-s-hopscotch span.cm-link{color:#c85e7c}.jupyter-wrapper .cm-s-hopscotch .CodeMirror-matchingbracket{text-decoration:underline;color:#fff !important}.jupyter-wrapper .cm-s-hopscotch .CodeMirror-activeline-background{background:#302020}.jupyter-wrapper .cm-s-mbo.CodeMirror{background:#2c2c2c;color:#ffffec}.jupyter-wrapper .cm-s-mbo div.CodeMirror-selected{background:#716c62}.jupyter-wrapper .cm-s-mbo .CodeMirror-line::selection,.jupyter-wrapper .cm-s-mbo .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-mbo .CodeMirror-line>span>span::selection{background:rgba(113,108,98,.99)}.jupyter-wrapper .cm-s-mbo .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-mbo .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-mbo .CodeMirror-line>span>span::-moz-selection{background:rgba(113,108,98,.99)}.jupyter-wrapper .cm-s-mbo .CodeMirror-gutters{background:#4e4e4e;border-right:0px}.jupyter-wrapper .cm-s-mbo .CodeMirror-guttermarker{color:#fff}.jupyter-wrapper .cm-s-mbo .CodeMirror-guttermarker-subtle{color:gray}.jupyter-wrapper .cm-s-mbo .CodeMirror-linenumber{color:#dadada}.jupyter-wrapper .cm-s-mbo .CodeMirror-cursor{border-left:1px solid #ffffec}.jupyter-wrapper .cm-s-mbo span.cm-comment{color:#95958a}.jupyter-wrapper .cm-s-mbo span.cm-atom{color:#00a8c6}.jupyter-wrapper .cm-s-mbo span.cm-number{color:#00a8c6}.jupyter-wrapper .cm-s-mbo span.cm-property,.jupyter-wrapper .cm-s-mbo span.cm-attribute{color:#9ddfe9}.jupyter-wrapper .cm-s-mbo span.cm-keyword{color:#ffb928}.jupyter-wrapper .cm-s-mbo span.cm-string{color:#ffcf6c}.jupyter-wrapper .cm-s-mbo span.cm-string.cm-property{color:#ffffec}.jupyter-wrapper .cm-s-mbo span.cm-variable{color:#ffffec}.jupyter-wrapper .cm-s-mbo span.cm-variable-2{color:#00a8c6}.jupyter-wrapper .cm-s-mbo span.cm-def{color:#ffffec}.jupyter-wrapper .cm-s-mbo span.cm-bracket{color:#fffffc;font-weight:bold}.jupyter-wrapper .cm-s-mbo span.cm-tag{color:#9ddfe9}.jupyter-wrapper .cm-s-mbo span.cm-link{color:#f54b07}.jupyter-wrapper .cm-s-mbo span.cm-error{border-bottom:#636363;color:#ffffec}.jupyter-wrapper .cm-s-mbo span.cm-qualifier{color:#ffffec}.jupyter-wrapper .cm-s-mbo .CodeMirror-activeline-background{background:#494b41}.jupyter-wrapper .cm-s-mbo .CodeMirror-matchingbracket{color:#ffb928 !important}.jupyter-wrapper .cm-s-mbo .CodeMirror-matchingtag{background:rgba(255,255,255,.37)}.jupyter-wrapper .cm-s-mdn-like.CodeMirror{color:#999;background-color:#fff}.jupyter-wrapper .cm-s-mdn-like div.CodeMirror-selected{background:#cfc}.jupyter-wrapper .cm-s-mdn-like .CodeMirror-line::selection,.jupyter-wrapper .cm-s-mdn-like .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-mdn-like .CodeMirror-line>span>span::selection{background:#cfc}.jupyter-wrapper .cm-s-mdn-like .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-mdn-like .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-mdn-like .CodeMirror-line>span>span::-moz-selection{background:#cfc}.jupyter-wrapper .cm-s-mdn-like .CodeMirror-gutters{background:#f8f8f8;border-left:6px solid rgba(0,83,159,.65);color:#333}.jupyter-wrapper .cm-s-mdn-like .CodeMirror-linenumber{color:#aaa;padding-left:8px}.jupyter-wrapper .cm-s-mdn-like .CodeMirror-cursor{border-left:2px solid #222}.jupyter-wrapper .cm-s-mdn-like .cm-keyword{color:#6262ff}.jupyter-wrapper .cm-s-mdn-like .cm-atom{color:#f90}.jupyter-wrapper .cm-s-mdn-like .cm-number{color:#ca7841}.jupyter-wrapper .cm-s-mdn-like .cm-def{color:#8da6ce}.jupyter-wrapper .cm-s-mdn-like span.cm-variable-2,.jupyter-wrapper .cm-s-mdn-like span.cm-tag{color:#690}.jupyter-wrapper .cm-s-mdn-like span.cm-variable-3,.jupyter-wrapper .cm-s-mdn-like span.cm-def,.jupyter-wrapper .cm-s-mdn-like span.cm-type{color:#07a}.jupyter-wrapper .cm-s-mdn-like .cm-variable{color:#07a}.jupyter-wrapper .cm-s-mdn-like .cm-property{color:#905}.jupyter-wrapper .cm-s-mdn-like .cm-qualifier{color:#690}.jupyter-wrapper .cm-s-mdn-like .cm-operator{color:#cda869}.jupyter-wrapper .cm-s-mdn-like .cm-comment{color:#777;font-weight:normal}.jupyter-wrapper .cm-s-mdn-like .cm-string{color:#07a;font-style:italic}.jupyter-wrapper .cm-s-mdn-like .cm-string-2{color:#bd6b18}.jupyter-wrapper .cm-s-mdn-like .cm-meta{color:#000}.jupyter-wrapper .cm-s-mdn-like .cm-builtin{color:#9b7536}.jupyter-wrapper .cm-s-mdn-like .cm-tag{color:#997643}.jupyter-wrapper .cm-s-mdn-like .cm-attribute{color:#d6bb6d}.jupyter-wrapper .cm-s-mdn-like .cm-header{color:#ff6400}.jupyter-wrapper .cm-s-mdn-like .cm-hr{color:#aeaeae}.jupyter-wrapper .cm-s-mdn-like .cm-link{color:#ad9361;font-style:italic;text-decoration:none}.jupyter-wrapper .cm-s-mdn-like .cm-error{border-bottom:1px solid red}.jupyter-wrapper div.cm-s-mdn-like .CodeMirror-activeline-background{background:#efefff}.jupyter-wrapper div.cm-s-mdn-like span.CodeMirror-matchingbracket{outline:1px solid gray;color:inherit}.jupyter-wrapper .cm-s-mdn-like.CodeMirror{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAAyCAYAAAAp8UeFAAAHvklEQVR42s2b63bcNgyEQZCSHCdt2vd/0tWF7I+Q6XgMXiTtuvU5Pl57ZQKkKHzEAOtF5KeIJBGJ8uvL599FRFREZhFx8DeXv8trn68RuGaC8TRfo3SNp9dlDDHedyLyTUTeRWStXKPZrjtpZxaRw5hPqozRs1N8/enzIiQRWcCgy4MUA0f+XWliDhyL8Lfyvx7ei/Ae3iQFHyw7U/59pQVIMEEPEz0G7XiwdRjzSfC3UTtz9vchIntxvry5iMgfIhJoEflOz2CQr3F5h/HfeFe+GTdLaKcu9L8LTeQb/R/7GgbsfKedyNdoHsN31uRPWrfZ5wsj/NzzRQHuToIdU3ahwnsKPxXCjJITuOsi7XLc7SG/v5GdALs7wf8JjTFiB5+QvTEfRyGOfX3Lrx8wxyQi3sNq46O7QahQiCsRFgqddjBouVEHOKDgXAQHD9gJCr5sMKkEdjwsarG/ww3BMHBU7OBjXnzdyY7SfCxf5/z6ATccrwlKuwC/jhznnPF4CgVzhhVf4xp2EixcBActO75iZ8/fM9zAs2OMzKdslgXWJ9XG8PQoOAMA5fGcsvORgv0doBXyHrCwfLJAOwo71QLNkb8n2Pl6EWiR7OCibtkPaz4Kc/0NNAze2gju3zOwekALDaCFPI5vjPFmgGY5AZqyGEvH1x7QfIb8YtxMnA/b+QQ0aQDAwc6JMFg8CbQZ4qoYEEHbRwNojuK3EHwd7VALSgq+MNDKzfT58T8qdpADrgW0GmgcAS1lhzztJmkAzcPNOQbsWEALBDSlMKUG0Eq4CLAQWvEVQ9WU57gZJwZtgPO3r9oBTQ9WO8TjqXINx8R0EYpiZEUWOF3FxkbJkgU9B2f41YBrIj5ZfsQa0M5kTgiAAqM3ShXLgu8XMqcrQBvJ0CL5pnTsfMB13oB8athpAq2XOQmcGmoACCLydx7nToa23ATaSIY2ichfOdPTGxlasXMLaL0MLZAOwAKIM+y8CmicobGdCcbbK9DzN+yYGVoNNI5iUKTMyYOjPse4A8SM1MmcXgU0toOq1yO/v8FOxlASyc7TgeYaAMBJHcY1CcCwGI/TK4AmDbDyKYBBtFUkRwto8gygiQEaByFgJ00BH2M8JWwQS1nafDXQCidWyOI8AcjDCSjCLk8ngObuAm3JAHAdubAmOaK06V8MNEsKPJOhobSprwQa6gD7DclRQdqcwL4zxqgBrQcabUiBLclRDKAlWp+etPkBaNMA0AKlrHwTdEByZAA4GM+SNluSY6wAzcMNewxmgig5Ks0nkrSpBvSaQHMdKTBAnLojOdYyGpQ254602ZILPdTD1hdlggdIm74jbTp8vDwF5ZYUeLWGJpWsh6XNyXgcYwVoJQTEhhTYkxzZjiU5npU2TaB979TQehlaAVq4kaGpiPwwwLkYUuBbQwocyQTv1tA0+1UFWoJF3iv1oq+qoSk8EQdJmwHkziIF7oOZk14EGitibAdjLYYK78H5vZOhtWpoI0ATGHs0Q8OMb4Ey+2bU2UYztCtA0wFAs7TplGLRVQCcqaFdGSPCeTI1QNIC52iWNzof6Uib7xjEp07mNNoUYmVosVItHrHzRlLgBn9LFyRHaQCtVUMbtTNhoXWiTOO9k/V8BdAc1Oq0ArSQs6/5SU0hckNy9NnXqQY0PGYo5dWJ7nINaN6o958FWin27aBaWRka1r5myvLOAm0j30eBJqCxHLReVclxhxOEN2JfDWjxBtAC7MIH1fVaGdoOp4qJYDgKtKPSFNID2gSnGldrCqkFZ+5UeQXQBIRrSwocbdZYQT/2LwRahBPBXoHrB8nxaGROST62DKUbQOMMzZIC9abkuELfQzQALWTnDNAm8KHWFOJgJ5+SHIvTPcmx1xQyZRhNL5Qci689aXMEaN/uNIWkEwDAvFpOZmgsBaaGnbs1NPa1Jm32gBZAIh1pCtG7TSH4aE0y1uVY4uqoFPisGlpP2rSA5qTecWn5agK6BzSpgAyD+wFaqhnYoSZ1Vwr8CmlTQbrcO3ZaX0NAEyMbYaAlyquFoLKK3SPby9CeVUPThrSJmkCAE0CrKUQadi4DrdSlWhmah0YL9z9vClH59YGbHx1J8VZTyAjQepJjmXwAKTDQI3omc3p1U4gDUf6RfcdYfrUp5ClAi2J3Ba6UOXGo+K+bQrjjssitG2SJzshaLwMtXgRagUNpYYoVkMSBLM+9GGiJZMvduG6DRZ4qc04DMPtQQxOjEtACmhO7K1AbNbQDEggZyJwscFpAGwENhoBeUwh3bWolhe8BTYVKxQEWrSUn/uhcM5KhvUu/+eQu0Lzhi+VrK0PrZZNDQKs9cpYUuFYgMVpD4/NxenJTiMCNqdUEUf1qZWjppLT5qSkkUZbCwkbZMSuVnu80hfSkzRbQeqCZSAh6huR4VtoM2gHAlLf72smuWgE+VV7XpE25Ab2WFDgyhnSuKbs4GuGzCjR+tIoUuMFg3kgcWKLTwRqanJQ2W00hAsenfaApRC42hbCvK1SlE0HtE9BGgneJO+ELamitD1YjjOYnNYVcraGhtKkW0EqVVeDx733I2NH581k1NNxNLG0i0IJ8/NjVaOZ0tYZ2Vtr0Xv7tPV3hkWp9EFkgS/J0vosngTaSoaG06WHi+xObQkaAdlbanP8B2+2l0f90LmUAAAAASUVORK5CYII=)}.jupyter-wrapper .cm-s-seti.CodeMirror{background-color:#151718 !important;color:#cfd2d1 !important;border:none}.jupyter-wrapper .cm-s-seti .CodeMirror-gutters{color:#404b53;background-color:#0e1112;border:none}.jupyter-wrapper .cm-s-seti .CodeMirror-cursor{border-left:solid thin #f8f8f0}.jupyter-wrapper .cm-s-seti .CodeMirror-linenumber{color:#6d8a88}.jupyter-wrapper .cm-s-seti.CodeMirror-focused div.CodeMirror-selected{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-seti .CodeMirror-line::selection,.jupyter-wrapper .cm-s-seti .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-seti .CodeMirror-line>span>span::selection{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-seti .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-seti .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-seti .CodeMirror-line>span>span::-moz-selection{background:rgba(255,255,255,.1)}.jupyter-wrapper .cm-s-seti span.cm-comment{color:#41535b}.jupyter-wrapper .cm-s-seti span.cm-string,.jupyter-wrapper .cm-s-seti span.cm-string-2{color:#55b5db}.jupyter-wrapper .cm-s-seti span.cm-number{color:#cd3f45}.jupyter-wrapper .cm-s-seti span.cm-variable{color:#55b5db}.jupyter-wrapper .cm-s-seti span.cm-variable-2{color:#a074c4}.jupyter-wrapper .cm-s-seti span.cm-def{color:#55b5db}.jupyter-wrapper .cm-s-seti span.cm-keyword{color:#ff79c6}.jupyter-wrapper .cm-s-seti span.cm-operator{color:#9fca56}.jupyter-wrapper .cm-s-seti span.cm-keyword{color:#e6cd69}.jupyter-wrapper .cm-s-seti span.cm-atom{color:#cd3f45}.jupyter-wrapper .cm-s-seti span.cm-meta{color:#55b5db}.jupyter-wrapper .cm-s-seti span.cm-tag{color:#55b5db}.jupyter-wrapper .cm-s-seti span.cm-attribute{color:#9fca56}.jupyter-wrapper .cm-s-seti span.cm-qualifier{color:#9fca56}.jupyter-wrapper .cm-s-seti span.cm-property{color:#a074c4}.jupyter-wrapper .cm-s-seti span.cm-variable-3,.jupyter-wrapper .cm-s-seti span.cm-type{color:#9fca56}.jupyter-wrapper .cm-s-seti span.cm-builtin{color:#9fca56}.jupyter-wrapper .cm-s-seti .CodeMirror-activeline-background{background:#101213}.jupyter-wrapper .cm-s-seti .CodeMirror-matchingbracket{text-decoration:underline;color:#fff !important}.jupyter-wrapper .solarized.base03{color:#002b36}.jupyter-wrapper .solarized.base02{color:#073642}.jupyter-wrapper .solarized.base01{color:#586e75}.jupyter-wrapper .solarized.base00{color:#657b83}.jupyter-wrapper .solarized.base0{color:#839496}.jupyter-wrapper .solarized.base1{color:#93a1a1}.jupyter-wrapper .solarized.base2{color:#eee8d5}.jupyter-wrapper .solarized.base3{color:#fdf6e3}.jupyter-wrapper .solarized.solar-yellow{color:#b58900}.jupyter-wrapper .solarized.solar-orange{color:#cb4b16}.jupyter-wrapper .solarized.solar-red{color:#dc322f}.jupyter-wrapper .solarized.solar-magenta{color:#d33682}.jupyter-wrapper .solarized.solar-violet{color:#6c71c4}.jupyter-wrapper .solarized.solar-blue{color:#268bd2}.jupyter-wrapper .solarized.solar-cyan{color:#2aa198}.jupyter-wrapper .solarized.solar-green{color:#859900}.jupyter-wrapper .cm-s-solarized{line-height:1.45em;color-profile:sRGB;rendering-intent:auto}.jupyter-wrapper .cm-s-solarized.cm-s-dark{color:#839496;background-color:#002b36;text-shadow:#002b36 0 1px}.jupyter-wrapper .cm-s-solarized.cm-s-light{background-color:#fdf6e3;color:#657b83;text-shadow:#eee8d5 0 1px}.jupyter-wrapper .cm-s-solarized .CodeMirror-widget{text-shadow:none}.jupyter-wrapper .cm-s-solarized .cm-header{color:#586e75}.jupyter-wrapper .cm-s-solarized .cm-quote{color:#93a1a1}.jupyter-wrapper .cm-s-solarized .cm-keyword{color:#cb4b16}.jupyter-wrapper .cm-s-solarized .cm-atom{color:#d33682}.jupyter-wrapper .cm-s-solarized .cm-number{color:#d33682}.jupyter-wrapper .cm-s-solarized .cm-def{color:#2aa198}.jupyter-wrapper .cm-s-solarized .cm-variable{color:#839496}.jupyter-wrapper .cm-s-solarized .cm-variable-2{color:#b58900}.jupyter-wrapper .cm-s-solarized .cm-variable-3,.jupyter-wrapper .cm-s-solarized .cm-type{color:#6c71c4}.jupyter-wrapper .cm-s-solarized .cm-property{color:#2aa198}.jupyter-wrapper .cm-s-solarized .cm-operator{color:#6c71c4}.jupyter-wrapper .cm-s-solarized .cm-comment{color:#586e75;font-style:italic}.jupyter-wrapper .cm-s-solarized .cm-string{color:#859900}.jupyter-wrapper .cm-s-solarized .cm-string-2{color:#b58900}.jupyter-wrapper .cm-s-solarized .cm-meta{color:#859900}.jupyter-wrapper .cm-s-solarized .cm-qualifier{color:#b58900}.jupyter-wrapper .cm-s-solarized .cm-builtin{color:#d33682}.jupyter-wrapper .cm-s-solarized .cm-bracket{color:#cb4b16}.jupyter-wrapper .cm-s-solarized .CodeMirror-matchingbracket{color:#859900}.jupyter-wrapper .cm-s-solarized .CodeMirror-nonmatchingbracket{color:#dc322f}.jupyter-wrapper .cm-s-solarized .cm-tag{color:#93a1a1}.jupyter-wrapper .cm-s-solarized .cm-attribute{color:#2aa198}.jupyter-wrapper .cm-s-solarized .cm-hr{color:rgba(0,0,0,0);border-top:1px solid #586e75;display:block}.jupyter-wrapper .cm-s-solarized .cm-link{color:#93a1a1;cursor:pointer}.jupyter-wrapper .cm-s-solarized .cm-special{color:#6c71c4}.jupyter-wrapper .cm-s-solarized .cm-em{color:#999;text-decoration:underline;text-decoration-style:dotted}.jupyter-wrapper .cm-s-solarized .cm-error,.jupyter-wrapper .cm-s-solarized .cm-invalidchar{color:#586e75;border-bottom:1px dotted #dc322f}.jupyter-wrapper .cm-s-solarized.cm-s-dark div.CodeMirror-selected{background:#073642}.jupyter-wrapper .cm-s-solarized.cm-s-dark.CodeMirror ::selection{background:rgba(7,54,66,.99)}.jupyter-wrapper .cm-s-solarized.cm-s-dark .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-dark .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-dark .CodeMirror-line>span>span::-moz-selection{background:rgba(7,54,66,.99)}.jupyter-wrapper .cm-s-solarized.cm-s-light div.CodeMirror-selected{background:#eee8d5}.jupyter-wrapper .cm-s-solarized.cm-s-light .CodeMirror-line::selection,.jupyter-wrapper .cm-s-light .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-light .CodeMirror-line>span>span::selection{background:#eee8d5}.jupyter-wrapper .cm-s-solarized.cm-s-light .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-ligh .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-ligh .CodeMirror-line>span>span::-moz-selection{background:#eee8d5}.jupyter-wrapper .cm-s-solarized.CodeMirror{-moz-box-shadow:inset 7px 0 12px -6px #000;-webkit-box-shadow:inset 7px 0 12px -6px #000;box-shadow:inset 7px 0 12px -6px #000}.jupyter-wrapper .cm-s-solarized .CodeMirror-gutters{border-right:0}.jupyter-wrapper .cm-s-solarized.cm-s-dark .CodeMirror-gutters{background-color:#073642}.jupyter-wrapper .cm-s-solarized.cm-s-dark .CodeMirror-linenumber{color:#586e75;text-shadow:#021014 0 -1px}.jupyter-wrapper .cm-s-solarized.cm-s-light .CodeMirror-gutters{background-color:#eee8d5}.jupyter-wrapper .cm-s-solarized.cm-s-light .CodeMirror-linenumber{color:#839496}.jupyter-wrapper .cm-s-solarized .CodeMirror-linenumber{padding:0 5px}.jupyter-wrapper .cm-s-solarized .CodeMirror-guttermarker-subtle{color:#586e75}.jupyter-wrapper .cm-s-solarized.cm-s-dark .CodeMirror-guttermarker{color:#ddd}.jupyter-wrapper .cm-s-solarized.cm-s-light .CodeMirror-guttermarker{color:#cb4b16}.jupyter-wrapper .cm-s-solarized .CodeMirror-gutter .CodeMirror-gutter-text{color:#586e75}.jupyter-wrapper .cm-s-solarized .CodeMirror-cursor{border-left:1px solid #819090}.jupyter-wrapper .cm-s-solarized.cm-s-light.cm-fat-cursor .CodeMirror-cursor{background:#7e7}.jupyter-wrapper .cm-s-solarized.cm-s-light .cm-animate-fat-cursor{background-color:#7e7}.jupyter-wrapper .cm-s-solarized.cm-s-dark.cm-fat-cursor .CodeMirror-cursor{background:#586e75}.jupyter-wrapper .cm-s-solarized.cm-s-dark .cm-animate-fat-cursor{background-color:#586e75}.jupyter-wrapper .cm-s-solarized.cm-s-dark .CodeMirror-activeline-background{background:rgba(255,255,255,.06)}.jupyter-wrapper .cm-s-solarized.cm-s-light .CodeMirror-activeline-background{background:rgba(0,0,0,.06)}.jupyter-wrapper .cm-s-the-matrix.CodeMirror{background:#000;color:lime}.jupyter-wrapper .cm-s-the-matrix div.CodeMirror-selected{background:#2d2d2d}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-line::selection,.jupyter-wrapper .cm-s-the-matrix .CodeMirror-line>span::selection,.jupyter-wrapper .cm-s-the-matrix .CodeMirror-line>span>span::selection{background:rgba(45,45,45,.99)}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-line::-moz-selection,.jupyter-wrapper .cm-s-the-matrix .CodeMirror-line>span::-moz-selection,.jupyter-wrapper .cm-s-the-matrix .CodeMirror-line>span>span::-moz-selection{background:rgba(45,45,45,.99)}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-gutters{background:#060;border-right:2px solid lime}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-guttermarker{color:lime}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-guttermarker-subtle{color:#fff}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-linenumber{color:#fff}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-cursor{border-left:1px solid lime}.jupyter-wrapper .cm-s-the-matrix span.cm-keyword{color:#008803;font-weight:bold}.jupyter-wrapper .cm-s-the-matrix span.cm-atom{color:#3ff}.jupyter-wrapper .cm-s-the-matrix span.cm-number{color:#ffb94f}.jupyter-wrapper .cm-s-the-matrix span.cm-def{color:#99c}.jupyter-wrapper .cm-s-the-matrix span.cm-variable{color:#f6c}.jupyter-wrapper .cm-s-the-matrix span.cm-variable-2{color:#c6f}.jupyter-wrapper .cm-s-the-matrix span.cm-variable-3,.jupyter-wrapper .cm-s-the-matrix span.cm-type{color:#96f}.jupyter-wrapper .cm-s-the-matrix span.cm-property{color:#62ffa0}.jupyter-wrapper .cm-s-the-matrix span.cm-operator{color:#999}.jupyter-wrapper .cm-s-the-matrix span.cm-comment{color:#ccc}.jupyter-wrapper .cm-s-the-matrix span.cm-string{color:#39c}.jupyter-wrapper .cm-s-the-matrix span.cm-meta{color:#c9f}.jupyter-wrapper .cm-s-the-matrix span.cm-qualifier{color:#fff700}.jupyter-wrapper .cm-s-the-matrix span.cm-builtin{color:#30a}.jupyter-wrapper .cm-s-the-matrix span.cm-bracket{color:#cc7}.jupyter-wrapper .cm-s-the-matrix span.cm-tag{color:#ffbd40}.jupyter-wrapper .cm-s-the-matrix span.cm-attribute{color:#fff700}.jupyter-wrapper .cm-s-the-matrix span.cm-error{color:red}.jupyter-wrapper .cm-s-the-matrix .CodeMirror-activeline-background{background:#040}.jupyter-wrapper .cm-s-xq-light span.cm-keyword{line-height:1em;font-weight:bold;color:#5a5cad}.jupyter-wrapper .cm-s-xq-light span.cm-atom{color:#6c8cd5}.jupyter-wrapper .cm-s-xq-light span.cm-number{color:#164}.jupyter-wrapper .cm-s-xq-light span.cm-def{text-decoration:underline}.jupyter-wrapper .cm-s-xq-light span.cm-variable{color:#000}.jupyter-wrapper .cm-s-xq-light span.cm-variable-2{color:#000}.jupyter-wrapper .cm-s-xq-light span.cm-variable-3,.jupyter-wrapper .cm-s-xq-light span.cm-type{color:#000}.jupyter-wrapper .cm-s-xq-light span.cm-comment{color:#0080ff;font-style:italic}.jupyter-wrapper .cm-s-xq-light span.cm-string{color:red}.jupyter-wrapper .cm-s-xq-light span.cm-meta{color:#ff0}.jupyter-wrapper .cm-s-xq-light span.cm-qualifier{color:gray}.jupyter-wrapper .cm-s-xq-light span.cm-builtin{color:#7ea656}.jupyter-wrapper .cm-s-xq-light span.cm-bracket{color:#cc7}.jupyter-wrapper .cm-s-xq-light span.cm-tag{color:#3f7f7f}.jupyter-wrapper .cm-s-xq-light span.cm-attribute{color:#7f007f}.jupyter-wrapper .cm-s-xq-light span.cm-error{color:red}.jupyter-wrapper .cm-s-xq-light .CodeMirror-activeline-background{background:#e8f2ff}.jupyter-wrapper .cm-s-xq-light .CodeMirror-matchingbracket{outline:1px solid gray;color:#000 !important;background:#ff0}.jupyter-wrapper .CodeMirror{line-height:var(--jp-code-line-height);font-size:var(--jp-code-font-size);font-family:var(--jp-code-font-family);border:0;border-radius:0;height:auto}.jupyter-wrapper .CodeMirror pre{padding:0 var(--jp-code-padding)}.jupyter-wrapper .jp-CodeMirrorEditor[data-type=inline] .CodeMirror-dialog{background-color:var(--jp-layout-color0);color:var(--jp-content-font-color1)}.jupyter-wrapper .CodeMirror-lines{padding:var(--jp-code-padding) 0}.jupyter-wrapper .CodeMirror-linenumber{padding:0 8px}.jupyter-wrapper .jp-CodeMirrorEditor-static{margin:var(--jp-code-padding)}.jupyter-wrapper .jp-CodeMirrorEditor,.jupyter-wrapper .jp-CodeMirrorEditor-static{cursor:text}.jupyter-wrapper .jp-CodeMirrorEditor[data-type=inline] .CodeMirror-cursor{border-left:var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)}@media screen and (min-width: 2138px)and (max-width: 4319px){.jupyter-wrapper .jp-CodeMirrorEditor[data-type=inline] .CodeMirror-cursor{border-left:var(--jp-code-cursor-width1) solid var(--jp-editor-cursor-color)}}@media screen and (min-width: 4320px){.jupyter-wrapper .jp-CodeMirrorEditor[data-type=inline] .CodeMirror-cursor{border-left:var(--jp-code-cursor-width2) solid var(--jp-editor-cursor-color)}}.jupyter-wrapper .CodeMirror.jp-mod-readOnly .CodeMirror-cursor{display:none}.jupyter-wrapper .CodeMirror-gutters{border-right:1px solid var(--jp-border-color2);background-color:var(--jp-layout-color0)}.jupyter-wrapper .jp-CollaboratorCursor{border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:none;border-bottom:3px solid;background-clip:content-box;margin-left:-5px;margin-right:-5px}.jupyter-wrapper .CodeMirror-selectedtext.cm-searching{background-color:var(--jp-search-selected-match-background-color) !important;color:var(--jp-search-selected-match-color) !important}.jupyter-wrapper .cm-searching{background-color:var(--jp-search-unselected-match-background-color) !important;color:var(--jp-search-unselected-match-color) !important}.jupyter-wrapper .CodeMirror-focused .CodeMirror-selected{background-color:var(--jp-editor-selected-focused-background)}.jupyter-wrapper .CodeMirror-selected{background-color:var(--jp-editor-selected-background)}.jupyter-wrapper .jp-CollaboratorCursor-hover{position:absolute;z-index:1;transform:translateX(-50%);color:#fff;border-radius:3px;padding-left:4px;padding-right:4px;padding-top:1px;padding-bottom:1px;text-align:center;font-size:var(--jp-ui-font-size1);white-space:nowrap}.jupyter-wrapper .jp-CodeMirror-ruler{border-left:1px dashed var(--jp-border-color2)}.jupyter-wrapper .CodeMirror.cm-s-jupyter{background:var(--jp-layout-color0);color:var(--jp-content-font-color1)}.jupyter-wrapper .jp-CodeConsole .CodeMirror.cm-s-jupyter,.jupyter-wrapper .jp-Notebook .CodeMirror.cm-s-jupyter{background:rgba(0,0,0,0)}.jupyter-wrapper .cm-s-jupyter .CodeMirror-cursor{border-left:var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)}.jupyter-wrapper .cm-s-jupyter span.cm-keyword{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.jupyter-wrapper .cm-s-jupyter span.cm-atom{color:var(--jp-mirror-editor-atom-color)}.jupyter-wrapper .cm-s-jupyter span.cm-number{color:var(--jp-mirror-editor-number-color)}.jupyter-wrapper .cm-s-jupyter span.cm-def{color:var(--jp-mirror-editor-def-color)}.jupyter-wrapper .cm-s-jupyter span.cm-variable{color:var(--jp-mirror-editor-variable-color)}.jupyter-wrapper .cm-s-jupyter span.cm-variable-2{color:var(--jp-mirror-editor-variable-2-color)}.jupyter-wrapper .cm-s-jupyter span.cm-variable-3{color:var(--jp-mirror-editor-variable-3-color)}.jupyter-wrapper .cm-s-jupyter span.cm-punctuation{color:var(--jp-mirror-editor-punctuation-color)}.jupyter-wrapper .cm-s-jupyter span.cm-property{color:var(--jp-mirror-editor-property-color)}.jupyter-wrapper .cm-s-jupyter span.cm-operator{color:var(--jp-mirror-editor-operator-color);font-weight:bold}.jupyter-wrapper .cm-s-jupyter span.cm-comment{color:var(--jp-mirror-editor-comment-color);font-style:italic}.jupyter-wrapper .cm-s-jupyter span.cm-string{color:var(--jp-mirror-editor-string-color)}.jupyter-wrapper .cm-s-jupyter span.cm-string-2{color:var(--jp-mirror-editor-string-2-color)}.jupyter-wrapper .cm-s-jupyter span.cm-meta{color:var(--jp-mirror-editor-meta-color)}.jupyter-wrapper .cm-s-jupyter span.cm-qualifier{color:var(--jp-mirror-editor-qualifier-color)}.jupyter-wrapper .cm-s-jupyter span.cm-builtin{color:var(--jp-mirror-editor-builtin-color)}.jupyter-wrapper .cm-s-jupyter span.cm-bracket{color:var(--jp-mirror-editor-bracket-color)}.jupyter-wrapper .cm-s-jupyter span.cm-tag{color:var(--jp-mirror-editor-tag-color)}.jupyter-wrapper .cm-s-jupyter span.cm-attribute{color:var(--jp-mirror-editor-attribute-color)}.jupyter-wrapper .cm-s-jupyter span.cm-header{color:var(--jp-mirror-editor-header-color)}.jupyter-wrapper .cm-s-jupyter span.cm-quote{color:var(--jp-mirror-editor-quote-color)}.jupyter-wrapper .cm-s-jupyter span.cm-link{color:var(--jp-mirror-editor-link-color)}.jupyter-wrapper .cm-s-jupyter span.cm-error{color:var(--jp-mirror-editor-error-color)}.jupyter-wrapper .cm-s-jupyter span.cm-hr{color:#999}.jupyter-wrapper .cm-s-jupyter span.cm-tab{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);background-position:right;background-repeat:no-repeat}.jupyter-wrapper .cm-s-jupyter .CodeMirror-activeline-background,.jupyter-wrapper .cm-s-jupyter .CodeMirror-gutter{background-color:var(--jp-layout-color2)}.jupyter-wrapper .jp-RenderedLatex{color:var(--jp-content-font-color1);font-size:var(--jp-content-font-size1);line-height:var(--jp-content-line-height)}.jupyter-wrapper .jp-OutputArea-output.jp-RenderedLatex{padding:var(--jp-code-padding);text-align:left}.jupyter-wrapper .jp-MimeDocument{outline:none}.jupyter-wrapper :root{--jp-private-filebrowser-button-height: 28px;--jp-private-filebrowser-button-width: 48px}.jupyter-wrapper .jp-FileBrowser{display:flex;flex-direction:column;color:var(--jp-ui-font-color1);background:var(--jp-layout-color1);font-size:var(--jp-ui-font-size1)}.jupyter-wrapper .jp-FileBrowser-toolbar.jp-Toolbar{border-bottom:none;height:auto;margin:var(--jp-toolbar-header-margin);box-shadow:none}.jupyter-wrapper .jp-BreadCrumbs{flex:0 0 auto;margin:4px 12px}.jupyter-wrapper .jp-BreadCrumbs-item{margin:0px 2px;padding:0px 2px;border-radius:var(--jp-border-radius);cursor:pointer}.jupyter-wrapper .jp-BreadCrumbs-item:hover{background-color:var(--jp-layout-color2)}.jupyter-wrapper .jp-BreadCrumbs-item:first-child{margin-left:0px}.jupyter-wrapper .jp-BreadCrumbs-item.jp-mod-dropTarget{background-color:var(--jp-brand-color2);opacity:.7}.jupyter-wrapper .jp-FileBrowser-toolbar.jp-Toolbar{padding:0px}.jupyter-wrapper .jp-FileBrowser-toolbar.jp-Toolbar{justify-content:space-evenly}.jupyter-wrapper .jp-FileBrowser-toolbar.jp-Toolbar .jp-Toolbar-item{flex:1}.jupyter-wrapper .jp-FileBrowser-toolbar.jp-Toolbar .jp-ToolbarButtonComponent{width:100%}.jupyter-wrapper .jp-DirListing{flex:1 1 auto;display:flex;flex-direction:column;outline:0}.jupyter-wrapper .jp-DirListing-header{flex:0 0 auto;display:flex;flex-direction:row;overflow:hidden;border-top:var(--jp-border-width) solid var(--jp-border-color2);border-bottom:var(--jp-border-width) solid var(--jp-border-color1);box-shadow:var(--jp-toolbar-box-shadow);z-index:2}.jupyter-wrapper .jp-DirListing-headerItem{padding:4px 12px 2px 12px;font-weight:500}.jupyter-wrapper .jp-DirListing-headerItem:hover{background:var(--jp-layout-color2)}.jupyter-wrapper .jp-DirListing-headerItem.jp-id-name{flex:1 0 84px}.jupyter-wrapper .jp-DirListing-headerItem.jp-id-modified{flex:0 0 112px;border-left:var(--jp-border-width) solid var(--jp-border-color2);text-align:right}.jupyter-wrapper .jp-DirListing-narrow .jp-id-modified,.jupyter-wrapper .jp-DirListing-narrow .jp-DirListing-itemModified{display:none}.jupyter-wrapper .jp-DirListing-headerItem.jp-mod-selected{font-weight:600}.jupyter-wrapper .jp-DirListing-content{flex:1 1 auto;margin:0;padding:0;list-style-type:none;overflow:auto;background-color:var(--jp-layout-color1)}.jupyter-wrapper .jp-DirListing.jp-mod-native-drop .jp-DirListing-content{outline:5px dashed rgba(128,128,128,.5);outline-offset:-10px;cursor:copy}.jupyter-wrapper .jp-DirListing-item{display:flex;flex-direction:row;padding:4px 12px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .jp-DirListing-item.jp-mod-selected{color:#fff;background:var(--jp-brand-color1)}.jupyter-wrapper .jp-DirListing-item.jp-mod-dropTarget{background:var(--jp-brand-color3)}.jupyter-wrapper .jp-DirListing-item:hover:not(.jp-mod-selected){background:var(--jp-layout-color2)}.jupyter-wrapper .jp-DirListing-itemIcon{flex:0 0 20px;margin-right:4px}.jupyter-wrapper .jp-DirListing-itemText{flex:1 0 64px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;user-select:none}.jupyter-wrapper .jp-DirListing-itemModified{flex:0 0 125px;text-align:right}.jupyter-wrapper .jp-DirListing-editor{flex:1 0 64px;outline:none;border:none}.jupyter-wrapper .jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon:before{color:#32cd32;content:\"\u25cf\";font-size:8px;position:absolute;left:-8px}.jupyter-wrapper .jp-DirListing-item.lm-mod-drag-image,.jupyter-wrapper .jp-DirListing-item.jp-mod-selected.lm-mod-drag-image{font-size:var(--jp-ui-font-size1);padding-left:4px;margin-left:4px;width:160px;background-color:var(--jp-ui-inverse-font-color2);box-shadow:var(--jp-elevation-z2);border-radius:0px;color:var(--jp-ui-font-color1);transform:translateX(-40%) translateY(-58%)}.jupyter-wrapper .jp-DirListing-deadSpace{flex:1 1 auto;margin:0;padding:0;list-style-type:none;overflow:auto;background-color:var(--jp-layout-color1)}.jupyter-wrapper .jp-Document{min-width:120px;min-height:120px;outline:none}.jupyter-wrapper .jp-FileDialog.jp-mod-conflict input{color:red}.jupyter-wrapper .jp-FileDialog .jp-new-name-title{margin-top:12px}.jupyter-wrapper .jp-OutputArea{overflow-y:auto}.jupyter-wrapper .jp-OutputArea-child{display:flex;flex-direction:row}.jupyter-wrapper .jp-OutputPrompt{flex:0 0 var(--jp-cell-prompt-width);color:var(--jp-cell-outprompt-font-color);font-family:var(--jp-cell-prompt-font-family);padding:var(--jp-code-padding);letter-spacing:var(--jp-cell-prompt-letter-spacing);line-height:var(--jp-code-line-height);font-size:var(--jp-code-font-size);border:var(--jp-border-width) solid rgba(0,0,0,0);opacity:var(--jp-cell-prompt-opacity);text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .jp-OutputArea-output{height:auto;overflow:auto;user-select:text;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text}.jupyter-wrapper .jp-OutputArea-child .jp-OutputArea-output{flex-grow:1;flex-shrink:1}.jupyter-wrapper .jp-OutputArea-output.jp-mod-isolated{width:100%;display:block}.jupyter-wrapper body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated{position:relative}.jupyter-wrapper body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0)}.jupyter-wrapper .jp-OutputArea-output pre{border:none;margin:0px;padding:0px;overflow-x:auto;overflow-y:auto;word-break:break-all;word-wrap:break-word;white-space:pre-wrap}.jupyter-wrapper .jp-OutputArea-output.jp-RenderedHTMLCommon table{margin-left:0;margin-right:0}.jupyter-wrapper .jp-OutputArea-output dl,.jupyter-wrapper .jp-OutputArea-output dt,.jupyter-wrapper .jp-OutputArea-output dd{display:block}.jupyter-wrapper .jp-OutputArea-output dl{width:100%;overflow:hidden;padding:0;margin:0}.jupyter-wrapper .jp-OutputArea-output dt{font-weight:bold;float:left;width:20%;padding:0;margin:0}.jupyter-wrapper .jp-OutputArea-output dd{float:left;width:80%;padding:0;margin:0}.jupyter-wrapper .jp-OutputArea .jp-OutputArea .jp-OutputArea-prompt{display:none}.jupyter-wrapper .jp-OutputArea-output.jp-OutputArea-executeResult{margin-left:0px;flex:1 1 auto}.jupyter-wrapper .jp-OutputArea-executeResult.jp-RenderedText{padding-top:var(--jp-code-padding)}.jupyter-wrapper .jp-OutputArea-stdin{line-height:var(--jp-code-line-height);padding-top:var(--jp-code-padding);display:flex}.jupyter-wrapper .jp-Stdin-prompt{color:var(--jp-content-font-color0);padding-right:var(--jp-code-padding);vertical-align:baseline;flex:0 0 auto}.jupyter-wrapper .jp-Stdin-input{font-family:var(--jp-code-font-family);font-size:inherit;color:inherit;background-color:inherit;width:42%;min-width:200px;vertical-align:baseline;padding:0em .25em;margin:0em .25em;flex:0 0 70%}.jupyter-wrapper .jp-Stdin-input:focus{box-shadow:none}.jupyter-wrapper .jp-LinkedOutputView .jp-OutputArea{height:100%;display:block}.jupyter-wrapper .jp-LinkedOutputView .jp-OutputArea-output:only-child{height:100%}.jupyter-wrapper .jp-Collapser{flex:0 0 var(--jp-cell-collapser-width);padding:0px;margin:0px;border:none;outline:none;background:rgba(0,0,0,0);border-radius:var(--jp-border-radius);opacity:1}.jupyter-wrapper .jp-Collapser-child{display:block;width:100%;box-sizing:border-box;position:absolute;top:0px;bottom:0px}.jupyter-wrapper .jp-CellHeader,.jupyter-wrapper .jp-CellFooter{height:0px;width:100%;padding:0px;margin:0px;border:none;outline:none;background:rgba(0,0,0,0)}.jupyter-wrapper .jp-InputArea{display:flex;flex-direction:row}.jupyter-wrapper .jp-InputArea-editor{flex:1 1 auto}.jupyter-wrapper .jp-InputArea-editor{border:var(--jp-border-width) solid var(--jp-cell-editor-border-color);border-radius:0px;background:var(--jp-cell-editor-background)}.jupyter-wrapper .jp-InputPrompt{flex:0 0 var(--jp-cell-prompt-width);color:var(--jp-cell-inprompt-font-color);font-family:var(--jp-cell-prompt-font-family);padding:var(--jp-code-padding);letter-spacing:var(--jp-cell-prompt-letter-spacing);opacity:var(--jp-cell-prompt-opacity);line-height:var(--jp-code-line-height);font-size:var(--jp-code-font-size);border:var(--jp-border-width) solid rgba(0,0,0,0);opacity:var(--jp-cell-prompt-opacity);text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jupyter-wrapper .jp-Placeholder{display:flex;flex-direction:row;flex:1 1 auto}.jupyter-wrapper .jp-Placeholder-prompt{box-sizing:border-box}.jupyter-wrapper .jp-Placeholder-content{flex:1 1 auto;border:none;background:rgba(0,0,0,0);height:20px;box-sizing:border-box}.jupyter-wrapper .jp-Placeholder-content .jp-MoreHorizIcon{width:32px;height:16px;border:1px solid rgba(0,0,0,0);border-radius:var(--jp-border-radius)}.jupyter-wrapper .jp-Placeholder-content .jp-MoreHorizIcon:hover{border:1px solid var(--jp-border-color1);box-shadow:0px 0px 2px 0px rgba(0,0,0,.25);background-color:var(--jp-layout-color0)}.jupyter-wrapper :root{--jp-private-cell-scrolling-output-offset: 5px}.jupyter-wrapper .jp-Cell{padding:var(--jp-cell-padding);margin:0px;border:none;outline:none;background:rgba(0,0,0,0)}.jupyter-wrapper .jp-Cell-inputWrapper,.jupyter-wrapper .jp-Cell-outputWrapper{display:flex;flex-direction:row;padding:0px;margin:0px;overflow:visible}.jupyter-wrapper .jp-Cell-inputArea,.jupyter-wrapper .jp-Cell-outputArea{flex:1 1 auto}.jupyter-wrapper .jp-Cell.jp-mod-noOutputs .jp-Cell-outputCollapser{border:none !important;background:rgba(0,0,0,0) !important}.jupyter-wrapper .jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputCollapser{min-height:var(--jp-cell-collapser-min-height)}.jupyter-wrapper .jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper{margin-top:5px}.jupyter-wrapper .jp-OutputArea-executeResult .jp-RenderedText.jp-OutputArea-output{padding-top:var(--jp-code-padding)}.jupyter-wrapper .jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea{overflow-y:auto;max-height:200px;box-shadow:inset 0 0 6px 2px rgba(0,0,0,.3);margin-left:var(--jp-private-cell-scrolling-output-offset)}.jupyter-wrapper .jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt{flex:0 0 calc(var(--jp-cell-prompt-width) - var(--jp-private-cell-scrolling-output-offset))}.jupyter-wrapper .jp-MarkdownOutput{flex:1 1 auto;margin-top:0;margin-bottom:0;padding-left:var(--jp-code-padding)}.jupyter-wrapper .jp-MarkdownOutput.jp-RenderedHTMLCommon{overflow:auto}.jupyter-wrapper .jp-NotebookPanel-toolbar{padding:2px}.jupyter-wrapper .jp-Toolbar-item.jp-Notebook-toolbarCellType .jp-select-wrapper.jp-mod-focused{border:none;box-shadow:none}.jupyter-wrapper .jp-Notebook-toolbarCellTypeDropdown select{height:24px;font-size:var(--jp-ui-font-size1);line-height:14px;border-radius:0;display:block}.jupyter-wrapper .jp-Notebook-toolbarCellTypeDropdown span{top:5px !important}.jupyter-wrapper :root{--jp-private-notebook-dragImage-width: 304px;--jp-private-notebook-dragImage-height: 36px;--jp-private-notebook-selected-color: var(--md-blue-400);--jp-private-notebook-active-color: var(--md-green-400)}.jupyter-wrapper .jp-NotebookPanel{display:block;height:100%}.jupyter-wrapper .jp-NotebookPanel.jp-Document{min-width:240px;min-height:120px}.jupyter-wrapper .jp-Notebook{padding:var(--jp-notebook-padding);outline:none;overflow:auto;background:var(--jp-layout-color0)}.jupyter-wrapper .jp-Notebook.jp-mod-scrollPastEnd::after{display:block;content:\"\";min-height:var(--jp-notebook-scroll-padding)}.jupyter-wrapper .jp-Notebook .jp-Cell{overflow:visible}.jupyter-wrapper .jp-Notebook .jp-Cell .jp-InputPrompt{cursor:move}.jupyter-wrapper .jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-InputPrompt{opacity:var(--jp-cell-prompt-not-active-opacity);color:var(--jp-cell-prompt-not-active-font-color)}.jupyter-wrapper .jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-OutputPrompt{opacity:var(--jp-cell-prompt-not-active-opacity);color:var(--jp-cell-prompt-not-active-font-color)}.jupyter-wrapper .jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser{background:var(--jp-brand-color1)}.jupyter-wrapper .jp-Notebook .jp-Cell .jp-Collapser:hover{box-shadow:var(--jp-elevation-z2);background:var(--jp-brand-color1);opacity:var(--jp-cell-collapser-not-active-hover-opacity)}.jupyter-wrapper .jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser:hover{background:var(--jp-brand-color0);opacity:1}.jupyter-wrapper .jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-selected{background:var(--jp-notebook-multiselected-color)}.jupyter-wrapper .jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-active.jp-mod-selected:not(.jp-mod-multiSelected){background:rgba(0,0,0,0)}.jupyter-wrapper .jp-Notebook.jp-mod-editMode .jp-Cell.jp-mod-active .jp-InputArea-editor{border:var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);box-shadow:var(--jp-input-box-shadow);background-color:var(--jp-cell-editor-active-background)}.jupyter-wrapper .jp-Notebook-cell.jp-mod-dropSource{opacity:.5}.jupyter-wrapper .jp-Notebook-cell.jp-mod-dropTarget,.jupyter-wrapper .jp-Notebook.jp-mod-commandMode .jp-Notebook-cell.jp-mod-active.jp-mod-selected.jp-mod-dropTarget{border-top-color:var(--jp-private-notebook-selected-color);border-top-style:solid;border-top-width:2px}.jupyter-wrapper .jp-dragImage{display:flex;flex-direction:row;width:var(--jp-private-notebook-dragImage-width);height:var(--jp-private-notebook-dragImage-height);border:var(--jp-border-width) solid var(--jp-cell-editor-border-color);background:var(--jp-cell-editor-background);overflow:visible}.jupyter-wrapper .jp-dragImage-singlePrompt{box-shadow:2px 2px 4px 0px rgba(0,0,0,.12)}.jupyter-wrapper .jp-dragImage .jp-dragImage-content{flex:1 1 auto;z-index:2;font-size:var(--jp-code-font-size);font-family:var(--jp-code-font-family);line-height:var(--jp-code-line-height);padding:var(--jp-code-padding);border:var(--jp-border-width) solid var(--jp-cell-editor-border-color);background:var(--jp-cell-editor-background-color);color:var(--jp-content-font-color3);text-align:left;margin:4px 4px 4px 0px}.jupyter-wrapper .jp-dragImage .jp-dragImage-prompt{flex:0 0 auto;min-width:36px;color:var(--jp-cell-inprompt-font-color);padding:var(--jp-code-padding);padding-left:12px;font-family:var(--jp-cell-prompt-font-family);letter-spacing:var(--jp-cell-prompt-letter-spacing);line-height:1.9;font-size:var(--jp-code-font-size);border:var(--jp-border-width) solid rgba(0,0,0,0)}.jupyter-wrapper .jp-dragImage-multipleBack{z-index:-1;position:absolute;height:32px;width:300px;top:8px;left:8px;background:var(--jp-layout-color2);border:var(--jp-border-width) solid var(--jp-input-border-color);box-shadow:2px 2px 4px 0px rgba(0,0,0,.12)}.jupyter-wrapper .jp-NotebookTools{display:block;min-width:var(--jp-sidebar-min-width);color:var(--jp-ui-font-color1);background:var(--jp-layout-color1);font-size:var(--jp-ui-font-size1);overflow:auto}.jupyter-wrapper .jp-NotebookTools-tool{padding:0px 12px 0 12px}.jupyter-wrapper .jp-ActiveCellTool{padding:12px;background-color:var(--jp-layout-color1);border-top:none !important}.jupyter-wrapper .jp-ActiveCellTool .jp-InputArea-prompt{flex:0 0 auto;padding-left:0px}.jupyter-wrapper .jp-ActiveCellTool .jp-InputArea-editor{flex:1 1 auto;background:var(--jp-cell-editor-background);border-color:var(--jp-cell-editor-border-color)}.jupyter-wrapper .jp-ActiveCellTool .jp-InputArea-editor .CodeMirror{background:rgba(0,0,0,0)}.jupyter-wrapper .jp-MetadataEditorTool{flex-direction:column;padding:12px 0px 12px 0px}.jupyter-wrapper .jp-RankedPanel>:not(:first-child){margin-top:12px}.jupyter-wrapper .jp-KeySelector select.jp-mod-styled{font-size:var(--jp-ui-font-size1);color:var(--jp-ui-font-color0);border:var(--jp-border-width) solid var(--jp-border-color1)}.jupyter-wrapper .jp-KeySelector label,.jupyter-wrapper .jp-MetadataEditorTool label{line-height:1.4}.jupyter-wrapper .jp-mod-presentationMode .jp-Notebook{--jp-content-font-size1: var(--jp-content-presentation-font-size1);--jp-code-font-size: var(--jp-code-presentation-font-size)}.jupyter-wrapper .jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-InputPrompt,.jupyter-wrapper .jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-OutputPrompt{flex:0 0 110px}.jupyter-wrapper .md-typeset__scrollwrap{margin:0}.jupyter-wrapper .jp-MarkdownOutput{padding:0}.jupyter-wrapper h1 .anchor-link,.jupyter-wrapper h2 .anchor-link,.jupyter-wrapper h3 .anchor-link,.jupyter-wrapper h4 .anchor-link,.jupyter-wrapper h5 .anchor-link,.jupyter-wrapper h6 .anchor-link{display:none;margin-left:.5rem;color:var(--md-default-fg-color--lighter)}.jupyter-wrapper h1 .anchor-link:hover,.jupyter-wrapper h2 .anchor-link:hover,.jupyter-wrapper h3 .anchor-link:hover,.jupyter-wrapper h4 .anchor-link:hover,.jupyter-wrapper h5 .anchor-link:hover,.jupyter-wrapper h6 .anchor-link:hover{text-decoration:none;color:var(--md-accent-fg-color)}.jupyter-wrapper h1:hover .anchor-link,.jupyter-wrapper h2:hover .anchor-link,.jupyter-wrapper h3:hover .anchor-link,.jupyter-wrapper h4:hover .anchor-link,.jupyter-wrapper h5:hover .anchor-link,.jupyter-wrapper h6:hover .anchor-link{display:inline-block}.jupyter-wrapper .jp-InputArea{width:100%}.jupyter-wrapper .jp-Cell-inputArea{width:100%}.jupyter-wrapper .jp-RenderedHTMLCommon{width:100%}.jupyter-wrapper .jp-Cell-inputWrapper .jp-InputPrompt{display:none}.jupyter-wrapper .jp-CodeCell .jp-Cell-inputWrapper .jp-InputPrompt{display:block}.jupyter-wrapper .highlight pre{overflow:auto}.jupyter-wrapper .celltoolbar{border:none;background:#eee;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch;box-pack:end;justify-content:flex-start;display:-webkit-flex}.jupyter-wrapper .celltoolbar .tags_button_container{display:flex}.jupyter-wrapper .celltoolbar .tags_button_container .tag-container{display:flex;flex-direction:row;flex-grow:1;overflow:hidden;position:relative}.jupyter-wrapper .celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;box-shadow:none;width:inherit;font-size:11px;font-family:\"Roboto Mono\",SFMono-Regular,Consolas,Menlo,monospace;height:22px;display:inline-block}.jupyter-wrapper .jp-InputArea-editor{width:1px}.jupyter-wrapper .jp-InputPrompt{overflow:unset}.jupyter-wrapper .jp-OutputPrompt{overflow:unset}.jupyter-wrapper .jp-RenderedText{font-size:var(--jp-code-font-size)}.jupyter-wrapper .highlight-ipynb{overflow:auto}.jupyter-wrapper .highlight-ipynb pre{margin:0;padding:5px 10px}.jupyter-wrapper table{width:max-content}.jupyter-wrapper table.dataframe{margin-left:auto;margin-right:auto;border:none;border-collapse:collapse;border-spacing:0;color:#000;font-size:12px;table-layout:fixed}.jupyter-wrapper table.dataframe thead{border-bottom:1px solid #000;vertical-align:bottom}.jupyter-wrapper table.dataframe tr,.jupyter-wrapper table.dataframe th,.jupyter-wrapper table.dataframe td{text-align:right;vertical-align:middle;padding:.5em .5em;line-height:normal;white-space:normal;max-width:none;border:none}.jupyter-wrapper table.dataframe th{font-weight:bold}.jupyter-wrapper table.dataframe tbody tr:nth-child(odd){background:#f5f5f5}.jupyter-wrapper table.dataframe tbody tr:hover{background:rgba(66,165,245,.2)}.jupyter-wrapper *+table{margin-top:1em}.jupyter-wrapper .jp-InputArea-editor{position:relative}.jupyter-wrapper .zeroclipboard-container{position:absolute;top:-3px;right:0;z-index:1000}.jupyter-wrapper .zeroclipboard-container clipboard-copy{-webkit-appearance:button;-moz-appearance:button;padding:7px 5px;font:11px system-ui,sans-serif;display:inline-block;cursor:default}.jupyter-wrapper .zeroclipboard-container .clipboard-copy-icon{padding:4px 4px 2px;color:#57606a;vertical-align:text-bottom}.jupyter-wrapper .clipboard-copy-txt{display:none}[data-md-color-scheme=slate] .clipboard-copy-icon{color:#fff !important}[data-md-color-scheme=slate] table.dataframe{color:#e9ebfc}[data-md-color-scheme=slate] table.dataframe thead{border-bottom:1px solid rgba(233,235,252,.12)}[data-md-color-scheme=slate] table.dataframe tbody tr:nth-child(odd){background:#222}[data-md-color-scheme=slate] table.dataframe tbody tr:hover{background:rgba(66,165,245,.2)}table{width:max-content} /*# sourceMappingURL=mkdocs-jupyter.css.map*/ init_mathjax = function() { if (window.MathJax) { // MathJax loaded MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: \"AMS\", useLabelIds: true } }, tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, displayAlign: 'center', CommonHTML: { linebreaks: { automatic: true } } }); MathJax.Hub.Queue([\"Typeset\", MathJax.Hub]); } } init_mathjax(); Edge AI Anomaly Detection \u00b6 Overview \u00b6 This document contains the code and the instructions for our EclipseCON 2022 Talk: \" How to Train Your Dragon and Its Friends: AI on the Edge with Eclipse Kura\u2122 \" This notebook can also be viewed and ran on Google Colab . In this example scenario we will collect the data provided by a Raspberry Pi Sense HAT using Eclipse Kura\u2122 and upload them to a Eclipse Kapua\u2122 instance. We will then download this data and train an AI-based anomaly detector using TensorFlow . Finally we will deploy the trained anomaly detector model leveraging Nvidia Triton\u2122 Inference Server and Eclipse Kura\u2122 integration. We'll subdivide this example scenario in three main sections: Data collection : in this section we'll discuss how to retrieve training data from the field leveraging Eclipse Kura\u2122 and Eclipse Kapua\u2122 Model building and training : we'll further divide this section in three subsections: Data processing : where we'll show how to explore our training data and manipulate them to make them suitable for training (feature selection, scaling and dataset splitting). This will provide us with the \" Preprocessing \" stage of the resulting AI data-processing pipeline Model training : where we'll discuss how we can create a simple Autoencoder in Tensorflow Keras and how to train it. This will provide us with the \" Inference \" stage of the AI pipeline Model evaluation : where we'll cover how can we extract the high level data from the model output and ensure the model was trained correctly. This will provide us with the \" Postprocessing \" stage of the AI pipeline Model deployment : finally we will convert the model to make it suitable for running on Eclipse Kura\u2122 and Nvidia Triton\u2122 and deploy it on the edge. Data collection \u00b6 Overview \u00b6 In this setup we'll leverage Eclipe Kura\u2122 and Kapua\u2122 for retrieving data from a Raspberry Pi Sense HAT and upload them to the cloud. The Sense HAT is an add-on board for Raspberry Pi which provides an 8\u00d78 RGB LED matrix, a five-button joystick and includes the following sensors: Gyroscope Accelerometer Magnetometer Temperature Barometric pressure Humidity Kura\u2122 installation Requirement : A Raspberry Pi 3/4 running the latest version of Raspberry Pi OS 64 bit. To make everything work on the Raspberry Pi we need to use the develop version of the raspberry-pi-ubuntu-20-nn Kura installer (yes, I know we're installing the Ubuntu package on the Raspberry Pi OS but bear with me...) . You can do so by downloading the repo and building locally or by downloading a pre-built installer from the Kura CI artifacts . Copy the resulting file kura_<version>_raspberry-pi-ubuntu-20_installer-nn.deb on the target device. On the target device run the following commands: sudo apt-get install -y wget apt-transport-https gnupg sudo wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add - sudo echo \"deb https://packages.adoptium.net/artifactory/deb $( awk -F = '/^VERSION_CODENAME/{print$2}' /etc/os-release ) main\" | sudo tee /etc/apt/sources.list.d/adoptium.list sudo apt-get update && sudo apt-get install temurin-8-jdk chrony Finally install Kura with: sudo apt install ./kura_<version>_raspberry-pi-ubuntu-20_installer-nn.deb Cloud connection \u00b6 After setting up an Eclipse Kura\u2122 instance on the Raspberry Pi we'll need to connect it to an Eclipse Kapua\u2122 instance. An excellent tutorial on how to deploy a Kapua\u2122 instance using Docker is available in the official repository . For the purpose of this tutorial we'll assume a Kapua\u2122 instance is already running and is available for connection from Kura\u2122 After setting up the Kapua\u2122 instance you can refer to the official Kura\u2122 documentation for connecting the Raspberry Pi to the Kapua\u2122 instance. For the remaining of this tutorial we'll assume a connection with the Kapua\u2122 was correctly established. Data publisher \u00b6 To publish the collected data on the Cloud we'll need to create a new Cloud Publisher through the Kura\u2122 web interface. Go to \"Cloud Connections\" and press \"New Pub/Sub\", in the example below we'll call our new publisher KapuaSenseHatPublisher . To keep things clean we'll create a new topic called SenseHat . To do so we'll move to the KapuaSenseHatPublisher configuration and we'll update the Application Topic field to A1/SenseHat SenseHat driver \u00b6 Kura\u2122 provides a driver that allows to interact to a RaspberryPi SenseHat device using Kura Driver, Asset and Wires frameworks . From the Kura\u2122 documentation: Eclipse Kura introduces a model based on the concepts of Drivers and Assets to simplify the communication with the field devices attached to a gateway. A Driver encapsulates the communication protocol and its configuration parameters, dealing with the low-level characteristics of the field protocol. It opens, closes and performs the communication with the end field device. It also exposes field protocol specific information that can be used by upper levels of abstraction to simplify the interaction with the end devices. An Asset is a logical representation of a field device, described by a list of Channels . The Asset uses a specific Driver instance to communicate with the underlying device and it models a generic device resource as a Channel. A register in a PLC or a GATT Characteristic in a Bluetooth device are examples of Channels. In this way, each Asset has multiple Channels for reading and writing data from/to an Industrial Device. The Kura Sense Hat driver requires a few changes on the Raspberry Pi: Configured SenseHat: see SenseHat documentation I2C interface should be unlocked using sudo raspi-config As others Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace. It consists of two packages: SenseHat Example Driver . SenseHat Support Library We need to install both. Complete installation instructions are available here . Driver configuration \u00b6 We now need to configure the driver to access the sensors on the SenseHat. Move to the \"Driver and Assets\" section of the web UI and create a new driver. We'll call it driver-sensehat . Then add a new Asset (which we'll call asset-sensehat ) to this driver and configure it as per the screenshots below. We'll need a Channel for every sensor we want to access. Refer to the following table for the driver parameters: name type value.type resource ACC_X READ FLOAT ACCELERATION_X ACC_Y READ FLOAT ACCELERATION_Y ACC_Z READ FLOAT ACCELERATION_Z GYRO_X READ FLOAT GYROSCOPE_X GYRO_Y READ FLOAT GYROSCOPE_Y GYRO_Z READ FLOAT GYROSCOPE_Z HUMIDITY READ FLOAT HUMIDITY PRESSURE READ FLOAT PRESSURE TEMP_HUM READ FLOAT TEMPERATURE_FROM_HUMIDITY TEMP_PRESS READ FLOAT TEMPERATURE_FROM_PRESSURE After correctly configuring it you should see the data in the \"Data\" page of the UI. Wire graph \u00b6 Now that we have our Driver and Cloud Publisher ready we can put everything together with a Kura Wire Graph . From Kura\u2122 documentation: The Kura\u2122 Wires feature aims to simplify the development of IoT Edge Computing Applications leveraging reusable configurable components that can be wired together and which, eventually, allows configurable cooperation between these components. In the dataflow programming model, the application logic is expressed as a directed graph (flow) where each node can have inputs, outputs, and independent processing units. There are nodes that only produce outputs and ones that only consume inputs, which usually represent the start and the end of the flow. The inner-graph nodes process the inputs and produce outputs for downstream nodes. The processing unit of a node executes independently and does not affect the execution of other nodes. Thus, the nodes are highly reusable and portable. Move to the \"Wire Graph\" section of the UI. We'll need a graph with three components: A Timer which will dictate the sample rate at which we will collect data coming from the Sense Hat A WireAsset for the Sense Hat driver asset A Publisher for the Kapua publisher we created before. The resulting Wire Graph will look like this: Timer \u00b6 Configure the timer such that it will poll the SenseHat each second, this can be done by setting the simple.interval to 1 . WireAsset \u00b6 Select the driver-sensehat when creating the WireAsset. No further configuration is needed for this component. Publisher \u00b6 Create a \"Publisher\" Wire component and select the KapuaSensehatPublisher from the target filter. Don't forget to press \"Apply\" to start the Wire Graph! Collect the data \u00b6 At this point you should see data coming from the Rasperry Pi from the Kapua\u2122 console under the SenseHat topic. You can download the .csv file directly from the console using the \" Export to CSV \" button. Model building and training \u00b6 Overview \u00b6 We will now use the data collected in the previous section to train an artificial neural network-based Anomaly Detector of our design. To this end we will use an Autoencoder model. To understand why we choose such model we need to understand how it works. From Wikipedia : An autoencoder is a type of artificial neural network used to learn efficient codings of unlabeled data (unsupervised learning). The encoding is validated and refined by attempting to regenerate the input from the encoding. The autoencoder learns a representation (encoding) for a set of data, typically for dimensionality reduction, by training the network to ignore insignificant data (\u201cnoise\u201d). Another application for autoencoders is anomaly detection . By learning to replicate the most salient features in the training data [...] the model is encouraged to learn to precisely reproduce the most frequently observed characteristics. When facing anomalies, the model should worsen its reconstruction performance. In most cases, only data with normal instances are used to train the autoencoder; in others, the frequency of anomalies is small compared to the observation set so that its contribution to the learned representation could be ignored. After training, the autoencoder will accurately reconstruct \"normal\" data, while failing to do so with unfamiliar anomalous data . Reconstruction error (the error between the original data and its low dimensional reconstruction) is used as an anomaly score to detect anomalies In simple terms: The Autoencoder is a artificial neural network model that learns how to reconstruct the input data at the output. If trained on \"normal\" data, it learns to recontruct only normal data and fails to reconstruct anomalies. We can detect anomalies by computing the reconstruction error of the Autoencoder. If the error is above a certain threshold (which we will decide) the input sample is an anomaly. Why did we choose this approach over others? The Autoencoder falls in the \" Unsupervised Learning \" category: it doesn't need labeled data to be trained i.e. we don't need to go through all the dataset and manually label the samples as \"normal\" or \"anomaly\" ( Supervised Learning ). Simpler data collection: we just need to provide it with the \"normal\" data. We don't need to artificially generate anomalies to train it on them. Data Processing \u00b6 We can now work on our .csv file downloaded from Kapua. For demonstration purposes an already available dataset is provided within this repository. If you're running this notebook through Google Colab you'll need to download the dataset running the cell below: In [1]: Copied! ! wget https : // raw . githubusercontent . com / mattdibi / eclipsecon - edgeAI - talk / master / notebook / train - data - raw . csv !wget https://raw.githubusercontent.com/mattdibi/eclipsecon-edgeAI-talk/master/notebook/train-data-raw.csv --2022-10-18 15:32:34-- https://raw.githubusercontent.com/mattdibi/eclipsecon-edgeAI-talk/master/notebook/train-data-raw.csv Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 13288126 (13M) [text/plain] Saving to: \u2018train-data-raw.csv.1\u2019 train-data-raw.csv. 100%[===================>] 12,67M 4,56MB/s in 2,8s 2022-10-18 15:32:38 (4,56 MB/s) - \u2018train-data-raw.csv.1\u2019 saved [13288126/13288126] In [2]: Copied! ! ls *. csv !ls *.csv train-data-raw.csv Let's start taking a look at the content of this dataset, we'll use pandas (Python Data Analysis library) for this. In [3]: Copied! import pandas as pd raw_data = pd . read_csv ( \"./train-data-raw.csv\" ) raw_data . head () import pandas as pd raw_data = pd.read_csv(\"./train-data-raw.csv\") raw_data.head() Out[3]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } ID TIMESTAMP MAGNET_X TEMP_HUM_timestamp MAGNET_Z MAGNET_Y ACC_Y ACC_X GYRO_Y_timestamp ACC_Z ... PRESSURE_timestamp MAGNET_X_timestamp ACC_X_timestamp GYRO_Z_timestamp HUMIDITY_timestamp assetName ACC_Z_timestamp GYRO_X GYRO_Y GYRO_Z 0 1 1645778791786 -2.680372 1645778791413 5.036951 8.646852 0.004364 0.080122 1645778791413 0.984048 ... 1645778791413 1645778791413 1645778791413 1645778791413 1645778791413 asset-sensehat 1645778791413 0.053243 0.028920 0.036950 1 2 1645778792381 -3.110756 1645778792378 5.952562 10.521458 0.005091 0.080122 1645778792378 0.992090 ... 1645778792378 1645778792378 1645778792378 1645778792378 1645778792378 asset-sensehat 1645778792378 -0.051105 -0.028920 -0.037256 2 3 1645778793412 -3.482263 1645778793408 6.719675 11.944528 0.005334 0.080122 1645778793408 0.986729 ... 1645778793408 1645778793408 1645778793408 1645778793408 1645778793408 asset-sensehat 1645778793408 -0.025253 0.025560 0.038478 3 4 1645778794411 -3.813552 1645778794407 7.375115 13.093461 0.006061 0.080122 1645778794407 0.990384 ... 1645778794407 1645778794407 1645778794407 1645778794407 1645778794407 asset-sensehat 1645778794407 0.100695 -0.023422 -0.037867 4 5 1645778795411 -4.050513 1645778795407 7.854155 14.029530 0.004849 0.080607 1645778795407 0.988922 ... 1645778795407 1645778795407 1645778795407 1645778795407 1645778795407 asset-sensehat 1645778795407 -0.100389 0.021895 0.038172 5 rows \u00d7 29 columns Feature selection \u00b6 As you might notice there's some information in the dataset we don't care about and are not meaningful for our application: ID The various timestamps assetName which doesn't change Then we can remove them from the dataset. In [4]: Copied! features = [ 'ACC_Y' , 'ACC_X' , 'ACC_Z' , 'PRESSURE' , 'TEMP_PRESS' , 'TEMP_HUM' , 'HUMIDITY' , 'GYRO_X' , 'GYRO_Y' , 'GYRO_Z' ] data = raw_data [ features ] data . head () features = ['ACC_Y', 'ACC_X', 'ACC_Z', 'PRESSURE', 'TEMP_PRESS', 'TEMP_HUM', 'HUMIDITY', 'GYRO_X', 'GYRO_Y', 'GYRO_Z'] data = raw_data[features] data.head() Out[4]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } ACC_Y ACC_X ACC_Z PRESSURE TEMP_PRESS TEMP_HUM HUMIDITY GYRO_X GYRO_Y GYRO_Z 0 0.004364 0.080122 0.984048 992.322998 38.724998 40.330822 19.487146 0.053243 0.028920 0.036950 1 0.005091 0.080122 0.992090 992.288330 38.772915 40.385788 19.465750 -0.051105 -0.028920 -0.037256 2 0.005334 0.080122 0.986729 992.275635 38.795834 40.349144 19.572731 -0.025253 0.025560 0.038478 3 0.006061 0.080122 0.990384 992.279053 38.797916 40.330822 19.358767 0.100695 -0.023422 -0.037867 4 0.004849 0.080607 0.988922 992.333008 38.845833 40.385788 19.390862 -0.100389 0.021895 0.038172 In [5]: Copied! % matplotlib inline import matplotlib.pyplot as plt data . hist ( bins = 50 , figsize = ( 20 , 15 )) plt . show () %matplotlib inline import matplotlib.pyplot as plt data.hist(bins=50, figsize=(20,15)) plt.show() Note : Some of you might notice that this is a really simple dataset: some of the input data (like GYRO_* and ACC_* ) do not change much over time. Such a dataset is not very challenging and a few, well-placed, thresholds might be sufficient to spot anomalous behaviour. For this tutorial we decided to keep things simple and easy to replicate. Anomalies can be simply triggered by moving the Raspberry Pi around. Keep in mind that this approach is generic: any dataset from any appliance/connected device can be processed in the same way we're showing here. That's the magic of neural networks! Feature scaling \u00b6 AI models don't perform well when the input numerical attributes have very different scales. As you can see ACC_X , ACC_Y and ACC_Z range from 0 to 1, while the PRESSURE have far higher values. There are two common ways to address this: normalization and standardization . Normalization (a.k.a. Min-max scaling) shifts and rescales values so that they end up ranging from 0 to 1. This can be done by subtracting the min value and dividing by the max minus the min. x' = $\\frac{x - min(x)}{max(x) - min(x)}$ Standardization makes the values of each feature in the data have zero-mean (when subtracting the mean in the numerator) and unit-variance. The general method of calculation is to determine the distribution mean and standard deviation for each feature. Next we subtract the mean from each feature. Then we divide the values (mean is already subtracted) of each feature by its standard deviation. x' = $\\frac{x - avg(x)}{\\sigma}$ Fortunately for us scikit-learn library provides a function for both of them. In this case we'll use normalization because it works well for this application. In [6]: Copied! print ( \"Data used in the Triton preprocessor\" ) print ( \"-----------Min-----------\" ) print ( data . min ()) print ( \"-----------Max-----------\" ) print ( data . max ()) print ( \"-------------------------\" ) print(\"Data used in the Triton preprocessor\") print(\"-----------Min-----------\") print(data.min()) print(\"-----------Max-----------\") print(data.max()) print(\"-------------------------\") Data used in the Triton preprocessor -----------Min----------- ACC_Y -0.132551 ACC_X -0.049693 ACC_Z 0.759847 PRESSURE 976.001709 TEMP_PRESS 38.724998 TEMP_HUM 40.220890 HUMIDITY 13.003981 GYRO_X -1.937896 GYRO_Y -0.265019 GYRO_Z -0.250647 dtype: float64 -----------Max----------- ACC_Y 0.093099 ACC_X 0.150289 ACC_Z 1.177543 PRESSURE 1007.996338 TEMP_PRESS 46.093750 TEMP_HUM 48.355824 HUMIDITY 23.506138 GYRO_X 1.923712 GYRO_Y 0.219204 GYRO_Z 0.671759 dtype: float64 ------------------------- In [7]: Copied! from sklearn.preprocessing import MinMaxScaler scaler = MinMaxScaler () scaled_data = scaler . fit_transform ( data . to_numpy ()) from sklearn.preprocessing import MinMaxScaler scaler = MinMaxScaler() scaled_data = scaler.fit_transform(data.to_numpy()) In [8]: Copied! pd . DataFrame ( scaled_data ) . describe () pd.DataFrame(scaled_data).describe() Out[8]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } 0 1 2 3 4 5 6 7 8 9 count 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 mean 0.603124 0.674196 0.550454 0.526446 0.605576 0.552252 0.466400 0.501160 0.545457 0.271295 std 0.049333 0.015135 0.031627 0.054050 0.288300 0.256587 0.176293 0.062908 0.067678 0.014665 min 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 25% 0.597087 0.667343 0.544924 0.481917 0.501060 0.441442 0.325637 0.501348 0.544670 0.270709 50% 0.603534 0.673413 0.551342 0.521377 0.655357 0.608108 0.511715 0.501841 0.547096 0.271685 75% 0.611055 0.680698 0.555426 0.552892 0.819339 0.734234 0.575212 0.502407 0.549386 0.272577 max 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 Train test split \u00b6 The only way to know how well a model will generalize to new data points is to try it on new data. To do so we split our data into two sets: the training set and the test set. To do so we'll use a function from scikit-learn . In [9]: Copied! from sklearn.model_selection import train_test_split import numpy as np x_train , x_test = train_test_split ( scaled_data , test_size = 0.3 , random_state = 42 ) x_train = x_train . astype ( np . float32 ) x_test = x_test . astype ( np . float32 ) from sklearn.model_selection import train_test_split import numpy as np x_train, x_test = train_test_split(scaled_data, test_size=0.3, random_state=42) x_train = x_train.astype(np.float32) x_test = x_test.astype(np.float32) Model training \u00b6 We can now leverage the Keras API of Tensorflow for creating our Autoencoder and then train it on our dataset. We'll design a neural network architecture such that we impose a bottleneck in the network which forces a compressed knowledge representation of the original input (also called the latent-space representation ). If the input features were each independent of one another, this compression and subsequent reconstruction would be a very difficult task. However, if some sort of structure exists in the data (ie. correlations between input features), this structure can be learned and consequently leveraged when forcing the input through the network's bottleneck. The bottleneck consists of reducing the number of neurons for each layer of the neural network up to a certain point, and then increase the number until the original input number is reached. This will result in a hourglass shape which is typical for the Autoencoders. Build the Autoencoder model \u00b6 In this example we'll use a basic fully-connected autoencoder but keep in mind that autoencoders can be built with different classes of neural network (i.e. Convolutional Neural Networks, Recurrent Neural Networks etc). In [10]: Copied! import os os . environ [ 'TF_CPP_MIN_LOG_LEVEL' ] = '2' # Avoid AVX2 error from tensorflow.keras.models import Model from tensorflow.keras.layers import Input , Dense , Dropout def create_model ( input_dim ): # The encoder will consist of a number of dense layers that decrease in size # as we taper down towards the bottleneck of the network, the latent space input_data = Input ( shape = ( input_dim ,), name = 'INPUT0' ) # hidden layers encoder = Dense ( 9 , activation = 'tanh' , name = 'encoder_1' )( input_data ) encoder = Dropout ( .15 )( encoder ) encoder = Dense ( 6 , activation = 'tanh' , name = 'encoder_2' )( encoder ) encoder = Dropout ( .15 )( encoder ) # bottleneck layer latent_encoding = Dense ( 3 , activation = 'linear' , name = 'latent_encoding' )( encoder ) # The decoder network is a mirror image of the encoder network decoder = Dense ( 6 , activation = 'tanh' , name = 'decoder_1' )( latent_encoding ) decoder = Dropout ( .15 )( decoder ) decoder = Dense ( 9 , activation = 'tanh' , name = 'decoder_2' )( decoder ) decoder = Dropout ( .15 )( decoder ) # The output is the same dimension as the input data we are reconstructing reconstructed_data = Dense ( input_dim , activation = 'linear' , name = 'OUTPUT0' )( decoder ) autoencoder_model = Model ( input_data , reconstructed_data ) return autoencoder_model import os os.environ['TF_CPP_MIN_LOG_LEVEL']='2' # Avoid AVX2 error from tensorflow.keras.models import Model from tensorflow.keras.layers import Input, Dense, Dropout def create_model(input_dim): # The encoder will consist of a number of dense layers that decrease in size # as we taper down towards the bottleneck of the network, the latent space input_data = Input(shape=(input_dim,), name='INPUT0') # hidden layers encoder = Dense(9, activation='tanh', name='encoder_1')(input_data) encoder = Dropout(.15)(encoder) encoder = Dense(6, activation='tanh', name='encoder_2')(encoder) encoder = Dropout(.15)(encoder) # bottleneck layer latent_encoding = Dense(3, activation='linear', name='latent_encoding')(encoder) # The decoder network is a mirror image of the encoder network decoder = Dense(6, activation='tanh', name='decoder_1')(latent_encoding) decoder = Dropout(.15)(decoder) decoder = Dense(9, activation='tanh', name='decoder_2')(decoder) decoder = Dropout(.15)(decoder) # The output is the same dimension as the input data we are reconstructing reconstructed_data = Dense(input_dim, activation='linear', name='OUTPUT0')(decoder) autoencoder_model = Model(input_data, reconstructed_data) return autoencoder_model In [11]: Copied! autoencoder_model = create_model ( len ( features )) autoencoder_model . summary () autoencoder_model = create_model(len(features)) autoencoder_model.summary() Model: \"model\" _________________________________________________________________ Layer (type) Output Shape Param # ================================================================= INPUT0 (InputLayer) [(None, 10)] 0 encoder_1 (Dense) (None, 9) 99 dropout (Dropout) (None, 9) 0 encoder_2 (Dense) (None, 6) 60 dropout_1 (Dropout) (None, 6) 0 latent_encoding (Dense) (None, 3) 21 decoder_1 (Dense) (None, 6) 24 dropout_2 (Dropout) (None, 6) 0 decoder_2 (Dense) (None, 9) 63 dropout_3 (Dropout) (None, 9) 0 OUTPUT0 (Dense) (None, 10) 100 ================================================================= Total params: 367 Trainable params: 367 Non-trainable params: 0 _________________________________________________________________ Model training \u00b6 As we already explained, the autoencoder is a type of artificial neural network used to learn efficient codings of unlabeled data. We'll use that to reconstruct the input at the output. To train an autoencoder we don\u2019t need to do anything fancy, just throw the raw input data at it. Autoencoders are considered an unsupervised learning technique since they don\u2019t need explicit labels to train on but to be more precise they are self-supervised because they generate their own labels from the training data. To train our neural network we need to have a performance metric to measure how well it is learning to reconstruct the data i.e. our loss function . The loss function in our example, which we need to minimize during our training, is the error between the input data and the data reconstructed by the autoencoder . We'll use the Mean Squared Error . MSE = $\\frac{1}{n}\\sum_{i=1}^{n}{(Y_i - Y'_i)^2}$ Where: $n$: is the number of features (10 in our example) $Y_i$: is the original data point i.e. the input of the autoencoder $Y'_i$: is the reconstructed data point i.e. the output of the autoencoder Before starting the training we need to set the hyperparameters ). Hyperparameters are parameters whose values control the learning process and determine the values of model parameters that a learning algorithm ends up learning. These are the learning_rate , max_epochs , optimizer and the batch_size you see in the code snippet below. You may ask yourself how to set them, it all comes down to trial and error. Try tweaking them below and see how they affect the learning process... A good explaination of their meaning can be found in the Keras documentation . In [12]: Copied! from tensorflow.keras import optimizers batch_size = 32 max_epochs = 15 learning_rate = .0001 opt = optimizers . Adam ( learning_rate = learning_rate ) autoencoder_model . compile ( optimizer = opt , loss = 'mse' , metrics = [ 'accuracy' ]) train_history = autoencoder_model . fit ( x_train , x_train , shuffle = True , epochs = max_epochs , batch_size = batch_size , validation_data = ( x_test , x_test )) from tensorflow.keras import optimizers batch_size = 32 max_epochs = 15 learning_rate = .0001 opt = optimizers.Adam(learning_rate=learning_rate) autoencoder_model.compile(optimizer=opt, loss='mse', metrics=['accuracy']) train_history = autoencoder_model.fit(x_train, x_train, shuffle=True, epochs=max_epochs, batch_size=batch_size, validation_data=(x_test, x_test)) Epoch 1/15 553/553 [==============================] - 1s 1ms/step - loss: 0.2282 - accuracy: 0.1129 - val_loss: 0.0922 - val_accuracy: 0.0045 Epoch 2/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0949 - accuracy: 0.1541 - val_loss: 0.0279 - val_accuracy: 0.4210 Epoch 3/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0613 - accuracy: 0.1779 - val_loss: 0.0206 - val_accuracy: 0.4426 Epoch 4/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0466 - accuracy: 0.2152 - val_loss: 0.0186 - val_accuracy: 0.5276 Epoch 5/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0366 - accuracy: 0.2514 - val_loss: 0.0157 - val_accuracy: 0.5944 Epoch 6/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0290 - accuracy: 0.3083 - val_loss: 0.0119 - val_accuracy: 0.6403 Epoch 7/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0228 - accuracy: 0.3930 - val_loss: 0.0078 - val_accuracy: 0.7182 Epoch 8/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0186 - accuracy: 0.4668 - val_loss: 0.0059 - val_accuracy: 0.8195 Epoch 9/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0157 - accuracy: 0.5021 - val_loss: 0.0048 - val_accuracy: 0.8256 Epoch 10/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0136 - accuracy: 0.5277 - val_loss: 0.0042 - val_accuracy: 0.8263 Epoch 11/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0121 - accuracy: 0.5409 - val_loss: 0.0037 - val_accuracy: 0.8296 Epoch 12/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0107 - accuracy: 0.5569 - val_loss: 0.0036 - val_accuracy: 0.8306 Epoch 13/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0098 - accuracy: 0.5857 - val_loss: 0.0034 - val_accuracy: 0.8256 Epoch 14/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0089 - accuracy: 0.6076 - val_loss: 0.0033 - val_accuracy: 0.8281 Epoch 15/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0083 - accuracy: 0.6337 - val_loss: 0.0032 - val_accuracy: 0.8262 In [13]: Copied! plt . plot ( train_history . history [ 'loss' ]) plt . plot ( train_history . history [ 'val_loss' ]) plt . legend ([ 'loss on train data' , 'loss on test data' ]) plt.plot(train_history.history['loss']) plt.plot(train_history.history['val_loss']) plt.legend(['loss on train data', 'loss on test data']) Out[13]: <matplotlib.legend.Legend at 0x16d0c3400> Here we can see the loss for the training set and the test set on the epochs. Some of you might notice that this graph is somewhat unexpected. Why the validation loss is lower than the train loss? This is the effect of the regularization: regularization terms and dropout layer are affecting the network during training. A good writeup of this effect can be found here . As an excercise try and compute the average MSE on the training set and the test set. You'll find that the MSE is lower in the training set! We can now save the model on disk as we'll use this later. In [14]: Copied! autoencoder_model . save ( \"./saved_model/autoencoder\" ) autoencoder_model.save(\"./saved_model/autoencoder\") WARNING:absl:Function `_wrapped_model` contains input name(s) INPUT0 with unsupported characters which will be renamed to input0 in the SavedModel. INFO:tensorflow:Assets written to: ./saved_model/autoencoder/assets INFO:tensorflow:Assets written to: ./saved_model/autoencoder/assets In [15]: Copied! ! ls ./ saved_model / autoencoder !ls ./saved_model/autoencoder assets keras_metadata.pb saved_model.pb variables Model evaluation \u00b6 We now have a model that reconstruct the input at the output... doesn't sounds really useful right? Let's see it in action. Let's take a sample from the test set and run it through our autoencoder. In [16]: Copied! input_sample = x_test [ 3 : 4 ] . copy () # Deep copy reconstructed_sample = autoencoder_model . predict ( input_sample ) print ( input_sample ) print ( reconstructed_sample ) input_sample = x_test[3:4].copy() # Deep copy reconstructed_sample = autoencoder_model.predict(input_sample) print(input_sample) print(reconstructed_sample) 1/1 [==============================] - 0s 109ms/step [[0.603534 0.6770555 0.54900813 0.5327966 0.6680801 0.6171171 0.5198642 0.50135666 0.54716927 0.2718224 ]] [[0.59638697 0.67410123 0.5484349 0.52024144 0.64766663 0.5916597 0.4445051 0.499677 0.54471916 0.26904327]] In [17]: Copied! import matplotlib.pyplot as plt index = np . arange ( 10 ) bar_width = 0.35 figure , ax = plt . subplots () inbar = ax . bar ( index , input_sample [ 0 ], bar_width , label = \"Input data\" ) recbar = ax . bar ( index + bar_width , reconstructed_sample [ 0 ], bar_width , label = \"Reconstruced data\" ) ax . set_xlabel ( 'Features' ) ax . set_xticks ( index + bar_width / 2 ) ax . set_xticklabels ( features , rotation = 45 ) ax . legend () import matplotlib.pyplot as plt index = np.arange(10) bar_width = 0.35 figure, ax = plt.subplots() inbar = ax.bar(index, input_sample[0], bar_width, label=\"Input data\") recbar = ax.bar(index+bar_width, reconstructed_sample[0], bar_width, label=\"Reconstruced data\") ax.set_xlabel('Features') ax.set_xticks(index + bar_width / 2) ax.set_xticklabels(features, rotation = 45) ax.legend() Out[17]: <matplotlib.legend.Legend at 0x16d184880> As we can see from the graph above it reconstructed the input fairly well. It is not perfect since the Autoencoder is lossy but it is good enough What happens if we manipulate this sample in a way the autoencoder doesn't expect (i.e. we introduce an anomaly )? Let's try and set the ACC_Z to a value the autoencoder has never seen before. In [18]: Copied! input_anomaly = input_sample . copy () # Deep copy input_anomaly [ 0 ][ 2 ] = 0.15 reconstructed_anomaly = autoencoder_model . predict ( input_anomaly ) print ( input_anomaly ) print ( reconstructed_anomaly ) input_anomaly = input_sample.copy() # Deep copy input_anomaly[0][2] = 0.15 reconstructed_anomaly = autoencoder_model.predict(input_anomaly) print(input_anomaly) print(reconstructed_anomaly) 1/1 [==============================] - 0s 21ms/step [[0.603534 0.6770555 0.15 0.5327966 0.6680801 0.6171171 0.5198642 0.50135666 0.54716927 0.2718224 ]] [[0.60162103 0.69035804 0.55594885 0.51874125 0.7346029 0.6700014 0.40932336 0.5034408 0.5424664 0.26861513]] In [19]: Copied! figure , ax = plt . subplots () inbar = ax . bar ( index , input_anomaly [ 0 ], bar_width , label = \"Input anomaly\" ) recbar = ax . bar ( index + bar_width , reconstructed_anomaly [ 0 ], bar_width , label = \"Reconstruced anomaly\" ) ax . set_xlabel ( 'Features' ) ax . set_xticks ( index + bar_width / 2 ) ax . set_xticklabels ( features , rotation = 45 ) ax . legend () figure, ax = plt.subplots() inbar = ax.bar(index, input_anomaly[0], bar_width, label=\"Input anomaly\") recbar = ax.bar(index+bar_width, reconstructed_anomaly[0], bar_width, label=\"Reconstruced anomaly\") ax.set_xlabel('Features') ax.set_xticks(index + bar_width / 2) ax.set_xticklabels(features, rotation = 45) ax.legend() Out[19]: <matplotlib.legend.Legend at 0x16d3c0220> The autoencoder fails to reconstruct the data it received at the input. This means that the reconstruction error is very high. In [20]: Copied! from sklearn.metrics import mean_squared_error print ( \"Anomaly %f \" % mean_squared_error ( input_anomaly [ 0 ], reconstructed_anomaly [ 0 ])) print ( \"Normal %f \" % mean_squared_error ( input_sample [ 0 ], reconstructed_sample [ 0 ])) from sklearn.metrics import mean_squared_error print(\"Anomaly %f\"% mean_squared_error(input_anomaly[0], reconstructed_anomaly[0])) print(\"Normal %f\"% mean_squared_error(input_sample[0], reconstructed_sample[0])) Anomaly 0.018465 Normal 0.000698 It's working as expected! We now need to decide when to trigger an alarm (i.e. classify an input sample as anomalous) from this reconstruction error. In other words we need to decide our threshold. There are multiple ways to set this value, in this example we'll use the Z-Score . From Wikipedia: In statistics, the standard score is the number of standard deviations by which the value of a raw score (i.e., an observed value or data point) is above or below the mean value of what is being observed or measured.[...] It is calculated by subtracting the population mean from an individual raw score and then dividing the difference by the population standard deviation. We'll consider a sample an anomaly if the Reconstruction Error Z-Score is not in the range [-2, +2]. This means that if the reconstruction error for a sample is more than 2 standard deviation away from the average reconstruction error computed on the test set, the sample is an anomaly. This choice is arbirtary, we can control the sensitivity of the detector by changing this range. In [21]: Copied! x_test_recon = autoencoder_model . predict ( x_test ) reconstruction_scores = np . mean (( x_test - x_test_recon ) ** 2 , axis = 1 ) # MSE reconstruction_scores_pd = pd . DataFrame ({ 'recon_score' : reconstruction_scores }) print ( reconstruction_scores_pd . describe ()) x_test_recon = autoencoder_model.predict(x_test) reconstruction_scores = np.mean((x_test - x_test_recon)**2, axis=1) # MSE reconstruction_scores_pd = pd.DataFrame({'recon_score': reconstruction_scores}) print(reconstruction_scores_pd.describe()) 237/237 [==============================] - 0s 620us/step recon_score count 7584.000000 mean 0.003175 std 0.005438 min 0.000098 25% 0.000816 50% 0.001211 75% 0.002108 max 0.106237 In [22]: Copied! def z_score ( mse_sample ): return ( mse_sample - reconstruction_scores_pd . mean ()) / reconstruction_scores_pd . std () def z_score(mse_sample): return (mse_sample - reconstruction_scores_pd.mean())/reconstruction_scores_pd.std() In [23]: Copied! mse_anomaly = mean_squared_error ( input_anomaly [ 0 ], reconstructed_anomaly [ 0 ]) mse_normal = mean_squared_error ( input_sample [ 0 ], reconstructed_sample [ 0 ]) z_score_anomaly = z_score ( mse_anomaly ) z_score_normal = z_score ( mse_normal ) print ( \"Anomaly Z-score %f \" % z_score_anomaly ) print ( \"Normal Z-score %f \" % z_score_normal ) mse_anomaly = mean_squared_error(input_anomaly[0], reconstructed_anomaly[0]) mse_normal = mean_squared_error(input_sample[0], reconstructed_sample[0]) z_score_anomaly = z_score(mse_anomaly) z_score_normal = z_score(mse_normal) print(\"Anomaly Z-score %f\"% z_score_anomaly) print(\"Normal Z-score %f\"% z_score_normal) Anomaly Z-score 2.811887 Normal Z-score -0.455488 We now have our anomaly detector... let's see how we can deploy it on our Kura\u2122-powered edge device. Model deployment \u00b6 To deploy our model on the target device we'll leverage Kura\u2122's newly added Nvidia\u2122 Triton Inferece Server integration. The Nvidia\u2122 Triton Inference Server is an open-source inference service software that enables the user to deploy trained AI models from any framework on GPU or CPU infrastructure. It supports all major frameworks like TensorFlow, TensorRT, PyTorch, ONNX Runtime, and even custom framework backend. With specific backends, it is also possible to run Python scripts, mainly for pre-and post-processing purposes, and exploit the DALI building block for optimized operations. For installation refer to the official Kura\u2122 and Triton documentation . For the rest of this tutorial we'll assume a Triton container is available on the target device. It can be simply installed with: docker pull nvcr.io/nvidia/tritonserver:22.07-tf2-python-py3 We'll also need to install Kura\u2122's Triton bundles: Triton Server Component : for Kura-Triton integration AI Wire Component : for making the Triton Inference Server available through the Kura Wires as a Wire component. Model conversion \u00b6 The first step in using Triton to serve your models is to place one or more models into a model repository i.e. a folder were the model are available for Triton to load. Depending on the type of the model and on what Triton capabilities you want to enable for the model, you may need to create a model configuration for the model. This configuration is a protobuf containing informations about runtime configuration and input/output shape accepted by the model. For our autoencoder model we'll need three \"models\": A Preprocessor for performing the operations described in the \"Data processing\" section (Wire envelop translation, feature selection and scaling) The Autoencoder model we exported in the \"Model training\" section A Postprocessor for performing the operations described in the \"Model evaluation\" section (Reconstruction error computation) To simplify the handling of these models and improve inference performance, we'll use an advanced feature of Triton wich is an Ensemble Model . From Triton official documentation: An ensemble model represents a pipeline of one or more models and the connection of input and output tensors between those models. Ensemble models are intended to be used to encapsulate a procedure that involves multiple models, such as \"data preprocessing -> inference -> data postprocessing\". Using ensemble models for this purpose can avoid the overhead of transferring intermediate tensors and minimize the number of requests that must be sent to Triton. Autoencoder \u00b6 As seen in the \"Model training\" section, our model is available as a Tensorflow SavedModel which can be simply loaded by the Triton Tensorflow backend . We just need to configure it properly. We'll start by creating the following folder structure tf_autoencoder_fp32 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.savedmodel \u2502 \u251c\u2500\u2500 assets \u2502 \u251c\u2500\u2500 keras_metadata.pb \u2502 \u251c\u2500\u2500 saved_model.pb \u2502 \u2514\u2500\u2500 variables \u2502 \u251c\u2500\u2500 variables.data-00000-of-00001 \u2502 \u2514\u2500\u2500 variables.index \u2514\u2500\u2500 config.pbtxt This can be done by copying the model we saved in the Model Training section: In [24]: Copied! ! rm - rf ./ tf_autoencoder_fp32 / && mkdir - p ./ tf_autoencoder_fp32 / 1 !rm -rf ./tf_autoencoder_fp32/ && mkdir -p ./tf_autoencoder_fp32/1 In [25]: Copied! ! ls !ls AD-EdgeAI.ipynb requirements.txt train-data-raw.csv README.md saved_model train-data-raw.csv.1 imgs tf_autoencoder_fp32 In [26]: Copied! cp - r ./ saved_model / autoencoder tf_autoencoder_fp32 / 1 / model . savedmodel cp -r ./saved_model/autoencoder tf_autoencoder_fp32/1/model.savedmodel In [27]: Copied! ! tree tf_autoencoder_fp32 !tree tf_autoencoder_fp32 tf_autoencoder_fp32 \u2514\u2500\u2500 1 \u2514\u2500\u2500 model.savedmodel \u251c\u2500\u2500 assets \u251c\u2500\u2500 keras_metadata.pb \u251c\u2500\u2500 saved_model.pb \u2514\u2500\u2500 variables \u251c\u2500\u2500 variables.data-00000-of-00001 \u2514\u2500\u2500 variables.index 4 directories, 4 files Now comes the hard part: we need to provide the model configuration (i.e. the config.pbtxt file). In the case of the autoencoder is pretty simple: name : \"tf_autoencoder_fp32\" backend : \"tensorflow\" max_batch_size : 0 input [ { name : \"INPUT0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] output [ { name : \"OUTPUT0\" data_type : TYPE_FP32 dims : [ - 1 , 10 ] } ] version_policy : { all { }} instance_group [{ kind : KIND_CPU }] Each model input and output must specify the name , data_type and dims . We already know all of these: name : corresponds to the layer name we've seen in the Model Training section. INPUT0 for the input and OUTPUT0 for the output. data_type : will be float since we didn't perform any quantization dims : is the shape of the in/out tensor. In this case it will correspond to an array with the same length as the number of features. Other interesting parameters of this configuration are: backend : where we set the backend for the model. In this case it will be the Tensorflow backend name : the name of the model that must correspond to the name of the folder instance_group : where we set where we want the model to run. In this case we'll use the CPU since we're on a Raspberry Pi but keep in mind that Triton support multiple accelerators. for a deep dive into the model configuration parameter take a look at the official documentation . Preprocessor \u00b6 As discussed in the \"Data processing\" section, before providing the incoming data to the autoencoder, we need to perform feature selection and scaling. In addition to these responsibilites, the Preprocessor will need to perform a sort of serialization of the data to comply to the input shape accepted by the Autoencoder. This is due to how Kura manages the data running on Wires. More details can be found here . To perform all of this we'll use the Python backend available in Triton. As described in the previous section we will need to provide the following folder structure: preprocessor \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.py \u2514\u2500\u2500 config.pbtxt Preprocessor Configuration \u00b6 As discussed in the official Kura documentation : The AI wire component takes a WireEnvelope as an input, it processes its records and feeds them to the specified preprocessing or inference model. ... The models that manage the input and the output must expect a list of inputs such that: each input corresponds to an entry of the WireRecord properties the entry key will become the input name (e.g. in the case of an asset, the channel name becomes the tensor name) input shape will be [1] Therefore for our input we'll have that each name corresponds to the names we've seen in the Data Collection section. The output needs to correspond to the input accepted by the model (i.e. INPUT0 ). name : \"preprocessor\" backend : \"python\" input [ { name : \"ACC_X\" data_type : TYPE_FP32 dims : [ 1 ] } ] input [ { name : \"ACC_Y\" data_type : TYPE_FP32 dims : [ 1 ] } ] ... input [ { name : \"TEMP_PRESS\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"INPUT0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] instance_group [{ kind : KIND_CPU }] Preprocessor Model \u00b6 As we've seen in the Data Processing section the Preprocessor is responsible for scaling the input features and serializing them in the tensor shape expected by the Autoencoder model. This can be done with the following python script: import numpy as np import json import triton_python_backend_utils as pb_utils class TritonPythonModel : def initialize ( self , args ): self . model_config = model_config = json . loads ( args [ 'model_config' ]) output0_config = pb_utils . get_output_config_by_name ( model_config , \"INPUT0\" ) self . output0_dtype = pb_utils . triton_string_to_numpy ( output0_config [ 'data_type' ]) def execute ( self , requests ): output0_dtype = self . output0_dtype responses = [] for request in requests : acc_x = pb_utils . get_input_tensor_by_name ( request , \"ACC_X\" ) . as_numpy () acc_y = pb_utils . get_input_tensor_by_name ( request , \"ACC_Y\" ) . as_numpy () acc_z = pb_utils . get_input_tensor_by_name ( request , \"ACC_Z\" ) . as_numpy () gyro_x = pb_utils . get_input_tensor_by_name ( request , \"GYRO_X\" ) . as_numpy () gyro_y = pb_utils . get_input_tensor_by_name ( request , \"GYRO_Y\" ) . as_numpy () gyro_z = pb_utils . get_input_tensor_by_name ( request , \"GYRO_Z\" ) . as_numpy () humidity = pb_utils . get_input_tensor_by_name ( request , \"HUMIDITY\" ) . as_numpy () pressure = pb_utils . get_input_tensor_by_name ( request , \"PRESSURE\" ) . as_numpy () temp_hum = pb_utils . get_input_tensor_by_name ( request , \"TEMP_HUM\" ) . as_numpy () temp_press = pb_utils . get_input_tensor_by_name ( request , \"TEMP_PRESS\" ) . as_numpy () out_0 = np . array ([ acc_y , acc_x , acc_z , pressure , temp_press , temp_hum , humidity , gyro_x , gyro_y , gyro_z ]) . transpose () # ACC_Y ACC_X ACC_Z PRESSURE TEMP_PRESS TEMP_HUM HUMIDITY GYRO_X GYRO_Y GYRO_Z min = np . array ([ - 0.132551 , - 0.049693 , 0.759847 , 976.001709 , 38.724998 , 40.220890 , 13.003981 , - 1.937896 , - 0.265019 , - 0.250647 ]) max = np . array ([ 0.093099 , 0.150289 , 1.177543 , 1007.996338 , 46.093750 , 48.355824 , 23.506138 , 1.923712 , 0.219204 , 0.671759 ]) # MinMax scaling out_0_scaled = ( out_0 - min ) / ( max - min ) # Create output tensor out_tensor_0 = pb_utils . Tensor ( \"INPUT0\" , out_0_scaled . astype ( output0_dtype )) inference_response = pb_utils . InferenceResponse ( output_tensors = [ out_tensor_0 ]) responses . append ( inference_response ) return responses Here there are two important things to note: The template we're using is taken from the Triton documentation and can be found here . The MinMax scaling must be the same we used in our training . For illustration purposes we wrote the min and max arrays we found in the Data Processing section but we could have serialized the MinMaxScaler using pickle instead. Postprocessor \u00b6 As discussed in the \"Data processing\" section, to perform the anomaly detection step we need to compute the Mean Squared Error between the recontructed data and the actual input data. Due to this the configuration of the Postprocessor model will be somewhat more complicated than before: in addition to the output of the Autoencoder model we will need the output of the Preprocessor model. To perform all of this we'll use the Python backend again. As described in the previous section we will need to provide the following folder structure: postprocessor \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.py \u2514\u2500\u2500 config.pbtxt Postprocessor Configuration \u00b6 name : \"postprocessor\" backend : \"python\" input [ { name : \"RECONSTR0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] input [ { name : \"ORIG0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] output [ { name : \"ANOMALY_SCORE0\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"ANOMALY0\" data_type : TYPE_BOOL dims : [ 1 ] } ] instance_group [{ kind : KIND_CPU }] As we can see we have two inputs and two outputs: The first input tensor is the reconstruction performed by the autoencoder model The second input tensor is the original data (already scaled and serialized by the Preprocessor model) The first output is the anomaly score i.e. the reconstruction error between the original and the reconstructed data. The second output is a boolean representing whether the data constitute an anomaly or not Let's see how this is computed by the Python model. Postprocessor Model \u00b6 import numpy as np import json import triton_python_backend_utils as pb_utils def z_score ( mse ): return ( mse - MEAN_MSE ) / STD_MSE class TritonPythonModel : def initialize ( self , args ): self . model_config = model_config = json . loads ( args [ 'model_config' ]) output0_config = pb_utils . get_output_config_by_name ( model_config , \"ANOMALY_SCORE0\" ) output1_config = pb_utils . get_output_config_by_name ( model_config , \"ANOMALY0\" ) self . output0_dtype = pb_utils . triton_string_to_numpy ( output0_config [ 'data_type' ]) self . output1_dtype = pb_utils . triton_string_to_numpy ( output1_config [ 'data_type' ]) def execute ( self , requests ): output0_dtype = self . output0_dtype output1_dtype = self . output1_dtype responses = [] for request in requests : # Get input x_recon = pb_utils . get_input_tensor_by_name ( request , \"RECONSTR0\" ) . as_numpy () x_orig = pb_utils . get_input_tensor_by_name ( request , \"ORIG0\" ) . as_numpy () # Get Mean square error between reconstructed input and original input reconstruction_score = np . mean (( x_orig - x_recon ) ** 2 , axis = 1 ) # Z-Score of Mean square error must be inside [-2; 2] anomaly = np . array ([ z_score ( reconstruction_score ) < - 2.0 or z_score ( reconstruction_score ) > 2.0 ]) # Create output tensors out_tensor_0 = pb_utils . Tensor ( \"ANOMALY_SCORE0\" , reconstruction_score . astype ( output0_dtype )) out_tensor_1 = pb_utils . Tensor ( \"ANOMALY0\" , anomaly . astype ( output1_dtype )) inference_response = pb_utils . InferenceResponse ( output_tensors = [ out_tensor_0 , out_tensor_1 ]) responses . append ( inference_response ) return responses As you can see the script is simple: It gets the input tensors It computes the Mean Squared Error between the inputs (which is what we called the reconstruction error) It computes the Z-Score of the MSE computed for the current sample and flags it as an anomaly if it is farther than 2 standard deviations away from the average MSE. Note : MEAN_MSE and STD_MSE are the mean value and the standard deviation of the Mean Squared Error computed on the test set and correspond to the reconstruction_scores_pd.mean() and reconstruction_scores_pd.std() we used in the previous section. We didn't set them as they change for every training performed on the Autoencoder. Be sure to set it to their proper values before trying this model on the Triton server! Ensemble model \u00b6 To make things easier for ourselves and improve performance we'll consolidate the AI pipeline into an Ensemble Model . We will need to provide the following folder structure: ensemble_pipeline \u251c\u2500\u2500 1 \u2514\u2500\u2500 config.pbtxt Note that the 1 folder is empty . The ensemble model essentially describe how to connect the models that belong to the processing pipeline . Therefore we'll need to focus on the configuration only. name : \"ensemble_pipeline\" platform : \"ensemble\" max_batch_size : 0 input [ { name : \"ACC_X\" data_type : TYPE_FP32 dims : [ 1 ] } ] input [ { name : \"ACC_Y\" data_type : TYPE_FP32 dims : [ 1 ] } ] ... input [ { name : \"TEMP_PRESS\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"ANOMALY_SCORE0\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"ANOMALY0\" data_type : TYPE_BOOL dims : [ 1 ] } ] ensemble_scheduling { step [ { model_name : \"preprocessor\" model_version : - 1 input_map { key : \"ACC_X\" value : \"ACC_X\" } input_map { key : \"ACC_Y\" value : \"ACC_Y\" } ... input_map { key : \"TEMP_PRESS\" value : \"TEMP_PRESS\" } output_map { key : \"INPUT0\" value : \"preprocess_out\" } }, { model_name : \"tf_autoencoder_fp32\" model_version : - 1 input_map { key : \"INPUT0\" value : \"preprocess_out\" } output_map { key : \"OUTPUT0\" value : \"autoencoder_output\" } }, { model_name : \"postprocessor\" model_version : - 1 input_map { key : \"RECONSTR0\" value : \"autoencoder_output\" } input_map { key : \"ORIG0\" value : \"preprocess_out\" } output_map { key : \"ANOMALY_SCORE0\" value : \"ANOMALY_SCORE0\" } output_map { key : \"ANOMALY0\" value : \"ANOMALY0\" } } ] } The configuration is split in two main parts: The first is the usual configuration we've seen before: we describe what are the input and the output of our model. In this case the input will correspond to the input of the first model of the pipeline (the Preprocessor) and the output to the output of the last model of the pipeline (the Postprocessor) The second part describe how to map the input/output of the models within the pipeline To better visualize the configuration we can look at the graph below. Conversion results \u00b6 At this point we should have a folder structure that looks like this: models \u251c\u2500\u2500 ensemble_pipeline \u2502 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 config.pbtxt \u251c\u2500\u2500 postprocessor \u2502 \u251c\u2500\u2500 1 \u2502 \u2502 \u2514\u2500\u2500 model.py \u2502 \u2514\u2500\u2500 config.pbtxt \u251c\u2500\u2500 preprocessor \u2502 \u251c\u2500\u2500 1 \u2502 \u2502 \u2514\u2500\u2500 model.py \u2502 \u2514\u2500\u2500 config.pbtxt \u2514\u2500\u2500 tf_autoencoder_fp32 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.savedmodel \u2502 \u251c\u2500\u2500 assets \u2502 \u251c\u2500\u2500 keras_metadata.pb \u2502 \u251c\u2500\u2500 saved_model.pb \u2502 \u2514\u2500\u2500 variables \u2502 \u251c\u2500\u2500 variables.data-00000-of-00001 \u2502 \u2514\u2500\u2500 variables.index \u2514\u2500\u2500 config.pbtxt Kura Deployment \u00b6 We can now move our pipeline to the target device for inference on the edge. We want to perform anomaly detection in real time, directly within the edge device, using the same data we used to collect for our training. Triton component configuration \u00b6 To do so we need to copy the models folder on the target device. For this example we'll use the /home/pi/models path. We can now move to the Kura web UI and create a new Triton Server Container Service component instance. The complete documentation can be found here . In this example we'll call it TritonContainerService . Then we'll need to configure it to run our models. Move to the TritonContainerService configuration interface and set the following parameters: Image name / Image tag : use the name and tag of the Triton container image you installed. We're using nvcr.io/nvidia/tritonserver:22.07-tf2-python-py3 in this example. Local model repository path : in our example is /home/pi/models Inference Models : we'll need to load all the models of the pipeline so: preprocessor,postprocessor,tf_autoencoder_fp32,ensemble_pipeline Optional configuration for the local backends : tensorflow,version=2 since Tensorflow 2 is the only available Tensorflow backend in the Triton container image we're using. You can leave everything else as default. Once you press the \" Apply \" button Kura will create a new container from the Triton image we set and spin up the service with our models loaded. pi@raspberrypi:~ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 4deae2857b6f nvcr.io/nvidia/tritonserver:22.07-tf2-python-py3 \"tritonserver --mode\u2026\" 13 seconds ago Up 11 seconds 0 .0.0.0:4000->8000/tcp, :::4000->8000/tcp, 0 .0.0.0:4001->8001/tcp, :::4001->8001/tcp, 0 .0.0.0:4002->8002/tcp, :::4002->8002/tcp tritonserver-kura Note : if no container is created check that the \" Container Orchestration Service \" is enabled in the Kura UI. Full documentation for the service can be found here . Note : if you see an error in the logs like \"_Internal: Unable to initialize shared memory key 'triton_python_backend_shm_region 2' to requested size (67108864 bytes). If you are running Triton inside docker, use '--shm-size' flag to control the shared memory region size. Each Python backend model instance requires at least 64MBs of shared memory. \", you can update the default shared memory size allocated by the Docker daemon. Go to /etc/docker/daemon.json , set \"default-shm-size\": \"200m\" and restart the Docker daemon with: sudo systemctl restart docker . Wire Graph \u00b6 Finally we can move to the \" Wire Graph \" UI and create the AI component (in the Emitters/Receiver menu) for interfacing with the Triton instance we just created. We'll call it Triton in this example. We just need to change two parameter in the configuration: InferenceEngineService Target Filter : we need to select the TritonContainerService we created at the step above inference.model.name : Since we're using an ensemble pipeline we need only that as our inference model. The resulting wire graph is the following: And that's it! We should now see the anomaly detection results coming to Kapua in addition to the SenseHat data. Complete Example \u00b6 A similar but more complete example of the feature presented in this notebook is available in the official Kura\u2122 repository containing all the code and the configuration needed to make it work. Give it a try!","title":"Edge AI Anomaly Detection"},{"location":"tutorials/AD-EdgeAI/#edge-ai-anomaly-detection","text":"","title":"Edge AI Anomaly Detection"},{"location":"tutorials/AD-EdgeAI/#overview","text":"This document contains the code and the instructions for our EclipseCON 2022 Talk: \" How to Train Your Dragon and Its Friends: AI on the Edge with Eclipse Kura\u2122 \" This notebook can also be viewed and ran on Google Colab . In this example scenario we will collect the data provided by a Raspberry Pi Sense HAT using Eclipse Kura\u2122 and upload them to a Eclipse Kapua\u2122 instance. We will then download this data and train an AI-based anomaly detector using TensorFlow . Finally we will deploy the trained anomaly detector model leveraging Nvidia Triton\u2122 Inference Server and Eclipse Kura\u2122 integration. We'll subdivide this example scenario in three main sections: Data collection : in this section we'll discuss how to retrieve training data from the field leveraging Eclipse Kura\u2122 and Eclipse Kapua\u2122 Model building and training : we'll further divide this section in three subsections: Data processing : where we'll show how to explore our training data and manipulate them to make them suitable for training (feature selection, scaling and dataset splitting). This will provide us with the \" Preprocessing \" stage of the resulting AI data-processing pipeline Model training : where we'll discuss how we can create a simple Autoencoder in Tensorflow Keras and how to train it. This will provide us with the \" Inference \" stage of the AI pipeline Model evaluation : where we'll cover how can we extract the high level data from the model output and ensure the model was trained correctly. This will provide us with the \" Postprocessing \" stage of the AI pipeline Model deployment : finally we will convert the model to make it suitable for running on Eclipse Kura\u2122 and Nvidia Triton\u2122 and deploy it on the edge.","title":"Overview"},{"location":"tutorials/AD-EdgeAI/#data-collection","text":"","title":"Data collection"},{"location":"tutorials/AD-EdgeAI/#overview","text":"In this setup we'll leverage Eclipe Kura\u2122 and Kapua\u2122 for retrieving data from a Raspberry Pi Sense HAT and upload them to the cloud. The Sense HAT is an add-on board for Raspberry Pi which provides an 8\u00d78 RGB LED matrix, a five-button joystick and includes the following sensors: Gyroscope Accelerometer Magnetometer Temperature Barometric pressure Humidity","title":"Overview"},{"location":"tutorials/AD-EdgeAI/#cloud-connection","text":"After setting up an Eclipse Kura\u2122 instance on the Raspberry Pi we'll need to connect it to an Eclipse Kapua\u2122 instance. An excellent tutorial on how to deploy a Kapua\u2122 instance using Docker is available in the official repository . For the purpose of this tutorial we'll assume a Kapua\u2122 instance is already running and is available for connection from Kura\u2122 After setting up the Kapua\u2122 instance you can refer to the official Kura\u2122 documentation for connecting the Raspberry Pi to the Kapua\u2122 instance. For the remaining of this tutorial we'll assume a connection with the Kapua\u2122 was correctly established.","title":"Cloud connection"},{"location":"tutorials/AD-EdgeAI/#data-publisher","text":"To publish the collected data on the Cloud we'll need to create a new Cloud Publisher through the Kura\u2122 web interface. Go to \"Cloud Connections\" and press \"New Pub/Sub\", in the example below we'll call our new publisher KapuaSenseHatPublisher . To keep things clean we'll create a new topic called SenseHat . To do so we'll move to the KapuaSenseHatPublisher configuration and we'll update the Application Topic field to A1/SenseHat","title":"Data publisher"},{"location":"tutorials/AD-EdgeAI/#sensehat-driver","text":"Kura\u2122 provides a driver that allows to interact to a RaspberryPi SenseHat device using Kura Driver, Asset and Wires frameworks . From the Kura\u2122 documentation: Eclipse Kura introduces a model based on the concepts of Drivers and Assets to simplify the communication with the field devices attached to a gateway. A Driver encapsulates the communication protocol and its configuration parameters, dealing with the low-level characteristics of the field protocol. It opens, closes and performs the communication with the end field device. It also exposes field protocol specific information that can be used by upper levels of abstraction to simplify the interaction with the end devices. An Asset is a logical representation of a field device, described by a list of Channels . The Asset uses a specific Driver instance to communicate with the underlying device and it models a generic device resource as a Channel. A register in a PLC or a GATT Characteristic in a Bluetooth device are examples of Channels. In this way, each Asset has multiple Channels for reading and writing data from/to an Industrial Device. The Kura Sense Hat driver requires a few changes on the Raspberry Pi: Configured SenseHat: see SenseHat documentation I2C interface should be unlocked using sudo raspi-config As others Drivers supported by Kura, it is distributed as a deployment package on the Eclipse Marketplace. It consists of two packages: SenseHat Example Driver . SenseHat Support Library We need to install both. Complete installation instructions are available here .","title":"SenseHat driver"},{"location":"tutorials/AD-EdgeAI/#driver-configuration","text":"We now need to configure the driver to access the sensors on the SenseHat. Move to the \"Driver and Assets\" section of the web UI and create a new driver. We'll call it driver-sensehat . Then add a new Asset (which we'll call asset-sensehat ) to this driver and configure it as per the screenshots below. We'll need a Channel for every sensor we want to access. Refer to the following table for the driver parameters: name type value.type resource ACC_X READ FLOAT ACCELERATION_X ACC_Y READ FLOAT ACCELERATION_Y ACC_Z READ FLOAT ACCELERATION_Z GYRO_X READ FLOAT GYROSCOPE_X GYRO_Y READ FLOAT GYROSCOPE_Y GYRO_Z READ FLOAT GYROSCOPE_Z HUMIDITY READ FLOAT HUMIDITY PRESSURE READ FLOAT PRESSURE TEMP_HUM READ FLOAT TEMPERATURE_FROM_HUMIDITY TEMP_PRESS READ FLOAT TEMPERATURE_FROM_PRESSURE After correctly configuring it you should see the data in the \"Data\" page of the UI.","title":"Driver configuration"},{"location":"tutorials/AD-EdgeAI/#wire-graph","text":"Now that we have our Driver and Cloud Publisher ready we can put everything together with a Kura Wire Graph . From Kura\u2122 documentation: The Kura\u2122 Wires feature aims to simplify the development of IoT Edge Computing Applications leveraging reusable configurable components that can be wired together and which, eventually, allows configurable cooperation between these components. In the dataflow programming model, the application logic is expressed as a directed graph (flow) where each node can have inputs, outputs, and independent processing units. There are nodes that only produce outputs and ones that only consume inputs, which usually represent the start and the end of the flow. The inner-graph nodes process the inputs and produce outputs for downstream nodes. The processing unit of a node executes independently and does not affect the execution of other nodes. Thus, the nodes are highly reusable and portable. Move to the \"Wire Graph\" section of the UI. We'll need a graph with three components: A Timer which will dictate the sample rate at which we will collect data coming from the Sense Hat A WireAsset for the Sense Hat driver asset A Publisher for the Kapua publisher we created before. The resulting Wire Graph will look like this:","title":"Wire graph"},{"location":"tutorials/AD-EdgeAI/#timer","text":"Configure the timer such that it will poll the SenseHat each second, this can be done by setting the simple.interval to 1 .","title":"Timer"},{"location":"tutorials/AD-EdgeAI/#wireasset","text":"Select the driver-sensehat when creating the WireAsset. No further configuration is needed for this component.","title":"WireAsset"},{"location":"tutorials/AD-EdgeAI/#publisher","text":"Create a \"Publisher\" Wire component and select the KapuaSensehatPublisher from the target filter. Don't forget to press \"Apply\" to start the Wire Graph!","title":"Publisher"},{"location":"tutorials/AD-EdgeAI/#collect-the-data","text":"At this point you should see data coming from the Rasperry Pi from the Kapua\u2122 console under the SenseHat topic. You can download the .csv file directly from the console using the \" Export to CSV \" button.","title":"Collect the data"},{"location":"tutorials/AD-EdgeAI/#model-building-and-training","text":"","title":"Model building and training"},{"location":"tutorials/AD-EdgeAI/#overview","text":"We will now use the data collected in the previous section to train an artificial neural network-based Anomaly Detector of our design. To this end we will use an Autoencoder model. To understand why we choose such model we need to understand how it works. From Wikipedia : An autoencoder is a type of artificial neural network used to learn efficient codings of unlabeled data (unsupervised learning). The encoding is validated and refined by attempting to regenerate the input from the encoding. The autoencoder learns a representation (encoding) for a set of data, typically for dimensionality reduction, by training the network to ignore insignificant data (\u201cnoise\u201d). Another application for autoencoders is anomaly detection . By learning to replicate the most salient features in the training data [...] the model is encouraged to learn to precisely reproduce the most frequently observed characteristics. When facing anomalies, the model should worsen its reconstruction performance. In most cases, only data with normal instances are used to train the autoencoder; in others, the frequency of anomalies is small compared to the observation set so that its contribution to the learned representation could be ignored. After training, the autoencoder will accurately reconstruct \"normal\" data, while failing to do so with unfamiliar anomalous data . Reconstruction error (the error between the original data and its low dimensional reconstruction) is used as an anomaly score to detect anomalies In simple terms: The Autoencoder is a artificial neural network model that learns how to reconstruct the input data at the output. If trained on \"normal\" data, it learns to recontruct only normal data and fails to reconstruct anomalies. We can detect anomalies by computing the reconstruction error of the Autoencoder. If the error is above a certain threshold (which we will decide) the input sample is an anomaly. Why did we choose this approach over others? The Autoencoder falls in the \" Unsupervised Learning \" category: it doesn't need labeled data to be trained i.e. we don't need to go through all the dataset and manually label the samples as \"normal\" or \"anomaly\" ( Supervised Learning ). Simpler data collection: we just need to provide it with the \"normal\" data. We don't need to artificially generate anomalies to train it on them.","title":"Overview"},{"location":"tutorials/AD-EdgeAI/#data-processing","text":"We can now work on our .csv file downloaded from Kapua. For demonstration purposes an already available dataset is provided within this repository. If you're running this notebook through Google Colab you'll need to download the dataset running the cell below: In [1]: Copied! ! wget https : // raw . githubusercontent . com / mattdibi / eclipsecon - edgeAI - talk / master / notebook / train - data - raw . csv !wget https://raw.githubusercontent.com/mattdibi/eclipsecon-edgeAI-talk/master/notebook/train-data-raw.csv --2022-10-18 15:32:34-- https://raw.githubusercontent.com/mattdibi/eclipsecon-edgeAI-talk/master/notebook/train-data-raw.csv Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 13288126 (13M) [text/plain] Saving to: \u2018train-data-raw.csv.1\u2019 train-data-raw.csv. 100%[===================>] 12,67M 4,56MB/s in 2,8s 2022-10-18 15:32:38 (4,56 MB/s) - \u2018train-data-raw.csv.1\u2019 saved [13288126/13288126] In [2]: Copied! ! ls *. csv !ls *.csv train-data-raw.csv Let's start taking a look at the content of this dataset, we'll use pandas (Python Data Analysis library) for this. In [3]: Copied! import pandas as pd raw_data = pd . read_csv ( \"./train-data-raw.csv\" ) raw_data . head () import pandas as pd raw_data = pd.read_csv(\"./train-data-raw.csv\") raw_data.head() Out[3]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } ID TIMESTAMP MAGNET_X TEMP_HUM_timestamp MAGNET_Z MAGNET_Y ACC_Y ACC_X GYRO_Y_timestamp ACC_Z ... PRESSURE_timestamp MAGNET_X_timestamp ACC_X_timestamp GYRO_Z_timestamp HUMIDITY_timestamp assetName ACC_Z_timestamp GYRO_X GYRO_Y GYRO_Z 0 1 1645778791786 -2.680372 1645778791413 5.036951 8.646852 0.004364 0.080122 1645778791413 0.984048 ... 1645778791413 1645778791413 1645778791413 1645778791413 1645778791413 asset-sensehat 1645778791413 0.053243 0.028920 0.036950 1 2 1645778792381 -3.110756 1645778792378 5.952562 10.521458 0.005091 0.080122 1645778792378 0.992090 ... 1645778792378 1645778792378 1645778792378 1645778792378 1645778792378 asset-sensehat 1645778792378 -0.051105 -0.028920 -0.037256 2 3 1645778793412 -3.482263 1645778793408 6.719675 11.944528 0.005334 0.080122 1645778793408 0.986729 ... 1645778793408 1645778793408 1645778793408 1645778793408 1645778793408 asset-sensehat 1645778793408 -0.025253 0.025560 0.038478 3 4 1645778794411 -3.813552 1645778794407 7.375115 13.093461 0.006061 0.080122 1645778794407 0.990384 ... 1645778794407 1645778794407 1645778794407 1645778794407 1645778794407 asset-sensehat 1645778794407 0.100695 -0.023422 -0.037867 4 5 1645778795411 -4.050513 1645778795407 7.854155 14.029530 0.004849 0.080607 1645778795407 0.988922 ... 1645778795407 1645778795407 1645778795407 1645778795407 1645778795407 asset-sensehat 1645778795407 -0.100389 0.021895 0.038172 5 rows \u00d7 29 columns","title":"Data Processing"},{"location":"tutorials/AD-EdgeAI/#feature-selection","text":"As you might notice there's some information in the dataset we don't care about and are not meaningful for our application: ID The various timestamps assetName which doesn't change Then we can remove them from the dataset. In [4]: Copied! features = [ 'ACC_Y' , 'ACC_X' , 'ACC_Z' , 'PRESSURE' , 'TEMP_PRESS' , 'TEMP_HUM' , 'HUMIDITY' , 'GYRO_X' , 'GYRO_Y' , 'GYRO_Z' ] data = raw_data [ features ] data . head () features = ['ACC_Y', 'ACC_X', 'ACC_Z', 'PRESSURE', 'TEMP_PRESS', 'TEMP_HUM', 'HUMIDITY', 'GYRO_X', 'GYRO_Y', 'GYRO_Z'] data = raw_data[features] data.head() Out[4]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } ACC_Y ACC_X ACC_Z PRESSURE TEMP_PRESS TEMP_HUM HUMIDITY GYRO_X GYRO_Y GYRO_Z 0 0.004364 0.080122 0.984048 992.322998 38.724998 40.330822 19.487146 0.053243 0.028920 0.036950 1 0.005091 0.080122 0.992090 992.288330 38.772915 40.385788 19.465750 -0.051105 -0.028920 -0.037256 2 0.005334 0.080122 0.986729 992.275635 38.795834 40.349144 19.572731 -0.025253 0.025560 0.038478 3 0.006061 0.080122 0.990384 992.279053 38.797916 40.330822 19.358767 0.100695 -0.023422 -0.037867 4 0.004849 0.080607 0.988922 992.333008 38.845833 40.385788 19.390862 -0.100389 0.021895 0.038172 In [5]: Copied! % matplotlib inline import matplotlib.pyplot as plt data . hist ( bins = 50 , figsize = ( 20 , 15 )) plt . show () %matplotlib inline import matplotlib.pyplot as plt data.hist(bins=50, figsize=(20,15)) plt.show() Note : Some of you might notice that this is a really simple dataset: some of the input data (like GYRO_* and ACC_* ) do not change much over time. Such a dataset is not very challenging and a few, well-placed, thresholds might be sufficient to spot anomalous behaviour. For this tutorial we decided to keep things simple and easy to replicate. Anomalies can be simply triggered by moving the Raspberry Pi around. Keep in mind that this approach is generic: any dataset from any appliance/connected device can be processed in the same way we're showing here. That's the magic of neural networks!","title":"Feature selection"},{"location":"tutorials/AD-EdgeAI/#feature-scaling","text":"AI models don't perform well when the input numerical attributes have very different scales. As you can see ACC_X , ACC_Y and ACC_Z range from 0 to 1, while the PRESSURE have far higher values. There are two common ways to address this: normalization and standardization . Normalization (a.k.a. Min-max scaling) shifts and rescales values so that they end up ranging from 0 to 1. This can be done by subtracting the min value and dividing by the max minus the min. x' = $\\frac{x - min(x)}{max(x) - min(x)}$ Standardization makes the values of each feature in the data have zero-mean (when subtracting the mean in the numerator) and unit-variance. The general method of calculation is to determine the distribution mean and standard deviation for each feature. Next we subtract the mean from each feature. Then we divide the values (mean is already subtracted) of each feature by its standard deviation. x' = $\\frac{x - avg(x)}{\\sigma}$ Fortunately for us scikit-learn library provides a function for both of them. In this case we'll use normalization because it works well for this application. In [6]: Copied! print ( \"Data used in the Triton preprocessor\" ) print ( \"-----------Min-----------\" ) print ( data . min ()) print ( \"-----------Max-----------\" ) print ( data . max ()) print ( \"-------------------------\" ) print(\"Data used in the Triton preprocessor\") print(\"-----------Min-----------\") print(data.min()) print(\"-----------Max-----------\") print(data.max()) print(\"-------------------------\") Data used in the Triton preprocessor -----------Min----------- ACC_Y -0.132551 ACC_X -0.049693 ACC_Z 0.759847 PRESSURE 976.001709 TEMP_PRESS 38.724998 TEMP_HUM 40.220890 HUMIDITY 13.003981 GYRO_X -1.937896 GYRO_Y -0.265019 GYRO_Z -0.250647 dtype: float64 -----------Max----------- ACC_Y 0.093099 ACC_X 0.150289 ACC_Z 1.177543 PRESSURE 1007.996338 TEMP_PRESS 46.093750 TEMP_HUM 48.355824 HUMIDITY 23.506138 GYRO_X 1.923712 GYRO_Y 0.219204 GYRO_Z 0.671759 dtype: float64 ------------------------- In [7]: Copied! from sklearn.preprocessing import MinMaxScaler scaler = MinMaxScaler () scaled_data = scaler . fit_transform ( data . to_numpy ()) from sklearn.preprocessing import MinMaxScaler scaler = MinMaxScaler() scaled_data = scaler.fit_transform(data.to_numpy()) In [8]: Copied! pd . DataFrame ( scaled_data ) . describe () pd.DataFrame(scaled_data).describe() Out[8]: .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } 0 1 2 3 4 5 6 7 8 9 count 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 25278.000000 mean 0.603124 0.674196 0.550454 0.526446 0.605576 0.552252 0.466400 0.501160 0.545457 0.271295 std 0.049333 0.015135 0.031627 0.054050 0.288300 0.256587 0.176293 0.062908 0.067678 0.014665 min 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 25% 0.597087 0.667343 0.544924 0.481917 0.501060 0.441442 0.325637 0.501348 0.544670 0.270709 50% 0.603534 0.673413 0.551342 0.521377 0.655357 0.608108 0.511715 0.501841 0.547096 0.271685 75% 0.611055 0.680698 0.555426 0.552892 0.819339 0.734234 0.575212 0.502407 0.549386 0.272577 max 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000","title":"Feature scaling"},{"location":"tutorials/AD-EdgeAI/#train-test-split","text":"The only way to know how well a model will generalize to new data points is to try it on new data. To do so we split our data into two sets: the training set and the test set. To do so we'll use a function from scikit-learn . In [9]: Copied! from sklearn.model_selection import train_test_split import numpy as np x_train , x_test = train_test_split ( scaled_data , test_size = 0.3 , random_state = 42 ) x_train = x_train . astype ( np . float32 ) x_test = x_test . astype ( np . float32 ) from sklearn.model_selection import train_test_split import numpy as np x_train, x_test = train_test_split(scaled_data, test_size=0.3, random_state=42) x_train = x_train.astype(np.float32) x_test = x_test.astype(np.float32)","title":"Train test split"},{"location":"tutorials/AD-EdgeAI/#model-training","text":"We can now leverage the Keras API of Tensorflow for creating our Autoencoder and then train it on our dataset. We'll design a neural network architecture such that we impose a bottleneck in the network which forces a compressed knowledge representation of the original input (also called the latent-space representation ). If the input features were each independent of one another, this compression and subsequent reconstruction would be a very difficult task. However, if some sort of structure exists in the data (ie. correlations between input features), this structure can be learned and consequently leveraged when forcing the input through the network's bottleneck. The bottleneck consists of reducing the number of neurons for each layer of the neural network up to a certain point, and then increase the number until the original input number is reached. This will result in a hourglass shape which is typical for the Autoencoders.","title":"Model training"},{"location":"tutorials/AD-EdgeAI/#build-the-autoencoder-model","text":"In this example we'll use a basic fully-connected autoencoder but keep in mind that autoencoders can be built with different classes of neural network (i.e. Convolutional Neural Networks, Recurrent Neural Networks etc). In [10]: Copied! import os os . environ [ 'TF_CPP_MIN_LOG_LEVEL' ] = '2' # Avoid AVX2 error from tensorflow.keras.models import Model from tensorflow.keras.layers import Input , Dense , Dropout def create_model ( input_dim ): # The encoder will consist of a number of dense layers that decrease in size # as we taper down towards the bottleneck of the network, the latent space input_data = Input ( shape = ( input_dim ,), name = 'INPUT0' ) # hidden layers encoder = Dense ( 9 , activation = 'tanh' , name = 'encoder_1' )( input_data ) encoder = Dropout ( .15 )( encoder ) encoder = Dense ( 6 , activation = 'tanh' , name = 'encoder_2' )( encoder ) encoder = Dropout ( .15 )( encoder ) # bottleneck layer latent_encoding = Dense ( 3 , activation = 'linear' , name = 'latent_encoding' )( encoder ) # The decoder network is a mirror image of the encoder network decoder = Dense ( 6 , activation = 'tanh' , name = 'decoder_1' )( latent_encoding ) decoder = Dropout ( .15 )( decoder ) decoder = Dense ( 9 , activation = 'tanh' , name = 'decoder_2' )( decoder ) decoder = Dropout ( .15 )( decoder ) # The output is the same dimension as the input data we are reconstructing reconstructed_data = Dense ( input_dim , activation = 'linear' , name = 'OUTPUT0' )( decoder ) autoencoder_model = Model ( input_data , reconstructed_data ) return autoencoder_model import os os.environ['TF_CPP_MIN_LOG_LEVEL']='2' # Avoid AVX2 error from tensorflow.keras.models import Model from tensorflow.keras.layers import Input, Dense, Dropout def create_model(input_dim): # The encoder will consist of a number of dense layers that decrease in size # as we taper down towards the bottleneck of the network, the latent space input_data = Input(shape=(input_dim,), name='INPUT0') # hidden layers encoder = Dense(9, activation='tanh', name='encoder_1')(input_data) encoder = Dropout(.15)(encoder) encoder = Dense(6, activation='tanh', name='encoder_2')(encoder) encoder = Dropout(.15)(encoder) # bottleneck layer latent_encoding = Dense(3, activation='linear', name='latent_encoding')(encoder) # The decoder network is a mirror image of the encoder network decoder = Dense(6, activation='tanh', name='decoder_1')(latent_encoding) decoder = Dropout(.15)(decoder) decoder = Dense(9, activation='tanh', name='decoder_2')(decoder) decoder = Dropout(.15)(decoder) # The output is the same dimension as the input data we are reconstructing reconstructed_data = Dense(input_dim, activation='linear', name='OUTPUT0')(decoder) autoencoder_model = Model(input_data, reconstructed_data) return autoencoder_model In [11]: Copied! autoencoder_model = create_model ( len ( features )) autoencoder_model . summary () autoencoder_model = create_model(len(features)) autoencoder_model.summary() Model: \"model\" _________________________________________________________________ Layer (type) Output Shape Param # ================================================================= INPUT0 (InputLayer) [(None, 10)] 0 encoder_1 (Dense) (None, 9) 99 dropout (Dropout) (None, 9) 0 encoder_2 (Dense) (None, 6) 60 dropout_1 (Dropout) (None, 6) 0 latent_encoding (Dense) (None, 3) 21 decoder_1 (Dense) (None, 6) 24 dropout_2 (Dropout) (None, 6) 0 decoder_2 (Dense) (None, 9) 63 dropout_3 (Dropout) (None, 9) 0 OUTPUT0 (Dense) (None, 10) 100 ================================================================= Total params: 367 Trainable params: 367 Non-trainable params: 0 _________________________________________________________________","title":"Build the Autoencoder model"},{"location":"tutorials/AD-EdgeAI/#model-training","text":"As we already explained, the autoencoder is a type of artificial neural network used to learn efficient codings of unlabeled data. We'll use that to reconstruct the input at the output. To train an autoencoder we don\u2019t need to do anything fancy, just throw the raw input data at it. Autoencoders are considered an unsupervised learning technique since they don\u2019t need explicit labels to train on but to be more precise they are self-supervised because they generate their own labels from the training data. To train our neural network we need to have a performance metric to measure how well it is learning to reconstruct the data i.e. our loss function . The loss function in our example, which we need to minimize during our training, is the error between the input data and the data reconstructed by the autoencoder . We'll use the Mean Squared Error . MSE = $\\frac{1}{n}\\sum_{i=1}^{n}{(Y_i - Y'_i)^2}$ Where: $n$: is the number of features (10 in our example) $Y_i$: is the original data point i.e. the input of the autoencoder $Y'_i$: is the reconstructed data point i.e. the output of the autoencoder Before starting the training we need to set the hyperparameters ). Hyperparameters are parameters whose values control the learning process and determine the values of model parameters that a learning algorithm ends up learning. These are the learning_rate , max_epochs , optimizer and the batch_size you see in the code snippet below. You may ask yourself how to set them, it all comes down to trial and error. Try tweaking them below and see how they affect the learning process... A good explaination of their meaning can be found in the Keras documentation . In [12]: Copied! from tensorflow.keras import optimizers batch_size = 32 max_epochs = 15 learning_rate = .0001 opt = optimizers . Adam ( learning_rate = learning_rate ) autoencoder_model . compile ( optimizer = opt , loss = 'mse' , metrics = [ 'accuracy' ]) train_history = autoencoder_model . fit ( x_train , x_train , shuffle = True , epochs = max_epochs , batch_size = batch_size , validation_data = ( x_test , x_test )) from tensorflow.keras import optimizers batch_size = 32 max_epochs = 15 learning_rate = .0001 opt = optimizers.Adam(learning_rate=learning_rate) autoencoder_model.compile(optimizer=opt, loss='mse', metrics=['accuracy']) train_history = autoencoder_model.fit(x_train, x_train, shuffle=True, epochs=max_epochs, batch_size=batch_size, validation_data=(x_test, x_test)) Epoch 1/15 553/553 [==============================] - 1s 1ms/step - loss: 0.2282 - accuracy: 0.1129 - val_loss: 0.0922 - val_accuracy: 0.0045 Epoch 2/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0949 - accuracy: 0.1541 - val_loss: 0.0279 - val_accuracy: 0.4210 Epoch 3/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0613 - accuracy: 0.1779 - val_loss: 0.0206 - val_accuracy: 0.4426 Epoch 4/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0466 - accuracy: 0.2152 - val_loss: 0.0186 - val_accuracy: 0.5276 Epoch 5/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0366 - accuracy: 0.2514 - val_loss: 0.0157 - val_accuracy: 0.5944 Epoch 6/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0290 - accuracy: 0.3083 - val_loss: 0.0119 - val_accuracy: 0.6403 Epoch 7/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0228 - accuracy: 0.3930 - val_loss: 0.0078 - val_accuracy: 0.7182 Epoch 8/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0186 - accuracy: 0.4668 - val_loss: 0.0059 - val_accuracy: 0.8195 Epoch 9/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0157 - accuracy: 0.5021 - val_loss: 0.0048 - val_accuracy: 0.8256 Epoch 10/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0136 - accuracy: 0.5277 - val_loss: 0.0042 - val_accuracy: 0.8263 Epoch 11/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0121 - accuracy: 0.5409 - val_loss: 0.0037 - val_accuracy: 0.8296 Epoch 12/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0107 - accuracy: 0.5569 - val_loss: 0.0036 - val_accuracy: 0.8306 Epoch 13/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0098 - accuracy: 0.5857 - val_loss: 0.0034 - val_accuracy: 0.8256 Epoch 14/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0089 - accuracy: 0.6076 - val_loss: 0.0033 - val_accuracy: 0.8281 Epoch 15/15 553/553 [==============================] - 1s 1ms/step - loss: 0.0083 - accuracy: 0.6337 - val_loss: 0.0032 - val_accuracy: 0.8262 In [13]: Copied! plt . plot ( train_history . history [ 'loss' ]) plt . plot ( train_history . history [ 'val_loss' ]) plt . legend ([ 'loss on train data' , 'loss on test data' ]) plt.plot(train_history.history['loss']) plt.plot(train_history.history['val_loss']) plt.legend(['loss on train data', 'loss on test data']) Out[13]: <matplotlib.legend.Legend at 0x16d0c3400> Here we can see the loss for the training set and the test set on the epochs. Some of you might notice that this graph is somewhat unexpected. Why the validation loss is lower than the train loss? This is the effect of the regularization: regularization terms and dropout layer are affecting the network during training. A good writeup of this effect can be found here . As an excercise try and compute the average MSE on the training set and the test set. You'll find that the MSE is lower in the training set! We can now save the model on disk as we'll use this later. In [14]: Copied! autoencoder_model . save ( \"./saved_model/autoencoder\" ) autoencoder_model.save(\"./saved_model/autoencoder\") WARNING:absl:Function `_wrapped_model` contains input name(s) INPUT0 with unsupported characters which will be renamed to input0 in the SavedModel. INFO:tensorflow:Assets written to: ./saved_model/autoencoder/assets INFO:tensorflow:Assets written to: ./saved_model/autoencoder/assets In [15]: Copied! ! ls ./ saved_model / autoencoder !ls ./saved_model/autoencoder assets keras_metadata.pb saved_model.pb variables","title":"Model training"},{"location":"tutorials/AD-EdgeAI/#model-evaluation","text":"We now have a model that reconstruct the input at the output... doesn't sounds really useful right? Let's see it in action. Let's take a sample from the test set and run it through our autoencoder. In [16]: Copied! input_sample = x_test [ 3 : 4 ] . copy () # Deep copy reconstructed_sample = autoencoder_model . predict ( input_sample ) print ( input_sample ) print ( reconstructed_sample ) input_sample = x_test[3:4].copy() # Deep copy reconstructed_sample = autoencoder_model.predict(input_sample) print(input_sample) print(reconstructed_sample) 1/1 [==============================] - 0s 109ms/step [[0.603534 0.6770555 0.54900813 0.5327966 0.6680801 0.6171171 0.5198642 0.50135666 0.54716927 0.2718224 ]] [[0.59638697 0.67410123 0.5484349 0.52024144 0.64766663 0.5916597 0.4445051 0.499677 0.54471916 0.26904327]] In [17]: Copied! import matplotlib.pyplot as plt index = np . arange ( 10 ) bar_width = 0.35 figure , ax = plt . subplots () inbar = ax . bar ( index , input_sample [ 0 ], bar_width , label = \"Input data\" ) recbar = ax . bar ( index + bar_width , reconstructed_sample [ 0 ], bar_width , label = \"Reconstruced data\" ) ax . set_xlabel ( 'Features' ) ax . set_xticks ( index + bar_width / 2 ) ax . set_xticklabels ( features , rotation = 45 ) ax . legend () import matplotlib.pyplot as plt index = np.arange(10) bar_width = 0.35 figure, ax = plt.subplots() inbar = ax.bar(index, input_sample[0], bar_width, label=\"Input data\") recbar = ax.bar(index+bar_width, reconstructed_sample[0], bar_width, label=\"Reconstruced data\") ax.set_xlabel('Features') ax.set_xticks(index + bar_width / 2) ax.set_xticklabels(features, rotation = 45) ax.legend() Out[17]: <matplotlib.legend.Legend at 0x16d184880> As we can see from the graph above it reconstructed the input fairly well. It is not perfect since the Autoencoder is lossy but it is good enough What happens if we manipulate this sample in a way the autoencoder doesn't expect (i.e. we introduce an anomaly )? Let's try and set the ACC_Z to a value the autoencoder has never seen before. In [18]: Copied! input_anomaly = input_sample . copy () # Deep copy input_anomaly [ 0 ][ 2 ] = 0.15 reconstructed_anomaly = autoencoder_model . predict ( input_anomaly ) print ( input_anomaly ) print ( reconstructed_anomaly ) input_anomaly = input_sample.copy() # Deep copy input_anomaly[0][2] = 0.15 reconstructed_anomaly = autoencoder_model.predict(input_anomaly) print(input_anomaly) print(reconstructed_anomaly) 1/1 [==============================] - 0s 21ms/step [[0.603534 0.6770555 0.15 0.5327966 0.6680801 0.6171171 0.5198642 0.50135666 0.54716927 0.2718224 ]] [[0.60162103 0.69035804 0.55594885 0.51874125 0.7346029 0.6700014 0.40932336 0.5034408 0.5424664 0.26861513]] In [19]: Copied! figure , ax = plt . subplots () inbar = ax . bar ( index , input_anomaly [ 0 ], bar_width , label = \"Input anomaly\" ) recbar = ax . bar ( index + bar_width , reconstructed_anomaly [ 0 ], bar_width , label = \"Reconstruced anomaly\" ) ax . set_xlabel ( 'Features' ) ax . set_xticks ( index + bar_width / 2 ) ax . set_xticklabels ( features , rotation = 45 ) ax . legend () figure, ax = plt.subplots() inbar = ax.bar(index, input_anomaly[0], bar_width, label=\"Input anomaly\") recbar = ax.bar(index+bar_width, reconstructed_anomaly[0], bar_width, label=\"Reconstruced anomaly\") ax.set_xlabel('Features') ax.set_xticks(index + bar_width / 2) ax.set_xticklabels(features, rotation = 45) ax.legend() Out[19]: <matplotlib.legend.Legend at 0x16d3c0220> The autoencoder fails to reconstruct the data it received at the input. This means that the reconstruction error is very high. In [20]: Copied! from sklearn.metrics import mean_squared_error print ( \"Anomaly %f \" % mean_squared_error ( input_anomaly [ 0 ], reconstructed_anomaly [ 0 ])) print ( \"Normal %f \" % mean_squared_error ( input_sample [ 0 ], reconstructed_sample [ 0 ])) from sklearn.metrics import mean_squared_error print(\"Anomaly %f\"% mean_squared_error(input_anomaly[0], reconstructed_anomaly[0])) print(\"Normal %f\"% mean_squared_error(input_sample[0], reconstructed_sample[0])) Anomaly 0.018465 Normal 0.000698 It's working as expected! We now need to decide when to trigger an alarm (i.e. classify an input sample as anomalous) from this reconstruction error. In other words we need to decide our threshold. There are multiple ways to set this value, in this example we'll use the Z-Score . From Wikipedia: In statistics, the standard score is the number of standard deviations by which the value of a raw score (i.e., an observed value or data point) is above or below the mean value of what is being observed or measured.[...] It is calculated by subtracting the population mean from an individual raw score and then dividing the difference by the population standard deviation. We'll consider a sample an anomaly if the Reconstruction Error Z-Score is not in the range [-2, +2]. This means that if the reconstruction error for a sample is more than 2 standard deviation away from the average reconstruction error computed on the test set, the sample is an anomaly. This choice is arbirtary, we can control the sensitivity of the detector by changing this range. In [21]: Copied! x_test_recon = autoencoder_model . predict ( x_test ) reconstruction_scores = np . mean (( x_test - x_test_recon ) ** 2 , axis = 1 ) # MSE reconstruction_scores_pd = pd . DataFrame ({ 'recon_score' : reconstruction_scores }) print ( reconstruction_scores_pd . describe ()) x_test_recon = autoencoder_model.predict(x_test) reconstruction_scores = np.mean((x_test - x_test_recon)**2, axis=1) # MSE reconstruction_scores_pd = pd.DataFrame({'recon_score': reconstruction_scores}) print(reconstruction_scores_pd.describe()) 237/237 [==============================] - 0s 620us/step recon_score count 7584.000000 mean 0.003175 std 0.005438 min 0.000098 25% 0.000816 50% 0.001211 75% 0.002108 max 0.106237 In [22]: Copied! def z_score ( mse_sample ): return ( mse_sample - reconstruction_scores_pd . mean ()) / reconstruction_scores_pd . std () def z_score(mse_sample): return (mse_sample - reconstruction_scores_pd.mean())/reconstruction_scores_pd.std() In [23]: Copied! mse_anomaly = mean_squared_error ( input_anomaly [ 0 ], reconstructed_anomaly [ 0 ]) mse_normal = mean_squared_error ( input_sample [ 0 ], reconstructed_sample [ 0 ]) z_score_anomaly = z_score ( mse_anomaly ) z_score_normal = z_score ( mse_normal ) print ( \"Anomaly Z-score %f \" % z_score_anomaly ) print ( \"Normal Z-score %f \" % z_score_normal ) mse_anomaly = mean_squared_error(input_anomaly[0], reconstructed_anomaly[0]) mse_normal = mean_squared_error(input_sample[0], reconstructed_sample[0]) z_score_anomaly = z_score(mse_anomaly) z_score_normal = z_score(mse_normal) print(\"Anomaly Z-score %f\"% z_score_anomaly) print(\"Normal Z-score %f\"% z_score_normal) Anomaly Z-score 2.811887 Normal Z-score -0.455488 We now have our anomaly detector... let's see how we can deploy it on our Kura\u2122-powered edge device.","title":"Model evaluation"},{"location":"tutorials/AD-EdgeAI/#model-deployment","text":"To deploy our model on the target device we'll leverage Kura\u2122's newly added Nvidia\u2122 Triton Inferece Server integration. The Nvidia\u2122 Triton Inference Server is an open-source inference service software that enables the user to deploy trained AI models from any framework on GPU or CPU infrastructure. It supports all major frameworks like TensorFlow, TensorRT, PyTorch, ONNX Runtime, and even custom framework backend. With specific backends, it is also possible to run Python scripts, mainly for pre-and post-processing purposes, and exploit the DALI building block for optimized operations. For installation refer to the official Kura\u2122 and Triton documentation . For the rest of this tutorial we'll assume a Triton container is available on the target device. It can be simply installed with: docker pull nvcr.io/nvidia/tritonserver:22.07-tf2-python-py3 We'll also need to install Kura\u2122's Triton bundles: Triton Server Component : for Kura-Triton integration AI Wire Component : for making the Triton Inference Server available through the Kura Wires as a Wire component.","title":"Model deployment"},{"location":"tutorials/AD-EdgeAI/#model-conversion","text":"The first step in using Triton to serve your models is to place one or more models into a model repository i.e. a folder were the model are available for Triton to load. Depending on the type of the model and on what Triton capabilities you want to enable for the model, you may need to create a model configuration for the model. This configuration is a protobuf containing informations about runtime configuration and input/output shape accepted by the model. For our autoencoder model we'll need three \"models\": A Preprocessor for performing the operations described in the \"Data processing\" section (Wire envelop translation, feature selection and scaling) The Autoencoder model we exported in the \"Model training\" section A Postprocessor for performing the operations described in the \"Model evaluation\" section (Reconstruction error computation) To simplify the handling of these models and improve inference performance, we'll use an advanced feature of Triton wich is an Ensemble Model . From Triton official documentation: An ensemble model represents a pipeline of one or more models and the connection of input and output tensors between those models. Ensemble models are intended to be used to encapsulate a procedure that involves multiple models, such as \"data preprocessing -> inference -> data postprocessing\". Using ensemble models for this purpose can avoid the overhead of transferring intermediate tensors and minimize the number of requests that must be sent to Triton.","title":"Model conversion"},{"location":"tutorials/AD-EdgeAI/#autoencoder","text":"As seen in the \"Model training\" section, our model is available as a Tensorflow SavedModel which can be simply loaded by the Triton Tensorflow backend . We just need to configure it properly. We'll start by creating the following folder structure tf_autoencoder_fp32 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.savedmodel \u2502 \u251c\u2500\u2500 assets \u2502 \u251c\u2500\u2500 keras_metadata.pb \u2502 \u251c\u2500\u2500 saved_model.pb \u2502 \u2514\u2500\u2500 variables \u2502 \u251c\u2500\u2500 variables.data-00000-of-00001 \u2502 \u2514\u2500\u2500 variables.index \u2514\u2500\u2500 config.pbtxt This can be done by copying the model we saved in the Model Training section: In [24]: Copied! ! rm - rf ./ tf_autoencoder_fp32 / && mkdir - p ./ tf_autoencoder_fp32 / 1 !rm -rf ./tf_autoencoder_fp32/ && mkdir -p ./tf_autoencoder_fp32/1 In [25]: Copied! ! ls !ls AD-EdgeAI.ipynb requirements.txt train-data-raw.csv README.md saved_model train-data-raw.csv.1 imgs tf_autoencoder_fp32 In [26]: Copied! cp - r ./ saved_model / autoencoder tf_autoencoder_fp32 / 1 / model . savedmodel cp -r ./saved_model/autoencoder tf_autoencoder_fp32/1/model.savedmodel In [27]: Copied! ! tree tf_autoencoder_fp32 !tree tf_autoencoder_fp32 tf_autoencoder_fp32 \u2514\u2500\u2500 1 \u2514\u2500\u2500 model.savedmodel \u251c\u2500\u2500 assets \u251c\u2500\u2500 keras_metadata.pb \u251c\u2500\u2500 saved_model.pb \u2514\u2500\u2500 variables \u251c\u2500\u2500 variables.data-00000-of-00001 \u2514\u2500\u2500 variables.index 4 directories, 4 files Now comes the hard part: we need to provide the model configuration (i.e. the config.pbtxt file). In the case of the autoencoder is pretty simple: name : \"tf_autoencoder_fp32\" backend : \"tensorflow\" max_batch_size : 0 input [ { name : \"INPUT0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] output [ { name : \"OUTPUT0\" data_type : TYPE_FP32 dims : [ - 1 , 10 ] } ] version_policy : { all { }} instance_group [{ kind : KIND_CPU }] Each model input and output must specify the name , data_type and dims . We already know all of these: name : corresponds to the layer name we've seen in the Model Training section. INPUT0 for the input and OUTPUT0 for the output. data_type : will be float since we didn't perform any quantization dims : is the shape of the in/out tensor. In this case it will correspond to an array with the same length as the number of features. Other interesting parameters of this configuration are: backend : where we set the backend for the model. In this case it will be the Tensorflow backend name : the name of the model that must correspond to the name of the folder instance_group : where we set where we want the model to run. In this case we'll use the CPU since we're on a Raspberry Pi but keep in mind that Triton support multiple accelerators. for a deep dive into the model configuration parameter take a look at the official documentation .","title":"Autoencoder"},{"location":"tutorials/AD-EdgeAI/#preprocessor","text":"As discussed in the \"Data processing\" section, before providing the incoming data to the autoencoder, we need to perform feature selection and scaling. In addition to these responsibilites, the Preprocessor will need to perform a sort of serialization of the data to comply to the input shape accepted by the Autoencoder. This is due to how Kura manages the data running on Wires. More details can be found here . To perform all of this we'll use the Python backend available in Triton. As described in the previous section we will need to provide the following folder structure: preprocessor \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.py \u2514\u2500\u2500 config.pbtxt","title":"Preprocessor"},{"location":"tutorials/AD-EdgeAI/#preprocessor-configuration","text":"As discussed in the official Kura documentation : The AI wire component takes a WireEnvelope as an input, it processes its records and feeds them to the specified preprocessing or inference model. ... The models that manage the input and the output must expect a list of inputs such that: each input corresponds to an entry of the WireRecord properties the entry key will become the input name (e.g. in the case of an asset, the channel name becomes the tensor name) input shape will be [1] Therefore for our input we'll have that each name corresponds to the names we've seen in the Data Collection section. The output needs to correspond to the input accepted by the model (i.e. INPUT0 ). name : \"preprocessor\" backend : \"python\" input [ { name : \"ACC_X\" data_type : TYPE_FP32 dims : [ 1 ] } ] input [ { name : \"ACC_Y\" data_type : TYPE_FP32 dims : [ 1 ] } ] ... input [ { name : \"TEMP_PRESS\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"INPUT0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] instance_group [{ kind : KIND_CPU }]","title":"Preprocessor Configuration"},{"location":"tutorials/AD-EdgeAI/#preprocessor-model","text":"As we've seen in the Data Processing section the Preprocessor is responsible for scaling the input features and serializing them in the tensor shape expected by the Autoencoder model. This can be done with the following python script: import numpy as np import json import triton_python_backend_utils as pb_utils class TritonPythonModel : def initialize ( self , args ): self . model_config = model_config = json . loads ( args [ 'model_config' ]) output0_config = pb_utils . get_output_config_by_name ( model_config , \"INPUT0\" ) self . output0_dtype = pb_utils . triton_string_to_numpy ( output0_config [ 'data_type' ]) def execute ( self , requests ): output0_dtype = self . output0_dtype responses = [] for request in requests : acc_x = pb_utils . get_input_tensor_by_name ( request , \"ACC_X\" ) . as_numpy () acc_y = pb_utils . get_input_tensor_by_name ( request , \"ACC_Y\" ) . as_numpy () acc_z = pb_utils . get_input_tensor_by_name ( request , \"ACC_Z\" ) . as_numpy () gyro_x = pb_utils . get_input_tensor_by_name ( request , \"GYRO_X\" ) . as_numpy () gyro_y = pb_utils . get_input_tensor_by_name ( request , \"GYRO_Y\" ) . as_numpy () gyro_z = pb_utils . get_input_tensor_by_name ( request , \"GYRO_Z\" ) . as_numpy () humidity = pb_utils . get_input_tensor_by_name ( request , \"HUMIDITY\" ) . as_numpy () pressure = pb_utils . get_input_tensor_by_name ( request , \"PRESSURE\" ) . as_numpy () temp_hum = pb_utils . get_input_tensor_by_name ( request , \"TEMP_HUM\" ) . as_numpy () temp_press = pb_utils . get_input_tensor_by_name ( request , \"TEMP_PRESS\" ) . as_numpy () out_0 = np . array ([ acc_y , acc_x , acc_z , pressure , temp_press , temp_hum , humidity , gyro_x , gyro_y , gyro_z ]) . transpose () # ACC_Y ACC_X ACC_Z PRESSURE TEMP_PRESS TEMP_HUM HUMIDITY GYRO_X GYRO_Y GYRO_Z min = np . array ([ - 0.132551 , - 0.049693 , 0.759847 , 976.001709 , 38.724998 , 40.220890 , 13.003981 , - 1.937896 , - 0.265019 , - 0.250647 ]) max = np . array ([ 0.093099 , 0.150289 , 1.177543 , 1007.996338 , 46.093750 , 48.355824 , 23.506138 , 1.923712 , 0.219204 , 0.671759 ]) # MinMax scaling out_0_scaled = ( out_0 - min ) / ( max - min ) # Create output tensor out_tensor_0 = pb_utils . Tensor ( \"INPUT0\" , out_0_scaled . astype ( output0_dtype )) inference_response = pb_utils . InferenceResponse ( output_tensors = [ out_tensor_0 ]) responses . append ( inference_response ) return responses Here there are two important things to note: The template we're using is taken from the Triton documentation and can be found here . The MinMax scaling must be the same we used in our training . For illustration purposes we wrote the min and max arrays we found in the Data Processing section but we could have serialized the MinMaxScaler using pickle instead.","title":"Preprocessor Model"},{"location":"tutorials/AD-EdgeAI/#postprocessor","text":"As discussed in the \"Data processing\" section, to perform the anomaly detection step we need to compute the Mean Squared Error between the recontructed data and the actual input data. Due to this the configuration of the Postprocessor model will be somewhat more complicated than before: in addition to the output of the Autoencoder model we will need the output of the Preprocessor model. To perform all of this we'll use the Python backend again. As described in the previous section we will need to provide the following folder structure: postprocessor \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.py \u2514\u2500\u2500 config.pbtxt","title":"Postprocessor"},{"location":"tutorials/AD-EdgeAI/#postprocessor-configuration","text":"name : \"postprocessor\" backend : \"python\" input [ { name : \"RECONSTR0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] input [ { name : \"ORIG0\" data_type : TYPE_FP32 dims : [ 1 , 10 ] } ] output [ { name : \"ANOMALY_SCORE0\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"ANOMALY0\" data_type : TYPE_BOOL dims : [ 1 ] } ] instance_group [{ kind : KIND_CPU }] As we can see we have two inputs and two outputs: The first input tensor is the reconstruction performed by the autoencoder model The second input tensor is the original data (already scaled and serialized by the Preprocessor model) The first output is the anomaly score i.e. the reconstruction error between the original and the reconstructed data. The second output is a boolean representing whether the data constitute an anomaly or not Let's see how this is computed by the Python model.","title":"Postprocessor Configuration"},{"location":"tutorials/AD-EdgeAI/#postprocessor-model","text":"import numpy as np import json import triton_python_backend_utils as pb_utils def z_score ( mse ): return ( mse - MEAN_MSE ) / STD_MSE class TritonPythonModel : def initialize ( self , args ): self . model_config = model_config = json . loads ( args [ 'model_config' ]) output0_config = pb_utils . get_output_config_by_name ( model_config , \"ANOMALY_SCORE0\" ) output1_config = pb_utils . get_output_config_by_name ( model_config , \"ANOMALY0\" ) self . output0_dtype = pb_utils . triton_string_to_numpy ( output0_config [ 'data_type' ]) self . output1_dtype = pb_utils . triton_string_to_numpy ( output1_config [ 'data_type' ]) def execute ( self , requests ): output0_dtype = self . output0_dtype output1_dtype = self . output1_dtype responses = [] for request in requests : # Get input x_recon = pb_utils . get_input_tensor_by_name ( request , \"RECONSTR0\" ) . as_numpy () x_orig = pb_utils . get_input_tensor_by_name ( request , \"ORIG0\" ) . as_numpy () # Get Mean square error between reconstructed input and original input reconstruction_score = np . mean (( x_orig - x_recon ) ** 2 , axis = 1 ) # Z-Score of Mean square error must be inside [-2; 2] anomaly = np . array ([ z_score ( reconstruction_score ) < - 2.0 or z_score ( reconstruction_score ) > 2.0 ]) # Create output tensors out_tensor_0 = pb_utils . Tensor ( \"ANOMALY_SCORE0\" , reconstruction_score . astype ( output0_dtype )) out_tensor_1 = pb_utils . Tensor ( \"ANOMALY0\" , anomaly . astype ( output1_dtype )) inference_response = pb_utils . InferenceResponse ( output_tensors = [ out_tensor_0 , out_tensor_1 ]) responses . append ( inference_response ) return responses As you can see the script is simple: It gets the input tensors It computes the Mean Squared Error between the inputs (which is what we called the reconstruction error) It computes the Z-Score of the MSE computed for the current sample and flags it as an anomaly if it is farther than 2 standard deviations away from the average MSE. Note : MEAN_MSE and STD_MSE are the mean value and the standard deviation of the Mean Squared Error computed on the test set and correspond to the reconstruction_scores_pd.mean() and reconstruction_scores_pd.std() we used in the previous section. We didn't set them as they change for every training performed on the Autoencoder. Be sure to set it to their proper values before trying this model on the Triton server!","title":"Postprocessor Model"},{"location":"tutorials/AD-EdgeAI/#ensemble-model","text":"To make things easier for ourselves and improve performance we'll consolidate the AI pipeline into an Ensemble Model . We will need to provide the following folder structure: ensemble_pipeline \u251c\u2500\u2500 1 \u2514\u2500\u2500 config.pbtxt Note that the 1 folder is empty . The ensemble model essentially describe how to connect the models that belong to the processing pipeline . Therefore we'll need to focus on the configuration only. name : \"ensemble_pipeline\" platform : \"ensemble\" max_batch_size : 0 input [ { name : \"ACC_X\" data_type : TYPE_FP32 dims : [ 1 ] } ] input [ { name : \"ACC_Y\" data_type : TYPE_FP32 dims : [ 1 ] } ] ... input [ { name : \"TEMP_PRESS\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"ANOMALY_SCORE0\" data_type : TYPE_FP32 dims : [ 1 ] } ] output [ { name : \"ANOMALY0\" data_type : TYPE_BOOL dims : [ 1 ] } ] ensemble_scheduling { step [ { model_name : \"preprocessor\" model_version : - 1 input_map { key : \"ACC_X\" value : \"ACC_X\" } input_map { key : \"ACC_Y\" value : \"ACC_Y\" } ... input_map { key : \"TEMP_PRESS\" value : \"TEMP_PRESS\" } output_map { key : \"INPUT0\" value : \"preprocess_out\" } }, { model_name : \"tf_autoencoder_fp32\" model_version : - 1 input_map { key : \"INPUT0\" value : \"preprocess_out\" } output_map { key : \"OUTPUT0\" value : \"autoencoder_output\" } }, { model_name : \"postprocessor\" model_version : - 1 input_map { key : \"RECONSTR0\" value : \"autoencoder_output\" } input_map { key : \"ORIG0\" value : \"preprocess_out\" } output_map { key : \"ANOMALY_SCORE0\" value : \"ANOMALY_SCORE0\" } output_map { key : \"ANOMALY0\" value : \"ANOMALY0\" } } ] } The configuration is split in two main parts: The first is the usual configuration we've seen before: we describe what are the input and the output of our model. In this case the input will correspond to the input of the first model of the pipeline (the Preprocessor) and the output to the output of the last model of the pipeline (the Postprocessor) The second part describe how to map the input/output of the models within the pipeline To better visualize the configuration we can look at the graph below.","title":"Ensemble model"},{"location":"tutorials/AD-EdgeAI/#conversion-results","text":"At this point we should have a folder structure that looks like this: models \u251c\u2500\u2500 ensemble_pipeline \u2502 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 config.pbtxt \u251c\u2500\u2500 postprocessor \u2502 \u251c\u2500\u2500 1 \u2502 \u2502 \u2514\u2500\u2500 model.py \u2502 \u2514\u2500\u2500 config.pbtxt \u251c\u2500\u2500 preprocessor \u2502 \u251c\u2500\u2500 1 \u2502 \u2502 \u2514\u2500\u2500 model.py \u2502 \u2514\u2500\u2500 config.pbtxt \u2514\u2500\u2500 tf_autoencoder_fp32 \u251c\u2500\u2500 1 \u2502 \u2514\u2500\u2500 model.savedmodel \u2502 \u251c\u2500\u2500 assets \u2502 \u251c\u2500\u2500 keras_metadata.pb \u2502 \u251c\u2500\u2500 saved_model.pb \u2502 \u2514\u2500\u2500 variables \u2502 \u251c\u2500\u2500 variables.data-00000-of-00001 \u2502 \u2514\u2500\u2500 variables.index \u2514\u2500\u2500 config.pbtxt","title":"Conversion results"},{"location":"tutorials/AD-EdgeAI/#kura-deployment","text":"We can now move our pipeline to the target device for inference on the edge. We want to perform anomaly detection in real time, directly within the edge device, using the same data we used to collect for our training.","title":"Kura Deployment"},{"location":"tutorials/AD-EdgeAI/#triton-component-configuration","text":"To do so we need to copy the models folder on the target device. For this example we'll use the /home/pi/models path. We can now move to the Kura web UI and create a new Triton Server Container Service component instance. The complete documentation can be found here . In this example we'll call it TritonContainerService . Then we'll need to configure it to run our models. Move to the TritonContainerService configuration interface and set the following parameters: Image name / Image tag : use the name and tag of the Triton container image you installed. We're using nvcr.io/nvidia/tritonserver:22.07-tf2-python-py3 in this example. Local model repository path : in our example is /home/pi/models Inference Models : we'll need to load all the models of the pipeline so: preprocessor,postprocessor,tf_autoencoder_fp32,ensemble_pipeline Optional configuration for the local backends : tensorflow,version=2 since Tensorflow 2 is the only available Tensorflow backend in the Triton container image we're using. You can leave everything else as default. Once you press the \" Apply \" button Kura will create a new container from the Triton image we set and spin up the service with our models loaded. pi@raspberrypi:~ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 4deae2857b6f nvcr.io/nvidia/tritonserver:22.07-tf2-python-py3 \"tritonserver --mode\u2026\" 13 seconds ago Up 11 seconds 0 .0.0.0:4000->8000/tcp, :::4000->8000/tcp, 0 .0.0.0:4001->8001/tcp, :::4001->8001/tcp, 0 .0.0.0:4002->8002/tcp, :::4002->8002/tcp tritonserver-kura Note : if no container is created check that the \" Container Orchestration Service \" is enabled in the Kura UI. Full documentation for the service can be found here . Note : if you see an error in the logs like \"_Internal: Unable to initialize shared memory key 'triton_python_backend_shm_region 2' to requested size (67108864 bytes). If you are running Triton inside docker, use '--shm-size' flag to control the shared memory region size. Each Python backend model instance requires at least 64MBs of shared memory. \", you can update the default shared memory size allocated by the Docker daemon. Go to /etc/docker/daemon.json , set \"default-shm-size\": \"200m\" and restart the Docker daemon with: sudo systemctl restart docker .","title":"Triton component configuration"},{"location":"tutorials/AD-EdgeAI/#wire-graph","text":"Finally we can move to the \" Wire Graph \" UI and create the AI component (in the Emitters/Receiver menu) for interfacing with the Triton instance we just created. We'll call it Triton in this example. We just need to change two parameter in the configuration: InferenceEngineService Target Filter : we need to select the TritonContainerService we created at the step above inference.model.name : Since we're using an ensemble pipeline we need only that as our inference model. The resulting wire graph is the following: And that's it! We should now see the anomaly detection results coming to Kapua in addition to the SenseHat data.","title":"Wire graph"},{"location":"tutorials/AD-EdgeAI/#complete-example","text":"A similar but more complete example of the feature presented in this notebook is available in the official Kura\u2122 repository containing all the code and the configuration needed to make it work. Give it a try!","title":"Complete Example"}]}