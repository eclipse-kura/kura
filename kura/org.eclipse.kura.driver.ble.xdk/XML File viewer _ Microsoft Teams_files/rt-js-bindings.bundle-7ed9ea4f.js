!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@skype/rt-js-bindings",[],t):"object"==typeof exports?exports["@skype/rt-js-bindings"]=t():e["@skype/rt-js-bindings"]=t()}(window,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function o(e,t){var n=0;return e.replace(/%[dixs%]/g,function(e){var o=0;if("%"!==e[o++])return"";var r=e[o++];return"%"===r?"%":"s"===r?t[n++]:"d"===r||"i"===r?t[n++]:"x"===r?t[n++].toString(16):e})}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Trace=10]="Trace",e[e.Debug6=16]="Debug6",e[e.Debug5=18]="Debug5",e[e.Debug4=20]="Debug4",e[e.Debug3=30]="Debug3",e[e.Debug2=40]="Debug2",e[e.Debug1=50]="Debug1",e[e.Warning=60]="Warning",e[e.Error=70]="Error",e[e.Fatal=80]="Fatal",e[e.MetaData=90]="MetaData"}(t.LogLevel||(t.LogLevel={})),function(e){e[e.UseDefault=0]="UseDefault",e[e.Compress=1]="Compress",e[e.Disabled=2]="Disabled"}(t.LogFileCompression||(t.LogFileCompression={})),function(e){e[e.Raw=0]="Raw",e[e.Base64=1]="Base64"}(t.LogFileEncoding||(t.LogFileEncoding={})),function(e){e[e.Unencrypted=0]="Unencrypted",e[e.Encrypted=1]="Encrypted"}(t.LogFileEncryption||(t.LogFileEncryption={})),function(e){e[e.PEM=0]="PEM",e[e.DER=1]="DER",e[e.BER=2]="BER"}(t.CertStoreFormat||(t.CertStoreFormat={})),function(e){e[e.InsertFront=8]="InsertFront"}(t.AppenderFlags||(t.AppenderFlags={})),t.vsprintf=o,t.sprintf=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o(e,t)}},function(e,t,n){"use strict";function o(e){if(null===e)return-1;for(var t=0,n=e.length-1;n>=0;n--)t=37*t+e.charCodeAt(n)|0;var o="__auf_literal:";for(n=o.length-1;n>=0;n--)t=37*t+o.charCodeAt(n)|0;return t}function r(e,t){for(var n=t.name();n.length>0;){if(e[n])return e[n];var o=n.lastIndexOf(".");n=o<0?"":n.substr(0,o)}return e[""]?e[""]:l.LogLevel.Debug4}function i(e,t){var n=255;return t.forEach(function(t){var o=255;t.appender.levels()?o=Math.min(o,r(t.appender.levels(),e)):t.appender.receiveAll()||(o=Math.min(o,e.level())),n=Math.min(n,o)}),n}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0);!function(e){e[e.Unsafe=0]="Unsafe",e[e.Safe=1]="Safe",e[e.Inherited_Unsafe=2]="Inherited_Unsafe",e[e.Inherited_Safe=3]="Inherited_Safe",e[e.Blacklisted_Unsafe=4]="Blacklisted_Unsafe"}(a||(a={}));var c,u=function(){function e(e,t){this._level=l.LogLevel.Debug4,this._threshold=255,this._safe=a.Inherited_Unsafe,this._name=e,t&&(this._level=t.level(),this._safe=t.safe()?a.Inherited_Safe:a.Inherited_Unsafe,this._extendedInfo=t.extendedInfo())}return e.prototype.name=function(){return this._name},e.prototype.safe=function(){return this._safe===a.Safe||this._safe===a.Inherited_Safe},e.prototype.safety=function(){return this._safe},e.prototype.setSafety=function(e){this._safe=e},e.prototype.description=function(){return this._desc},e.prototype.setDescription=function(e){this._desc=e},e.prototype.level=function(){return this._level},e.prototype.setLevel=function(e){c.setLevel(this,e)},e.prototype._setLevel=function(e){this._level=e},e.prototype._setThreshold=function(e){this._threshold=e},e.prototype.isEnabled=function(e){return this._threshold<=e},e.prototype.setExtendedInfo=function(e){this._extendedInfo=e},e.prototype.extendedInfo=function(){return this._extendedInfo},e.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Trace,o(e),e].concat(t))},e.prototype.debug6=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Debug6,o(e),e].concat(t))},e.prototype.debug5=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Debug5,o(e),e].concat(t))},e.prototype.debug4=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Debug4,o(e),e].concat(t))},e.prototype.debug3=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Debug3,o(e),e].concat(t))},e.prototype.debug2=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Debug2,o(e),e].concat(t))},e.prototype.debug1=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Debug1,o(e),e].concat(t))},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Warning,o(e),e].concat(t))},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Error,o(e),e].concat(t))},e.prototype.fatal=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.Fatal,o(e),e].concat(t))},e.prototype.meta=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.log.apply(c,[this,l.LogLevel.MetaData,o(e),e].concat(t))},e}(),f=function(){function e(){}return e.instance=function(){return c},e.levelToString=function(e){return e<=l.LogLevel.Trace?"TRACE":e<=l.LogLevel.Debug6?"DEBUG6":e<=l.LogLevel.Debug5?"DEBUG5":e<=l.LogLevel.Debug4?"DEBUG4":e<=l.LogLevel.Debug3?"DEBUG3":e<=l.LogLevel.Debug2?"DEBUG2":e<=l.LogLevel.Debug1?"DEBUG1":e<=l.LogLevel.Warning?"WARN":e<=l.LogLevel.Error?"ERROR":e<=l.LogLevel.Fatal?"FATAL":(l.LogLevel.MetaData,"META")},e.levelFromString=function(e){return this._levelFromString[e]||parseInt(e,10)},e}();f._levelFromString={TRACE:l.LogLevel.Trace,DEBUG6:l.LogLevel.Debug6,DEBUG5:l.LogLevel.Debug5,DEBUG4:l.LogLevel.Debug4,DEBUG3:l.LogLevel.Debug3,DEBUG2:l.LogLevel.Debug2,DEBUG1:l.LogLevel.Debug1,WARN:l.LogLevel.Warning,ERROR:l.LogLevel.Error,FATAL:l.LogLevel.Fatal,META:l.LogLevel.MetaData},t.LogFactory=f;var p=function(e){function t(){var t=e.call(this)||this;return t._nextId=0,t._appenders=[],t._components={},t._componentBlacklist=[],t._components[""]=new u("",null),t}return s(t,e),t.prototype.toHex=function(e){return(4294967296+e).toString(16).substr(-8)},t.prototype.addAppender=function(e,t){void 0===t&&(t=0);var n=this._nextId++;return t&l.AppenderFlags.InsertFront?this._appenders.unshift({appender:e,handle:n}):this._appenders.push({appender:e,handle:n}),this.recalcComponentThresholds(),n},t.prototype.removeAppender=function(e){for(var t=0;t<this._appenders.length;t++)if(this._appenders[t].handle===e){this._appenders.splice(t,1);break}this.recalcComponentThresholds()},t.prototype.log=function(e,t,n,o){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];try{if(e.isEnabled(t)){var a={timestamp:(new Date).getTime(),component:e,level:t};this._appenders.forEach(function(s){(function(e,t,n){return!!e.appender.receiveAll()||(e.appender.levels()?n>=r(e.appender.levels(),t):n>=t.level())})(s,e,t)&&s.appender.log(a,n,o,i)})}}catch(e){var l=f.instance().component("RootToolsManager.LogFactoryErrors");f.instance().declareComponentSafe("RootToolsManager.LogFactoryErrors",!0);var c="object"==typeof i&&void 0!==i.length?i.length:"undefined";l.error("LogFactory logging failed %s: %s stack: %s args type: %s args_len: %s",e.name,e.message,e.stack,typeof i,c)}},t.prototype.parent=function(e){for(;;){var t=e.lastIndexOf(".");if(e=t>=0?e.substr(0,t):"",this._components[e])return this._components[e]}},t.prototype.children=function(e){var t=[];for(var n in this._components)this.parent(n).name()===e&&t.push(this._components[n]);return t},t.prototype.component=function(e){if(this._components[e])return this._components[e];var t=new u(e,this.parent(e));this._components[e]=t;var n=i(t,this._appenders);return t._setThreshold(n),t},t.prototype.rootComponent=function(){return this.component("")},t.prototype.setSafetyRecursive=function(e,t){var n=this;this.children(e).forEach(function(e){e.safety()!==a.Inherited_Safe&&e.safety()!==a.Inherited_Unsafe||(e.setSafety(t),n.setSafetyRecursive(e.name(),t))})},t.prototype.declareComponentSafe=function(e,t){var n=this.component(e);-1!==this._componentBlacklist.indexOf(n.name())?n.setSafety(a.Blacklisted_Unsafe):n.setSafety(t?a.Safe:a.Unsafe),this.setSafetyRecursive(e,t?a.Inherited_Safe:a.Inherited_Unsafe)},t.prototype.declareComponentDescription=function(e,t){this.component(e).setDescription(t)},t.prototype.setExtendedInfoRecursive=function(e,t){var n=this;this.children(e).forEach(function(e){void 0===e.extendedInfo()&&(e.setExtendedInfo(t),n.setExtendedInfoRecursive(e.name(),t))})},t.prototype.declareComponentExtendedInfo=function(e,t){var n=this.component(e);n.setExtendedInfo(t),this.setExtendedInfoRecursive(n.name(),t)},t.prototype.recalcComponentThresholds=function(){for(var e in this._components){var t=this._components[e],n=i(t,this._appenders);t._setThreshold(n)}},t.prototype.setLevel=function(e,t){if(""===e.name())for(var n in this._components){(s=this._components[n])._setLevel(t);var o=i(s,this._appenders);s._setThreshold(o)}else{var r=e.name()+".";e._setLevel(t),o=i(e,this._appenders);for(var n in e._setThreshold(o),this._components){var s;if((s=this._components[n]).name().substr(0,r.length)===r){s._setLevel(t);var a=i(s,this._appenders);s._setThreshold(a)}}}},t.prototype.setComponentBlacklist=function(e){for(var t in this._componentBlacklist=e,this._components){var n=this._components[t];-1!==this._componentBlacklist.indexOf(n.name())&&n.setSafety(a.Blacklisted_Unsafe)}},t}(f);c=new p},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function o(e){return(4294967296+e).toString(16).substr(-8)}function r(e,t){return(1e12+e).toString(10).substr(-t)}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(1),c=function(){function e(e){this._formatter=e||new u}return e.prototype.formatter=function(){return this._formatter},e.prototype.receiveAll=function(){return!1},e.prototype.levels=function(){return null},e}();t.AbstractLogAppender=c,function(e){e[e.Timestamp=1]="Timestamp",e[e.Component=4]="Component",e[e.Level=8]="Level",e[e.FullDate=32]="FullDate",e[e.LogId=64]="LogId"}(s=t.SLF_Flags||(t.SLF_Flags={}));var u=function(){function e(e){void 0===e&&(e=4294967295),this._flags=e}return e.prototype.format=function(e,t,n,i){var c="";if(this._flags&s.FullDate)c+=new Date(e.timestamp).toISOString()+" ";else if(this._flags&s.Timestamp){var u=new Date(e.timestamp);c+=r(u.getHours(),2)+":"+r(u.getMinutes(),2)+":"+r(u.getSeconds(),2)+"."+r(u.getMilliseconds(),2)+" "}return this._flags&s.LogId&&(c+="[#"+o(t)+"-"+(e.component.safe()?"S":"u")+"] "),this._flags&s.Level&&(c+="["+l.LogFactory.levelToString(e.level)+"] "),this._flags&s.Component&&(c+="["+e.component.name()+"] "),n||""===n?c+a.vsprintf(n,i):c+o(t)+": "+i.join(" ")},e}();t.StandardLogFormatter=u;var f=console,p=console.log||function(){},d=console.info||p,g=console.warn||d,h=console.error||g,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.log=function(e,t,n,o){o=o.slice(0);var r=e.level<=a.LogLevel.Debug3?p:e.level<=a.LogLevel.Debug1?d:e.level<=a.LogLevel.Warning?g:h;if(-1===t){var i=this.formatter().format(e,t,"",[]);"string"==typeof o[0]&&(i+=o.shift()),r.apply(f,[i].concat(o))}else{for(var s=void 0,l=[];s=n.match(/\s*%@\s*$/);)n=n.substr(0,n.length-s[0].length),l.unshift(o.pop());i=this.formatter().format(e,t,n,o),r.apply(f,[i].concat(l))}},t}(c);t.ConsoleAppender=v;var _=function(){function e(e){this._chained=e}return e.prototype.log=function(e,t,n,o){this._chained.log(e,t,n,o)},e.prototype.receiveAll=function(){return this._chained.receiveAll()},e.prototype.levels=function(){return this._chained.levels()},e}();t.ChainedLogAppender=_;var m=function(e){function t(t,n){var o=e.call(this,t)||this;return o._levels=n,o}return i(t,e),t.prototype.levels=function(){return this._levels},t}(_);t.wrapAppenderWithLogLevels=function(e,t){return new m(e,t)}},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n(0)),o(n(1)),o(n(5)),o(n(3)),o(n(10))},function(e,t,n){"use strict";function o(e,t){var n=[];for(var o in e)n.push(t(o,e[o]));return n}function r(e,t,n){if(null==e)return null==t||0===t.length;if(null==t)return null==e||0===e.length;if(e.length===t.length){for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}return!1}function i(e,t){return null==e?null==t:null==t?null==e:e.arg===t.arg&&e.op===t.op&&e.value===t.value}function s(e,t){return null==e?null==t||0===t.logId:null==t?null==e||0===e.logId:e.logId===t.logId&&e.name===t.name&&r(e.matchers,t.matchers,i)}function a(e,t){return null==e?null==t:null==t?null==e:e.component===t.component&&e.parsedLevel===t.level}function l(e,t){return null==e?null==t:null==t?null==e:e.component===t.component&&e.level===t.level}function c(e){return"Native"===e||"JavaScript"===e||"Mixed"===e}var u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=n(6),p=n(1),d=n(0),g=n(3),h=p.LogFactory.instance().component("RootToolsManager");p.LogFactory.instance().declareComponentSafe("RootToolsManager",!0);var v;!function(e){e[e.InternalBuild=0]="InternalBuild",e[e.PublicBuild=1]="PublicBuild"}(v=t.BuildType||(t.BuildType={}));var _=v.InternalBuild;t.setBuildType=function(e){var t=_;return _=e,t};var m=function(e){function t(t,n,o){var r=e.call(this)||this;return r._unmetConditions=[],r._rtMan=t,r._triggerCallback=n,r._ecsConfig=o,r.resetConditions(),r}return u(t,e),t.prototype.config=function(){return this._ecsConfig},t.prototype.configEquals=function(e){return this._ecsConfig.includeUnsafe===e.includeUnsafe&&this._ecsConfig.mutualSubmissionType===e.mutualSubmissionType&&this._ecsConfig.name===e.name&&this._ecsConfig.reenableAfterTriggering===e.reenableAfterTriggering&&this._ecsConfig.experimentTarget===e.experimentTarget&&s(this._ecsConfig.resetCondition,e.resetCondition)&&r(this._ecsConfig.conditions,e.conditions,s)&&r(this._ecsConfig.filters,e.filters,l)},t.prototype.nativeConfigEquals=function(e){return this._ecsConfig.includeUnsafe===e.includeUnsafe&&this._ecsConfig.name===e.name&&this._ecsConfig.reenableAfterTriggering===e.reenableAfterTriggering&&s(this._ecsConfig.resetCondition,e.resetCondition)&&r(this._ecsConfig.conditions,e.conditions,s)&&r(this._ecsConfig.filters,e.filters,a)},t.prototype.needReset=function(e){return!this.configEquals(e)},t.prototype.resetConditions=function(){this._unmetConditions=[];for(var e=0;e<this._ecsConfig.conditions.length;e++)this._unmetConditions.push(e)},t.prototype.matcherMatches=function(e,t){if(e.arg>=t.length)return!1;var n=t[e.arg],o="string"==typeof n?e.value:parseInt(e.value,10);return"="===e.op||"=="===e.op?n===o:"!="===e.op?n!==o:"<"===e.op?n<o:"<="===e.op?n<=o:">"===e.op?n>o:">="===e.op?n>=o:"CONTAINS"===e.op.toUpperCase()&&(""+n).indexOf(e.value)>=0},t.prototype.conditionMatches=function(e,t,n){if(t!==e.logId)return!1;if(e.matchers)for(var o=0;o<e.matchers.length;o++)if(!this.matcherMatches(e.matchers[o],n))return!1;return!0},t.prototype.log=function(e,t,n,o){if(0!==this._unmetConditions.length&&e.component!==h){var r=this._ecsConfig;r.resetCondition&&this.conditionMatches(r.resetCondition,t,o)&&(h.debug4("LogTrigger %s: resetCondition met",r.name),this.resetConditions());for(var i=0;i<this._unmetConditions.length;i++){var s=this._unmetConditions[i];if(this.conditionMatches(r.conditions[s],t,o)){h.debug4("LogTrigger %s: condition %s met",r.name,r.conditions[s].name),this._unmetConditions.splice(i,1);break}}0===this._unmetConditions.length&&(h.debug1("LogTrigger %s has triggered, trying to send the log",r.name),this._triggerCallback.call(this._rtMan,r),r.reenableAfterTriggering&&this.resetConditions())}},t.prototype.receiveAll=function(){return!0},t}(g.AbstractLogAppender),y=function(e){function t(t,n){var o=e.call(this)||this;return o._circularBuffer=[],o._circularBufferMaxSize=0,o._circularBuffer=[],o._circularBufferMaxSize=n,o._includeUnsafe=t,o}return u(t,e),t.prototype.formatMessage=function(e){for(var t=[],n=0;n<e.length;n++)"string"==typeof e[n]||"number"==typeof e[n]?t.push(e[n]):t.push(JSON.stringify(e[n]));return t},t.prototype.log=function(e,t,n,o){if(this._includeUnsafe||e.component.safe()){var r={md:e,logId:t,messages:this.formatMessage(o)};this._circularBuffer.push(r),this._circularBuffer.length>this._circularBufferMaxSize&&this._circularBuffer.shift()}},t.prototype.visit=function(e){for(var t=this._circularBuffer.length-1;t>=0;t--){var n=this._circularBuffer[t];if(!e(n.md,n.logId,n.messages))return}},t.prototype.needReset=function(e,t){return e!==this._includeUnsafe||t!==this._circularBufferMaxSize},t}(g.AbstractLogAppender),b=function(){function e(){this._first=!0,this._pending=[],this._components={},this._componentCount=0,this._lastts=0,this._base64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this._data="ULOG2"+String.fromCharCode(33)+String.fromCharCode(32)+String.fromCharCode(34)+String.fromCharCode(32)}return e.prototype._add8=function(e){if(this._pending.push(255&e),3===this._pending.length){var t=(this._pending[0]<<16)+(this._pending[1]<<8)+(this._pending[2]<<0),n=this._base64chars[t>>18&63]+this._base64chars[t>>12&63]+this._base64chars[t>>6&63]+this._base64chars[t>>0&63];this._data+=n,this._pending=[]}},e.prototype._add16=function(e){this._add8(e>>8&255),this._add8(e>>0&255)},e.prototype._add32=function(e){this._add8(e>>24&255),this._add8(e>>16&255),this._add8(e>>8&255),this._add8(e>>0&255)},e.prototype._add64=function(e){this._add32(e/4294967296|0),this._add32(0|e)},e.prototype._addS=function(e){for(var t=0;t<e.length;t++)this._add8(e.charCodeAt(t));this._add8(0)},e.prototype._close=function(){for(;this._pending.length;)this._add8(0)},e.prototype.log=function(e,t,n,o,r){var i=this._components[e.name()];i||(i=++this._componentCount,this._components[e.name()]=i,this._add8(2),this._add16(i),this._addS(e.name()),this._addS(""),this._addS(""),this._add8(e.safe()?1:0));var s=128;this._first&&(s|=2);var a=t-this._lastts;this._lastts=t,a>-128&&a<128&&(s|=1),this._add8(s),1&s?this._add8(a):this._add64(1e3*t),this._first&&(this._add32(1),this._add8(0),this._add16(0)),this._add16(i),this._add8(n),this._add32(o),this._add8(r.length);for(var l=0;l<r.length;l++)this._add8(8),this._addS(""+r[l]);this._first=!1},e.prototype.close=function(){this._add8(7),this._close()},e.prototype.data=function(){return this._data},e}(),L=function(){function e(){this._maxUploadSize=0,this._triggers={},this._defaultBuffers=[{size:2097152,level:d.LogLevel.Debug4}],this._defaultKillswitch={blacklist:[],whitelist:[]},this._defaultBlacklists={component:[],logline:[]},this._localLogLevels={},this._defaultExperimentTarget="Mixed",this._BRBCallback=null}return e.prototype.setDelegate=function(e){this._glue=e,this.registerListeners()},e.prototype.isDelegateSet=function(){return null!=this._glue},e.prototype.setNativeFunctions=function(e){this._native&&this._native.log_config.removeLogTriggerListener(this),this._native=e,this._native&&this._native.log_config.addLogTriggerListener(this)},e.prototype.applyLogLevels=function(){var e={};for(var t in this._localLogLevels)e[t]=this._localLogLevels[t];e[""]=e.root||d.LogLevel.Debug4,delete e.root;var n=o(e,function(e,t){return{component:e,level:t}});n.sort(function(e,t){return e.component.length-t.component.length}),n.forEach(function(e){return p.LogFactory.instance().component(e.component).setLevel(e.level)}),this._native&&this._native.log_config.setLogLevelConfig(n)},e.prototype.setLocalLogLevelConfig=function(e){this._localLogLevels=e,this.applyLogLevels()},e.prototype.parseMatcher=function(e){return null==e||null==e.arg||null==e.op||null==e.value?null:{arg:e.arg,op:e.op,value:e.value}},e.prototype.parseCondition=function(e){if(null==e||null==e.logId)return null;if(e.matchers&&!(e.matchers instanceof Array))return null;var t={name:e.name||function(e){return(4294967296+e).toString(16).substr(-8)}(e.logId),logId:e.logId,matchers:[]};if(e.matchers&&e.matchers.length)for(var n=0,o=e.matchers;n<o.length;n++){var r=o[n],i=this.parseMatcher(r);i&&t.matchers.push(i)}return t},e.prototype.parseFilter=function(e){return null==e||null==e.component||0===e.component.length?null:{component:e.component,level:e.level,parsedLevel:p.LogFactory.levelFromString(e.level)}},e.prototype.parseConfig=function(e,t,n){if(null==e)return null;if(!(e.conditions instanceof Array)||0==e.conditions.length)return null;if(!(e.filters instanceof Array)||0==e.filters.length)return null;if(e.resetCondition&&!this.parseCondition(e.resetCondition))return null;for(var o={name:e.name||t+"->"+n,ecsNs:t,reenableAfterTriggering:e.reenableAfterTriggering||!1,mutualSubmissionType:e.mutualSubmissionType||"",includeUnsafe:_!==v.PublicBuild&&(e.includeUnsafe||!1),experimentTarget:c(e.experimentTarget)&&e.experimentTarget||this._defaultExperimentTarget,conditions:[],resetCondition:null==e.resetCondition?e.resetCondition:this.parseCondition(e.resetCondition),filters:[]},r=0,i=e.conditions;r<i.length;r++){var s=i[r],a=this.parseCondition(s);a&&o.conditions.push(a)}for(var l=0,u=e.filters;l<u.length;l++){var f=u[l],p=this.parseFilter(f);p&&o.filters.push(p)}return 0===o.conditions.length?null:o},e.prototype.isExperimentListed=function(e,t,n,o){return!!e&&(!(!o||!e.some(function(e){return"*"===e.namespace}))||e.some(function(e){return e.namespace===t&&(e.experiment===n||"*"==e.experiment)}))},e.prototype.isExperimentAllowed=function(e,t,n){return!this.isExperimentListed(e.blacklist,t,n,!0)||this.isExperimentListed(e.whitelist,t,n,!1)},e.prototype.findTrigger=function(e,t){for(var n in e)if(e[n].configEquals(t))return n;return null},e.prototype.findTriggerByNativeConfig=function(e,t){for(var n in e)if(e[n].nativeConfigEquals(t))return n;return null},e.prototype.OnEcsChange=function(){var e=this;return null==this._glue?f.Resolved():this._glue.fetchEcsConfig("SkypeRootTools","ULBaseline").then(function(t){h.debug4("Reloading ULBaseline config - new config: %@",t),t||(h.warn("No ULBaseline config"),t={}),e._maxUploadSize=t.logUpload&&t.logUpload.maxSize||1024;var n=[],r=e._triggers;e._triggers={};var i=(t.logUpload&&t.logUpload.maxSize||1024)/100,s=t.circularBuffer&&t.circularBuffer.enabled,a=t.circularBuffer&&t.circularBuffer.buffers||e._defaultBuffers,l=t.circularBuffer&&t.circularBuffer.storeUnsafe;e._defaultExperimentTarget=c(t.defaultExperimentTarget)&&t.defaultExperimentTarget||"Mixed";var u=t.killswitch||e._defaultKillswitch,v=t.blacklists||e._defaultBlacklists;v.component.length>0&&p.LogFactory.instance().setComponentBlacklist(v.component);var _={};(t.componentLevels||[]).forEach(function(e){return _[e.component]=e.level}),function e(t,n,o){return n<t.length?o(t[n]).then(function(){return e(t,n+1,o)}):f.Resolved()}(t.configPaths||[],0,function(t){return e._glue.fetchEcsConfig(t.ns,t.key).then(function(o){var i=o instanceof Array?o:[o];h.debug4("Reloading ECS config for %s->%s - new config: %@",t.ns,t.key,i);for(var a=0,c=i;a<c.length;a++){var f=c[a];if(null!=f){var p=e.parseConfig(f,t.ns,t.key);if(null!=p)if("JavaScript"===p.experimentTarget||"Mixed"===p.experimentTarget)if(h.debug2("Parsed ECS config for %s->%s - %@",t.ns,t.key,p),e.isExperimentAllowed(u,t.ns,p.name)){h.debug2("Allowing %s->%s:%s according to killswitch",t.ns,t.key,p.name),s=!0;var d=e.findTrigger(r,p);null!=d?(h.debug2("Triggers updated, keeping trigger %s",p.name),e._triggers[d]=r[d],delete r[d]):n.push(p),p.filters&&p.filters.forEach(function(e){return _[e.component]=Math.min(_[e.component]||255,e.parsedLevel)}),p.includeUnsafe&&(l=!0)}else h.debug2("Disallowing %s->%s according to killswitch",t.ns,t.key);else h.debug4("Skipping %s->%s, targeted for %s",t.ns,t.key,p);else h.error("Failed to parse ECS config for %s->%s",t.ns,t.key)}}})}).always(function(){for(var t in e.applyLogLevels(),r)h.debug2("Triggers updated, removing trigger %s",r[t].config().name),p.LogFactory.instance().removeAppender(+t);if(n.forEach(function(t){h.debug2("Triggers updated, adding trigger %s",t.name);var n=new m(e,e._triggered,t),o=p.LogFactory.instance().addAppender(n);e._triggers[String(o)]=n}),_[""]=_.root||d.LogLevel.Debug4,delete _.root,!e._circularBuffer||s&&!e._circularBuffer.needReset(l,i)?e._circularBuffer&&(Object.keys(r).length>0||n.length>0?(h.debug2("Buffer updated, reapplying log levels, removing log levels wrapper"),p.LogFactory.instance().removeAppender(e._circularBufferHandle),e._circularBufferHandle=null):h.debug2("Buffer updated, no change")):(h.debug2("Buffer updated, removing existing buffer"),p.LogFactory.instance().removeAppender(e._circularBufferHandle),e._circularBuffer=null,e._circularBufferHandle=null),s&&(e._circularBuffer||(h.debug2("Buffer updated, adding new buffer (storeUnsafe=%d,maxSize=%s)",l,i),e._circularBuffer=new y(l,i)),null==e._circularBufferHandle&&(h.debug2("Creating log level wrapper"),e._circularBufferHandle=p.LogFactory.instance().addAppender(g.wrapAppenderWithLogLevels(e._circularBuffer,_),d.AppenderFlags.InsertFront))),e._native){var c=o(_,function(e,t){return{component:e,level:t}});c.sort(function(e,t){return e.component.length-t.component.length}),e._native.log_config.setLogBufferConfig(s,{storeUnsafe:l,buffers:a},c);var u=[];for(var f in e._triggers){var v=e._triggers[f].config();u.push({name:v.name,ecsNs:v.ecsNs,conditions:v.conditions,resetCondition:v.resetCondition,includeUnsafe:v.includeUnsafe,reenableAfterTriggering:v.reenableAfterTriggering,filters:v.filters.map(function(e){return{component:e.component,level:e.parsedLevel}}),dumpFile:!1,metadata:{}})}e._native.log_config.setLogTriggerConfig(u,{})}})})},e.prototype.filterMatches=function(e,t,n,o){for(var r=0;r<o.length;r++)if((""===o[r].component||e.component.name()===o[r].component||e.component.name().substr(0,o[r].component.length)===o[r].component&&"."===e.component.name().charAt(o[r].component.length))&&e.level>=o[r].parsedLevel)return!0;return!1},e.prototype._send=function(e,t){null!=this._glue&&(this._glue.sendTelemetry("638b8ba2bae14e07aa5d73ddb5d5e5c5-297b8412-5df3-4a83-83c4-7b76c6c5d3f0-7104",{logTriggerName:e.name,logEcsNs:e.ecsNs,logdata:t}),h.debug4("LogSender::send, sent %d bytes",t.length))},e.prototype.triggered=function(e,t){},e.prototype.triggeredPartially=function(e,t,n,o,r){var i=this.findTriggerByNativeConfig(this._triggers,e);if(i){var s={level:t.level,component:p.LogFactory.instance().component(t.component),timestamp:t.timestamp};this._triggers[i].log(s,n,o,r)}},e.prototype.reset=function(e){var t=this.findTriggerByNativeConfig(this._triggers,e);t&&this._triggers[t].resetConditions()},e.prototype.dumpLogBuffer=function(e,t){var n=this;if(this._circularBuffer){var o=new b,r=e.filter.map(function(e){return{component:"root"===e.component?"":e.component,parsedLevel:e.level}}),i={matchedLines:0,totalLines:0};this._circularBuffer.visit(function(e,t,s){return i.totalLines++,n.filterMatches(e,t,s,r)&&(i.matchedLines++,o.log(e.component,e.timestamp,e.level,t,s)),o._data.length<n._maxUploadSize}),o.close();var s=o.data();if(h.debug4("dumpLogBuffer: dumped %d of %d lines, size of payload: %d",i.matchedLines,i.totalLines,null!=s?s.length:0),this._native){var a=f.Defer();return this._native.log_config.mergeAndDumpLogBuffer(s,e,t,function(e){return a.resolve(e)}),a.promise()}return f.Resolved(s)}return h.warn("dumpLogBuffer: no log buffer enabled"),f.Rejected()},e.prototype._triggered=function(e){var t=this,n={compression:d.LogFileCompression.Compress,encoding:d.LogFileEncoding.Base64,encryption:d.LogFileEncryption.Encrypted,maxRotations:0,maxSize:this._maxUploadSize,reverse:!0},o={includeUnsafe:e.includeUnsafe,filter:e.filters.map(function(e){return{component:e.component,level:e.parsedLevel}}),reverse:!0};this.dumpLogBuffer(o,n).then(function(n){return t._send(e,n)})},e.prototype.sendBRBEvent=function(e){try{if(h.debug2("sendBRBEvent %@",e),null!=this._glue&&"function"==typeof this._glue.sendLoggingEventToNative){var t={eventType:"uploadBRB",mutualSubmissionType:"call",payload:e};this._glue.sendLoggingEventToNative(JSON.stringify(t),"")}}catch(e){h.error("sendBRBEvent %s: %s",e.name,e.message)}},e.prototype.setBRBCallback=function(e){h.debug2("setBRBCallback"),null!=this._glue?"function"==typeof this._glue.setNativeLoggingEventCallback?this._BRBCallback=e:h.warn("setBRBCallback: RootToolsManagerDelegate missing setNativeLoggingEventCallback method"):h.warn("setBRBCallback: RootToolsManagerDelegate is not set")},e.prototype.registerListeners=function(){var e=this;null!=this._glue&&"function"==typeof this._glue.setNativeLoggingEventCallback?this._glue.setNativeLoggingEventCallback(function(t,n){return e.handleNativeLoggingEvent(t,n)}):h.warn("registerListeners: RootToolsManagerDelegate missing setNativeLoggingEventCallback method")},e.prototype.handleNativeLoggingEvent=function(e,t){try{h.debug2("Native Log event message: %s aux: %s",e,t);var n=JSON.parse(e);if(n.eventType&&"uploadBRB"===n.eventType){if("function"!=typeof this._BRBCallback)return void h.warn("BRBCallback not set, ignoring native event");h.debug4("Sending BRB callback: %@",n.payload),this._BRBCallback(n.payload)}}catch(e){h.error("handleNativeLoggingEvent %s: %s",e.name,e.message)}},e.prototype.logExternalForDDL=function(e,t){try{if(h.debug2("logExternalForDDL %s %s",e,t),null!=this._glue&&"function"==typeof this._glue.sendLoggingEventToNative){var n={eventType:"logInSClog",payload:{message:e,parameters:t}};this._glue.sendLoggingEventToNative(JSON.stringify(n),"")}else h.warn("ignoring logExternalForDDL, delegate misconfigured")}catch(e){h.error("logExternalForDDL %s: %s",e.name,e.message)}},e}();t.RootToolsManager=new L},function(e,t,n){"use strict";(function(e){function n(e){return null!==e&&void 0!==e&&"function"==typeof e.then}function o(e){return null!==e&&void 0!==e&&"function"==typeof e.cancel}function r(e,n){if(!t.config.catchExceptions)return e();try{return e()}catch(e){return n(e)}}function i(t){f.push(t),1===f.length&&(p?e(s):setTimeout(s,0))}function s(){var e=f;f=[];for(var t=0;t<e.length;t++)e[t]()}function a(){return new u.SyncTask}function l(e){return(new u.SyncTask).resolve(e).promise()}function c(e){var t=a(),r=!1;return t.onCancel(function(t){e.forEach(function(e){o(e)&&u.SyncTask.cancelOtherInternal(e,t)})}),e.forEach(function(e){n(e)?e.then(function(e){r||(r=!0,t.resolve(e))},function(e){r||(r=!0,t.reject(e))}):r||(r=!0,t.resolve(e))}),t.promise()}Object.defineProperty(t,"__esModule",{value:!0}),t.config={exceptionsToConsole:!0,catchExceptions:!0,traceEnabled:!1,exceptionHandler:void 0,unhandledErrorHandler:function(e){throw e}},t.fromThenable=function(e){var t=a();return e.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().thenAsync(function(e){return e})};var u,f=[],p=void 0!==e;t.asyncCallback=i,function(e){var s=function(){function e(){this._completedSuccess=!1,this._completedFail=!1,this._traceEnabled=!1,this._cancelCallbacks=[],this._wasCanceled=!1,this._wasExplicitlyCanceled=!1,this._resolving=!1,this._storedCallbackSets=[],this._mustHandleError=!0}return e.prototype._addCallbackSet=function(t,n){var o=this,r=new e;return r.onCancel(function(e){t.wasCanceled=!0,t.cancelContext=e,o._cancelInternal(e)}),t.task=r,this._storedCallbackSets.push(t),n?this._mustHandleError=!1:r._mustHandleError=!1,this._resolving||(this._completedSuccess?this._resolveSuccesses():this._completedFail&&this._resolveFailures()),r.promise()},e.prototype.onCancel=function(e){return this._completedSuccess||this._completedFail||(this._wasCanceled?e(this._cancelContext):this._cancelCallbacks.push(e)),this},e.prototype.then=function(e,t){return this._addCallbackSet({successFunc:e,failFunc:t},!0)},e.prototype.thenAsync=function(e,t){return this._addCallbackSet({successFunc:e,failFunc:t,asyncCallback:!0},!0)},e.prototype.catch=function(e){return this._addCallbackSet({failFunc:e},!0)},e.prototype.always=function(e){return this._addCallbackSet({successFunc:e,failFunc:e},!0)},e.prototype.setTracingEnabled=function(e){return this._traceEnabled=e,this},e.prototype.finally=function(e){return this._addCallbackSet({successFunc:e,failFunc:e},!1),this},e.prototype.done=function(e){return this._addCallbackSet({successFunc:e},!1),this},e.prototype.fail=function(e){return this._addCallbackSet({failFunc:e},!1),this},e.prototype.resolve=function(e){return this._checkState(!0),this._completedSuccess=!0,this._storedResolution=e,this._cancelCallbacks=[],this._resolveSuccesses(),this},e.prototype.reject=function(t){return this._checkState(!1),this._completedFail=!0,this._storedErrResolution=t,this._cancelCallbacks=[],this._resolveFailures(),e._enforceErrorHandled(this),this},e.prototype._checkState=function(e){if(this._completedSuccess||this._completedFail){this._completeStack&&console.error(this._completeStack.message,this._completeStack.stack);var n="Failed to "+(e?"resolve":"reject")+": the task is already "+(this._completedSuccess?"resolved":"rejected");throw new Error(n)}(t.config.traceEnabled||this._traceEnabled)&&(this._completeStack=new Error("resolve"))},e._enforceErrorHandled=function(n){n._mustHandleError&&(e._rejectedTasks.push(n),e._enforceErrorHandledTimer||(e._enforceErrorHandledTimer=setTimeout(function(){e._enforceErrorHandledTimer=void 0;var n=e._rejectedTasks;e._rejectedTasks=[],n.forEach(function(e,n){e._mustHandleError&&t.config.unhandledErrorHandler(e._storedErrResolution)})},0)))},e.prototype.cancel=function(e){if(this._wasExplicitlyCanceled)throw new Error("Already Canceled");this._wasExplicitlyCanceled=!0,this._cancelInternal(e)},e.prototype._cancelInternal=function(e){var t=this;if(!this._wasCanceled){this._wasCanceled=!0,this._cancelContext=e;var n=this._cancelCallbacks;this._cancelCallbacks=[],n.length>0&&n.forEach(function(e){t._completedSuccess||t._completedFail||e(t._cancelContext)})}},e.cancelOtherInternal=function(e,t){var n=e;n._storedCallbackSets&&n._cancelInternal?n._cancelInternal(t):e.cancel(t)},e.prototype.promise=function(){return this},e.prototype._resolveSuccesses=function(){var e=this;for(this._resolving=!0;this._storedCallbackSets.length;){var t=this._storedCallbackSets;this._storedCallbackSets=[],t.forEach(function(t){t.asyncCallback?i(function(){return e._resolveSuccessCallback(t)}):e._resolveSuccessCallback(t)})}this._resolving=!1},e.prototype._resolveSuccessCallback=function(t){var i=this;t.successFunc?r(function(){var r=t.successFunc(i._storedResolution);o(r)&&(t.wasCanceled?e.cancelOtherInternal(r,t.cancelContext):t.task.onCancel(function(t){return e.cancelOtherInternal(r,t)})),n(r)?r.then(function(e){t.task.resolve(e)},function(e){t.task.reject(e)}):t.task.resolve(r)},function(e){i._handleException(e,"SyncTask caught exception in success block: "+e.toString()),t.task.reject(e)}):t.task.resolve(this._storedResolution)},e.prototype._resolveFailures=function(){var e=this;for(this._resolving=!0;this._storedCallbackSets.length;){var t=this._storedCallbackSets;this._storedCallbackSets=[],t.forEach(function(t){t.asyncCallback?i(function(){return e._resolveFailureCallback(t)}):e._resolveFailureCallback(t)})}this._resolving=!1},e.prototype._resolveFailureCallback=function(t){var i=this;t.failFunc?r(function(){var r=t.failFunc(i._storedErrResolution);o(r)&&(t.wasCanceled?e.cancelOtherInternal(r,t.cancelContext):t.task.onCancel(function(t){return e.cancelOtherInternal(r,t)})),n(r)?r.then(function(e){t.task.resolve(e)},function(e){t.task.reject(e)}):t.task.resolve(r)},function(e){i._handleException(e,"SyncTask caught exception in failure block: "+e.toString()),t.task.reject(e)}):t.task.reject(this._storedErrResolution)},e.prototype._handleException=function(e,n){t.config.exceptionsToConsole&&console.error(n),t.config.exceptionHandler&&t.config.exceptionHandler(e)},e.prototype.toEs6Promise=function(){var e=this;return new Promise(function(t,n){return e.then(t,n)})},e._rejectedTasks=[],e}();e.SyncTask=s}(u||(u={})),t.all=function(e){if(0===e.length)return l([]);var t,r=a(),i=e.length,s=Array(e.length);r.onCancel(function(t){e.forEach(function(e){o(e)&&u.SyncTask.cancelOtherInternal(e,t)})});var c=function(){0==--i&&(void 0!==t?r.reject(t):r.resolve(s))};return e.forEach(function(e,o){n(e)?e.then(function(e){s[o]=e,c()},function(e){void 0===t&&(t=void 0===e||e),c()}):(s[o]=e,c())}),r.promise()},t.Defer=a,t.Resolved=l,t.Rejected=function(e){return(new u.SyncTask).reject(e).promise()},t.race=c,t.raceTimer=function(e,t){var n=a(),o=setTimeout(function(){n.resolve({timedOut:!0})},t);return c([e.then(function(e){return clearTimeout(o),{timedOut:!1,result:e}}),n.promise()])}}).call(this,n(7).setImmediate)},function(e,t,n){(function(e){function o(e,t){this._id=e,this._clearFn=t}var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(8),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function o(e){delete a[e]}function r(e){if(l)setTimeout(r,0,e);else{var t=a[e];if(t){l=!0;try{!function(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o)}}(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var i,s=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){r(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&r(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){r(e.data)},i=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;i=function(t){var n=c.createElement("script");n.onreadystatechange=function(){r(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():i=function(e){setTimeout(r,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[s]=o,i(s),s++},u.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(2),n(9))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(){g&&p&&(g=!1,p.length?d=p.concat(d):h=-1,d.length&&s())}function s(){if(!g){var e=r(i);g=!0;for(var t=d.length;t;){for(p=d,d=[];++h<t;)p&&p[h].run();h=-1,t=d.length}p=null,g=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===o||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var c,u,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:o}catch(e){u=o}}();var p,d=[],g=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new a(e,t)),1!==d.length||g||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(e){return e},i=!0,s=r,a={},l=0,c=/^([0-9][0-9]?):([^<>\*\{\}&'\"\/\\?^`|~\s]+)$/;!function(e){e[e.MSA=1]="MSA",e[e.S4B_Bridge=2]="S4B_Bridge",e[e.PSTN=4]="PSTN",e[e.SkypeId=8]="SkypeId",e[e.Thread=19]="Thread",e[e.LegacyShortCircuit=20]="LegacyShortCircuit",e[e.OneToOneTextMessage=21]="OneToOneTextMessage",e[e.GroupTextMessage=22]="GroupTextMessage",e[e.Bot=28]="Bot",e[e.InternalSkype=48]="InternalSkype"}(o||(o={}));var u=[o.Thread,o.InternalSkype,o.Bot];t.enableAnonymization=function(e){i=e},t.useTagger=function(e){s=e||r},function(e){function t(e){return i?e?a[e]||function(e){return a[e]="u"+ ++l}(e):null:e}e.UserName=function(e){var n=t(e);return s(n)},e.Mri=function(e){var n,o=e.match(c);if(o){var r=Number(o[1]),i=o[2];n=-1!=u.indexOf(r)?e:r+":"+t(i)}else n=t(e);return s(n)},e.Omit=function(e){var t;return t=i?"number"==typeof e?19229:"string"==typeof e?e.charAt(0)+"...":null:e,s(t)}}(t.pii||(t.pii={}))}])});
//# sourceMappingURL=https://statics.teams.microsoft.com/hashedjs/rt-js-bindings.bundle.js-5882836a.map